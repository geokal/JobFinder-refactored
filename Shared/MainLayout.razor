@@inherits LayoutComponentBase
@@attribute [Authorize]
@@using LinqKit
@@using Newtonsoft.Json
@@using QuizManager.Data; 
@@using System.Security.Claims
@@using Microsoft.EntityFrameworkCore;
@@using QuizManager.Models
@@using System.Net.Mail
@@using Microsoft.AspNetCore.Components.Forms
@@using System.Net.Http.Json
@@using System.Net.Http
@@using System.Collections.Generic
@@using System.Linq
@@using System.Threading.Tasks
@@using System.Globalization;
@@using System.Text;
@@using OfficeOpenXml;
@@using OfficeOpenXml.Style;
@@using System.Drawing; 
@@using System.Text.Json;


<style>
    body {
        background-color: #f0f0f0;
        color: #000000;
    }

    /* Add CSS to style the login link */
    .about-link {
        color: white; /* Set color to white */
        font-weight: bold; /* Set font weight to bold */
    }

.hidden {
    display: none;
}

.custom-card {
    background-color: #f8f9fa; /* Light gray background */
        border: 1px solid #0056b3; /* Light border */
    border-radius: 8px; /* Rounded corners */
    padding: 15px; /* Padding inside the card */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Subtle shadow */
}


.custom-card .btn-primary {
    border-radius: 15px; /* Set the desired border radius for rounded corners */
    padding: 30px 50px; /* Adjust the padding to make the button bigger */
    background-color: #007bff; /* Primary button color */
    border-color: #007bff; /* Primary button border color */
}

.custom-card .btn-primary:hover {
    background-color: #0056b3; /* Darker blue on hover */
    border-color: #004085; /* Darker border on hover */
}

    /* Add padding to the bottom of the content area */
    .content-area {
        flex-direction: column;
        right: 0px; /* Adjust this value as needed to move it more/less to the right */
        top: 20px; /* Adjust this value as needed to move it more/less to the top */
        display: flex; /* Use flexbox */
        flex-wrap: wrap; /* Allow items to wrap to the next line */
        justify-content: space-between; /* Distribute items evenly with space between */
    }

    /* Your existing style for the fixed links */
    .useful-links {
        position: fixed;
        bottom: 0;
        left: 0;
        padding: 10px;
        background-color: #f0f0f0; /* Background color */
        border-top: 1px solid #ddd; /* Border on top */
        width: 100%; /* Full width */
    }

        .useful-links ul {
            list-style-type: none; /* Remove bullet points */
            padding: 0;
            margin: 0;
        }

            .useful-links ul li {
                display: inline; /* Display links inline */
                margin-right: 20px; /* Add spacing between links */
            }

        .useful-links a {
            text-decoration: none; /* Remove underline from links */
            color: #333; /* Link color */
        }

.hidden {
    display: none;
}

    .card-container {
        width: 100%; /* Ensure the container takes the full width */
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        padding: 20px; /* Optional: Add some padding */
    }

    .rectangular-card {
        width: 500px; /* Set the desired width */
        height: 150px; /* Set the desired height */
        border-radius: 15px; /* Set the desired border radius for rounded corners */
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Optional: add some shadow for depth */
        margin: 10px; /* Optional: add some margin */
        display: flex;
        align-items: center;
        padding: 20px; /* Add some padding inside the card */
    }

    .custom-card .card-body {
        display: flex;
        justify-content: space-between;
        width: 100%;
        align-items: center;
    }

    .custom-card .text {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
    }

    .custom-card .btn-container {
        display: flex;
        align-items: center;
    }

    .custom-card .card-title {
        font-size: 1.25rem; /* Slightly larger title */
        font-weight: bold; /* Bold title */
        margin: 0;
        padding-bottom: 5px; /* Optional: Add some space between title and text */
    }

    .custom-card .card-text {
        margin: 0;
    }

    .custom-width-card {
        width: 600px; /* Adjust the width as needed */
    }

    .custom-button-spacing {
        margin-right: 10px; /* Adjust the margin as needed */
    }


    @@@@keyframes blink {
        0% {
            opacity: 1;
        }

        50% {
            opacity: 0;
        }

        100% {
            opacity: 1;
        }
    }

    .blinking {
        animation: blink 1s infinite;
        color: black; /* Change the color to give more emphasis */
        font-size: 2em; /* Adjust the font size as needed */
        text-align: left; /* Center align the text */
    }

    .table-bordered {
        border: 1px solid #dee2e6;
    }

        .table-bordered th,
        .table-bordered td {
            border: 1px solid #dee2e6;
        }

    .table {
        margin-top: 20px;
    }

    .row-dark-gray {
        background-color: #343a40; /* Dark gray color */
        color: white; /* Optional: Makes the text color white for better readability */
        padding: 10px; /* Optional: Adds some padding for better spacing */
        border-radius: 5px; /* Optional: Adds rounded corners */
    }

    .descriptions {
        white-space: normal; /* Ensures text wraps within the cell */
        max-width:700px; /* Adjust as needed to limit width */
        word-wrap: break-word; /* Allows long words to break and wrap */
    }

    .row {
        margin-bottom: 15px;
    }

    .form-label {
        font-weight: bold;
    }

    .form-control-textarea {
        width: 100%; /* Adjust the width to be more prominent */
        height: 150px; /* Set a suitable height */
    }

    .form-label {
        display: block; /* Ensure the label is on a new line above the textarea */
        margin-bottom: 0.5rem; /* Adjust margin as needed */
    }

    .btn-danger{
        background-color: red; /* Darker blue on hover */
        border-color: #004085; /* Darker border on hover */
    }

    .job-position-frame {
        border: 2px solid #333; /* Darker border color */
        margin-bottom: 10px; /* Space between job positions */
        border-radius: 5px; /* Rounded corners */
    }

    .btn-showjobapplications {
        background-color: darkcyan;
        color: white;
        border: none;
        padding: 10px 20px;
        cursor: pointer;
        border-radius: 5px;
        font-size: 16px;
    }

.chart-container {
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: space-between;
        align-items: flex-start;
        margin-top: 20px;
    }

    .chart-item {
        display: flex;
        flex-direction: column;
        align-items: safe center;
        margin: 10px;
        flex: 1 1 45%; /* Ensures each item takes up to 45% of the container width */
    }

        .chart-item button {
            width: 100%; /* Ensure the button takes full width of the container */
            max-width: 300px; /* Ensure buttons have the same maximum width */
            height: 60px; /* Ensure buttons have the same height */
            font-size: 16px; /* Adjust font size */
            padding: 10px; /* Adjust padding */
            margin-bottom: 10px; /* Add some space between the button and the chart */
        }

        .chart-item canvas {
            max-width: 100%; /* Ensure the canvas fits within its container */
            max-height: 300px;
        }

    .internship-position-frame {
        border: 2px solid #333; /* Darker border color */
        margin-bottom: 10px; /* Space between job positions */
        border-radius: 5px; /* Rounded corners */
    }
    .internshipstatus-dimosieumeni {
        background-color: lightblue; /* Light blue */
    }

    .internshipstatus-midimosieumeni {
        background-color: lightcoral; /* Light brown */
    }

    .internshipstatus-aposirmeni {
        background-color: sandybrown; /* Light brown */
    }

    .job-position-frame {
        /* General styles for internship table rows */
        font-size: 16px;
    }
    .jobstatus-dimosieumeni {
        background-color: lightblue; /* Light blue */
    }

    .jobstatus-midimosieumeni {
        background-color: lightcoral; /* Light brown */
    }

    .jobstatus-aposirmeni {
        background-color: sandybrown; /* Light brown */
    }

         .companythesisstatus-dimosieumeni {
        background-color: lightblue; /* Light green */
    }

    .companythesisstatus-midimosieumeni {
        background-color: lightcoral; /* Light brown */
    }

    .companythesisstatus-aposirmeni {
        background-color: sandybrown; /* Light brown */
    }

    .companythesis-position-frame {
        border: 2px solid #333; /* Darker border color */
        margin-bottom: 10px; /* Space between job positions */
        border-radius: 5px; /* Rounded corners */
    }



    .professorthesisstatus-midimosieumeni {
        background-color: lightcoral; /* Light brown */
    }

    .professorthesisstatus-aposirmeni {
        background-color: sandybrown; /* Light brown */
    }

    .professorthesis-position-frame {
        border: 2px solid #333; /* Darker border color */
        margin-bottom: 10px; /* Space between job positions */
        border-radius: 5px; /* Rounded corners */
    }


    .modal.fade.show.d-block {
        display: block;
    }

    .modal-dialog-centered {
        display: flex;
        align-items: center;
        min-height: calc(100% - 1rem);
    }

    .btn-editcompanyjob {
        border: none;
        background: transparent;
        padding: 0;
        cursor: pointer;
        font-size: 1.25rem; /* Adjust icon size */
        color: #007bff; /* Default color */
    }

    .btn-editcompanyjob:hover {
        color: #0056b3; /* Color on hover */
    }

    .btn-editcompanyjob i {
        font-size: 1.25rem; /* Ensure the icon size is appropriate */
    }

    .btn-deletejobapplicationasstudent {
        background: none;
        border: none;
        color: #dc3545; /* Bootstrap danger color */
        padding: 0;
        font-size: 1.25rem; /* Adjust size as needed */
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
    }

        .btn-deletejobapplicationasstudent .fas {
            margin: 0;
        }

    .btn-deletethesisapplication {
        background: none;
        border: none;
        color: #dc3545; /* Bootstrap danger color */
        padding: 0;
        font-size: 1.25rem; /* Adjust size as needed */
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
    }

        .btn-deletethesisapplication .fas {
            margin: 0;
        }

    .light-cadetblue-text {
        color: cadetblue; /* You can use any shade of gray or a specific color code */
    }

    .collapse {
        display: none;
    }

        .collapse.show {
            display: block;
        }

    .form-check {
        display: flex;
        align-items: center;
    }

    .form-check-label {
        margin-right: 8px; /* Adjust space between label and checkbox */
    }

    .shake {
        animation: shake 0.3s;
    }

    @@@@keyframes shake {
        0% { transform: translateX(0); }
        25% { transform: translateX(-5px); }
        50% { transform: translateX(5px); }
        75% { transform: translateX(-5px); }
        100% { transform: translateX(0); }
    }

    .error {
        border-color: red;
    }

    .input-group {
        position: relative;
    }

    .input-group-append {
        position: absolute;
        top: 50%;
        right: 0.75rem;
        transform: translateY(-50%);
    }

    .input-group-text {
        border: none;
        background: transparent;
        padding: 0;
    }

    .form-control-sm {
        padding-right: 2.5rem; /* Adjust this value based on the arrow size */
    }

    .fas.fa-chevron-down {
        color: #000; /* Adjust color as needed */
    }

    .icon-button {
        color: black; /* Adjust color as needed */
    }

    .modal-dialog {
        max-width: 90%;
    }

    .modal-body {
        max-height: 60vh; /* Adjust as needed */
        overflow-y: auto; /* Adds a scrollbar if content overflows */
        word-wrap: break-word; /* Ensures long words break into the next line */
    }

    .input-group-textfortelephone {
        background-color: #e9ecef; /* Adjust as needed */
        border: 1px solid #ced4da; /* Adjust as needed */
        padding: 0.375rem 0.75rem; /* Adjust padding if needed */
        border-radius: 0.25rem; /* Adjust border radius if needed */
        line-height: 1.5; /* Adjust line-height for vertical alignment */
        display: flex;
        align-items: center; /* Centers content vertically */
    }

    .dark-gray-button {
        background-color: #343a40; /* Dark gray color */
        color: white;
        border: none;
    }

        .dark-gray-button:hover {
            background-color: #23272b; /* Darker shade on hover */
        }

    .blurred {
        filter: blur(2px); /* Adjust this value as needed for the blur effect */
        background-color: rgba(255, 255, 255, 0.6); /* Semi-transparent white background */
    }

        .blurred td {
            color: black; /* Ensure text remains readable */
        }


    body {
        background-color: #f0f0f0; /* Change to your desired background color */
        color: #000000; /* Change to your desired text color */
    }

    #autocomplete {
        width: 100%; /* Adjust width as needed */
        padding: 8px; /* Adjust padding as needed */
    }

    .list-group-item:hover {
    background-color: #f0f0f0;
    cursor: pointer;
}

.calendar-section {
    padding: 20px; /* Adds padding inside the section */
    background-color: #f9f9f9;
    border-radius: 10px;
    border: 2px solid black;
    margin-top: 20px;
    position: relative; /* Ensure it's the reference point for absolute positioning */
    height: 430px; /* Set a height for the calendar section */
    box-sizing: border-box; /* Ensures padding is included in height */
}

.calendar {
    position: absolute; /* Position it absolutely within the calendar-section */
    top: 200px; /* Align to the top of the section */
    left: 0; /* Align to the left of the section */
    width: 100%; /* Make the calendar take the full width of the section */
    height: 107%; /* Make the calendar take the full height of the section */
    background-color: #f0f0f0;
    padding: 10px; /* Padding inside the calendar */
    font-size: 0.9em;
    border: 2px solid #007BFF;
    border-radius: 10px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    overflow: auto; /* Allows for scrolling if content overflows */
    box-sizing: border-box; /* Ensures padding is included in width and height */
    color: black; /* Set text color to black for all text inside the calendar */
}

.calendar-header {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-bottom: 10px;
    color: black; /* Ensure header text is black */
}

.calendar-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 2px;
    padding: 0;
    text-align: center; /* Center text */
}

.day-header {
    font-weight: bold;
    background-color: #f0f0f0;
    padding: 5px;
    font-size: 0.8em;
    white-space: normal;
    word-wrap: break-word;
    max-width: 30px; /* Ensure headers don't overflow */
    overflow: hidden; /* Hide overflowed text */
    text-overflow: ellipsis; /* Add ellipsis if text is too long */
    color: blue;      /* Make the text blue */
    font-weight: bold; /* Make the text bold */
}

.empty-cell {
    background-color: transparent;
}

.day-cell {
    border: 1px solid #ddd;
    text-align: center;
    cursor: pointer;
    padding: 10px;
    transition: background-color 0.3s;
    font-size: 0.9em;
    min-width: 30px; /* Ensure day cells have a minimum width */
    color: black; /* Set day cell text color to black */
}

.day-cell:hover {
    background-color: #e0e0e0;
}

.event-indicator {
    color: darkred;
    font-weight: bold;
}

.pagination {
    display: flex;
    justify-content: center;
    margin-top: 10px;
}

.btn-small {
    padding: 5px 10px;
    background-color: black; /* Set the background to black */
    color: white;
    border: none;
    cursor: pointer;
    margin: 0 5px;
    transition: background-color 0.3s;
    border-radius: 5px;
}

.btn-small:hover {
    background-color: #333; /* Slightly lighter black for hover effect (optional) */
    color: white; 
}

.event-day {
    background-color: green;
    color: white;
    padding: 5px;
    border-radius: 8px;
    display: inline-block;
    box-sizing: content-box;
}

.highlighted {
    background-color: green;
    color: white;
    padding: 5px;
    border-radius: 8px;
    display: inline-block;
    box-sizing: content-box;
}

.shake {
    animation: shake 0.5s ease-in-out;
}

@@@@keyframes shake {
    0% { transform: translateX(0); }
    25% { transform: translateX(-5px); }
    50% { transform: translateX(5px); }
    75% { transform: translateX(-5px); }
    100% { transform: translateX(0); }
}

.error {
    border-color: red !important;
}


.selected-areas-container {
    margin-top: 10px;
    max-width: 40%; 
}

.selected-areas-list {
    width: 100%; 
    margin: 0;
    padding: 0;
    list-style: none;
    border: 1px solid #ccc;
    border-radius: 4px;
    overflow: hidden;
}

.selected-keywords-container {
    margin-top: 10px;
    max-width: 40%; 
}

.selected-keywords-list {
    width: 100%; 
    margin: 0;
    padding: 0;
    list-style: none;
    border: 1px solid #ccc;
    border-radius: 4px;
    overflow: hidden;
}


.custom-modal .modal-content {
    width: 50%; /* Adjust the width as needed */
    max-width: 700px; /* Optional, sets a max width for very large screens */
    margin: auto; /* Centers the modal */
}

.custom-modal .modal {
    display: block; /* Ensure the modal is visible */
    background-color: rgba(0, 0, 0, 0.5); /* Optional, for a backdrop */
}

.custom-width .form-control-calendarEventModal {
    width: 150px; /* Adjust the width to your desired size */
}

/* Modern Button Styling with Black Border */
.modern-button {
    background-color: #28a745; /* Success green */
    color: white; /* White text color */
    border: 2px solid black; /* Black border */
    padding: 12px 24px; /* Spacious padding */
    font-size: 16px; /* Larger font size */
    font-weight: 500; /* Medium weight for the text */
    border-radius: 8px; /* Rounded corners */
    cursor: pointer; /* Pointer cursor on hover */
    transition: all 0.3s ease; /* Smooth transition effect */
    display: inline-flex; /* Align icon and text inline */
    align-items: center; /* Center icon and text vertically */
}

.modern-button i {
    margin-right: 8px; /* Space between icon and text */
}

.modern-button:hover {
    background-color: #218838; /* Darker green on hover */
    transform: translateY(-2px); /* Slight lift effect */
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); /* Subtle shadow on hover */
    border-color: #1e7e34; /* Darker border color on hover */
}

.modern-button:active {
    transform: translateY(0); /* Button 'press' effect */
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); /* Reduced shadow when pressed */
}

.modern-button:focus {
    outline: none; /* Remove focus outline */
    box-shadow: 0 0 0 4px rgba(0, 123, 255, 0.5); /* Blue focus border */
}

.blink-arrow-1 {
        animation: blink1 1s infinite;
    }

    .blink-arrow-2 {
        animation: blink2 1s infinite;
    }

    .blink-arrow-3 {
        animation: blink3 1s infinite;
    }

    @@@@keyframes blink1 {
        0% { color: transparent; }
        33% { color: darkblue; }
        66% { color: transparent; }
        100% { color: darkblue; }
    }

    @@@@keyframes blink2 {
        0% { color: transparent; }
        33% { color: transparent; }
        66% { color: darkblue; }
        100% { color: darkblue; }
    }

    @@@@keyframes blink3 {
        0% { color: transparent; }
        33% { color: transparent; }
        66% { color: transparent; }
        100% { color: darkblue; }
    }


    .nav-tabs .nav-link {
        color: #333333; 
        font-weight: bold; 
    }
    
    .nav-tabs .nav-link.active {
        background-color: #0d6efd; 
        color: white; 
        border-color: #dee2e6 #dee2e6 #0d6efd; 
    }
    
    .nav-tabs .nav-link:not(.active):hover {
        color: #555555;
        border-color: #e9ecef #e9ecef #dee2e6;
    }

    .loading-bar-container {
        width: 100%;
        height: 8px; /* Thick bar */
        background-color: #f0e0ff; /* Light purple background */
        overflow: hidden;
        position: relative;
        margin-bottom: 20px;
        border-radius: 4px; /* Rounded corners */
    }

    .loading-bar {
        height: 100%;
        width: 100%;
        background: linear-gradient(90deg, 
                      #4b0082 0%,     /* Dark purple (indigo) */
                      #6a0dad 50%,   /* Medium purple */
                      #4b0082 100%);  /* Dark purple */
        background-size: 200% 100%;
        animation: loading 1.5s linear infinite;
        border-radius: 4px; /* Match container */
    }

    @@@@keyframes loading {
        0% {
            transform: translateX(-100%);
        }
        100% {
            transform: translateX(100%);
        }
    }

        .pagination-item {
        padding: 5px 10px;
        margin: 0 2px;
        cursor: pointer;
        color: white;
        background-color: #007bff;
        border-radius: 4px;
        user-select: none;
    }

    .pagination-item:hover:not(.disabled) {
        background-color: #0069d9;
    }

    .pagination-item.active {
        background-color: #0056b3;
        font-weight: bold;
    }

    .pagination-item.disabled {
        background-color: #cccccc;
        cursor: not-allowed;
        opacity: 0.6;
    }

    .pagination-ellipsis {
        padding: 5px 10px;
        margin: 0 2px;
    }

    .admintable thead th {
    font-weight: 600;
    text-transform: uppercase;
    font-size: 0.85rem;
    letter-spacing: 0.5px;
}

  .calendar-legend {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        margin-top: 15px;
        gap: 20px;
    }
    
    .legend-item {
        display: flex;
        align-items: center;
        margin: 5px;
    }
    
    .legend-color {
        display: inline-block;
        width: 16px;
        height: 16px;
        border-radius: 50%;
        margin-right: 8px;
    }
    
    .today-legend {
        background-color: #007bff; /* Blue color for today */
    }
    
    .event-day-legend {
        background-color: #28a745; /* Green color for event day */
    }
    
    .legend-parenthesis {
        color: #8b0000; /* Dark red color for parenthesis */
        font-weight: bold;
        margin-right: 8px;
    }
    
    .legend-text {
        font-size: 0.9rem;
    }

    .event-indicators {
        display: flex;
        flex-direction: column;
        gap: 2px;
        margin-top: 4px;
        font-size: 0.8rem;
    }
    
    .company-indicator {
        color: #511573; 
    }
    
    .professor-indicator {
        color: #8C1523;
    }

</style>


<PageTitle>Job Finder</PageTitle>


<div class="page">
    <main class="main">
        <div class="top-row px-4">
            <AccessControl />
            
        </div>

        <article class="content px-4">
            @@Body
        </article>

        <AuthorizeView>
            <Authorized>
                <div class="card-container">
                    
                    @@if (!HideAllInitialCards())
                    {
                        <div class="content-area">
                            @@if (UserRole == "Student")
                            {
                                <StudentLayoutSection @@key="UserRole" />
                            }
                            else if (UserRole == "Company")
                            {
                                <CompanyLayoutSection @@key="UserRole"
                                                     EditCompanyThesisDetailsRequested="EditCompanyThesisDetails"
                                                     UpdateThesisStatusAsCompanyRequested="OnCompanyThesisStatusChangeRequested"
                                                     ToggleCompanyThesesExpandedRequested="ToggleCompanyThesesExpanded"
                                                     ToggleCompanyThesesExpandedForProfessorInterestRequested="ToggleCompanyThesesExpandedForProfessorInterest"
                                                     ConfirmAndAcceptStudentThesisApplicationAsCompanyRequested="OnConfirmAndAcceptStudentThesisApplicationAsCompanyRequested"
                                                     CompanyThesisApplicantsMap="companyThesisApplicantsMap"
                                                     ProfessorDataCache="professorDataCache"
                                                     IsModalVisibleToEditCompanyThesisDetails="isModalVisibleToEditCompanyThesisDetails"
                                                     SelectedCompanyThesis="selectedCompanyThesis"
                                                     ShowExpandedAreasInCompanyThesisEditModalAsCompany="showExpandedAreasInCompanyThesisEditModalAsCompany" />
                            }
                            else if (UserRole == "Professor")
                            {
                                <ProfessorLayoutSection @@key="UserRole" />
                            }
                            else if (UserRole == "Research Group")
                            {
                                <ResearchGroupLayoutSection @@key="UserRole" />
                            }
                        </div>
                    }

                </div>
            </Authorized>
        </AuthorizeView>
    </main>
</div>
