@inherits LayoutComponentBase
@attribute [Authorize]
@using LinqKit
@using Newtonsoft.Json
@using QuizManager.Data; 
@using System.Security.Claims
@using Microsoft.EntityFrameworkCore;
@using QuizManager.Models
@using System.Net.Mail
@inject FileUploadService FileUploadService
@inject Data.AppDbContext dbContext
@inject Microsoft.AspNetCore.Components.Authorization.AuthenticationStateProvider AuthenticationStateProvider
@using Microsoft.AspNetCore.Components.Forms
@using System.Net.Http.Json
@using System.Net.Http
@inject HttpClient HttpClient
@inject NavigationManager NavigationManager
@inject InternshipEmailService InternshipEmailService
@using System.Collections.Generic
@using System.Linq
@using System.Threading.Tasks
@inject IJSRuntime JS
@using System.Globalization;
@using System.Text;
@using OfficeOpenXml; 
@using OfficeOpenXml;
@using OfficeOpenXml.Style;
@using System.Drawing; 
@using System.Text.Json;


<style>
    body {
        background-color: #f0f0f0;
        color: #000000;
    }

    /* Add CSS to style the login link */
    .about-link {
        color: white; /* Set color to white */
        font-weight: bold; /* Set font weight to bold */
    }

.hidden {
    display: none;
}

.custom-card {
    background-color: #f8f9fa; /* Light gray background */
        border: 1px solid #0056b3; /* Light border */
    border-radius: 8px; /* Rounded corners */
    padding: 15px; /* Padding inside the card */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Subtle shadow */
}


.custom-card .btn-primary {
    border-radius: 15px; /* Set the desired border radius for rounded corners */
    padding: 30px 50px; /* Adjust the padding to make the button bigger */
    background-color: #007bff; /* Primary button color */
    border-color: #007bff; /* Primary button border color */
}

.custom-card .btn-primary:hover {
    background-color: #0056b3; /* Darker blue on hover */
    border-color: #004085; /* Darker border on hover */
}

    /* Add padding to the bottom of the content area */
    .content-area {
        flex-direction: column;
        right: 0px; /* Adjust this value as needed to move it more/less to the right */
        top: 20px; /* Adjust this value as needed to move it more/less to the top */
        display: flex; /* Use flexbox */
        flex-wrap: wrap; /* Allow items to wrap to the next line */
        justify-content: space-between; /* Distribute items evenly with space between */
    }

    /* Your existing style for the fixed links */
    .useful-links {
        position: fixed;
        bottom: 0;
        left: 0;
        padding: 10px;
        background-color: #f0f0f0; /* Background color */
        border-top: 1px solid #ddd; /* Border on top */
        width: 100%; /* Full width */
    }

        .useful-links ul {
            list-style-type: none; /* Remove bullet points */
            padding: 0;
            margin: 0;
        }

            .useful-links ul li {
                display: inline; /* Display links inline */
                margin-right: 20px; /* Add spacing between links */
            }

        .useful-links a {
            text-decoration: none; /* Remove underline from links */
            color: #333; /* Link color */
        }

.hidden {
    display: none;
}

    .card-container {
        width: 100%; /* Ensure the container takes the full width */
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        padding: 20px; /* Optional: Add some padding */
    }

    .rectangular-card {
        width: 500px; /* Set the desired width */
        height: 150px; /* Set the desired height */
        border-radius: 15px; /* Set the desired border radius for rounded corners */
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Optional: add some shadow for depth */
        margin: 10px; /* Optional: add some margin */
        display: flex;
        align-items: center;
        padding: 20px; /* Add some padding inside the card */
    }

    .custom-card .card-body {
        display: flex;
        justify-content: space-between;
        width: 100%;
        align-items: center;
    }

    .custom-card .text {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
    }

    .custom-card .btn-container {
        display: flex;
        align-items: center;
    }

    .custom-card .card-title {
        font-size: 1.25rem; /* Slightly larger title */
        font-weight: bold; /* Bold title */
        margin: 0;
        padding-bottom: 5px; /* Optional: Add some space between title and text */
    }

    .custom-card .card-text {
        margin: 0;
    }

    .custom-width-card {
        width: 600px; /* Adjust the width as needed */
    }

    .custom-button-spacing {
        margin-right: 10px; /* Adjust the margin as needed */
    }


    @@keyframes blink {
        0% {
            opacity: 1;
        }

        50% {
            opacity: 0;
        }

        100% {
            opacity: 1;
        }
    }

    .blinking {
        animation: blink 1s infinite;
        color: black; /* Change the color to give more emphasis */
        font-size: 2em; /* Adjust the font size as needed */
        text-align: left; /* Center align the text */
    }

    .table-bordered {
        border: 1px solid #dee2e6;
    }

        .table-bordered th,
        .table-bordered td {
            border: 1px solid #dee2e6;
        }

    .table {
        margin-top: 20px;
    }

    .row-dark-gray {
        background-color: #343a40; /* Dark gray color */
        color: white; /* Optional: Makes the text color white for better readability */
        padding: 10px; /* Optional: Adds some padding for better spacing */
        border-radius: 5px; /* Optional: Adds rounded corners */
    }

    .descriptions {
        white-space: normal; /* Ensures text wraps within the cell */
        max-width:700px; /* Adjust as needed to limit width */
        word-wrap: break-word; /* Allows long words to break and wrap */
    }

    .row {
        margin-bottom: 15px;
    }

    .form-label {
        font-weight: bold;
    }

    .form-control-textarea {
        width: 100%; /* Adjust the width to be more prominent */
        height: 150px; /* Set a suitable height */
    }

    .form-label {
        display: block; /* Ensure the label is on a new line above the textarea */
        margin-bottom: 0.5rem; /* Adjust margin as needed */
    }

    .btn-danger{
        background-color: red; /* Darker blue on hover */
        border-color: #004085; /* Darker border on hover */
    }

    .job-position-frame {
        border: 2px solid #333; /* Darker border color */
        margin-bottom: 10px; /* Space between job positions */
        border-radius: 5px; /* Rounded corners */
    }

    .btn-showjobapplications {
        background-color: darkcyan;
        color: white;
        border: none;
        padding: 10px 20px;
        cursor: pointer;
        border-radius: 5px;
        font-size: 16px;
    }

.chart-container {
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: space-between;
        align-items: flex-start;
        margin-top: 20px;
    }

    .chart-item {
        display: flex;
        flex-direction: column;
        align-items: safe center;
        margin: 10px;
        flex: 1 1 45%; /* Ensures each item takes up to 45% of the container width */
    }

        .chart-item button {
            width: 100%; /* Ensure the button takes full width of the container */
            max-width: 300px; /* Ensure buttons have the same maximum width */
            height: 60px; /* Ensure buttons have the same height */
            font-size: 16px; /* Adjust font size */
            padding: 10px; /* Adjust padding */
            margin-bottom: 10px; /* Add some space between the button and the chart */
        }

        .chart-item canvas {
            max-width: 100%; /* Ensure the canvas fits within its container */
            max-height: 300px;
        }

    .internship-position-frame {
        border: 2px solid #333; /* Darker border color */
        margin-bottom: 10px; /* Space between job positions */
        border-radius: 5px; /* Rounded corners */
    }
    .internshipstatus-dimosieumeni {
        background-color: lightblue; /* Light blue */
    }

    .internshipstatus-midimosieumeni {
        background-color: lightcoral; /* Light brown */
    }

    .internshipstatus-aposirmeni {
        background-color: sandybrown; /* Light brown */
    }

    .job-position-frame {
        /* General styles for internship table rows */
        font-size: 16px;
    }
    .jobstatus-dimosieumeni {
        background-color: lightblue; /* Light blue */
    }

    .jobstatus-midimosieumeni {
        background-color: lightcoral; /* Light brown */
    }

    .jobstatus-aposirmeni {
        background-color: sandybrown; /* Light brown */
    }

         .companythesisstatus-dimosieumeni {
        background-color: lightblue; /* Light green */
    }

    .companythesisstatus-midimosieumeni {
        background-color: lightcoral; /* Light brown */
    }

    .companythesisstatus-aposirmeni {
        background-color: sandybrown; /* Light brown */
    }

    .companythesis-position-frame {
        border: 2px solid #333; /* Darker border color */
        margin-bottom: 10px; /* Space between job positions */
        border-radius: 5px; /* Rounded corners */
    }



    .professorthesisstatus-midimosieumeni {
        background-color: lightcoral; /* Light brown */
    }

    .professorthesisstatus-aposirmeni {
        background-color: sandybrown; /* Light brown */
    }

    .professorthesis-position-frame {
        border: 2px solid #333; /* Darker border color */
        margin-bottom: 10px; /* Space between job positions */
        border-radius: 5px; /* Rounded corners */
    }


    .modal.fade.show.d-block {
        display: block;
    }

    .modal-dialog-centered {
        display: flex;
        align-items: center;
        min-height: calc(100% - 1rem);
    }

    .btn-editcompanyjob {
        border: none;
        background: transparent;
        padding: 0;
        cursor: pointer;
        font-size: 1.25rem; /* Adjust icon size */
        color: #007bff; /* Default color */
    }

    .btn-editcompanyjob:hover {
        color: #0056b3; /* Color on hover */
    }

    .btn-editcompanyjob i {
        font-size: 1.25rem; /* Ensure the icon size is appropriate */
    }

    .btn-deletejobapplicationasstudent {
        background: none;
        border: none;
        color: #dc3545; /* Bootstrap danger color */
        padding: 0;
        font-size: 1.25rem; /* Adjust size as needed */
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
    }

        .btn-deletejobapplicationasstudent .fas {
            margin: 0;
        }

    .btn-deletethesisapplication {
        background: none;
        border: none;
        color: #dc3545; /* Bootstrap danger color */
        padding: 0;
        font-size: 1.25rem; /* Adjust size as needed */
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
    }

        .btn-deletethesisapplication .fas {
            margin: 0;
        }

    .light-cadetblue-text {
        color: cadetblue; /* You can use any shade of gray or a specific color code */
    }

    .collapse {
        display: none;
    }

        .collapse.show {
            display: block;
        }

    .form-check {
        display: flex;
        align-items: center;
    }

    .form-check-label {
        margin-right: 8px; /* Adjust space between label and checkbox */
    }

    .shake {
        animation: shake 0.3s;
    }

    @@keyframes shake {
        0% { transform: translateX(0); }
        25% { transform: translateX(-5px); }
        50% { transform: translateX(5px); }
        75% { transform: translateX(-5px); }
        100% { transform: translateX(0); }
    }

    .error {
        border-color: red;
    }

    .input-group {
        position: relative;
    }

    .input-group-append {
        position: absolute;
        top: 50%;
        right: 0.75rem;
        transform: translateY(-50%);
    }

    .input-group-text {
        border: none;
        background: transparent;
        padding: 0;
    }

    .form-control-sm {
        padding-right: 2.5rem; /* Adjust this value based on the arrow size */
    }

    .fas.fa-chevron-down {
        color: #000; /* Adjust color as needed */
    }

    .icon-button {
        color: black; /* Adjust color as needed */
    }

    .modal-dialog {
        max-width: 90%;
    }

    .modal-body {
        max-height: 60vh; /* Adjust as needed */
        overflow-y: auto; /* Adds a scrollbar if content overflows */
        word-wrap: break-word; /* Ensures long words break into the next line */
    }

    .input-group-textfortelephone {
        background-color: #e9ecef; /* Adjust as needed */
        border: 1px solid #ced4da; /* Adjust as needed */
        padding: 0.375rem 0.75rem; /* Adjust padding if needed */
        border-radius: 0.25rem; /* Adjust border radius if needed */
        line-height: 1.5; /* Adjust line-height for vertical alignment */
        display: flex;
        align-items: center; /* Centers content vertically */
    }

    .dark-gray-button {
        background-color: #343a40; /* Dark gray color */
        color: white;
        border: none;
    }

        .dark-gray-button:hover {
            background-color: #23272b; /* Darker shade on hover */
        }

    .blurred {
        filter: blur(2px); /* Adjust this value as needed for the blur effect */
        background-color: rgba(255, 255, 255, 0.6); /* Semi-transparent white background */
    }

        .blurred td {
            color: black; /* Ensure text remains readable */
        }


    body {
        background-color: #f0f0f0; /* Change to your desired background color */
        color: #000000; /* Change to your desired text color */
    }

    #autocomplete {
        width: 100%; /* Adjust width as needed */
        padding: 8px; /* Adjust padding as needed */
    }

    .list-group-item:hover {
    background-color: #f0f0f0;
    cursor: pointer;
}

.calendar-section {
    padding: 20px; /* Adds padding inside the section */
    background-color: #f9f9f9;
    border-radius: 10px;
    border: 2px solid black;
    margin-top: 20px;
    position: relative; /* Ensure it's the reference point for absolute positioning */
    height: 430px; /* Set a height for the calendar section */
    box-sizing: border-box; /* Ensures padding is included in height */
}

.calendar {
    position: absolute; /* Position it absolutely within the calendar-section */
    top: 200px; /* Align to the top of the section */
    left: 0; /* Align to the left of the section */
    width: 100%; /* Make the calendar take the full width of the section */
    height: 107%; /* Make the calendar take the full height of the section */
    background-color: #f0f0f0;
    padding: 10px; /* Padding inside the calendar */
    font-size: 0.9em;
    border: 2px solid #007BFF;
    border-radius: 10px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    overflow: auto; /* Allows for scrolling if content overflows */
    box-sizing: border-box; /* Ensures padding is included in width and height */
    color: black; /* Set text color to black for all text inside the calendar */
}

.calendar-header {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-bottom: 10px;
    color: black; /* Ensure header text is black */
}

.calendar-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 2px;
    padding: 0;
    text-align: center; /* Center text */
}

.day-header {
    font-weight: bold;
    background-color: #f0f0f0;
    padding: 5px;
    font-size: 0.8em;
    white-space: normal;
    word-wrap: break-word;
    max-width: 30px; /* Ensure headers don't overflow */
    overflow: hidden; /* Hide overflowed text */
    text-overflow: ellipsis; /* Add ellipsis if text is too long */
    color: blue;      /* Make the text blue */
    font-weight: bold; /* Make the text bold */
}

.empty-cell {
    background-color: transparent;
}

.day-cell {
    border: 1px solid #ddd;
    text-align: center;
    cursor: pointer;
    padding: 10px;
    transition: background-color 0.3s;
    font-size: 0.9em;
    min-width: 30px; /* Ensure day cells have a minimum width */
    color: black; /* Set day cell text color to black */
}

.day-cell:hover {
    background-color: #e0e0e0;
}

.event-indicator {
    color: darkred;
    font-weight: bold;
}

.pagination {
    display: flex;
    justify-content: center;
    margin-top: 10px;
}

.btn-small {
    padding: 5px 10px;
    background-color: black; /* Set the background to black */
    color: white;
    border: none;
    cursor: pointer;
    margin: 0 5px;
    transition: background-color 0.3s;
    border-radius: 5px;
}

.btn-small:hover {
    background-color: #333; /* Slightly lighter black for hover effect (optional) */
    color: white; 
}

.event-day {
    background-color: green;
    color: white;
    padding: 5px;
    border-radius: 8px;
    display: inline-block;
    box-sizing: content-box;
}

.highlighted {
    background-color: green;
    color: white;
    padding: 5px;
    border-radius: 8px;
    display: inline-block;
    box-sizing: content-box;
}

.shake {
    animation: shake 0.5s ease-in-out;
}

@@keyframes shake {
    0% { transform: translateX(0); }
    25% { transform: translateX(-5px); }
    50% { transform: translateX(5px); }
    75% { transform: translateX(-5px); }
    100% { transform: translateX(0); }
}

.error {
    border-color: red !important;
}


.selected-areas-container {
    margin-top: 10px;
    max-width: 40%; 
}

.selected-areas-list {
    width: 100%; 
    margin: 0;
    padding: 0;
    list-style: none;
    border: 1px solid #ccc;
    border-radius: 4px;
    overflow: hidden;
}

.selected-keywords-container {
    margin-top: 10px;
    max-width: 40%; 
}

.selected-keywords-list {
    width: 100%; 
    margin: 0;
    padding: 0;
    list-style: none;
    border: 1px solid #ccc;
    border-radius: 4px;
    overflow: hidden;
}


.custom-modal .modal-content {
    width: 50%; /* Adjust the width as needed */
    max-width: 700px; /* Optional, sets a max width for very large screens */
    margin: auto; /* Centers the modal */
}

.custom-modal .modal {
    display: block; /* Ensure the modal is visible */
    background-color: rgba(0, 0, 0, 0.5); /* Optional, for a backdrop */
}

.custom-width .form-control-calendarEventModal {
    width: 150px; /* Adjust the width to your desired size */
}

/* Modern Button Styling with Black Border */
.modern-button {
    background-color: #28a745; /* Success green */
    color: white; /* White text color */
    border: 2px solid black; /* Black border */
    padding: 12px 24px; /* Spacious padding */
    font-size: 16px; /* Larger font size */
    font-weight: 500; /* Medium weight for the text */
    border-radius: 8px; /* Rounded corners */
    cursor: pointer; /* Pointer cursor on hover */
    transition: all 0.3s ease; /* Smooth transition effect */
    display: inline-flex; /* Align icon and text inline */
    align-items: center; /* Center icon and text vertically */
}

.modern-button i {
    margin-right: 8px; /* Space between icon and text */
}

.modern-button:hover {
    background-color: #218838; /* Darker green on hover */
    transform: translateY(-2px); /* Slight lift effect */
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); /* Subtle shadow on hover */
    border-color: #1e7e34; /* Darker border color on hover */
}

.modern-button:active {
    transform: translateY(0); /* Button 'press' effect */
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); /* Reduced shadow when pressed */
}

.modern-button:focus {
    outline: none; /* Remove focus outline */
    box-shadow: 0 0 0 4px rgba(0, 123, 255, 0.5); /* Blue focus border */
}

.blink-arrow-1 {
        animation: blink1 1s infinite;
    }

    .blink-arrow-2 {
        animation: blink2 1s infinite;
    }

    .blink-arrow-3 {
        animation: blink3 1s infinite;
    }

    @@keyframes blink1 {
        0% { color: transparent; }
        33% { color: darkblue; }
        66% { color: transparent; }
        100% { color: darkblue; }
    }

    @@keyframes blink2 {
        0% { color: transparent; }
        33% { color: transparent; }
        66% { color: darkblue; }
        100% { color: darkblue; }
    }

    @@keyframes blink3 {
        0% { color: transparent; }
        33% { color: transparent; }
        66% { color: transparent; }
        100% { color: darkblue; }
    }


    .nav-tabs .nav-link {
        color: #333333; 
        font-weight: bold; 
    }
    
    .nav-tabs .nav-link.active {
        background-color: #0d6efd; 
        color: white; 
        border-color: #dee2e6 #dee2e6 #0d6efd; 
    }
    
    .nav-tabs .nav-link:not(.active):hover {
        color: #555555;
        border-color: #e9ecef #e9ecef #dee2e6;
    }

    .loading-bar-container {
        width: 100%;
        height: 8px; /* Thick bar */
        background-color: #f0e0ff; /* Light purple background */
        overflow: hidden;
        position: relative;
        margin-bottom: 20px;
        border-radius: 4px; /* Rounded corners */
    }

    .loading-bar {
        height: 100%;
        width: 100%;
        background: linear-gradient(90deg, 
                      #4b0082 0%,     /* Dark purple (indigo) */
                      #6a0dad 50%,   /* Medium purple */
                      #4b0082 100%);  /* Dark purple */
        background-size: 200% 100%;
        animation: loading 1.5s linear infinite;
        border-radius: 4px; /* Match container */
    }

    @@keyframes loading {
        0% {
            transform: translateX(-100%);
        }
        100% {
            transform: translateX(100%);
        }
    }

        .pagination-item {
        padding: 5px 10px;
        margin: 0 2px;
        cursor: pointer;
        color: white;
        background-color: #007bff;
        border-radius: 4px;
        user-select: none;
    }

    .pagination-item:hover:not(.disabled) {
        background-color: #0069d9;
    }

    .pagination-item.active {
        background-color: #0056b3;
        font-weight: bold;
    }

    .pagination-item.disabled {
        background-color: #cccccc;
        cursor: not-allowed;
        opacity: 0.6;
    }

    .pagination-ellipsis {
        padding: 5px 10px;
        margin: 0 2px;
    }

    .admintable thead th {
    font-weight: 600;
    text-transform: uppercase;
    font-size: 0.85rem;
    letter-spacing: 0.5px;
}

  .calendar-legend {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        margin-top: 15px;
        gap: 20px;
    }
    
    .legend-item {
        display: flex;
        align-items: center;
        margin: 5px;
    }
    
    .legend-color {
        display: inline-block;
        width: 16px;
        height: 16px;
        border-radius: 50%;
        margin-right: 8px;
    }
    
    .today-legend {
        background-color: #007bff; /* Blue color for today */
    }
    
    .event-day-legend {
        background-color: #28a745; /* Green color for event day */
    }
    
    .legend-parenthesis {
        color: #8b0000; /* Dark red color for parenthesis */
        font-weight: bold;
        margin-right: 8px;
    }
    
    .legend-text {
        font-size: 0.9rem;
    }

    .event-indicators {
        display: flex;
        flex-direction: column;
        gap: 2px;
        margin-top: 4px;
        font-size: 0.8rem;
    }
    
    .company-indicator {
        color: #511573; 
    }
    
    .professor-indicator {
        color: #8C1523;
    }

</style>


<PageTitle>Job Finder</PageTitle>


<div class="page">
    <main class="main">
        <div class="top-row px-4">
            <AccessControl />
            <!-- Add CSS class to the login link -->
            @*
            <a class="about-link" href="https://docs.microsoft.com/aspnet/" target="_blank">About</a>
            *@
        </div>

        <article class="content px-4">
            @Body
        </article>

        <AuthorizeView>
            <Authorized>
                <div class="card-container">
                    @*
                    <div class="card">
                    HOME PAGE CARD TO BE HIDDEN (press on X-Trend to Go to Home)
                    <div class="card-body">
                    <h5 class="card-title">Main Page</h5>
                    <p class="card-text">Return To Home Page</p>
                    <NavLink class="btn btn-primary" href="home">Go</NavLink>
                    </div>
                    </div>
                    *@
@*---------------------------------------------------------------------------------------- STUDENTS TAB TABLE START ---------------------------------------------------------------------------------------------------------------------------------------------*@

                    @if (!HideAllInitialCards())
                    {
                        <div class="content-area">
                            @if (UserRole == "Student")
                            {
                                @if (!isInitializedAsStudentUser)
                                {
                                    <div style="color: purple; font-weight: bold; text-align: center; margin: 10px 0;">
                                        Φορτώνει, Παρακαλώ Περιμένετε...
                                    </div>
                                    <div class="loading-bar-container">                                       
                                        <div class="loading-bar"></div>
                                    </div>
                                }
                                else if (!isStudentRegistered)
                                {
                                    <div style="display: flex; justify-content: flex-start; padding: 20px; flex-direction: column;">
                                        <div style="width: 300px; border: none; border-radius: 12px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); transition: transform 0.3s ease, box-shadow 0.3s ease; background: linear-gradient(135deg, #f9f9f9, #e0e0e0);">
                                            <div style="padding: 20px; text-align: center;">
                                                <h5 style="font-size: 1.5rem; font-weight: bold; color: #333; margin-bottom: 20px;">Εγγραφή Φοιτητή</h5>
                                                <a style="background-color: #007bff; border: none; border-radius: 25px; padding: 10px 20px; font-size: 1rem; color: white; text-decoration: none; transition: background-color 0.3s ease, transform 0.2s ease;" 
                                                   href="studentRegistration" 
                                                   onmouseover="this.style.backgroundColor='#0056b3'; this.style.transform='scale(1.05)'" 
                                                   onmouseout="this.style.backgroundColor='#007bff'; this.style.transform='scale(1)'">
                                                    Εγγραφή
                                                </a>
                                            </div>
                                        </div>
                                        <p style="font-size: 0.9rem; color: #000; margin-top: 7px; text-align: center; font-weight: bold;">
                                            <span style="color: #ff0000;">**</span> <span style="color: #ff0000;">Προσοχή</span>: Για εμφάνιση του περιεχομένου της σελίδας είναι <span style="color: #ff0000;">Υποχρεωτική</span> η Εγγραφή σας
                                        </p>                                      
                                    </div>

                                }
                                else
                                {
                                <div class="table-bordered">
                                    <!-- Tabs navigation -->
                                    <ul class="nav nav-tabs" id="myTab" role="tablist">
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link fade show active" id="announcements-tab" data-bs-toggle="tab" data-bs-target="#announcements" type="button" role="tab" aria-controls="announcements" aria-selected="true">Ανακοινώσεις</button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link" id="thesis-tab" data-bs-toggle="tab" data-bs-target="#thesis" type="button" role="tab" aria-controls="thesis" aria-selected="false">Πτυχιακές Εργασίες</button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link" id="jobs-tab" data-bs-toggle="tab" data-bs-target="#jobs" type="button" role="tab" aria-controls="jobs" aria-selected="false">Θέσεις Εργασίας</button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link" id="internships-tab" data-bs-toggle="tab" data-bs-target="#internships" type="button" role="tab" aria-controls="internships" aria-selected="false">Θέσεις Πρακτικής Άσκησης</button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link" id="companyeventsasstudent-tab" data-bs-toggle="tab" data-bs-target="#companyeventsasstudent" type="button" role="tab" aria-controls="companyeventsasstudent" aria-selected="false">Εκδηλώσεις</button>
                                        </li>
                                    </ul>

                                    <!-- Tab panes -->
                                    <div class="tab-content mt-3" id="myTabContent">
                                        <!-- STUDENT ANNOUNCEMENTS tab content -->
                                        <div class="tab-pane fade show active" id="announcements" role="tabpanel" aria-labelledby="announcements-tab">
                                            <div class="mb-3 row-dark-gray mt-4">
                                                <div class="d-flex justify-content-between align-items-center">
                                                    <label class="form-label" style="color: #FFF8DC;">• Πρόσφατες Ανακοινώσεις •</label>
                                                    <button class="btn btn-link" @onclick="ToggleAnnouncementsAsStudentVisibility">
                                                        @if (isAnnouncementsAsStudentVisible)
                                                        {
                                                            <span>&#8722;</span> <!-- Minus sign -->
                                                        }
                                                        else
                                                        {
                                                            <span>&#43;</span> <!-- Plus sign -->
                                                        }
                                                    </button>
                                                </div>
                                            </div>
                                            @if(isAnnouncementsAsStudentVisible)
                                            {
                                                            <!-- University News Section -->
                                                            <div class="mb-3" style="background-color: #e6f2ff; border: 1px solid #b3c6e0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                                                <div class="d-flex justify-content-between align-items-center p-3" style="border-bottom: 1px solid #b3c6e0;">
                                                                    <h1 class="news-heading form-label m-0">
                                                                        <span class="black-text">
                                                                            <span style="color: #b399d4; margin-left: 10px; margin-right: 5px;">
                                                                                <i class="fas fa-rss"></i>
                                                                            </span>
                                                                            Πανεπιστήμιο Αθηνών
                                                                        </span>
                                                                    </h1>
                                                                    <button class="btn" 
                                                                            style="width: 30px; height: 30px; border-radius: 50%; background-color: #0d47a1; color: white; border: none; padding: 0; display: flex; align-items: center; justify-content: center; margin-right: 10px;" 
                                                                            @onclick="ToggleUniversityNewsVisibility">
                                                                        @if (isUniversityNewsVisible)
                                                                        {
                                                                            <span>&#8722;</span> 
                                                                        }
                                                                        else
                                                                        {
                                                                            <span>&#43;</span> 
                                                                        }
                                                                    </button>
                                                                </div>
    
                                                                @if (isUniversityNewsVisible)
                                                                {
                                                                    <div id="university-news-content" class="p-3" style="border-top: 1px solid #e6f2ff;">
                                                                        @if (newsArticles != null && newsArticles.Any())
                                                                        {
                                                                            @foreach (var article in newsArticles)
                                                                            {
                                                                                <div class="news-article mb-2 pb-2" style="border-bottom: 1px dashed #ccc;">
                                                                                    <a href="@article.Url" target="_blank" style="color: #0d47a1; text-decoration: none;">
                                                                                        <i class="fa fa-external-link me-2" style="font-size: 0.8em;"></i>@article.Title
                                                                                    </a>
                                                                                </div>
                                                                            }
                                                                        }
                                                                        else
                                                                        {
                                                                            <p class="mb-0 text-muted">Καμία Ανακοίνωση από το Πανεπιστήμιο Αθηνών ακόμη....</p>
                                                                        }
                                                                    </div>
                                                                }
                                                            </div>

                                                            <!-- SVSE News Section -->
                                                            <div class="mb-3" style="background-color: #e6f2ff; border: 1px solid #b3c6e0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                                                <div class="d-flex justify-content-between align-items-center p-3" style="border-bottom: 1px solid #b3c6e0;">
                                                                    <h1 class="news-heading form-label m-0">
                                                                        <span class="black-text">
                                                                            <span style="color: #b399d4; margin-left: 10px; margin-right: 5px;">
                                                                                <i class="fas fa-rss"></i>
                                                                            </span>
                                                                            Σύνδεσμος Βιομηχανιών Στερεάς Ελλάδας
                                                                        </span>
                                                                    </h1>
                                                                    <button class="btn" 
                                                                            style="width: 30px; height: 30px; border-radius: 50%; background-color: #0d47a1; color: white; border: none; padding: 0; display: flex; align-items: center; justify-content: center; margin-right: 10px;" 
                                                                            @onclick="ToggleSvseNewsVisibility">
                                                                        @if (isSvseNewsVisible)
                                                                        {
                                                                            <span>&#8722;</span> <!-- Minus sign -->
                                                                        }
                                                                        else
                                                                        {
                                                                            <span>&#43;</span> <!-- Plus sign -->
                                                                        }
                                                                    </button>
                                                                </div>
    
                                                                @if (isSvseNewsVisible)
                                                                {
                                                                    <div id="svse-news-content" class="p-3" style="border-top: 1px solid #e6f2ff;">
                                                                        @if (svseNewsArticles != null && svseNewsArticles.Any())
                                                                        {
                                                                            @foreach (var article in svseNewsArticles)
                                                                            {
                                                                                <div class="news-article mb-2 pb-2" style="border-bottom: 1px dashed #ccc;">
                                                                                    <a href="@article.Url" target="_blank" style="color: #0d47a1; text-decoration: none;">
                                                                                        <i class="fa fa-external-link me-2" style="font-size: 0.8em;"></i>@article.Title
                                                                                    </a>
                                                                                </div>
                                                                            }
                                                                        }
                                                                        else
                                                                        {
                                                                            <p class="mb-0 text-muted">Καμία Ανακοίνωση από τον ΣΒΣΕ ακόμη....</p>
                                                                        }
                                                                    </div>
                                                                }
                                                            </div>

                                                            <!-- Platform company announcements -->
                                                            <div class="mb-3" style="background-color: #e6f2ff; border: 1px solid #b3c6e0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                                                <div class="d-flex justify-content-between align-items-center p-3" style="border-bottom: 1px solid #b3c6e0;">
                                                                    <h1 class="news-heading form-label m-0">
                                                                        <span class="black-text">
                                                                            <span style="color: #b399d4; margin-left: 10px; margin-right: 5px;">
                                                                                <i class="fas fa-list"></i>
                                                                            </span>
                                                                            Ανακοινώσεις Εταιρειών
                                                                        </span>
                                                                    </h1>
                                                                    <button class="btn" 
                                                                            style="width: 30px; height: 30px; border-radius: 50%; background-color: #0d47a1; color: white; border: none; padding: 0; display: flex; align-items: center; justify-content: center; margin-right: 10px;" 
                                                                            @onclick="ToggleCompanyAnnouncementsVisibility">
                                                                        @if (isCompanyAnnouncementsVisible)
                                                                        {
                                                                            <span>&#8722;</span> <!-- Minus sign -->
                                                                        }
                                                                        else
                                                                        {
                                                                            <span>&#43;</span> <!-- Plus sign -->
                                                                        }
                                                                    </button>
                                                                </div>
    
                                                                @if (isCompanyAnnouncementsVisible)
                                                                {
                                                                    <div class="p-3" style="border-top: 1px solid #e6f2ff;">
                                                                        @if (Announcements != null && Announcements.Any(announcement => announcement.CompanyAnnouncementStatus == "Δημοσιευμένη"))
                                                                        {
                                                                            <!-- Display paginated announcements sorted by upload date descending -->
                                                                            @foreach (var announcement in Announcements
                                                                           .Where(a => a.CompanyAnnouncementStatus == "Δημοσιευμένη")
                                                                           .OrderByDescending(a => a.CompanyAnnouncementUploadDate)
                                                                           .Skip((currentPageForCompanyAnnouncements - 1) * pageSize)
                                                                           .Take(pageSize))
                                                                            {
                                                                                <div class="news-article mb-3 pb-2" style="border-bottom: 1px dashed #ccc;">
                                                                                    <!-- Clicking on title toggles description -->
                                                                                    <a href="javascript:void(0);"
                                                                                       @onclick="() => ToggleDescription(announcement.Id)"
                                                                                       style="display: block; max-width: 100%; overflow-wrap: break-word; color: #0d47a1; text-decoration: none; cursor: pointer;"
                                                                                       title="Κάντε Κλικ εδώ για να δείτε την περιγραφή της ανακοίνωσης">
                                                                                        <span class="black-text">• <strong>@(announcement.Company?.CompanyName ?? "Άγνωστη Εταιρεία")</strong></span> - @announcement.CompanyAnnouncementTitle
                                                                                        <span class="text-muted">(@announcement.CompanyAnnouncementUploadDate.ToString("dd/MM/yyyy"))</span>
                                                                                    </a>

                                                                                    <!-- Show description based on toggle state -->
                                                                                    <div class="announcement-description mt-2 @(expandedAnnouncementId == announcement.Id ? "expanded" : "collapsed")">
                                                                                        @if (expandedAnnouncementId == announcement.Id)
                                                                                        {
                                                                                            <p style="color: #333;">@announcement.CompanyAnnouncementDescription</p>
                                
                                                                                            @if (announcement.CompanyAnnouncementAttachmentFile != null && announcement.CompanyAnnouncementAttachmentFile.Length > 0)
                                                                                            {
                                                                                                <p class="announcement-attachment mt-2">
                                                                                                    <a href="#"
                                                                                                       @onclick="() => DownloadAnnouncementAttachmentFrontPage(announcement.CompanyAnnouncementAttachmentFile, announcement.CompanyAnnouncementTitle)"
                                                                                                       style="color: #c62828; text-decoration: none;"
                                                                                                       title="Κάντε Κλικ εδώ για να κατεβάσετε το αρχείο">
                                                                                                        <i class="fa fa-download me-1"></i> 
                                                                                                        Συννημένο Αρχείο Ανακοίνωσης
                                                                                                    </a>
                                                                                                </p>
                                                                                            }
                                                                                        }
                                                                                    </div>
                                                                                </div>
                                                                            }

                                                                                <!-- Pagination Controls for Company Announcements -->
                                                                                <div class="d-flex justify-content-center align-items-center mt-3 gap-1">
                                                                                    <!-- First Page (<<) -->
                                                                                    <span class="pagination-item @(currentPageForCompanyAnnouncements == 1 ? "disabled" : "")"
                                                                                          @onclick="GoToFirstPageForCompanyAnnouncements">
                                                                                        &lt;&lt;
                                                                                    </span>

                                                                                    <!-- Previous Page (<) -->
                                                                                    <span class="pagination-item @(currentPageForCompanyAnnouncements == 1 ? "disabled" : "")"
                                                                                          @onclick="PreviousPageForCompanyAnnouncements">
                                                                                        &lt;
                                                                                    </span>

                                                                                    <!-- Page Numbers -->
                                                                                    @foreach (var pageNumber in GetVisiblePagesForCompanyAnnouncements())
                                                                                    {
                                                                                        if (pageNumber == -1)
                                                                                        {
                                                                                            <span class="pagination-ellipsis">...</span>
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <span class="pagination-item @(pageNumber == currentPageForCompanyAnnouncements ? "active" : "")"
                                                                                                  @onclick="() => GoToPageForCompanyAnnouncements(pageNumber)">
                                                                                                @pageNumber
                                                                                            </span>
                                                                                        }
                                                                                    }

                                                                                    <!-- Next Page (>) -->
                                                                                    <span class="pagination-item @(currentPageForCompanyAnnouncements == totalPagesForCompanyAnnouncements ? "disabled" : "")"
                                                                                          @onclick="NextPageForCompanyAnnouncements">
                                                                                        &gt;
                                                                                    </span>

                                                                                    <!-- Last Page (>>) -->
                                                                                    <span class="pagination-item @(currentPageForCompanyAnnouncements == totalPagesForCompanyAnnouncements ? "disabled" : "")"
                                                                                          @onclick="GoToLastPageForCompanyAnnouncements">
                                                                                        &gt;&gt;
                                                                                    </span>

                                                                                    <span class="ms-3">Σελίδα @currentPageForCompanyAnnouncements από @totalPagesForCompanyAnnouncements</span>
                                                                                </div>

                                                                        }
                                                                        else
                                                                        {
                                                                            <p class="mb-0 text-muted">Καμία Ανακοίνωση από Εταιρείες ακόμη......</p>
                                                                        }
                                                                    </div>
                                                                }
                                                            </div>

                                                            <!-- Platform professor announcements -->
                                                            <div class="mb-3" style="background-color: #e6f2ff; border: 1px solid #b3c6e0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                                                <div class="d-flex justify-content-between align-items-center p-3" style="border-bottom: 1px solid #b3c6e0;">
                                                                    <h1 class="news-heading form-label m-0">
                                                                        <span class="black-text">
                                                                            <span style="color: #b399d4; margin-left: 10px; margin-right: 5px;">
                                                                                    <i class="fas fa-list"></i>
                                                                                </span>
                                                                            Ανακοινώσεις Καθηγητών
                                                                        </span>
                                                                    </h1>
                                                                    <button class="btn" 
                                                                            style="width: 30px; height: 30px; border-radius: 50%; background-color: #0d47a1; color: white; border: none; padding: 0; display: flex; align-items: center; justify-content: center; margin-right: 10px; cursor: pointer;"
                                                                            @onclick="ToggleProfessorAnnouncementsVisibility">
                                                                        @if (isProfessorAnnouncementsVisible)
                                                                        {
                                                                            <span>&#8722;</span> <!-- Minus sign -->
                                                                        }
                                                                        else
                                                                        {
                                                                            <span>&#43;</span> <!-- Plus sign -->
                                                                        }
                                                                    </button>
                                                                </div>
    
                                                                @if (isProfessorAnnouncementsVisible)
                                                                {
                                                                    <div class="p-3" style="border-top: 1px solid #e6f2ff;">
                                                                        @if (ProfessorAnnouncements != null && ProfessorAnnouncements.Any(announcement => announcement.ProfessorAnnouncementStatus == "Δημοσιευμένη"))
                                                                        {
                                                                            <!-- Display paginated announcements sorted by upload date descending -->
                                                                            @foreach (var announcement in ProfessorAnnouncements
                                                                           .Where(a => a.ProfessorAnnouncementStatus == "Δημοσιευμένη")
                                                                           .OrderByDescending(a => a.ProfessorAnnouncementUploadDate)
                                                                           .Skip((currentPageForProfessorAnnouncements - 1) * pageSize)
                                                                           .Take(pageSize))
                                                                           {
                                                                                <div class="news-article mb-3 pb-2" style="border-bottom: 1px dashed #ccc;">
                                                                                    <!-- Clicking on title toggles description -->
                                                                                    <a href="javascript:void(0);"
                                                                                       @onclick="() => ToggleDescriptionForProfessorAnnouncements(announcement.Id)"
                                                                                       style="display: block; max-width: 100%; overflow-wrap: break-word; color: #0d47a1; text-decoration: none; cursor: pointer;"
                                                                                       title="Κάντε Κλικ εδώ για να δείτε την περιγραφή της ανακοίνωσης">
                                                                                        <span class="black-text">• 
                                                                                            <strong>@(announcement.Professor?.ProfName ?? "N/A")</strong> 
                                                                                            <strong>@(announcement.Professor?.ProfSurname ?? "N/A")</strong>
                                                                                        </span> - @announcement.ProfessorAnnouncementTitle
                                                                                        <span class="text-muted">(@announcement.ProfessorAnnouncementUploadDate.ToString("dd/MM/yyyy"))</span>
                                                                                    </a>
                                                                                    <!-- Show description based on toggle state -->
                                                                                    <div class="announcement-description mt-2 @(expandedProfessorAnnouncementId == announcement.Id ? "expanded" : "collapsed")">
                                                                                        @if (expandedProfessorAnnouncementId == announcement.Id)
                                                                                        {
                                                                                            <p style="color: #333;">@announcement.ProfessorAnnouncementDescription</p>
                                
                                                                                            @if (announcement.ProfessorAnnouncementAttachmentFile != null && announcement.ProfessorAnnouncementAttachmentFile.Length > 0)
                                                                                            {
                                                                                                <p class="announcement-attachment mt-2">
                                                                                                    <a href="#"
                                                                                                       @onclick="() => DownloadProfessorAnnouncementAttachmentFrontPage(announcement.ProfessorAnnouncementAttachmentFile, announcement.ProfessorAnnouncementTitle)"
                                                                                                       style="color: #c62828; text-decoration: none;"
                                                                                                       title="Κάντε Κλικ εδώ για να κατεβάσετε το αρχείο">
                                                                                                        <i class="fa fa-download me-1"></i>
                                                                                                        Συννημένο Αρχείο Ανακοίνωσης
                                                                                                    </a>
                                                                                                </p>
                                                                                            }
                                                                                        }
                                                                                    </div>
                                                                                </div>
                                                                           }
                                                                                <!-- Pagination Controls for Professor Announcements -->
                                                                                <div class="d-flex justify-content-center align-items-center mt-3 gap-1">
                                                                                    <!-- First Page (<<) -->
                                                                                    <span class="pagination-item @(currentPageForProfessorAnnouncements == 1 ? "disabled" : "")"
                                                                                          @onclick="GoToFirstPageForProfessorAnnouncements">
                                                                                        &lt;&lt;
                                                                                    </span>

                                                                                    <!-- Previous Page (<) -->
                                                                                    <span class="pagination-item @(currentPageForProfessorAnnouncements == 1 ? "disabled" : "")"
                                                                                          @onclick="PreviousPageForProfessorAnnouncements">
                                                                                        &lt;
                                                                                    </span>

                                                                                    <!-- Page Numbers -->
                                                                                    @foreach (var pageNumber in GetVisiblePagesForProfessorAnnouncements())
                                                                                    {
                                                                                        if (pageNumber == -1)
                                                                                        {
                                                                                            <span class="pagination-ellipsis">...</span>
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <span class="pagination-item @(pageNumber == currentPageForProfessorAnnouncements ? "active" : "")"
                                                                                                  @onclick="() => GoToPageForProfessorAnnouncements(pageNumber)">
                                                                                                @pageNumber
                                                                                            </span>
                                                                                        }
                                                                                    }

                                                                                    <!-- Next Page (>) -->
                                                                                    <span class="pagination-item @(currentPageForProfessorAnnouncements == totalPagesForProfessorAnnouncements ? "disabled" : "")"
                                                                                          @onclick="NextPageForProfessorAnnouncements">
                                                                                        &gt;
                                                                                    </span>

                                                                                    <!-- Last Page (>>) -->
                                                                                    <span class="pagination-item @(currentPageForProfessorAnnouncements == totalPagesForProfessorAnnouncements ? "disabled" : "")"
                                                                                          @onclick="GoToLastPageForProfessorAnnouncements">
                                                                                        &gt;&gt;
                                                                                    </span>

                                                                                    <span class="ms-3">Σελίδα @currentPageForProfessorAnnouncements από @totalPagesForProfessorAnnouncements</span>
                                                                                </div>

                                                                        }
                                                                        else
                                                                        {
                                                                            <p class="mb-0 text-muted">Καμία Ανακοίνωση από Καθηγητές ακόμη......</p>
                                                                        }
                                                                    </div>
                                                                }
                                                            </div>
                                                            @*
                                                            <div class="mb-3" style="background-color: #e6f2ff; border: 1px solid #b3c6e0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                                                <div class="d-flex justify-content-between align-items-center p-3" style="border-bottom: 1px solid #b3c6e0;">
                                                                    <h1 class="news-heading form-label m-0">
                                                                        <span class="black-text">
                                                                            <span style="color: #b399d4; margin-left: 10px; margin-right: 5px;">
                                                                                <i class="fas fa-calendar-day"></i>
                                                                            </span>
                                                                            Εκδηλώσεις Εταιρειών
                                                                        </span>
                                                                    </h1>
                                                                    <button class="btn" 
                                                                            style="width: 30px; height: 30px; border-radius: 50%; background-color: #0d47a1; color: white; border: none; padding: 0; display: flex; align-items: center; justify-content: center; margin-right: 10px; cursor: pointer; transition: all 0.2s ease;"
                                                                            @onclick="ToggleCompanyEventsVisibility">
                                                                        @if (isCompanyEventsVisible)
                                                                        {
                                                                            <span>&#8722;</span> <!-- Minus sign -->
                                                                        }
                                                                        else
                                                                        {
                                                                            <span>&#43;</span> <!-- Plus sign -->
                                                                        }
                                                                    </button>
                                                                </div>
                                                                
                                                                
                                                                @if (isCompanyEventsVisible)
                                                                {
                                                                    <div class="p-3" style="border-top: 1px solid #e6f2ff;">
                                                                        @if (CompanyEventsToShowAtFrontPage != null && CompanyEventsToShowAtFrontPage.Any(eventItem => eventItem.CompanyEventStatus == "Δημοσιευμένη"))
                                                                        {
                                                                            <!-- Display paginated events sorted by date descending -->
                                                                            @foreach (var eventItem in CompanyEventsToShowAtFrontPage
                                                                           .Where(e => e.CompanyEventStatus == "Δημοσιευμένη")
                                                                           .OrderByDescending(e => e.CompanyEventUploadedDate)
                                                                           .Skip((currentCompanyEventPage - 1) * currentCompanyEventpageSize)
                                                                           .Take(currentCompanyEventpageSize))
                                                                           {
                                                                                <div class="news-article mb-3 pb-2" style="border-bottom: 1px dashed #ccc;">
                                                                                    <!-- Clicking on title toggles description -->
                                                                                    <a href="javascript:void(0);"
                                                                                       @onclick="() => ToggleDescriptionForCompanyEvent(eventItem.Id)"
                                                                                       style="display: block; max-width: 100%; overflow-wrap: break-word; color: #0d47a1; text-decoration: none; cursor: pointer;"
                                                                                       title="Κάντε Κλικ εδώ για να δείτε την περιγραφή της εκδήλωσης">
                                                                                        <span class="black-text">• 
                                                                                            <strong>
                                                                                                @eventItem.CompanyEventCompanyName
                                                                                                @if (eventItem.CompanyEventOtherOrganizerToBeVisible)
                                                                                                {
                                                                                                    @($" / {eventItem.CompanyEventOtherOrganizer}")
                                                                                                }
                                                                                            </strong>
                                                                                        </span> - @eventItem.CompanyEventTitle
                                                                                        <span class="text-muted">(@eventItem.CompanyEventUploadedDate.ToString("dd/MM/yyyy"))</span>
                                                                                    </a>
                                                                                    <!-- Show description based on toggle state -->
                                                                                    <div class="event-description mt-2 @(expandedCompanyEventId == eventItem.Id ? "expanded" : "collapsed")">
                                                                                        @if (expandedCompanyEventId == eventItem.Id)
                                                                                        {
                                                                                               <p style="color: #333;">@eventItem.CompanyEventDescription</p>                                                                                                                  
                                                                                               var location = $"{eventItem.CompanyEventPerifereiaLocation} ({eventItem.CompanyEventDimosLocation}) - {eventItem.CompanyEventPlaceLocation}";
                                                                                                if (!string.IsNullOrWhiteSpace(location))
                                                                                                {
                                                                                                    <p class="event-location mt-2">
                                                                                                        <a href="https://www.google.com/maps/search/?api=1&query=@Uri.EscapeDataString(location)" 
                                                                                                           target="_blank" 
                                                                                                           style="color: #2e7d32; text-decoration: none;"
                                                                                                           title="Δείτε στον Χάρτη">
                                                                                                            <i class="fas fa-map-marker-alt me-1"></i> @location
                                                                                                        </a>
                                                                                                    </p>
                                                                                                }
                                                                                            

                                                                                            @if (eventItem.CompanyEventAttachmentFile != null && eventItem.CompanyEventAttachmentFile.Length > 0)
                                                                                            {
                                                                                                <p class="event-attachment mt-2">
                                                                                                    <a href="#"
                                                                                                       @onclick="() => DownloadCompanyEventAttachmentFrontPage(eventItem.CompanyEventAttachmentFile, eventItem.CompanyEventTitle)"
                                                                                                       style="color: #c62828; text-decoration: none;"
                                                                                                       title="Κάντε Κλικ εδώ για να κατεβάσετε το αρχείο">
                                                                                                        <i class="fa fa-download me-1"></i>
                                                                                                        Συννημένο Αρχείο Εκδήλωσης
                                                                                                    </a>
                                                                                                </p>
                                                                                            }
                                                                                        }
                                                                                    </div>
                                                                                </div>
                                                                           }

                                                                            <div class="pagination mt-3">
                                                                                <button class="btn me-2" 
                                                                                        @onclick="() => ChangePageForCompanyEvents(currentCompanyEventPage - 1)" 
                                                                                        disabled="@(currentCompanyEventPage == 1 || totalPagesForCompanyEvents == 0)"
                                                                                        style="min-width: 100px;">
                                                                                    Προηγούμενες
                                                                                </button>
                                                                                <span class="mx-2 text-muted">
                                                                                    Σελίδα @currentCompanyEventPage από @totalPagesForCompanyEvents
                                                                                </span>
                                                                                <button class="btn btn-secondary" 
                                                                                        @onclick="() => ChangePageForCompanyEvents(currentCompanyEventPage + 1)" 
                                                                                        disabled="@(currentCompanyEventPage == totalPagesForCompanyEvents || totalPagesForCompanyEvents == 0)"
                                                                                        style="min-width: 100px;">
                                                                                    Επόμενες
                                                                                </button>
                                                                            </div>
                                                                        }
                                                                        else
                                                                        {
                                                                            <p class="mb-0 text-muted">Καμία Εκδήλωση από Εταιρείες ακόμη......</p>
                                                                        }
                                                                    </div>
                                                                }
                                                            </div>

                                                            <div class="mb-3" style="background-color: #e6f2ff; border: 1px solid #b3c6e0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                                                <div class="d-flex justify-content-between align-items-center p-3" style="border-bottom: 1px solid #b3c6e0;">
                                                                    <h1 class="news-heading form-label m-0">
                                                                        <span class="black-text">
                                                                            <span style="color: #b399d4; margin-left: 10px; margin-right: 5px;">
                                                                                <i class="fas fa-calendar-day"></i>
                                                                            </span>
                                                                            Εκδηλώσεις Καθηγητών
                                                                        </span>
                                                                    </h1>
                                                                    <button class="btn" 
                                                                            style="width: 30px; height: 30px; border-radius: 50%; background-color: #0d47a1; color: white; border: none; padding: 0; display: flex; align-items: center; justify-content: center; margin-right: 10px; cursor: pointer; transition: all 0.2s ease;"
                                                                            @onclick="ToggleProfessorEventsVisibility">
                                                                        @if (isProfessorEventsVisible)
                                                                        {
                                                                            <span>&#8722;</span> <!-- Minus sign -->
                                                                        }
                                                                        else
                                                                        {
                                                                            <span>&#43;</span> <!-- Plus sign -->
                                                                        }
                                                                    </button>
                                                                </div>
    
                                                                @if (isProfessorEventsVisible)
                                                                {
                                                                    <div class="p-3" style="border-top: 1px solid #e6f2ff;">
                                                                        @if (ProfessorEventsToShowAtFrontPage != null && ProfessorEventsToShowAtFrontPage.Any(eventItem => eventItem.ProfessorEventStatus == "Δημοσιευμένη"))
                                                                        {
                                                                            @foreach (var eventItem in ProfessorEventsToShowAtFrontPage
                                                                           .Where(e => e.ProfessorEventStatus == "Δημοσιευμένη")
                                                                           .OrderByDescending(e => e.ProfessorEventUploadedDate)
                                                                           .Skip((currentProfessorEventPage - 1) * currentProfessorEventpageSize)
                                                                           .Take(currentProfessorEventpageSize))
                                                                            {
                                                                                <div class="news-article mb-3 pb-2" style="border-bottom: 1px dashed #ccc;">
                                                                                    <a href="javascript:void(0);"
                                                                                       @onclick="() => ToggleDescriptionForProfessorEvent(eventItem.Id)"
                                                                                       style="display: block; max-width: 100%; overflow-wrap: break-word; color: #0d47a1; text-decoration: none; cursor: pointer;"
                                                                                       title="Κάντε Κλικ εδώ για να δείτε την περιγραφή της εκδήλωσης">
                                                                                        <span class="black-text">• 
                                                                                            <strong>
                                                                                                @eventItem.ProfessorEventProfessorName @eventItem.ProfessorEventProfessorSurName
                                                                                                @if (eventItem.ProfessorEventOtherOrganizer == "True")
                                                                                                {
                                                                                                    @($" / {eventItem.ProfessorEventOtherOrganizer}")
                                                                                                }
                                                                                            </strong>
                                                                                        </span> - @eventItem.ProfessorEventTitle
                                                                                        <span class="text-muted">(@eventItem.ProfessorEventActiveDate.ToString("dd/MM/yyyy"))</span>
                                                                                    </a>
                                                                                    <div class="event-description mt-2 @(expandedProfessorEventId == eventItem.Id ? "expanded" : "collapsed")">
                                                                                        @if (expandedProfessorEventId == eventItem.Id)
                                                                                        {
                                                                                            <p style="color: #333;">@eventItem.ProfessorEventDescription</p>                                                                                                                          
                                                                                                var location = $"{eventItem.ProfessorEventPerifereiaLocation} ({eventItem.ProfessorEventDimosLocation}) - {eventItem.ProfessorEventPlaceLocation}";
                                                                                                if (!string.IsNullOrWhiteSpace(location))
                                                                                                {
                                                                                                    <p class="event-location mt-2">
                                                                                                        <a href="https://www.google.com/maps/search/?api=1&query=@Uri.EscapeDataString(location)" 
                                                                                                           target="_blank" 
                                                                                                           style="color: #2e7d32; text-decoration: none;"
                                                                                                           title="Δείτε στον Χάρτη">
                                                                                                            <i class="fas fa-map-marker-alt me-1"></i> @location
                                                                                                        </a>
                                                                                                    </p>
                                                                                                }
                                                                                            

                                                                                            @if (eventItem.ProfessorEventAttachmentFile != null && eventItem.ProfessorEventAttachmentFile.Length > 0)
                                                                                            {
                                                                                                <p class="event-attachment mt-2">
                                                                                                    <a href="#"
                                                                                                       @onclick="() => DownloadProfessorEventAttachmentFrontPage(eventItem.ProfessorEventAttachmentFile, eventItem.ProfessorEventTitle)"
                                                                                                       style="color: #c62828; text-decoration: none;"
                                                                                                       title="Κάντε Κλικ εδώ για να κατεβάσετε το αρχείο">
                                                                                                        <i class="fa fa-download me-1"></i> 
                                                                                                        Συννημένο Αρχείο Εκδήλωσης
                                                                                                    </a>
                                                                                                </p>
                                                                                            }
                                                                                        }
                                                                                    </div>
                                                                                </div>
                                                                            }

                                                                            <div class="pagination mt-3">
                                                                                <button class="btn me-2" 
                                                                                        @onclick="() => ChangePageForProfessorEvents(currentProfessorEventPage - 1)" 
                                                                                        disabled="@(currentProfessorEventPage == 1 || totalPagesForProfessorEvents == 0)"
                                                                                        style="min-width: 100px;">
                                                                                    Προηγούμενες
                                                                                </button>
                                                                                <span class="mx-2 text-muted">
                                                                                    Σελίδα @currentProfessorEventPage από @totalPagesForProfessorEvents
                                                                                </span>
                                                                                <button class="btn btn-secondary" 
                                                                                        @onclick="() => ChangePageForProfessorEvents(currentProfessorEventPage + 1)" 
                                                                                        disabled="@(currentProfessorEventPage == totalPagesForProfessorEvents || totalPagesForProfessorEvents == 0)"
                                                                                        style="min-width: 100px;">
                                                                                    Επόμενες
                                                                                </button>
                                                                            </div>
                                                                        }
                                                                        else
                                                                        {
                                                                            <p class="mb-0 text-muted">Καμία Εκδήλωση από Καθηγητές ακόμη......</p>
                                                                        }
                                                                    </div>
                                                                }
                                                                
                                                            </div>
                                                            *@
                                                            <br/>
                                                            <br />
                                        }
                                        </div>
                                        

                                        <!-- THESIS tab content -->
                                        <div class="tab-pane fade" id="thesis" role="tabpanel" aria-labelledby="thesis-tab">
                                            <div class="mb-3 row-dark-gray mt-4">
                                                <div class="d-flex justify-content-between align-items-center">
                                                    <label class="form-label" style="color: #FFF8DC;">• Αιτήσεις Πτυχιακής Εργασίας •</label>
                                                    <button class="btn btn-link" @onclick="ToggleAndLoadStudentThesisApplications">
                                                        @if (showStudentThesisApplications)
                                                        {
                                                            <span>&#8722;</span> <!-- Minus sign -->
                                                        }
                                                        else
                                                        {
                                                            <span>&#43;</span> <!-- Plus sign -->
                                                        }
                                                    </button>
                                                </div>
                                            </div>
                                            @if(showStudentThesisApplications)
                                            {
                                                    <label for="thesisFilter" style="color: #4682b4; font-weight: bold; font-size: 15px; display: block;">Εμφάνιση ανά Κατηγορία</label>
                                                    <div class="col-md-2">
                                                        <div class="input-group">
                                                            <select id="thesisFilter" class="form-control form-control-sm" @onchange="FilterThesisApplications" aria-label="Choose filter">
                                                                <option value="all">Όλες</option>
                                                                <option value="company">Εταιρείας</option>
                                                                <option value="professor">Καθηγητή</option>                                                       
                                                            </select>
                                                            <div class="input-group-append">
                                                                <span class="input-group-text">
                                                                    <i class="fas fa-chevron-down"></i>
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-2">
                                                        <label style="color: #4682b4; font-weight: bold; font-size: 15px; display: block;">Αποτελέσματα ανά Σελίδα</label>
                                                        <div class="input-group" style="max-width: 65px;"> 
                                                            <select class="form-control form-control-sm" @onchange="OnPageSizeChangeForApplications_SeeMyThesisApplicationsAsStudent" aria-label="Items per page">
                                                                @foreach (var option in pageSizeOptions_SeeMyThesisApplicationsAsStudent)
                                                                {
                                                                    <option value="@option" selected="@(pageSizeForThesisToSee == option)">@option</option>
                                                                }
                                                            </select>
                                                            <div class="input-group-append">
                                                                <span class="input-group-text">
                                                                    <i class="fas fa-chevron-down"></i>
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    @*
                                                    <br/>
                                                    <div class="mb-3">
                                                        <button class="modern-button" style="background-color: #007bff; color: white;" @onclick="ToggleAndLoadStudentThesisApplications">Εμφάνιση των Αιτήσεων μου</button>
                                                    </div>
                                                    *@
                                                    @if (showStudentThesisApplications)
                                                    {
                                                        var allThesisApplications = new List<object>();

                                                        if (showCompanyThesisApplications && companyThesisApplications != null)
                                                            allThesisApplications.AddRange(companyThesisApplications);

                                                        if (showProfessorThesisApplications && professorThesisApplications != null)
                                                            allThesisApplications.AddRange(professorThesisApplications);

                                                        int totalThesisCount = allThesisApplications.Count;
                                                        SetTotalThesisCount(totalThesisCount); // Update total thesis count

                                                        var paginatedThesis = allThesisApplications
                                                            .Skip((currentPageForThesisToSee - 1) * pageSizeForThesisToSee)
                                                            .Take(pageSizeForThesisToSee)
                                                            .ToList();

                                                        @if (paginatedThesis.Any())
                                                        {
                                                        
                                                            <table class="table">
                                                                <thead>
                                                                        <td colspan="9" style="padding: 0;">
                                                                            <div style="display: flex; justify-content: space-between; align-items: center; height: 24px; line-height: 24px; width: 100%;">
                                                                                <i class="fa-regular fa-bell" style="font-size: 18px; color: #0d6efd  ;"></i>
                                                                                <label class="form-label" style="color: #0d6efd ; font-weight: bold; font-size: 18px; margin: 0;">Οι Αιτήσεις Μου</label>
                                                                                <i class="fa-regular fa-bell" style="font-size: 18px; color: #0d6efd  ;"></i>
                                                                            </div>
                                                                        </td>
                                                                    <tr>
                                                                        <th><i class="fa-solid fa-key fa-sm" style="color: #9D00FF;"></i> Κωδικός Θέσης</th>
                                                                        <th>
                                                                            <i class="fa-solid fa-user fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                            Εταιρεία <span style="color: red; font-weight: bold;">(Ε)</span> / 
                                                                            Καθηγητής <span style="color: red; font-weight: bold;">(Κ)</span>
                                                                        </th>
                                                                        <th>
                                                                            <i class="fa-solid fa-font fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                            Τίτλος Πτυχιακής
                                                                        </th>
                                                                        <th>
                                                                            <i class="fa-solid fa-calendar-plus fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                            Ημερομηνία Αίτησης
                                                                        </th>
                                                                        <th>
                                                                            <i class="fa-solid fa-comments fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                            Επικοινωνία
                                                                        </th>
                                                                        <th>
                                                                            <i class="fa-solid fa-spinner fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                            Κατάσταση Αίτησης
                                                                        </th>
                                                                        <th>
                                                                            <i class="fa-solid fa-ban fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                            Απόσυρση Αίτησης
                                                                        </th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                        @foreach (var thesis in paginatedThesis)
                                                                        {
                                                                            @if (thesis is CompanyThesisApplied companyThesis)
                                                                            {
                                                                                // Get status with fallback logic
                                                                                var status = companyThesis.CompanyThesisStatusAppliedAtStudentSide 
                                                                                           ?? companyThesis.CompanyThesisStatusAppliedAtCompanySide
                                                                                           ?? "Σε Επεξεργασία";
            
                                                                                // Get thesis data from cache
                                                                                var thesisDetails = thesisDataCache.TryGetValue(companyThesis.RNGForCompanyThesisApplied, out var t) ? t : null;

                                                                                <tr style="background-color: @(status == "Επιτυχής" ? "lightgreen" :
                                                                                                             status == "Απορρίφθηκε" ? "lightcoral" :
                                                                                                             status == "Απορρίφθηκε (Απόσυρση Θέσεως Από Εταιρία)" ? "coral" :
                                                                                                             status == "Αποσύρθηκε από τον φοιτητή" ? "lightyellow" : "transparent")">
                                                                                    <td style="color: #9D00FF;">
                                                                                        @companyThesis.RNGForCompanyThesisAppliedAsStudent_HashedAsUniqueID
                                                                                    </td>
                                                                                    <td>
                                                                                        @if (thesisDetails != null)
                                                                                        {
                                                                                            <a href="#" @onclick="() => ShowCompanyDetailsInThesisCompanyName_StudentThesisApplications(thesisDetails.CompanyEmailUsedToUploadThesis)">
                                                                                                @(thesisDetails.Company?.CompanyName ?? "Άγνωστη Εταιρεία")
                                                                                                <span style="color: red; font-weight: bold;">(Ε)</span>
                                                                                            </a>
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <span class="text-warning">Δεν βρέθηκε</span>
                                                                                        }
                                                                                    </td>
                                                                                    <td>
                                                                                        @if (thesisDetails != null)
                                                                                        {
                                                                                            <a href="#" @onclick="() => ShowCompanyThesisDetailsModal_StudentThesisApplications(companyThesis.RNGForCompanyThesisApplied)">
                                                                                                @thesisDetails.CompanyThesisTitle
                                                                                            </a>
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <span class="text-warning">Δεν βρέθηκε</span>
                                                                                        }
                                                                                    </td>
                                                                                    <td>@companyThesis.DateTimeStudentAppliedForThesis.ToString("dd/MM/yyyy HH:mm")</td>
                                                                                    <td class="text-center">
                                                                                        <a href="mailto:@companyThesis.CompanyEmailWhereStudentAppliedForThesis" target="_blank" 
                                                                                           title="@companyThesis.CompanyEmailWhereStudentAppliedForThesis">
                                                                                            <i class="fas fa-envelope"></i>
                                                                                        </a>
                                                                                    </td>
                                                                                    <td style="color: @(status == "Επιτυχής" ? "black" :
                                                                                                  status == "Απορρίφθηκε" ? "black" :
                                                                                                  status == "Σε Επεξεργασία" ? "black" :
                                                                                                  status == "Αποσύρθηκε από τον φοιτητή" ? "brown" : "black")">
                                                                                        @status
                                                                                    </td>
                                                                                    <td class="text-center">
                                                                                        @if (status == "Σε Επεξεργασία")
                                                                                        {
                                                                                            <span style="cursor: pointer;" 
                                                                                                  @onclick="() => WithdrawThesisApplication(companyThesis)" 
                                                                                                  title="Κάντε Κλικ για Απόσυρση της Αίτησης σας">
                                                                                                <i class="fas fa-times"></i>
                                                                                            </span>
                                                                                        }
                                                                                        else if (status == "Επιτυχής" || status == "Απορρίφθηκε")
                                                                                        {
                                                                                            <span>Δεν μπορεί να αποσυρθεί</span>
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <span>Ολοκληρώθηκε</span>
                                                                                        }
                                                                                    </td>
                                                                                </tr>
                                                                            }
                                                                            else if (thesis is ProfessorThesisApplied professorThesis)
                                                                            {
                                                                                // Get status with fallback logic (same pattern as before)
                                                                                var status = professorThesis.ProfessorThesisStatusAppliedAtStudentSide 
                                                                                           ?? professorThesis.ProfessorThesisStatusAppliedAtProfessorSide
                                                                                           ?? "Σε Επεξεργασία";

                                                                                // Get thesis data from cache
                                                                                var thesisDetails = professorThesisDataCache.TryGetValue(professorThesis.RNGForProfessorThesisApplied, out var t) ? t : null;

                                                                                <tr style="background-color: @(status == "Επιτυχής" ? "lightgreen" :
                                                                                                          status == "Απορρίφθηκε" ? "lightcoral" :
                                                                                                          status == "Απορρίφθηκε (Απόσυρση Θέσεως Από Καθηγητή)" ? "coral" :
                                                                                                          status == "Αποσύρθηκε από τον φοιτητή" ? "lightyellow" : "transparent")">
                                                                                    <td style="color: #9D00FF;">
                                                                                        @professorThesis.RNGForProfessorThesisApplied_HashedAsUniqueID
                                                                                    </td>
                                                                                    <td>
                                                                                        @if (thesisDetails != null)
                                                                                        {
                                                                                            <a href="#" @onclick="() => ShowProfessorDetailsInThesisProfessorName_StudentThesisApplications(thesisDetails.ProfessorEmailUsedToUploadThesis)">
                                                                                                @(thesisDetails.Professor != null ? $"{thesisDetails.Professor.ProfName} {thesisDetails.Professor.ProfSurname}" : "Άγνωστος Καθηγητής")
                                                                                                <span style="color: red; font-weight: bold;">(Κ)</span>
                                                                                            </a>
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <span class="text-warning">Δεν βρέθηκε</span>
                                                                                        }
                                                                                    </td>
                                                                                    <td>
                                                                                        @if (thesisDetails != null)
                                                                                        {
                                                                                            <a href="#" @onclick="() => ShowProfessorThesisDetailsModal_StudentThesisApplications(professorThesis.RNGForProfessorThesisApplied)">
                                                                                                @thesisDetails.ThesisTitle
                                                                                            </a>
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <span class="text-warning">Δεν βρέθηκε</span>
                                                                                        }
                                                                                    </td>
                                                                                    <td>@professorThesis.DateTimeStudentAppliedForProfessorThesis.ToString("dd/MM/yyyy HH:mm")</td>
                                                                                    <td class="text-center">
                                                                                        <a href="mailto:@professorThesis.ProfessorEmailWhereStudentAppliedForProfessorThesis" target="_blank" 
                                                                                           title="@professorThesis.ProfessorEmailWhereStudentAppliedForProfessorThesis">
                                                                                            <i class="fas fa-envelope"></i>
                                                                                        </a>
                                                                                    </td>
                                                                                    <td style="color: @(status == "Επιτυχής" ? "black" :
                                                                                                  status == "Απορρίφθηκε" ? "black" :
                                                                                                  status == "Σε Επεξεργασία" ? "black" :
                                                                                                  status == "Αποσύρθηκε από τον φοιτητή" ? "brown" : "black")">
                                                                                        @status
                                                                                    </td>
                                                                                    <td class="text-center">
                                                                                        @if (status == "Σε Επεξεργασία")
                                                                                        {
                                                                                            <span style="cursor: pointer;" 
                                                                                                  @onclick="() => WithdrawThesisApplication(professorThesis)" 
                                                                                                  title="Κάντε Κλικ για Απόσυρση της Αίτησης σας">
                                                                                                <i class="fas fa-times"></i>
                                                                                            </span>
                                                                                        }
                                                                                        else if (status == "Επιτυχής" || status == "Απορρίφθηκε")
                                                                                        {
                                                                                            <span>Δεν μπορεί να αποσυρθεί</span>
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <span>Ολοκληρώθηκε</span>
                                                                                        }
                                                                                    </td>
                                                                                </tr>
                                                                            }
                                                                        }
                                                                    </tbody>
                                                            </table>
                                                            <br/>
                                                           <!-- Pagination Controls -->
                                                            <div class="d-flex justify-content-center align-items-center mt-3 gap-1">
                                                                <!-- First Page (<<) -->
                                                                <span class="pagination-item @(currentPageForThesisToSee == 1 ? "disabled" : "")" 
                                                                      @onclick="GoToFirstPage">
                                                                    &lt;&lt;
                                                                </span>
                                                                <!-- Previous Page (<) -->
                                                                <span class="pagination-item @(currentPageForThesisToSee == 1 ? "disabled" : "")" 
                                                                      @onclick="PreviousPageForThesisToSee">
                                                                    &lt;
                                                                </span>
                                                                <!-- Page Numbers -->
                                                                @foreach (var pageNumber in GetVisiblePages())
                                                                {
                                                                    if (pageNumber == -1)
                                                                    {
                                                                        <span class="pagination-ellipsis">...</span>
                                                                    }
                                                                    else
                                                                    {
                                                                        <span class="pagination-item @(pageNumber == currentPageForThesisToSee ? "active" : "")" 
                                                                              @onclick="() => GoToPage(pageNumber)">
                                                                            @pageNumber
                                                                        </span>
                                                                    }
                                                                }
    
                                                                <!-- Next Page (>) -->
                                                                <span class="pagination-item @(currentPageForThesisToSee == totalPagesForThesisToSee ? "disabled" : "")" 
                                                                      @onclick="NextPageForThesisToSee">
                                                                    &gt;
                                                                </span>

                                                                <!-- Last Page (>>) -->
                                                                <span class="pagination-item @(currentPageForThesisToSee == totalPagesForThesisToSee ? "disabled" : "")" 
                                                                      @onclick="GoToLastPage">
                                                                    &gt;&gt;
                                                                </span>

                                                                <span class="ms-3">Σελίδα @currentPageForThesisToSee από @totalPagesForThesisToSee</span>
                                                            </div>
                                                            <br/>
                                                        }
                                                        else
                                                        {
                                                            <div class="alert alert-warning" role="alert">
                                                                <p>Δεν υπάρχει καμία Αίτηση για ανάληψη Πτυχιακής Εργασίας</p>
                                                            </div>
                                                        }
                                                    }
                                            }


                                            <!-- Company Details Modal for Thesis Applications -->
                                            @if (isModalOpenToSeeCompanyDetails_ThesisStudentApplicationsToShow && selectedCompanyDetails_ThesisStudentApplicationsToShow != null)
                                            {
                                                <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                                    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                        <div class="modal-content">
                                                            <div class="modal-header">
                                                                <h5 class="modal-title" style="color: #4682B4;">
                                                                    @selectedCompanyDetails_ThesisStudentApplicationsToShow.CompanyName
                                                                </h5>
                                                                <button type="button" class="close" @onclick="CloseCompanyDetailsModal_StudentThesisApplications">
                                                                    <span aria-hidden="true">&times;</span>
                                                                </button>
                                                            </div>
                                                            <div class="modal-body">
                                                                <div class="form-group text-center">
                                                                    @if (selectedCompanyDetails_ThesisStudentApplicationsToShow.CompanyLogo != null)
                                                                    {
                                                                        <img src="@ShowProfileImage(selectedCompanyDetails_ThesisStudentApplicationsToShow.CompanyLogo)"
                                                                             alt="Company Logo"
                                                                             class="rounded-circle img-fluid"
                                                                             style="max-width: 150px; max-height: 150px; object-fit: cover;" />
                                                                    }
                                                                    else
                                                                    {
                                                                        <p>Δεν είναι διαθέσιμο</p>
                                                                    }
                                                                </div>

                                                                <div class="form-group">
                                                                    <label><strong>Σύντομη Ονομασία</strong></label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-tag" style="color: #6c757d; margin-right: 8px;"></i>
                                                                        <input type="text" class="border-0 flex-grow-1" value="@selectedCompanyDetails_ThesisStudentApplicationsToShow.CompanyShortName" readonly />
                                                                    </div>
                                                                </div>


                                                                <div class="form-group">
                                                                    <label><strong>Τύπος Εταιρείας</strong></label>
                                                                    <input type="text" class="form-control" value="@selectedCompanyDetails_ThesisStudentApplicationsToShow.CompanyType" readonly />
                                                                </div>

                                                                <div class="form-group">
                                                                    <label><strong>Email Εταιρείας</strong></label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-envelope" style="color: #6c757d; margin-right: 8px;"></i>
                                                                        <input type="text" class="border-0 flex-grow-1" value="@selectedCompanyDetails_ThesisStudentApplicationsToShow.CompanyEmail" readonly />
                                                                    </div>
                                                                </div>


                                                                <div class="form-group">
                                                                    <label><strong>Ιστοσελίδα Εταιρείας</strong></label>
                                                                    @if (!string.IsNullOrWhiteSpace(selectedCompanyDetails_ThesisStudentApplicationsToShow.CompanyWebsite))
                                                                    {
                                                                        <div class="form-control d-flex align-items-center" style="height: auto; cursor: pointer; color: #007bff;"
                                                                             onclick="window.open('@(selectedCompanyDetails_ThesisStudentApplicationsToShow.CompanyWebsite.StartsWith("http") ? selectedCompanyDetails_ThesisStudentApplicationsToShow.CompanyWebsite : "http://" + selectedCompanyDetails_ThesisStudentApplicationsToShow.CompanyWebsite)', '_blank')">
                                                                            <i class="fa-solid fa-globe" style="margin-right: 8px;"></i>
                                                                            <span class="flex-grow-1">@selectedCompanyDetails_ThesisStudentApplicationsToShow.CompanyWebsite</span>
                                                                        </div>
                                                                    }
                                                                    else
                                                                    {
                                                                        <input type="text" class="form-control" value="Δεν υπάρχει" readonly />
                                                                    }
                                                                </div>

                                                                <div class="form-group">
                                                                    <label><strong>Ανακοινώσεις Εταιρείας</strong></label>
                                                                    @if (!string.IsNullOrWhiteSpace(selectedCompanyDetails_ThesisStudentApplicationsToShow.CompanyWebsiteAnnouncements))
                                                                    {
                                                                        <div class="form-control d-flex align-items-center" style="height: auto; cursor: pointer; color: #007bff;"
                                                                             onclick="window.open('@(selectedCompanyDetails_ThesisStudentApplicationsToShow.CompanyWebsiteAnnouncements.StartsWith("http") ? selectedCompanyDetails_ThesisStudentApplicationsToShow.CompanyWebsiteAnnouncements : "http://" + selectedCompanyDetails_ThesisStudentApplicationsToShow.CompanyWebsiteAnnouncements)', '_blank')">
                                                                            <i class="fa-solid fa-globe" style="margin-right: 8px;"></i>
                                                                            <span class="flex-grow-1">@selectedCompanyDetails_ThesisStudentApplicationsToShow.CompanyWebsiteAnnouncements</span>
                                                                        </div>
                                                                    }
                                                                    else
                                                                    {
                                                                        <input type="text" class="form-control" value="Δεν υπάρχει" readonly />
                                                                    }
                                                                </div>

                                                                <div class="form-group">
                                                                    <label><strong>Θέσεις Εργασίας Εταιρείας</strong></label>
                                                                    @if (!string.IsNullOrWhiteSpace(selectedCompanyDetails_ThesisStudentApplicationsToShow.CompanyWebsiteJobs))
                                                                    {
                                                                        <div class="form-control d-flex align-items-center" style="height: auto; cursor: pointer; color: #007bff;"
                                                                             onclick="window.open('@(selectedCompanyDetails_ThesisStudentApplicationsToShow.CompanyWebsiteJobs.StartsWith("http") ? selectedCompanyDetails_ThesisStudentApplicationsToShow.CompanyWebsiteJobs : "http://" + selectedCompanyDetails_ThesisStudentApplicationsToShow.CompanyWebsiteJobs)', '_blank')">
                                                                            <i class="fa-solid fa-globe" style="margin-right: 8px;"></i>
                                                                            <span class="flex-grow-1">@selectedCompanyDetails_ThesisStudentApplicationsToShow.CompanyWebsiteJobs</span>
                                                                        </div>
                                                                    }
                                                                    else
                                                                    {
                                                                        <input type="text" class="form-control" value="Δεν υπάρχει" readonly />
                                                                    }
                                                                </div>


                                                                <div class="form-group">
                                                                    <label><strong>Τηλέφωνο Εταιρείας</strong></label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fa-solid fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                        <input type="text" class="border-0 flex-grow-1" value="@selectedCompanyDetails_ThesisStudentApplicationsToShow.CompanyTelephone" readonly />
                                                                    </div>
                                                                </div>


                                                                <div class="form-group">
                                                                    <label><strong>Περιγραφή Εταιρείας</strong></label>
                                                                    <textarea class="form-control" rows="3" readonly>@selectedCompanyDetails_ThesisStudentApplicationsToShow.CompanyDescription</textarea>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label><strong>Δραστηριότητα Εταιρείας</strong></label>
                                                                    <input type="text" class="form-control" value="@selectedCompanyDetails_ThesisStudentApplicationsToShow.CompanyActivity" readonly />
                                                                </div>

                                                                <div class="form-group">
                                                                    <label><strong>Περιοχές Ενδιαφέροντος</strong></label>
                                                                    <textarea class="form-control" rows="2" readonly>@selectedCompanyDetails_ThesisStudentApplicationsToShow.CompanyAreas</textarea>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label><strong>Χώρα</strong></label>
                                                                    <input type="text" class="form-control" value="@selectedCompanyDetails_ThesisStudentApplicationsToShow.CompanyCountry" readonly />
                                                                </div>

                                                                <div class="form-group">
                                                                    <label><strong>Περιφέρεια</strong></label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fa-solid fa-map" style="color: #6c757d; margin-right: 8px;"></i>
                                                                        <input type="text" class="border-0 flex-grow-1" value="@selectedCompanyDetails_ThesisStudentApplicationsToShow.CompanyRegions" readonly />
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label><strong>Πόλη</strong></label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fa-solid fa-city" style="color: #6c757d; margin-right: 8px;"></i>
                                                                        <input type="text" class="border-0 flex-grow-1" value="@selectedCompanyDetails_ThesisStudentApplicationsToShow.CompanyTown" readonly />
                                                                    </div>
                                                                </div>


                                                                <div class="form-group">
                                                                    <label><strong>Διεύθυνση</strong></label>
                                                                    <div class="form-control d-flex align-items-center mt-1" style="height: auto;">
                                                                        <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                        <a href="https://www.google.com/maps/search/@selectedCompanyDetails_ThesisStudentApplicationsToShow.CompanyLocation"
                                                                           target="_blank"
                                                                           style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                            @selectedCompanyDetails_ThesisStudentApplicationsToShow.CompanyLocation
                                                                        </a>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label><strong>Ταχυδρομικός Κώδικας</strong></label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fa-solid fa-envelope-open-text" style="color: #6c757d; margin-right: 8px;"></i>
                                                                        <input type="text" class="border-0 flex-grow-1" value="@selectedCompanyDetails_ThesisStudentApplicationsToShow.CompanyPC" readonly />
                                                                    </div>
                                                                </div>


                                                                <div class="form-group">
                                                                    <label><strong>Email Υπεύθυνου Ανθρώπινου Δυναμικού</strong></label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fa-solid fa-envelope" style="color: #007bff; margin-right: 8px;"></i>
                                                                        <input type="text" class="border-0 flex-grow-1" value="@selectedCompanyDetails_ThesisStudentApplicationsToShow.CompanyHREmail" readonly />
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label><strong>Τηλέφωνο Υπεύθυνου Ανθρώπινου Δυναμικού</strong></label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fa-solid fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                        <input type="text" class="border-0 flex-grow-1" value="@selectedCompanyDetails_ThesisStudentApplicationsToShow.CompanyHRTelephone" readonly />
                                                                    </div>
                                                                </div>

                                                            </div>
                                                            <div class="modal-footer">
                                                                <button type="button" class="btn btn-secondary" @onclick="CloseCompanyDetailsModal_StudentThesisApplications">
                                                                    Κλείσιμο
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            }



                                            @if (isModalOpenToSeeProfessorDetails_ThesisStudentApplicationsToShow && selectedProfessorDetails_ThesisStudentApplicationsToShow != null)
                                            {
                                                <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0,0,0,0.5);">
                                                    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
                                                        <div class="modal-content">
                                                            <div class="modal-header">
                                                                <h5 class="modal-title" style="color: #007BFF;">
                                                                    @selectedProfessorDetails_ThesisStudentApplicationsToShow.ProfName 
                                                                    @selectedProfessorDetails_ThesisStudentApplicationsToShow.ProfSurname
                                                                </h5>
                                                                <button type="button" class="btn-close" @onclick="CloseProfessorDetailsModal_StudentThesisApplications" aria-label="Κλείσιμο"></button>
                                                            </div>
                                                            <div class="modal-body">
                                                                <!-- Profile Picture -->
                                                                <div class="form-group text-center">
                                                                    @if (selectedProfessorDetails_ThesisStudentApplicationsToShow.ProfImage != null && selectedProfessorDetails_ThesisStudentApplicationsToShow.ProfImage.Length > 0)
                                                                    {
                                                                        var base64Image = Convert.ToBase64String(selectedProfessorDetails_ThesisStudentApplicationsToShow.ProfImage);
                                                                        <img src="data:image/jpeg;base64,@base64Image" alt="Φωτογραφία Προφίλ Καθηγητή" 
                                                                             style="max-width: 150px; max-height: 150px; border-radius: 50%; object-fit: cover;" />
                                                                    }
                                                                    else
                                                                    {
                                                                        <p>Δεν υπάρχει φωτογραφία Προφίλ</p>
                                                                    }
                                                                </div>

                                                                <!-- Professor Email -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Email</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-envelope" style="color: #007bff; margin-right: 8px;"></i>
                                                                        <span>@selectedProfessorDetails_ThesisStudentApplicationsToShow.ProfEmail</span>
                                                                    </div>
                                                                </div>

                                                                <!-- Professor University and Department -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Πανεπιστήμιο</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-university" style="color: #007bff; margin-right: 8px;"></i>
                                                                        <span>@selectedProfessorDetails_ThesisStudentApplicationsToShow.ProfUniversity</span>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Τμήμα</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fa-solid fa-building" style="color: #6c757d; margin-right: 8px;"></i>
                                                                        <span>@selectedProfessorDetails_ThesisStudentApplicationsToShow.ProfDepartment</span>
                                                                    </div>
                                                                </div>

                                                                <!-- Professor Vahmida Department -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Βαθμίδα ΔΕΠ</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fa-solid fa-user-tie" style="color: #6c757d; margin-right: 8px;"></i>
                                                                        <span>@selectedProfessorDetails_ThesisStudentApplicationsToShow.ProfVahmidaDEP</span>
                                                                    </div>
                                                                </div>

                                                                <!-- Professor Work and Personal Telephone -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Τηλέφωνο Εργασίας</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fa-solid fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                        <span>@selectedProfessorDetails_ThesisStudentApplicationsToShow.ProfWorkTelephone</span>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Προσωπικό Τηλέφωνο</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fa-solid fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                        @if (selectedProfessorDetails_ThesisStudentApplicationsToShow.ProfPersonalTelephoneVisibility)
                                                                        {
                                                                            <span>@selectedProfessorDetails_ThesisStudentApplicationsToShow.ProfPersonalTelephone</span>
                                                                        }
                                                                        else
                                                                        {
                                                                            <span>Δεν Διατίθεται</span>
                                                                        }
                                                                    </div>
                                                                </div>

                                                                <!-- Professor Personal Website -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Ιστότοπος</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fa-solid fa-globe" style="color: #007bff; margin-right: 8px;"></i>
                                                                        @if (!string.IsNullOrWhiteSpace(selectedProfessorDetails_ThesisStudentApplicationsToShow.ProfPersonalWebsite))
                                                                        {
                                                                            <a href="@selectedProfessorDetails_ThesisStudentApplicationsToShow.ProfPersonalWebsite" target="_blank" class="flex-grow-1 text-truncate" style="text-decoration:none; color:#007bff;">
                                                                                @selectedProfessorDetails_ThesisStudentApplicationsToShow.ProfPersonalWebsite
                                                                            </a>
                                                                        }
                                                                        else
                                                                        {
                                                                            <span class="flex-grow-1 text-muted">Δεν Διατίθεται</span>
                                                                        }
                                                                    </div>
                                                                </div>

                                                                <!-- Professor LinkedIn Site -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">LinkedIn</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fab fa-linkedin" style="color: #0A66C2; margin-right: 8px;"></i>
                                                                        @if (!string.IsNullOrWhiteSpace(selectedProfessorDetails_ThesisStudentApplicationsToShow.ProfLinkedInSite))
                                                                        {
                                                                            <a href="@selectedProfessorDetails_ThesisStudentApplicationsToShow.ProfLinkedInSite" target="_blank" class="flex-grow-1 text-truncate" style="text-decoration:none; color:#0A66C2;">
                                                                                @selectedProfessorDetails_ThesisStudentApplicationsToShow.ProfLinkedInSite
                                                                            </a>
                                                                        }
                                                                        else
                                                                        {
                                                                            <span class="flex-grow-1 text-muted">Δεν Διατίθεται</span>
                                                                        }
                                                                    </div>
                                                                </div>

                                                                <!-- Professor Scholar Profile -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Scholar Profile</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-graduation-cap" style="color: #4285F4; margin-right: 8px;"></i>
                                                                        @if (!string.IsNullOrWhiteSpace(selectedProfessorDetails_ThesisStudentApplicationsToShow.ProfScholarProfile))
                                                                        {
                                                                            <a href="@selectedProfessorDetails_ThesisStudentApplicationsToShow.ProfScholarProfile" target="_blank" class="flex-grow-1 text-truncate" style="text-decoration:none; color:#4285F4;">
                                                                                @selectedProfessorDetails_ThesisStudentApplicationsToShow.ProfScholarProfile
                                                                            </a>
                                                                        }
                                                                        else
                                                                        {
                                                                            <span class="flex-grow-1 text-muted">Δεν Διατίθεται</span>
                                                                        }
                                                                    </div>
                                                                </div>

                                                                <!-- Professor ORCID Profile -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">ORCID Profile</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-id-card" style="color: #A6CE39; margin-right: 8px;"></i>
                                                                        @if (!string.IsNullOrWhiteSpace(selectedProfessorDetails_ThesisStudentApplicationsToShow.ProfOrchidProfile))
                                                                        {
                                                                            <a href="@selectedProfessorDetails_ThesisStudentApplicationsToShow.ProfOrchidProfile" target="_blank" class="flex-grow-1 text-truncate" style="text-decoration:none; color:#A6CE39;">
                                                                                @selectedProfessorDetails_ThesisStudentApplicationsToShow.ProfOrchidProfile
                                                                            </a>
                                                                        }
                                                                        else
                                                                        {
                                                                            <span class="flex-grow-1 text-muted">Δεν Διατίθεται</span>
                                                                        }
                                                                    </div>
                                                                </div>

                                                                <!-- Professor General Field of Work (Areas) -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Γενικός Τομέας Εργασίας</label>
                                                                    <textarea class="form-control" readonly>@selectedProfessorDetails_ThesisStudentApplicationsToShow.ProfGeneralFieldOfWork</textarea>
                                                                </div>

                                                                <!-- Professor General Skills -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Γενικές Δεξιότητες</label>
                                                                    <textarea class="form-control" readonly>@selectedProfessorDetails_ThesisStudentApplicationsToShow.ProfGeneralSkills</textarea>
                                                                </div>

                                                                <!-- Professor Personal Description -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Προσωπική Περιγραφή</label>
                                                                    <textarea class="form-control" readonly>@selectedProfessorDetails_ThesisStudentApplicationsToShow.ProfPersonalDescription</textarea>
                                                                </div>
                                                            </div>
                                                            <div class="modal-footer">
                                                                <button type="button" class="btn btn-secondary" @onclick="CloseProfessorDetailsModal_StudentThesisApplications">Κλείσιμο</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            }


                                            @if (isModalOpenToSeeCompanyThesisDetails_ThesisStudentApplicationsToShow && selectedCompanyThesisDetails_ThesisStudentApplicationsToShow != null)
                                            {
                                                <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                                    <div class="modal-dialog modal-dialog-centered" role="document">
                                                        <div class="modal-content">
                                                            <div class="modal-header">
                                                                <h5 class="modal-title" style="color: #4682B4;">@selectedCompanyThesisDetails_ThesisStudentApplicationsToShow.CompanyThesisTitle</h5>
                                                                <button type="button" class="close" @onclick="CloseCompanyThesisDetailsModal_StudentThesisApplications">
                                                                    <span aria-hidden="true">&times;</span>
                                                                </button>
                                                            </div>
                                                            <div class="modal-body">
                                                                @if (selectedCompanyThesisDetails_ThesisStudentApplicationsToShow != null)
                                                                {
                                                                    @*
                                                                    <div class="form-group">
                                                                        <label for="viewThesisTitle"><strong>Τίτλος Πτυχιακής</strong></label>
                                                                        <input type="text" id="viewThesisTitle" class="form-control" value="@selectedCompanyThesisDetails_ThesisStudentApplicationsToShow.CompanyThesisTitle" readonly />
                                                                    </div>
                                                                    *@
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Όνομα Εταιρίας</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-industry" style="color: #6c757d; margin-right: 8px;"></i>
                                                                            <span>@(selectedCompanyThesisDetails_ThesisStudentApplicationsToShow.Company?.CompanyName ?? "Άγνωστη Εταιρεία")</span>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Επιβλέπων Υπεύθυνος Εταιρείας</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-user-tie" style="color: #6c757d; margin-right: 8px;"></i>
                                                                            <span>@selectedCompanyThesisDetails_ThesisStudentApplicationsToShow.CompanyThesisCompanySupervisorFullName</span>
                                                                        </div>
                                                                    </div>



                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;" class="text-primary">Επιβλέπων Ενδιαφερόμενος Καθηγητής</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-user-tie" style="color: #007bff; margin-right: 8px;"></i>
                                                                            @if (selectedCompanyThesisDetails_ThesisStudentApplicationsToShow.ProfessorInterested != null)
                                                                            {
                                                                                <span>@($"{selectedCompanyThesisDetails_ThesisStudentApplicationsToShow.ProfessorInterested.ProfName} {selectedCompanyThesisDetails_ThesisStudentApplicationsToShow.ProfessorInterested.ProfSurname}")</span>
                                                                            }
                                                                            else
                                                                            {
                                                                                <span>Δεν υπάρχει ενδιαφερόμενος καθηγητής</span>
                                                                            }
                                                                        </div>
                                                                    </div>


                                                                    <div class="form-group">
                                                                        <label for="viewThesisDescription"><strong>Περιγραφή Πτυχιακής</strong></label>
                                                                        <textarea id="viewThesisDescription" class="form-control" rows="3" readonly>@selectedCompanyThesisDetails_ThesisStudentApplicationsToShow.CompanyThesisDescriptionsUploaded</textarea>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="viewThesisAreas"><strong>Περιοχές Ενδιαφέροντος</strong></label>
                                                                        <textarea id="viewThesisAreas" class="form-control" rows="3" readonly>@selectedCompanyThesisDetails_ThesisStudentApplicationsToShow.CompanyThesisAreasUpload</textarea>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="viewThesisSkills"><strong>Απαιτούμενες Δεξιότητες</strong></label>
                                                                        <textarea id="viewThesisSkills" class="form-control" rows="3" readonly>@selectedCompanyThesisDetails_ThesisStudentApplicationsToShow.CompanyThesisSkillsNeeded</textarea>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="viewThesisStatus"><strong>Κατάσταση Πτυχιακής</strong></label>
                                                                        <input type="text" id="viewThesisStatus" class="form-control" value="@selectedCompanyThesisDetails_ThesisStudentApplicationsToShow.CompanyThesisStatus" readonly />
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Τμήμα</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-building text-secondary me-2"></i>
                                                                            <span>
                                                                                @(string.IsNullOrWhiteSpace(selectedCompanyThesisDetails_ThesisStudentApplicationsToShow.CompanyThesisDepartment)
                                                                                    ? "Δεν έχει Καθοριστεί"
                                                                                    : selectedCompanyThesisDetails_ThesisStudentApplicationsToShow.CompanyThesisDepartment)
                                                                            </span>
                                                                        </div>
                                                                    </div>


                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Email Επαφής</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-envelope text-primary me-2"></i>
                                                                            <span>@selectedCompanyThesisDetails_ThesisStudentApplicationsToShow.CompanyThesisContactPersonEmail</span>
                                                                        </div>
                                                                    </div>


                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Τηλέφωνο Επαφής</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-phone text-success me-2"></i>
                                                                            <span>@selectedCompanyThesisDetails_ThesisStudentApplicationsToShow.CompanyThesisContactPersonTelephone</span>
                                                                        </div>
                                                                    </div>


                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Ημερομηνία Ανεβάσματος</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-calendar-alt text-primary me-2"></i>
                                                                            <span>@selectedCompanyThesisDetails_ThesisStudentApplicationsToShow.CompanyThesisUploadDateTime.ToString("dd/MM/yyyy HH:mm")</span>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Ημερομηνία Έναρξης</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-calendar-alt text-primary me-2"></i>
                                                                            <span>@selectedCompanyThesisDetails_ThesisStudentApplicationsToShow.CompanyThesisStartingDate.ToString("dd/MM/yyyy")</span>
                                                                        </div>
                                                                    </div>

                                                                    <br/>
                                                                    <div class="form-group">
                                                                        <label for="viewThesisAttachment"><strong>Αρχείο Πτυχιακής: </strong></label>
                                                                        @if (selectedCompanyThesisDetails_ThesisStudentApplicationsToShow.CompanyThesisAttachmentUpload != null)
                                                                        {
                                                                            <a href="data:application/pdf;base64,@Convert.ToBase64String(selectedCompanyThesisDetails_ThesisStudentApplicationsToShow.CompanyThesisAttachmentUpload)" download="ThesisAttachment.pdf" class="btn btn-primary">
                                                                                Λήψη Αρχείου
                                                                            </a>
                                                                        }
                                                                        else
                                                                        {
                                                                            <span style="color: darkred;"><strong>  Δεν Διατίθεται Συννημένο Αρχείο</strong></span>
                                                                        }
                                                                    </div>
                                                                }
                                                            </div>
                                                            <div class="modal-footer">
                                                                <button type="button" class="btn btn-secondary" @onclick="CloseCompanyThesisDetailsModal_StudentThesisApplications">Κλείσιμο</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            }






                                            @*ΦΙΛΤΡΑ ΑΝΑΖήτησης ΓΙΑ ΠΤΥΧΙΑΚΕΣ Ως ΦΟΙΤΗΤΗΣ*@ 
                                            
                                            <div class="mb-3 row-dark-gray mt-4">
                                                <div class="d-flex justify-content-between align-items-center">
                                                    <label class="form-label" style="color: #FFF8DC;">• Φίλτρα Αναζήτησης Για Εύρεση Πτυχιακής Εργασίας •</label>
                                                    <button class="btn btn-link" @onclick="ToggleSearchInternshipsAsStudentFiltersVisibility">
                                                        @if (isSearchInternshipsAsStudentFiltersVisible)
                                                        {
                                                            <span>&#8722;</span> <!-- Minus sign -->
                                                        }
                                                        else
                                                        {
                                                            <span>&#43;</span> <!-- Plus sign -->
                                                        }
                                                    </button>
                                                </div>
                                            </div>
                                            @if(isSearchInternshipsAsStudentFiltersVisible)
                                            {
                                                <div class="row mb-3">
                                                    <div class="col-md-4 position-relative">
                                                        <label for="thesisSearchForThesesAsStudent" class="form-label">Αναζήτηση με Τίτλο</label>
                                                        <input 
                                                            type="text" 
                                                            id="thesisSearchForThesesAsStudent" 
                                                            class="form-control" 
                                                            @bind="thesisSearchForThesesAsStudent" 
                                                            @oninput="HandleThesisTitleInputForBothCompaniesAndProfessorsWhenSearchForThesisAsStudent" 
                                                            placeholder="Εισάγετε τον τίτλο της πτυχιακής" />

                                                        <!-- Suggestions dropdown -->
                                                        <ul class="list-group position-absolute" 
                                                            style="z-index: 100; width: 100%; max-height: 150px; overflow-y: auto;" 
                                                            hidden="@(!thesisTitleSuggestions.Any())">
                                                            @foreach (var suggestion in thesisTitleSuggestions)
                                                            {
                                                                <li class="list-group-item list-group-item-action" 
                                                                    @onclick="() => SelectThesisTitleSuggestionForBothCompaniesAndProfessorsWhenSearchForThesisAsStudent(suggestion)">
                                                                    @suggestion
                                                                </li>
                                                            }
                                                        </ul>
                                                    </div>

                                                    <div class="col-md-4 position-relative">
                                                            <label for="searchNameSurnameAsStudentToFindProfessor" style="font-weight: bold;">Όνοματεπώνυμο Καθηγητή</label>
                                                            <input 
                                                                type="text" 
                                                                id="searchNameSurnameAsStudentToFindProfessor"
                                                                class="form-control" 
                                                                placeholder="Αναζήτηση με όνομα ή επώνυμο" 
                                                                @bind="searchNameSurnameAsStudentToFindProfessor" 
                                                                @oninput="HandleProfessorInputWhenSearchForProfessorThesisAutocompleteNameAsStudent" />

                                                            <!-- Suggestions dropdown -->
                                                            <ul class="list-group position-absolute" 
                                                                style="z-index: 100; width: 100%; max-height: 150px; overflow-y: auto;" 
                                                                hidden="@(!professorNameSurnameSuggestions.Any())">
                                                                @foreach (var suggestion in professorNameSurnameSuggestions)
                                                                {
                                                                    <li class="list-group-item list-group-item-action" 
                                                                        @onclick="() => SelectProfessorNameSurnameSuggestionWhenSearchForProfessorThesisAutocompleteNameAsStudent(suggestion)">
                                                                        @suggestion
                                                                    </li>
                                                                }
                                                            </ul>
                                                    </div>
       
                                                    @*PEDIA ANAZITISIS GIA PTYXIAKES APO ETAIREIES*@ 
                                                    <div class="col-md-4 position-relative">
                                                        <label for="companyNameSearchForThesesAsStudent" class="form-label">Αναζήτηση με Όνομα Εταιρείας</label>
                                                        <input 
                                                            type="text" 
                                                            id="companyNameSearchForThesesAsStudent" 
                                                            class="form-control" 
                                                            @bind="companyNameSearchForThesesAsStudent" 
                                                            @oninput="HandleCompanyNameInputWhenSearchForProfessorThesisAutocompleteNameAsStudent" 
                                                            placeholder="Εισάγετε Όνομα Εταιρείας" />

                                                        <!-- Suggestions dropdown -->
                                                        <ul class="list-group position-absolute" 
                                                            style="z-index: 100; width: 100%; max-height: 150px; overflow-y: auto;" 
                                                            hidden="@(!companyNameSuggestionsWhenSearchForProfessorThesisAutocompleteNameAsStudent.Any())">
                                                            @foreach (var suggestion in companyNameSuggestionsWhenSearchForProfessorThesisAutocompleteNameAsStudent)
                                                            {
                                                                <li class="list-group-item list-group-item-action" 
                                                                    @onclick="() => SelectCompanyNameSuggestionWhenSearchForProfessorThesisAutocompleteNameAsStudent(suggestion)">
                                                                    @suggestion
                                                                </li>
                                                            }
                                                        </ul>
                                                    </div>

                                                    <div class="col-md-4">
                                                        <label for="thesisStartDateForThesesAsStudent" class="form-label">Ξεκινάει Από</label>
                                                        <input type="date" id="thesisStartDateForThesesAsStudent" class="form-control" @bind="thesisStartDateForThesesAsStudent" />
                                                    </div>



                                                </div>

                                                @* Checkboxes for Areas *@
                                                <div class="col-md-4">
                                                    <label for="thesisAreaSearch" class="form-label"
                                                           @onclick="ToggleThesisAreasVisibility"
                                                           style="cursor: pointer; display: flex; justify-content: space-between; align-items: center; width: 100%;">
                                                        <span>Θεματική Περιοχή</span>
                                                        <span class="badge bg-secondary">
                                                            @(isThesisAreasVisible ? "Κρύψε" : "Δες")
                                                        </span>
                                                    </label>
                                                    <div id="thesisAreaSearch" class="collapse @(isThesisAreasVisible ? "show" : "")">
                                                        @foreach (var area in Areas)
                                                        {
                                                            <div class="form-check">
                                                                <input class="form-check-input"
                                                                       type="checkbox"
                                                                       id="@area.AreaName"
                                                                       value="@area.AreaName"
                                                                       @onchange="e => OnThesisAreaCheckboxChanged(e, area.AreaName)"
                                                                       checked="@selectedThesisAreas.Contains(area.AreaName)" />
                                                                <label class="form-check-label" for="@area.AreaName">
                                                                    @area.AreaName
                                                                </label>
                                                            </div>
                                                        }

                                                    </div>
                                                </div>
                                                <br/>
                                                <br/>
                                                <div class="mb-3">                                                
                                                    <button class="modern-button" style="background-color: #007bff; color: white;" @onclick="SearchThesisApplicationsAsStudent">
                                                        <i class="fa-brands fa-searchengin" style="margin-right: 8px;"></i>Αναζήτηση
                                                    </button>
                                                    <button class="modern-button" style="background-color: #FF7F7F; color: white;" @onclick="ClearSearchFieldsForThesisAsStudent">
                                                        <i class="fa-solid fa-broom" style="margin-right: 8px;"></i>Εκκαθάριση
                                                    </button>                                                
                                                </div>
                                                <br/>

                                            
                                                <!-- DISPLAY THESIS POSITIONS -->
                                                @if (showThesisApplications)
                                                {
                                                    <div class="col-md-2">
                                                        <label style="color: #4682b4; font-weight: bold; font-size: 15px; display: block;">Φιλτράρισμα ανά Κατηγορία</label>
                                                        <div class="input-group">
                                                            <select id="thesisFilter" class="form-control form-control-sm mt-2" @onchange="OnFilterChange" aria-label="Choose filter">
                                                                <option value="all">Όλες</option>
                                                                <option value="company">Εταιρείας</option>
                                                                <option value="professor">Καθηγητή</option>
                                                            </select>
                                                            <div class="input-group-append">
                                                                <span class="input-group-text">
                                                                    <i class="fas fa-chevron-down"></i>
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                     <!-- Dropdown to show Number Of Company or Professor Thesis per page->
                                                    <div class="col-md-2">
                                                        <label style="color: #4682b4; font-weight: bold; font-size: 15px; display: block;">Αποτελέσματα ανά Σελίδα</label>
                                                        <div class="input-group" style="max-width: 65px;"> <!-- Adjust width here -->                                                            
                                                            <select class="form-control form-control-sm mt-2" @onchange="OnPageSizeChange_SearchForThesisAsStudent" aria-label="Items per page">
                                                                @foreach (var option in pageSizeOptions_SearchForThesisAsStudent)
                                                                {
                                                                    <option value="@option" selected="@(thesisPageSize == option)">@option</option>
                                                                }
                                                            </select>
                                                            <div class="input-group-append">
                                                                <span class="input-group-text">
                                                                    <i class="fas fa-chevron-down"></i>
                                                                </span>
                                                            </div>
                                                        </div>
                                                        </div>
                                                        @if (publishedTheses != null && publishedTheses.Any())
                                                        {
                                                            // Calculate pagination values
                                                            var totalThesisCount = publishedTheses.Count;
                                                            var totalPages = (int)Math.Ceiling((double)totalThesisCount / thesisPageSize);
                                                            var paginatedTheses = publishedTheses
                                                                .Skip((currentThesisPage - 1) * thesisPageSize)
                                                                .Take(thesisPageSize)
                                                                .ToList();
        
                                                            <table class="table table-bordered">
                                                                <thead>
                                                                    <tr>
                                                                        <td colspan="9" style="padding: 0;">
                                                                            <div style="display: flex; justify-content: space-between; align-items: center; height: 24px; line-height: 24px; width: 100%;">
                                                                                <i class="fa-solid fa-magnifying-glass" style="font-size: 18px; color: #0d6efd;"></i>
                                                                                <label class="form-label" style="color: #0d6efd; font-weight: bold; font-size: 18px; margin: 0;">Διαθέσιμες Πτυχιακές Εργασίες</label>
                                                                                <i class="fa-solid fa-magnifying-glass" style="font-size: 18px; color: #0d6efd;"></i>
                                                                            </div>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <th><i class="fa-solid fa-key fa-sm" style="color: #9D00FF;"></i> Κωδικός Θέσης</th>
                                                                        <th>
                                                                            <i class="fa-solid fa-user fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                            Εταιρεία <span style="color:red;">(E)</span> / Καθηγητής <span style="color:red;">(Κ)</span>
                                                                        </th>
                                                                        <th>
                                                                            <i class="fa-solid fa-font fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                            Τίτλος Πτυχιακής
                                                                        </th>
                                                                        <th>
                                                                            <i class="fa-solid fa-tags fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                            Περιοχές Ενδιαφέροντος
                                                                        </th>
                                                                        <th>
                                                                            <i class="fa-solid fa-calendar-plus fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                            Ημερομηνία Ανάρτησης
                                                                        </th>
                                                                        <th>
                                                                            <i class="fa-solid fa-circle-info fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                            Λεπτομέρειες
                                                                        </th>
                                                                        <th>
                                                                            <i class="fa-solid fa-hand fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                            Αίτηση
                                                                        </th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    @foreach (var thesis in paginatedTheses)
                                                                    {
                                                                        <tr>
                                                                            <td style="color: #9D00FF;">
                                                                                @if (!string.IsNullOrEmpty(thesis.CompanyNameUploadedThesis))
                                                                                {
                                                                                    @thesis.RNGForCompanyThesisUploaded_HashedAsUniqueID
                                                                                }
                                                                                else
                                                                                {
                                                                                    @thesis.RNGForProfessorThesisUploaded_HashedAsUniqueID
                                                                                }
                                                                            </td> 
                                                                            <td>
                                                                                @if (string.IsNullOrEmpty(thesis.CompanyNameUploadedThesis))
                                                                                {
                                                                                    <a href="javascript:void(0);" @onclick="() => ShowProfessorHyperlinkNameDetailsModalInStudentThesis(thesis.EmailUsedToUploadThesis)">
                                                                                        @thesis.ProfessorName @thesis.ProfessorSurname <span style="color:red;">(K)</span>
                                                                                    </a>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <a href="javascript:void(0);" @onclick="() => ShowCompanyHyperlinkNameDetailsModalInStudentThesis(thesis.EmailUsedToUploadThesis)">
                                                                                        @thesis.CompanyNameUploadedThesis <span style="color:red;">(E)</span>
                                                                                    </a>
                                                                                }
                                                                            </td>                                                                                
                                                                            <td>@thesis.ThesisTitle</td>
                                                                            <td>
                                                                                @(string.IsNullOrEmpty(thesis.CompanyThesisAreasUpload)
                                                                                    ? thesis.ProfessorThesisAreasUpload
                                                                                    : thesis.CompanyThesisAreasUpload)
                                                                            </td>
                                                                            <td>@thesis.ThesisUploadDateTime.ToString("yyyy-MM-dd HH:mm:ss")</td>

                                                                            @if (!string.IsNullOrEmpty(thesis.CompanyNameUploadedThesis))
                                                                            {
                                                                                <td style="text-align: center;">
                                                                                    <i class="fa fa-eye" style="color: #003366; cursor: pointer;" @onclick="() => ShowCompanyThesisDetailsAsStudent(thesis.RNGForCompanyThesisUploaded)"></i>
                                                                                </td>
                                                                            }
                                                                            else if (!string.IsNullOrEmpty(thesis.ProfessorName))
                                                                            {
                                                                                <td style="text-align: center;">
                                                                                    <i class="fa fa-eye" style="color: #003366; cursor: pointer;" @onclick="() => ShowProfessorThesisDetailsAsStudent(thesis.RNGForProfessorThesisUploaded)"></i>
                                                                                </td>
                                                                            }
                                                                            <td>
                                                                                @if ((thesis.ThesisType == ThesisType.Professor && professorThesisIdsApplied.Contains(thesis.RNGForProfessorThesisUploaded)) ||
                                                                                     (thesis.ThesisType == ThesisType.Company && companyThesisIdsApplied.Contains(thesis.RNGForCompanyThesisUploaded)))
                                                                                {
                                                                                    <span class="text-success" style="font-weight: bold;">
                                                                                        <i class="fas fa-check-circle"></i> Έχετε ήδη δείξει Ενδιαφέρον για αυτήν την Πτυχιακή Εργασία
                                                                                    </span>
                                                                                }
                                                                                else if ((thesis.ThesisType == ThesisType.Professor && thesis.ProfessorThesisStatus == "Δημοσιευμένη") ||
                                                                                         (thesis.ThesisType == ThesisType.Company && thesis.CompanyThesisStatus == "Δημοσιευμένη"))
                                                                                {
                                                                                    <button class="modern-button" style="background-color: #008000; color: white;" 
                                                                                            @onclick="() => ApplyForThesisAsStudent(thesis)">
                                                                                        Αίτηση
                                                                                    </button>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <button class="modern-button" style="background-color: #cccccc; color: #666666; cursor: not-allowed;" 
                                                                                            title="Η Πτυχιακή δεν είναι διαθέσιμη για αίτηση">
                                                                                        Μη Διαθέσιμη
                                                                                    </button>
                                                                                }
                                                                            </td>
                                                                        </tr>
                                                                    }
                                                                </tbody>
                                                            </table>
                                                            <br/>
                                                            <!-- Pagination Controls -->
                                                            <div class="d-flex justify-content-center align-items-center mt-3 gap-1">
                                                                <!-- First Page (<<) -->
                                                                <span class="pagination-item @(currentThesisPage == 1 ? "disabled" : "")" 
                                                                      @onclick="@(() => ChangeThesisPage(1))">
                                                                    &lt;&lt;
                                                                </span>
    
                                                                <!-- Previous Page (<) -->
                                                                <span class="pagination-item @(currentThesisPage == 1 ? "disabled" : "")" 
                                                                      @onclick="@(() => ChangeThesisPage(currentThesisPage - 1))">
                                                                    &lt;
                                                                </span>
    
                                                                <!-- Page Numbers -->
                                                                @foreach (var pageNumber in GetVisiblePages(currentThesisPage, totalThesisPages_SearchThesisAsStudent))
                                                                {
                                                                    @if (pageNumber == -1)
                                                                    {
                                                                        <span class="pagination-ellipsis">...</span>
                                                                    }
                                                                    else
                                                                    {
                                                                        <span class="pagination-item @(pageNumber == currentThesisPage ? "active" : "")" 
                                                                              @onclick="@(() => ChangeThesisPage(pageNumber))">
                                                                            @pageNumber
                                                                        </span>
                                                                    }
                                                                }
    
                                                                <!-- Next Page (>) -->
                                                                <span class="pagination-item @(currentThesisPage == totalThesisPages_SearchThesisAsStudent ? "disabled" : "")" 
                                                                      @onclick="@(() => ChangeThesisPage(currentThesisPage + 1))">
                                                                    &gt;
                                                                </span>
    
                                                                <!-- Last Page (>>) -->
                                                                <span class="pagination-item @(currentThesisPage == totalThesisPages_SearchThesisAsStudent ? "disabled" : "")" 
                                                                      @onclick="@(() => ChangeThesisPage(totalThesisPages_SearchThesisAsStudent))">
                                                                    &gt;&gt;
                                                                </span>
    
                                                                <!-- Page counter -->
                                                                <span class="ms-3">Σελίδα @currentThesisPage από @totalThesisPages_SearchThesisAsStudent</span>
                                                            </div>
                                                            <br />
                                                            <br />
                                                        }
                                                        else
                                                        {
                                                            <div class="alert alert-warning" role="alert" id="noThesesFoundAlert">
                                                                <p>Δεν υπάρχουν πτυχιακές εργασίες με βάση τα κριτήρια της αναζήτησής σας.</p>
                                                            </div>
                                                        }
                                                    }

                                            }




                                         
                                                @if (selectedProfessorThesisDetails != null)
                                                {
                                                    <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                                        <div class="modal-dialog modal-dialog-centered" role="document">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h5 class="modal-title" style="color: #4682B4;">@selectedProfessorThesisDetails.ThesisTitle</h5>
                                                                    <button type="button" class="close" @onclick="CloseModalForProfessorThesisDetails">
                                                                        <span aria-hidden="true">&times;</span>
                                                                    </button>
                                                                </div>
                                                                <div class="modal-body">
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Επιβλέπων Καθηγητής</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-user-tie text-primary me-2"></i>
                                                                            <span>@(selectedProfessorThesisDetails.Professor != null ? 
                                                                                $"{selectedProfessorThesisDetails.Professor.ProfName} {selectedProfessorThesisDetails.Professor.ProfSurname}" : 
                                                                                "Άγνωστος Καθηγητής")</span>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="viewThesisDescription"><strong>Περιγραφή Πτυχιακής</strong></label>
                                                                        <textarea id="viewThesisDescription" class="form-control" readonly>@selectedProfessorThesisDetails.ThesisDescription</textarea>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="viewThesisAreas"><strong>Περιοχές Ενδιαφέροντος</strong></label>
                                                                        <textarea id="viewThesisAreas" class="form-control" readonly>@selectedProfessorThesisDetails.ThesisAreas</textarea>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="viewThesisSkills"><strong>Απαιτούμενες Δεξιότητες</strong></label>
                                                                        <textarea id="viewThesisSkills" class="form-control" readonly>@selectedProfessorThesisDetails.ThesisSkills</textarea>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Email Καθηγητή</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-envelope text-dark me-2"></i>
                                                                            <span>@selectedProfessorThesisDetails.ProfessorEmailUsedToUploadThesis</span>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Ημερομηνία Δημιουργίας</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-calendar-alt text-dark me-2"></i>
                                                                            <span>@selectedProfessorThesisDetails.ThesisUploadDateTime.ToString("dd/MM/yyyy HH:mm")</span>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Περίοδος Ισχύος Πτυχιακής</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-calendar-alt text-dark me-2"></i>
                                                                            <span>@selectedProfessorThesisDetails.ThesisActivePeriod.ToString("dd/MM/yyyy")</span>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="viewThesisStatus"><strong>Κατάσταση Πτυχιακής</strong></label>
                                                                        <input type="text" id="viewThesisStatus" class="form-control" value="@selectedProfessorThesisDetails.ThesisStatus" readonly />
                                                                    </div>

                                                                    @if (selectedProfessorThesisDetails.IsCompanyInteresetedInProfessorThesis && selectedProfessorThesisDetails.CompanyInterested != null)
                                                                    {
                                                                        <div class="form-group">
                                                                            <label for="viewCompanyName" class="font-weight-bold text-primary">
                                                                                <strong>Όνομα Ενδιαφερόμενης Εταιρίας</strong>
                                                                            </label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fas fa-industry text-primary me-2"></i>
                                                                                <span>@selectedProfessorThesisDetails.CompanyInterested.CompanyName</span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label for="viewCompanyEmail" class="font-weight-bold text-primary">
                                                                                <strong>Email Ενδιαφερόμενης Εταιρίας</strong>
                                                                            </label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fas fa-envelope text-primary me-2"></i>
                                                                                <span>@selectedProfessorThesisDetails.CompanyInterested.CompanyEmail</span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label class="font-weight-bold text-primary"><strong>Τοποθεσία Ενδιαφερόμενης Εταιρίας</strong></label>
                                                                            <div class="form-control d-flex align-items-center mt-1" style="height: auto;">
                                                                                <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                <a href="https://www.google.com/maps/search/@selectedProfessorThesisDetails.CompanyInterested.CompanyLocation"
                                                                                   target="_blank"
                                                                                   style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                    @selectedProfessorThesisDetails.CompanyInterested.CompanyLocation
                                                                                </a>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label class="font-weight-bold text-primary"><strong>Ιστότοπος Ενδιαφερόμενης Εταιρίας</strong></label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fas fa-globe" style="color: #007bff; margin-right: 8px;"></i>
                                                                                <a href="@selectedProfessorThesisDetails.CompanyInterested.CompanyWebsite"
                                                                                   target="_blank"
                                                                                   style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                    @selectedProfessorThesisDetails.CompanyInterested.CompanyWebsite
                                                                                </a>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label for="viewCompanyDescription" class="font-weight-bold text-primary"><strong>Περιγραφή Ενδιαφερόμενης Εταιρίας</strong></label>
                                                                            <textarea id="viewCompanyDescription" class="form-control" readonly>@selectedProfessorThesisDetails.CompanyInterested.CompanyDescription</textarea>
                                                                        </div>
                                                                    }
                                                                    <br/>
                                                                    <div class="form-group">
                                                                        <label for="viewProfessorThesisAttachment"><strong>Αρχείο Πτυχιακής: </strong></label>
                                                                        @if (selectedProfessorThesisDetails.ThesisAttachment != null)
                                                                        {
                                                                            <a href="data:application/pdf;base64,@Convert.ToBase64String(selectedProfessorThesisDetails.ThesisAttachment)" download="ThesisAttachment.pdf" class="btn btn-primary">
                                                                                Λήψη Αρχείου
                                                                            </a>
                                                                        }
                                                                        else
                                                                        {
                                                                            <span style="color: darkred;"><strong>Δεν Διατίθεται Συννημένο Αρχείο</strong></span>
                                                                        }
                                                                    </div>
                                                                </div>
                                                                <div class="modal-footer">
                                                                    <button type="button" class="btn btn-secondary" @onclick="CloseModalForProfessorThesisDetails">Κλείσιμο</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                }




                                               @if (selectedCompanyThesisDetails != null)
                                               {
                                                    <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                                        <div class="modal-dialog modal-dialog-centered" role="document">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h5 class="modal-title" style="color: #4682B4;">@selectedCompanyThesisDetails.CompanyThesisTitle</h5>
                                                                    <button type="button" class="close" @onclick="CloseModalForCompanyThesisDetails">
                                                                        <span aria-hidden="true">&times;</span>
                                                                    </button>
                                                                </div>
                                                                <div class="modal-body">
                                                                    @if (selectedCompanyThesisDetails != null)
                                                                    {
                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Όνομα Εταιρίας</label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fas fa-industry" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                <span>@(selectedCompanyThesisDetails.Company?.CompanyName ?? "Άγνωστη Εταιρεία")</span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Επιβλέπων Υπεύθυνος Εταιρείας</label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fas fa-user-tie" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                <span>@selectedCompanyThesisDetails.CompanyThesisCompanySupervisorFullName</span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;" class="text-primary">Επιβλέπων Ενδιαφερόμενος Καθηγητής</label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fas fa-user-tie" style="color: #007bff; margin-right: 8px;"></i>
                                                                                @if (selectedCompanyThesisDetails.ProfessorInterested != null)
                                                                                {
                                                                                    <span>@($"{selectedCompanyThesisDetails.ProfessorInterested.ProfName} {selectedCompanyThesisDetails.ProfessorInterested.ProfSurname}")</span>
                                                                                }
                                                                                else if (!string.IsNullOrEmpty(selectedCompanyThesisDetails.ProfessorEmailInterestedInCompanyThesis))
                                                                                {
                                                                                    <span>@selectedCompanyThesisDetails.ProfessorEmailInterestedInCompanyThesis</span>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <span>Δεν υπάρχει ενδιαφερόμενος καθηγητής</span>
                                                                                }
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label for="viewThesisDescription"><strong>Περιγραφή Πτυχιακής</strong></label>
                                                                            <textarea id="viewThesisDescription" class="form-control" rows="3" readonly>@selectedCompanyThesisDetails.CompanyThesisDescriptionsUploaded</textarea>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label for="viewThesisAreas"><strong>Περιοχές Ενδιαφέροντος</strong></label>
                                                                            <textarea id="viewThesisAreas" class="form-control" rows="3" readonly>@selectedCompanyThesisDetails.CompanyThesisAreasUpload</textarea>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label for="viewThesisSkills"><strong>Απαιτούμενες Δεξιότητες</strong></label>
                                                                            <textarea id="viewThesisSkills" class="form-control" rows="3" readonly>@selectedCompanyThesisDetails.CompanyThesisSkillsNeeded</textarea>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label for="viewThesisStatus"><strong>Κατάσταση Πτυχιακής</strong></label>
                                                                            <input type="text" id="viewThesisStatus" class="form-control" value="@selectedCompanyThesisDetails.CompanyThesisStatus" readonly />
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Τμήμα</label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fas fa-building text-secondary me-2"></i>
                                                                                <span>
                                                                                    @(string.IsNullOrWhiteSpace(selectedCompanyThesisDetails.CompanyThesisDepartment)
                                                                                        ? "Δεν έχει Καθοριστεί"
                                                                                        : selectedCompanyThesisDetails.CompanyThesisDepartment)
                                                                                </span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Email Επαφής</label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fas fa-envelope text-primary me-2"></i>
                                                                                <span>@selectedCompanyThesisDetails.CompanyThesisContactPersonEmail</span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Τηλέφωνο Επαφής</label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fas fa-phone text-success me-2"></i>
                                                                                <span>@selectedCompanyThesisDetails.CompanyThesisContactPersonTelephone</span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Ημερομηνία Ανεβάσματος</label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fas fa-calendar-alt text-primary me-2"></i>
                                                                                <span>@selectedCompanyThesisDetails.CompanyThesisUploadDateTime.ToString("dd/MM/yyyy HH:mm")</span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Ημερομηνία Έναρξης</label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fas fa-calendar-alt text-primary me-2"></i>
                                                                                <span>@selectedCompanyThesisDetails.CompanyThesisStartingDate.ToString("dd/MM/yyyy")</span>
                                                                            </div>
                                                                        </div>

                                                                        <br/>
                                                                        <div class="form-group">
                                                                            <label for="viewThesisAttachment"><strong>Αρχείο Πτυχιακής: </strong></label>
                                                                            @if (selectedCompanyThesisDetails.CompanyThesisAttachmentUpload != null)
                                                                            {
                                                                                <a href="data:application/pdf;base64,@Convert.ToBase64String(selectedCompanyThesisDetails.CompanyThesisAttachmentUpload)" download="ThesisAttachment.pdf" class="btn btn-primary">
                                                                                    Λήψη Αρχείου
                                                                                </a>
                                                                            }
                                                                            else
                                                                            {
                                                                                <span style="color: darkred;"><strong>Δεν Διατίθεται Συννημένο Αρχείο</strong></span>
                                                                            }
                                                                        </div>
                                                                    }
                                                                </div>
                                                                <div class="modal-footer">
                                                                    <button type="button" class="btn btn-secondary" @onclick="CloseModalForCompanyThesisDetails">Κλείσιμο</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                               }



                                               <!-- Professor Hyperlink Name Details Modal -->
                                                @if (selectedProfessorDetailsForHyperlinkNameInThesisAsStudent != null)
                                                {
                                                    <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0,0,0,0.5);">
                                                        <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h5 class="modal-title" style="color: #007BFF;">
                                                                        @selectedProfessorDetailsForHyperlinkNameInThesisAsStudent.ProfName 
                                                                        @selectedProfessorDetailsForHyperlinkNameInThesisAsStudent.ProfSurname
                                                                    </h5>
                                                                    <button type="button" class="btn-close" @onclick="CloseModalForProfessorNameHyperlinkDetails" aria-label="Κλείσιμο"></button>
                                                                </div>
                                                                <div class="modal-body">
                                                                    <!-- Profile Picture -->
                                                                    <div class="form-group text-center">
                                                                        @if (selectedProfessorDetailsForHyperlinkNameInThesisAsStudent.ProfImage != null && selectedProfessorDetailsForHyperlinkNameInThesisAsStudent.ProfImage.Length > 0)
                                                                        {
                                                                            var base64Image = Convert.ToBase64String(selectedProfessorDetailsForHyperlinkNameInThesisAsStudent.ProfImage);
                                                                            <img src="data:image/jpeg;base64,@base64Image" alt="Φωτογραφία Προφίλ Καθηγητή" 
                                                                                 style="max-width: 150px; max-height: 150px; border-radius: 50%; object-fit: cover;" />
                                                                        }
                                                                        else
                                                                        {
                                                                            <p>Δεν υπάρχει φωτογραφία Προφίλ</p>
                                                                        }
                                                                    </div>

                                                                    <!-- Professor Email -->
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Email</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-envelope" style="color: #007bff; margin-right: 8px;"></i>
                                                                            <span>@selectedProfessorDetailsForHyperlinkNameInThesisAsStudent.ProfEmail</span>
                                                                        </div>
                                                                    </div>

                                                                    <!-- Professor University and Department -->
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Πανεπιστήμιο</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-university" style="color: #007bff; margin-right: 8px;"></i>
                                                                            <span>@selectedProfessorDetailsForHyperlinkNameInThesisAsStudent.ProfUniversity</span>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Τμήμα</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fa-solid fa-building" style="color: #6c757d; margin-right: 8px;"></i>
                                                                            <span>@selectedProfessorDetailsForHyperlinkNameInThesisAsStudent.ProfDepartment</span>
                                                                        </div>
                                                                    </div>

                                                                    <!-- Professor Vahmida Department -->
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Βαθμίδα ΔΕΠ</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fa-solid fa-user-tie" style="color: #6c757d; margin-right: 8px;"></i>
                                                                            <span>@selectedProfessorDetailsForHyperlinkNameInThesisAsStudent.ProfVahmidaDEP</span>
                                                                        </div>
                                                                    </div>

                                                                    <!-- Professor Work and Personal Telephone -->
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Τηλέφωνο Εργασίας</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fa-solid fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                            <span>@selectedProfessorDetailsForHyperlinkNameInThesisAsStudent.ProfWorkTelephone</span>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Προσωπικό Τηλέφωνο</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fa-solid fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                            @if (selectedProfessorDetailsForHyperlinkNameInThesisAsStudent.ProfPersonalTelephoneVisibility)
                                                                            {
                                                                                <span>@selectedProfessorDetailsForHyperlinkNameInThesisAsStudent.ProfPersonalTelephone</span>
                                                                            }
                                                                            else
                                                                            {
                                                                                <span>Δεν Διατίθεται</span>
                                                                            }
                                                                        </div>
                                                                    </div>

                                                                    <!-- Professor Personal Website -->
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Ιστότοπος</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fa-solid fa-globe" style="color: #007bff; margin-right: 8px;"></i>
                                                                            @if (!string.IsNullOrWhiteSpace(selectedProfessorDetailsForHyperlinkNameInThesisAsStudent.ProfPersonalWebsite))
                                                                            {
                                                                                <a href="@selectedProfessorDetailsForHyperlinkNameInThesisAsStudent.ProfPersonalWebsite" target="_blank" class="flex-grow-1 text-truncate" style="text-decoration:none; color:#007bff;">
                                                                                    @selectedProfessorDetailsForHyperlinkNameInThesisAsStudent.ProfPersonalWebsite
                                                                                </a>
                                                                            }
                                                                            else
                                                                            {
                                                                                <span class="flex-grow-1 text-muted">Δεν Διατίθεται</span>
                                                                            }
                                                                        </div>
                                                                    </div>

                                                                    <!-- Professor LinkedIn Site -->
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">LinkedIn</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fab fa-linkedin" style="color: #0A66C2; margin-right: 8px;"></i>
                                                                            @if (!string.IsNullOrWhiteSpace(selectedProfessorDetailsForHyperlinkNameInThesisAsStudent.ProfLinkedInSite))
                                                                            {
                                                                                <a href="@selectedProfessorDetailsForHyperlinkNameInThesisAsStudent.ProfLinkedInSite" target="_blank" class="flex-grow-1 text-truncate" style="text-decoration:none; color:#0A66C2;">
                                                                                    @selectedProfessorDetailsForHyperlinkNameInThesisAsStudent.ProfLinkedInSite
                                                                                </a>
                                                                            }
                                                                            else
                                                                            {
                                                                                <span class="flex-grow-1 text-muted">Δεν Διατίθεται</span>
                                                                            }
                                                                        </div>
                                                                    </div>

                                                                    <!-- Professor Scholar Profile -->
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Scholar Profile</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-graduation-cap" style="color: #4285F4; margin-right: 8px;"></i>
                                                                            @if (!string.IsNullOrWhiteSpace(selectedProfessorDetailsForHyperlinkNameInThesisAsStudent.ProfScholarProfile))
                                                                            {
                                                                                <a href="@selectedProfessorDetailsForHyperlinkNameInThesisAsStudent.ProfScholarProfile" target="_blank" class="flex-grow-1 text-truncate" style="text-decoration:none; color:#4285F4;">
                                                                                    @selectedProfessorDetailsForHyperlinkNameInThesisAsStudent.ProfScholarProfile
                                                                                </a>
                                                                            }
                                                                            else
                                                                            {
                                                                                <span class="flex-grow-1 text-muted">Δεν Διατίθεται</span>
                                                                            }
                                                                        </div>
                                                                    </div>

                                                                    <!-- Professor ORCID Profile -->
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">ORCID Profile</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-id-card" style="color: #A6CE39; margin-right: 8px;"></i>
                                                                            @if (!string.IsNullOrWhiteSpace(selectedProfessorDetailsForHyperlinkNameInThesisAsStudent.ProfOrchidProfile))
                                                                            {
                                                                                <a href="@selectedProfessorDetailsForHyperlinkNameInThesisAsStudent.ProfOrchidProfile" target="_blank" class="flex-grow-1 text-truncate" style="text-decoration:none; color:#A6CE39;">
                                                                                    @selectedProfessorDetailsForHyperlinkNameInThesisAsStudent.ProfOrchidProfile
                                                                                </a>
                                                                            }
                                                                            else
                                                                            {
                                                                                <span class="flex-grow-1 text-muted">Δεν Διατίθεται</span>
                                                                            }
                                                                        </div>
                                                                    </div>

                                                                    <!-- Professor General Field of Work (Areas) -->
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Γενικός Τομέας Εργασίας</label>
                                                                        <textarea class="form-control" readonly>@selectedProfessorDetailsForHyperlinkNameInThesisAsStudent.ProfGeneralFieldOfWork</textarea>
                                                                    </div>

                                                                    <!-- Professor General Skills -->
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Γενικές Δεξιότητες</label>
                                                                        <textarea class="form-control" readonly>@selectedProfessorDetailsForHyperlinkNameInThesisAsStudent.ProfGeneralSkills</textarea>
                                                                    </div>

                                                                    <!-- Professor Personal Description -->
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Σύντομη Περιγραφή</label>
                                                                        <textarea class="form-control" readonly>@selectedProfessorDetailsForHyperlinkNameInThesisAsStudent.ProfPersonalDescription</textarea>
                                                                    </div>
                                                                </div>
                                                                <div class="modal-footer">
                                                                    <button type="button" class="btn btn-secondary" @onclick="CloseModalForProfessorNameHyperlinkDetails">Κλείσιμο</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                }





                                                
                                                <!-- Company Hyperlink Name Details Modal -->
                                                @if (isCompanyDetailsModalOpenForHyperlinkNameAsStudent && selectedCompanyDetailsForHyperlinkNameInThesisAsStudent != null)
                                                {
                                                   <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                                        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h5 class="modal-title" style="color: #4682B4;">
                                                                        @selectedCompanyDetailsForHyperlinkNameInThesisAsStudent.CompanyName
                                                                    </h5>
                                                                    <button type="button" class="close" @onclick="CloseModalForCompanyNameHyperlinkDetails">
                                                                        <span aria-hidden="true">&times;</span>
                                                                    </button>
                                                                </div>
                                                                <div class="modal-body">
                                                                    <div class="form-group text-center">
                                                                        @if (selectedCompanyDetailsForHyperlinkNameInThesisAsStudent.CompanyLogo != null)
                                                                        {
                                                                            <img src="@ShowProfileImage(selectedCompanyDetailsForHyperlinkNameInThesisAsStudent.CompanyLogo)"
                                                                                 alt="Company Logo"
                                                                                 class="rounded-circle img-fluid"
                                                                                 style="max-width: 150px; max-height: 150px; object-fit: cover;" />
                                                                        }
                                                                        else
                                                                        {
                                                                            <p>Δεν είναι διαθέσιμο</p>
                                                                        }
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Σύντομη Ονομασία</strong></label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-tag" style="color: #6c757d; margin-right: 8px;"></i>
                                                                            <input type="text" class="border-0 flex-grow-1" value="@selectedCompanyDetailsForHyperlinkNameInThesisAsStudent.CompanyShortName" readonly />
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Τύπος Εταιρείας</strong></label>
                                                                        <input type="text" class="form-control" value="@selectedCompanyDetailsForHyperlinkNameInThesisAsStudent.CompanyType" readonly />
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Email Εταιρείας</strong></label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-envelope" style="color: #6c757d; margin-right: 8px;"></i>
                                                                            <input type="text" class="border-0 flex-grow-1" value="@selectedCompanyDetailsForHyperlinkNameInThesisAsStudent.CompanyEmail" readonly />
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Ιστοσελίδα Εταιρείας</strong></label>
                                                                        @if (!string.IsNullOrWhiteSpace(selectedCompanyDetailsForHyperlinkNameInThesisAsStudent.CompanyWebsite))
                                                                        {
                                                                            <div class="form-control d-flex align-items-center" style="height: auto; cursor: pointer; color: #007bff;"
                                                                                 onclick="window.open('@(selectedCompanyDetailsForHyperlinkNameInThesisAsStudent.CompanyWebsite.StartsWith("http") ? selectedCompanyDetailsForHyperlinkNameInThesisAsStudent.CompanyWebsite : "http://" + selectedCompanyDetailsForHyperlinkNameInThesisAsStudent.CompanyWebsite)', '_blank')">
                                                                                <i class="fa-solid fa-globe" style="margin-right: 8px;"></i>
                                                                                <span class="flex-grow-1">@selectedCompanyDetailsForHyperlinkNameInThesisAsStudent.CompanyWebsite</span>
                                                                            </div>
                                                                        }
                                                                        else
                                                                        {
                                                                            <input type="text" class="form-control" value="Δεν υπάρχει" readonly />
                                                                        }
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Ανακοινώσεις Εταιρείας</strong></label>
                                                                        @if (!string.IsNullOrWhiteSpace(selectedCompanyDetailsForHyperlinkNameInThesisAsStudent.CompanyWebsiteAnnouncements))
                                                                        {
                                                                            <div class="form-control d-flex align-items-center" style="height: auto; cursor: pointer; color: #007bff;"
                                                                                 onclick="window.open('@(selectedCompanyDetailsForHyperlinkNameInThesisAsStudent.CompanyWebsiteAnnouncements.StartsWith("http") ? selectedCompanyDetailsForHyperlinkNameInThesisAsStudent.CompanyWebsiteAnnouncements : "http://" + selectedCompanyDetailsForHyperlinkNameInThesisAsStudent.CompanyWebsiteAnnouncements)', '_blank')">
                                                                                <i class="fa-solid fa-globe" style="margin-right: 8px;"></i>
                                                                                <span class="flex-grow-1">@selectedCompanyDetailsForHyperlinkNameInThesisAsStudent.CompanyWebsiteAnnouncements</span>
                                                                            </div>
                                                                        }
                                                                        else
                                                                        {
                                                                            <input type="text" class="form-control" value="Δεν υπάρχει" readonly />
                                                                        }
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Θέσεις Εργασίας Εταιρείας</strong></label>
                                                                        @if (!string.IsNullOrWhiteSpace(selectedCompanyDetailsForHyperlinkNameInThesisAsStudent.CompanyWebsiteJobs))
                                                                        {
                                                                            <div class="form-control d-flex align-items-center" style="height: auto; cursor: pointer; color: #007bff;"
                                                                                 onclick="window.open('@(selectedCompanyDetailsForHyperlinkNameInThesisAsStudent.CompanyWebsiteJobs.StartsWith("http") ? selectedCompanyDetailsForHyperlinkNameInThesisAsStudent.CompanyWebsiteJobs : "http://" + selectedCompanyDetailsForHyperlinkNameInThesisAsStudent.CompanyWebsiteJobs)', '_blank')">
                                                                                <i class="fa-solid fa-globe" style="margin-right: 8px;"></i>
                                                                                <span class="flex-grow-1">@selectedCompanyDetailsForHyperlinkNameInThesisAsStudent.CompanyWebsiteJobs</span>
                                                                            </div>
                                                                        }
                                                                        else
                                                                        {
                                                                            <input type="text" class="form-control" value="Δεν υπάρχει" readonly />
                                                                        }
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Τηλέφωνο Εταιρείας</strong></label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fa-solid fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                            <input type="text" class="border-0 flex-grow-1" value="@selectedCompanyDetailsForHyperlinkNameInThesisAsStudent.CompanyTelephone" readonly />
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Περιγραφή Εταιρείας</strong></label>
                                                                        <textarea class="form-control" rows="3" readonly>@selectedCompanyDetailsForHyperlinkNameInThesisAsStudent.CompanyDescription</textarea>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Δραστηριότητα Εταιρείας</strong></label>
                                                                        <input type="text" class="form-control" value="@selectedCompanyDetailsForHyperlinkNameInThesisAsStudent.CompanyActivity" readonly />
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Περιοχές Ενδιαφέροντος</strong></label>
                                                                        <textarea class="form-control" rows="2" readonly>@selectedCompanyDetailsForHyperlinkNameInThesisAsStudent.CompanyAreas</textarea>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Χώρα</strong></label>
                                                                        <input type="text" class="form-control" value="@selectedCompanyDetailsForHyperlinkNameInThesisAsStudent.CompanyCountry" readonly />
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Περιφέρεια</strong></label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fa-solid fa-map" style="color: #6c757d; margin-right: 8px;"></i>
                                                                            <input type="text" class="border-0 flex-grow-1" value="@selectedCompanyDetailsForHyperlinkNameInThesisAsStudent.CompanyRegions" readonly />
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Πόλη</strong></label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fa-solid fa-city" style="color: #6c757d; margin-right: 8px;"></i>
                                                                            <input type="text" class="border-0 flex-grow-1" value="@selectedCompanyDetailsForHyperlinkNameInThesisAsStudent.CompanyTown" readonly />
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Διεύθυνση</strong></label>
                                                                        <div class="form-control d-flex align-items-center mt-1" style="height: auto;">
                                                                            <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                            <a href="https://www.google.com/maps/search/@selectedCompanyDetailsForHyperlinkNameInThesisAsStudent.CompanyLocation"
                                                                               target="_blank"
                                                                               style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                @selectedCompanyDetailsForHyperlinkNameInThesisAsStudent.CompanyLocation
                                                                            </a>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Ταχυδρομικός Κώδικας</strong></label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fa-solid fa-envelope-open-text" style="color: #6c757d; margin-right: 8px;"></i>
                                                                            <input type="text" class="border-0 flex-grow-1" value="@selectedCompanyDetailsForHyperlinkNameInThesisAsStudent.CompanyPC" readonly />
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Email Υπεύθυνου Ανθρώπινου Δυναμικού</strong></label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fa-solid fa-envelope" style="color: #007bff; margin-right: 8px;"></i>
                                                                            <input type="text" class="border-0 flex-grow-1" value="@selectedCompanyDetailsForHyperlinkNameInThesisAsStudent.CompanyHREmail" readonly />
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Τηλέφωνο Υπεύθυνου Ανθρώπινου Δυναμικού</strong></label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fa-solid fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                            <input type="text" class="border-0 flex-grow-1" value="@selectedCompanyDetailsForHyperlinkNameInThesisAsStudent.CompanyHRTelephone" readonly />
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="modal-footer">
                                                                    <button type="button" class="btn btn-secondary" @onclick="CloseModalForCompanyNameHyperlinkDetails">
                                                                        Κλείσιμο
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                }



                                                @if (isModalOpenToSeeProfessorThesisDetails_ThesisStudentApplicationsToShow && selectedProfessorThesisDetails_ThesisStudentApplicationsToShow != null)
                                                {
                                                    <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                                        <div class="modal-dialog modal-dialog-centered" role="document">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h5 class="modal-title" style="color: #4682B4;">@selectedProfessorThesisDetails_ThesisStudentApplicationsToShow.ThesisTitle</h5>
                                                                    <button type="button" class="close" @onclick="CloseProfessorThesisDetailsModal_StudentThesisApplications">
                                                                        <span aria-hidden="true">&times;</span>
                                                                    </button>
                                                                </div>
                                                                <div class="modal-body">
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Επιβλέπων Καθηγητής</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-user-tie text-primary me-2"></i>
                                                                            <span>@(selectedProfessorThesisDetails_ThesisStudentApplicationsToShow.Professor != null ? 
                                                                                $"{selectedProfessorThesisDetails_ThesisStudentApplicationsToShow.Professor.ProfName} {selectedProfessorThesisDetails_ThesisStudentApplicationsToShow.Professor.ProfSurname}" : 
                                                                                "Άγνωστος Καθηγητής")</span>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="viewThesisDescription"><strong>Περιγραφή Πτυχιακής</strong></label>
                                                                        <textarea id="viewThesisDescription" class="form-control" readonly>@selectedProfessorThesisDetails_ThesisStudentApplicationsToShow.ThesisDescription</textarea>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="viewThesisAreas"><strong>Περιοχές Ενδιαφέροντος</strong></label>
                                                                        <textarea id="viewThesisAreas" class="form-control" readonly>@selectedProfessorThesisDetails_ThesisStudentApplicationsToShow.ThesisAreas</textarea>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="viewThesisSkills"><strong>Απαιτούμενες Δεξιότητες</strong></label>
                                                                        <textarea id="viewThesisSkills" class="form-control" readonly>@selectedProfessorThesisDetails_ThesisStudentApplicationsToShow.ThesisSkills</textarea>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Email Καθηγητή</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-envelope text-dark me-2"></i>
                                                                            <span>@selectedProfessorThesisDetails_ThesisStudentApplicationsToShow.ProfessorEmailUsedToUploadThesis</span>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Ημερομηνία Δημιουργίας</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-calendar-alt text-dark me-2"></i>
                                                                            <span>@selectedProfessorThesisDetails_ThesisStudentApplicationsToShow.ThesisUploadDateTime.ToString("dd/MM/yyyy HH:mm")</span>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Περίοδος Ισχύος Πτυχιακής</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-calendar-alt text-dark me-2"></i>
                                                                            <span>@selectedProfessorThesisDetails_ThesisStudentApplicationsToShow.ThesisActivePeriod.ToString("dd/MM/yyyy")</span>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="viewThesisStatus"><strong>Κατάσταση Πτυχιακής</strong></label>
                                                                        <input type="text" id="viewThesisStatus" class="form-control" value="@selectedProfessorThesisDetails_ThesisStudentApplicationsToShow.ThesisStatus" readonly />
                                                                    </div>

                                                                    @if (selectedProfessorThesisDetails_ThesisStudentApplicationsToShow.IsCompanyInteresetedInProfessorThesis && 
                                                                        selectedProfessorThesisDetails_ThesisStudentApplicationsToShow.CompanyInterested != null)
                                                                    {
                                                                        <div class="form-group">
                                                                            <label for="viewCompanyName" class="font-weight-bold text-primary">
                                                                                <strong>Όνομα Ενδιαφερόμενης Εταιρίας</strong>
                                                                            </label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fas fa-industry text-primary me-2"></i>
                                                                                <span>@selectedProfessorThesisDetails_ThesisStudentApplicationsToShow.CompanyInterested.CompanyName</span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label for="viewCompanyEmail" class="font-weight-bold text-primary">
                                                                                <strong>Email Ενδιαφερόμενης Εταιρίας</strong>
                                                                            </label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fas fa-envelope text-primary me-2"></i>
                                                                                <span>@selectedProfessorThesisDetails_ThesisStudentApplicationsToShow.CompanyInterested.CompanyEmail</span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label class="font-weight-bold text-primary"><strong>Τοποθεσία Ενδιαφερόμενης Εταιρίας</strong></label>
                                                                            <div class="form-control d-flex align-items-center mt-1" style="height: auto;">
                                                                                <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                <a href="https://www.google.com/maps/search/@selectedProfessorThesisDetails_ThesisStudentApplicationsToShow.CompanyInterested.CompanyLocation"
                                                                                   target="_blank"
                                                                                   style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                    @selectedProfessorThesisDetails_ThesisStudentApplicationsToShow.CompanyInterested.CompanyLocation
                                                                                </a>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label class="font-weight-bold text-primary"><strong>Ιστότοπος Ενδιαφερόμενης Εταιρίας</strong></label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fas fa-globe" style="color: #007bff; margin-right: 8px;"></i>
                                                                                <a href="@selectedProfessorThesisDetails_ThesisStudentApplicationsToShow.CompanyInterested.CompanyWebsite"
                                                                                   target="_blank"
                                                                                   style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                    @selectedProfessorThesisDetails_ThesisStudentApplicationsToShow.CompanyInterested.CompanyWebsite
                                                                                </a>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label for="viewCompanyDescription" class="font-weight-bold text-primary"><strong>Περιγραφή Ενδιαφερόμενης Εταιρίας</strong></label>
                                                                            <textarea id="viewCompanyDescription" class="form-control" readonly>@selectedProfessorThesisDetails_ThesisStudentApplicationsToShow.CompanyInterested.CompanyDescription</textarea>
                                                                        </div>
                                                                    }
                                                                    <br/>
                                                                    <div class="form-group">
                                                                        <label for="viewProfessorThesisAttachment"><strong>Αρχείο Πτυχιακής: </strong></label>
                                                                        @if (selectedProfessorThesisDetails_ThesisStudentApplicationsToShow.ThesisAttachment != null)
                                                                        {
                                                                            <a href="data:application/pdf;base64,@Convert.ToBase64String(selectedProfessorThesisDetails_ThesisStudentApplicationsToShow.ThesisAttachment)" download="ThesisAttachment.pdf" class="btn btn-primary">
                                                                                Λήψη Αρχείου
                                                                            </a>
                                                                        }
                                                                        else
                                                                        {
                                                                            <span style="color: darkred;"><strong>Δεν Διατίθεται Συννημένο Αρχείο</strong></span>
                                                                        }
                                                                    </div>
                                                                </div>
                                                                <div class="modal-footer">
                                                                    <button type="button" class="btn btn-secondary" @onclick="CloseProfessorThesisDetailsModal_StudentThesisApplications">Κλείσιμο</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                }




                                            
                                        </div>

                                                                    
                                        


 <!-------------------------------------------------------------------------------------------- JOBS AS STUDENT tab content ---------------------------------------------------------------------------------------------------->
                                        <div class="tab-pane fade" id="jobs" role="tabpanel" aria-labelledby="jobs-tab">
                                            <!-- Filter label for jobs -->

                                            <div class="mb-3 row-dark-gray mt-4">
                                                <div class="d-flex justify-content-between align-items-center">
                                                    <label class="form-label" style="color: #FFF8DC;">• Αιτήσεις Θέσεων Εργασίας •</label>
                                                    <button class="btn btn-link" @onclick="ToggleAndLoadStudentJobApplications">
                                                        @if (showStudentJobApplications)
                                                        {
                                                            <span>&#8722;</span> <!-- Minus sign -->
                                                        }
                                                        else
                                                        {
                                                            <span>&#43;</span> <!-- Plus sign -->
                                                        }
                                                    </button>
                                                </div>
                                            </div>
                                            @*
                                            @if (isJobApplicationsAsStudentVisible)
                                            {

                                            <div class="mb-3">
                                                <button class="modern-button" style="background-color: #007bff; color: white;" @onclick="ToggleAndLoadStudentJobApplications">Εμφάνιση των Αιτήσεων μου</button>
                                            </div>
                                            *@
                                            @if (showStudentJobApplications)
                                            {

                                                    <div class="col-md-2">
                                                        <label style="color: #4682b4; font-weight: bold; font-size: 15px; display: block;">Αποτελέσματα ανά Σελίδα</label>
                                                        <div class="input-group" style="max-width: 65px;"> <!-- Adjust width here -->
                                                            <select class="form-control form-control-sm" @onchange="OnJobPageSizeChange_SeeMyJobApplicationsAsStudent" aria-label="Items per page">
                                                                @foreach (var option in pageSizeOptions_SeeMyJobApplicationsAsStudent)
                                                                {
                                                                    <option value="@option" selected="@(jobPageSize == option)">@option</option>
                                                                }
                                                            </select>
                                                            <div class="input-group-append">
                                                                <span class="input-group-text">
                                                                    <i class="fas fa-chevron-down"></i>
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                @if (jobApplications != null && jobApplications.Any())
                                                {
                                                    <table class="table">
                                                        <thead>
                                                            <tr>
                                                                <td colspan="9" style="padding: 0;">
                                                                    <div style="display: flex; justify-content: space-between; align-items: center; height: 24px; line-height: 24px; width: 100%;">
                                                                        <i class="fa-regular fa-bell" style="font-size: 18px; color: #0d6efd;"></i>
                                                                        <label class="form-label" style="color: #0d6efd; font-weight: bold; font-size: 18px; margin: 0;">Οι Αιτήσεις Μου</label>
                                                                        <i class="fa-regular fa-bell" style="font-size: 18px; color: #0d6efd;"></i>
                                                                    </div>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <th><i class="fa-solid fa-key fa-sm" style="color: #9D00FF;"></i> Κωδικός Θέσης</th>
                                                                <th>
                                                                    <i class="fa-solid fa-industry fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                    Εταιρία
                                                                </th>
                                                                <th>
                                                                    <i class="fa-solid fa-font fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                    Τίτλος Θέσης Εργασίας
                                                                </th>
                                                                <th>
                                                                    <i class="fa-solid fa-calendar-plus fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                    Ημερομηνία Αίτησης
                                                                </th>
                                                                <th>
                                                                    <i class="fa-solid fa-comments fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                    Επικοινωνία
                                                                </th>
                                                                <th>
                                                                    <i class="fa-solid fa-spinner fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                    Κατάσταση Αίτησης
                                                                </th>
                                                                <th>
                                                                    <i class="fa-solid fa-ban fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                    Απόσυρση Αίτησης
                                                                </th>
                                                            </tr>
                                                        </thead>
                                                       <tbody id="jobApplicationsTable">
                                                        @foreach (var application in jobApplications
                                                            .Skip((currentJobPage - 1) * jobPageSize)
                                                            .Take(jobPageSize))
                                                        {
                                                            // Get status directly from main entity with fallback
                                                            var status = application.CompanyPositionStatusAppliedAtTheStudentSide 
                                                                       ?? application.CompanyPositionStatusAppliedAtTheCompanySide
                                                                       ?? "Σε Επεξεργασία";
        
                                                            // Get job data from cache
                                                            var job = jobDataCache.TryGetValue(application.RNGForCompanyJobApplied, out var j) ? j : null;

                                                            <tr style="background-color: @GetStatusColor(status)">
                                                                <td style="color: #9D00FF;">
                                                                    @application.RNGForCompanyJobAppliedAsStudent_HashedAsUniqueID
                                                                </td>
                                                                <td>
                                                                    @if (job != null)
                                                                    {
                                                                        <a href="#" @onclick="() => ShowCompanyDetailsAsAHyperlinkInShowJobsAsStudent(job.EmailUsedToUploadJobs)">
                                                                            @(job.Company?.CompanyName ?? "Unknown Company")
                                                                        </a>
                                                                    }
                                                                    else
                                                                    {
                                                                        <span class="text-warning">Δεν βρέθηκε</span>
                                                                    }
                                                                </td>
                                                                <td>
                                                                    @if (job != null)
                                                                    {
                                                                        <a href="#" @onclick="() => ShowJobDetailsInJobTitleAsHyperlink_StudentJobApplications(application.RNGForCompanyJobApplied)">
                                                                            @job.PositionTitle
                                                                        </a>
                                                                    }
                                                                    else
                                                                    {
                                                                        <span class="text-warning">Δεν βρέθηκε</span>
                                                                    }
                                                                </td>
                                                                <td>@application.DateTimeStudentAppliedForCompanyJob.ToString("dd/MM/yyyy HH:mm")</td>
                                                                <td class="text-center">
                                                                    <a href="mailto:@application.CompanysEmailWhereStudentAppliedForCompanyJob" target="_blank" 
                                                                       title="@application.CompanysEmailWhereStudentAppliedForCompanyJob">
                                                                        <i class="fas fa-envelope"></i>
                                                                    </a>
                                                                </td>
                                                                <td>@status</td>
                                                                <td class="text-center">
                                                                    @if (status == "Σε Επεξεργασία")
                                                                    {
                                                                        <span style="cursor: pointer;" @onclick="() => WithdrawJobApplicationMadeByStudent(application)" 
                                                                              title="Κάντε Κλικ για Απόσυρση της Αίτησης σας">
                                                                            <i class="fas fa-times"></i>
                                                                        </span>
                                                                    }
                                                                    else if (status == "Επιτυχής" || status == "Απορρίφθηκε")
                                                                    {
                                                                        <span>Δεν μπορεί να αποσυρθεί</span>
                                                                    }
                                                                    else
                                                                    {
                                                                        <span>Ολοκληρώθηκε</span>
                                                                    }
                                                                </td>
                                                            </tr>
                                                        }             
                                                    </tbody>
                                                    </table>
                                                     <br/>
                                                    <!-- Pagination Controls -->                                                   
                                                    var totalJobPages = (int)Math.Ceiling((double)jobApplications.Count / jobPageSize);                                                   
                                                    <!-- Job Applications Pagination -->
                                                    <div class="d-flex justify-content-center align-items-center mt-3 gap-1">
                                                        <!-- First Page (<<) -->
                                                        <span class="pagination-item @(currentJobPage == 1 ? "disabled" : "")" 
                                                              @onclick="@(() => ChangeJobPage(1))">
                                                            &lt;&lt;
                                                        </span>
    
                                                        <!-- Previous Page (<) -->
                                                        <span class="pagination-item @(currentJobPage == 1 ? "disabled" : "")" 
                                                              @onclick="@(() => ChangeJobPage(currentJobPage - 1))">
                                                            &lt;
                                                        </span>
    
                                                        <!-- Page Numbers -->
                                                        @foreach (var pageNumber in GetVisiblePages(currentJobPage, (int)Math.Ceiling((double)jobApplications.Count / jobPageSize)))
                                                        {
                                                            @if (pageNumber == -1)
                                                            {
                                                                <span class="pagination-ellipsis">...</span>
                                                            }
                                                            else
                                                            {
                                                                <span class="pagination-item @(pageNumber == currentJobPage ? "active" : "")" 
                                                                      @onclick="@(() => ChangeJobPage(pageNumber))">
                                                                    @pageNumber
                                                                </span>
                                                            }
                                                        }
    
                                                        <!-- Next Page (>) -->
                                                        <span class="pagination-item @(currentJobPage == (int)Math.Ceiling((double)jobApplications.Count / jobPageSize) ? "disabled" : "")" 
                                                              @onclick="@(() => ChangeJobPage(currentJobPage + 1))">
                                                            &gt;
                                                        </span>
    
                                                        <!-- Last Page (>>) -->
                                                        <span class="pagination-item @(currentJobPage == (int)Math.Ceiling((double)jobApplications.Count / jobPageSize) ? "disabled" : "")" 
                                                              @onclick="@(() => ChangeJobPage((int)Math.Ceiling((double)jobApplications.Count / jobPageSize)))">
                                                            &gt;&gt;
                                                        </span>
    
                                                        <!-- Page counter -->
                                                        <span class="ms-3">Σελίδα @currentJobPage από @((int)Math.Ceiling((double)jobApplications.Count / jobPageSize))</span>
                                                    </div>
                                                }
                                                else
                                                {
                                                    <div class="alert alert-warning" role="alert">
                                                        <p>Δεν υπάρχει καμία Αίτηση για κάποια Θέση Εργασίας</p>
                                                    </div>
                                                }
                                            }

                                                            @if (isJobDetailsModalVisibleToSeeJobApplicationsAsStudent && currentJobApplicationMadeAsStudent != null)
                                                            {
                                                                <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                                                    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                                        <div class="modal-content">
                                                                            <div class="modal-header">
                                                                                <h5 class="modal-title" style="color: #4682B4;">@currentJobApplicationMadeAsStudent.PositionTitle</h5>
                                                                                <button type="button" class="close" @onclick="CloseJobDetailsModalInJobTitleAsHyperlink_StudentJobApplications">
                                                                                    <span aria-hidden="true">&times;</span>
                                                                                </button>
                                                                            </div>
                                                                            <div class="modal-body">
                                                                                @*
                                                                                <div class="form-group">
                                                                                    <label for="PositionTitle"><strong>Τίτλος Θέσης</strong></label>
                                                                                    <input type="text" id="PositionTitle" class="form-control"
                                                                                           value="@currentJobApplicationMadeAsStudent.PositionTitle" readonly />
                                                                                </div>
                                                                                *@
                                                                                <div class="form-group">
                                                                                    <label for="PositionType"><strong>Τύπος Θέσης</strong></label>
                                                                                    <input type="text" id="PositionType" class="form-control"
                                                                                           value="@(currentJobApplicationMadeAsStudent.PositionType == "Full-Time" ? "Πλήρους Απασχόλησης" :
                                                                                                   currentJobApplicationMadeAsStudent.PositionType == "Part-Time" ? "Μερικής Απασχόλησης" :
                                                                                                   currentJobApplicationMadeAsStudent.PositionType == "Part-Time_Full-Time" ? "Πλήρους ή Μερικής Απασχόλησης" :
                                                                                                   currentJobApplicationMadeAsStudent.PositionType)"
                                                                                           readonly />
                                                                                </div>

                                                                                <div class="form-group">
                                                                                    <label><strong>Όνομα Εταιρείας</strong></label>
                                                                                    @if (!string.IsNullOrWhiteSpace(currentJobApplicationMadeAsStudent.Company?.CompanyName))
                                                                                    {
                                                                                        <div class="form-control d-flex align-items-center mt-1" style="height: auto;">
                                                                                            <i class="fas fa-industry" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                            <span>@currentJobApplicationMadeAsStudent.Company.CompanyName</span>
                                                                                        </div>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <input type="text" class="form-control" value="Δεν υπάρχει" readonly />
                                                                                    }
                                                                                </div>

                                                                                <div class="form-group">
                                                                                    <label for="PositionDescription"><strong>Περιγραφή Θέσης</strong></label>
                                                                                    <textarea id="PositionDescription" class="form-control" rows="4" readonly>
                                                                                        @currentJobApplicationMadeAsStudent.PositionDescription
                                                                                    </textarea>
                                                                                </div>

                                                                                <div class="form-group">
                                                                                    <label for="PositionForeas"><strong>Φορέας</strong></label>
                                                                                    <input type="text" id="PositionForeas" class="form-control"
                                                                                           value="@currentJobApplicationMadeAsStudent.PositionForeas" readonly />
                                                                                </div>

                                                                                <div class="form-group">
                                                                                    <label><strong>Email Επικοινωνίας</strong></label>
                                                                                    <div class="form-control d-flex align-items-center mt-1" style="height: auto;">
                                                                                        <i class="fas fa-envelope" style="color: #4682B4; margin-right: 8px;"></i>
                                                                                        <a href="mailto:@currentJobApplicationMadeAsStudent.PositionContactPerson"
                                                                                           style="color: #007bff; text-decoration: underline; word-break: break-all;">
                                                                                            @currentJobApplicationMadeAsStudent.PositionContactPerson
                                                                                        </a>
                                                                                    </div>
                                                                                </div>

                                                                                <div class="form-group">
                                                                                    <label for="PositionContactTelephonePerson"><strong>Τηλέφωνο Επικοινωνίας</strong></label>
                                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                        <i class="fas fa-phone-alt" style="color: green; margin-right: 8px;"></i>
                                                                                        <span>@currentJobApplicationMadeAsStudent.PositionContactTelephonePerson</span>
                                                                                    </div>
                                                                                </div>


                                                                                <div class="form-group">
                                                                                    <label><strong>Διεύθυνση</strong></label>
                                                                                    <div class="form-control d-flex align-items-center mt-1" style="height: auto;">
                                                                                        <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                        <a href="https://www.google.com/maps/search/@currentJobApplicationMadeAsStudent.PositionAddressLocation"
                                                                                           target="_blank"
                                                                                           style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                            @currentJobApplicationMadeAsStudent.PositionAddressLocation
                                                                                        </a>
                                                                                    </div>
                                                                                </div>

                                                                                <div class="form-group">
                                                                                    <label for="PositionPerifereiaLocation"><strong>Περιφέρεια</strong></label>
                                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                        <i class="fas fa-map-marked-alt text-secondary me-2"></i>
                                                                                        <span>@currentJobApplicationMadeAsStudent.PositionPerifereiaLocation</span>
                                                                                    </div>
                                                                                </div>



                                                                                <div class="form-group">
                                                                                    <label for="PositionDimosLocation"><strong>Δήμος</strong></label>
                                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                        <i class="fas fa-city text-secondary me-2"></i>
                                                                                        <span>@currentJobApplicationMadeAsStudent.PositionDimosLocation</span>
                                                                                    </div>
                                                                                </div>


                                                                                <div class="form-group">
                                                                                    <label for="PositionPostalCodeLocation"><strong>Ταχυδρομικός Κώδικας</strong></label>
                                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                        <i class="fas fa-envelope-open-text text-secondary me-2"></i>
                                                                                        <span>@currentJobApplicationMadeAsStudent.PositionPostalCodeLocation</span>
                                                                                    </div>
                                                                                </div>


                                                                                <div class="form-group">
                                                                                    <label><strong>Παροχή Μεταφοράς</strong></label>
                                                                                    <div class="form-control d-flex align-items-center mt-1" style="height: auto;">
                                                                                        <i class="fas fa-car" style="color: @(currentJobApplicationMadeAsStudent.PositionTransportOffer ? "#28a745" : "#dc3545"); margin-right: 8px;"></i>
                                                                                        <span style="color: @(currentJobApplicationMadeAsStudent.PositionTransportOffer ? "#28a745" : "#dc3545"); font-weight: 500;">
                                                                                            @(currentJobApplicationMadeAsStudent.PositionTransportOffer ? "Ναι" : "Όχι")
                                                                                        </span>
                                                                                    </div>
                                                                                </div>

                                                                                <div class="form-group">
                                                                                    <label for="PositionAreas"><strong>Περιοχές Ενδιαφέροντος</strong></label>
                                                                                    <textarea id="PositionAreas" class="form-control" rows="3" readonly>@currentJobApplicationMadeAsStudent.PositionAreas</textarea>
                                                                                </div>


                                                                                <div class="form-group">
                                                                                    <label for="PositionActivePeriod"><strong>Ξεκινάει από</strong></label>
                                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                        <i class="fas fa-calendar-alt text-primary me-2"></i>
                                                                                        <span>@currentJobApplicationMadeAsStudent.PositionActivePeriod.ToString("dd/MM/yyyy")</span>
                                                                                    </div>
                                                                                </div>



                                                                                <div class="form-group">
                                                                                    <label for="PositionStatus"><strong>Κατάσταση Θέσης</strong></label>
                                                                                    <input type="text" id="PositionStatus" class="form-control"
                                                                                           value="@currentJobApplicationMadeAsStudent.PositionStatus" readonly />
                                                                                </div>

                                                                                <div class="form-group">
                                                                                    <label><strong>Υπεύθυνο Τμήμα Εταιρείας</strong></label>
                                                                                    @if (!string.IsNullOrWhiteSpace(currentJobApplicationMadeAsStudent.PositionDepartment))
                                                                                    {
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                            <i class="fas fa-building" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                            <span>@currentJobApplicationMadeAsStudent.PositionDepartment</span>
                                                                                        </div>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <input type="text" class="form-control" value="Δεν έχει διευκρινιστεί" readonly />
                                                                                    }
                                                                                </div>
                                                                                <br/>
                                                                                <div class="form-group">
                                                                                    <label for="PositionAttachment"><strong>Συνημμένο:</strong></label>
                                                                                    @if (currentJobApplicationMadeAsStudent.PositionAttachment != null)
                                                                                    {
                                                                                        <a href="@("data:application/pdf;base64," + Convert.ToBase64String(currentJobApplicationMadeAsStudent.PositionAttachment))" 
                                                                                           download="JobApplicationAttachment.pdf" class="btn btn-primary">
                                                                                            Λήψη Αρχείου
                                                                                        </a>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <span style="color: darkred;"><strong> Δεν υπάρχει συνημμένο.</strong></span>
                                                                                    }
                                                                                </div>
                                                                            </div>
                                                                            <div class="modal-footer">
                                                                                <button type="button" class="btn btn-secondary" @onclick="CloseJobDetailsModalInJobTitleAsHyperlink_StudentJobApplications">
                                                                                    Κλείσιμο
                                                                                </button>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            }


                                                            <!-- COMPANY DETAILS - STUDENT APPLIED COMPANY JOBS -->
                                                            @if (isCompanyDetailsModalOpenForJobShow && selectedCompanyDetailsForJobShow != null)
                                                            {
                                                               <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                                                    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                                        <div class="modal-content">
                                                                            <div class="modal-header">
                                                                                <h5 class="modal-title" style="color: #4682B4;">
                                                                                    @selectedCompanyDetailsForJobShow.CompanyName
                                                                                </h5>
                                                                                <button type="button" class="close" @onclick="CloseModalForCompanyNameHyperlinkDetailsInJobShow">
                                                                                    <span aria-hidden="true">&times;</span>
                                                                                </button>
                                                                            </div>
                                                                            <div class="modal-body">
                                                                                <div class="form-group text-center">
                                                                                    @if (selectedCompanyDetailsForJobShow.CompanyLogo != null)
                                                                                    {
                                                                                        <img src="@ShowProfileImage(selectedCompanyDetailsForJobShow.CompanyLogo)"
                                                                                             alt="Company Logo"
                                                                                             class="rounded-circle img-fluid"
                                                                                             style="max-width: 150px; max-height: 150px; object-fit: cover;" />
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <p>Δεν είναι διαθέσιμο</p>
                                                                                    }
                                                                                </div>

                                                                                <div class="form-group">
                                                                                    <label><strong>Σύντομη Ονομασία</strong></label>
                                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                        <i class="fas fa-tag" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                        <input type="text" class="border-0 flex-grow-1" value="@selectedCompanyDetailsForJobShow.CompanyShortName" readonly />
                                                                                    </div>
                                                                                </div>

                                                                                <div class="form-group">
                                                                                    <label><strong>Τύπος Εταιρείας</strong></label>
                                                                                    <input type="text" class="form-control" value="@selectedCompanyDetailsForJobShow.CompanyType" readonly />
                                                                                </div>

                                                                                <div class="form-group">
                                                                                    <label><strong>Email Εταιρείας</strong></label>
                                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                        <i class="fas fa-envelope" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                        <input type="text" class="border-0 flex-grow-1" value="@selectedCompanyDetailsForJobShow.CompanyEmail" readonly />
                                                                                    </div>
                                                                                </div>

                                                                                <div class="form-group">
                                                                                    <label><strong>Ιστοσελίδα Εταιρείας</strong></label>
                                                                                    @if (!string.IsNullOrWhiteSpace(selectedCompanyDetailsForJobShow.CompanyWebsite))
                                                                                    {
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto; cursor: pointer; color: #007bff;"
                                                                                             onclick="window.open('@(selectedCompanyDetailsForJobShow.CompanyWebsite.StartsWith("http") ? selectedCompanyDetailsForJobShow.CompanyWebsite : "http://" + selectedCompanyDetailsForJobShow.CompanyWebsite)', '_blank')">
                                                                                            <i class="fa-solid fa-globe" style="margin-right: 8px;"></i>
                                                                                            <span class="flex-grow-1">@selectedCompanyDetailsForJobShow.CompanyWebsite</span>
                                                                                        </div>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <input type="text" class="form-control" value="Δεν υπάρχει" readonly />
                                                                                    }
                                                                                </div>

                                                                                <div class="form-group">
                                                                                    <label><strong>Ανακοινώσεις Εταιρείας</strong></label>
                                                                                    @if (!string.IsNullOrWhiteSpace(selectedCompanyDetailsForJobShow.CompanyWebsiteAnnouncements))
                                                                                    {
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto; cursor: pointer; color: #007bff;"
                                                                                             onclick="window.open('@(selectedCompanyDetailsForJobShow.CompanyWebsiteAnnouncements.StartsWith("http") ? selectedCompanyDetailsForJobShow.CompanyWebsiteAnnouncements : "http://" + selectedCompanyDetailsForJobShow.CompanyWebsiteAnnouncements)', '_blank')">
                                                                                            <i class="fa-solid fa-globe" style="margin-right: 8px;"></i>
                                                                                            <span class="flex-grow-1">@selectedCompanyDetailsForJobShow.CompanyWebsiteAnnouncements</span>
                                                                                        </div>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <input type="text" class="form-control" value="Δεν υπάρχει" readonly />
                                                                                    }
                                                                                </div>

                                                                                <div class="form-group">
                                                                                    <label><strong>Θέσεις Εργασίας Εταιρείας</strong></label>
                                                                                    @if (!string.IsNullOrWhiteSpace(selectedCompanyDetailsForJobShow.CompanyWebsiteJobs))
                                                                                    {
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto; cursor: pointer; color: #007bff;"
                                                                                             onclick="window.open('@(selectedCompanyDetailsForJobShow.CompanyWebsiteJobs.StartsWith("http") ? selectedCompanyDetailsForJobShow.CompanyWebsiteJobs : "http://" + selectedCompanyDetailsForJobShow.CompanyWebsiteJobs)', '_blank')">
                                                                                            <i class="fa-solid fa-globe" style="margin-right: 8px;"></i>
                                                                                            <span class="flex-grow-1">@selectedCompanyDetailsForJobShow.CompanyWebsiteJobs</span>
                                                                                        </div>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <input type="text" class="form-control" value="Δεν υπάρχει" readonly />
                                                                                    }
                                                                                </div>

                                                                                <div class="form-group">
                                                                                    <label><strong>Τηλέφωνο Εταιρείας</strong></label>
                                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                        <i class="fa-solid fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                                        <input type="text" class="border-0 flex-grow-1" value="@selectedCompanyDetailsForJobShow.CompanyTelephone" readonly />
                                                                                    </div>
                                                                                </div>

                                                                                <div class="form-group">
                                                                                    <label><strong>Περιγραφή Εταιρείας</strong></label>
                                                                                    <textarea class="form-control" rows="3" readonly>@selectedCompanyDetailsForJobShow.CompanyDescription</textarea>
                                                                                </div>

                                                                                <div class="form-group">
                                                                                    <label><strong>Δραστηριότητα Εταιρείας</strong></label>
                                                                                    <input type="text" class="form-control" value="@selectedCompanyDetailsForJobShow.CompanyActivity" readonly />
                                                                                </div>

                                                                                <div class="form-group">
                                                                                    <label><strong>Περιοχές Ενδιαφέροντος</strong></label>
                                                                                    <textarea class="form-control" rows="2" readonly>@selectedCompanyDetailsForJobShow.CompanyAreas</textarea>
                                                                                </div>

                                                                                <div class="form-group">
                                                                                    <label><strong>Χώρα</strong></label>
                                                                                    <input type="text" class="form-control" value="@selectedCompanyDetailsForJobShow.CompanyCountry" readonly />
                                                                                </div>

                                                                                <div class="form-group">
                                                                                    <label><strong>Περιφέρεια</strong></label>
                                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                        <i class="fa-solid fa-map" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                        <input type="text" class="border-0 flex-grow-1" value="@selectedCompanyDetailsForJobShow.CompanyRegions" readonly />
                                                                                    </div>
                                                                                </div>

                                                                                <div class="form-group">
                                                                                    <label><strong>Πόλη</strong></label>
                                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                        <i class="fa-solid fa-city" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                        <input type="text" class="border-0 flex-grow-1" value="@selectedCompanyDetailsForJobShow.CompanyTown" readonly />
                                                                                    </div>
                                                                                </div>

                                                                                <div class="form-group">
                                                                                    <label><strong>Διεύθυνση</strong></label>
                                                                                    <div class="form-control d-flex align-items-center mt-1" style="height: auto;">
                                                                                        <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                        <a href="https://www.google.com/maps/search/@selectedCompanyDetailsForJobShow.CompanyLocation"
                                                                                           target="_blank"
                                                                                           style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                            @selectedCompanyDetailsForJobShow.CompanyLocation
                                                                                        </a>
                                                                                    </div>
                                                                                </div>

                                                                                <div class="form-group">
                                                                                    <label><strong>Ταχυδρομικός Κώδικας</strong></label>
                                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                        <i class="fa-solid fa-envelope-open-text" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                        <input type="text" class="border-0 flex-grow-1" value="@selectedCompanyDetailsForJobShow.CompanyPC" readonly />
                                                                                    </div>
                                                                                </div>

                                                                                <div class="form-group">
                                                                                    <label><strong>Email Υπεύθυνου Ανθρώπινου Δυναμικού</strong></label>
                                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                        <i class="fa-solid fa-envelope" style="color: #007bff; margin-right: 8px;"></i>
                                                                                        <input type="text" class="border-0 flex-grow-1" value="@selectedCompanyDetailsForJobShow.CompanyHREmail" readonly />
                                                                                    </div>
                                                                                </div>

                                                                                <div class="form-group">
                                                                                    <label><strong>Τηλέφωνο Υπεύθυνου Ανθρώπινου Δυναμικού</strong></label>
                                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                        <i class="fa-solid fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                                        <input type="text" class="border-0 flex-grow-1" value="@selectedCompanyDetailsForJobShow.CompanyHRTelephone" readonly />
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="modal-footer">
                                                                                <button type="button" class="btn btn-secondary" @onclick="CloseModalForCompanyNameHyperlinkDetailsInJobShow">
                                                                                    Κλείσιμο
                                                                                </button>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            }


                                            
                                            
                                            
                                            @* Φίλτρα Αναζήτησης για Εύρεση Θέσης Εργασίας *@
                                            <div class="mb-3 row-dark-gray mt-4">
                                                <div class="d-flex justify-content-between align-items-center">
                                                    <label class="form-label" style="color: #FFF8DC;">• Φίλτρα Αναζήτησης για Εύρεση Θέσης Εργασίας •</label>
                                                    <button class="btn btn-link" @onclick="ToggleJobPositionAsStudentFiltersVisibility">
                                                        @if (isJobPositionAsStudentFiltersVisible)
                                                        {
                                                            <span>&#8722;</span> <!-- Minus sign -->
                                                        }
                                                        else
                                                        {
                                                            <span>&#43;</span> <!-- Plus sign -->
                                                        }
                                                    </button>
                                                </div>
                                            </div>

                                            @if(isJobPositionAsStudentFiltersVisible)
                                            {
                                                <div class="row mb-3">
                                                    <div class="col-md-4 position-relative">
                                                        <label for="jobSearch" class="form-label">Αναζήτηση με Τίτλο</label>
                                                        <input 
                                                            type="text" 
                                                            id="jobSearch" 
                                                            class="form-control" 
                                                            @bind="jobSearch" 
                                                            @oninput= "HandleJobTitleAutocompleteInputWhenSearchCompanyJobsAsStudent" 
                                                            placeholder="Τίτλος Θέσης" />

                                                        <!-- Suggestions dropdown -->
                                                        <ul class="list-group position-absolute" 
                                                            style="z-index: 100; width: 100%; max-height: 150px; overflow-y: auto;" 
                                                            hidden="@(!jobTitleAutocompleteSuggestionsWhenSearchForCompanyJobsAsStudent.Any())">
                                                            @foreach (var suggestion in jobTitleAutocompleteSuggestionsWhenSearchForCompanyJobsAsStudent)
                                                            {
                                                                <li class="list-group-item list-group-item-action" 
                                                                    @onclick="() => SelectJobTitleAutocompleteSuggestionWhenSearchCompanyJobsAsStudent(suggestion)">
                                                                    @suggestion
                                                                </li>
                                                            }
                                                        </ul>
                                                    </div>

                                                    <div class="col-md-4 position-relative">
                                                        <label for="companyNameSearch" class="form-label">Αναζήτηση με Όνομα Εταιρείας</label>
                                                        <input 
                                                            type="text" 
                                                            id="companyNameSearch" 
                                                            class="form-control" 
                                                            @bind="companyNameSearch" 
                                                            @oninput="HandleCompanyNameAutocompleteInputWhenSearchCompanyJobsAsStudent" 
                                                            placeholder="Όνομα Εταιρείας" />

                                                        <!-- Suggestions dropdown -->
                                                        <ul class="list-group position-absolute" 
                                                            style="z-index: 100; width: 100%; max-height: 150px; overflow-y: auto;" 
                                                            hidden="@(!companyNameAutocompleteSuggestionsWhenSearchForCompanyJobsAsStudent.Any())">
                                                            @foreach (var suggestion in companyNameAutocompleteSuggestionsWhenSearchForCompanyJobsAsStudent)
                                                            {
                                                                <li class="list-group-item list-group-item-action" 
                                                                    @onclick="() => SelectCompanyNameAutocompleteSuggestionWhenSearchCompanyJobsAsStudent(suggestion)">
                                                                    @suggestion
                                                                </li>
                                                            }
                                                        </ul>
                                                    </div>

                                                    <div class="col-md-4">
                                                        <label for="searchDate" class="form-label">Ξεκινάει Από</label>
                                                        <input type="date" id="searchDate" class="form-control" @bind="selectedDateToSearchJob" />
                                                    </div>

                                                    <div class="col-md-4">
                                                        <label for="positionTypeSearch" class="form-label">Αναζήτηση με Τύπο Θέσης</label>
                                                        <select id="positionTypeSearch" class="form-select" @bind="positionTypeSearch">
                                                            <option value="">Όλες οι Θέσεις</option> 
                                                            <option value="Full-Time">Αορίστου Χρόνου</option>
                                                            <option value="Part-Time">Περιορισμένου Χρόνου</option>
                                                            <option value="Part-Time_Full-Time">Σύμβαση Έργου</option>
                                                        </select>
                                                    </div>

                                                    <div class="col-md-4">
                                                        <label for="jobSearchByRegion" class="form-label">Αναζήτηση με Περιφέρεια</label>
                                                        <select id="jobSearchByRegion" class="form-control" @bind="jobSearchByRegion">
                                                            <option value="">-- Επιλέξτε Περιφέρεια --</option>
                                                            @foreach (var region in Regions)
                                                            {
                                                                <option value="@region">@region</option>
                                                            }
                                                        </select>
                                                    </div>

                                                    <div class="col-md-4">
                                                        <label for="jobSearchByTown" class="form-label">Αναζήτηση με Δήμο</label>
                                                        <select id="jobSearchByTown" class="form-control" @bind="jobSearchByTown">
                                                            <option value="">-- Επιλέξτε Δήμο --</option>
                                                            @if (!string.IsNullOrEmpty(jobSearchByRegion) && RegionToTownsMap.ContainsKey(jobSearchByRegion))
                                                            {
                                                                @foreach (var town in RegionToTownsMap[jobSearchByRegion])
                                                                {
                                                                    <option value="@town">@town</option>
                                                                }
                                                            }
                                                        </select>
                                                    </div>

                                                    <div class="col-md-4">
                                                        <label for="positionAreaSearch" class="form-label"
                                                               @onclick="TogglePositionAreasVisibility"
                                                               style="cursor: pointer; display: flex; justify-content: space-between; align-items: center; width: 100%;">
                                                            <span>Θεματική Περιοχή</span>
                                                            <span class="badge bg-secondary">
                                                                @(isPositionAreasVisible ? "Κρύψε" : "Δες")
                                                            </span>
                                                        </label>
                                                        <div id="positionAreaSearch" class="collapse @(isPositionAreasVisible ? "show" : "")">
                                                            @foreach (var area in Areas)
                                                            {
                                                                <div class="form-check">
                                                                    <input class="form-check-input"
                                                                           type="checkbox"
                                                                           id="@area.AreaName"
                                                                           value="@area.AreaName"
                                                                           @onchange="e => OnPositionAreaCheckboxChanged(e, area.AreaName)"
                                                                           checked="@selectedPositionAreas.Contains(area.AreaName)" />
                                                                    <label class="form-check-label" for="@area.AreaName">
                                                                        @area.AreaName
                                                                    </label>
                                                                </div>
                                                            }
                                                        </div>
                                                    </div>
                                                    <br/>
                                                    <div class="mb-3">
                                                            <label for="jobTransportOffer" class="form-check-label mb-0 me-2"><strong>Μεταφορικό Μέσο</strong></label>
                                                            <input type="checkbox" id="jobTransportOffer" class="form-check-input" @bind="companyjobSearchByTransportOffer">
                                                    </div>
                                                </div>

                                                <div class="mb-3">
                                                    <button class="modern-button" style="background-color: #007bff; color: white; display: inline-flex; align-items: center;" @onclick="SearchJobApplicationsAsStudent">
                                                        <i class="fa-brands fa-searchengin" style="margin-right: 8px;"></i>Αναζήτηση
                                                    </button>
                                                    <button class="modern-button" style="background-color: #FF7F7F; color: white; display: inline-flex; align-items: center;" @onclick="ClearSearchFieldsForJobApplicationsAsStudent">
                                                        <i class="fa-solid fa-broom" style="margin-right: 8px;"></i>Εκκαθάριση
                                                    </button>
                                                </div>
                                                <br/>


                                                <!-- DISPLAY JOB POSITIONS -->
                                                @if (showJobApplications)
                                                {
                                                        <div class="col-md-2">
                                                            <label style="color: #4682b4; font-weight: bold; font-size: 15px; display: block;">Αποτελέσματα ανά Σελίδα</label>
                                                            <div class="input-group" style="max-width: 65px;"> <!-- Adjust width here -->
                                                                <select class="form-control form-control-sm" @onchange="OnJobPageSizeChange_SearchForJobsAsStudent" aria-label="Items per page">
                                                                    @foreach (var option in pageSizeOptions_SearchForJobsAsStudent)
                                                                    {
                                                                        <option value="@option" selected="@(jobPositionPageSize == option)">@option</option>
                                                                    }
                                                                </select>
                                                                <div class="input-group-append">
                                                                    <span class="input-group-text">
                                                                        <i class="fas fa-chevron-down"></i>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    var publishedJobs = jobs?.Where(i => i.PositionStatus == "Δημοσιευμένη").ToList();
                                                    @if (jobs != null && publishedJobs.Any())
                                                    {
                                                        // Calculate pagination values
                                                        var totalJobCount = publishedJobs.Count;
                                                        var totalPages = (int)Math.Ceiling((double)totalJobCount / jobPositionPageSize);
                                                        var paginatedJobs = publishedJobs
                                                            .Skip((currentJobPositionPage - 1) * jobPositionPageSize)
                                                            .Take(jobPositionPageSize)
                                                            .ToList();
        
                                                        <table class="table table-bordered">
                                                            <thead>
                                                                <tr>
                                                                    <td colspan="9" style="padding: 0;">
                                                                        <div style="display: flex; justify-content: space-between; align-items: center; height: 24px; line-height: 24px; width: 100%;">
                                                                            <i class="fa-solid fa-magnifying-glass" style="font-size: 18px; color: #0d6efd;"></i>
                                                                            <label class="form-label" style="color: #0d6efd; font-weight: bold; font-size: 18px; margin: 0;">Διαθέσιμες Θέσεις Εργασίας</label>
                                                                            <i class="fa-solid fa-magnifying-glass" style="font-size: 18px; color: #0d6efd;"></i>
                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <th><i class="fa-solid fa-key fa-sm" style="color: #9D00FF;"></i> Κωδικός Θέσης</th>
                                                                    <th>
                                                                        <i class="fa-solid fa-industry fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Εταιρία
                                                                    </th>
                                                                    <th>
                                                                        <i class="fa-solid fa-font fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Τίτλος Θέσης
                                                                    </th>
                                                                    <th>
                                                                        <i class="fa-solid fa-tags fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Τομείς
                                                                    </th>
                                                                    <th>
                                                                        <i class="fa-solid fa-calendar-plus fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Ημερομηνία Ανάρτησης
                                                                    </th>
                                                                    <th>
                                                                        <i class="fa-solid fa-circle-info fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Λεπτομέρειες
                                                                    </th>
                                                                    <th>
                                                                        <i class="fa-solid fa-hand fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Κάνε Αίτηση
                                                                    </th>
                                                                </tr>
                                                            </thead>
                                                                <tbody id="jobApplicationsTable">
                                                                    @foreach (var job in paginatedJobs)
                                                                    {
                                                                        <tr>
                                                                            <td style="color: #9D00FF;">
                                                                                @job.RNGForPositionUploaded_HashedAsUniqueID
                                                                            </td>
                                                                            <td>
                                                                                @if (job.Company != null)
                                                                                {
                                                                                    <a href="#" @onclick="() => ShowCompanyDetailsAsAHyperlinkInJobSearchAsStudent(job.Company.CompanyName)">
                                                                                        @job.Company.CompanyName
                                                                                    </a>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <span class="text-warning">Άγνωστη Εταιρεία</span>
                                                                                }
                                                                            </td>                                                                        
                                                                            <td>@job.PositionTitle</td>
                                                                            <td>@job.PositionAreas</td>
                                                                            <td>@job.UploadDateTime.ToString("yyyy-MM-dd HH:mm:ss")</td>
                                                                            <td style="text-align: center;">
                                                                                <i class="fas fa-eye" style="color: #003366; cursor: pointer;" @onclick="() => ShowJobDetails(job)"></i>
                                                                            </td>
                                                                            <td>
                                                                                @if (jobIdsApplied.Contains(job.RNGForPositionUploaded))
                                                                                {
                                                                                    <span class="text-success" style="font-weight: bold;">
                                                                                        <i class="fas fa-check-circle"></i> Έχετε ήδη δείξει Ενδιαφέρον για αυτήν την Θέση Εργασίας
                                                                                    </span>
                                                                                }
                                                                                else if (job.PositionStatus == "Δημοσιευμένη")
                                                                                {
                                                                                    <button class="modern-button" style="background-color: #008000; color: white;" 
                                                                                            @onclick="() => ConfirmApplyForJob(job)">
                                                                                        Αίτηση
                                                                                    </button>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <button class="modern-button" style="background-color: #cccccc; color: #666666; cursor: not-allowed;" 
                                                                                            title="Η Θέση Εργασίας δεν είναι διαθέσιμη για αίτηση">
                                                                                        Μη Διαθέσιμη
                                                                                    </button>
                                                                                }
                                                                            </td>
                                                                        </tr>
                                                                    }
                                                                </tbody>
                                                        </table>
                                                        <!-- Job Positions Pagination -->                                                    
                                                        var totalJobPositionPages = publishedJobs != null ? (int)Math.Ceiling((double)publishedJobs.Count / jobPositionPageSize) : 1;                                                       
                                                        <div class="d-flex justify-content-center align-items-center mt-3 gap-1">
                                                            <!-- First Page (<<) -->
                                                            <span class="pagination-item @(currentJobPositionPage == 1 ? "disabled" : "")" 
                                                                  @onclick="@(() => ChangeJobPositionPage(1))">
                                                                &lt;&lt;
                                                            </span>
    
                                                            <!-- Previous Page (<) -->
                                                            <span class="pagination-item @(currentJobPositionPage == 1 ? "disabled" : "")" 
                                                                  @onclick="@(() => ChangeJobPositionPage(currentJobPositionPage - 1))">
                                                                &lt;
                                                            </span>
    
                                                            <!-- Page Numbers -->
                                                            @if (publishedJobs != null)
                                                            {
                                                                @foreach (var pageNumber in GetVisiblePages(currentJobPositionPage, totalJobPositionPages))
                                                                {
                                                                    @if (pageNumber == -1)
                                                                    {
                                                                        <span class="pagination-ellipsis">...</span>
                                                                    }
                                                                    else
                                                                    {
                                                                        <span class="pagination-item @(pageNumber == currentJobPositionPage ? "active" : "")" 
                                                                              @onclick="@(() => ChangeJobPositionPage(pageNumber))">
                                                                            @pageNumber
                                                                        </span>
                                                                    }
                                                                }
                                                            }
    
                                                            <!-- Next Page (>) -->
                                                            <span class="pagination-item @(currentJobPositionPage == totalJobPositionPages ? "disabled" : "")" 
                                                                  @onclick="@(() => ChangeJobPositionPage(currentJobPositionPage + 1))">
                                                                &gt;
                                                            </span>
    
                                                            <!-- Last Page (>>) -->
                                                            <span class="pagination-item @(currentJobPositionPage == totalJobPositionPages ? "disabled" : "")" 
                                                                  @onclick="@(() => ChangeJobPositionPage(totalJobPositionPages))">
                                                                &gt;&gt;
                                                            </span>
    
                                                            <!-- Page counter -->
                                                            <span class="ms-3">Σελίδα @currentJobPositionPage από @totalJobPositionPages</span>
                                                        </div>
                                                        <br/>
                                                        <br/>
                                                    }
                                                    else 
                                                    {
                                                        <div class="alert alert-warning" role="alert" id="noJobsFoundAlert">
                                                            <p>Δεν υπάρχουν θέσεις εργασίας που να ταιριάζουν με τα κριτήρια της αναζήτησής σας.</p>
                                                        </div>
                                                    }
                                                }
                                                
                                                        <!-- Modal For Company Hyperlink Name When Search For Job As Student -->
                                                        @if (isCompanyDetailsModalOpenForJobSearch && selectedCompanyDetailsForJobSearch != null)
                                                        {
                                                           <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                                                <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                                    <div class="modal-content">
                                                                        <div class="modal-header">
                                                                            <h5 class="modal-title" style="color: #4682B4;">
                                                                                @selectedCompanyDetailsForJobSearch.CompanyName
                                                                            </h5>
                                                                            <button type="button" class="close" @onclick="CloseModalForCompanyNameHyperlinkDetailsInJobSearch">
                                                                                <span aria-hidden="true">&times;</span>
                                                                            </button>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            <div class="form-group text-center">
                                                                                @if (selectedCompanyDetailsForJobSearch.CompanyLogo != null)
                                                                                {
                                                                                    <img src="@ShowProfileImage(selectedCompanyDetailsForJobSearch.CompanyLogo)"
                                                                                         alt="Company Logo"
                                                                                         class="rounded-circle img-fluid"
                                                                                         style="max-width: 150px; max-height: 150px; object-fit: cover;" />
                                                                                }
                                                                                else
                                                                                {
                                                                                    <p>Δεν είναι διαθέσιμο</p>
                                                                                }
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Σύντομη Ονομασία</strong></label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-tag" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                    <input type="text" class="border-0 flex-grow-1" value="@selectedCompanyDetailsForJobSearch.CompanyShortName" readonly />
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Τύπος Εταιρείας</strong></label>
                                                                                <input type="text" class="form-control" value="@selectedCompanyDetailsForJobSearch.CompanyType" readonly />
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Email Εταιρείας</strong></label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-envelope" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                    <input type="text" class="border-0 flex-grow-1" value="@selectedCompanyDetailsForJobSearch.CompanyEmail" readonly />
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Ιστοσελίδα Εταιρείας</strong></label>
                                                                                @if (!string.IsNullOrWhiteSpace(selectedCompanyDetailsForJobSearch.CompanyWebsite))
                                                                                {
                                                                                    <div class="form-control d-flex align-items-center" style="height: auto; cursor: pointer; color: #007bff;"
                                                                                         onclick="window.open('@(selectedCompanyDetailsForJobSearch.CompanyWebsite.StartsWith("http") ? selectedCompanyDetailsForJobSearch.CompanyWebsite : "http://" + selectedCompanyDetailsForJobSearch.CompanyWebsite)', '_blank')">
                                                                                        <i class="fa-solid fa-globe" style="margin-right: 8px;"></i>
                                                                                        <span class="flex-grow-1">@selectedCompanyDetailsForJobSearch.CompanyWebsite</span>
                                                                                    </div>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <input type="text" class="form-control" value="Δεν υπάρχει" readonly />
                                                                                }
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Ανακοινώσεις Εταιρείας</strong></label>
                                                                                @if (!string.IsNullOrWhiteSpace(selectedCompanyDetailsForJobSearch.CompanyWebsiteAnnouncements))
                                                                                {
                                                                                    <div class="form-control d-flex align-items-center" style="height: auto; cursor: pointer; color: #007bff;"
                                                                                         onclick="window.open('@(selectedCompanyDetailsForJobSearch.CompanyWebsiteAnnouncements.StartsWith("http") ? selectedCompanyDetailsForJobSearch.CompanyWebsiteAnnouncements : "http://" + selectedCompanyDetailsForJobSearch.CompanyWebsiteAnnouncements)', '_blank')">
                                                                                        <i class="fa-solid fa-globe" style="margin-right: 8px;"></i>
                                                                                        <span class="flex-grow-1">@selectedCompanyDetailsForJobSearch.CompanyWebsiteAnnouncements</span>
                                                                                    </div>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <input type="text" class="form-control" value="Δεν υπάρχει" readonly />
                                                                                }
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Θέσεις Εργασίας Εταιρείας</strong></label>
                                                                                @if (!string.IsNullOrWhiteSpace(selectedCompanyDetailsForJobSearch.CompanyWebsiteJobs))
                                                                                {
                                                                                    <div class="form-control d-flex align-items-center" style="height: auto; cursor: pointer; color: #007bff;"
                                                                                         onclick="window.open('@(selectedCompanyDetailsForJobSearch.CompanyWebsiteJobs.StartsWith("http") ? selectedCompanyDetailsForJobSearch.CompanyWebsiteJobs : "http://" + selectedCompanyDetailsForJobSearch.CompanyWebsiteJobs)', '_blank')">
                                                                                        <i class="fa-solid fa-globe" style="margin-right: 8px;"></i>
                                                                                        <span class="flex-grow-1">@selectedCompanyDetailsForJobSearch.CompanyWebsiteJobs</span>
                                                                                    </div>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <input type="text" class="form-control" value="Δεν υπάρχει" readonly />
                                                                                }
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Τηλέφωνο Εταιρείας</strong></label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fa-solid fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                                    <input type="text" class="border-0 flex-grow-1" value="@selectedCompanyDetailsForJobSearch.CompanyTelephone" readonly />
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Περιγραφή Εταιρείας</strong></label>
                                                                                <textarea class="form-control" rows="3" readonly>@selectedCompanyDetailsForJobSearch.CompanyDescription</textarea>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Δραστηριότητα Εταιρείας</strong></label>
                                                                                <input type="text" class="form-control" value="@selectedCompanyDetailsForJobSearch.CompanyActivity" readonly />
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Περιοχές Ενδιαφέροντος</strong></label>
                                                                                <textarea class="form-control" rows="2" readonly>@selectedCompanyDetailsForJobSearch.CompanyAreas</textarea>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Χώρα</strong></label>
                                                                                <input type="text" class="form-control" value="@selectedCompanyDetailsForJobSearch.CompanyCountry" readonly />
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Περιφέρεια</strong></label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fa-solid fa-map" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                    <input type="text" class="border-0 flex-grow-1" value="@selectedCompanyDetailsForJobSearch.CompanyRegions" readonly />
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Πόλη</strong></label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fa-solid fa-city" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                    <input type="text" class="border-0 flex-grow-1" value="@selectedCompanyDetailsForJobSearch.CompanyTown" readonly />
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Διεύθυνση</strong></label>
                                                                                <div class="form-control d-flex align-items-center mt-1" style="height: auto;">
                                                                                    <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                    <a href="https://www.google.com/maps/search/@selectedCompanyDetailsForJobSearch.CompanyLocation"
                                                                                       target="_blank"
                                                                                       style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                        @selectedCompanyDetailsForJobSearch.CompanyLocation
                                                                                    </a>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Ταχυδρομικός Κώδικας</strong></label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fa-solid fa-envelope-open-text" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                    <input type="text" class="border-0 flex-grow-1" value="@selectedCompanyDetailsForJobSearch.CompanyPC" readonly />
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Email Υπεύθυνου Ανθρώπινου Δυναμικού</strong></label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fa-solid fa-envelope" style="color: #007bff; margin-right: 8px;"></i>
                                                                                    <input type="text" class="border-0 flex-grow-1" value="@selectedCompanyDetailsForJobSearch.CompanyHREmail" readonly />
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Τηλέφωνο Υπεύθυνου Ανθρώπινου Δυναμικού</strong></label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fa-solid fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                                    <input type="text" class="border-0 flex-grow-1" value="@selectedCompanyDetailsForJobSearch.CompanyHRTelephone" readonly />
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button" class="btn btn-secondary" @onclick="CloseModalForCompanyNameHyperlinkDetailsInJobSearch">
                                                                                Κλείσιμο
                                                                            </button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        }

                                            
                                            }
                                            
                                        </div>

                                            


                                        
                                       
                                                        @if (isModalVisibleForJobs)
                                                        {
                                                            <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                                                <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                                    <div class="modal-content">
                                                                        <div class="modal-header">
                                                                            <h5 class="modal-title" style="color: #4682B4;">@currentJob.PositionTitle</h5>
                                                                            <button type="button" class="close" @onclick="CloseModalForJobs">
                                                                                <span aria-hidden="true">&times;</span>
                                                                            </button>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            <div class="form-group">
                                                                                <label for="PositionType"><strong>Τύπος Θέσης</strong></label>
                                                                                <input type="text" id="PositionType" class="form-control"
                                                                                       value="@(currentJob.PositionType == "Full-Time" ? "Πλήρους Απασχόλησης" :
                                                                                               currentJob.PositionType == "Part-Time" ? "Μερικής Απασχόλησης" :
                                                                                               currentJob.PositionType == "Part-Time_Full-Time" ? "Πλήρους ή Μερικής Απασχόλησης" :
                                                                                               currentJob.PositionType)"
                                                                                       readonly />
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Όνομα Εταιρείας</strong></label>
                                                                                @if (!string.IsNullOrWhiteSpace(currentJob.Company?.CompanyName))
                                                                                {
                                                                                    <div class="form-control d-flex align-items-center mt-1" style="height: auto;">
                                                                                        <i class="fas fa-industry" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                        <span>@currentJob.Company.CompanyName</span>
                                                                                    </div>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <input type="text" class="form-control" value="Δεν υπάρχει" readonly />
                                                                                }
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label for="PositionDescription"><strong>Περιγραφή Θέσης</strong></label>
                                                                                <textarea id="PositionDescription" class="form-control" rows="4" readonly>
                                                                                    @currentJob.PositionDescription
                                                                                </textarea>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label for="PositionForeas"><strong>Φορέας</strong></label>
                                                                                <input type="text" id="PositionForeas" class="form-control"
                                                                                       value="@currentJob.PositionForeas" readonly />
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Email Επικοινωνίας</strong></label>
                                                                                <div class="form-control d-flex align-items-center mt-1" style="height: auto;">
                                                                                    <i class="fas fa-envelope" style="color: #4682B4; margin-right: 8px;"></i>
                                                                                    <a href="mailto:@currentJob.PositionContactPerson"
                                                                                       style="color: #007bff; text-decoration: underline; word-break: break-all;">
                                                                                        @currentJob.PositionContactPerson
                                                                                    </a>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Τηλέφωνο Επικοινωνίας</strong></label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-phone-alt" style="color: green; margin-right: 8px;"></i>
                                                                                    <span>@currentJob.PositionContactTelephonePerson</span>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Διεύθυνση</strong></label>
                                                                                <div class="form-control d-flex align-items-center mt-1" style="height: auto;">
                                                                                    <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                    <a href="https://www.google.com/maps/search/@currentJob.PositionAddressLocation"
                                                                                       target="_blank"
                                                                                       style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                        @currentJob.PositionAddressLocation
                                                                                    </a>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Περιφέρεια</strong></label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-map-marked-alt text-secondary me-2"></i>
                                                                                    <span>@currentJob.PositionPerifereiaLocation</span>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Δήμος</strong></label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-city text-secondary me-2"></i>
                                                                                    <span>@currentJob.PositionDimosLocation</span>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Ταχυδρομικός Κώδικας</strong></label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-envelope-open-text text-secondary me-2"></i>
                                                                                    <span>@currentJob.PositionPostalCodeLocation</span>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Παροχή Μεταφοράς</strong></label>
                                                                                <div class="form-control d-flex align-items-center mt-1" style="height: auto;">
                                                                                    <i class="fas fa-car" style="color: @(currentJob.PositionTransportOffer ? "#28a745" : "#dc3545"); margin-right: 8px;"></i>
                                                                                    <span style="color: @(currentJob.PositionTransportOffer ? "#28a745" : "#dc3545"); font-weight: 500;">
                                                                                        @(currentJob.PositionTransportOffer ? "Ναι" : "Όχι")
                                                                                    </span>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label for="PositionAreas"><strong>Περιοχές Ενδιαφέροντος</strong></label>
                                                                                <textarea id="PositionAreas" class="form-control" rows="3" readonly>@currentJob.PositionAreas</textarea>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Ξεκινάει από</strong></label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-calendar-alt text-primary me-2"></i>
                                                                                    <span>@currentJob.PositionActivePeriod.ToString("dd/MM/yyyy")</span>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label for="PositionStatus"><strong>Κατάσταση Θέσης</strong></label>
                                                                                <input type="text" id="PositionStatus" class="form-control"
                                                                                       value="@currentJob.PositionStatus" readonly />
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Υπεύθυνο Τμήμα Εταιρείας</strong></label>
                                                                                @if (!string.IsNullOrWhiteSpace(currentJob.PositionDepartment))
                                                                                {
                                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                        <i class="fas fa-building" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                        <span>@currentJob.PositionDepartment</span>
                                                                                    </div>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <input type="text" class="form-control" value="Δεν έχει διευκρινιστεί" readonly />
                                                                                }
                                                                            </div>
                                                                            <br/>
                                                                            <div class="form-group">
                                                                                <label for="PositionAttachment"><strong>Συνημμένο:</strong></label>
                                                                                @if (currentJob.PositionAttachment != null && currentJob.PositionAttachment.Length > 0)
                                                                                {
                                                                                    <a href="@("data:application/pdf;base64," + Convert.ToBase64String(currentJob.PositionAttachment))" 
                                                                                       download="JobAttachment.pdf" class="btn btn-primary">
                                                                                        Λήψη Αρχείου
                                                                                    </a>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <span style="color: darkred;"><strong> Δεν υπάρχει συνημμένο.</strong></span>
                                                                                }
                                                                            </div>
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button" class="btn btn-secondary" @onclick="CloseModalForJobs">
                                                                                Κλείσιμο
                                                                            </button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        }


      








                                        <!-- Internships tab content -->
                                        @*<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">*@
                                        
                                        <div class="tab-pane fade" id="internships" role="tabpanel" aria-labelledby="internships-tab">
                                            <!-- SHOW MY APPLIED INTERNSHIPS AS STUDENT IN STUDENT SIDE -->
                                            <div class="mb-3 row-dark-gray mt-4">
                                                <div class="d-flex justify-content-between align-items-center">
                                                    <label class="form-label" style="color: #FFF8DC;">• Αιτήσεις Πρακτικής Άσκησης •</label>
                                                    <button class="btn btn-link" @onclick="ToggleAndLoadStudentInternshipApplications">
                                                        @if (showStudentInternshipApplications)
                                                        {
                                                            <span>&#8722;</span> <!-- Minus sign -->
                                                        }
                                                        else
                                                        {
                                                            <span>&#43;</span> <!-- Plus sign -->
                                                        }
                                                    </button>
                                                </div>
                                            </div>
                                            @*
                                            @if(isInternshipApplicationsAsStudentVisible)
                                            {
                                            <div class="mb-3">
                                                <button class="modern-button" style="background-color: #007bff; color: white;" @onclick="ToggleAndLoadStudentInternshipApplications">Οι Αιτήσεις μου</button> <!-- ΑΥΤΟ ΠΡΕΠΕΙ ΝΑ ΓΙΝΕΙ ΓΙΑ ΤΙΣ ΠΡΑΚΤΙΚΚΕΣ ΠΟΥ ΕΚΑΝΕ ΑΙΤΗΣΗ Ο ΦΟΙΤΗΤΗΣ (MAZI COMPANY KAI PROFESSOR) -->
                                            </div>
                                            *@
                                            @if(showStudentInternshipApplications)
                                            {
                                                <label for="internshipFilter" style="color: #4682b4; font-weight: bold; font-size: 15px; display: block;">Εμφάνιση ανά Κατηγορία</label>
                                                <div class="col-md-2">
                                                    <div class="input-group">
                                                        <select id="internshipFilter" class="form-control form-control-sm" @onchange="FilterInternshipApplications" aria-label="Choose filter">
                                                            <option value="all">Όλες</option>
                                                            <option value="company">Εταιρείας</option>
                                                            <option value="professor">Καθηγητή</option>                                                       
                                                        </select>
                                                        <div class="input-group-append">
                                                            <span class="input-group-text">
                                                                <i class="fas fa-chevron-down"></i>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-2">
                                                    <label style="color: #4682b4; font-weight: bold; font-size: 15px; display: block;">Αποτελέσματα ανά Σελίδα</label>
                                                    <div class="input-group" style="max-width: 65px;"> <!-- Adjust width here -->
                                                        <select class="form-control form-control-sm" @onchange="OnPageSizeChange_SeeMyInternshipApplicationsAsStudent" aria-label="Items per page">
                                                            @foreach (var option in pageSizeOptions_SeeMyInternshipApplicationsAsStudent)
                                                            {
                                                                <option value="@option" selected="@(pageSizeForInternshipsToSee == option)">@option</option>
                                                            }
                                                        </select>
                                                        <div class="input-group-append">
                                                            <span class="input-group-text">
                                                                <i class="fas fa-chevron-down"></i>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>    
                                                @if (showStudentInternshipApplications)
                                                {
                                                    var allInternshipApplications = new List<object>();

                                                    if (showCompanyInternshipApplications && internshipApplications != null)
                                                        allInternshipApplications.AddRange(internshipApplications);

                                                    if (showProfessorInternshipApplications && professorInternshipApplications != null)
                                                        allInternshipApplications.AddRange(professorInternshipApplications);

                                                    int totalInternshipCount = allInternshipApplications.Count;
                                                    SetTotalInternshipCount(totalInternshipCount);

                                                    var paginatedInternships = allInternshipApplications
                                                        .Skip((currentPageForInternshipsToSee - 1) * pageSizeForInternshipsToSee)
                                                        .Take(pageSizeForInternshipsToSee)
                                                        .ToList();

                                                    @if (paginatedInternships.Any())
                                                    {
                                                        <table class="table table-bordered">
                                                            <thead>
                                                                <tr>
                                                                    <td colspan="9" style="padding: 0;">
                                                                        <div style="display: flex; justify-content: space-between; align-items: center; height: 24px; line-height: 24px; width: 100%;">
                                                                            <i class="fa-regular fa-bell" style="font-size: 18px; color: #0d6efd;"></i>
                                                                            <label class="form-label" style="color: #0d6efd; font-weight: bold; font-size: 18px; margin: 0;">Οι Αιτήσεις Μου</label>
                                                                            <i class="fa-regular fa-bell" style="font-size: 18px; color: #0d6efd;"></i>
                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <th><i class="fa-solid fa-key fa-sm" style="color: #9D00FF;"></i> Κωδικός Θέσης</th>
                                                                    <th>
                                                                        <i class="fa-solid fa-user fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Εταιρεία <span style="color: red; font-weight: bold;">(Ε)</span> / 
                                                                        Καθηγητής <span style="color: red; font-weight: bold;">(Κ)</span>
                                                                    </th>
                                                                    <th>
                                                                        <i class="fa-solid fa-font fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Τίτλος Πρακτικής
                                                                    </th>
                                                                    <th>
                                                                        <i class="fa-solid fa-calendar-plus fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Ημερομηνία Αίτησης
                                                                    </th>
                                                                    <th>
                                                                        <i class="fa-solid fa-comments fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Επικοινωνία
                                                                    </th>
                                                                    <th>
                                                                        <i class="fa-solid fa-spinner fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Κατάσταση Αίτησης
                                                                    </th>
                                                                    <th>
                                                                        <i class="fa-solid fa-ban fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Απόσυρση Αίτησης
                                                                    </th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                            @foreach (var application in paginatedInternships)
                                                            {
                                                                @if (application is InternshipApplied companyApp)
                                                                {
                                                                    // Get status with fallback logic like jobs
                                                                    var status = companyApp.InternshipStatusAppliedAtTheStudentSide 
                                                                               ?? companyApp.InternshipStatusAppliedAtTheCompanySide
                                                                               ?? "Σε Επεξεργασία";
        
                                                                    // Get internship data from cache (similar to jobDataCache)
                                                                    var internship = internshipDataCache.TryGetValue(companyApp.RNGForInternshipApplied, out var i) ? i : null;

                                                                    <tr style="background-color: @(status == "Επιτυχής" ? "lightgreen" :
                                                                                                 status == "Απορρίφθηκε" ? "lightcoral" :
                                                                                                 status == "Απορρίφθηκε (Απόσυρση Θέσεως Από Εταιρία)" ? "coral" :
                                                                                                 status == "Αποσύρθηκε από τον φοιτητή" ? "lightyellow" : "transparent")">
                                                                        <td style="color: #9D00FF;">
                                                                            @companyApp.RNGForInternshipAppliedAsStudent_HashedAsUniqueID
                                                                        </td>
                                                                        <td>
                                                                            @if (internship != null && internship.Company != null)
                                                                            {
                                                                                <a href="#" @onclick="() => ShowCompanyDetailsinTitleAsHyperlink(internship.CompanyEmailUsedToUploadInternship)">
                                                                                    @internship.Company.CompanyName
                                                                                    <span style="color: red; font-weight: bold;">(E)</span>
                                                                                </a>
                                                                            }
                                                                            else
                                                                            {
                                                                                <span class="text-warning">Δεν βρέθηκε</span>
                                                                            }
                                                                        </td>                                                                          
                                                                        <td>
                                                                            @if (internship != null)
                                                                            {
                                                                                <a href="#" @onclick="() => ShowInternshipDetailsInInternshipTitleAsHyperlink(companyApp.RNGForInternshipApplied)">
                                                                                    @internship.CompanyInternshipTitle
                                                                                </a>
                                                                            }
                                                                            else
                                                                            {
                                                                                <span class="text-warning">Δεν βρέθηκε</span>
                                                                            }
                                                                        </td>
                                                                        <td>@companyApp.DateTimeStudentAppliedForInternship.ToString("dd/MM/yyyy HH:mm")</td>
                                                                        <td class="text-center">
                                                                            <a href="mailto:@companyApp.CompanyEmailWhereStudentAppliedForInternship" target="_blank" 
                                                                               title="@companyApp.CompanyEmailWhereStudentAppliedForInternship">
                                                                                <i class="fas fa-envelope"></i>
                                                                            </a>
                                                                        </td>
                                                                        <td style="color: @(status == "Επιτυχής" ? "black" :
                                                                                      status == "Απορρίφθηκε" ? "black" :
                                                                                      status == "Σε Επεξεργασία" ? "black" :
                                                                                      status == "Αποσύρθηκε από τον φοιτητή" ? "brown" : "black")">
                                                                            @status
                                                                        </td>
                                                                        <td class="text-center">
                                                                            @if (status == "Σε Επεξεργασία")
                                                                            {
                                                                                <span style="cursor: pointer;" 
                                                                                      @onclick="() => WithdrawInternshipApplicationMadeByStudent(companyApp)" 
                                                                                      title="Κάντε Κλικ για Απόσυρση της Αίτησης σας">
                                                                                    <i class="fas fa-times"></i>
                                                                                </span>
                                                                            }
                                                                            else if (status == "Επιτυχής" || status == "Απορρίφθηκε")
                                                                            {
                                                                                <span>Δεν μπορεί να αποσυρθεί</span>
                                                                            }
                                                                            else
                                                                            {
                                                                                <span>Ολοκληρώθηκε</span>
                                                                            }
                                                                        </td>
                                                                    </tr>
                                                                }
                                                            
                                                                        else if (application is ProfessorInternshipApplied professorApp)
                                                                        {
                                                                            // Get status with fallback logic like company internships
                                                                            var status = professorApp.InternshipStatusAppliedAtTheStudentSide 
                                                                                       ?? professorApp.InternshipStatusAppliedAtTheProfessorSide
                                                                                       ?? "Σε Επεξεργασία";
        
                                                                            // Get internship data from cache (similar to company implementation)
                                                                            var internship = professorInternshipDataCache.TryGetValue(professorApp.RNGForProfessorInternshipApplied, out var i) ? i : null;

                                                                            <tr style="background-color: @(status == "Επιτυχής" ? "lightgreen" :
                                                                                                         status == "Απορρίφθηκε" ? "lightcoral" :
                                                                                                         status == "Απορρίφθηκε (Απόσυρση Θέσεως Από Καθηγητή)" ? "coral" :
                                                                                                         status == "Αποσύρθηκε από τον φοιτητή" ? "lightyellow" : "transparent")">
                                                                                <td style="color: #9D00FF;">
                                                                                    @professorApp.RNGForProfessorInternshipApplied_HashedAsUniqueID
                                                                                </td>
                                                                                <td>
                                                                                    @if (internship != null && internship.Professor != null)
                                                                                    {
                                                                                        <a href="#" @onclick="() => ShowProfessorDetailsinTitleAsHyperlink_StudentInternshipApplicationsShow(internship.ProfessorEmailUsedToUploadInternship)">
                                                                                            @internship.Professor.ProfName @internship.Professor.ProfSurname
                                                                                            <span style="color: red; font-weight: bold;">(K)</span>
                                                                                        </a>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <span class="text-warning">Δεν βρέθηκε</span>
                                                                                    }
                                                                                </td>                                                                            
                                                                                <td>
                                                                                    @if (internship != null)
                                                                                    {
                                                                                        <a href="#" @onclick="() => ShowProfessorInternshipDetailsInInternshipTitleAsHyperlink_StudentInternshipApplicationsShow(professorApp.RNGForProfessorInternshipApplied)">
                                                                                            @internship.ProfessorInternshipTitle
                                                                                        </a>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <span class="text-warning">Δεν βρέθηκε</span>
                                                                                    }
                                                                                </td>
                                                                                <td>@professorApp.StudentDetails.DateTimeStudentAppliedForProfessorInternship.ToString("dd/MM/yyyy HH:mm")</td>
                                                                                <td class="text-center">
                                                                                    <a href="mailto:@professorApp.ProfessorDetails.ProfessorEmailWhereStudentAppliedForProfessorInternship" target="_blank" 
                                                                                       title="@professorApp.ProfessorDetails.ProfessorEmailWhereStudentAppliedForProfessorInternship">
                                                                                        <i class="fas fa-envelope"></i>
                                                                                    </a>
                                                                                </td>
                                                                                <td style="color: @(status == "Επιτυχής" ? "black" :
                                                                                              status == "Απορρίφθηκε" ? "black" :
                                                                                              status == "Σε Επεξεργασία" ? "black" :
                                                                                              status == "Αποσύρθηκε από τον φοιτητή" ? "brown" : "black")">
                                                                                    @status
                                                                                </td>
                                                                                <td class="text-center">
                                                                                    @if (status == "Σε Επεξεργασία")
                                                                                    {
                                                                                        <span style="cursor: pointer;" 
                                                                                              @onclick="() => WithdrawProfessorInternshipApplicationMadeByStudent(professorApp)" 
                                                                                              title="Κάντε Κλικ για Απόσυρση της Αίτησης σας">
                                                                                            <i class="fas fa-times"></i>
                                                                                        </span>
                                                                                    }
                                                                                    else if (status == "Επιτυχής" || status == "Απορρίφθηκε")
                                                                                    {
                                                                                        <span>Δεν μπορεί να αποσυρθεί</span>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <span>Ολοκληρώθηκε</span>
                                                                                    }
                                                                                </td>
                                                                            </tr>
                                                                        }
                                                            }
                                                        </tbody>                                                     
                                                        </table>
                                                        <!-- Internships Applications Pagination -->
                                                        <div class="d-flex justify-content-center align-items-center mt-3 gap-1">
                                                            <!-- First Page (<<) -->
                                                            <span class="pagination-item @(currentPageForInternshipsToSee == 1 ? "disabled" : "")" 
                                                                  @onclick="@(() => GoToFirstPageForInternships())">
                                                                &lt;&lt;
                                                            </span>
    
                                                            <!-- Previous Page (<) -->
                                                            <span class="pagination-item @(currentPageForInternshipsToSee == 1 ? "disabled" : "")" 
                                                                  @onclick="@(() => PreviousPageForInternshipsToSee())">
                                                                &lt;
                                                            </span>
    
                                                            <!-- Page Numbers -->
                                                            @foreach (var pageNumber in GetVisiblePagesForInternships())
                                                            {
                                                                @if (pageNumber == -1)
                                                                {
                                                                    <span class="pagination-ellipsis">...</span>
                                                                }
                                                                else
                                                                {
                                                                    <span class="pagination-item @(pageNumber == currentPageForInternshipsToSee ? "active" : "")" 
                                                                          @onclick="@(() => GoToPageForInternships(pageNumber))">
                                                                        @pageNumber
                                                                    </span>
                                                                }
                                                            }
    
                                                            <!-- Next Page (>) -->
                                                            <span class="pagination-item @(currentPageForInternshipsToSee == totalPagesForInternshipsToSee ? "disabled" : "")" 
                                                                  @onclick="@(() => NextPageForInternshipsToSee())">
                                                                &gt;
                                                            </span>
    
                                                            <!-- Last Page (>>) -->
                                                            <span class="pagination-item @(currentPageForInternshipsToSee == totalPagesForInternshipsToSee ? "disabled" : "")" 
                                                                  @onclick="@(() => GoToLastPageForInternships())">
                                                                &gt;&gt;
                                                            </span>
    
                                                            <!-- Page counter -->
                                                            <span class="ms-3">Σελίδα @currentPageForInternshipsToSee από @totalPagesForInternshipsToSee</span>
                                                        </div>
                                                    }
                                                    else
                                                    {
                                                        <div class="alert alert-warning" role="alert">
                                                            Δεν υπάρχει καμία Αίτηση για Πρακτική Άσκηση
                                                        </div>
                                                    }
                                                }
                                            }

                                            @if (isInternshipDetailsModalVisible && currentInternship != null)
                                            {
                                                <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0,0,0,0.5);">
                                                    <div class="modal-dialog modal-dialog-centered" role="document">
                                                        <div class="modal-content">
                                                            <div class="modal-header">
                                                                <h5 class="modal-title" style="color: #4682B4;">@currentInternship.CompanyInternshipTitle</h5>
                                                                <button type="button" class="close" @onclick="CloseInternshipDetailsModal">
                                                                    <span aria-hidden="true">&times;</span>
                                                                </button>
                                                            </div>
                                                            <div class="modal-body">
                                                                <div class="form-group">
                                                                    <label for="viewDescription" style="font-weight: bold;">Περιγραφή</label>
                                                                    <textarea id="viewDescription" class="form-control" readonly>@currentInternship.CompanyInternshipDescription</textarea>
                                                                </div>
                
                                                                <div class="form-group">
                                                                    <label for="viewType"><strong>Τύπος</strong></label>
                                                                    <input type="text" id="viewType" class="form-control" 
                                                                           value="@(currentInternship.CompanyInternshipType == "Full-Time" ? "Πλήρους Απασχόλησης" :
                                                                                  currentInternship.CompanyInternshipType == "Part-Time" ? "Μερικής Απασχόλησης" :
                                                                                  currentInternship.CompanyInternshipType == "Part-Time_Full-Time" ? "Πλήρους ή Μερικής Απασχόλησης" :
                                                                                  currentInternship.CompanyInternshipType)" 
                                                                           readonly />
                                                                </div>
                
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Χρηματοδότηση</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-hand-holding-dollar" style="color: #28a745; margin-right: 8px;"></i>
                                                                        <span>
                                                                            @(currentInternship.CompanyInternshipESPA == "ESPA-Funding" ? "Μέσω ΕΣΠΑ" :
                                                                              currentInternship.CompanyInternshipESPA == "Same-Funding" ? "Ιδίου Φορέα" :
                                                                              currentInternship.CompanyInternshipESPA == "Espa-Funding_Same-Funding" ? "Μέσω ΕΣΠΑ ή Ιδίου Φορέα" :
                                                                              currentInternship.CompanyInternshipESPA)
                                                                        </span>
                                                                    </div>
                                                                </div>
                
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Εταιρία</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-building" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                        <span>@currentInternship.Company.CompanyName</span>
                                                                    </div>
                                                                </div>
                
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Email Επικοινωνίας</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-envelope" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                        <span>@currentInternship.Company.CompanyEmail</span>
                                                                    </div>
                                                                </div>
                
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Τηλέφωνο Επικοινωνίας</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                        <span>@currentInternship.CompanyInternshipContactTelephonePerson</span>
                                                                    </div>
                                                                </div>
                
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Περιφέρεια</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-map-marked-alt" style="color: #6c757d; margin-right: 8px;"></i>
                                                                        <span>@currentInternship.CompanyInternshipPerifereiaLocation</span>
                                                                    </div>
                                                                </div>
                
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Δήμος</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-city" style="color: #6c757d; margin-right: 8px;"></i>
                                                                        <span>@currentInternship.CompanyInternshipDimosLocation</span>
                                                                    </div>
                                                                </div>
                
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Ταχ. Κώδικας</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-envelope-open-text" style="color: #6c757d; margin-right: 8px;"></i>
                                                                        <span>@currentInternship.CompanyInternshipPostalCodeLocation</span>
                                                                    </div>
                                                                </div>
                
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Προσφορά Μεταφορικού Μέσου</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto; 
                                                                         @(currentInternship.CompanyInternshipTransportOffer ? "color: #28a745;" : "color: #dc3545;")">
                                                                        <i class="fas fa-car" style="margin-right: 8px;"></i>
                                                                        <span>@(currentInternship.CompanyInternshipTransportOffer ? "Ναι" : "Όχι")</span>
                                                                    </div>
                                                                </div>
                
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Τομείς</label>
                                                                    <textarea id="viewAreas" class="form-control" readonly>@currentInternship.CompanyInternshipAreas</textarea>
                                                                </div>
                
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Ξεκινάει Από</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="far fa-calendar-alt" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                        <span>@currentInternship.CompanyInternshipActivePeriod.ToString("yyyy-MM-dd")</span>
                                                                    </div>
                                                                </div>
                
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Εκτιμώμενη Ημερομηνία Ολοκλήρωσης</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="far fa-calendar-alt" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                        <span>@currentInternship.CompanyInternshipFinishEstimation.ToString("yyyy-MM-dd")</span>
                                                                    </div>
                                                                </div>
                
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold; color: #87CEEB;">Επιβλέπων Καθηγητής</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-user-tie" style="color: #87CEEB; margin-right: 8px;"></i>
                                                                        <span>@currentInternship.CompanyInternshipEKPASupervisor</span>
                                                                    </div>
                                                                </div>
                
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Κατάσταση</label>
                                                                    <select class="form-control" disabled>
                                                                        <option value="Δημοσιευμένη" selected="@(currentInternship.CompanyUploadedInternshipStatus == "Δημοσιευμένη")">Δημοσιευμένη</option>
                                                                        <option value="Μη Δημοσιευμένη" selected="@(currentInternship.CompanyUploadedInternshipStatus == "Μη Δημοσιευμένη")">Μη Δημοσιευμένη</option>
                                                                        <option value="Αποσυρμένη" selected="@(currentInternship.CompanyUploadedInternshipStatus == "Αποσυρμένη")">Αποσυρμένη</option>
                                                                    </select>
                                                                </div>
                
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Συννημένο Αρχείο</label>
                                                                    <div>
                                                                        @if (currentInternship.CompanyInternshipAttachment != null)
                                                                        {
                                                                            <button class="btn btn-primary btn-sm" @onclick="() => DownloadInternshipAttachmentAsStudent(currentInternship.Id)" title="Λήψη Αρχείου">
                                                                                <i class="fas fa-download"></i> Λήψη
                                                                            </button>
                                                                        }
                                                                        else
                                                                        {
                                                                            <span>Δεν υπάρχει αρχείο</span>
                                                                        }
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="modal-footer">
                                                                <button type="button" class="btn btn-secondary" @onclick="CloseInternshipDetailsModal">Κλείσιμο</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            }
                                            


                                            <!-- MODAL TO SHOW COMPANY DETAILS AT STUDENT INTERNSHIP APPLICATIONS MADE -->
                                            @if (iscompanyDetailsModalVisible && selectedCompany != null)
                                            {
                                                <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0,0,0,0.5);">
                                                    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                        <div class="modal-content">
                                                            <div class="modal-header">
                                                                <h5 class="modal-title" style="color: #4682B4;">@selectedCompany.CompanyName</h5>
                                                                <button type="button" class="close" @onclick="CloseModalforHyperLinkTitle">
                                                                    <span aria-hidden="true">&times;</span>
                                                                </button>
                                                            </div>
                                                            <div class="modal-body">
                                                                <div class="form-group text-center">
                                                                    @if (selectedCompany.CompanyLogo != null)
                                                                    {
                                                                        <img src="data:image/png;base64,@Convert.ToBase64String(selectedCompany.CompanyLogo)" 
                                                                             alt="Company Logo" 
                                                                             class="rounded-circle img-fluid"
                                                                             style="max-width: 150px; max-height: 150px; object-fit: cover;" />
                                                                    }
                                                                    else
                                                                    {
                                                                        <p>Δεν είναι διαθέσιμο</p>
                                                                    }
                                                                </div>

                                                                <div class="form-group">
                                                                    <label><strong>Σύντομη Ονομασία</strong></label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-tag" style="color: #6c757d; margin-right: 8px;"></i>
                                                                        <input type="text" class="border-0 flex-grow-1" value="@selectedCompany.CompanyShortName" readonly />
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label><strong>Τύπος Εταιρείας</strong></label>
                                                                    <input type="text" class="form-control" value="@selectedCompany.CompanyType" readonly />
                                                                </div>

                                                                <div class="form-group">
                                                                    <label><strong>Email Εταιρείας</strong></label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-envelope" style="color: #6c757d; margin-right: 8px;"></i>
                                                                        <input type="text" class="border-0 flex-grow-1" value="@selectedCompany.CompanyEmail" readonly />
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label><strong>Ιστοσελίδα Εταιρείας</strong></label>
                                                                    @if (!string.IsNullOrEmpty(selectedCompany.CompanyWebsite))
                                                                    {
                                                                        <div class="form-control d-flex align-items-center" style="height: auto; cursor: pointer; color: #007bff;"
                                                                             onclick="window.open('@(selectedCompany.CompanyWebsite.StartsWith("http") ? selectedCompany.CompanyWebsite : "http://" + selectedCompany.CompanyWebsite)', '_blank')">
                                                                            <i class="fa-solid fa-globe" style="margin-right: 8px;"></i>
                                                                            <span class="flex-grow-1">@selectedCompany.CompanyWebsite</span>
                                                                        </div>
                                                                    }
                                                                    else
                                                                    {
                                                                        <input type="text" class="form-control" value="Δεν υπάρχει" readonly />
                                                                    }
                                                                </div>

                                                                <div class="form-group">
                                                                    <label><strong>Ανακοινώσεις Εταιρείας</strong></label>
                                                                    @if (!string.IsNullOrEmpty(selectedCompany.CompanyWebsiteAnnouncements))
                                                                    {
                                                                        <div class="form-control d-flex align-items-center" style="height: auto; cursor: pointer; color: #007bff;"
                                                                             onclick="window.open('@(selectedCompany.CompanyWebsiteAnnouncements.StartsWith("http") ? selectedCompany.CompanyWebsiteAnnouncements : "http://" + selectedCompany.CompanyWebsiteAnnouncements)', '_blank')">
                                                                            <i class="fa-solid fa-globe" style="margin-right: 8px;"></i>
                                                                            <span class="flex-grow-1">@selectedCompany.CompanyWebsiteAnnouncements</span>
                                                                        </div>
                                                                    }
                                                                    else
                                                                    {
                                                                        <input type="text" class="form-control" value="Δεν υπάρχει" readonly />
                                                                    }
                                                                </div>

                                                                <div class="form-group">
                                                                    <label><strong>Θέσεις Εργασίας Εταιρείας</strong></label>
                                                                    @if (!string.IsNullOrEmpty(selectedCompany.CompanyWebsiteJobs))
                                                                    {
                                                                        <div class="form-control d-flex align-items-center" style="height: auto; cursor: pointer; color: #007bff;"
                                                                             onclick="window.open('@(selectedCompany.CompanyWebsiteJobs.StartsWith("http") ? selectedCompany.CompanyWebsiteJobs : "http://" + selectedCompany.CompanyWebsiteJobs)', '_blank')">
                                                                            <i class="fa-solid fa-globe" style="margin-right: 8px;"></i>
                                                                            <span class="flex-grow-1">@selectedCompany.CompanyWebsiteJobs</span>
                                                                        </div>
                                                                    }
                                                                    else
                                                                    {
                                                                        <input type="text" class="form-control" value="Δεν υπάρχει" readonly />
                                                                    }
                                                                </div>

                                                                <div class="form-group">
                                                                    <label><strong>Τηλέφωνο Εταιρείας</strong></label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fa-solid fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                        <input type="text" class="border-0 flex-grow-1" value="@selectedCompany.CompanyTelephone" readonly />
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label><strong>Περιγραφή Εταιρείας</strong></label>
                                                                    <textarea class="form-control" rows="4" readonly>@selectedCompany.CompanyDescription</textarea>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label><strong>Δραστηριότητα Εταιρείας</strong></label>
                                                                    <input type="text" class="form-control" value="@selectedCompany.CompanyActivity" readonly />
                                                                </div>

                                                                <div class="form-group">
                                                                    <label><strong>Περιοχές Ενδιαφέροντος</strong></label>
                                                                    <textarea class="form-control" readonly>@selectedCompany.CompanyAreas</textarea>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label><strong>Χώρα</strong></label>
                                                                    <input type="text" class="form-control" value="@selectedCompany.CompanyCountry" readonly />
                                                                </div>

                                                                <div class="form-group">
                                                                    <label><strong>Περιφέρεια</strong></label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fa-solid fa-map" style="color: #6c757d; margin-right: 8px;"></i>
                                                                        <input type="text" class="border-0 flex-grow-1" value="@selectedCompany.CompanyRegions" readonly />
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label><strong>Πόλη</strong></label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fa-solid fa-city" style="color: #6c757d; margin-right: 8px;"></i>
                                                                        <input type="text" class="border-0 flex-grow-1" value="@selectedCompany.CompanyTown" readonly />
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label><strong>Διεύθυνση</strong></label>
                                                                    <div class="form-control d-flex align-items-center mt-1" style="height: auto;">
                                                                        <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                        <a href="https://www.google.com/maps/search/@selectedCompany.CompanyLocation"
                                                                           target="_blank"
                                                                           style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                            @selectedCompany.CompanyLocation
                                                                        </a>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label><strong>Ταχυδρομικός Κώδικας</strong></label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fa-solid fa-envelope-open-text" style="color: #6c757d; margin-right: 8px;"></i>
                                                                        <input type="text" class="border-0 flex-grow-1" value="@selectedCompany.CompanyPC" readonly />
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label><strong>Email Υπεύθυνου Ανθρώπινου Δυναμικού</strong></label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fa-solid fa-envelope" style="color: #007bff; margin-right: 8px;"></i>
                                                                        <input type="text" class="border-0 flex-grow-1" value="@selectedCompany.CompanyHREmail" readonly />
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label><strong>Τηλέφωνο Υπεύθυνου Ανθρώπινου Δυναμικού</strong></label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fa-solid fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                        <input type="text" class="border-0 flex-grow-1" value="@selectedCompany.CompanyHRTelephone" readonly />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="modal-footer">
                                                                <button type="button" class="btn btn-secondary" @onclick="CloseModalforHyperLinkTitle">
                                                                    Κλείσιμο
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            }

                                            @if(isProfessorDetailsModalVisible_StudentInternshipApplicationsShow && selectedProfessor != null)
                                            {
                                               <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                                    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
                                                        <div class="modal-content">
                                                            <div class="modal-header">
                                                                <h5 class="modal-title" style="color: #007BFF;">
                                                                    @selectedProfessor.ProfName @selectedProfessor.ProfSurname
                                                                </h5>
                                                                <button type="button" class="btn-close" @onclick="CloseProfessorDetailsModal_StudentInternshipApplications" aria-label="Κλείσιμο"></button>
                                                            </div>
                                                            <div class="modal-body">
                                                                <!-- Profile Picture -->
                                                                <div class="form-group text-center">
                                                                    @if (selectedProfessor.ProfImage != null)
                                                                    {
                                                                        var base64Image = Convert.ToBase64String(selectedProfessor.ProfImage);
                                                                        <img src="data:image/jpeg;base64,@base64Image" alt="Φωτογραφία Προφίλ Καθηγητή" 
                                                                             style="max-width: 150px; max-height: 150px; border-radius: 50%; object-fit: cover;" />
                                                                    }
                                                                    else
                                                                    {
                                                                        <p>Δεν υπάρχει φωτογραφία Προφίλ</p>
                                                                    }
                                                                </div>

                                                                <!-- Name and Surname -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Όνομα</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-user" style="color: #6c757d; margin-right: 8px;"></i>
                                                                        <span>@selectedProfessor.ProfName</span>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Επώνυμο</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-user" style="color: #6c757d; margin-right: 8px;"></i>
                                                                        <span>@selectedProfessor.ProfSurname</span>
                                                                    </div>
                                                                </div>

                                                                <!-- University & Department -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Πανεπιστήμιο</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-university" style="color: #007bff; margin-right: 8px;"></i>
                                                                        <span>@selectedProfessor.ProfUniversity</span>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Τμήμα</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fa-solid fa-building" style="color: #6c757d; margin-right: 8px;"></i>
                                                                        <span>@selectedProfessor.ProfDepartment</span>
                                                                    </div>
                                                                </div>

                                                                <!-- Academic Rank & Contact Info -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Βαθμίδα ΔΕΠ</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fa-solid fa-user-tie" style="color: #6c757d; margin-right: 8px;"></i>
                                                                        <span>@selectedProfessor.ProfVahmidaDEP</span>
                                                                    </div>
                                                                </div>

                                                                <!-- Professor Email -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Email</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-envelope" style="color: #007bff; margin-right: 8px;"></i>
                                                                        <span>@selectedProfessor.ProfEmail</span>
                                                                    </div>
                                                                </div>

                                                                <!-- Professor Work and Personal Telephone -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Τηλέφωνο Εργασίας</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fa-solid fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                        <span>@selectedProfessor.ProfWorkTelephone</span>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Προσωπικό Τηλέφωνο</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fa-solid fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                        @if (!string.IsNullOrEmpty(selectedProfessor.ProfPersonalTelephone))
                                                                        {
                                                                            <span>@selectedProfessor.ProfPersonalTelephone</span>
                                                                        }
                                                                        else
                                                                        {
                                                                            <span>Δεν Διατίθεται</span>
                                                                        }
                                                                    </div>
                                                                </div>

                                                                <!-- LinkedIn Profile -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">LinkedIn</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fab fa-linkedin" style="color: #0A66C2; margin-right: 8px;"></i>
                                                                        @if (!string.IsNullOrEmpty(selectedProfessor.ProfLinkedInSite))
                                                                        {
                                                                            <a href="@selectedProfessor.ProfLinkedInSite" target="_blank" class="flex-grow-1 text-truncate" style="text-decoration:none; color:#0A66C2;">
                                                                                @selectedProfessor.ProfLinkedInSite
                                                                            </a>
                                                                        }
                                                                        else
                                                                        {
                                                                            <span class="flex-grow-1 text-muted">Δεν Διατίθεται</span>
                                                                        }
                                                                    </div>
                                                                </div>

                                                                <!-- Personal Website -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Ιστότοπος</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fa-solid fa-globe" style="color: #007bff; margin-right: 8px;"></i>
                                                                        @if (!string.IsNullOrEmpty(selectedProfessor.ProfPersonalWebsite))
                                                                        {
                                                                            <a href="@selectedProfessor.ProfPersonalWebsite" target="_blank" class="flex-grow-1 text-truncate" style="text-decoration:none; color:#007bff;">
                                                                                @selectedProfessor.ProfPersonalWebsite
                                                                            </a>
                                                                        }
                                                                        else
                                                                        {
                                                                            <span class="flex-grow-1 text-muted">Δεν Διατίθεται</span>
                                                                        }
                                                                    </div>
                                                                </div>

                                                                <!-- Google Scholar -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Scholar Profile</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-graduation-cap" style="color: #4285F4; margin-right: 8px;"></i>
                                                                        @if (!string.IsNullOrEmpty(selectedProfessor.ProfScholarProfile))
                                                                        {
                                                                            <a href="@selectedProfessor.ProfScholarProfile" target="_blank" class="flex-grow-1 text-truncate" style="text-decoration:none; color:#4285F4;">
                                                                                @selectedProfessor.ProfScholarProfile
                                                                            </a>
                                                                        }
                                                                        else
                                                                        {
                                                                            <span class="flex-grow-1 text-muted">Δεν Διατίθεται</span>
                                                                        }
                                                                    </div>
                                                                </div>

                                                                <!-- Orchid -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">ORCID Profile</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-id-card" style="color: #A6CE39; margin-right: 8px;"></i>
                                                                        @if (!string.IsNullOrEmpty(selectedProfessor.ProfOrchidProfile))
                                                                        {
                                                                            <a href="@selectedProfessor.ProfOrchidProfile" target="_blank" class="flex-grow-1 text-truncate" style="text-decoration:none; color:#A6CE39;">
                                                                                @selectedProfessor.ProfOrchidProfile
                                                                            </a>
                                                                        }
                                                                        else
                                                                        {
                                                                            <span class="flex-grow-1 text-muted">Δεν Διατίθεται</span>
                                                                        }
                                                                    </div>
                                                                </div>

                                                                <!-- Expanded fields with textarea -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Πεδίο Εργασίας</label>
                                                                    <textarea class="form-control" rows="3" readonly>@selectedProfessor.ProfGeneralFieldOfWork</textarea>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Τεχνικές Δεξιότητες/Ενδιαφέροντα</label>
                                                                    <textarea class="form-control" rows="3" readonly>@selectedProfessor.ProfGeneralSkills</textarea>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Σύντομη Περιγραφή</label>
                                                                    <textarea class="form-control" rows="3" readonly>@selectedProfessor.ProfPersonalDescription</textarea>
                                                                </div>
                                                                <br/>
                                                                <div class="form-group">
                                                                    <label for="viewProfessorCVAttachment"><strong>Βιογραφικό:</strong></label>
                                                                    @if (selectedProfessor.ProfCVAttachment != null)
                                                                    {
                                                                        <a href="data:application/pdf;base64,@Convert.ToBase64String(selectedProfessor.ProfCVAttachment)" download="ProfCV.pdf" class="btn btn-primary">
                                                                            Λήψη Βιογραφικού
                                                                        </a>
                                                                    }
                                                                    else
                                                                    {
                                                                        <span style="color: darkred;"><strong>Δεν υπάρχει διαθέσιμο βιογραφικό</strong></span>
                                                                    }
                                                                </div>
                                                            </div>
                                                            <div class="modal-footer">
                                                                <button type="button" class="btn btn-secondary" @onclick="CloseProfessorDetailsModal_StudentInternshipApplications">
                                                                    Κλείσιμο
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            }
                                                

                                            @if(isInternshipDetailsModalVisible_StudentInternshipApplicationsShow)
                                            {
                                                <div class="modal fade show d-block" id="internshipDetailsModal" tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                                    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                        <div class="modal-content">
                                                            <div class="modal-header">
                                                                <h5 class="modal-title" style="color: #4682B4;">@currentProfessorInternship.ProfessorInternshipTitle</h5>
                                                                <button type="button" class="close" @onclick="CloseProfessorInternshipDetailsModal_StudentInternshipApplicationsShow" aria-label="Κλείσιμο">
                                                                    <span aria-hidden="true">&times;</span>
                                                                </button>
                                                            </div>
                                                            <div class="modal-body">
                                                                @*
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Τίτλος Θέσης</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-heading" style="color: #6c757d; margin-right: 8px;"></i>
                                                                        <span>@currentProfessorInternship.ProfessorInternshipTitle</span>
                                                                    </div>
                                                                </div>
                                                                *@

                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Τύπος Θέσης</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto; background-color: #e9ecef; color: #495057;">
                                                                        <span>
                                                                            @(currentProfessorInternship.ProfessorInternshipType == "Full-Time" ? "Πλήρους Απασχόλησης" :
                                                                              currentProfessorInternship.ProfessorInternshipType == "Part-Time" ? "Μερικής Απασχόλησης" :
                                                                              currentProfessorInternship.ProfessorInternshipType == "Part-Time_Full-Time" ? "Πλήρους ή Μερικής Απασχόλησης" :
                                                                              currentProfessorInternship.ProfessorInternshipType)
                                                                        </span>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Φορέας</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto; background-color: #e9ecef; color: #495057;">
                                                                        <span>@currentProfessorInternship.ProfessorInternshipForeas</span>
                                                                    </div>
                                                                </div>


                                                                <div class="form-group">
                                                                     <label style="font-weight: bold;">Χρηματοδότηση</label>
                                                                     <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                          <i class="fas fa-hand-holding-dollar" style="color: #28a745; margin-right: 8px;"></i>
                                                                           <span>
                                                                                 @(
                                                                                     currentProfessorInternship.ProfessorInternshipESPA == "ESPA-Funding" ? "Μέσω ΕΣΠΑ" :
                                                                                     currentProfessorInternship.ProfessorInternshipESPA == "Same-Funding" ? "Ιδίου Φορέα" :
                                                                                     currentProfessorInternship.ProfessorInternshipESPA == "ESPA-Funding_Same-Funding" ? "Μέσω ΕΣΠΑ ή Ιδίου Φορέα" :
                                                                                     ""
                                                                                  )
                                                                            </span>
                                                                      </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Περιγραφή</label>
                                                                    <textarea class="form-control" readonly style="height: 120px;">@currentProfessorInternship.ProfessorInternshipDescription</textarea>
                                                                </div>
                
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Περιοχές</label>
                                                                    <textarea class="form-control" readonly>@currentProfessorInternship.ProfessorInternshipAreas</textarea>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Ημερομηνία Ανάρτησης</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="far fa-calendar-alt" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                        <span>@currentProfessorInternship.ProfessorInternshipUploadDate.ToString("yyyy-MM-dd")</span>
                                                                    </div>
                                                                </div>
                
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Επιβλέπων Καθηγητής</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-user-tie" style="color: #6c757d; margin-right: 8px;"></i>
                                                                        <span>@currentProfessorInternship.ProfessorInternshipContactPerson</span>
                                                                    </div>
                                                                </div>
                
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Τηλέφωνο Επιβλέπων Καθηγητή</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                        <span>@currentProfessorInternship.ProfessorInternshipContactTelephonePerson</span>
                                                                    </div>
                                                                </div>
                
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Περιοχή</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-map-marked-alt" style="color: #6c757d; margin-right: 8px;"></i>
                                                                        <span>@currentProfessorInternship.ProfessorInternshipPerifereiaLocation</span>
                                                                    </div>
                                                                </div>
                
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Δήμος</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-city" style="color: #6c757d; margin-right: 8px;"></i>
                                                                        <span>@currentProfessorInternship.ProfessorInternshipDimosLocation</span>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label><strong>Διεύθυνση</strong></label>
                                                                    <div class="form-control d-flex align-items-center mt-1" style="height: auto;">
                                                                        <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                        @if (!string.IsNullOrWhiteSpace(currentProfessorInternship.ProfessorInternshipAddress))
                                                                        {
                                                                            <a href="https://www.google.com/maps/search/@currentProfessorInternship.ProfessorInternshipAddress"
                                                                               target="_blank"
                                                                               style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                @currentProfessorInternship.ProfessorInternshipAddress
                                                                            </a>
                                                                        }
                                                                        else
                                                                        {
                                                                            <span style="color: #6c757d;">Δεν έχει διευκρινιστεί</span>
                                                                        }
                                                                    </div>
                                                                </div>
                
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Ταχυδρομικός Κώδικας</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-envelope-open-text" style="color: #6c757d; margin-right: 8px;"></i>
                                                                        <span>@currentProfessorInternship.ProfessorInternshipPostalCodeLocation</span>
                                                                    </div>
                                                                </div>
                
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Προσφορά Μεταφορικού Μέσου</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto; 
                                                                         @(currentProfessorInternship.ProfessorInternshipTransportOffer ? "color: #28a745;" : "color: #dc3545;")">
                                                                        <i class="fas fa-car" style="margin-right: 8px;"></i>
                                                                        <span>@(currentProfessorInternship.ProfessorInternshipTransportOffer ? "Ναι" : "Όχι")</span>
                                                                    </div>
                                                                </div>
                
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold; color: #87CEEB;">Ενδιαφερόμενη Εταιρεία</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-building" style="color: #87CEEB; margin-right: 8px;"></i>
                                                                        <span>
                                                                            @(string.IsNullOrEmpty(currentProfessorInternship.ProfessorInternshipEKPASupervisor)
                                                                                ? "Καμία Ένδειξη Ενδιαφέροντος από Εταιρεία ακόμη"
                                                                                : currentProfessorInternship.ProfessorInternshipEKPASupervisor)
                                                                        </span>
                                                                    </div>
                                                                </div>

                
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Ξεκινάει Από</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="far fa-calendar-alt" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                        <span>@currentProfessorInternship.ProfessorInternshipActivePeriod.ToString("yyyy-MM-dd")</span>
                                                                    </div>
                                                                </div>
                
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Εκτιμώμενη Ημερομηνία Ολοκλήρωσης</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="far fa-calendar-alt" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                        <span>@currentProfessorInternship.ProfessorInternshipFinishEstimation.ToString("yyyy-MM-dd")</span>
                                                                    </div>
                                                                </div>
                                                                                                       
                                                                <br/>
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Συνημμένο</label>
                                                                    <br/>
                                                                    @if (currentProfessorInternship.ProfessorInternshipAttachment != null)
                                                                    {
                                                                        <a href="@("data:application/pdf;base64," + Convert.ToBase64String(currentProfessorInternship.ProfessorInternshipAttachment))" 
                                                                           download="ProfessorInternshipAttachment.pdf" class="btn btn-primary btn-sm">
                                                                            <i class="fas fa-download"></i> Λήψη Αρχείου
                                                                        </a>
                                                                    }
                                                                    else
                                                                    {
                                                                        <span class="text-danger">Δεν διατίθεται συνημμένο αρχείο</span>
                                                                    }
                                                                </div>
                                                            </div>
                                                            <div class="modal-footer">
                                                                <button type="button" class="btn btn-secondary" @onclick="CloseProfessorInternshipDetailsModal_StudentInternshipApplicationsShow">Κλείσιμο</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            }

                                            <!-- Φίλτρα Αναζήτησης Για Εύρεση Πρακτικής Άσκησης -->
                                            <div class="mb-3 row-dark-gray mt-4">
                                                <div class="d-flex justify-content-between align-items-center">
                                                    <label class="form-label" style="color: #FFF8DC;">• Φίλτρα Αναζήτησης Για Εύρεση Πρακτικής Άσκησης •</label>
                                                    <button class="btn btn-link" @onclick="ToggleInternshipSearchAsStudentFiltersVisibility">
                                                        @if (isInternshipSearchAsStudentFiltersVisible)
                                                        {
                                                            <span>&#8722;</span> <!-- Minus sign -->
                                                        }
                                                        else
                                                        {
                                                            <span>&#43;</span> <!-- Plus sign -->
                                                        }
                                                    </button>
                                                </div>
                                            </div>

                                            @if (isInternshipSearchAsStudentFiltersVisible)
                                            {
                                                <div class="row mb-3">
                                                    <div class="col-md-4 position-relative">
                                                        <label for="internshipSearch" class="form-label">Αναζήτηση με Τίτλο</label>
                                                        <input 
                                                            type="text" 
                                                            id="internshipSearch" 
                                                            class="form-control" 
                                                            @bind="companyinternshipSearch" 
                                                            @oninput="HandleInternshipTitleAutocompleteInputWhenSearchInternshipAsStudent"
                                                            placeholder="Εισάγετε τον τίτλο της Θέσης" />

                                                        <!-- Suggestions dropdown -->
                                                        <ul class="list-group position-absolute" 
                                                            style="z-index: 100; width: 100%; max-height: 150px; overflow-y: auto;" 
                                                            hidden="@(!internshipTitleAutocompleteSuggestionsWhenSearchInternshipAsStudent.Any())">
                                                            @foreach (var suggestion in internshipTitleAutocompleteSuggestionsWhenSearchInternshipAsStudent)
                                                            {
                                                                <li class="list-group-item list-group-item-action" 
                                                                    @onclick="() => SelectInternshipTitleAutocompleteSuggestionWhenSearchInternshipAsStudent(suggestion)">
                                                                    @suggestion
                                                                </li>
                                                            }
                                                        </ul>
                                                    </div>

                                                    <div class="col-md-4">
                                                        <label for="internshipSearchType" class="form-label">Αναζήτηση με Τύπο</label>
                                                        <select id="internshipSearchType" class="form-control" @bind="companyinternshipSearchByType">
                                                            <option value="">-- Επιλέξτε Τύπο --</option>
                                                            <option value="Full-Time">Πλήρους Απασχόλησης</option>
                                                            <option value="Part-Time">Μερικής Απασχόλησης</option>
                                                            <option value="Part-Time_Full-Time">Πλήρους ή Μερικής Απασχόλησης</option>
                                                        </select>
                                                    </div>

                                                    <div class="col-md-4">
                                                        <label for="internshipSearchESPA" class="form-label">Αναζήτηση με Χρηματοδότηση</label>
                                                        <select id="internshipSearchESPA" class="form-control" @bind="companyinternshipSearchByESPA">
                                                            <option value="">-- Επιλέξτε Τύπο --</option>
                                                            <option value="ESPA-Funding">Μέσω ΕΣΠΑ</option>
                                                            <option value="Self-Funding">Ιδίου Φορέα</option>
                                                            <option value="ESPA-Funding_Self-Funding">Μέσω ΕΣΠΑ ή Ιδίου Φορέα</option>
                                                        </select>
                                                    </div>

                                                    <div class="col-md-4">
                                                        <label for="internshipSearchRegion" class="form-label">Αναζήτηση με Περιφέρεια</label>
                                                        <select id="internshipSearchRegion" class="form-control" @bind="companyinternshipSearchByRegion">
                                                            <option value="">-- Επιλέξτε Περιφέρεια --</option>
                                                            @foreach (var region in Regions)
                                                            {
                                                                <option value="@region">@region</option>
                                                            }
                                                        </select>
                                                    </div>
                                                </div>

                                                <div class="row mb-3">
                                                    <div class="col-md-4">
                                                        <label for="internshipSearchTown" class="form-label">Αναζήτηση με Δήμο</label>
                                                        <select id="internshipSearchTown" class="form-control" @bind="companyinternshipSearchByTown">
                                                            <option value="">-- Επιλέξτε Δήμο --</option>
                                                            @if (!string.IsNullOrEmpty(companyinternshipSearchByRegion) && RegionToTownsMap.ContainsKey(companyinternshipSearchByRegion))
                                                            {
                                                                @foreach (var town in RegionToTownsMap[companyinternshipSearchByRegion])
                                                                {
                                                                    <option value="@town">@town</option>
                                                                }
                                                            }
                                                        </select>
                                                    </div>

                                                    <div class="col-md-4">
                                                        <label for="searchDate" class="form-label">Ξεκινάει</label>
                                                        <input type="date" id="searchDate" class="form-control" @bind="selectedDateToSearchInternship" />
                                                    </div>

                                                    <div class="col-md-4">
                                                        <label for="finishEstimationDate" class="form-label">Ολοκλήρωση</label>
                                                        <input type="date" id="finishEstimationDate" class="form-control" @bind="finishEstimationDateToSearchInternship" />
                                                    </div>
                                                </div>

                                                <div class="row mb-3">
                                                    <!-- Areas Checkboxes -->
                                                    <div class="col-md-4">
                                                        <label for="internshipSearchArea" class="form-label"
                                                               @onclick="ToggleInternshipAreasVisibility"
                                                               style="cursor: pointer; display: flex; justify-content: space-between; align-items: center; width: 100%;">
                                                            <span>Θεματική Περιοχή</span>
                                                            <span class="badge bg-secondary">
                                                                @(isInternshipAreasVisible ? "Κρύψε" : "Δες")
                                                            </span>
                                                        </label>
                                                        <div id="internshipSearchArea" class="collapse @(isInternshipAreasVisible ? "show" : "")">
                                                            @foreach (var area in Areas)
                                                            {
                                                                <div class="form-check">
                                                                    <input class="form-check-input"
                                                                           type="checkbox"
                                                                           id="@area.AreaName"
                                                                           value="@area.AreaName"
                                                                           @onchange="e => OnAreaCheckboxChanged(e, area.AreaName)"
                                                                           checked="@selectedAreas.Contains(area.AreaName)" />
                                                                    <label class="form-check-label" for="@area.AreaName">
                                                                        @area.AreaName
                                                                    </label>
                                                                </div>
                                                            }
                                                        </div>
                                                    </div>
                                                    <br/>
                                                    <!-- Transport option checkbox -->
                                                    <div class="col-md-4">
                                                        <div class="mb-3">
                                                            <label for="internshipTransportOffer" class="form-check-label mb-0 me-2"><strong>Μεταφορικό Μέσο</strong></label>
                                                            <input type="checkbox" id="internshipTransportOffer" class="form-check-input" @bind="companyinternshipSearchByTransportOffer">
                                                        </div>
                                                    </div>

                                                    <!-- Empty column for alignment -->
                                                    <div class="col-md-4"></div>
                                                </div>
                                            



                                                @*ANAZITISI KAI CLEAR BUTTONS GIA STUDENT INTERNSHIPS*@

                                                <div class="mb-3">
                                                    <button class="modern-button" style="background-color: #007bff; color: white; display: inline-flex; align-items: center;" @onclick="SearchInternshipsAsStudent">
                                                        <i class="fa-brands fa-searchengin" style="margin-right: 8px;"></i>Αναζήτηση
                                                    </button>
                                                    <button class="modern-button" style="background-color: #FF7F7F; color: white; display: inline-flex; align-items: center;" @onclick="ClearSearchFieldsForInternshipsAsStudent">
                                                        <i class="fa-solid fa-broom" style="margin-right: 8px;"></i>Εκκαθάριση
                                                    </button>
                                                </div>
                                                <br/>
                                            
                                    
                                           <!-- DISPLAY INTERNSHIPS -->
                                            @if (showInternships)
                                            {
                                                <div class="col-md-2">
                                                    <label style="color: #4682b4; font-weight: bold; font-size: 15px; display: block;">Φιλτράρισμα ανά Κατηγορία</label>
                                                    <div class="input-group">
                                                        <select id="internshipFilter" class="form-control form-control-sm mt-2" @onchange="OnInternshipFilterChange" aria-label="Choose internship filter">
                                                            <option value="all">Όλες</option>
                                                            <option value="company">Εταιρείας</option>
                                                            <option value="professor">Καθηγητή</option>
                                                        </select>
                                                        <div class="input-group-append">
                                                            <span class="input-group-text">
                                                                <i class="fas fa-chevron-down"></i>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-2">
                                                <label style="color: #4682b4; font-weight: bold; font-size: 15px; display: block;">Αποτελέσματα ανά Σελίδα</label>
                                                <div class="input-group" style="max-width: 65px;"> <!-- Adjust width here -->
                                                    <select class="form-control form-control-sm mt-2" @onchange="OnPageSizeChange_SearchForInternshipsAsStudent" aria-label="Items per page">
                                                        @foreach (var option in pageSizeOptions_SearchForInternshipsAsStudent)
                                                        {
                                                            <option value="@option" selected="@(InternshipsPerPage == option)">@option</option>
                                                        }
                                                    </select>
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">
                                                            <i class="fas fa-chevron-down"></i>
                                                        </span>
                                                    </div>
                                                </div>
                                                </div>
                                                <br />
                                                <br />
                                                @if (publishedInternships != null && publishedInternships.Any())
                                                {
                                                    
                                                    <table class="table table-bordered">
                                                        <thead>
                                                            <tr>
                                                                <tr>
                                                                    <td colspan="9" style="padding: 0;">
                                                                        <div style="display: flex; justify-content: space-between; align-items: center; height: 24px; line-height: 24px; width: 100%;">
                                                                            <i class="fa-solid fa-magnifying-glass" style="font-size: 18px; color: #0d6efd;"></i>
                                                                            <label class="form-label" style="color: #0d6efd; font-weight: bold; font-size: 18px; margin: 0;">Διαθέσιμες Θέσεις Πρακτικής Άσκησης </label>
                                                                            <i class="fa-solid fa-magnifying-glass" style="font-size: 18px; color: #0d6efd;"></i>
                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                                    <th><i class="fa-solid fa-key fa-sm" style="color: #9D00FF;"></i> Κωδικός Θέσης</th>
                                                                    <th>
                                                                        <i class="fa-solid fa-user fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Εταιρεία <span style="color:red;">(E)</span> / Καθηγητής <span style="color:red;">(Κ)</span>
                                                                    </th>
                                                                    <th>
                                                                        <i class="fa-solid fa-font fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Τίτλος Θέσης
                                                                    </th>
                                                                    <th>
                                                                        <i class="fa-solid fa-tags fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Περιοχές Ενδιαφέροντος
                                                                    </th>
                                                                    <th>
                                                                        <i class="fa-solid fa-calendar-plus fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Ημερομηνία Ανάρτησης
                                                                    </th>
                                                                    <th>
                                                                        <i class="fa-solid fa-circle-info fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Λεπτομέρειες Θέσης
                                                                    </th>
                                                                    <th>
                                                                        <i class="fa-solid fa-hand fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Αίτηση
                                                                    </th>
                                                                </tr>
                                                        </thead>
                                                        <tbody>
                                                            @foreach (var internship in GetPaginatedInternships())
                                                            {
                                                                <tr>
                                                                    <td style="color: #9D00FF;">
                                                                        @if (!string.IsNullOrEmpty(internship.CompanyName))
                                                                        {
                                                                            @internship.RNGForCompanyInternship_HashedAsUniqueID
                                                                        }
                                                                        else if (!string.IsNullOrEmpty(internship.ProfessorName))
                                                                        {
                                                                            @internship.RNGForProfessorInternship_HashedAsUniqueID
                                                                        }
                                                                    </td>
                                                                    <td>
                                                                        @if (string.IsNullOrEmpty(internship.CompanyName))
                                                                        {
                                                                            <a href="javascript:void(0);" @onclick="() => ShowProfessorHyperlinkNameDetailsModalInStudentInternship(internship.ProfessorEmail)">
                                                                                @internship.ProfessorName @internship.ProfessorSurname <span style="color:red;">(Κ)</span>
                                                                            </a>
                                                                        }
                                                                        else
                                                                        {
                                                                            <a href="javascript:void(0);" @onclick="() => ShowCompanyHyperlinkNameDetailsModalInStudentInternship(internship.CompanyEmail)">
                                                                                @internship.CompanyName <span style="color:red;">(E)</span>
                                                                            </a>
                                                                        }
                                                                    </td>                                                                   
                                                                    <td>@internship.InternshipTitle</td>
                                                                    <td>
                                                                        @(string.IsNullOrEmpty(internship.InternshipAreas) 
                                                                            ? internship.ProfessorInternshipAreas 
                                                                            : internship.InternshipAreas)
                                                                    </td>
                                                                    <td>
                                                                        @if (!string.IsNullOrEmpty(internship.CompanyName))
                                                                        {
                                                                            @internship.CompanyInternshipUploadDate.ToString("yyyy-MM-dd HH:mm:ss")
                                                                        }
                                                                        else if (!string.IsNullOrEmpty(internship.ProfessorName))
                                                                        {
                                                                            @internship.ProfessorInternshipUploadDate.ToString("yyyy-MM-dd HH:mm:ss")
                                                                        }
                                                                    </td>


                                                                    @if (!string.IsNullOrEmpty(internship.CompanyName))
                                                                    {
                                                                        <td style="text-align: center;">
                                                                            <i class="fa fa-eye" style="color: #003366; cursor: pointer;" @onclick="() => ShowCompanyInternshipDetailsAsStudent(internship.RNGForCompanyInternship)"></i>
                                                                        </td>
                                                                    }
                                                                    else if (!string.IsNullOrEmpty(internship.ProfessorName))
                                                                    {
                                                                        
                                                                        <td style="text-align: center;">
                                                                            <i class="fa fa-eye" style="color: #003366; cursor: pointer;" @onclick="() => ShowProfessorInternshipDetailsAsStudent(internship.RNGForProfessorInternship)"></i>
                                                                        </td>
                                                                        
                                                                    }
                                                                    <td>
                                                                    @if (!string.IsNullOrEmpty(internship.CompanyName))
                                                                    {
                                                                        @if (internshipIdsApplied.Contains(internship.RNGForCompanyInternship))
                                                                        {
                                                                            <span class="text-success" style="font-weight: bold;">
                                                                                <i class="fas fa-check-circle"></i> Έχετε ήδη δείξει Ενδιαφέρον για αυτήν την Θέση Πρακτικής Άσκησης
                                                                            </span>
                                                                        }
                                                                        else
                                                                        {
                                                                            <button class="modern-button apply-button" 
                                                                                    @onclick="() => ConfirmApplyForInternship(ConvertToCompanyInternship(internship))">
                                                                                Αίτηση
                                                                            </button>
                                                                        }
                                                                    }
                                                                    else if (!string.IsNullOrEmpty(internship.ProfessorName))
                                                                    {
                                                                        @if (professorInternshipIdsApplied.Contains(internship.RNGForProfessorInternship))
                                                                        {
                                                                            <span class="text-success" style="font-weight: bold;">
                                                                                <i class="fas fa-check-circle"></i> Έχετε ήδη δείξει Ενδιαφέρον για αυτήν την Θέση Πρακτικής Άσκησης 
                                                                            </span>
                                                                        }
                                                                        else
                                                                        {
                                                                            <button class="modern-button apply-button" 
                                                                                    @onclick="() => ConfirmApplyForProfessorInternship(ConvertToProfessorInternship(internship))">
                                                                                Αίτηση
                                                                            </button>
                                                                        }
                                                                    }
                                                                    </td>
                                                                </tr>
                                                            }
                                                        </tbody>
                                                    </table>
                                                    <!-- Internships Pagination -->
                                                    <div class="d-flex justify-content-center align-items-center mt-3 gap-1">
                                                        <!-- First Page (<<) -->
                                                        <span class="pagination-item @(currentInternshipPage == 1 ? "disabled" : "")" 
                                                              @onclick="@(() => GoToFirstInternshipPage())">
                                                            &lt;&lt;
                                                        </span>
        
                                                        <!-- Previous Page (<) -->
                                                        <span class="pagination-item @(currentInternshipPage == 1 ? "disabled" : "")" 
                                                              @onclick="@(() => PreviousInternshipPage())">
                                                            &lt;
                                                        </span>
        
                                                        <!-- Page Numbers -->
                                                        @foreach (var pageNum in GetVisibleInternshipPages())
                                                        {
                                                            @if (pageNum == -1)
                                                            {
                                                                <span class="pagination-ellipsis">...</span>
                                                            }
                                                            else
                                                            {
                                                                <span class="pagination-item @(pageNum == currentInternshipPage ? "active" : "")" 
                                                                      @onclick="@(() => GoToInternshipPage(pageNum))">
                                                                    @pageNum
                                                                </span>
                                                            }
                                                        }
        
                                                        <!-- Next Page (>) -->
                                                        <span class="pagination-item @(currentInternshipPage == totalInternshipPages ? "disabled" : "")" 
                                                              @onclick="@(() => NextInternshipPage())">
                                                            &gt;
                                                        </span>
        
                                                        <!-- Last Page (>>) -->
                                                        <span class="pagination-item @(currentInternshipPage == totalInternshipPages ? "disabled" : "")" 
                                                              @onclick="@(() => GoToLastInternshipPage())">
                                                            &gt;&gt;
                                                        </span>
        
                                                        <!-- Page counter -->
                                                        <span class="ms-3">Σελίδα @currentInternshipPage από @totalInternshipPages</span>
                                                    </div>
                                                    <br />
                                                    <br />
                                                }
                                                else
                                                {
                                                    <div class="alert alert-warning" role="alert" id="noInternshipsFoundAlert">
                                                        <p>Δεν υπάρχουν θέσεις πρακτικής άσκησης με βάση τα κριτήρια της αναζήτησής σας.</p>
                                                    </div>
                                                }
                                                }

                                                <!-- Professor Hyperlink Name Details Modal - Student Search Internships  -->
                                                 @if (selectedProfessorDetailsForHyperlinkNameInInternshipAsStudent != null)
                                                 {
                                                    <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                                        <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h5 class="modal-title" style="color: #007BFF;">
                                                                        @selectedProfessorDetailsForHyperlinkNameInInternshipAsStudent.ProfName 
                                                                        @selectedProfessorDetailsForHyperlinkNameInInternshipAsStudent.ProfSurname
                                                                    </h5>
                                                                    <button type="button" class="btn-close" @onclick="CloseModalForProfessorNameHyperlinkDetailsInInternship" aria-label="Κλείσιμο"></button>
                                                                </div>
                                                                <div class="modal-body">
                                                                    <!-- Profile Picture -->
                                                                    <div class="form-group text-center">
                                                                        @if (selectedProfessorDetailsForHyperlinkNameInInternshipAsStudent.ProfImage != null)
                                                                        {
                                                                            var base64Image = Convert.ToBase64String(selectedProfessorDetailsForHyperlinkNameInInternshipAsStudent.ProfImage);
                                                                            <img src="data:image/jpeg;base64,@base64Image" alt="Φωτογραφία Προφίλ Καθηγητή" 
                                                                                 style="max-width: 150px; max-height: 150px; border-radius: 50%; object-fit: cover;" />
                                                                        }
                                                                        else
                                                                        {
                                                                            <p>Δεν υπάρχει φωτογραφία Προφίλ</p>
                                                                        }
                                                                    </div>

                                                                    <!-- Name and Surname -->
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Όνομα</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-user" style="color: #6c757d; margin-right: 8px;"></i>
                                                                            <span>@selectedProfessorDetailsForHyperlinkNameInInternshipAsStudent.ProfName</span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Επώνυμο</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-user" style="color: #6c757d; margin-right: 8px;"></i>
                                                                            <span>@selectedProfessorDetailsForHyperlinkNameInInternshipAsStudent.ProfSurname</span>
                                                                        </div>
                                                                    </div>

                                                                    <!-- University & Department -->
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Πανεπιστήμιο</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-university" style="color: #007bff; margin-right: 8px;"></i>
                                                                            <span>@selectedProfessorDetailsForHyperlinkNameInInternshipAsStudent.ProfUniversity</span>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Τμήμα</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fa-solid fa-building" style="color: #6c757d; margin-right: 8px;"></i>
                                                                            <span>@selectedProfessorDetailsForHyperlinkNameInInternshipAsStudent.ProfDepartment</span>
                                                                        </div>
                                                                    </div>

                                                                    <!-- Academic Rank & Contact Info -->
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Βαθμίδα ΔΕΠ</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fa-solid fa-user-tie" style="color: #6c757d; margin-right: 8px;"></i>
                                                                            <span>@selectedProfessorDetailsForHyperlinkNameInInternshipAsStudent.ProfVahmidaDEP</span>
                                                                        </div>
                                                                    </div>

                                                                    <!-- Professor Email -->
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Email</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-envelope" style="color: #007bff; margin-right: 8px;"></i>
                                                                            <span>@selectedProfessorDetailsForHyperlinkNameInInternshipAsStudent.ProfEmail</span>
                                                                        </div>
                                                                    </div>

                                                                    <!-- Professor Work and Personal Telephone -->
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Τηλέφωνο Εργασίας</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fa-solid fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                            <span>@selectedProfessorDetailsForHyperlinkNameInInternshipAsStudent.ProfWorkTelephone</span>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Προσωπικό Τηλέφωνο</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fa-solid fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                            @if (!string.IsNullOrEmpty(selectedProfessorDetailsForHyperlinkNameInInternshipAsStudent.ProfPersonalTelephone))
                                                                            {
                                                                                <span>@selectedProfessorDetailsForHyperlinkNameInInternshipAsStudent.ProfPersonalTelephone</span>
                                                                            }
                                                                            else
                                                                            {
                                                                                <span>Δεν Διατίθεται</span>
                                                                            }
                                                                        </div>
                                                                    </div>

                                                                    <!-- LinkedIn Profile -->
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">LinkedIn</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fab fa-linkedin" style="color: #0A66C2; margin-right: 8px;"></i>
                                                                            @if (!string.IsNullOrEmpty(selectedProfessorDetailsForHyperlinkNameInInternshipAsStudent.ProfLinkedInSite))
                                                                            {
                                                                                <a href="@selectedProfessorDetailsForHyperlinkNameInInternshipAsStudent.ProfLinkedInSite" target="_blank" class="flex-grow-1 text-truncate" style="text-decoration:none; color:#0A66C2;">
                                                                                    @selectedProfessorDetailsForHyperlinkNameInInternshipAsStudent.ProfLinkedInSite
                                                                                </a>
                                                                            }
                                                                            else
                                                                            {
                                                                                <span class="flex-grow-1 text-muted">Δεν Διατίθεται</span>
                                                                            }
                                                                        </div>
                                                                    </div>

                                                                    <!-- Personal Website -->
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Ιστότοπος</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fa-solid fa-globe" style="color: #007bff; margin-right: 8px;"></i>
                                                                            @if (!string.IsNullOrEmpty(selectedProfessorDetailsForHyperlinkNameInInternshipAsStudent.ProfPersonalWebsite))
                                                                            {
                                                                                <a href="@selectedProfessorDetailsForHyperlinkNameInInternshipAsStudent.ProfPersonalWebsite" target="_blank" class="flex-grow-1 text-truncate" style="text-decoration:none; color:#007bff;">
                                                                                    @selectedProfessorDetailsForHyperlinkNameInInternshipAsStudent.ProfPersonalWebsite
                                                                                </a>
                                                                            }
                                                                            else
                                                                            {
                                                                                <span class="flex-grow-1 text-muted">Δεν Διατίθεται</span>
                                                                            }
                                                                        </div>
                                                                    </div>

                                                                    <!-- Google Scholar -->
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Scholar Profile</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-graduation-cap" style="color: #4285F4; margin-right: 8px;"></i>
                                                                            @if (!string.IsNullOrEmpty(selectedProfessorDetailsForHyperlinkNameInInternshipAsStudent.ProfScholarProfile))
                                                                            {
                                                                                <a href="@selectedProfessorDetailsForHyperlinkNameInInternshipAsStudent.ProfScholarProfile" target="_blank" class="flex-grow-1 text-truncate" style="text-decoration:none; color:#4285F4;">
                                                                                    @selectedProfessorDetailsForHyperlinkNameInInternshipAsStudent.ProfScholarProfile
                                                                                </a>
                                                                            }
                                                                            else
                                                                            {
                                                                                <span class="flex-grow-1 text-muted">Δεν Διατίθεται</span>
                                                                            }
                                                                        </div>
                                                                    </div>

                                                                    <!-- Orchid -->
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">ORCID Profile</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-id-card" style="color: #A6CE39; margin-right: 8px;"></i>
                                                                            @if (!string.IsNullOrEmpty(selectedProfessorDetailsForHyperlinkNameInInternshipAsStudent.ProfOrchidProfile))
                                                                            {
                                                                                <a href="@selectedProfessorDetailsForHyperlinkNameInInternshipAsStudent.ProfOrchidProfile" target="_blank" class="flex-grow-1 text-truncate" style="text-decoration:none; color:#A6CE39;">
                                                                                    @selectedProfessorDetailsForHyperlinkNameInInternshipAsStudent.ProfOrchidProfile
                                                                                </a>
                                                                            }
                                                                            else
                                                                            {
                                                                                <span class="flex-grow-1 text-muted">Δεν Διατίθεται</span>
                                                                            }
                                                                        </div>
                                                                    </div>

                                                                    <!-- Expanded fields with textarea -->
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Πεδίο Εργασίας</label>
                                                                        <textarea class="form-control" rows="3" readonly>@selectedProfessorDetailsForHyperlinkNameInInternshipAsStudent.ProfGeneralFieldOfWork</textarea>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Τεχνικές Δεξιότητες/Ενδιαφέροντα</label>
                                                                        <textarea class="form-control" rows="3" readonly>@selectedProfessorDetailsForHyperlinkNameInInternshipAsStudent.ProfGeneralSkills</textarea>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Σύντομη Περιγραφή</label>
                                                                        <textarea class="form-control" rows="3" readonly>@selectedProfessorDetailsForHyperlinkNameInInternshipAsStudent.ProfPersonalDescription</textarea>
                                                                    </div>
                                                                    <br/>
                                                                    <div class="form-group">
                                                                        <label for="viewProfessorCVAttachment"><strong>Βιογραφικό:</strong></label>
                                                                        @if (selectedProfessorDetailsForHyperlinkNameInInternshipAsStudent.ProfCVAttachment != null)
                                                                        {
                                                                            <a href="data:application/pdf;base64,@Convert.ToBase64String(selectedProfessorDetailsForHyperlinkNameInInternshipAsStudent.ProfCVAttachment)" download="ProfCV.pdf" class="btn btn-primary">
                                                                                Λήψη Βιογραφικού
                                                                            </a>
                                                                        }
                                                                        else
                                                                        {
                                                                            <span style="color: darkred;"><strong>Δεν υπάρχει διαθέσιμο βιογραφικό</strong></span>
                                                                        }
                                                                    </div>
                                                                </div>
                                                                <div class="modal-footer">
                                                                    <button type="button" class="btn btn-secondary" @onclick="CloseModalForProfessorNameHyperlinkDetailsInInternship">
                                                                        Κλείσιμο
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                 }

                                                 <!-- Company Hyperlink Name Details Modal - Student Search Internships  -->
                                                @if (isCompanyDetailsModalOpenForHyperlinkNameAsStudentForCompanyInternship && selectedCompanyDetailsForHyperlinkNameInInternshipAsStudent != null)
                                                {
                                                   <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                                        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h5 class="modal-title" style="color: #4682B4;">
                                                                        @selectedCompanyDetailsForHyperlinkNameInInternshipAsStudent.CompanyName
                                                                    </h5>
                                                                    <button type="button" class="close" @onclick="CloseModalForCompanyNameHyperlinkDetailsInInternship">
                                                                        <span aria-hidden="true">&times;</span>
                                                                    </button>
                                                                </div>
                                                                <div class="modal-body">
                                                                    <div class="form-group text-center">
                                                                        @if (selectedCompanyDetailsForHyperlinkNameInInternshipAsStudent.CompanyLogo != null)
                                                                        {
                                                                            <img src="@ShowProfileImage(selectedCompanyDetailsForHyperlinkNameInInternshipAsStudent.CompanyLogo)" 
                                                                                 alt="Company Logo" 
                                                                                 class="rounded-circle img-fluid"
                                                                                 style="max-width: 150px; max-height: 150px; object-fit: cover;" />
                                                                        }
                                                                        else
                                                                        {
                                                                            <p>Δεν είναι διαθέσιμο</p>
                                                                        }
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Σύντομη Ονομασία</strong></label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-tag" style="color: #6c757d; margin-right: 8px;"></i>
                                                                            <input type="text" class="border-0 flex-grow-1" value="@selectedCompanyDetailsForHyperlinkNameInInternshipAsStudent.CompanyShortName" readonly />
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Τύπος Εταιρείας</strong></label>
                                                                        <input type="text" class="form-control" value="@selectedCompanyDetailsForHyperlinkNameInInternshipAsStudent.CompanyType" readonly />
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Email Εταιρείας</strong></label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-envelope" style="color: #6c757d; margin-right: 8px;"></i>
                                                                            <input type="text" class="border-0 flex-grow-1" value="@selectedCompanyDetailsForHyperlinkNameInInternshipAsStudent.CompanyEmail" readonly />
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Ιστοσελίδα Εταιρείας</strong></label>
                                                                        @if (!string.IsNullOrEmpty(selectedCompanyDetailsForHyperlinkNameInInternshipAsStudent.CompanyWebsite))
                                                                        {
                                                                            <div class="form-control d-flex align-items-center" style="height: auto; cursor: pointer; color: #007bff;"
                                                                                 onclick="window.open('@(selectedCompanyDetailsForHyperlinkNameInInternshipAsStudent.CompanyWebsite.StartsWith("http") ? selectedCompanyDetailsForHyperlinkNameInInternshipAsStudent.CompanyWebsite : "http://" + selectedCompanyDetailsForHyperlinkNameInInternshipAsStudent.CompanyWebsite)', '_blank')">
                                                                                <i class="fa-solid fa-globe" style="margin-right: 8px;"></i>
                                                                                <span class="flex-grow-1">@selectedCompanyDetailsForHyperlinkNameInInternshipAsStudent.CompanyWebsite</span>
                                                                            </div>
                                                                        }
                                                                        else
                                                                        {
                                                                            <input type="text" class="form-control" value="Δεν υπάρχει" readonly />
                                                                        }
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Ανακοινώσεις Εταιρείας</strong></label>
                                                                        @if (!string.IsNullOrEmpty(selectedCompanyDetailsForHyperlinkNameInInternshipAsStudent.CompanyWebsiteAnnouncements))
                                                                        {
                                                                            <div class="form-control d-flex align-items-center" style="height: auto; cursor: pointer; color: #007bff;"
                                                                                 onclick="window.open('@(selectedCompanyDetailsForHyperlinkNameInInternshipAsStudent.CompanyWebsiteAnnouncements.StartsWith("http") ? selectedCompanyDetailsForHyperlinkNameInInternshipAsStudent.CompanyWebsiteAnnouncements : "http://" + selectedCompanyDetailsForHyperlinkNameInInternshipAsStudent.CompanyWebsiteAnnouncements)', '_blank')">
                                                                                <i class="fa-solid fa-globe" style="margin-right: 8px;"></i>
                                                                                <span class="flex-grow-1">@selectedCompanyDetailsForHyperlinkNameInInternshipAsStudent.CompanyWebsiteAnnouncements</span>
                                                                            </div>
                                                                        }
                                                                        else
                                                                        {
                                                                            <input type="text" class="form-control" value="Δεν υπάρχει" readonly />
                                                                        }
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Θέσεις Εργασίας Εταιρείας</strong></label>
                                                                        @if (!string.IsNullOrEmpty(selectedCompanyDetailsForHyperlinkNameInInternshipAsStudent.CompanyWebsiteJobs))
                                                                        {
                                                                            <div class="form-control d-flex align-items-center" style="height: auto; cursor: pointer; color: #007bff;"
                                                                                 onclick="window.open('@(selectedCompanyDetailsForHyperlinkNameInInternshipAsStudent.CompanyWebsiteJobs.StartsWith("http") ? selectedCompanyDetailsForHyperlinkNameInInternshipAsStudent.CompanyWebsiteJobs : "http://" + selectedCompanyDetailsForHyperlinkNameInInternshipAsStudent.CompanyWebsiteJobs)', '_blank')">
                                                                                <i class="fa-solid fa-globe" style="margin-right: 8px;"></i>
                                                                                <span class="flex-grow-1">@selectedCompanyDetailsForHyperlinkNameInInternshipAsStudent.CompanyWebsiteJobs</span>
                                                                            </div>
                                                                        }
                                                                        else
                                                                        {
                                                                            <input type="text" class="form-control" value="Δεν υπάρχει" readonly />
                                                                        }
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Τηλέφωνο Εταιρείας</strong></label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fa-solid fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                            <input type="text" class="border-0 flex-grow-1" value="@selectedCompanyDetailsForHyperlinkNameInInternshipAsStudent.CompanyTelephone" readonly />
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Περιγραφή Εταιρείας</strong></label>
                                                                        <textarea class="form-control" rows="4" readonly>@selectedCompanyDetailsForHyperlinkNameInInternshipAsStudent.CompanyDescription</textarea>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Δραστηριότητα Εταιρείας</strong></label>
                                                                        <input type="text" class="form-control" value="@selectedCompanyDetailsForHyperlinkNameInInternshipAsStudent.CompanyActivity" readonly />
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Περιοχές Ενδιαφέροντος</strong></label>
                                                                        <textarea class="form-control" readonly>@selectedCompanyDetailsForHyperlinkNameInInternshipAsStudent.CompanyAreas</textarea>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Χώρα</strong></label>
                                                                        <input type="text" class="form-control" value="@selectedCompanyDetailsForHyperlinkNameInInternshipAsStudent.CompanyCountry" readonly />
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Περιφέρεια</strong></label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fa-solid fa-map" style="color: #6c757d; margin-right: 8px;"></i>
                                                                            <input type="text" class="border-0 flex-grow-1" value="@selectedCompanyDetailsForHyperlinkNameInInternshipAsStudent.CompanyRegions" readonly />
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Πόλη</strong></label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fa-solid fa-city" style="color: #6c757d; margin-right: 8px;"></i>
                                                                            <input type="text" class="border-0 flex-grow-1" value="@selectedCompanyDetailsForHyperlinkNameInInternshipAsStudent.CompanyTown" readonly />
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Διεύθυνση</strong></label>
                                                                        <div class="form-control d-flex align-items-center mt-1" style="height: auto;">
                                                                            <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                            <a href="https://www.google.com/maps/search/@selectedCompanyDetailsForHyperlinkNameInInternshipAsStudent.CompanyLocation"
                                                                               target="_blank"
                                                                               style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                @selectedCompanyDetailsForHyperlinkNameInInternshipAsStudent.CompanyLocation
                                                                            </a>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Ταχυδρομικός Κώδικας</strong></label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fa-solid fa-envelope-open-text" style="color: #6c757d; margin-right: 8px;"></i>
                                                                            <input type="text" class="border-0 flex-grow-1" value="@selectedCompanyDetailsForHyperlinkNameInInternshipAsStudent.CompanyPC" readonly />
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Email Υπεύθυνου Ανθρώπινου Δυναμικού</strong></label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fa-solid fa-envelope" style="color: #007bff; margin-right: 8px;"></i>
                                                                            <input type="text" class="border-0 flex-grow-1" value="@selectedCompanyDetailsForHyperlinkNameInInternshipAsStudent.CompanyHREmail" readonly />
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Τηλέφωνο Υπεύθυνου Ανθρώπινου Δυναμικού</strong></label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fa-solid fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                            <input type="text" class="border-0 flex-grow-1" value="@selectedCompanyDetailsForHyperlinkNameInInternshipAsStudent.CompanyHRTelephone" readonly />
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="modal-footer">
                                                                    <button type="button" class="btn btn-secondary" @onclick="CloseModalForCompanyNameHyperlinkDetailsInInternship">
                                                                        Κλείσιμο
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                }


                                                
                                                @if (isModalVisibleForInternshipsAsStudent && selectedCompanyInternshipDetails != null)
                                                {
                                                    <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0,0,0,0.5);">
                                                        <div class="modal-dialog modal-dialog-centered" role="document">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h5 class="modal-title" style="color: #4682B4;">@selectedCompanyInternshipDetails?.CompanyInternshipTitle</h5>
                                                                    <button type="button" class="close" @onclick="CloseModalForInternships">
                                                                        <span aria-hidden="true">&times;</span>
                                                                    </button>
                                                                </div>
                                                                <div class="modal-body">
                
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Περιγραφή</label>
                                                                        <textarea class="form-control" readonly>@selectedCompanyInternshipDetails.CompanyInternshipDescription</textarea>
                                                                    </div>
                
                                                                    <div class="form-group">
                                                                        <label for="viewType"><strong>Τύπος</strong></label>
                                                                        <input type="text" id="viewType" class="form-control" 
                                                                               value="@(selectedCompanyInternshipDetails.CompanyInternshipType == "Full-Time" ? "Πλήρους Απασχόλησης" :
                                                                                      selectedCompanyInternshipDetails.CompanyInternshipType == "Part-Time" ? "Μερικής Απασχόλησης" :
                                                                                      selectedCompanyInternshipDetails.CompanyInternshipType == "Part-Time_Full-Time" ? "Πλήρους ή Μερικής Απασχόλησης" :
                                                                                      selectedCompanyInternshipDetails.CompanyInternshipType)" 
                                                                               readonly />
                                                                    </div>
                
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Χρηματοδότηση</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-hand-holding-dollar" style="color: #28a745; margin-right: 8px;"></i>
                                                                            <span>
                                                                                @(selectedCompanyInternshipDetails.CompanyInternshipESPA == "ESPA-Funding" ? "Μέσω ΕΣΠΑ" :
                                                                                  selectedCompanyInternshipDetails.CompanyInternshipESPA == "Same-Funding" ? "Ιδίου Φορέα" :
                                                                                  selectedCompanyInternshipDetails.CompanyInternshipESPA == "Espa-Funding_Same-Funding" ? "Μέσω ΕΣΠΑ ή Ιδίου Φορέα" :
                                                                                  selectedCompanyInternshipDetails.CompanyInternshipESPA)
                                                                            </span>
                                                                        </div>
                                                                    </div>
                
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Εταιρία</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-building" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                            <span>@selectedCompanyInternshipDetails.Company.CompanyName</span>
                                                                        </div>
                                                                    </div>
                
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Email Επικοινωνίας</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-envelope" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                            <span>@selectedCompanyInternshipDetails.Company.CompanyEmail</span>
                                                                        </div>
                                                                    </div>
                
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Τηλέφωνο Επικοινωνίας</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                            <span>@selectedCompanyInternshipDetails.CompanyInternshipContactTelephonePerson</span>
                                                                        </div>
                                                                    </div>
                
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Περιφέρεια</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-map-marked-alt" style="color: #6c757d; margin-right: 8px;"></i>
                                                                            <span>@selectedCompanyInternshipDetails.CompanyInternshipPerifereiaLocation</span>
                                                                        </div>
                                                                    </div>
                
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Δήμος</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-city" style="color: #6c757d; margin-right: 8px;"></i>
                                                                            <span>@selectedCompanyInternshipDetails.CompanyInternshipDimosLocation</span>
                                                                        </div>
                                                                    </div>
                
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Ταχ. Κώδικας</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-envelope-open-text" style="color: #6c757d; margin-right: 8px;"></i>
                                                                            <span>@selectedCompanyInternshipDetails.CompanyInternshipPostalCodeLocation</span>
                                                                        </div>
                                                                    </div>
                
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Προσφορά Μεταφορικού Μέσου</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto; 
                                                                             @(selectedCompanyInternshipDetails.CompanyInternshipTransportOffer ? "color: #28a745;" : "color: #dc3545;")">
                                                                            <i class="fas fa-car" style="margin-right: 8px;"></i>
                                                                            <span>@(selectedCompanyInternshipDetails.CompanyInternshipTransportOffer ? "Ναι" : "Όχι")</span>
                                                                        </div>
                                                                    </div>
                
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Τομείς</label>
                                                                        <textarea class="form-control" readonly>@selectedCompanyInternshipDetails.CompanyInternshipAreas</textarea>
                                                                    </div>
                
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Ξεκινάει Από</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="far fa-calendar-alt" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                            <span>@selectedCompanyInternshipDetails.CompanyInternshipActivePeriod.ToString("yyyy-MM-dd")</span>
                                                                        </div>
                                                                    </div>
                
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Εκτιμώμενη Ημερομηνία Ολοκλήρωσης</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="far fa-calendar-alt" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                            <span>@selectedCompanyInternshipDetails.CompanyInternshipFinishEstimation.ToString("yyyy-MM-dd")</span>
                                                                        </div>
                                                                    </div>
                
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold; color: #87CEEB;">Επιβλέπων Καθηγητής</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-user-tie" style="color: #87CEEB; margin-right: 8px;"></i>
                                                                            <span>@selectedCompanyInternshipDetails.CompanyInternshipEKPASupervisor</span>
                                                                        </div>
                                                                    </div>
                
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Κατάσταση</label>
                                                                        <select class="form-control" disabled>
                                                                            <option value="Δημοσιευμένη" selected="@(selectedCompanyInternshipDetails.CompanyUploadedInternshipStatus == "Δημοσιευμένη")">Δημοσιευμένη</option>
                                                                            <option value="Μη Δημοσιευμένη" selected="@(selectedCompanyInternshipDetails.CompanyUploadedInternshipStatus == "Μη Δημοσιευμένη")">Μη Δημοσιευμένη</option>
                                                                            <option value="Αποσυρμένη" selected="@(selectedCompanyInternshipDetails.CompanyUploadedInternshipStatus == "Αποσυρμένη")">Αποσυρμένη</option>
                                                                        </select>
                                                                    </div>
                
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Συννημένο Αρχείο</label>
                                                                        <div>
                                                                            @if (selectedCompanyInternshipDetails.CompanyInternshipAttachment != null)
                                                                            {
                                                                                <button class="btn btn-primary btn-sm" @onclick="() => DownloadInternshipAttachmentAsStudent(selectedCompanyInternshipDetails.Id)" title="Λήψη Αρχείου">
                                                                                    <i class="fas fa-download"></i> Λήψη
                                                                                </button>
                                                                            }
                                                                            else
                                                                            {
                                                                                <span>Δεν υπάρχει αρχείο</span>
                                                                            }
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="modal-footer">
                                                                    <button type="button" class="btn btn-secondary" @onclick="CloseModalForInternships">Κλείσιμο</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                }

                                                                                       
                                           }
                                        </div>
                                                <!-- SHOW COMPANY EVENTS AS STUDENT -->
                                                <div class="tab-pane fade" id="companyeventsasstudent" role="tabpanel" aria-labelledby="companyeventsasstudent-tab">
                                                    <div class="mb-3 row-dark-gray">
                                                        <div class="calendar-section">
                                                            <strong> - Ημερολόγιο Εκδηλώσεων - </strong>
                                                            <div>
                                                                <!-- CALENDAR component -->
                                                                <div class="calendar">
                                                                    <div class="calendar-header">
                                                                        <h2>@currentMonth.ToString("MMMM yyyy", CultureInfo.GetCultureInfo("el-GR"))</h2>
                                                                    </div>
                                                                    <div class="calendar-grid">
                                                                        <!-- Days of the week header in Greek -->
                                                                        <div class="day-header">Δ</div>
                                                                        <div class="day-header">Τ</div>
                                                                        <div class="day-header">Τ</div>
                                                                        <div class="day-header">Π</div>
                                                                        <div class="day-header">Π</div>
                                                                        <div class="day-header">Σ</div>
                                                                        <div class="day-header">Κ</div>

                                                                        @for (int i = 0; i < adjustedFirstDayOfMonth; i++)
                                                                        {
                                                                            <div class="day-cell empty-cell"></div>
                                                                        }

                                                                        @for (int i = 1; i <= daysInCurrentMonth; i++)
                                                                        {
                                                                            DateTime dayDate = new DateTime(currentMonth.Year, currentMonth.Month, i);
            
                                                                            // Filter events by status "Δημοσιευμένη"
                                                                            var companyEvents = eventsForDate.ContainsKey(i) 
                                                                                ? eventsForDate[i].Where(e => e.CompanyEventStatus == "Δημοσιευμένη").ToList()
                                                                                : new List<CompanyEvent>();
                
                                                                            var professorEvents = eventsForDateForProfessors.ContainsKey(i)
                                                                                ? eventsForDateForProfessors[i].Where(e => e.ProfessorEventStatus == "Δημοσιευμένη").ToList()
                                                                                : new List<ProfessorEvent>();
                
                                                                            bool hasPublishedEvent = companyEvents.Any() || professorEvents.Any();

                                                                            string dayCellClass = "day-cell";

                                                                            // Check if this day is today's date
                                                                            if (dayDate.Date == DateTime.Today.Date)
                                                                            {
                                                                                dayCellClass += " today";
                                                                            }

                                                                            // Check if this day should be highlighted
                                                                            if (i == highlightedDay)
                                                                            {
                                                                                dayCellClass += " highlighted";
                                                                            }

                                                                            // Add event-day class if this day has published events
                                                                            if (hasPublishedEvent)
                                                                            {
                                                                                dayCellClass += " event-day";
                                                                            }

                                                                            <div class="@dayCellClass" @onclick="() => OnDateClicked(dayDate)">
                                                                                <span>@i</span>
                                                                                @if (hasPublishedEvent)
                                                                                {
                                                                                    <div class="event-indicators">
                                                                                        @if (companyEvents.Any())
                                                                                        {
                                                                                            <span class="company-indicator">● (@companyEvents.Count)</span>
                                                                                        }
                                                                                        @if (professorEvents.Any())
                                                                                        {
                                                                                            <span class="professor-indicator">● (@professorEvents.Count)</span>
                                                                                        }
                                                                                    </div>
                                                                                }
                                                                            </div>
                                                                        }
                                                                    </div>

                                                                    <!-- Pagination buttons to navigate between months -->
                                                                    <div class="pagination">
                                                                        <button @onclick="ShowPreviousMonth" class="btn btn-small">◀</button>
                                                                        <button @onclick="ShowNextMonth" class="btn btn-small">▶</button>
                                                                    </div>
                    
                                                                    <!-- Legend section -->
                                                                    <div class="calendar-legend">
                                                                        <div class="legend-item">
                                                                            <span class="legend-color today-legend"></span>
                                                                            <span class="legend-text">Σημερινή Ημερομηνία</span>
                                                                        </div>
                                                                        <div class="legend-item">
                                                                            <span class="legend-color event-day-legend"></span>
                                                                            <span class="legend-text">Ημέρα Εκδήλωσης</span>
                                                                        </div>
                                                                        <div class="legend-item">
                                                                            <span class="company-indicator">●</span>
                                                                            <span class="legend-text">(Εκδηλώσεις Εταιρειών)</span>
                                                                        </div>
                                                                        <div class="legend-item">
                                                                            <span class="professor-indicator">●</span>
                                                                            <span class="legend-text">(Εκδηλώσεις Καθηγητών)</span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>


                                                            @if (isModalVisibleToShowEventsOnCalendarForEachClickedDay)
                                                            {
                                                                <div class="row mb-3">
                                                                    <div class="col-md-12">
                                                                        <div class="modal custom-modal"> <!-- Added custom class here -->
                                                                            <div class="modal-content">
                                                                                <h3><strong>Λεπτομέρειες Εκδήλωσης/σεων</strong>: <span style="color: #00008B;">@selectedDate?.ToString("MMMM dd yyyy")</span></h3>
                                                                                <!-- Filter Section -->
                                                                                @if (selectedEvent == null)
                                                                                {
                                                                                    <div class="form-group">
                                                                                        <label style="font-weight: bold;">Φιλτράρισμα Εκδηλώσεων</label>
                                                                                        <div class="input-group custom-width">
                                                                                            <select class=".form-control-calendarEventModal" @bind="selectedEventFilter">
                                                                                                <option value="All">Όλες οι Εκδηλώσεις</option>
                                                                                                <option value="Company">Εκδηλώσεις Εταιρειών</option>
                                                                                                <option value="Professor">Εκδηλώσεις Καθηγητών</option>
                                                                                            </select>
                                                                                            <div class="input-group-append">
                                                                                                <span class="input-group-text"></span>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <br/>
                                                                                    @if (selectedEvent == null)
                                                                                    {
                                                                                        @if (filteredCompanyEvents.Count == 0 && filteredProfessorEvents.Count == 0)
                                                                                        {
                                                                                            <p>
                                                                                                "Δεν βρέθηκε καμία Εκδήλωση για αυτήν τη μέρα"
                                                                                            </p>
                                                                                            <p>
                                                                                                Η σημερινή ημερομηνία είναι: <strong>@DateTime.Today.ToString("dd MMMM , yyyy", new System.Globalization.CultureInfo("el-GR"))</strong>
                                                                                            </p>
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <ul class="list-group">
                                                                                                @if (selectedEventFilter == "All" || selectedEventFilter == "Company" || selectedEventFilter == "Professor")
                                                                                                {
                                                                                                    <table class="table table-responsive" style="width: 100%; table-layout: auto;">
                                                                                                        <thead>
                                                                                                            <tr>
                                                                                                                <th class="text-center" style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">Διοργανωτής</th>
                                                                                                                <th class="text-center" style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">Ημερομηνία</th>
                                                                                                                <th class="text-center" style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">Ώρα</th>                                                                                                          
                                                                                                                <th class="text-center" style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">Τίτλος</th>                                                                                                 
                                                                                                                <th class="text-center" style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">Λεπτομέρειες</th>
                                                                                                            </tr>
                                                                                                        </thead>
                                                                                                        <tbody>
                                                                                                            @if (selectedEventFilter == "All" || selectedEventFilter == "Company")
                                                                                                            {
                                                                                                                @foreach (var companyEvent in filteredCompanyEvents)
                                                                                                                {
                                                                                                                    <tr style="cursor:pointer; text-align: center;">
                                                                                                                        <td style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">@companyEvent.Company.CompanyName</td>
                                                                                                                        <td style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">@companyEvent.CompanyEventActiveDate.Date.ToString("dd MMMM", new System.Globalization.CultureInfo("el-GR"))</td>
                                                                                                                        <td style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">@companyEvent.CompanyEventTime</td>
                                                                                                                        <td style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">@companyEvent.CompanyEventTitle</td>
                                                                                                                        <td style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">
                                                                                                                            <i class="fas fa-eye" @onclick="() => ShowEventDetails(companyEvent)" style="cursor: pointer; font-size: 20px;"></i>
                                                                                                                        </td>

                                                                                                                    </tr>
                                                                                                                }
                                                                                                            }
                                                                                                            @if (selectedEventFilter == "All" || selectedEventFilter == "Professor")
                                                                                                            {
                                                                                                                @foreach (var professorEvent in filteredProfessorEvents)
                                                                                                                {
                                                                                                                    <tr style="cursor:pointer; text-align: center;">
                                                                                                                        <td style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">
                                                                                                                            @professorEvent.Professor?.ProfName @professorEvent.Professor?.ProfSurname
                                                                                                                        </td>
                                                                                                                        <td style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">@professorEvent.ProfessorEventActiveDate.Date.ToString("dd MMMM", new System.Globalization.CultureInfo("el-GR"))</td>
                                                                                                                        <td style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">@professorEvent.ProfessorEventTime</td>
                                                                                                                        <td style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">@professorEvent.ProfessorEventTitle</td>
                                                                                                                        <td style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">
                                                                                                                            <i class="fas fa-eye" @onclick="() => ShowEventDetails(professorEvent)" style="cursor: pointer; font-size: 20px;"></i>
                                                                                                                        </td>

                                                                                                                    </tr>
                                                                                                                }
                                                                                                            }
                                                                                                        </tbody>
                                                                                                    </table>
                                                                                                }
                                                                                            </ul>

                                                                                        }
                                                                                    }

                                                                                    <button class="btn btn-danger mt-3" @onclick="CloseModalForCompanyAndProfessorEventTitles">Κλείσιμο</button>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <!-- Display full details of the selected event -->
                                                                                    @if (selectedEvent is CompanyEvent companyEventDetails)
                                                                                    {
                                                                                        <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                                                                            <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                                                                <div class="modal-content">
                                                                                                    <div class="modal-header">
                                                                                                        <h5 class="modal-title" style="color: #4682B4;">@companyEventDetails.CompanyEventTitle</h5>
                                                                                                        <button type="button" class="close" @onclick="CloseEventDetails">
                                                                                                            <span aria-hidden="true">&times;</span>
                                                                                                        </button>
                                                                                                    </div>
                                                                                                    <div class="modal-body">
                                                                                                        @if (companyEventDetails.Company?.CompanyLogo != null)
                                                                                                        {
                                                                                                            <div class="form-group text-center">
                                                                                                                <img src="data:image/png;base64,@Convert.ToBase64String(companyEventDetails.Company?.CompanyLogo)" 
                                                                                                                     class="rounded-circle img-fluid" 
                                                                                                                     style="width: 150px; height: 150px; object-fit: cover;" 
                                                                                                                     alt="Company Logo" />
                                                                                                            </div>
                                                                                                        }

                                                                                                        <div class="list-group">
                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Όνομα Εταιρίας</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                    <i class="fas fa-industry" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                                                    <span>@companyEventDetails.Company?.CompanyName</span>
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Τίτλος Εκδήλωσης</label>
                                                                                                                <input type="text" class="form-control" value="@companyEventDetails.CompanyEventTitle" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Περιγραφή</label>
                                                                                                                <textarea class="form-control" rows="3" readonly>@companyEventDetails.CompanyEventDescription</textarea>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Ημερομηνία</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                    <i class="far fa-calendar-alt" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                                                    <span>@companyEventDetails.CompanyEventActiveDate.ToString("yyyy-MM-dd", new System.Globalization.CultureInfo("el-GR"))</span>
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Ώρα Εκδήλωσης</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                    <i class="far fa-clock" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                                                    <span>@companyEventDetails.CompanyEventTime.ToString(@"hh\:mm")</span>
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Τύπος Εκδήλωσης</label>
                                                                                                                <input type="text" class="form-control" value="@companyEventDetails.CompanyEventType" readonly />
                                                                                                            </div>

                                                                                                            @if (companyEventDetails.CompanyEventOtherOrganizerToBeVisible)
                                                                                                            {
                                                                                                                <div class="form-group">
                                                                                                                    <label style="font-weight: bold;">Άλλος Διοργανωτής</label>
                                                                                                                    <input type="text" class="form-control" value="@companyEventDetails.CompanyEventOtherOrganizer" readonly />
                                                                                                                </div>
                                                                                                            }

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Περιοχές Ενδιαφέροντος</label>
                                                                                                                <textarea class="form-control" rows="3" readonly>@companyEventDetails.CompanyEventAreasOfInterest</textarea>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Κατάσταση Εκδήλωσης</label>
                                                                                                                <input type="text" class="form-control" value="@companyEventDetails.CompanyEventStatus" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Υπεύθυνος Εκδήλωσης</label>
                                                                                                                <input type="text" class="form-control" value="@companyEventDetails.CompanyEventResponsiblePerson" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Email Υπεύθυνου</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                                                    <i class="fas fa-envelope" style="color: #4682B4; margin-right: 8px;"></i>
                                                                                                                    @if (!string.IsNullOrEmpty(companyEventDetails.CompanyEventResponsiblePersonEmail))
                                                                                                                    {
                                                                                                                        <a href="mailto:@companyEventDetails.CompanyEventResponsiblePersonEmail" 
                                                                                                                           style="color: #007bff; text-decoration: underline; word-break: break-all;">
                                                                                                                            @companyEventDetails.CompanyEventResponsiblePersonEmail
                                                                                                                        </a>
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        <span style="color: #6c757d;">Δεν υπάρχει email</span>
                                                                                                                    }
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Τηλέφωνο Υπεύθυνου</label>
                                                                                                                <input type="text" class="form-control" value="@companyEventDetails.CompanyEventResponsiblePersonTelephone" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Τμήμα Εταιρίας</label>
                                                                                                                <input type="text" class="form-control" value="@companyEventDetails.CompanyEventCompanyDepartment" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Διεύθυνση Email Εταιρίας</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                                                    <i class="fas fa-envelope" style="color: #4682B4; margin-right: 8px;"></i>
                                                                                                                    @if (!string.IsNullOrEmpty(companyEventDetails.CompanyEmailUsedToUploadEvent))
                                                                                                                    {
                                                                                                                        <a href="mailto:@companyEventDetails.CompanyEmailUsedToUploadEvent" 
                                                                                                                           style="color: #007bff; text-decoration: underline; word-break: break-all;">
                                                                                                                            @companyEventDetails.CompanyEmailUsedToUploadEvent
                                                                                                                        </a>
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        <span style="color: #6c757d;">Δεν υπάρχει email</span>
                                                                                                                    }
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Ημερομηνία Ανάρτησης Εκδήλωσης</label>
                                                                                                                <input type="text" class="form-control" 
                                                                                                                       value="@companyEventDetails.CompanyEventUploadedDate.ToString("yyyy-MM-dd", new System.Globalization.CultureInfo("el-GR"))" 
                                                                                                                       readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Περιοχή Εκδήλωσης</label>
                                                                                                                <input type="text" class="form-control" value="@companyEventDetails.CompanyEventPerifereiaLocation" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Δήμος Εκδήλωσης</label>
                                                                                                                <input type="text" class="form-control" value="@companyEventDetails.CompanyEventDimosLocation" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Τοποθεσία Εκδήλωσης</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                                                    <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                                                    @if (!string.IsNullOrEmpty(companyEventDetails.CompanyEventPlaceLocation))
                                                                                                                    {
                                                                                                                        <a href="https://www.google.com/maps/search/?api=1&query=@Uri.EscapeDataString(companyEventDetails.CompanyEventPlaceLocation)" 
                                                                                                                           target="_blank"
                                                                                                                           style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                                            @companyEventDetails.CompanyEventPlaceLocation
                                                                                                                        </a>
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        <span style="color: #6c757d;">Δεν έχει οριστεί τοποθεσία Εκδήλωσης ακόμη..</span>
                                                                                                                    }
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Ταχυδρομικός Κώδικας Εκδήλωσης</label>
                                                                                                                <input type="text" class="form-control" value="@companyEventDetails.CompanyEventPostalCodeLocation" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Μεταφορά Στον Χώρο Εκδήλωσης</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto; 
                                                                                                                     @(companyEventDetails.CompanyEventOfferingTransportToEventLocation.GetValueOrDefault() ? "color: #28a745;" : "color: #dc3545;")">
                                                                                                                    <i class="fas fa-car" style="margin-right: 8px;"></i>
                                                                                                                    <span>@(companyEventDetails.CompanyEventOfferingTransportToEventLocation.GetValueOrDefault() ? "Ναι" : "Όχι")</span>
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            @if (companyEventDetails.CompanyEventOfferingTransportToEventLocation ?? false)
                                                                                                            {
                                                                                                                <div class="form-group">
                                                                                                                    <label style="font-weight: bold;">Σημεία Εκκίνησης για Μεταφορά</label>
                                                                                                                    @if (!string.IsNullOrWhiteSpace(companyEventDetails.CompanyEventStartingPointLocationToTransportPeopleToEvent1))
                                                                                                                    {
                                                                                                                        <div class="form-group">
                                                                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                                <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                                                                <a href="https://www.google.com/maps/search/@Uri.EscapeDataString(companyEventDetails.CompanyEventStartingPointLocationToTransportPeopleToEvent1)"
                                                                                                                                   target="_blank"
                                                                                                                                   style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                                                    @companyEventDetails.CompanyEventStartingPointLocationToTransportPeopleToEvent1
                                                                                                                                </a>
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                    }
                                                                                                                    @if (!string.IsNullOrWhiteSpace(companyEventDetails.CompanyEventStartingPointLocationToTransportPeopleToEvent2))
                                                                                                                    {
                                                                                                                        <div class="form-group">
                                                                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                                <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                                                                <a href="https://www.google.com/maps/search/@Uri.EscapeDataString(companyEventDetails.CompanyEventStartingPointLocationToTransportPeopleToEvent2)"
                                                                                                                                   target="_blank"
                                                                                                                                   style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                                                    @companyEventDetails.CompanyEventStartingPointLocationToTransportPeopleToEvent2
                                                                                                                                </a>
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                    }
                                                                                                                    @if (!string.IsNullOrWhiteSpace(companyEventDetails.CompanyEventStartingPointLocationToTransportPeopleToEvent3))
                                                                                                                    {
                                                                                                                        <div class="form-group">
                                                                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                                <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                                                                <a href="https://www.google.com/maps/search/@Uri.EscapeDataString(companyEventDetails.CompanyEventStartingPointLocationToTransportPeopleToEvent3)"
                                                                                                                                   target="_blank"
                                                                                                                                   style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                                                    @companyEventDetails.CompanyEventStartingPointLocationToTransportPeopleToEvent3
                                                                                                                                </a>
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                    }
                                                                                                                </div>
                                                                                                            }
                                                                                                            <button class="btn btn-primary mt-3" @onclick="CloseEventDetails">Πίσω</button>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    }
                                                                                    else if (selectedEvent is ProfessorEvent professorEventDetails)
                                                                                    {
                                                                                        <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                                                                            <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                                                                <div class="modal-content">
                                                                                                    <div class="modal-header">
                                                                                                        <h5 class="modal-title" style="color: #4682B4;">@professorEventDetails.ProfessorEventTitle</h5>
                                                                                                        <button type="button" class="close" @onclick="CloseEventDetails">
                                                                                                            <span aria-hidden="true">&times;</span>
                                                                                                        </button>
                                                                                                    </div>
                                                                                                    <div class="modal-body">
                                                                                                        @if (professorEventDetails.Professor.ProfImage != null)
                                                                                                        {
                                                                                                            <div class="form-group text-center">
                                                                                                                <img src="data:image/png;base64,@Convert.ToBase64String(professorEventDetails.Professor.ProfImage)" 
                                                                                                                     class="rounded-circle img-fluid" 
                                                                                                                     style="width: 150px; height: 150px; object-fit: cover;" 
                                                                                                                     alt="Professor Image" />
                                                                                                            </div>
                                                                                                        }

                                                                                                        <div class="list-group">
                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Ονοματεπώνυμο Διοργανωτή</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                    <i class="fas fa-user" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                                                    <span>@professorEventDetails.Professor.ProfName @professorEventDetails.Professor.ProfSurname </span>
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Τίτλος Εκδήλωσης</label>
                                                                                                                <input type="text" class="form-control" value="@professorEventDetails.ProfessorEventTitle" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Περιγραφή</label>
                                                                                                                <textarea class="form-control" rows="3" readonly>@professorEventDetails.ProfessorEventDescription</textarea>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Ημερομηνία</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                    <i class="far fa-calendar-alt" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                                                    <span>@professorEventDetails.ProfessorEventActiveDate.ToString("yyyy-MM-dd")</span>
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Ώρα Εκδήλωσης</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                    <i class="far fa-clock" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                                                    <span>@professorEventDetails.ProfessorEventTimeOnly.ToString("HH:mm")</span>
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Τύπος Εκδήλωσης</label>
                                                                                                                <input type="text" class="form-control" value="@professorEventDetails.ProfessorEventType" readonly />
                                                                                                            </div>

                                                                                                            @if (professorEventDetails.ProfessorEventOtherOrganizerToBeVisible)
                                                                                                            {
                                                                                                                <div class="form-group">
                                                                                                                    <label style="font-weight: bold;">Άλλος Διοργανωτής</label>
                                                                                                                    <input type="text" class="form-control" value="@professorEventDetails.ProfessorEventOtherOrganizer" readonly />
                                                                                                                </div>
                                                                                                            }

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Περιοχές Ενδιαφέροντος</label>
                                                                                                                <textarea class="form-control" rows="3" readonly>@professorEventDetails.ProfessorEventAreasOfInterest</textarea>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Κατάσταση Εκδήλωσης</label>
                                                                                                                <input type="text" class="form-control" value="@professorEventDetails.ProfessorEventStatus" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Ονοματεπώνυμο Υπεύθυνου</label>
                                                                                                                <input type="text" class="form-control" value="@professorEventDetails.ProfessorEventResponsiblePerson" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Email Υπεύθυνου</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                                                    <i class="fas fa-envelope" style="color: #4682B4; margin-right: 8px;"></i>
                                                                                                                    @if (!string.IsNullOrEmpty(professorEventDetails.ProfessorEventResponsiblePersonEmail))
                                                                                                                    {
                                                                                                                        <a href="mailto:@professorEventDetails.ProfessorEventResponsiblePersonEmail" 
                                                                                                                           style="color: #007bff; text-decoration: underline; word-break: break-all;">
                                                                                                                            @professorEventDetails.ProfessorEventResponsiblePersonEmail
                                                                                                                        </a>
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        <span style="color: #6c757d;">Δεν υπάρχει email</span>
                                                                                                                    }
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Τηλέφωνο Υπεύθυνου</label>
                                                                                                                <input type="text" class="form-control" value="@professorEventDetails.ProfessorEventResponsiblePersonTelephone" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Πανεπιστήμιο</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                    <i class="fas fa-university" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                                                    <span>@professorEventDetails.Professor.ProfUniversity</span>
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Τμήμα Πανεπιστημίου</label>
                                                                                                                <input type="text" class="form-control" value="@professorEventDetails.ProfessorEventUniversityDepartment" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Email Καθηγητή</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                                                    <i class="fas fa-envelope" style="color: #4682B4; margin-right: 8px;"></i>
                                                                                                                    @if (!string.IsNullOrEmpty(professorEventDetails.Professor.ProfEmail))
                                                                                                                    {
                                                                                                                        <a href="mailto:@professorEventDetails.Professor.ProfEmail" 
                                                                                                                           style="color: #007bff; text-decoration: underline; word-break: break-all;">
                                                                                                                            @professorEventDetails.Professor.ProfEmail
                                                                                                                        </a>
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        <span style="color: #6c757d;">Δεν υπάρχει email</span>
                                                                                                                    }
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Περιφέρεια</label>
                                                                                                                <input type="text" class="form-control" value="@professorEventDetails.ProfessorEventPerifereiaLocation" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Δήμος</label>
                                                                                                                <input type="text" class="form-control" value="@professorEventDetails.ProfessorEventDimosLocation" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Τοποθεσία Εκδήλωσης</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                                                    <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                                                    @if (!string.IsNullOrEmpty(professorEventDetails.ProfessorEventPlaceLocation))
                                                                                                                    {
                                                                                                                        <a href="https://www.google.com/maps/search/?api=1&query=@Uri.EscapeDataString(professorEventDetails.ProfessorEventPlaceLocation)"
                                                                                                                           target="_blank"
                                                                                                                           style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                                            @professorEventDetails.ProfessorEventPlaceLocation
                                                                                                                        </a>
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        <span style="color: #6c757d;">Δεν έχει οριστεί τοποθεσία Εκδήλωσης ακόμη..</span>
                                                                                                                    }
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Ταχυδρομικός Κώδικας Τοποθεσίας</label>
                                                                                                                <input type="text" class="form-control" value="@professorEventDetails.ProfessorEventPostalCodeLocation" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Μεταφορά Στον Χώρο Εκδήλωσης</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto; 
                                                                                                                     @(professorEventDetails.ProfessorEventOfferingTransportToEventLocation.GetValueOrDefault() ? "color: #28a745;" : "color: #dc3545;")">
                                                                                                                    <i class="fas fa-car" style="margin-right: 8px;"></i>
                                                                                                                    <span>@(professorEventDetails.ProfessorEventOfferingTransportToEventLocation.GetValueOrDefault() ? "Ναι" : "Όχι")</span>
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            @if (professorEventDetails.ProfessorEventOfferingTransportToEventLocation ?? false)
                                                                                                            {
                                                                                                                <div class="form-group">
                                                                                                                    <label style="font-weight: bold;">Σημεία Εκκίνησης για Μεταφορά</label>
                                                                                                                    @if (!string.IsNullOrWhiteSpace(professorEventDetails.ProfessorEventStartingPointLocationToTransportPeopleToEvent1))
                                                                                                                    {
                                                                                                                        <div class="form-group">
                                                                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                                <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                                                                <a href="https://www.google.com/maps/search/@Uri.EscapeDataString(professorEventDetails.ProfessorEventStartingPointLocationToTransportPeopleToEvent1)"
                                                                                                                                   target="_blank"
                                                                                                                                   style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                                                    @professorEventDetails.ProfessorEventStartingPointLocationToTransportPeopleToEvent1
                                                                                                                                </a>
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                    }
                                                                                                                    @if (!string.IsNullOrWhiteSpace(professorEventDetails.ProfessorEventStartingPointLocationToTransportPeopleToEvent2))
                                                                                                                    {
                                                                                                                        <div class="form-group">
                                                                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                                <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                                                                <a href="https://www.google.com/maps/search/@Uri.EscapeDataString(professorEventDetails.ProfessorEventStartingPointLocationToTransportPeopleToEvent2)"
                                                                                                                                   target="_blank"
                                                                                                                                   style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                                                    @professorEventDetails.ProfessorEventStartingPointLocationToTransportPeopleToEvent2
                                                                                                                                </a>
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                    }
                                                                                                                    @if (!string.IsNullOrWhiteSpace(professorEventDetails.ProfessorEventStartingPointLocationToTransportPeopleToEvent3))
                                                                                                                    {
                                                                                                                        <div class="form-group">
                                                                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                                <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                                                                <a href="https://www.google.com/maps/search/@Uri.EscapeDataString(professorEventDetails.ProfessorEventStartingPointLocationToTransportPeopleToEvent3)"
                                                                                                                                   target="_blank"
                                                                                                                                   style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                                                    @professorEventDetails.ProfessorEventStartingPointLocationToTransportPeopleToEvent3
                                                                                                                                </a>
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                    }
                                                                                                                </div>
                                                                                                            }
                                                                                                            <button class="btn btn-primary mt-3" @onclick="CloseEventDetails">Πίσω</button>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    } 
                                                                                }
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            }

                                                    <div class="mb-3 row-dark-gray mt-4">
                                                        <div class="d-flex justify-content-between align-items-center">
                                                            <label class="form-label" style="color: #FFF8DC;">• Αναζήτηση Εκδηλώσεων •</label>
                                                            <button class="btn btn-link" @onclick="ToggleAndLoadCompanyAndProfessorEventsAsStudent">
                                                                @if (isCompanyEventsVisibleToSeeAsStudent || isProfessorEventsVisibleToSeeAsStudent)
                                                                {
                                                                    <span>&#8722;</span> <!-- Minus sign -->
                                                                }
                                                                else
                                                                {
                                                                    <span>&#43;</span> <!-- Plus sign -->
                                                                }
                                                            </button>
                                                        </div>
                                                    </div>
                                                    @*
                                                    @if (isCompanyEventsVisibleToSeeAsStudent || isProfessorEventsVisibleToSeeAsStudent)
                                                    {
                                                    *@
                                                    <!-- Filter options for selecting event type (Dropdown menu) -->
                                                    
                                                    @*
                                                    <div class="mb-3">
                                                        <button class="modern-button" style="background-color: #007bff; color: white;" @onclick="async () => await ToggleAndLoadCompanyAndProfessorEventsAsStudent()">Δείξε Εκδηλώσεις</button> 
                                                    </div>
                                                    *@
                                                    @if (isCompanyEventsVisibleToSeeAsStudent || isProfessorEventsVisibleToSeeAsStudent)
                                                    {
                                                       <div class="row mb-2">
                                                            <div class="col-md-2">
                                                                <label style="color: #4682b4; font-weight: bold; font-size: 15px; display: block;">Φιλτράρισμα ανά Κατηγορία</label>
                                                                <div class="input-group">
                                                                    <select class="form-control form-control-sm mt-2" @bind="selectedEventType" aria-label="Choose event filter">
                                                                        <option value="all">Όλες</option>                                                                        
                                                                        <option value="company">Εταιρείας</option>
                                                                        <option value="professor">Καθηγητή</option>                                                                      
                                                                    </select>
                                                                    <div class="input-group-append">
                                                                        <span class="input-group-text">
                                                                            <i class="fas fa-chevron-down"></i>
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <label style="color: #4682b4; font-weight: bold; font-size: 15px; display: block;">Αποτελέσματα ανά Σελίδα</label>
                                                                <div class="input-group" style="max-width: 65px;">
                                                                    <select class="form-control form-control-sm mt-2" @onchange="OnPageSizeChange_SearchForEventsAsStudent" aria-label="Items per page">
                                                                        @foreach (var option in pageSizeOptions_SearchForEventsAsStudent)
                                                                        {
                                                                            <option value="@option" selected="@(itemsPerPageForEvents == option)">@option</option>
                                                                        }
                                                                    </select>
                                                                    <div class="input-group-append">
                                                                        <span class="input-group-text">
                                                                            <i class="fas fa-chevron-down"></i>
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="table-responsive">
                                                           <table class="table">
                                                                <thead>
                                                                    <tr>
                                                                        <td colspan="9" style="padding: 0;">
                                                                        <div style="display: flex; justify-content: space-between; align-items: center; height: 24px; line-height: 24px; width: 100%;">
                                                                            <i class="fa-solid fa-magnifying-glass" style="font-size: 18px; color: #0d6efd;"></i>
                                                                            <label class="form-label" style="color: #0d6efd; font-weight: bold; font-size: 18px; margin: 0;">Διαθέσιμες Εκδηλώσεις</label>
                                                                            <i class="fa-solid fa-magnifying-glass" style="font-size: 18px; color: #0d6efd;"></i>
                                                                        </div>
                                                                    </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <th><i class="fa-solid fa-key fa-sm" style="color: #9D00FF;"></i> Κωδικός Θέσης</th>
                                                                        <th>
                                                                            <i class="fa-solid fa-font fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                            Τίτλος Εκδήλωσης
                                                                        </th>
                                                                        <th>
                                                                            <i class="fa-solid fa-user fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                            Διοργανωτής
                                                                        </th>
                                                                        <th>
                                                                            <i class="fa-solid fa-calendar-plus fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                            Ημερομηνία Εκδήλωσης
                                                                        </th>
                                                                        <th>
                                                                            <i class="fa-solid fa-bus fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                            Μεταφορά προς και από την Εκδήλωση
                                                                        </th>
                                                                        <th>
                                                                            <i class="fa-solid fa-hand fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                            Ενέργειες
                                                                        </th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    @if ((companyEventsToSeeAsStudent != null && companyEventsToSeeAsStudent.Any()) || (professorEventsToSeeAsStudent != null && professorEventsToSeeAsStudent.Any()))
                                                                    {
                                                                            <!-- Filter company events if selected -->
                                                                            @foreach (var companyEvent in GetPaginatedCompanyEvents_StudentSearchEvents())
                                                                            {
                                                                                if (selectedEventType == "company" || selectedEventType == "all")
                                                                                {
                                                                                    if (!needsTransportForCompanyEvent.ContainsKey(companyEvent.RNGForEventUploadedAsCompany))
                                                                                    {
                                                                                        needsTransportForCompanyEvent[companyEvent.RNGForEventUploadedAsCompany] = false;
                                                                                    }

                                                                                    <tr>
                                                                                        <td style="color: #9D00FF;">
                                                                                            @companyEvent.RNGForEventUploadedAsCompany_HashedAsUniqueID
                                                                                        </td>
                                                                                        <td>
                                                                                            <a href="#" @onclick="() => ShowCompanyEventDetails(companyEvent)">
                                                                                                <span style="color: red;">(Ε)</span> @companyEvent.CompanyEventTitle
                                                                                            </a>
                                                                                        </td>
                                                                                        <td>
                                                                                            <a href="#" @onclick="() => ShowCompanyDetailsModalAtEventsAsStudent(companyEvent.CompanyEmailUsedToUploadEvent)">
                                                                                                @companyEvent.Company.CompanyName
                                                                                            </a>
                                                                                        </td>
                                                                                        <td>@companyEvent.CompanyEventActiveDate.ToShortDateString()</td>
                                                                                        <td>
                                                                                            @if (companyEvent.CompanyEventOfferingTransportToEventLocation.GetValueOrDefault())
                                                                                            {
                                                                                                <input type="checkbox" @bind="needsTransportForCompanyEvent[companyEvent.RNGForEventUploadedAsCompany]" />
                                                                                                <span>Χρειάζομαι Μεταφορά</span>
                                                                                                <div>
                                                                                                    <span class="text-muted" style="font-size: small;">(Αφήστε ως έχει εάν δεν επιθυμείτε μεταφορά)</span>
                                                                                                </div>

                                                                                                @if (needsTransportForCompanyEvent[companyEvent.RNGForEventUploadedAsCompany])
                                                                                                {
                                                                                                    <div>
                                                                                                        @foreach (var location in new[] {
                                                                                                            companyEvent.CompanyEventStartingPointLocationToTransportPeopleToEvent1,
                                                                                                            companyEvent.CompanyEventStartingPointLocationToTransportPeopleToEvent2,
                                                                                                            companyEvent.CompanyEventStartingPointLocationToTransportPeopleToEvent3
                                                                                                        })
                                                                                                        {
                                                                                                            @if (!string.IsNullOrWhiteSpace(location))
                                                                                                            {
                                                                                                                <label>
                                                                                                                    <input type="radio" name="startingPoint-@companyEvent.RNGForEventUploadedAsCompany"
                                                                                                                           checked="@(selectedStartingPoint[companyEvent.RNGForEventUploadedAsCompany] == location)"
                                                                                                                           @onchange="(e) => selectedStartingPoint[companyEvent.RNGForEventUploadedAsCompany] = location" />
                                                                                                                    @location
                                                                                                                </label><br />
                                                                                                            }
                                                                                                        }
                                                                                                    </div>
                                                                                                }
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                <span class="text-muted">Δεν Προσφέρεται</span>
                                                                                            }
                                                                                        </td>
                                                                                        <td>
                                                                                            @if (alreadyInterestedCompanyEventIds.Contains(companyEvent.RNGForEventUploadedAsCompany))
                                                                                            {
                                                                                                <span class="text-success" style="font-weight: bold;">
                                                                                                    <i class="fas fa-check-circle"></i> Έχετε ήδη δείξει Ενδιαφέρον για την Εκδήλωση
                                                                                                </span>
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                <button class="modern-button" style="background-color: #FF7F7F; color: white;" @onclick="() => ShowInterestInCompanyEvent(companyEvent, needsTransportForCompanyEvent[companyEvent.RNGForEventUploadedAsCompany])">
                                                                                                    <i class="fas fa-heart"></i> Δείξε Ενδιαφέρον
                                                                                                </button>
                                                                                            }
                                                                                        </td>

                                                                                    </tr>
                                                                                }
                                                                            }

                                                                        <!-- Filter professor events if selected -->
                                                                        @foreach (var professorEvent in GetPaginatedProfessorEvents_StudentSearchEvents())
                                                                        {
                                                                            if (selectedEventType == "professor" || selectedEventType == "all")
                                                                            {
                                                                                if (!needsTransportForProfessorEvent.ContainsKey(professorEvent.RNGForEventUploadedAsProfessor))
                                                                                {
                                                                                    needsTransportForProfessorEvent[professorEvent.RNGForEventUploadedAsProfessor] = false;
                                                                                }

                                                                                <tr>
                                                                                    <td style="color: #9D00FF;">
                                                                                        @professorEvent.RNGForEventUploadedAsProfessor_HashedAsUniqueID
                                                                                    </td>
                                                                                    <td>
                                                                                        <a href="#" @onclick="() => ShowProfessorEventDetails(professorEvent)">
                                                                                            <span style="color: red;">(K)</span> @professorEvent.ProfessorEventTitle
                                                                                        </a>
                                                                                    </td>
                                                                                    <td>
                                                                                       <a href="#" @onclick="() => ShowProfessorDetailsModalAtEventsAsStudent(professorEvent.Professor.ProfEmail)">
                                                                                          @professorEvent.Professor.ProfName @professorEvent.Professor.ProfSurname
                                                                                       </a>
                                                                                    </td>
                                                                                    <td>@professorEvent.ProfessorEventActiveDate.ToShortDateString()</td>
                                                                                    <td>
                                                                                        @if (professorEvent.ProfessorEventOfferingTransportToEventLocation.GetValueOrDefault())
                                                                                        {
                                                                                            <input type="checkbox" checked="@(needsTransportForProfessorEvent.GetValueOrDefault(professorEvent.RNGForEventUploadedAsProfessor, false))"
                                                                                                   @onchange="(e) => ToggleTransport(professorEvent.RNGForEventUploadedAsProfessor, e.Value)" />
                                                                                            <span>Χρειάζομαι Μεταφορά</span>
                                                                                            <div>
                                                                                                <span class="text-muted" style="font-size: small;">(Αφήστε ως έχει εάν δεν επιθυμείτε μεταφορά)</span>
                                                                                            </div>

                                                                                            @if (needsTransportForProfessorEvent.ContainsKey(professorEvent.RNGForEventUploadedAsProfessor) && 
                                                                                                needsTransportForProfessorEvent[professorEvent.RNGForEventUploadedAsProfessor])
                                                                                            {
                                                                                                <div>
                                                                                                    @foreach (var location in new[] {
                                                                                                        professorEvent.ProfessorEventStartingPointLocationToTransportPeopleToEvent1,
                                                                                                        professorEvent.ProfessorEventStartingPointLocationToTransportPeopleToEvent2,
                                                                                                        professorEvent.ProfessorEventStartingPointLocationToTransportPeopleToEvent3
                                                                                                    })
                                                                                                    {
                                                                                                        @if (!string.IsNullOrWhiteSpace(location))
                                                                                                        {
                                                                                                            <label>
                                                                                                                <input type="radio" name="startingPoint-@professorEvent.RNGForEventUploadedAsProfessor"
                                                                                                                       checked="@(selectedStartingPoint.GetValueOrDefault(professorEvent.RNGForEventUploadedAsProfessor) == location)"
                                                                                                                       @onchange="(e) => selectedStartingPoint[professorEvent.RNGForEventUploadedAsProfessor] = location" />
                                                                                                                @location
                                                                                                            </label><br />
                                                                                                        }
                                                                                                    }
                                                                                                </div>
                                                                                            }
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <span class="text-muted">Δεν Προσφέρεται</span>
                                                                                        }
                                                                                    </td>

                                                                                    <td>
                                                                                        @if (interestedProfessorEventIds.Contains(professorEvent.RNGForEventUploadedAsProfessor))
                                                                                        {
                                                                                            <span class="text-success" style="font-weight: bold;">
                                                                                                <i class="fas fa-check-circle"></i> Έχετε ήδη δείξει Ενδιαφέρον για την Εκδήλωση
                                                                                            </span>
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <button class="modern-button" style="background-color: #FF7F7F; color: white;"
                                                                                                    @onclick="() => ShowInterestInProfessorEvent(professorEvent, needsTransportForProfessorEvent[professorEvent.RNGForEventUploadedAsProfessor])">
                                                                                                <i class="fas fa-heart"></i> Δείξε Ενδιαφέρον
                                                                                            </button>
                                                                                        }
                                                                                    </td>

                                                                                </tr>
                                                                            }
                                                                        }
                                                                    }
                                                                    else
                                                                    {
                                                                        <tr>
                                                                            <td colspan="5">Δεν Υπάρχουν Διαθέσιμες Εκδηλώσεις</td>
                                                                        </tr>
                                                                    }
                                                                </tbody>
                                                           </table>
                                                           <!-- Pagination Controls -->
                                                            <div class="d-flex justify-content-center align-items-center mt-3 gap-1">
                                                                <!-- First Page (<<) -->
                                                                <span class="pagination-item @(currentPageForEvents == 1 ? "disabled" : "")" 
                                                                      @onclick="@(() => GoToFirstPageForEvents())">
                                                                    &lt;&lt;
                                                                </span>
            
                                                                <!-- Previous Page (<) -->
                                                                <span class="pagination-item @(currentPageForEvents == 1 ? "disabled" : "")" 
                                                                      @onclick="@(() => PreviousPageForEvents())">
                                                                    &lt;
                                                                </span>
            
                                                                <!-- Page Numbers -->
                                                                @foreach (var pageNum in GetVisiblePagesForEvents())
                                                                {
                                                                    @if (pageNum == -1)
                                                                    {
                                                                        <span class="pagination-ellipsis">...</span>
                                                                    }
                                                                    else
                                                                    {
                                                                        <span class="pagination-item @(pageNum == currentPageForEvents ? "active" : "")" 
                                                                              @onclick="@(() => GoToPageForEvents(pageNum))">
                                                                            @pageNum
                                                                        </span>
                                                                    }
                                                                }
            
                                                                <!-- Next Page (>) -->
                                                                <span class="pagination-item @(currentPageForEvents == totalPagesForEvents ? "disabled" : "")" 
                                                                      @onclick="@(() => NextPageForEvents())">
                                                                    &gt;
                                                                </span>
            
                                                                <!-- Last Page (>>) -->
                                                                <span class="pagination-item @(currentPageForEvents == totalPagesForEvents ? "disabled" : "")" 
                                                                      @onclick="@(() => GoToLastPageForEvents())">
                                                                    &gt;&gt;
                                                                </span>
            
                                                                <!-- Page counter -->
                                                                <span class="ms-3">Σελίδα @currentPageForEvents από @totalPagesForEvents</span>
                                                            </div>
                                                           <br/>
                                                           <br/>
                                                        </div>
                                                    }
                                                    
                                                </div>
                                                </div>                                                                                       
                                            </div>
                                                

                                                <!-- Company Event - Event Details Modal - Search Events As Student -->
                                                @if (isModalOpenForCompanyEventToSeeAsStudent && currentCompanyEvent != null)
                                                {
                                                    <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                                        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h5 class="modal-title" style="color: #4682B4;">
                                                                        @currentCompanyEvent.CompanyEventTitle
                                                                    </h5>
                                                                    <button type="button" class="close" @onclick="CloseModalForCompanyEventToSeeAsStudent">
                                                                        <span aria-hidden="true">&times;</span>
                                                                    </button>
                                                                </div>
                                                                <div class="modal-body">
                                                                    @if (currentCompanyEvent.Company.CompanyLogo != null)
                                                                    {
                                                                        <div class="form-group text-center">
                                                                            <img src="data:image/png;base64,@Convert.ToBase64String(currentCompanyEvent.Company.CompanyLogo)" 
                                                                                 class="rounded-circle img-fluid" 
                                                                                 style="width: 150px; height: 150px; object-fit: cover;" 
                                                                                 alt="Company Logo" />
                                                                        </div>
                                                                    }
                    
                                                                    <div class="list-group">
                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Όνομα Εταιρίας</label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fas fa-industry" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                <span>@currentCompanyEvent.Company.CompanyName</span>
                                                                            </div>
                                                                        </div>
                        
                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Τίτλος Εκδήλωσης</label>
                                                                            <input type="text" class="form-control" value="@currentCompanyEvent.CompanyEventTitle" readonly />
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Περιγραφή</label>
                                                                            <textarea class="form-control" rows="3" readonly>@currentCompanyEvent.CompanyEventDescription</textarea>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Ημερομηνία</label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="far fa-calendar-alt" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                <span>@currentCompanyEvent.CompanyEventActiveDate.ToString("yyyy-MM-dd", new System.Globalization.CultureInfo("el-GR"))</span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Ώρα Εκδήλωσης</label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="far fa-clock" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                <span>@currentCompanyEvent.CompanyEventTime.ToString(@"hh\:mm")</span>
                                                                            </div>
                                                                        </div>


                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Τύπος Εκδήλωσης</label>
                                                                            <input type="text" class="form-control" value="@currentCompanyEvent.CompanyEventType" readonly />
                                                                        </div>

                                                                        @if (currentCompanyEvent.CompanyEventOtherOrganizerToBeVisible)
                                                                        {
                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">Άλλος Διοργανωτής</label>
                                                                                <input type="text" class="form-control" value="@currentCompanyEvent.CompanyEventOtherOrganizer" readonly />
                                                                            </div>
                                                                        }

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Περιοχές Ενδιαφέροντος</label>
                                                                            <textarea class="form-control" readonly 
                                                                                      style="height: auto; min-height: 100px;">@currentCompanyEvent.CompanyEventAreasOfInterest</textarea>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Κατάσταση Εκδήλωσης</label>
                                                                            <input type="text" class="form-control" value="@currentCompanyEvent.CompanyEventStatus" readonly />
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Υπεύθυνος Εκδήλωσης</label>
                                                                            <input type="text" class="form-control" value="@currentCompanyEvent.CompanyEventResponsiblePerson" readonly />
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Email Υπεύθυνου</label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fas fa-envelope" style="color: #4682B4; margin-right: 8px;"></i>
                                                                                <a href="mailto:@currentCompanyEvent.CompanyEventResponsiblePersonEmail" 
                                                                                   style="color: #007bff; text-decoration: underline; word-break: break-all;">
                                                                                    @currentCompanyEvent.CompanyEventResponsiblePersonEmail
                                                                                </a>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Τηλέφωνο Υπεύθυνου</label>
                                                                            <input type="text" class="form-control" value="@currentCompanyEvent.CompanyEventResponsiblePersonTelephone" readonly />
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Τμήμα Εταιρίας</label>
                                                                            <input type="text" class="form-control" value="@currentCompanyEvent.CompanyEventCompanyDepartment" readonly />
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Διεύθυνση Email Εταιρίας</label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                <i class="fas fa-envelope" style="color: #4682B4; margin-right: 8px;"></i>
                                                                                @if (!string.IsNullOrEmpty(currentCompanyEvent.CompanyEmailUsedToUploadEvent))
                                                                                {
                                                                                    <a href="mailto:@currentCompanyEvent.CompanyEmailUsedToUploadEvent" 
                                                                                       style="color: #007bff; text-decoration: underline; word-break: break-all;">
                                                                                        @currentCompanyEvent.CompanyEmailUsedToUploadEvent
                                                                                    </a>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <span style="color: #6c757d;">Δεν υπάρχει email</span>
                                                                                }
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Ημερομηνία Ανάρτησης Εκδήλωσης</label>
                                                                            <input type="text" class="form-control" 
                                                                                   value="@currentCompanyEvent.CompanyEventUploadedDate.ToString("yyyy-MM-dd", new System.Globalization.CultureInfo("el-GR"))" 
                                                                                   readonly />
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Περιοχή Εκδήλωσης</label>
                                                                            <input type="text" class="form-control" value="@currentCompanyEvent.CompanyEventPerifereiaLocation" readonly />
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Δήμος Εκδήλωσης</label>
                                                                            <input type="text" class="form-control" value="@currentCompanyEvent.CompanyEventDimosLocation" readonly />
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Τοποθεσία Εκδήλωσης</label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                @if (!string.IsNullOrEmpty(currentCompanyEvent.CompanyEventPlaceLocation))
                                                                                {
                                                                                    <a href="https://www.google.com/maps/search/@Uri.EscapeDataString(currentCompanyEvent.CompanyEventPlaceLocation)" 
                                                                                       target="_blank"
                                                                                       style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                        @currentCompanyEvent.CompanyEventPlaceLocation
                                                                                    </a>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <span style="color: #6c757d;">Δεν έχει οριστεί τοποθεσία Εκδήλωσης ακόμη..</span>
                                                                                }
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Ταχυδρομικός Κώδικας Εκδήλωσης</label>
                                                                            <input type="text" class="form-control" value="@currentCompanyEvent.CompanyEventPostalCodeLocation" readonly />
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Μεταφορά Στον Χώρο Εκδήλωσης</label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto; 
                                                                                 @(currentCompanyEvent.CompanyEventOfferingTransportToEventLocation.GetValueOrDefault() ? "color: #28a745;" : "color: #dc3545;")">
                                                                                <i class="fas fa-car" style="margin-right: 8px;"></i>
                                                                                <span>@(currentCompanyEvent.CompanyEventOfferingTransportToEventLocation.GetValueOrDefault() ? "Ναι" : "Όχι")</span>
                                                                            </div>
                                                                        </div>


                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">Σημεία Εκκίνησης για Μεταφορά</label>
                                                                                @if (!string.IsNullOrWhiteSpace(currentCompanyEvent.CompanyEventStartingPointLocationToTransportPeopleToEvent1))
                                                                                {
                                                                                    <div class="form-group">
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                            <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                            <a href="https://www.google.com/maps/search/@currentCompanyEvent.CompanyEventStartingPointLocationToTransportPeopleToEvent1"
                                                                                               target="_blank"
                                                                                               style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                @currentCompanyEvent.CompanyEventStartingPointLocationToTransportPeopleToEvent1
                                                                                            </a>
                                                                                        </div>
                                                                                    </div>
                                                                                }
                                                                                @if (!string.IsNullOrWhiteSpace(currentCompanyEvent.CompanyEventStartingPointLocationToTransportPeopleToEvent2))
                                                                                {
                                                                                    <div class="form-group">
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                            <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                            <a href="https://www.google.com/maps/search/@currentCompanyEvent.CompanyEventStartingPointLocationToTransportPeopleToEvent2"
                                                                                               target="_blank"
                                                                                               style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                @currentCompanyEvent.CompanyEventStartingPointLocationToTransportPeopleToEvent2
                                                                                            </a>
                                                                                        </div>
                                                                                    </div>
                                                                                }
                                                                                @if (!string.IsNullOrWhiteSpace(currentCompanyEvent.CompanyEventStartingPointLocationToTransportPeopleToEvent3))
                                                                                {
                                                                                    <div class="form-group">
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                            <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                            <a href="https://www.google.com/maps/search/@currentCompanyEvent.CompanyEventStartingPointLocationToTransportPeopleToEvent3"
                                                                                               target="_blank"
                                                                                               style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                @currentCompanyEvent.CompanyEventStartingPointLocationToTransportPeopleToEvent3
                                                                                            </a>
                                                                                        </div>
                                                                                    </div>
                                                                                }
                                                                            </div>
                                                                        </div>
                                                                </div>
                                                                <div class="modal-footer">
                                                                    <button type="button" class="btn btn-secondary" @onclick="CloseModalForCompanyEventToSeeAsStudent">
                                                                        Κλείσιμο
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                }


                                                <!-- Company Event - Company Details Modal - Search Events As Student  -->
                                                @if(isModalOpenForCompanyDetailsToSeeAsStudent && currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents != null)
                                                {
                                                    <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                                        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h5 class="modal-title" style="color: #4682B4;">@currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents.CompanyName</h5>
                                                                    <button type="button" class="close" @onclick="CloseCompanyDetailsModalAtEventsAsStudent">
                                                                        <span aria-hidden="true">&times;</span>
                                                                    </button>
                                                                </div>
                                                                <div class="modal-body">
                                                                    <div class="form-group text-center">
                                                                        @if (currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents.CompanyLogo != null)
                                                                        {
                                                                            <img src="@ShowProfileImage(currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents.CompanyLogo)" 
                                                                                 alt="Company Logo" style="max-width: 150px; max-height: 150px; object-fit: cover;" />
                                                                        }
                                                                        else
                                                                        {
                                                                            <p>Δεν είναι διαθέσιμο</p>
                                                                        }
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Σύντομη Ονομασία</strong></label>
                                                                        <input type="text" class="form-control" value="@currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents.CompanyShortName" readonly />
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Τύπος Εταιρείας</strong></label>
                                                                        <input type="text" class="form-control" value="@currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents.CompanyType" readonly />
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Email Εταιρείας</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                            <i class="fas fa-envelope" style="color: #4682B4; margin-right: 8px;"></i>
                                                                            @if (!string.IsNullOrEmpty(currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents.CompanyEmail))
                                                                            {
                                                                                <a href="mailto:@currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents.CompanyEmail" 
                                                                                   style="color: #007bff; text-decoration: underline; word-break: break-all;">
                                                                                    @currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents.CompanyEmail
                                                                                </a>
                                                                            }
                                                                            else
                                                                            {
                                                                                <span style="color: #6c757d;">Δεν υπάρχει email</span>
                                                                            }
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Ιστοσελίδα Εταιρείας</strong></label>
                                                                        @if (!string.IsNullOrEmpty(currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents.CompanyWebsite))
                                                                        {
                                                                            <input type="text" class="form-control" value="@currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents.CompanyWebsite" readonly 
                                                                                   style="color: #007bff; cursor: pointer;" 
                                                                                   onclick="window.open('@(currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents.CompanyWebsite.StartsWith("http") ? currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents.CompanyWebsite : "http://" + currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents.CompanyWebsite)', '_blank')" />
                                                                        }
                                                                        else
                                                                        {
                                                                            <input type="text" class="form-control" value="Δεν υπάρχει" readonly />
                                                                        }
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Ανακοινώσεις Εταιρείας</strong></label>
                                                                        @if (!string.IsNullOrEmpty(currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents.CompanyWebsiteAnnouncements))
                                                                        {
                                                                            <input type="text" class="form-control" value="@currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents.CompanyWebsiteAnnouncements" readonly 
                                                                                   style="color: #007bff; cursor: pointer;" 
                                                                                   onclick="window.open('@(currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents.CompanyWebsiteAnnouncements.StartsWith("http") ? currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents.CompanyWebsiteAnnouncements : "http://" + currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents.CompanyWebsiteAnnouncements)', '_blank')" />
                                                                        }
                                                                        else
                                                                        {
                                                                            <input type="text" class="form-control" value="Δεν υπάρχει" readonly />
                                                                        }
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Θέσεις Εργασίας Εταιρείας</strong></label>
                                                                        @if (!string.IsNullOrEmpty(currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents.CompanyWebsiteJobs))
                                                                        {
                                                                            <input type="text" class="form-control" value="@currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents.CompanyWebsiteJobs" readonly 
                                                                                   style="color: #007bff; cursor: pointer;" 
                                                                                   onclick="window.open('@(currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents.CompanyWebsiteJobs.StartsWith("http") ? currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents.CompanyWebsiteJobs : "http://" + currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents.CompanyWebsiteJobs)', '_blank')" />
                                                                        }
                                                                        else
                                                                        {
                                                                            <input type="text" class="form-control" value="Δεν υπάρχει" readonly />
                                                                        }
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Τηλέφωνο Εταιρείας</strong></label>
                                                                        <input type="text" class="form-control" value="@currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents.CompanyTelephone" readonly />
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Περιγραφή Εταιρείας</strong></label>
                                                                        <textarea class="form-control" rows="4" readonly>@currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents.CompanyDescription</textarea>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Δραστηριότητα Εταιρείας</strong></label>
                                                                        <input type="text" class="form-control" value="@currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents.CompanyActivity" readonly />
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Περιοχές Ενδιαφέροντος</strong></label>
                                                                        <textarea class="form-control" readonly>@currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents.CompanyAreas</textarea>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Χώρα</strong></label>
                                                                        <input type="text" class="form-control" value="@currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents.CompanyCountry" readonly />
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Περιφέρεια</strong></label>
                                                                        <input type="text" class="form-control" value="@currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents.CompanyRegions" readonly />
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Πόλη</strong></label>
                                                                        <input type="text" class="form-control" value="@currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents.CompanyTown" readonly />
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Διεύθυνση</strong></label>
                                                                        <div class="form-control d-flex align-items-center mt-1" style="height: auto;">
                                                                            <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                            <a href="https://www.google.com/maps/search/@currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents.CompanyLocation"
                                                                               target="_blank"
                                                                               style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                @currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents.CompanyLocation
                                                                            </a>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Ταχυδρομικός Κώδικας</strong></label>
                                                                        <input type="text" class="form-control" value="@currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents.CompanyPC" readonly />
                                                                    </div>                                                                

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Επικοινωνία HR</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                            <i class="fas fa-envelope" style="color: #4682B4; margin-right: 8px;"></i>
                                                                            @if (!string.IsNullOrEmpty(currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents.CompanyHREmail))
                                                                            {
                                                                                <a href="mailto:@currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents.CompanyHREmail" 
                                                                                   style="color: #007bff; text-decoration: underline; word-break: break-all;">
                                                                                    @currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents.CompanyHREmail
                                                                                </a>
                                                                            }
                                                                            else
                                                                            {
                                                                                <span style="color: #6c757d;">Δεν υπάρχει email</span>
                                                                            }
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Τηλέφωνο HR</strong></label>
                                                                        <input type="text" class="form-control" value="@currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents.CompanyHRTelephone" readonly />
                                                                    </div>
                                                                </div>
                                                                <div class="modal-footer">
                                                                    <button type="button" class="btn btn-secondary" @onclick="CloseCompanyDetailsModalAtEventsAsStudent">Κλείσιμο</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                }

                                               <!-- Professor Event - Event Details Modal - Search Events As Student -->
                                                @if (isModalOpenForProfessorEventToSeeAsStudent && currentProfessorEvent != null)
                                                {
                                                    <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                                        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h5 class="modal-title" style="color: #4682B4;">
                                                                        @currentProfessorEvent.ProfessorEventTitle
                                                                    </h5>
                                                                    <button type="button" class="close" @onclick="CloseModalForProfessorEventToSeeAsStudent">
                                                                        <span aria-hidden="true">&times;</span>
                                                                    </button>
                                                                </div>
                                                                <div class="modal-body">
                                                                    @if (currentProfessorEvent.Professor.ProfImage != null)
                                                                    {
                                                                        <div class="form-group text-center">
                                                                            <img src="data:image/png;base64,@Convert.ToBase64String(currentProfessorEvent.Professor.ProfImage)" 
                                                                                 class="rounded-circle img-fluid" 
                                                                                 style="width: 150px; height: 150px; object-fit: cover;" 
                                                                                 alt="Professor Image" />
                                                                        </div>
                                                                    }

                                                                    <div class="list-group">
                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Ονοματεπώνυμο Διοργανωτή</label>
                                                                                    <input type="text" class="form-control" value="@currentProfessorEvent.Professor.ProfName @currentProfessorEvent.Professor.ProfSurname" readonly />
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Τίτλος Εκδήλωσης</label>
                                                                            <input type="text" class="form-control" value="@currentProfessorEvent.ProfessorEventTitle" readonly />
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Περιγραφή</label>
                                                                            <textarea class="form-control" rows="3" readonly>@currentProfessorEvent.ProfessorEventDescription</textarea>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Ημερομηνία</label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="far fa-calendar-alt" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                <span>@currentProfessorEvent.ProfessorEventActiveDate.ToString("yyyy-MM-dd")</span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Ώρα Εκδήλωσης</label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="far fa-clock" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                <span>@currentProfessorEvent.ProfessorEventTimeOnly.ToString("HH:mm")</span>
                                                                            </div>
                                                                        </div>


                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Τύπος Εκδήλωσης</label>
                                                                            <input type="text" class="form-control" value="@currentProfessorEvent.ProfessorEventType" readonly />
                                                                        </div>

                                                                        @if (currentProfessorEvent.ProfessorEventOtherOrganizerToBeVisible)
                                                                        {
                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">Άλλος Διοργανωτής</label>
                                                                                <input type="text" class="form-control" value="@currentProfessorEvent.ProfessorEventOtherOrganizer" readonly />
                                                                            </div>
                                                                        }

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Περιοχές Ενδιαφέροντος</label>
                                                                            <textarea class="form-control" rows="3" readonly>@currentProfessorEvent.ProfessorEventAreasOfInterest</textarea>
                                                                        </div>


                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Κατάσταση Εκδήλωσης</label>
                                                                            <input type="text" class="form-control" value="@currentProfessorEvent.ProfessorEventStatus" readonly />
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Ονοματεπώνυμο Υπεύθυνου</label>
                                                                            <input type="text" class="form-control" value="@currentProfessorEvent.ProfessorEventResponsiblePerson" readonly />
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Email Υπεύθυνου</label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                <i class="fas fa-envelope" style="color: #4682B4; margin-right: 8px;"></i>
                                                                                @if (!string.IsNullOrEmpty(currentProfessorEvent.ProfessorEventResponsiblePersonEmail))
                                                                                {
                                                                                    <a href="mailto:@currentProfessorEvent.ProfessorEventResponsiblePersonEmail" 
                                                                                       style="color: #007bff; text-decoration: underline; word-break: break-all;">
                                                                                        @currentProfessorEvent.ProfessorEventResponsiblePersonEmail
                                                                                    </a>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <span style="color: #6c757d;">Δεν υπάρχει email</span>
                                                                                }
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Τηλέφωνο Υπεύθυνου</label>
                                                                            <input type="text" class="form-control" value="@currentProfessorEvent.ProfessorEventResponsiblePersonTelephone" readonly />
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Πανεπιστήμιο</label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fas fa-university" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                <span>@currentProfessorEvent.Professor.ProfUniversity</span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Τμήμα Πανεπιστημίου</label>
                                                                            <input type="text" class="form-control" value="@currentProfessorEvent.ProfessorEventUniversityDepartment" readonly />
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Email Καθηγητή</label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                <i class="fas fa-envelope" style="color: #4682B4; margin-right: 8px;"></i>
                                                                                @if (!string.IsNullOrEmpty(currentProfessorEvent.Professor.ProfEmail))
                                                                                {
                                                                                    <a href="mailto:@currentProfessorEvent.Professor.ProfEmail" 
                                                                                       style="color: #007bff; text-decoration: underline; word-break: break-all;">
                                                                                        @currentProfessorEvent.Professor.ProfEmail
                                                                                    </a>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <span style="color: #6c757d;">Δεν υπάρχει email</span>
                                                                                }
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Περιφέρεια</label>
                                                                            <input type="text" class="form-control" value="@currentProfessorEvent.ProfessorEventPerifereiaLocation" readonly />
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Δήμος</label>
                                                                            <input type="text" class="form-control" value="@currentProfessorEvent.ProfessorEventDimosLocation" readonly />
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Τοποθεσία Εκδήλωσης</label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                @if (!string.IsNullOrEmpty(currentProfessorEvent.ProfessorEventPlaceLocation))
                                                                                {
                                                                                    <a href="https://www.google.com/maps/search/?api=1&query=@Uri.EscapeDataString(currentProfessorEvent.ProfessorEventPlaceLocation)"
                                                                                       target="_blank"
                                                                                       style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                        @currentProfessorEvent.ProfessorEventPlaceLocation
                                                                                    </a>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <span style="color: #6c757d;">Δεν έχει οριστεί τοποθεσία Εκδήλωσης ακόμη..</span>
                                                                                }
                                                                            </div>
                                                                        </div>


                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Ταχυδρομικός Κώδικας Τοποθεσίας</label>
                                                                            <input type="text" class="form-control" value="@currentProfessorEvent.ProfessorEventPostalCodeLocation" readonly />
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Μεταφορά Στον Χώρο Εκδήλωσης</label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto; 
                                                                                 @(currentProfessorEvent.ProfessorEventOfferingTransportToEventLocation.GetValueOrDefault() ? "color: #28a745;" : "color: #dc3545;")">
                                                                                <i class="fas fa-car" style="margin-right: 8px;"></i>
                                                                                <span>@(currentProfessorEvent.ProfessorEventOfferingTransportToEventLocation.GetValueOrDefault() ? "Ναι" : "Όχι")</span>
                                                                            </div>
                                                                        </div>


                                                                        @if (currentProfessorEvent.ProfessorEventOfferingTransportToEventLocation ?? false)
                                                                        {
                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">Σημεία Εκκίνησης για Μεταφορά</label>
                                                                                @if (!string.IsNullOrWhiteSpace(currentProfessorEvent.ProfessorEventStartingPointLocationToTransportPeopleToEvent1))
                                                                                {
                                                                                    <div class="form-group">
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                            <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                            <a href="https://www.google.com/maps/search/@Uri.EscapeDataString(currentProfessorEvent.ProfessorEventStartingPointLocationToTransportPeopleToEvent1)"
                                                                                               target="_blank"
                                                                                               style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                @currentProfessorEvent.ProfessorEventStartingPointLocationToTransportPeopleToEvent1
                                                                                            </a>
                                                                                        </div>
                                                                                    </div>
                                                                                }
                                                                                @if (!string.IsNullOrWhiteSpace(currentProfessorEvent.ProfessorEventStartingPointLocationToTransportPeopleToEvent2))
                                                                                {
                                                                                    <div class="form-group">
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                            <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                            <a href="https://www.google.com/maps/search/@Uri.EscapeDataString(currentProfessorEvent.ProfessorEventStartingPointLocationToTransportPeopleToEvent2)"
                                                                                               target="_blank"
                                                                                               style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                @currentProfessorEvent.ProfessorEventStartingPointLocationToTransportPeopleToEvent2
                                                                                            </a>
                                                                                        </div>
                                                                                    </div>
                                                                                }
                                                                                @if (!string.IsNullOrWhiteSpace(currentProfessorEvent.ProfessorEventStartingPointLocationToTransportPeopleToEvent3))
                                                                                {
                                                                                    <div class="form-group">
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                            <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                            <a href="https://www.google.com/maps/search/@Uri.EscapeDataString(currentProfessorEvent.ProfessorEventStartingPointLocationToTransportPeopleToEvent3)"
                                                                                               target="_blank"
                                                                                               style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                @currentProfessorEvent.ProfessorEventStartingPointLocationToTransportPeopleToEvent3
                                                                                            </a>
                                                                                        </div>
                                                                                    </div>
                                                                                }
                                                                            </div>

                                                                        }
                                                                    </div>
                                                                </div>
                                                                <div class="modal-footer">
                                                                    <button type="button" class="btn btn-secondary" @onclick="CloseModalForProfessorEventToSeeAsStudent">
                                                                        Κλείσιμο
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                }


                                                <!-- Professor Event - Professor Details Modal - Search Events As Student -->
                                                @if (isModalOpenForProfessorDetailsToSeeAsStudent && currentProfessorDetailsToShowOnHyperlinkAsStudentForProfessorEvents != null)
                                                {
                                                    <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                                        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h5 class="modal-title" style="color: #4682B4;">
                                                                        @currentProfessorDetailsToShowOnHyperlinkAsStudentForProfessorEvents.ProfName 
                                                                        @currentProfessorDetailsToShowOnHyperlinkAsStudentForProfessorEvents.ProfSurname
                                                                    </h5>
                                                                    <button type="button" class="close" @onclick="CloseProfessorDetailsModalAtEventsAsStudent">
                                                                        <span aria-hidden="true">&times;</span>
                                                                    </button>
                                                                </div>
                                                                <div class="modal-body">
                                                                    <div class="form-group text-center">
                                                                        @if (currentProfessorDetailsToShowOnHyperlinkAsStudentForProfessorEvents.ProfImage != null)
                                                                        {
                                                                            var base64Image = Convert.ToBase64String(currentProfessorDetailsToShowOnHyperlinkAsStudentForProfessorEvents.ProfImage);
                                                                            <img src="data:image/jpeg;base64,@base64Image" alt="Φωτογραφία Καθηγητή" 
                                                                                 style="max-width: 150px; max-height: 150px; border-radius: 50%; object-fit: cover;" />
                                                                        }
                                                                        else
                                                                        {
                                                                            <p>Δεν υπάρχει διαθέσιμη φωτογραφία</p>
                                                                        }
                                                                    </div>

                                                                    <!-- Name and Surname -->
                                                                    <div class="form-group">
                                                                        <label><strong>Όνομα</strong></label>
                                                                        <input type="text" class="form-control" value="@currentProfessorDetailsToShowOnHyperlinkAsStudentForProfessorEvents.ProfName" readonly />
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label><strong>Επώνυμο</strong></label>
                                                                        <input type="text" class="form-control" value="@currentProfessorDetailsToShowOnHyperlinkAsStudentForProfessorEvents.ProfSurname" readonly />
                                                                    </div>

                                                                    <!-- University & Department -->
                                                                    <div class="form-group">
                                                                        <label><strong>Πανεπιστήμιο</strong></label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-university" style="color: #4682B4; margin-right: 8px;"></i>
                                                                            <span>@currentProfessorDetailsToShowOnHyperlinkAsStudentForProfessorEvents.ProfUniversity</span>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Τμήμα</strong></label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-building" style="color: #4682B4; margin-right: 8px;"></i>
                                                                            <span>@currentProfessorDetailsToShowOnHyperlinkAsStudentForProfessorEvents.ProfDepartment</span>
                                                                        </div>
                                                                    </div>


                                                                    <!-- Academic Rank & Contact Info -->
                                                                    <div class="form-group">
                                                                        <label><strong>Βαθμίδα ΔΕΠ</strong></label>
                                                                        <input type="text" class="form-control" value="@currentProfessorDetailsToShowOnHyperlinkAsStudentForProfessorEvents.ProfVahmidaDEP" readonly />
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Email</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                            <i class="fas fa-envelope" style="color: #4682B4; margin-right: 8px;"></i>
                                                                            @if (!string.IsNullOrEmpty(currentProfessorDetailsToShowOnHyperlinkAsStudentForProfessorEvents.ProfEmail))
                                                                            {
                                                                                <a href="mailto:@currentProfessorDetailsToShowOnHyperlinkAsStudentForProfessorEvents.ProfEmail" 
                                                                                   style="color: #007bff; text-decoration: underline; word-break: break-all;">
                                                                                    @currentProfessorDetailsToShowOnHyperlinkAsStudentForProfessorEvents.ProfEmail
                                                                                </a>
                                                                            }
                                                                            else
                                                                            {
                                                                                <span style="color: #6c757d;">Δεν υπάρχει email</span>
                                                                            }
                                                                        </div>
                                                                    </div>


                                                                    <div class="form-group">
                                                                        <label><strong>Τηλέφωνο Εργασίας</strong></label>
                                                                        <input type="text" class="form-control" value="@currentProfessorDetailsToShowOnHyperlinkAsStudentForProfessorEvents.ProfWorkTelephone" readonly />
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Προσωπικό Τηλέφωνο</strong></label>
                                                                        <input type="text" class="form-control" value="@currentProfessorDetailsToShowOnHyperlinkAsStudentForProfessorEvents.ProfPersonalTelephone" readonly />
                                                                    </div>

                                                                    <!-- LinkedIn Profile -->
                                                                    <div class="form-group">
                                                                        <label><strong>LinkedIn Προφίλ</strong></label>
                                                                        @if (!string.IsNullOrEmpty(currentProfessorDetailsToShowOnHyperlinkAsStudentForProfessorEvents.ProfLinkedInSite))
                                                                        {
                                                                            <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                <i class="fab fa-linkedin" style="color: #0077b5; margin-right: 8px;"></i>
                                                                                <span style="color: #007bff; cursor: pointer;" onclick="window.open('@currentProfessorDetailsToShowOnHyperlinkAsStudentForProfessorEvents.ProfLinkedInSite', '_blank')">
                                                                                    @currentProfessorDetailsToShowOnHyperlinkAsStudentForProfessorEvents.ProfLinkedInSite
                                                                                </span>
                                                                            </div>
                                                                        }
                                                                    </div>

                                                                    <!-- Personal Website -->
                                                                    <div class="form-group">
                                                                        <label><strong>Προσωπική Ιστοσελίδα</strong></label>
                                                                        @if (!string.IsNullOrEmpty(currentProfessorDetailsToShowOnHyperlinkAsStudentForProfessorEvents.ProfPersonalWebsite))
                                                                        {
                                                                            <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                <i class="fas fa-globe" style="color: #007bff; margin-right: 8px;"></i>
                                                                                <span style="color: #007bff; cursor: pointer;" onclick="window.open('@currentProfessorDetailsToShowOnHyperlinkAsStudentForProfessorEvents.ProfPersonalWebsite', '_blank')">
                                                                                    @currentProfessorDetailsToShowOnHyperlinkAsStudentForProfessorEvents.ProfPersonalWebsite
                                                                                </span>
                                                                            </div>
                                                                        }
                                                                    </div>

                                                                    <!-- Google Scholar -->
                                                                    <div class="form-group">
                                                                        <label><strong>Google Scholar</strong></label>
                                                                        @if (!string.IsNullOrEmpty(currentProfessorDetailsToShowOnHyperlinkAsStudentForProfessorEvents.ProfScholarProfile))
                                                                        {
                                                                            <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                <i class="fas fa-book-reader" style="color: #4285F4; margin-right: 8px;"></i>
                                                                                <span style="color: #007bff; cursor: pointer;" onclick="window.open('@currentProfessorDetailsToShowOnHyperlinkAsStudentForProfessorEvents.ProfScholarProfile', '_blank')">
                                                                                    @currentProfessorDetailsToShowOnHyperlinkAsStudentForProfessorEvents.ProfScholarProfile
                                                                                </span>
                                                                            </div>
                                                                        }
                                                                    </div>

                                                                    <!-- Orchid -->
                                                                    <div class="form-group">
                                                                        <label><strong>Orchid</strong></label>
                                                                        @if (!string.IsNullOrEmpty(currentProfessorDetailsToShowOnHyperlinkAsStudentForProfessorEvents.ProfOrchidProfile))
                                                                        {
                                                                            <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                <i class="fas fa-id-card" style="color: #00b3b3; margin-right: 8px;"></i>
                                                                                <span style="color: #007bff; cursor: pointer;" onclick="window.open('@currentProfessorDetailsToShowOnHyperlinkAsStudentForProfessorEvents.ProfOrchidProfile', '_blank')">
                                                                                    @currentProfessorDetailsToShowOnHyperlinkAsStudentForProfessorEvents.ProfOrchidProfile
                                                                                </span>
                                                                            </div>
                                                                        }
                                                                    </div>



                                                                    <!-- Expanded fields with textarea -->
                                                                    <div class="form-group">
                                                                        <label><strong>Πεδίο Εργασίας</strong></label>
                                                                        <textarea class="form-control" rows="3" readonly>@currentProfessorDetailsToShowOnHyperlinkAsStudentForProfessorEvents.ProfGeneralFieldOfWork</textarea>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Τεχνικές Δεξιότητες/Ενδιαφέροντα</strong></label>
                                                                        <textarea class="form-control" rows="3" readonly>@currentProfessorDetailsToShowOnHyperlinkAsStudentForProfessorEvents.ProfGeneralSkills</textarea>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Προσωπική Περιγραφή</strong></label>
                                                                        <textarea class="form-control" rows="3" readonly>@currentProfessorDetailsToShowOnHyperlinkAsStudentForProfessorEvents.ProfPersonalDescription</textarea>
                                                                    </div>
                                                                    <br/>
                                                                    <div class="form-group">
                                                                        <label for="viewCV"><strong>Βιογραφικό: </strong></label>
                                                                        @if (currentProfessorDetailsToShowOnHyperlinkAsStudentForProfessorEvents.ProfCVAttachment != null)
                                                                        {
                                                                            <a href="data:application/pdf;base64,@Convert.ToBase64String(currentProfessorDetailsToShowOnHyperlinkAsStudentForProfessorEvents.ProfCVAttachment)" download="ProfCV.pdf" class="btn btn-primary">
                                                                                Λήψη Βιογραφικού
                                                                            </a>
                                                                        }
                                                                        else
                                                                        {
                                                                            <p>Δεν υπάρχει διαθέσιμο βιογραφικό</p>
                                                                        }
                                                                    </div>
                                                                </div>
                                                                <div class="modal-footer">
                                                                    <button type="button" class="btn btn-secondary" @onclick="CloseProfessorDetailsModalAtEventsAsStudent">Κλείσιμο</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                }



                                                @if(isModalVisibleForProfessorInternshipsAsStudent && currentProfessorInternship != null)
                                                {
                                                    <div class="modal fade show d-block" id="professorInternshipDetailsModal" tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                                        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h5 class="modal-title" style="color: #4682B4;">@currentProfessorInternship.ProfessorInternshipTitle</h5>
                                                                    <button type="button" class="close" @onclick="CloseProfessorInternshipDetailsModal" aria-label="Κλείσιμο">
                                                                        <span aria-hidden="true">&times;</span>
                                                                    </button>
                                                                </div>
                                                                <div class="modal-body">
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Τύπος Θέσης</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto; background-color: #e9ecef; color: #495057;">
                                                                            <span>
                                                                                @(currentProfessorInternship.ProfessorInternshipType == "Full-Time" ? "Πλήρους Απασχόλησης" :
                                                                                  currentProfessorInternship.ProfessorInternshipType == "Part-Time" ? "Μερικής Απασχόλησης" :
                                                                                  currentProfessorInternship.ProfessorInternshipType == "Part-Time_Full-Time" ? "Πλήρους ή Μερικής Απασχόλησης " :
                                                                                  currentProfessorInternship.ProfessorInternshipType)
                                                                            </span>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Φορέας</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto; background-color: #e9ecef; color: #495057;">
                                                                            <span>@(string.IsNullOrWhiteSpace(currentProfessorInternship.ProfessorInternshipForeas) ? "Δεν έχει διευκρινιστεί" : currentProfessorInternship.ProfessorInternshipForeas)</span>
                                                                        </div>
                                                                    </div>


                                                                    <div class="form-group">
                                                                         <label style="font-weight: bold;">Χρηματοδότηση</label>
                                                                         <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                              <i class="fas fa-hand-holding-dollar" style="color: #28a745; margin-right: 8px;"></i>
                                                                               <span>
                                                                                     @(
                                                                                         currentProfessorInternship.ProfessorInternshipESPA == "ESPA-Funding" ? "Μέσω ΕΣΠΑ" :
                                                                                         currentProfessorInternship.ProfessorInternshipESPA == "Same-Funding" ? "Ιδίου Φορέα" :
                                                                                         currentProfessorInternship.ProfessorInternshipESPA == "ESPA-Funding_Same-Funding" ? "Μέσω ΕΣΠΑ ή Ιδίου Φορέα" :
                                                                                         ""
                                                                                      )
                                                                                </span>
                                                                          </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Περιγραφή</label>
                                                                        <textarea class="form-control" readonly style="height: 120px;">@currentProfessorInternship.ProfessorInternshipDescription</textarea>
                                                                    </div>
                
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Περιοχές</label>
                                                                        <textarea class="form-control" readonly>@currentProfessorInternship.ProfessorInternshipAreas</textarea>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Ημερομηνία Ανάρτησης</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="far fa-calendar-alt" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                            <span>@currentProfessorInternship.ProfessorInternshipUploadDate.ToString("yyyy-MM-dd")</span>
                                                                        </div>
                                                                    </div>
                
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Επιβλέπων Καθηγητής</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-user-tie" style="color: #6c757d; margin-right: 8px;"></i>
                                                                            <span>@currentProfessorInternship.ProfessorInternshipContactPerson</span>
                                                                        </div>
                                                                    </div>
                
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Τηλέφωνο Επιβλέπων Καθηγητή</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                            <span>@currentProfessorInternship.ProfessorInternshipContactTelephonePerson</span>
                                                                        </div>
                                                                    </div>
                
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Περιοχή</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-map-marked-alt" style="color: #6c757d; margin-right: 8px;"></i>
                                                                            <span>@currentProfessorInternship.ProfessorInternshipPerifereiaLocation</span>
                                                                        </div>
                                                                    </div>
                
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Δήμος</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-city" style="color: #6c757d; margin-right: 8px;"></i>
                                                                            <span>@currentProfessorInternship.ProfessorInternshipDimosLocation</span>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Διεύθυνση</strong></label>
                                                                        <div class="form-control d-flex align-items-center mt-1" style="height: auto;">
                                                                            <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                            @if (!string.IsNullOrWhiteSpace(currentProfessorInternship.ProfessorInternshipAddress))
                                                                            {
                                                                                <a href="https://www.google.com/maps/search/@currentProfessorInternship.ProfessorInternshipAddress"
                                                                                   target="_blank"
                                                                                   style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                    @currentProfessorInternship.ProfessorInternshipAddress
                                                                                </a>
                                                                            }
                                                                            else
                                                                            {
                                                                                <span style="color: #6c757d;">Δεν έχει διευκρινιστεί</span>
                                                                            }
                                                                        </div>
                                                                    </div>
                
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Ταχυδρομικός Κώδικας</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-envelope-open-text" style="color: #6c757d; margin-right: 8px;"></i>
                                                                            <span>@currentProfessorInternship.ProfessorInternshipPostalCodeLocation</span>
                                                                        </div>
                                                                    </div>
                
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Προσφορά Μεταφορικού Μέσου</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto; 
                                                                             @(currentProfessorInternship.ProfessorInternshipTransportOffer ? "color: #28a745;" : "color: #dc3545;")">
                                                                            <i class="fas fa-car" style="margin-right: 8px;"></i>
                                                                            <span>@(currentProfessorInternship.ProfessorInternshipTransportOffer ? "Ναι" : "Όχι")</span>
                                                                        </div>
                                                                    </div>
                
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold; color: #87CEEB;">Ενδιαφερόμενη Εταιρεία</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-building" style="color: #87CEEB; margin-right: 8px;"></i>
                                                                            <span>
                                                                                @(string.IsNullOrEmpty(currentProfessorInternship.ProfessorInternshipEKPASupervisor)
                                                                                    ? "Καμία Ένδειξη Ενδιαφέροντος από Εταιρεία ακόμη"
                                                                                    : currentProfessorInternship.ProfessorInternshipEKPASupervisor)
                                                                            </span>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Ξεκινάει Από</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="far fa-calendar-alt" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                            <span>@currentProfessorInternship.ProfessorInternshipActivePeriod.ToString("yyyy-MM-dd")</span>
                                                                        </div>
                                                                    </div>
                
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Εκτιμώμενη Ημερομηνία Ολοκλήρωσης</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="far fa-calendar-alt" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                            <span>@currentProfessorInternship.ProfessorInternshipFinishEstimation.ToString("yyyy-MM-dd")</span>
                                                                        </div>
                                                                    </div>
                                                       
                                                                    <br/>
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Συνημμένο</label>
                                                                        <br/>
                                                                        @if (currentProfessorInternship.ProfessorInternshipAttachment != null)
                                                                        {
                                                                            <a href="@("data:application/pdf;base64," + Convert.ToBase64String(currentProfessorInternship.ProfessorInternshipAttachment))" 
                                                                               download="ProfessorInternshipAttachment.pdf" class="btn btn-primary btn-sm">
                                                                                <i class="fas fa-download"></i> Λήψη Αρχείου
                                                                            </a>
                                                                        }
                                                                        else
                                                                        {
                                                                            <span class="text-danger">Δεν διατίθεται συνημμένο αρχείο</span>
                                                                        }
                                                                    </div>
                                                                </div>
                                                                <div class="modal-footer">
                                                                    <button type="button" class="btn btn-secondary" @onclick="CloseProfessorInternshipDetailsModal">Κλείσιμο</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                }

                                            <!-- Job Details Modal -->
                                            @if(isJobDetailsModal2Visible)
                                            {
                                                <div class="modal fade" id="jobDetailsModal2" tabindex="-1" aria-labelledby="jobDetailsModalLabel" aria-hidden="true">
                                                    <div class="modal-dialog modal-lg">
                                                        <div class="modal-content">
                                                            <div class="modal-header">
                                                                <h5 class="modal-title" id="jobDetailsModalLabel">Λεπτομέρειες Θέσης Εργασίας</h5>
                                                                <button type="button" class="btn-close" @onclick="CloseJobDetailsModal" aria-label="Κλείσιμο"></button>
                                                            </div>
                                                            <div class="modal-body">
                                                                @if (currentJob != null)
                                                                {
                                                                    <dl class="row">
                                                                        <dt class="col-sm-3">Εταιρία</dt>
                                                                        <dd class="col-sm-9">@(currentJob.Company?.CompanyName ?? "Δεν υπάρχει")</dd>

                                                                        <dt class="col-sm-3">Τίτλος</dt>
                                                                        <dd class="col-sm-9">@currentJob.PositionTitle</dd>

                                                                        <dt class="col-sm-3">Τύπος</dt>
                                                                        <dd class="col-sm-9">@currentJob.PositionType</dd>

                                                                        <dt class="col-sm-3">Τομείς</dt>
                                                                        <dd class="col-sm-9">@currentJob.PositionAreas</dd>

                                                                        <dt class="col-sm-3">Περιφέρεια</dt>
                                                                        <dd class="col-sm-9">@currentJob.PositionPerifereiaLocation</dd>

                                                                        <dt class="col-sm-3">Περιοχή</dt>
                                                                        <dd class="col-sm-9">@currentJob.PositionDimosLocation</dd>

                                                                        <dt class="col-sm-3">Ταχυδρομικός Κώδικας</dt>
                                                                        <dd class="col-sm-9">@currentJob.PositionPostalCodeLocation</dd>

                                                                        <dt class="col-sm-3">Τμήμα Εταιρίας</dt>
                                                                        <dd class="col-sm-9">@currentJob.PositionDepartment</dd>

                                                                        <dt class="col-sm-3">Ημερομηνία Ανάρτησης</dt>
                                                                        <dd class="col-sm-9">@currentJob.UploadDateTime.ToString("yyyy-MM-dd")</dd>

                                                                        <dt class="col-sm-3">Ξεκινάει</dt>
                                                                        <dd class="col-sm-9">@currentJob.PositionActivePeriod.ToString("yyyy-MM-dd")</dd>

                                                                        <dt class="col-sm-3">Σύντομη Περιγραφή</dt>
                                                                        <dd class="col-sm-9">@currentJob.PositionDescription</dd>                                                      
                                                                    </dl>
                                                                }
                                                            </div>
                                                            <div class="modal-footer">
                                                                <button type="button" class="btn btn-secondary" @onclick="CloseJobDetailsModal">Κλείσιμο</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                }
                                            }

                                }
                                            
 @*---------------------------------------------------------------------------------------- STUDENTS TAB TABLE END ---------------------------------------------------------------------------------------------------------------------------------------------*@                   
                           



@*---------------------------------------------------------------------------------------------------------- COMPANIES START------------------------------------------------------------------------------------------------------------*@

                            @if (UserRole == "Company")
                            {
                                @if (!isInitializedAsCompanyUser)
                                {
                                    <div style="color: purple; font-weight: bold; text-align: center; margin: 10px 0;">
                                        Φορτώνει, Παρακαλώ Περιμένετε...
                                    </div>
                                    <div class="loading-bar-container">                                       
                                        <div class="loading-bar"></div>
                                    </div>
                                }
                                else if (!isCompanyRegistered)
                                {
                                    <div style="display: flex; justify-content: flex-start; padding: 20px; flex-direction: column;">
                                        <div style="width: 300px; border: none; border-radius: 12px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); transition: transform 0.3s ease, box-shadow 0.3s ease; background: linear-gradient(135deg, #f9f9f9, #e0e0e0);">
                                            <div style="padding: 20px; text-align: center;">
                                                <h5 style="font-size: 1.5rem; font-weight: bold; color: #333; margin-bottom: 20px;">Προφίλ Εταιρείας</h5>
                                                <a style="background-color: #007bff; border: none; border-radius: 25px; padding: 10px 20px; font-size: 1rem; color: white; text-decoration: none; transition: background-color 0.3s ease, transform 0.2s ease;" href="companyRegistration" onmouseover="this.style.backgroundColor='#0056b3'; this.style.transform='scale(1.05)'" onmouseout="this.style.backgroundColor='#007bff'; this.style.transform='scale(1)'">Εγγραφή</a>
                                            </div>
                                        </div>
                                        <p style="font-size: 0.9rem; color: #000; margin-top: 7px; text-align: center; font-weight: bold;">
                                            <span style="color: #ff0000;">**</span> <span style="color: #ff0000;">Προσοχή</span>: Για εμφάνιση του περιεχομένου της σελίδας είναι <span style="color: #ff0000;">Υποχρεωτική</span> η Εγγραφή σας
                                        </p>                                      
                                    </div>
                                }
                                else
                                {
                                <div class="content-area position-relative">
                                    <div class="table-bordered position-relative">
                                        <!-- Tabs navigation -->
                                        <ul class="nav nav-tabs" id="myTab" role="tablist">
                                            <li class="nav-item position-relative" role="presentation">
                                                <button class="nav-link fade show active" id="announcements-tab" data-bs-toggle="tab" data-bs-target="#announcements" type="button" role="tab" aria-controls="announcements" aria-selected="true">Ανακοινώσεις</button>
                                            </li>
                                            <li class="nav-item position-relative" role="presentation">
                                                <button class="nav-link" id="events-tab" data-bs-toggle="tab" data-bs-target="#events" type="button" role="tab" aria-controls="events" aria-selected="false">Εκδηλώσεις</button>
                                            </li>
                                            <li class="nav-item position-relative" role="presentation">
                                                <button class="nav-link" id="jobs-tab" data-bs-toggle="tab" data-bs-target="#jobs" type="button" role="tab" aria-controls="jobs" aria-selected="false">Θέσεις Εργασίας</button>
                                            </li>
                                            <li class="nav-item position-relative" role="presentation">
                                                <button class="nav-link" id="internships-tab" data-bs-toggle="tab" data-bs-target="#internships" type="button" role="tab" aria-controls="internships" aria-selected="false">Θέσεις Πρακτικής Άσκησης</button>
                                            </li>
                                            <li class="nav-item position-relative" role="presentation">
                                                <button class="nav-link" id="thesis-tab" data-bs-toggle="tab" data-bs-target="#thesis" type="button" role="tab" aria-controls="thesis" aria-selected="false">Πτυχιακές Εργασίες</button>
                                            </li>
                                            <li class="nav-item position-relative" role="presentation">
                                                <button class="nav-link" id="student-search-tab" data-bs-toggle="tab" data-bs-target="#student-search" type="button" role="tab" aria-controls="student-search" aria-selected="false">Αναζήτηση Φοιτητή</button>
                                            </li>
                                            <li class="nav-item position-relative" role="presentation">
                                                <button class="nav-link" id="professor-search-tab" data-bs-toggle="tab" data-bs-target="#professor-search" type="button" role="tab" aria-controls="professor-search" aria-selected="false">Αναζήτηση Καθηγητή</button>
                                            </li>
                                            <li class="nav-item position-relative" role="presentation">
                                                <button class="nav-link" id="researchgroup-search-tab" data-bs-toggle="tab" data-bs-target="#researchgroup-search" type="button" role="tab" aria-controls="researchgroup-search" aria-selected="false">Αναζήτηση Ερευνητικής Ομάδας</button>
                                            </li>
                                        </ul>

                                        <!-- Tab panes -->
                                        <div class="tab-content mt-3" id="myTabContent">
                                            <!-- CREATE ANNOUNCEMENTS TAB AS COMPANY -->
                                            <div class="tab-pane fade show active" id="announcements" role="tabpanel" aria-labelledby="announcements-tab">

                                                <div class="mb-3 row-dark-gray">
                                                        <div class="d-flex justify-content-between align-items-center">
                                                            <label class="form-label" style="color: #FFF8DC;">• Πρόσφατες Ανακοινώσεις •</label>
                                                            <button class="btn btn-link" @onclick="ToggleFormVisibilityToShowGeneralAnnouncementsAndEventsAsCompany">
                                                                @if (isAnnouncementsFormVisibleToShowGeneralAnnouncementsAndEventsAsCompany)
                                                                {
                                                                    <span>&#8722;</span> <!-- Minus sign -->
                                                                }
                                                                else
                                                                {
                                                                    <span>&#43;</span> <!-- Plus sign -->
                                                                }
                                                            </button>
                                                        </div>
                                                </div>

                                                    @if (isAnnouncementsFormVisibleToShowGeneralAnnouncementsAndEventsAsCompany)
                                                    {

                                                            <!-- University News Section -->
                                                            <div class="mb-3" style="background-color: #e6f2ff; border: 1px solid #b3c6e0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                                                <div class="d-flex justify-content-between align-items-center p-3" style="border-bottom: 1px solid #b3c6e0;">
                                                                    <h1 class="news-heading form-label m-0">
                                                                        <span class="black-text">
                                                                            <span style="color: #b399d4; margin-left: 10px; margin-right: 5px;">
                                                                                <i class="fas fa-rss"></i>
                                                                            </span>
                                                                            Πανεπιστήμιο Αθηνών
                                                                        </span>
                                                                    </h1>
                                                                    <button class="btn" 
                                                                            style="width: 30px; height: 30px; border-radius: 50%; background-color: #0d47a1; color: white; border: none; padding: 0; display: flex; align-items: center; justify-content: center; margin-right: 10px;" 
                                                                            @onclick="ToggleUniversityNewsVisibility">
                                                                        @if (isUniversityNewsVisible)
                                                                        {
                                                                            <span>&#8722;</span> 
                                                                        }
                                                                        else
                                                                        {
                                                                            <span>&#43;</span> 
                                                                        }
                                                                    </button>
                                                                </div>
    
                                                                @if (isUniversityNewsVisible)
                                                                {
                                                                    <div id="university-news-content" class="p-3" style="border-top: 1px solid #e6f2ff;">
                                                                        @if (newsArticles != null && newsArticles.Any())
                                                                        {
                                                                            @foreach (var article in newsArticles)
                                                                            {
                                                                                <div class="news-article mb-2 pb-2" style="border-bottom: 1px dashed #ccc;">
                                                                                    <a href="@article.Url" target="_blank" style="color: #0d47a1; text-decoration: none;">
                                                                                        <i class="fa fa-external-link me-2" style="font-size: 0.8em;"></i>@article.Title
                                                                                    </a>
                                                                                </div>
                                                                            }
                                                                        }
                                                                        else
                                                                        {
                                                                            <p class="mb-0 text-muted">Καμία Ανακοίνωση από το Πανεπιστήμιο Αθηνών ακόμη....</p>
                                                                        }
                                                                    </div>
                                                                }
                                                            </div>

                                                            <!-- SVSE News Section -->
                                                            <div class="mb-3" style="background-color: #e6f2ff; border: 1px solid #b3c6e0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                                                <div class="d-flex justify-content-between align-items-center p-3" style="border-bottom: 1px solid #b3c6e0;">
                                                                    <h1 class="news-heading form-label m-0">
                                                                        <span class="black-text">
                                                                            <span style="color: #b399d4; margin-left: 10px; margin-right: 5px;">
                                                                                <i class="fas fa-rss"></i>
                                                                            </span>
                                                                            Σύνδεσμος Βιομηχανιών Στερεάς Ελλάδας
                                                                        </span>
                                                                    </h1>
                                                                    <button class="btn" 
                                                                            style="width: 30px; height: 30px; border-radius: 50%; background-color: #0d47a1; color: white; border: none; padding: 0; display: flex; align-items: center; justify-content: center; margin-right: 10px;" 
                                                                            @onclick="ToggleSvseNewsVisibility">
                                                                        @if (isSvseNewsVisible)
                                                                        {
                                                                            <span>&#8722;</span> <!-- Minus sign -->
                                                                        }
                                                                        else
                                                                        {
                                                                            <span>&#43;</span> <!-- Plus sign -->
                                                                        }
                                                                    </button>
                                                                </div>
    
                                                                @if (isSvseNewsVisible)
                                                                {
                                                                    <div id="svse-news-content" class="p-3" style="border-top: 1px solid #e6f2ff;">
                                                                        @if (svseNewsArticles != null && svseNewsArticles.Any())
                                                                        {
                                                                            @foreach (var article in svseNewsArticles)
                                                                            {
                                                                                <div class="news-article mb-2 pb-2" style="border-bottom: 1px dashed #ccc;">
                                                                                    <a href="@article.Url" target="_blank" style="color: #0d47a1; text-decoration: none;">
                                                                                        <i class="fa fa-external-link me-2" style="font-size: 0.8em;"></i>@article.Title
                                                                                    </a>
                                                                                </div>
                                                                            }
                                                                        }
                                                                        else
                                                                        {
                                                                            <p class="mb-0 text-muted">Καμία Ανακοίνωση από τον ΣΒΣΕ ακόμη....</p>
                                                                        }
                                                                    </div>
                                                                }
                                                            </div>

                                                            <!-- Platform company announcements -->
                                                            <div class="mb-3" style="background-color: #e6f2ff; border: 1px solid #b3c6e0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                                                <div class="d-flex justify-content-between align-items-center p-3" style="border-bottom: 1px solid #b3c6e0;">
                                                                    <h1 class="news-heading form-label m-0">
                                                                        <span class="black-text">
                                                                            <span style="color: #b399d4; margin-left: 10px; margin-right: 5px;">
                                                                                <i class="fas fa-list"></i>
                                                                            </span>
                                                                            Ανακοινώσεις Εταιρειών
                                                                        </span>
                                                                    </h1>
                                                                    <button class="btn" 
                                                                            style="width: 30px; height: 30px; border-radius: 50%; background-color: #0d47a1; color: white; border: none; padding: 0; display: flex; align-items: center; justify-content: center; margin-right: 10px;" 
                                                                            @onclick="ToggleCompanyAnnouncementsVisibility">
                                                                        @if (isCompanyAnnouncementsVisible)
                                                                        {
                                                                            <span>&#8722;</span> <!-- Minus sign -->
                                                                        }
                                                                        else
                                                                        {
                                                                            <span>&#43;</span> <!-- Plus sign -->
                                                                        }
                                                                    </button>
                                                                </div>
    
                                                                @if (isCompanyAnnouncementsVisible)
                                                                {
                                                                    <div class="p-3" style="border-top: 1px solid #e6f2ff;">
                                                                        @if (Announcements != null && Announcements.Any(announcement => announcement.CompanyAnnouncementStatus == "Δημοσιευμένη"))
                                                                        {
                                                                            <!-- Display paginated announcements sorted by upload date descending -->
                                                                            @foreach (var announcement in Announcements
                                                                               .Where(a => a.CompanyAnnouncementStatus == "Δημοσιευμένη")
                                                                               .OrderByDescending(a => a.CompanyAnnouncementUploadDate)
                                                                               .Skip((currentPageForCompanyAnnouncements - 1) * pageSize)
                                                                               .Take(pageSize))
                                                                            {
                                                                                <div class="news-article mb-3 pb-2" style="border-bottom: 1px dashed #ccc;">
                                                                                    <!-- Clicking on title toggles description -->
                                                                                    <a href="javascript:void(0);"
                                                                                       @onclick="() => ToggleDescription(announcement.Id)"
                                                                                       style="display: block; max-width: 100%; overflow-wrap: break-word; color: #0d47a1; text-decoration: none; cursor: pointer;"
                                                                                       title="Κάντε Κλικ εδώ για να δείτε την περιγραφή της ανακοίνωσης">
                                                                                        <span class="black-text">• <strong>@(announcement.Company?.CompanyName ?? "Άγνωστη Εταιρεία")</strong></span> - @announcement.CompanyAnnouncementTitle
                                                                                        <span class="text-muted">(@announcement.CompanyAnnouncementUploadDate.ToString("dd/MM/yyyy"))</span>
                                                                                    </a>

                                                                                    <!-- Show description based on toggle state -->
                                                                                    <div class="announcement-description mt-2 @(expandedAnnouncementId == announcement.Id ? "expanded" : "collapsed")">
                                                                                        @if (expandedAnnouncementId == announcement.Id)
                                                                                        {
                                                                                            <p style="color: #333;">@announcement.CompanyAnnouncementDescription</p>
                                
                                                                                            @if (announcement.CompanyAnnouncementAttachmentFile != null && announcement.CompanyAnnouncementAttachmentFile.Length > 0)
                                                                                            {
                                                                                                <p class="announcement-attachment mt-2">
                                                                                                    <a href="#"
                                                                                                       @onclick="() => DownloadAnnouncementAttachmentFrontPage(announcement.CompanyAnnouncementAttachmentFile, announcement.CompanyAnnouncementTitle)"
                                                                                                       style="color: #c62828; text-decoration: none;"
                                                                                                       title="Κάντε Κλικ εδώ για να κατεβάσετε το αρχείο">
                                                                                                        <i class="fa fa-download me-1"></i> 
                                                                                                        Συννημένο Αρχείο Ανακοίνωσης
                                                                                                    </a>
                                                                                                </p>
                                                                                            }
                                                                                        }
                                                                                    </div>
                                                                                </div>
                                                                            }
                                                                        
                                                                                <!-- Pagination Controls for Company Announcements -->
                                                                                <div class="d-flex justify-content-center align-items-center mt-3 gap-1">
                                                                                    <!-- First Page (<<) -->
                                                                                    <span class="pagination-item @(currentPageForCompanyAnnouncements == 1 ? "disabled" : "")"
                                                                                          @onclick="GoToFirstPageForCompanyAnnouncements">
                                                                                        &lt;&lt;
                                                                                    </span>

                                                                                    <!-- Previous Page (<) -->
                                                                                    <span class="pagination-item @(currentPageForCompanyAnnouncements == 1 ? "disabled" : "")"
                                                                                          @onclick="PreviousPageForCompanyAnnouncements">
                                                                                        &lt;
                                                                                    </span>

                                                                                    <!-- Page Numbers -->
                                                                                    @foreach (var pageNumber in GetVisiblePagesForCompanyAnnouncements())
                                                                                    {
                                                                                        if (pageNumber == -1)
                                                                                        {
                                                                                            <span class="pagination-ellipsis">...</span>
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <span class="pagination-item @(pageNumber == currentPageForCompanyAnnouncements ? "active" : "")"
                                                                                                  @onclick="() => GoToPageForCompanyAnnouncements(pageNumber)">
                                                                                                @pageNumber
                                                                                            </span>
                                                                                        }
                                                                                    }

                                                                                    <!-- Next Page (>) -->
                                                                                    <span class="pagination-item @(currentPageForCompanyAnnouncements == totalPagesForCompanyAnnouncements ? "disabled" : "")"
                                                                                          @onclick="NextPageForCompanyAnnouncements">
                                                                                        &gt;
                                                                                    </span>

                                                                                    <!-- Last Page (>>) -->
                                                                                    <span class="pagination-item @(currentPageForCompanyAnnouncements == totalPagesForCompanyAnnouncements ? "disabled" : "")"
                                                                                          @onclick="GoToLastPageForCompanyAnnouncements">
                                                                                        &gt;&gt;
                                                                                    </span>

                                                                                    <span class="ms-3">Σελίδα @currentPageForCompanyAnnouncements από @totalPagesForCompanyAnnouncements</span>
                                                                                </div>

                                                                        }
                                                                        else
                                                                        {
                                                                            <p class="mb-0 text-muted">Καμία Ανακοίνωση από Εταιρείες ακόμη......</p>
                                                                        }
                                                                    </div>
                                                                }
                                                            </div>

                                                            <!-- Platform professor announcements -->
                                                            <div class="mb-3" style="background-color: #e6f2ff; border: 1px solid #b3c6e0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                                                <div class="d-flex justify-content-between align-items-center p-3" style="border-bottom: 1px solid #b3c6e0;">
                                                                    <h1 class="news-heading form-label m-0">
                                                                        <span class="black-text">
                                                                            <span style="color: #b399d4; margin-left: 10px; margin-right: 5px;">
                                                                                <i class="fas fa-list"></i>
                                                                            </span>
                                                                            Ανακοινώσεις Καθηγητών
                                                                        </span>
                                                                    </h1>
                                                                    <button class="btn" 
                                                                            style="width: 30px; height: 30px; border-radius: 50%; background-color: #0d47a1; color: white; border: none; padding: 0; display: flex; align-items: center; justify-content: center; margin-right: 10px; cursor: pointer;"
                                                                            @onclick="ToggleProfessorAnnouncementsVisibility">
                                                                        @if (isProfessorAnnouncementsVisible)
                                                                        {
                                                                            <span>&#8722;</span> <!-- Minus sign -->
                                                                        }
                                                                        else
                                                                        {
                                                                            <span>&#43;</span> <!-- Plus sign -->
                                                                        }
                                                                    </button>
                                                                </div>
    
                                                                @if (isProfessorAnnouncementsVisible)
                                                                {
                                                                    <div class="p-3" style="border-top: 1px solid #e6f2ff;">
                                                                        @if (ProfessorAnnouncements != null && ProfessorAnnouncements.Any(announcement => announcement.ProfessorAnnouncementStatus == "Δημοσιευμένη"))
                                                                        {
                                                                            <!-- Display paginated announcements sorted by upload date descending -->
                                                                            @foreach (var announcement in ProfessorAnnouncements
                                                                           .Where(a => a.ProfessorAnnouncementStatus == "Δημοσιευμένη")
                                                                           .OrderByDescending(a => a.ProfessorAnnouncementUploadDate)
                                                                           .Skip((currentPageForProfessorAnnouncements - 1) * pageSize)
                                                                           .Take(pageSize))
                                                                           {
                                                                                <div class="news-article mb-3 pb-2" style="border-bottom: 1px dashed #ccc;">
                                                                                    <!-- Clicking on title toggles description -->
                                                                                    <a href="javascript:void(0);"
                                                                                       @onclick="() => ToggleDescriptionForProfessorAnnouncements(announcement.Id)"
                                                                                       style="display: block; max-width: 100%; overflow-wrap: break-word; color: #0d47a1; text-decoration: none; cursor: pointer;"
                                                                                       title="Κάντε Κλικ εδώ για να δείτε την περιγραφή της ανακοίνωσης">
                                                                                        <span class="black-text">• 
                                                                                            <strong>@(announcement.Professor?.ProfName ?? "N/A")</strong> 
                                                                                            <strong>@(announcement.Professor?.ProfSurname ?? "N/A")</strong>
                                                                                        </span> - @announcement.ProfessorAnnouncementTitle
                                                                                        <span class="text-muted">(@announcement.ProfessorAnnouncementUploadDate.ToString("dd/MM/yyyy"))</span>
                                                                                    </a>
                                                                                    <!-- Show description based on toggle state -->
                                                                                    <div class="announcement-description mt-2 @(expandedProfessorAnnouncementId == announcement.Id ? "expanded" : "collapsed")">
                                                                                        @if (expandedProfessorAnnouncementId == announcement.Id)
                                                                                        {
                                                                                            <p style="color: #333;">@announcement.ProfessorAnnouncementDescription</p>
                                
                                                                                            @if (announcement.ProfessorAnnouncementAttachmentFile != null && announcement.ProfessorAnnouncementAttachmentFile.Length > 0)
                                                                                            {
                                                                                                <p class="announcement-attachment mt-2">
                                                                                                    <a href="#"
                                                                                                       @onclick="() => DownloadProfessorAnnouncementAttachmentFrontPage(announcement.ProfessorAnnouncementAttachmentFile, announcement.ProfessorAnnouncementTitle)"
                                                                                                       style="color: #c62828; text-decoration: none;"
                                                                                                       title="Κάντε Κλικ εδώ για να κατεβάσετε το αρχείο">
                                                                                                        <i class="fa fa-download me-1"></i>
                                                                                                        Συννημένο Αρχείο Ανακοίνωσης
                                                                                                    </a>
                                                                                                </p>
                                                                                            }
                                                                                        }
                                                                                    </div>
                                                                                </div>
                                                                           }
                                                                                <!-- Pagination Controls for Professor Announcements -->
                                                                                <div class="d-flex justify-content-center align-items-center mt-3 gap-1">
                                                                                    <!-- First Page (<<) -->
                                                                                    <span class="pagination-item @(currentPageForProfessorAnnouncements == 1 ? "disabled" : "")"
                                                                                          @onclick="GoToFirstPageForProfessorAnnouncements">
                                                                                        &lt;&lt;
                                                                                    </span>

                                                                                    <!-- Previous Page (<) -->
                                                                                    <span class="pagination-item @(currentPageForProfessorAnnouncements == 1 ? "disabled" : "")"
                                                                                          @onclick="PreviousPageForProfessorAnnouncements">
                                                                                        &lt;
                                                                                    </span>

                                                                                    <!-- Page Numbers -->
                                                                                    @foreach (var pageNumber in GetVisiblePagesForProfessorAnnouncements())
                                                                                    {
                                                                                        if (pageNumber == -1)
                                                                                        {
                                                                                            <span class="pagination-ellipsis">...</span>
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <span class="pagination-item @(pageNumber == currentPageForProfessorAnnouncements ? "active" : "")"
                                                                                                  @onclick="() => GoToPageForProfessorAnnouncements(pageNumber)">
                                                                                                @pageNumber
                                                                                            </span>
                                                                                        }
                                                                                    }

                                                                                    <!-- Next Page (>) -->
                                                                                    <span class="pagination-item @(currentPageForProfessorAnnouncements == totalPagesForProfessorAnnouncements ? "disabled" : "")"
                                                                                          @onclick="NextPageForProfessorAnnouncements">
                                                                                        &gt;
                                                                                    </span>

                                                                                    <!-- Last Page (>>) -->
                                                                                    <span class="pagination-item @(currentPageForProfessorAnnouncements == totalPagesForProfessorAnnouncements ? "disabled" : "")"
                                                                                          @onclick="GoToLastPageForProfessorAnnouncements">
                                                                                        &gt;&gt;
                                                                                    </span>

                                                                                    <span class="ms-3">Σελίδα @currentPageForProfessorAnnouncements από @totalPagesForProfessorAnnouncements</span>
                                                                                </div>

                                                                        }
                                                                        else
                                                                        {
                                                                            <p class="mb-0 text-muted">Καμία Ανακοίνωση από Καθηγητές ακόμη......</p>
                                                                        }
                                                                    </div>
                                                                }
                                                            </div>                                                          
                                                            <br/>
                                                            <br />
                                                        
                                                    }

                                                @*iNPUT FIELDS SHOULD BE HERE FOR UPLOAD ANNOUNCEMENT AS COMPANY*@
                                                <!-- Announcement Form -->
                                                <div class="tab-pane fade show active" id="announcements" role="tabpanel" aria-labelledby="announcements-tab">
                                                    <div class="mb-3 row-dark-gray">
                                                        <div class="d-flex justify-content-between align-items-center">
                                                            <label class="form-label" style="color: #FFF8DC;">• Δημιουργία Ανακοίνωσης •</label>
                                                            <button class="btn btn-link" @onclick="ToggleFormVisibilityForUploadCompanyAnnouncements">
                                                                @if (isAnnouncementsFormVisible)
                                                                {
                                                                    <span>&#8722;</span> <!-- Minus sign -->
                                                                }
                                                                else
                                                                {
                                                                    <span>&#43;</span> <!-- Plus sign -->
                                                                }
                                                            </button>
                                                        </div>
                                                    </div>
   
                                                    @if (isAnnouncementsFormVisible)
                                                    {
                                                        <div class="row mb-3">
                                                            <div class="col-md-4 position-relative">
                                                                <label for="announcementTitle">
                                                                    <strong>Τίτλος Ανακοίνωσης</strong>
                                                                    <span style="color: red;">*</span>
                                                                </label>
                                                                <input type="text" id="announcementTitle" class="form-control @(showErrorMessageforUploadingAnnouncementAsCompany && string.IsNullOrWhiteSpace(announcement.CompanyAnnouncementTitle) ? "shake error" : "")" 
                                                                       @bind="announcement.CompanyAnnouncementTitle" 
                                                                       @oninput="CheckCharacterLimitInAnnouncementFieldUploadAsCompany" maxlength="120" />
                                                                <small class="character-limit light-cadetblue-text">@remainingCharactersInAnnouncementFieldUploadAsCompany/120</small>
                                                            </div>
                                                            @if (showErrorMessageforUploadingAnnouncementAsCompany && string.IsNullOrWhiteSpace(announcement.CompanyAnnouncementTitle))
                                                            {
                                                                <div class="text-danger mt-1">Απαιτείται Tίτλος Ανακοίνωσης!</div>
                                                            }
                                                        </div>

                                                        <div class="row mb-3">
                                                            <div class="col-md-4 position-relative">
                                                                <label for="CompanyAnnouncementDescription"><strong>Περιγραφή Ανακοίνωσης</strong> <span style="color: red;"> *</span></label>
                                                                <textarea id="CompanyAnnouncementDescription" class="form-control @(showErrorMessageforUploadingAnnouncementAsCompany && string.IsNullOrWhiteSpace(announcement.CompanyAnnouncementDescription) ? "shake error" : "")"
                                                                          @bind="announcement.CompanyAnnouncementDescription"
                                                                          @oninput="CheckCharacterLimitInAnnouncementDescriptionUploadAsCompany"
                                                                          maxlength="1000"
                                                                          placeholder="Πληκτρολογείστε την Ανακοίνωσή σας"></textarea>
                                                                <small class="character-limit light-cadetblue-text">@remainingCharactersInAnnouncementDescriptionUploadAsCompany/1000</small>
                                                            </div>
                                                            @if (showErrorMessageforUploadingAnnouncementAsCompany && string.IsNullOrWhiteSpace(announcement.CompanyAnnouncementDescription))
                                                            {
                                                                <div class="text-danger mt-1">Απαιτείται Περιγραφή της Ανακοίνωσης!</div>
                                                            }
                                                        </div>

                                                        <div class="row mb-3">
                                                            <div class="col-md-4 position-relative">
                                                                <label for="CompanyAnnouncementTimeToBeActive"><strong>Ημερομηνία Λήξης Ανακοίνωσης</strong> <span style="color: red;"> *</span></label>
                                                                <input type="date" id="CompanyAnnouncementTimeToBeActive" class="form-control @(showErrorMessageforUploadingAnnouncementAsCompany && announcement.CompanyAnnouncementTimeToBeActive.Date == DateTime.Today ? "shake error" : "")" 
                                                                       @bind="announcement.CompanyAnnouncementTimeToBeActive" />
                                                            </div>
                                                            @if (showErrorMessageforUploadingAnnouncementAsCompany && announcement.CompanyAnnouncementTimeToBeActive.Date <= DateTime.Today)
                                                            {
                                                                <div class="text-danger mt-1">Η ημερομηνία πρέπει να είναι μεταγενέστερη της σημερινής ημερομηνίας.</div>
                                                            }
                                                        </div>


                                                        <div class="row mb-3">
                                                            <div class="col-md-4 position-relative">
                                                                <label for="announcementAttachment">Συνημμένο Αρχείο Ανακοίνωσης<span style="font-style: italic; color: gray;"> (Προαιρετικό)</span></label>
                                                                <InputFile id="announcementAttachment" class="form-control" OnChange="HandleFileSelectedForAnnouncementAttachment" />
                                                            </div>
                                                        </div>

                                                        <!-- Save Buttons -->
                                                        <div class="row mb-3">
                                                            <div class="col-md-12">
                                                                <button class="modern-button" style="background-color: #007bff; color: white; display: inline-flex; align-items: center;" @onclick="SaveAnnouncementAsUnpublished">
                                                                    <i class="fa-regular fa-floppy-disk" style="margin-right: 8px;"></i>Προσωρινή Αποθήκευση Ανακοίνωσης
                                                                </button>
                                                                <button class="modern-button" style="background-color: #28a745; color: white; display: inline-flex; align-items: center;" @onclick="SaveAnnouncementAsPublished">
                                                                    <i class="fa-solid fa-floppy-disk" style="margin-right: 8px;"></i>Δημοσίευση Ανακοίνωσης
                                                                </button>
                                                            </div>
                                                        </div>

                                                        <!-- Error message if required fields are not filled -->
                                                        @if (!isFormValidToSaveAnnouncementAsCompany)
                                                        {
                                                            <div class="alert alert-danger" role="alert">
                                                                Συμπληρώστε Όλα Τα Υποχρεωτικά Πεδία και Προσπαθήστε Ξανά
                                                            </div>
                                                        }

                                                        @if (!string.IsNullOrEmpty(saveAnnouncementAsCompanyMessage))
                                                        {
                                                            <div class="alert @(isSaveAnnouncementAsCompanySuccessful ? "alert-success" : "alert-danger")" role="alert">
                                                                @saveAnnouncementAsCompanyMessage
                                                            </div>
                                                        }
                                                    }

                                                </div>




                                                 <!-- VIEW UPLOADED ANNOUNCEMENTS AS COMPANY -->
                                                <div class="mb-3 row-dark-gray mt-4">
                                                    <div class="d-flex justify-content-between align-items-center">
                                                        <label class="form-label" style="color: #FFF8DC;">• Οι Ανακοινώσεις μου •</label>
                                                        <button class="btn btn-link" @onclick="ToggleUploadedAnnouncementsVisibility">
                                                            @if (isUploadedAnnouncementsVisible)
                                                            {
                                                                <span>&#8722;</span> <!-- Minus sign -->
                                                            }
                                                            else
                                                            {
                                                                <span>&#43;</span> <!-- Plus sign -->
                                                            }
                                                        </button>
                                                    </div>
                                                </div>
                                                @if (isUploadedAnnouncementsVisible)
                                                {
                                                    <div class="col-md-2">
                                                        <label for="statusFilterForAnnouncements" style="color: #4682b4;"><strong>Φίλτρο Εμφάνισης</strong></label>
                                                        <div class="input-group">
                                                            <select id="statusFilterForAnnouncements" class="form-control form-control-sm" 
                                                                    @onchange="HandleStatusFilterChange">
                                                                <option value="Όλα">Όλες</option>
                                                                <option value="Δημοσιευμένη">Δημοσιευμένες</option>
                                                                <option value="Μη Δημοσιευμένη">Μη Δημοσιευμένες</option>
                                                            </select>
                                                            <div class="input-group-append">
                                                                <span class="input-group-text">
                                                                    <i class="fas fa-chevron-down"></i>
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!-- Add this new dropdown for items per page -->
                                                    <div class="col-md-2">
                                                        <label style="color: #4682b4;"><strong>Αποτελέσματα ανά Σελίδα</strong></label>
                                                        <div class="input-group" style="max-width: 65px;">
                                                            <select class="form-control form-control-sm" @onchange="OnPageSizeChange_SeeMyUploadedAnnouncementsAsCompany">
                                                                @foreach (var option in pageSizeOptions_SeeMyUploadedAnnouncementsAsCompany)
                                                                {
                                                                    <option value="@option" selected="@(pageSizeForAnnouncements == option)">@option</option>
                                                                }
                                                            </select>
                                                            <div class="input-group-append">
                                                                <span class="input-group-text">
                                                                    <i class="fas fa-chevron-down"></i>
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <br/>
                                                    <div class="col-md-2">
                                                        @if (selectedStatusFilterForAnnouncements == "Όλα")
                                                        {
                                                            <span><strong>Σύνολο: </strong>@totalCountAnnouncements</span>
                                                        }
                                                        else if (selectedStatusFilterForAnnouncements == "Δημοσιευμένη")
                                                        {
                                                            <span><strong>Σύνολο: </strong>@publishedCountAnnouncements</span>
                                                        }
                                                        else if (selectedStatusFilterForAnnouncements == "Μη Δημοσιευμένη")
                                                        {
                                                            <span><strong>Σύνολο: </strong>@unpublishedCountAnnouncements</span>
                                                        }
                                                    </div>

                                                    <div style="max-width: auto; margin-left: 0;">
                                                        <div class="table-responsive">
                                                            <table class="table table-striped">
                                                                <thead>
                                                                    <tr style="background-color: lightgray; border: 2px solid black;">
                                                                        <th style="border: 2px solid black;"><i class="fa-solid fa-key fa-sm" style="color: #9D00FF;"></i> Κωδικός Θέσης</th>
                                                                        <th style="border: 2px solid black;">
                                                                          <i class="fa-solid fa-font fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                          Τίτλος
                                                                        </th>
                                                                        <th style="width: 30%; border: 2px solid black;">
                                                                          <i class="fa-solid fa-file-lines fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                          Περιγραφή
                                                                        </th>
                                                                        <th style="border: 2px solid black;">
                                                                          <i class="fa-solid fa-calendar-days fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                          Ημερομηνία Δημοσίευσης
                                                                        </th>
                                                                        <th style="border: 2px solid black;"><i class="fa-solid fa-up-down fa-sm" style="color: #4682b4;"></i> Κατάσταση</th>
                                                                        <th style="border: 2px solid black;">
                                                                          <i class="fa-solid fa-hand fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                          Ενέργειες
                                                                        </th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    @if (FilteredAnnouncements != null && FilteredAnnouncements.Any())
                                                                    {
                                                                        @foreach (var announcement in GetPaginatedAnnouncements())
                                                                        {
                                                                            <tr style="background-color: @(announcement.CompanyAnnouncementStatus == "Δημοσιευμένη" ? "lightblue" : "lightcoral");">
                                                                                <td style="color: #9D00FF;">
                                                                                    @announcement.CompanyAnnouncementRNG_HashedAsUniqueID
                                                                                </td>
                                                                                <td>@announcement.CompanyAnnouncementTitle</td>                                                                            
                                                                                <td style="width: 30%;">
                                                                                    @if (announcement.CompanyAnnouncementDescription.Length > 50) 
                                                                                    {
                                                                                        @announcement.CompanyAnnouncementDescription.Substring(0, 50)
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        @announcement.CompanyAnnouncementDescription
                                                                                    }
                                                                                </td>
                                                                                <td>@announcement.CompanyAnnouncementUploadDate.ToString("dd/MM/yyyy")</td>
                                                                                <td>@announcement.CompanyAnnouncementStatus</td>
                                                                                <td>
                                                                                    <div class="d-flex gap-1"> <!-- Added flex container with gap -->
                                                                                        <!-- Trash button -->
                                                                                        <button class="btn btn-danger btn-sm" @onclick="() => DeleteAnnouncement(announcement.Id)">
                                                                                            <i class="fas fa-trash icon-button"></i>
                                                                                        </button>
                                                                                        <!-- Eye icon button to view details -->
                                                                                        <button class="btn btn-info btn-sm" @onclick="() => OpenCompanyAnnouncementDetailsModal(announcement)" title="Προβολή Ανακοίνωσης">
                                                                                            <i class="fas fa-eye icon-button"></i>
                                                                                        </button>
                                                                                        <!-- Arrow down/up buttons -->
                                                                                        @if (announcement.CompanyAnnouncementStatus == "Δημοσιευμένη")
                                                                                        {
                                                                                            <button class="btn btn-secondary btn-sm" @onclick='async () => await ChangeAnnouncementStatus(announcement.Id, "Μη Δημοσιευμένη")' title="Αποδημοσίευση Ανακοίνωσης">
                                                                                                <i class="fas fa-arrow-down icon-button" style="color: yellow;"></i>
                                                                                            </button>
                                                                                        }
                                                                                        else if (announcement.CompanyAnnouncementStatus == "Μη Δημοσιευμένη")
                                                                                        {
                                                                                            <button class="btn btn-secondary btn-sm" @onclick='async () => await ChangeAnnouncementStatus(announcement.Id, "Δημοσιευμένη")' title="Δημοσίευση Ανακοίνωσης">
                                                                                                <i class="fas fa-arrow-up icon-button" style="color: cornflowerblue;"></i>
                                                                                            </button>

                                                                                            <!-- Pencil icon button to edit the announcement -->
                                                                                            <button class="btn btn-secondary btn-sm" @onclick="() => OpenEditModal(announcement)" title="Επεξεργασία Ανακοίνωσης">
                                                                                                <i class="fas fa-pencil-alt icon-button"></i>
                                                                                            </button>
                                                                                        }
                                                                                    </div>
                                                                                </td>
                                                                            </tr>
                                                                        }
                                                                    }
                                                                    else
                                                                    {
                                                                        <tr>
                                                                            <td colspan="5" class="text-center">Δεν υπάρχουν Ανακοινώσεις</td>
                                                                        </tr>
                                                                    }
                                                                </tbody>
                                                            </table>
                                                            <br/>
                                                            <!-- Pagination Controls -->
                                                            <div class="d-flex justify-content-center align-items-center mt-3 gap-1">
                                                                <!-- First Page (<<) -->
                                                                <span class="pagination-item @(currentPageForAnnouncements == 1 ? "disabled" : "")" 
                                                                      @onclick="@(() => GoToFirstPageForAnnouncements())">
                                                                    &lt;&lt;
                                                                </span>
    
                                                                <!-- Previous Page (<) -->
                                                                <span class="pagination-item @(currentPageForAnnouncements == 1 ? "disabled" : "")" 
                                                                      @onclick="@(() => PreviousPageForAnnouncements())">
                                                                    &lt;
                                                                </span>
    
                                                                <!-- Page Numbers -->
                                                                @foreach (var pageNum in GetVisiblePagesForAnnouncements())
                                                                {
                                                                    @if (pageNum == -1)
                                                                    {
                                                                        <span class="pagination-ellipsis">...</span>
                                                                    }
                                                                    else
                                                                    {
                                                                        <span class="pagination-item @(pageNum == currentPageForAnnouncements ? "active" : "")" 
                                                                              @onclick="@(() => GoToPageForAnnouncements(pageNum))">
                                                                            @pageNum
                                                                        </span>
                                                                    }
                                                                }
    
                                                                <!-- Next Page (>) -->
                                                                <span class="pagination-item @(currentPageForAnnouncements == totalPagesForAnnouncements ? "disabled" : "")" 
                                                                      @onclick="@(() => NextPageForAnnouncements())">
                                                                    &gt;
                                                                </span>
    
                                                                <!-- Last Page (>>) -->
                                                                <span class="pagination-item @(currentPageForAnnouncements == totalPagesForAnnouncements ? "disabled" : "")" 
                                                                      @onclick="@(() => GoToLastPageForAnnouncements())">
                                                                    &gt;&gt;
                                                                </span>
    
                                                                <!-- Page counter -->
                                                                <span class="ms-3">Σελίδα @currentPageForAnnouncements από @totalPagesForAnnouncements</span>
                                                            </div>
                                                            <br/>
                                                        </div>
                                                    </div>
                                                    <br/>
                                                }

                                               @if (selectedCompanyAnnouncementToSeeDetailsAsCompany != null)
                                                {
                                                    <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0,0,0,0.5);">
                                                        <div class="modal-dialog modal-dialog-centered" role="document">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h5 class="modal-title" style="color: #4682B4;">@selectedCompanyAnnouncementToSeeDetailsAsCompany.CompanyAnnouncementTitle</h5>
                                                                    <button type="button" class="close" @onclick="CloseCompanyAnnouncementDetailsModal">
                                                                        <span>&times;</span>
                                                                    </button>
                                                                </div>
                                                                <div class="modal-body">
                                                                    <div class="form-group">
                                                                        <label for="viewTitle"><strong>Τίτλος</strong></label>
                                                                        <input type="text" id="viewTitle" class="form-control" value="@selectedCompanyAnnouncementToSeeDetailsAsCompany.CompanyAnnouncementTitle" readonly />
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label for="viewDescription"><strong>Περιγραφή</strong></label>
                                                                        <textarea id="viewDescription" class="form-control" readonly>@selectedCompanyAnnouncementToSeeDetailsAsCompany.CompanyAnnouncementDescription</textarea>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Ημερομηνία Δημοσίευσης</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="far fa-calendar-alt" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                            <span>@selectedCompanyAnnouncementToSeeDetailsAsCompany.CompanyAnnouncementUploadDate.ToString("dd/MM/yyyy")</span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Ισχύς έως</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="far fa-calendar-alt" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                            <span>@selectedCompanyAnnouncementToSeeDetailsAsCompany.CompanyAnnouncementTimeToBeActive.ToString("dd/MM/yyyy")</span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label for="viewStatus"><strong>Κατάσταση</strong></label>
                                                                        <select id="viewStatus" class="form-control" disabled>
                                                                            <option value="Δημοσιευμένη" selected="@(selectedCompanyAnnouncementToSeeDetailsAsCompany.CompanyAnnouncementStatus == "Δημοσιευμένη")">Δημοσιευμένη</option>
                                                                            <option value="Μη Δημοσιευμένη" selected="@(selectedCompanyAnnouncementToSeeDetailsAsCompany.CompanyAnnouncementStatus == "Μη Δημοσιευμένη")">Μη Δημοσιευμένη</option>
                                                                        </select>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label for="viewCompanyName"><strong>Εταιρεία</strong></label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-building" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                            <span>@(selectedCompanyAnnouncementToSeeDetailsAsCompany.Company?.CompanyName ?? "Άγνωστη Εταιρεία")</span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Email Εταιρείας</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-envelope" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                            <span>@selectedCompanyAnnouncementToSeeDetailsAsCompany.CompanyAnnouncementCompanyEmail</span>
                                                                        </div>
                                                                    </div>
                                                                    <br/>
                                                                    @if (selectedCompanyAnnouncementToSeeDetailsAsCompany.CompanyAnnouncementAttachmentFile != null)
                                                                    {
                                                                        <div class="form-group">
                                                                            <label for="viewAttachment"><strong>Συνημμένο</strong></label>
                                                                            <p>
                                                                                <a href="data:application/pdf;base64,@Convert.ToBase64String(selectedCompanyAnnouncementToSeeDetailsAsCompany.CompanyAnnouncementAttachmentFile)" 
                                                                                   download="Announcement.pdf" class="btn btn-primary">
                                                                                    Λήψη Αρχείου
                                                                                </a>
                                                                            </p>
                                                                        </div>
                                                                    }
                                                                </div>
                                                                <div class="modal-footer">
                                                                    <button type="button" class="btn btn-secondary" @onclick="CloseCompanyAnnouncementDetailsModal">Κλείσιμο</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                }





                                               <!-- Modal for editing announcement -->
                                                @if (isEditModalVisible)
                                                {
                                                    <div class="modal fade show" style="display: block;" tabindex="-1" role="dialog" aria-modal="true">
                                                        <div class="modal-dialog" role="document">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h5 class="modal-title" style="color: #4682B4;">@currentAnnouncement.CompanyAnnouncementTitle</h5>
                                                                    <button type="button" class="close" @onclick="CloseEditModal">
                                                                        <span>&times;</span>
                                                                    </button>
                                                                </div>
                                                                <div class="modal-body">
                                                                    <div class="form-group">
                                                                        <label for="title"><strong>Τίτλος</strong></label>
                                                                        <input type="text" id="title" class="form-control" @bind="currentAnnouncement.CompanyAnnouncementTitle" />
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label for="description"><strong>Περιγραφή</strong></label>
                                                                        <textarea id="description" class="form-control" @bind="currentAnnouncement.CompanyAnnouncementDescription"></textarea>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label for="uploadDate"><strong>Ημερομηνία Δημοσίευσης</strong></label>
                                                                        <input type="date" id="uploadDate" class="form-control" @bind="currentAnnouncement.CompanyAnnouncementUploadDate" />
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label for="status"><strong>Κατάσταση</strong></label>
                                                                        <select id="status" class="form-control" @bind="currentAnnouncement.CompanyAnnouncementStatus">
                                                                            <option value="Δημοσιευμένη">Δημοσιευμένη</option>
                                                                            <option value="Μη Δημοσιευμένη">Μη Δημοσιευμένη</option>
                                                                        </select>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label><strong>Εταιρεία</strong></label>
                                                                        <div class="form-control-plaintext">
                                                                            @(currentAnnouncement.Company?.CompanyName ?? "Άγνωστη Εταιρεία")
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label for="companyEmail"><strong>Email Εταιρείας</strong></label>
                                                                        <input type="email" id="companyEmail" class="form-control" 
                                                                               @bind="currentAnnouncement.CompanyAnnouncementCompanyEmail" readonly />
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label for="activeUntil"><strong>Ισχύς έως</strong></label>
                                                                        <input type="date" id="activeUntil" class="form-control" 
                                                                               @bind="currentAnnouncement.CompanyAnnouncementTimeToBeActive" />
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label for="editJobAttachment"><strong>Αντικατάσταση Συνημμένου</strong></label>
                                                                        <InputFile OnChange="HandleFileUploadToEditCompanyAnnouncementAttachment" />
                                                                    </div>
                                                                </div>
                                                                <div class="modal-footer">
                                                                    <button class="btn btn-primary" @onclick="() => UpdateAnnouncement(currentAnnouncement)">Αποθήκευση</button>
                                                                    <button class="btn btn-secondary" @onclick="CloseEditModal">Κλείσιμο</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                }


                                                                                   
                                            </div>







                                            <!-- CREATE JOBS TAB AS COMPANY -->
                                            <div class="tab-pane fade" id="jobs" role="tabpanel" aria-labelledby="jobs-tab">
                                                <!-- Add your content here -->

                                                @*iNPUT FIELDS SHOULD BE HERE FOR UPLOAD JOB AS COMPANY*@
                                                <div class="tab-pane" id="jobs" role="tabpanel" aria-labelledby="jobs-tab">
                                                    <div class="mb-3 row-dark-gray">
                                                        <div class="d-flex justify-content-between align-items-center">
                                                            <label class="form-label" style="color: #FFF8DC;">• Δημιουργία Θέσης Εργασίας •</label>
                                                            <button class="btn btn-link" @onclick="ToggleFormVisibilityForUploadCompanyJobs">
                                                                @if (isForm1Visible)
                                                                {
                                                                    <span>&#8722;</span> <!-- Minus sign -->
                                                                }
                                                                else
                                                                {
                                                                    <span>&#43;</span> <!-- Plus sign -->
                                                                }
                                                            </button>
                                                        </div>
                                                    </div>
                                                   
                                                @if (isForm1Visible)
                                                {
                                                        <div class="row mb-3">
                                                            <div class="col-md-4">
                                                                <label for="positionType">
                                                                    <strong>Τύπος Θέσης</strong>
                                                                    <span style="color: red;">*</span>
                                                                </label>
                                                                <div class="input-group">
                                                                    <select id="positionType" class="form-control @(showErrorMessageforUploadingjobsAsCompany && string.IsNullOrWhiteSpace(job.PositionType) ? "shake error" : "")" @bind="job.PositionType">
                                                                        <option value="">-- Επιλέξτε --</option>
                                                                        <option value="Full-Time">Αορίστου Χρόνου</option>
                                                                        <option value="Part-Time">Περιορισμένου Χρόνου</option>
                                                                        <option value="Part-Time_Full-Time">Σύμβαση Έργου</option>
                                                                    </select>
                                                                    <div class="input-group-append">
                                                                        <span class="input-group-text">
                                                                            <i class="fas fa-chevron-down"></i>
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            @if (showErrorMessageforUploadingjobsAsCompany && string.IsNullOrWhiteSpace(job.PositionType))
                                                            {
                                                                <div class="text-danger mt-1">Απαιτείται Τύπος Θέσης.</div>
                                                            }
                                                        </div>



                                                        <div class="row mb-3">
                                                            <div class="col-md-4 position-relative">
                                                                <label for="positionTitle">
                                                                    <strong>Τίτλος Θέσης</strong>
                                                                    <span style="color: red;">*</span>
                                                                </label>
                                                                <input type="text" id="positionTitle" class="form-control @(showErrorMessageforUploadingjobsAsCompany && string.IsNullOrWhiteSpace(job.PositionTitle) ? "shake error" : "")" @bind="job.PositionTitle" @oninput="CheckCharacterLimitInJobFieldUploadAsCompany" maxlength="120" />
                                                                <small class="character-limit light-cadetblue-text">@remainingCharactersInJobFieldUploadAsCompany/120</small>
                                                            </div>
                                                            @if (showErrorMessageforUploadingjobsAsCompany && string.IsNullOrWhiteSpace(job.PositionTitle))
                                                            {
                                                                <div class="text-danger mt-1">Απαιτείται Περιγραφή της Θέσης Εργασίας.</div>
                                                            }
                                                        </div>

                                                        @*
                                                        <div class="row mb-3">
                                                            <div class="col-md-4">
                                                                <label for="positionTitle">Φορέας</label>
                                                                <input type="text" id="positionTitle" class="form-control" @bind="job.PositionForeas" />
                                                            </div>
                                                        </div>
                                                        *@
                                                        <div class="row mb-3">
                                                            <div class="col-md-4">
                                                                <label for="positionTitle">Υπεύθυνο Τμήμα <span style="font-style: italic; color: gray;"> (Προαιρετικό)</span></label>
                                                                <input type="text" id="positionTitle" class="form-control" @bind="job.PositionDepartment" />
                                                            </div>
                                                        </div>

                                                        <div class="row mb-3">
                                                            <div class="col-md-4">
                                                                <label for="PositionContactPerson">
                                                                    <strong>Email Υπευθύνου</strong>
                                                                    <span style="color: red;">*</span>
                                                                </label>
                                                                <input type="email" id="PositionContactPerson" 
                                                                       class="form-control @(showErrorMessageforUploadingjobsAsCompany && !IsValidEmailForCompanyJobs(job.PositionContactPerson) ? "shake error" : "")" 
                                                                       @bind="job.PositionContactPerson" 
                                                                       placeholder="example@mail.com" />
                                                                @if (showErrorMessageforUploadingjobsAsCompany && !IsValidEmailForCompanyJobs(job.PositionContactPerson))
                                                                {
                                                                    <small style="color: red;">Παρακαλώ εισάγετε ένα έγκυρο email.</small>
                                                                }
                                                            </div>
                                                        </div>



                                                        <div class="row mb-3">
                                                            <div class="col-md-4">
                                                                <label for="PositionContactTelephonePerson">
                                                                    Τηλέφωνο Υπευθύνου
                                                                    <span style="font-style: italic; color: gray;"> (Προαιρετικό)</span>
                                                                </label>
                                                                <div class="input-group">
                                                                    <div class="input-group-prepend">
                                                                        <span class="input-group-textfortelephone">+30</span>
                                                                    </div>
                                                                    <input type="tel" id="PositionContactTelephonePerson"
                                                                           class="form-control @(showErrorMessageforUploadingjobsAsCompany && !IsValidPhoneNumber(job.PositionContactTelephonePerson) ? "shake error" : "")"
                                                                           @bind="job.PositionContactTelephonePerson"
                                                                           placeholder="Τηλέφωνο Υπευθύνου"
                                                                           maxlength="10" pattern="[0-9]{10}" />
                                                                </div>
                                                                @if (showErrorMessageforUploadingjobsAsCompany && !IsValidPhoneNumber(job.PositionContactTelephonePerson))
                                                                {
                                                                    <small style="color: red;">Παρακαλώ εισάγετε αριθμό τηλεφώνου με ακριβώς 10 ψηφία.</small>
                                                                }
                                                            </div>
                                                        </div>


                                                        <!-- Address -->
                                                        <div class="row mb-3">
                                                            <div class="col-md-4">
                                                                <label for="PositionAddressLocation">Διεύθυνση Εργασίας<span style="font-style: italic; color: gray;"> (Προαιρετικό)</span></label>
                                                                <div class="input-group">
                                                                    <input type="tel" id="PositionAddressLocation"
                                                                           class="form-control @(showErrorMessageforUploadingjobsAsCompany && string.IsNullOrWhiteSpace(job.PositionAddressLocation) ? "" : "")"
                                                                           @bind="job.PositionAddressLocation"/>
                                                                </div>
                                                            </div>
                                                        </div

                                                        <!-- Region Dropdown -->
                                                        <div class="row mb-3">
                                                            <div class="col-md-4">
                                                                <label for="CompanyInternshipPerifereiaLocation">
                                                                    <strong>Περιφέρεια</strong>
                                                                    <span style="color: red;">*</span>
                                                                </label>
                                                                <div class="input-group">
                                                                    <select id="CompanyInternshipPerifereiaLocation" class="form-control @(showErrorMessageforUploadingjobsAsCompany && string.IsNullOrWhiteSpace(job.PositionPerifereiaLocation) ? "shake error" : "")" @bind="job.PositionPerifereiaLocation">
                                                                        <option value="">-- Επιλέξτε Περιφέρεια --</option>
                                                                        @foreach (var region in Regions)
                                                                        {
                                                                            <option value="@region">@region</option>
                                                                        }
                                                                    </select>
                                                                    <div class="input-group-append">
                                                                        <span class="input-group-text">
                                                                            <i class="fas fa-chevron-down"></i>
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            @if (showErrorMessageforUploadingjobsAsCompany && string.IsNullOrWhiteSpace(job.PositionPerifereiaLocation))
                                                            {
                                                                <div class="text-danger mt-1">Απαιτείται Επιλογή Περιφέρειας.</div>
                                                            }
                                                        </div>



                                                       <!-- Town Dropdown -->
                                                        <div class="row mb-3">
                                                            <div class="col-md-4">
                                                                <label for="CompanyInternshipDimosLocation">
                                                                    <strong>Δήμος</strong>
                                                                    <span style="color: red;">*</span>
                                                                </label>
                                                                <div class="input-group">
                                                                    <select id="CompanyInternshipDimosLocation" class="form-control @(showErrorMessageforUploadingjobsAsCompany && string.IsNullOrWhiteSpace(job.PositionDimosLocation) ? "shake error" : "")" @bind="job.PositionDimosLocation">
                                                                        <option value="">-- Επιλέξτε Δήμο --</option>
                                                                        @foreach (var town in GetTownsForRegion(job.PositionPerifereiaLocation))
                                                                        {
                                                                            <option value="@town">@town</option>
                                                                        }
                                                                    </select>
                                                                    <div class="input-group-append">
                                                                        <span class="input-group-text">
                                                                            <i class="fas fa-chevron-down"></i>
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>



                                                        <div class="row mb-3">
                                                            <div class="col-md-4">
                                                                <label for="positionPostalCode">
                                                                    Ταχυδρομικός Κώδικας
                                                                    <span style="font-style: italic; color: gray;"> (Προαιρετικό)</span>
                                                                </label>
                                                                <input type="text" id="positionPostalCode"
                                                                       class="form-control @(showErrorMessageforPostalCode ? "shake error" : "")"
                                                                       @bind="job.PositionPostalCodeLocation"
                                                                       @oninput="ValidatePostalCode"
                                                                       placeholder="Π.χ. 12345"
                                                                       maxlength="5"
                                                                       pattern="\d{5}" />
                                                                @if (showErrorMessageforPostalCode)
                                                                {
                                                                    <small style="color: red;">Παρακαλώ εισάγετε έναν έγκυρο Ταχυδρομικό Κώδικα (5 ψηφία).</small>
                                                                }
                                                            </div>
                                                        </div>



                                                        <div class="row mb-3">
                                                            <div class="col-md-4">
                                                                <label><strong>Δυνατότητα Μετακίνησης</strong> <span style="color: red;">*</span> <span style="font-style: italic; color: gray;"> (Προσφέρεται από την εταιρία)</span></label>
                                                                <div class="form-check">
                                                                    <input type="radio" id="PositionTransportOfferYes" class="form-check-input" name="PositionTransportOffer" value="true" checked="@(job.PositionTransportOffer ? "checked" : "")" @onchange="() => UpdateTransportOffer(true)" />
                                                                    <label for="PositionTransportOfferYes" class="form-check-label">Ναι</label>
                                                                </div>
                                                                <div class="form-check">
                                                                    <input type="radio" id="PositionTransportOfferNo" class="form-check-input" name="PositionTransportOffer" value="false" checked="@(job.PositionTransportOffer ? "" : "checked")" @onchange="() => UpdateTransportOffer(false)" />
                                                                    <label for="PositionTransportOfferNo" class="form-check-label">Όχι</label>
                                                                </div>
                                                            </div>
                                                        </div>


                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label @onclick="ToggleCheckboxesForCompanyJob">
                                                                <strong>Τομείς Θέσης</strong>
                                                                <span style="color: red;">*</span>
                                                                <span class="light-cadetblue-text @(showErrorMessageforUploadingjobsAsCompany && string.IsNullOrWhiteSpace(job.PositionAreas) ? "shake error" : "")"> (Άνοιγμα/Κλείσιμο)</span>
                                                            </label>
                                                            <div id="toggleCheckboxes" class="checkbox-container">
                                                                @if (Areas == null || !Areas.Any())
                                                                {
                                                                    <p>Φορτώνει...</p>
                                                                }
                                                                else
                                                                {
                                                                    @foreach (var area in Areas)
                                                                    {
                                                                        <div class="form-check">
                                                                            <input type="checkbox"
                                                                                   id="area_@area.Id"
                                                                                   class="form-check-input"
                                                                                   @onchange="(e) => OnCheckedChangedAreasWhenUploadJobAsCompany(e, area)"
                                                                                   checked="@IsSelectedAreasWhenUploadJobAsCompany(area)" />
                                                                            <label class="form-check-label @(showErrorMessageforUploadingjobsAsCompany && string.IsNullOrWhiteSpace(job.PositionAreas) ? "shake error" : "")" for="area_@area.Id">
                                                                                @area.AreaName
                                                                            </label>
                                                                        </div>
                                                                    }
                                                                }
                                                            </div>
                                                        </div>
                                                        @if (showErrorMessageforUploadingjobsAsCompany && !SelectedAreasWhenUploadJobAsCompany.Any())
                                                        {
                                                            <div class="text-danger mt-1">Πρέπει να επιλέξετε τουλάχιστον 1 Περιοχή Ενδιαφέροντος.</div>
                                                        }
                                                    </div>


                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="CompanyJobActivePeriod"><strong>Διαθέσιμη Από</strong> <span style="color: red;">*</span></label>
                                                            <input type="date" id="CompanyJobActivePeriod" 
                                                                   class="form-control @(showErrorMessageforUploadingjobsAsCompany && ( job.PositionActivePeriod.Date == DateTime.Today) ? "shake error" : "")" 
                                                                   @bind="job.PositionActivePeriod" />
                                                        </div>
                                                        @if (showErrorMessageforUploadingjobsAsCompany && job.PositionActivePeriod.Date <= DateTime.Today)
                                                        {
                                                            <div class="text-danger mt-1">Η ημερομηνία πρέπει να είναι μεταγενέστερη της σημερινής ημερομηνίας.</div>
                                                        }
                                                    </div>



                                                        @*
                                                        <div class="row mb-3">
                                                            <div class="col-md-4">
                                                                <label for="positionTitle">Κατάσταση Θέσης</label>
                                                                <input type="text" id="positionTitle" class="form-control" @bind="job.PositionStatus" />
                                                            </div>
                                                        </div>
                                                        *@
                                                    <div class="row mb-3">
                                                        <div class="col-md-4 position-relative">
                                                            <label for="CompanyJobDescription"><strong>Περιγραφή Θέσης</strong> <span style="color: red;">*</span></label>
                                                            <textarea id="CompanyJobDescription" class="form-control @(showErrorMessageforUploadingjobsAsCompany && string.IsNullOrWhiteSpace(job.PositionDescription) ? "shake error" : "")"
                                                                      @bind="job.PositionDescription"
                                                                      @oninput="CheckCharacterLimitInJobDescriptionUploadAsCompany"
                                                                      maxlength="1000"
                                                                      placeholder="Περιγραφή Θέσης"></textarea>
                                                            <small class="character-limit light-cadetblue-text">@remainingCharactersInJobDescriptionUploadAsCompany/1000</small>
                                                        </div>
                                                        @if (showErrorMessageforUploadingjobsAsCompany && string.IsNullOrWhiteSpace(job.PositionDescription))
                                                        {
                                                                <div class="text-danger mt-1">Απαιτείται Περιγραφή της Θέσης Εργασίας.</div>
                                                        }
                                                    </div>


                                                        <div class="row mb-3">
                                                            <div class="col-md-4">
                                                                <label for="positionAttachment">Συνημμένο Αρχείο Θέσης Εργασίας 
                                                                    <span style="font-style: italic; color: gray;"> (Προαιρετικό)</span>
                                                                </label>
                                                                <InputFile id="positionAttachment" class="form-control" OnChange="HandleFileSelected" />
                                                            </div>
                                                        </div>


                                                    <!-- Save Buttons -->
                                                    <div class="row mb-3">
                                                        <div class="col-md-12">
                                                            <button class="modern-button" style="background-color: #007bff; color: white; display: inline-flex; align-items: center;" @onclick="HandleTemporarySaveJobAsCompany">
                                                                <i class="fa-regular fa-floppy-disk" style="margin-right: 8px;"></i>Προσωρινή Αποθήκευση Θέσης Εργασίας
                                                            </button>
                                                            <button class="modern-button" style="background-color: #28a745; color: white; display: inline-flex; align-items: center;" @onclick="HandlePublishSaveJobAsCompany">
                                                                <i class="fa-solid fa-floppy-disk" style="margin-right: 8px;"></i>Δημοσίευση Θέσης Εργασίας
                                                            </button>
                                                        </div>
                                                    </div>
                                                    
                                                        @if (showSuccessMessage)
                                                        {
                                                            <div class="good-message">
                                                                Η Νέα Θέση Εργασίας υποβλήθηκε με επιτυχία!
                                                            </div>
                                                        }
                                                        @if (showErrorMessageforUploadingjobsAsCompany)
                                                        {
                                                            <div class="alert alert-danger" role="alert">
                                                                Συμπληρώστε Όλα Τα Υποχρεωτικά Πεδία και Προσπαθήστε Ξανά
                                                            </div>
                                                        }
                                                }
@*--------------------------------------------------------------------------- ΕΝΕΡΓΕΣ ΘΕΣΕΙΣ ΕΡΓΑΣΙΑΣ COMPANY -----------------------------------------------------------------------------*@
                                                    <div class="mb-3 row-dark-gray">
                                                        <div class="d-flex justify-content-between align-items-center">
                                                            <label class="form-label" style="color: #FFF8DC;">• Ιστορικό Θέσεων Εργασίας •</label>
                                                            <button class="btn btn-link" @onclick="ToggleFormVisibilityToShowMyActiveJobsAsCompany">
                                                                @if (isForm2Visible)
                                                                {
                                                                    <span>&#8722;</span> <!-- Minus sign -->
                                                                }
                                                                else
                                                                {
                                                                    <span>&#43;</span> <!-- Plus sign -->
                                                                }
                                                            </button>
                                                        </div>
                                                    </div>
                                                    @if (isForm2Visible)
                                                    {                                                       
                                                        <div class="col-md-2">
                                                            <label for="statusFilterForJobs" style="color: #4682b4;"><strong>Φίλτρο Εμφάνισης</strong></label>
                                                            <div class="input-group">
                                                                <select id="statusFilterForJobs" class="form-control form-control-sm" @bind="selectedStatusFilterForJobs">
                                                                    <option value="Όλα">Όλες</option>
                                                                    <option value="Δημοσιευμένη">Δημοσιευμένες</option>
                                                                    <option value="Μη Δημοσιευμένη">Μη Δημοσιευμένες</option>
                                                                    <option value="Αποσυρμένη">Αποσυρμένες</option>
                                                                </select>
                                                                <div class="input-group-append">
                                                                    <span class="input-group-text">
                                                                        <i class="fas fa-chevron-down"></i>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label style="color: #4682b4;"><strong>Αποτελέσματα ανά Σελίδα</strong></label>
                                                            <div class="input-group" style="max-width: 65px;">
                                                                <select class="form-control form-control-sm" @onchange="OnPageSizeChange_SeeMyUploadedJobsAsCompany">
                                                                    @foreach (var option in pageSizeOptions_SeeMyUploadedJobsAsCompany)
                                                                    {
                                                                        <option value="@option" selected="@(JobsPerPage == option)">@option</option>
                                                                    }
                                                                </select>
                                                                <div class="input-group-append">
                                                                    <span class="input-group-text">
                                                                        <i class="fas fa-chevron-down"></i>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <br/>
                                                            <div class="col-md-2">
                                                                @if (selectedStatusFilterForJobs == "Όλα")
                                                                {
                                                                    <span><strong>Σύνολο: </strong>@totalCountJobs</span>
                                                                }
                                                                else if (selectedStatusFilterForJobs == "Δημοσιευμένη")
                                                                {
                                                                    <span><strong>Σύνολο: </strong>@publishedCountJobs</span>
                                                                }
                                                                else if (selectedStatusFilterForJobs == "Μη Δημοσιευμένη")
                                                                {
                                                                    <span><strong>Σύνολο: </strong>@unpublishedCountJobs</span>
                                                                }
                                                                else if (selectedStatusFilterForJobs == "Αποσυρμένη")
                                                                {
                                                                    <span><strong>Σύνολο: </strong>@withdrawnCountJobs</span>
                                                                }
                                                            </div>                                                      
                                                            

                                                        @if (jobs != null && jobs.Any())
                                                        {
                                                                                                                                                                      
                                                            <table class="table">                                                               
                                                                <thead>
                                                                    <tr style="background-color: lightgray; border: 2px solid black;">
                                                                        <th style="border: 2px solid black;"><i class="fa-solid fa-key fa-sm" style="color: #9D00FF;"></i> Κωδικός Θέσης</th>
                                                                        <th style="border: 2px solid black;">
                                                                          <i class="fa-solid fa-font fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                          Τίτλος
                                                                        </th>
                                                                        <th style="border: 2px solid black;">
                                                                          <i class="fa-solid fa-arrows-up-down fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                          Κατάσταση Θέσης
                                                                        </th>
                                                                        <th style="border: 2px solid black;">
                                                                          <i class="fa-solid fa-calendar-days fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                          Δημιουργία Θέσης
                                                                        </th>
                                                                        <th style="border: 2px solid black;">
                                                                          <i class="fa-solid fa-hand fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                          Ενέργειες
                                                                        </th>
                                                                        <th style="border: 2px solid black;">
                                                                          <i class="fa-solid fa-paperclip fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                          Αρχείο
                                                                        </th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    @foreach (var job in GetPaginatedJobs().Where(j => selectedStatusFilterForJobs == "Όλα" || j.PositionStatus == selectedStatusFilterForJobs))
                                                                    {
                                                                        <tr class="job-position-frame @(job.PositionStatus == "Δημοσιευμένη" ? "jobstatus-dimosieumeni" : (job.PositionStatus == "Μη Δημοσιευμένη" ? "jobstatus-midimosieumeni" : "jobstatus-aposirmeni"))">
                                                                            <td style="color: #9D00FF;">
                                                                                @job.RNGForPositionUploaded_HashedAsUniqueID
                                                                            </td>
                                                                            <td @onclick="() => ToggleJobsExpanded(job.RNGForPositionUploaded)" style="cursor: pointer;" title="Κλικ για εμφάνιση λεπτομερειών">
                                                                                @job.PositionTitle
                                                                            </td>
                                                                            <td>@job.PositionStatus</td>
                                                                            <td>@job.UploadDateTime</td>
                                                                            <td>
                                                                                <div style="display: flex; align-items: center; gap: 10px;">

                                                                                     <button class="btn btn-danger" @onclick="() => DeleteJobPosition(job.Id)" title="Οριστική Διαγραφή Θέσης">
                                                                                        <i class="fas fa-trash icon-button"></i>
                                                                                    </button>
                                                                                    <button class="btn btn-secondary" @onclick="() => ShowJobDetails(job)" title="Εμφάνιση Λεπτομερειών Θέσης">
                                                                                        <i class="fas fa-eye icon-button"></i>
                                                                                    </button>                                                                                                                                                                       
                                                                                    @if (job.PositionStatus != "Δημοσιευμένη")
                                                                                    {
                                                                                         <button class="btn btn-secondary" @onclick="() => EditJobDetails(job)" title="Επεξεργασία Θέσης">
                                                                                            <i class="fas fa-pencil-alt icon-button"></i>
                                                                                        </button>
                                                                                        <button class="btn btn-secondary" @onclick='async () => await UpdateJobStatusAsCompany(job.Id, "Δημοσιευμένη")' title="Δημοσίευση Θέσης">
                                                                                            <i class="fas fa-arrow-up icon-button" style="color: cornflowerblue;"></i>
                                                                                        </button>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <button class="btn btn-secondary" @onclick='async () => await UpdateJobStatusAsCompany(job.Id, "Αποσυρμένη")' title="Απόσυρση Θέσης">
                                                                                            <i class="fas fa-times icon-button" style="color: red;"></i>
                                                                                        </button>
                                                                                    }
                                                                                    @if (job.PositionStatus != "Μη Δημοσιευμένη")
                                                                                    {
                                                                                        <button class="btn btn-secondary" @onclick='() => ChangeJobStatusToUnpublished(job.Id)' title="Αποδημοσίευση Θέσης">
                                                                                            <i class="fas fa-arrow-down icon-button" style="color: yellow;"></i>
                                                                                        </button>
                                                                                    }
                                                                                         <button class="btn btn-secondary" @onclick="() => ToggleJobsExpanded(job.RNGForPositionUploaded)" title="Εμφάνιση Αιτούντων Θέσης">
                                                                                            <i class="fa-solid fa-graduation-cap icon-button"></i>
                                                                                        </button>

                                                                                </div>
                                                                            </td>
                                                                            <td>
                                                                                @if (job.PositionAttachment != null && job.PositionAttachment.Length > 0)
                                                                                {
                                                                                    <div style="display: flex; align-items: center;">
                                                                                    <button class="btn btn-secondary" @onclick="() => DownloadAttachmentForCompanyJobs(job.Id)" title="Λήψη" style="text-decoration: none;">
                                                                                        <i class="fas fa-download icon-button"></i> Λήψη
                                                                                    </button>
                                                                                </div>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <span style="display: block; text-align: center; font-weight: bold; font-style: italic;">
                                                                                        Δεν Διατίθεται
                                                                                    </span>

                                                                                }
                                                                            </td>
                                                                        </tr>
                                                                           @if (expandedJobs.ContainsKey(job.RNGForPositionUploaded) && expandedJobs[job.RNGForPositionUploaded])
                                                                           {
                                                                                <br />
                                                                                <tr>
                                                                                    <td colspan="9" style="padding: 0;">
                                                                                        <div style="display: flex; justify-content: space-between; align-items: center; height: 24px; line-height: 24px; width: 100%;">
                                                                                            <i class="fa-solid fa-graduation-cap" style="font-size: 18px; color: #0d6efd;"></i>
                                                                                            <label class="form-label" style="color: #0d6efd; font-weight: bold; font-size: 18px; margin: 0;">Λεπτομέρειες Αιτούντων</label>
                                                                                            <i class="fa-solid fa-graduation-cap" style="font-size: 18px; color: #0d6efd;"></i>
                                                                                        </div>
                                                                                    </td>
                                                                                </tr>
                                                                                <tr>
                                                                                    <td colspan="6">
                                                                                        <table class="table table-sm">
                                                                                            <thead>
                                                                                                <tr style="background-color: #f5f5f5; border: 1px solid black;">
                                                                                                    <th style="border: 1px solid darkblue;">
                                                                                                        <i class="fa-solid fa-user fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                        Προφίλ
                                                                                                    </th>
                                                                                                    <th style="border: 1px solid darkblue;">
                                                                                                        <i class="fa-solid fa-signature fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                        Όνομα
                                                                                                    </th>
                                                                                                    <th style="border: 1px solid darkblue;">
                                                                                                        <i class="fa-solid fa-signature fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                        Επώνυμο
                                                                                                    </th>
                                                                                                    <th style="border: 1px solid darkblue;">
                                                                                                        <i class="fa-solid fa-calendar-plus fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                        Ημερομηνία Αίτησης
                                                                                                    </th>
                                                                                                    <th style="border: 1px solid darkblue;">
                                                                                                        <i class="fa-solid fa-calendar-plus fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                        Έτος Φοίτησης
                                                                                                    </th>
                                                                                                    <th style="border: 1px solid darkblue;">
                                                                                                        <i class="fa-solid fa-phone fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                        Τηλεφωνο
                                                                                                    </th>
                                                                                                    <th style="border: 1px solid darkblue;">
                                                                                                        <i class="fa-solid fa-comments fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                        Επικοινωνία
                                                                                                    </th>
                                                                                                    <th style="border: 1px solid darkblue;">
                                                                                                        <i class="fa-solid fa-hand fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                        Ενέργεια
                                                                                                    </th>
                                                                                                    <th style="border: 1px solid darkblue;">
                                                                                                        <i class="fa-solid fa-hourglass-half fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                        Κατάσταση Αίτησης
                                                                                                    </th>
                                                                                                </tr>
                                                                                            </thead>
                                                                                           <tbody>
                                                                                            @if (studentDataCache == null)
                                                                                            {
                                                                                                <!-- Loading state -->
                                                                                                <tr>
                                                                                                    <td colspan="9" class="text-center">
                                                                                                        <div class="spinner-border text-primary" role="status">
                                                                                                            <span class="sr-only">Φόρτωση...</span>
                                                                                                        </div>
                                                                                                        <p>Φόρτωση δεδομένων φοιτητών...</p>
                                                                                                    </td>
                                                                                                </tr>
                                                                                            }
                                                                                            else if (jobApplicantsMap.ContainsKey(job.RNGForPositionUploaded) && jobApplicantsMap[job.RNGForPositionUploaded].Any())
                                                                                            {
                                                                                                @foreach (var applicant in jobApplicantsMap[job.RNGForPositionUploaded])
                                                                                                {
                                                                                                    var student = studentDataCache.TryGetValue(applicant.StudentEmailAppliedForCompanyJob, out var s) ? s : null;
                                                                                                    var status = applicant.CompanyPositionStatusAppliedAtTheStudentSide ?? "N/A";
                                                                                                    var companyStatus = applicant.CompanyPositionStatusAppliedAtTheCompanySide ?? "N/A";

                                                                                                    <tr style="background-color: @(companyStatus == "Επιτυχής" ? "lightgreen" :
                                                                                                                        companyStatus == "Απορρίφθηκε" ? "lightcoral" :
                                                                                                                        companyStatus == "Απορρίφθηκε (Απόσυρση Θέσεως Από Εταιρία)" ? "coral" :
                                                                                                                        companyStatus == "Αποσύρθηκε από τον φοιτητή" ? "lightyellow" : "transparent")">
                                                                                                        <td>
                                                                                                            <a href="#" @onclick="() => ShowStudentDetailsInNameAsHyperlink(applicant.StudentUniqueIDAppliedForCompanyJob)" 
                                                                                                               title="Προφίλ Υποψήφιου Σπουδαστή">
                                                                                                                <i class="fas fa-eye icon-button"></i>
                                                                                                                @if (student == null)
                                                                                                                {
                                                                                                                    <span class="badge badge-warning ml-1">Δε βρέθηκε</span>
                                                                                                                }
                                                                                                            </a>
                                                                                                        </td>
                                                                                                        <td>@(student?.Name ?? "Δε βρέθηκε")</td>
                                                                                                        <td>@(student?.Surname ?? "Δε βρέθηκε")</td>
                                                                                                        <td>@applicant.DateTimeStudentAppliedForCompanyJob.ToString("dd/MM/yyyy HH:mm")</td>
                                                                                                        <td>@(student?.StudyYear ?? "-")</td>
                                                                                                        <td>@(student?.Telephone ?? "-")</td>
                                                                                                        <td class="text-center">
                                                                                                            @applicant.StudentEmailAppliedForCompanyJob
                                                                                                            <a href="mailto:@applicant.StudentEmailAppliedForCompanyJob" title="Αποστολή Email">
                                                                                                                <i class="fas fa-envelope"></i>
                                                                                                            </a>
                                                                                                        </td>
                                                                                                        <td>
                                                                                                            @if (status == "Σε Επεξεργασία")
                                                                                                            {
                                                                                                                <div style="display: flex; gap: 10px; justify-content: center;">
                                                                                                                    <span @onclick="() => ConfirmAndAcceptJob(applicant.RNGForCompanyJobApplied, applicant.StudentUniqueIDAppliedForCompanyJob)" 
                                                                                                                          title="Αποδοχή Αίτησης" style="cursor: pointer;">
                                                                                                                        <i class="fas fa-check" style="color: green; font-size: 24px;"></i>
                                                                                                                    </span>

                                                                                                                    <span @onclick="() => ConfirmAndRejectJob(applicant.RNGForCompanyJobApplied, applicant.StudentUniqueIDAppliedForCompanyJob)" 
                                                                                                                          title="Απόρριψη Αίτησης" style="cursor: pointer;">
                                                                                                                        <i class="fas fa-times" style="color: red; font-size: 24px;"></i>
                                                                                                                    </span>
                                                                                                                </div>
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                                <span class="text">@status</span>
                                                                                                            }
                                                                                                        </td>
                                                                                                        <td>
                                                                                                            @if (companyStatus == "Επιτυχής")
                                                                                                            {
                                                                                                                <span style="color: green; font-weight: bold;">Έχει γίνει Αποδοχή</span>
                                                                                                            }
                                                                                                            else if (companyStatus == "Απορρίφθηκε")
                                                                                                            {
                                                                                                                <span style="color: red; font-weight: bold;">Έχει Απορριφθεί</span>
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                                <span>@companyStatus</span>
                                                                                                            }
                                                                                                        </td>
                                                                                                    </tr>
                                                                                                }
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                <tr>
                                                                                                    <td colspan="9" class="text-center text-danger">
                                                                                                        <strong>Καμία Αίτηση για αυτήν την Θέση Εργασίας ακόμη</strong>
                                                                                                    </td>
                                                                                                </tr>
                                                                                            }
                                                                                        </tbody>
                                                                                        </table>
                                                                                    </td>
                                                                                </tr>
                                                                            }
                                                                    }                                                                   
                                                                </tbody>
                                                            </table>
                                                            <br/>
                                                            <!-- Pagination Controls -->
                                                            <div class="d-flex justify-content-center align-items-center mt-3 gap-1">
                                                                <!-- First Page (<<) -->
                                                                <span class="pagination-item @(currentPageForJobs == 1 ? "disabled" : "")" 
                                                                      @onclick="@(() => GoToFirstPageForJobs())">
                                                                    &lt;&lt;
                                                                </span>
        
                                                                <!-- Previous Page (<) -->
                                                                <span class="pagination-item @(currentPageForJobs == 1 ? "disabled" : "")" 
                                                                      @onclick="@(() => PreviousPageForJobs())">
                                                                    &lt;
                                                                </span>
        
                                                                <!-- Page Numbers -->
                                                                @foreach (var pageNum in GetVisiblePagesForJobs())
                                                                {
                                                                    @if (pageNum == -1)
                                                                    {
                                                                        <span class="pagination-ellipsis">...</span>
                                                                    }
                                                                    else
                                                                    {
                                                                        <span class="pagination-item @(pageNum == currentPageForJobs ? "active" : "")" 
                                                                              @onclick="@(() => GoToPageForJobs(pageNum))">
                                                                            @pageNum
                                                                        </span>
                                                                    }
                                                                }
        
                                                                <!-- Next Page (>) -->
                                                                <span class="pagination-item @(currentPageForJobs == totalPagesForJobs ? "disabled" : "")" 
                                                                      @onclick="@(() => NextPageForJobs())">
                                                                    &gt;
                                                                </span>
        
                                                                <!-- Last Page (>>) -->
                                                                <span class="pagination-item @(currentPageForJobs == totalPagesForJobs ? "disabled" : "")" 
                                                                      @onclick="@(() => GoToLastPageForJobs())">
                                                                    &gt;&gt;
                                                                </span>
        
                                                                <!-- Page counter -->
                                                                <span class="ms-3">Σελίδα @currentPageForJobs από @totalPagesForJobs</span>
                                                            </div>
                                                            <br/>
                                                            <br/>
                                                        }

                                                    }
                                                </div>
                                            </div>
                                            

                                                                                @if (isModalVisibleForJobs)
                                                                                {
                                                                                    <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0,0,0,0.5);">
                                                                                        <div class="modal-dialog modal-dialog-centered" role="document">
                                                                                            <div class="modal-content">
                                                                                                <div class="modal-header">
                                                                                                    <h5 class="modal-title">
                                                                                                        <span style="color: #007BFF;">@currentJob.PositionTitle</span>
                                                                                                    </h5>
                                                                                                    <button type="button" class="close" @onclick="CloseModalForJobs">
                                                                                                        <span aria-hidden="true">&times;</span>
                                                                                                    </button>
                                                                                                </div>
                                                                                                <div class="modal-body">
                                                                                                    @*
                                                                                                    <div class="form-group">
                                                                                                        <label for="viewTitle"><strong>Τίτλος</strong></label>
                                                                                                        <input type="text" id="viewTitle" class="form-control" value="@currentJob.PositionTitle" readonly />
                                                                                                    </div>
                                                                                                    *@
                                                                                                    <div class="form-group">
                                                                                                        <label for="viewDescription"><strong>Περιγραφή</strong></label>
                                                                                                        <textarea id="viewDescription" class="form-control" readonly>@currentJob.PositionDescription</textarea>
                                                                                                    </div>
                                                                                                    <div class="form-group">
                                                                                                        <label for="viewType"><strong>Τύπος</strong></label>
                                                                                                        <input type="text" id="viewType" class="form-control" 
                                                                                                               value="@(currentJob.PositionType == "Full-Time" ? "Πλήρους Απασχόλησης" : 
                                                                                                                      currentJob.PositionType == "Part-Time" ? "Μερικής Απασχόλησης" : 
                                                                                                                      currentJob.PositionType == "Part-Time_Full-Time" ? "Πλήρους ή Μερικής Απασχόλησης" : "")" 
                                                                                                               readonly />
                                                                                                    </div>
                                                                                                    <div class="form-group">
                                                                                                        <label for="viewForeas"><strong>Φορέας</strong></label>
                                                                                                        <input type="text" id="viewForeas" class="form-control" value="@currentJob.PositionForeas" readonly />
                                                                                                    </div>
                                                                                                    <div class="form-group">
                                                                                                        <label style="font-weight: bold;">Ξεκινάει Από</label>
                                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                            <i class="far fa-calendar-alt" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                                            <span>@currentJob.PositionActivePeriod.ToString("yyyy-MM-dd")</span>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <div class="form-group">
                                                                                                        <label style="font-weight: bold;">Email Επικοινωνίας</label>
                                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                            <i class="fas fa-envelope" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                                            <span>@currentJob.PositionContactPerson</span>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <div class="form-group">
                                                                                                        <label for="viewPerifereiaLocation"><strong>Περιφέρεια</strong></label>
                                                                                                        <input type="text" id="viewPerifereiaLocation" class="form-control" value="@currentJob.PositionPerifereiaLocation" readonly />
                                                                                                    </div>
                                                                                                    <div class="form-group">
                                                                                                        <label for="viewDimosLocation"><strong>Δήμος</strong></label>
                                                                                                        <input type="text" id="viewDimosLocation" class="form-control" value="@currentJob.PositionDimosLocation" readonly />
                                                                                                    </div>
                                                                                                    <div class="form-group">
                                                                                                        <label for="viewPostalCodeLocation"><strong>Ταχ. Κώδικας</strong></label>
                                                                                                        <input type="text" id="viewPostalCodeLocation" class="form-control" value="@currentJob.PositionPostalCodeLocation" readonly />
                                                                                                    </div>
                                                                                                    <div class="form-group">
                                                                                                        <label style="font-weight: bold;">Προσφορά Μεταφορικού Μέσου</label>
                                                                                                        <div class="form-control d-flex align-items-center" style="height: auto; 
                                                                                                             @(currentJob.PositionTransportOffer ? "color: #28a745;" : "color: #dc3545;")">
                                                                                                            <i class="fas fa-car" style="margin-right: 8px;"></i>
                                                                                                            <span>@(currentJob.PositionTransportOffer ? "Ναι" : "Όχι")</span>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <div class="form-group">
                                                                                                        <label for="viewAreas"><strong>Τομείς</strong></label>
                                                                                                        <textarea id="viewAreas" class="form-control" rows="3" readonly>@currentJob.PositionAreas</textarea>
                                                                                                    </div>
                                                                                                    <div class="form-group">
                                                                                                        <label for="viewStatus"><strong>Κατάσταση</strong></label>
                                                                                                        <select id="viewStatus" class="form-control" disabled>
                                                                                                            <option value="Δημοσιευμένη" selected="@(currentJob.PositionStatus == "Δημοσιευμένη")">Δημοσιευμένη</option>
                                                                                                            <option value="Μη Δημοσιευμένη" selected="@(currentJob.PositionStatus == "Μη Δημοσιευμένη")">Μη Δημοσιευμένη</option>
                                                                                                            <option value="Αποσυρμένη" selected="@(currentJob.PositionStatus == "Αποσυρμένη")">Αποσυρμένη</option>
                                                                                                        </select>
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="modal-footer">
                                                                                                    <button type="button" class="btn btn-secondary" @onclick="CloseModalForJobs">Κλείσιμο</button>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                }




                                                                                @*MODAL FOR EDIT COMPANY JOBS*@
                                                                                @if (isEditPopupVisibleForJobs) 
                                                                                {
                                                                                    <div class="modal fade show" style="display: block;" tabindex="-1" role="dialog" aria-modal="true">
                                                                                        <div class="modal-dialog" role="document">
                                                                                            <div class="modal-content">
                                                                                                <div class="modal-header">
                                                                                                    <h5 class="modal-title" style="color: #007BFF;">@selectedJob.PositionTitle</h5>
                                                                                                    <button type="button" class="close" @onclick="CloseEditPopupForJobs">&times;</button>
                                                                                                </div>
                                                                                                <div class="modal-body">
                                                                                                    <div class="form-group">
                                                                                                        <label for="editTitle"><strong>Τίτλος</strong></label>
                                                                                                        <input type="text" id="editTitle" class="form-control" @bind="selectedJob.PositionTitle" />
                                                                                                    </div>
                                                                                                    <div class="form-group">
                                                                                                        <label for="editDescription"><strong>Περιγραφή</strong></label>
                                                                                                        <textarea id="editDescription" class="form-control" @bind="selectedJob.PositionDescription"></textarea>
                                                                                                    </div>

                                                                                                    <div class="form-group">
                                                                                                        <label for="editType"><strong>Τύπος</strong></label>
                                                                                                        <div class="input-group">
                                                                                                            <select id="editType" class="form-control @(showErrorMessage && string.IsNullOrWhiteSpace(selectedJob.PositionType) ? "shake error" : "")" @bind="selectedJob.PositionType">
                                                                                                                <option value="Full-Time">Πλήρης Απασχόλησης</option>
                                                                                                                <option value="Part-Time">Μερικής Απασχόλησης</option>
                                                                                                                <option value="Part-Time_Full-Time">Μερικής ή Πλήρης Απασχόλησης</option>
                                                                                                            </select>
                                                                                                            <div class="input-group-append">
                                                                                                                <span class="input-group-text">
                                                                                                                    <i class="fas fa-chevron-down"></i>
                                                                                                                </span>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>

                                                                                                    <div class="form-group">
                                                                                                        <label for="editForeas"><strong>Φορέας</strong></label>
                                                                                                        <div class="input-group">
                                                                                                            <select id="editForeas" class="form-control @(showErrorMessage && string.IsNullOrWhiteSpace(selectedJob.PositionForeas) ? "shake error" : "")" @bind="selectedJob.PositionForeas">
                                                                                                                @foreach (var foreas in ForeasType)
                                                                                                                {
                                                                                                                    <option value="@foreas">@foreas</option>
                                                                                                                }
                                                                                                            </select>
                                                                                                            <div class="input-group-append">
                                                                                                                <span class="input-group-text">
                                                                                                                    <i class="fas fa-chevron-down"></i>
                                                                                                                </span>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>

                                                                                                    <div class="form-group">
                                                                                                        <label for="editContactPerson"><strong>Υπεύθυνος Επικοινωνίας</strong></label>
                                                                                                        <input type="text" id="editContactPerson" class="form-control" @bind="selectedJob.PositionContactPerson" />
                                                                                                    </div>

                                                                                                    <div class="form-group">
                                                                                                        <label for="editPerifereiaLocationForInternship"><strong>Περιφέρεια</strong></label>
                                                                                                        <div class="input-group">
                                                                                                            <select id="editPerifereiaLocationForInternship" class="form-control @(showErrorMessage && string.IsNullOrWhiteSpace(selectedJob.PositionPerifereiaLocation) ? "shake error" : "")" @bind="selectedJob.PositionPerifereiaLocation">
                                                                                                                <option value="">-- Επιλέξτε Περιφέρεια --</option>
                                                                                                                @foreach (var region in Regions)
                                                                                                                {
                                                                                                                    <option value="@region">@region</option>
                                                                                                                }
                                                                                                            </select>
                                                                                                            <div class="input-group-append">
                                                                                                                <span class="input-group-text">
                                                                                                                    <i class="fas fa-chevron-down"></i>
                                                                                                                </span>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>

                                                                                                    <div class="form-group">
                                                                                                        <label for="editDimosLocation"><strong>Δήμος</strong></label>
                                                                                                        <div class="input-group">
                                                                                                            <select id="editDimosLocation" class="form-control @(showErrorMessage && string.IsNullOrWhiteSpace(selectedJob.PositionDimosLocation) ? "shake error" : "")" @bind="selectedJob.PositionDimosLocation">
                                                                                                                <option value="">-- Επιλέξτε Δήμο --</option>
                                                                                                                @if (!string.IsNullOrEmpty(selectedJob.PositionPerifereiaLocation) && RegionToTownsMap.ContainsKey(selectedJob.PositionPerifereiaLocation))
                                                                                                                {
                                                                                                                    foreach (var town in RegionToTownsMap[selectedJob.PositionPerifereiaLocation])
                                                                                                                    {
                                                                                                                        <option value="@town">@town</option>
                                                                                                                    }
                                                                                                                }
                                                                                                            </select>
                                                                                                            <div class="input-group-append">
                                                                                                                <span class="input-group-text">
                                                                                                                    <i class="fas fa-chevron-down"></i>
                                                                                                                </span>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>

                                                                                                    <div class="form-group">
                                                                                                        <label for="editPostalCodeLocation"><strong>Ταχυδρομικός Κώδικας</strong></label>
                                                                                                        <input type="text" id="editPostalCodeLocation" class="form-control" @bind="selectedJob.PositionPostalCodeLocation" />
                                                                                                    </div>
                                                                                                    <div class="form-group">
                                                                                                        <label for="editTransportOffer"><strong>Προσφορά Μεταφοράς</strong></label>
                                                                                                        <div>
                                                                                                            <input type="checkbox" id="editTransportOffer" class="form-check-input" @bind="selectedJob.PositionTransportOffer" />
                                                                                                            <span class="ml-2">@(selectedJob.PositionTransportOffer ? "Ναι" : "Όχι")</span>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <br/>
                                                                                                    <div class="form-group">
                                                                                                        <label for="editjobAreas"> <strong>Τομείς Εργασίας</strong> </label>
                                                                                                        <div id="toggleCheckboxes" class="checkbox-container">
                                                                                                            @foreach (var area in Areas)
                                                                                                            {
                                                                                                                <div class="form-check">
                                                                                                                    <input type="checkbox"
                                                                                                                           id="area_@area.Id"
                                                                                                                           class="form-check-input"
                                                                                                                           @onchange="(e) => OnCheckedChangedForEditCompanyJobAreas(e, area)"
                                                                                                                           checked="@(selectedJob.PositionAreas.Contains(area.AreaName))" />
                                                                                                                    <label class="form-check-label" for="area_@area.Id">
                                                                                                                        @area.AreaName
                                                                                                                    </label>
                                                                                                                </div>
                                                                                                            }
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <br/>
                                                                                                    <div class="form-group">
                                                                                                        <label for="editActivePeriod"><strong>Ξεκινάει Από</strong></label>
                                                                                                        <input type="date" id="editActivePeriod" class="form-control" @bind="selectedJob.PositionActivePeriod" />
                                                                                                    </div>
                                                                                                    <div class="form-group">
                                                                                                        <label for="editLastUpdate"><strong>Ημερομηνία Τελευταίας Ανανέωσης Θέσης</strong></label>
                                                                                                        <input type="date" id="editLastUpdate" class="form-control" @bind="selectedJob.UpdateDateTime" />
                                                                                                    </div>
                                                                                                    <div class="form-group">
                                                                                                        <label for="editJobAttachment"><strong>Αντικατάσταση Συνημμένου</strong></label>
                                                                                                        <InputFile OnChange="HandleFileUploadToEditCompanyJobAttachment" />
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="modal-footer">
                                                                                                    <button type="button" class="btn btn-secondary" @onclick="CloseEditPopupForJobs">Ακύρωση</button>
                                                                                                    <button type="button" class="btn btn-primary" @onclick="SaveEditedJob">Αποθήκευση</button>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                }













@*----------------------------------------------------------------------------------------------------------JOBS TAB COMPANIES END------------------------------------------------------------------------------------------------------------*@


@*----------------------------------------------------------------------------------------------------------INTERNSHIPS TAB COMPANIES START------------------------------------------------------------------------------------------------------------*@


                                            <div class="tab-pane fade" id="internships" role="tabpanel" aria-labelledby="internships-tab">
                                                <!-- ΔΗΜΙΟΥΡΓΙΑ ΠΡΑΚΤΙΚΉΣ ΑΣΚΗΣΗΣ ΩΣ COMPANY USER-->
                                                <div class="mb-3 row-dark-gray">
                                                    <div class="d-flex justify-content-between align-items-center">
                                                        <label class="form-label" style="color: #FFF8DC;">• Δημιουργία Πρακτικής Άσκησης •</label>
                                                        <button class="btn btn-link" @onclick="ToggleFormVisibilityForUploadCompanyInternships">
                                                            @if (isUploadCompanyInternshipsFormVisible)
                                                            {
                                                                <span>&#8722;</span> <!-- Minus sign -->
                                                            }
                                                            else
                                                            {
                                                                <span>&#43;</span> <!-- Plus sign -->
                                                            }
                                                        </button>
                                                    </div>
                                                </div>
                                                @if (isUploadCompanyInternshipsFormVisible)
                                                {

                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="companyinternshipType"><strong>Τύπος Θέσης</strong><span style="color: red;"> *</span></label>
                                                            <div class="input-group">
                                                                <select id="companyinternshipType" class="form-control @(showErrorMessage && string.IsNullOrWhiteSpace(companyInternship.CompanyInternshipType) ? "shake error" : "")" @bind="companyInternship.CompanyInternshipType">
                                                                    <option value="">-- Επιλέξτε Τύπο Πρακτικής --</option>
                                                                    <option value="Full-Time">Πλήρης Απασχόλησης</option>
                                                                    <option value="Part-Time">Μερικής Απασχόλησης</option>
                                                                    <option value="Part-Time_Full-Time">Μερικής ή Πλήρης Απασχόλησης</option>
                                                                </select>
                                                                <div class="input-group-append">
                                                                    <span class="input-group-text">
                                                                        <i class="fas fa-chevron-down"></i>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        @if (showErrorMessage && string.IsNullOrWhiteSpace(companyInternship.CompanyInternshipType))
                                                        {
                                                            <div class="text-danger mt-1">Απαιτείται επιλογή Τύπου Θέσης.</div>
                                                        }
                                                    </div>
                                                    

                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="companyinternshipESPA"><strong>Χρηματοδότηση</strong><span style="color: red;"> *</span></label>
                                                            <div class="input-group">
                                                                <select id="companyinternshipESPA" class="form-control @(showErrorMessage && string.IsNullOrWhiteSpace(companyInternship.CompanyInternshipESPA) ? "shake error" : "")" @bind="companyInternship.CompanyInternshipESPA">
                                                                    <option value="">-- Επιλέξτε Χρηματοδότηση --</option>
                                                                    <option value="ESPA-Funding">Μέσω ΕΣΠΑ</option>
                                                                    <option value="Same-Funding">Ιδίου Φορέα</option>
                                                                    <option value="Espa-Funding_Same-Funding">Μέσω ΕΣΠΑ ή Ιδίου Φορέα</option>
                                                                </select>
                                                                <div class="input-group-append">
                                                                    <span class="input-group-text">
                                                                        <i class="fas fa-chevron-down"></i>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        @if (showErrorMessage && string.IsNullOrWhiteSpace(companyInternship.CompanyInternshipESPA))
                                                        {
                                                            <div class="text-danger mt-1">Απαιτείται επιλογή Τύπου Χρηματοδότησης.</div>
                                                        }
                                                    </div>
                                                    

                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="CompanyInternshipActivePeriod"><strong>Διαθέσιμη Από</strong><span style="color: red;"> *</span></label>
                                                            <input type="date" id="CompanyInternshipActivePeriod" class="form-control @(showErrorMessage && companyInternship.CompanyInternshipActivePeriod.Date <= DateTime.Today ? "shake error" : "")" 
                                                                   @bind="companyInternship.CompanyInternshipActivePeriod" />
                                                        </div>
                                                        @if (showErrorMessage && companyInternship.CompanyInternshipActivePeriod.Date <= DateTime.Today)
                                                        {
                                                            <div class="text-danger mt-1">Η ημερομηνία πρέπει να είναι μεταγενέστερη της σημερινής ημερομηνίας.</div>
                                                        }
                                                    </div>
                                                    

                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="CompanyInternshipFinishEstimation"><strong>Ολοκλήρωση Μέχρι</strong><span style="color: red;"> *</span></label>
                                                            <input type="date" id="CompanyInternshipFinishEstimation" class="form-control @(showErrorMessage && companyInternship.CompanyInternshipFinishEstimation.Date <= DateTime.Today ? "shake error" : "")" 
                                                                   @bind="companyInternship.CompanyInternshipFinishEstimation" />
                                                        </div>
                                                        @if (showErrorMessage && companyInternship.CompanyInternshipFinishEstimation.Date <= DateTime.Today)
                                                        {
                                                            <div class="text-danger mt-1">Η ημερομηνία λήξης πρέπει να είναι μεταγενέστερη της ημερομηνίας έναρξης</div>
                                                        }
                                                    </div>
                                                    

                                                    <div class="row mb-3">
                                                        <div class="col-md-4 position-relative">
                                                            <label for="positionTitle"><strong>Τίτλος Θέσης</strong><span style="color: red;"> *</span></label>
                                                            <input type="text" id="positionTitle" class="form-control @(showErrorMessage && string.IsNullOrWhiteSpace(companyInternship.CompanyInternshipTitle) ? "shake error" : "")" @bind="companyInternship.CompanyInternshipTitle" @oninput="CheckCharacterLimitInInternshipFieldUploadAsCompany" maxlength="120" />
                                                            <small class="character-limit light-cadetblue-text">@remainingCharactersInInternshipFieldUploadAsCompany/120</small>
                                                        </div>
                                                        @if (showErrorMessage && string.IsNullOrWhiteSpace(companyInternship.CompanyInternshipTitle))
                                                        {
                                                            <div class="text-danger mt-1">Απαιτείται Τίτλος Θέσης.</div>
                                                        }
                                                    </div>
                                                    

                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="CompanyInternshipContactPerson"><strong>Email Υπευθύνου</strong><span style="color: red;"> *</span></label>
                                                            <input type="email" id="CompanyInternshipContactPerson" class="form-control @(showErrorMessage && string.IsNullOrWhiteSpace(companyInternship.CompanyInternshipContactPerson) ? "shake error" : "")" @bind="companyInternship.CompanyInternshipContactPerson" placeholder="example@mail.com" />
                                                        </div>
                                                    </div>

                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="CompanyInternshipContactTelephonePerson">Τηλέφωνο Υπευθύνου<span style="font-style: italic; color: gray;"> (Προαιρετικό)</span></label>
                                                            <div class="input-group">
                                                                <div class="input-group-prepend">
                                                                    <span class="input-group-textfortelephone">+30</span>
                                                                </div>
                                                                <input type="tel" id="CompanyInternshipContactTelephonePerson"
                                                                       class="form-control @(showErrorMessage && string.IsNullOrWhiteSpace(companyInternship.CompanyInternshipContactTelephonePerson) ? "" : "")"
                                                                       @bind="companyInternship.CompanyInternshipContactTelephonePerson"
                                                                       placeholder="Τηλέφωνο Υπευθύνου" />
                                                            </div>
                                                        </div>
                                                    </div>


                                                    <!-- Region Dropdown -->
                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="CompanyInternshipPerifereiaLocation"><strong>Περιφέρεια</strong><span style="color: red;"> *</span></label>
                                                            <div class="input-group">
                                                                <select id="CompanyInternshipPerifereiaLocation" class="form-control @(showErrorMessage && string.IsNullOrWhiteSpace(companyInternship.CompanyInternshipPerifereiaLocation) ? "shake error" : "")" @bind="companyInternship.CompanyInternshipPerifereiaLocation">
                                                                    <option value="">-- Επιλέξτε Περιφέρεια --</option>
                                                                    @foreach (var region in Regions)
                                                                    {
                                                                        <option value="@region">@region</option>
                                                                    }
                                                                </select>
                                                                <div class="input-group-append">
                                                                    <span class="input-group-text">
                                                                        <i class="fas fa-chevron-down"></i>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        @if (showErrorMessage && string.IsNullOrWhiteSpace(companyInternship.CompanyInternshipPerifereiaLocation))
                                                        {
                                                            <div class="text-danger mt-1">Απαιτείται επιλογή Περιφέρειας.</div>
                                                        }
                                                    </div>
                                                    

                                                    <!-- Town Dropdown -->
                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="CompanyInternshipDimosLocation"><strong>Δήμος</strong><span style="color: red;"> *</span></label>
                                                            <div class="input-group">
                                                                <select id="CompanyInternshipDimosLocation" class="form-control @(showErrorMessage && string.IsNullOrWhiteSpace(companyInternship.CompanyInternshipDimosLocation) ? "shake error" : "")" @bind="companyInternship.CompanyInternshipDimosLocation">
                                                                    <option value="">-- Επιλέξτε Δήμο --</option>
                                                                    @foreach (var town in GetTownsForRegion(companyInternship.CompanyInternshipPerifereiaLocation))
                                                                    {
                                                                        <option value="@town">@town</option>
                                                                    }
                                                                </select>
                                                                <div class="input-group-append">
                                                                    <span class="input-group-text">
                                                                        <i class="fas fa-chevron-down"></i>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        @if (showErrorMessage && string.IsNullOrWhiteSpace(companyInternship.CompanyInternshipDimosLocation))
                                                        {
                                                            <div class="text-danger mt-1">Απαιτείται επιλογή δήμου.</div>
                                                        }
                                                    </div>
                                                    

                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="CompanyInternshipPostalCodeLocation">Ταχυδρομικός Κώδικας Τοποθεσίας<span style="font-style: italic; color: gray;"> (Προαιρετικό)</span></label>
                                                            <input type="text" id="CompanyInternshipPostalCodeLocation" class="form-control" @bind="companyInternship.CompanyInternshipPostalCodeLocation" placeholder="Ταχυδρομικός Κώδικας" />
                                                        </div>
                                                    </div>

                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label><strong>Προσφορά Μεταφοράς προς Εταιρία</strong><span style="color: red;"> *</span></label>
                                                            <div class="form-check">
                                                                <input type="radio" id="CompanyInternshipTransportOfferYes" class="form-check-input" name="CompanyInternshipTransportOffer" value="true" checked="@(companyInternship.CompanyInternshipTransportOffer ? "checked" : "")" @onchange="() => UpdateTransportOffer(true)" />
                                                                <label for="CompanyInternshipTransportOfferYes" class="form-check-label">Ναι</label>
                                                            </div>
                                                            <div class="form-check">
                                                                <input type="radio" id="CompanyInternshipTransportOfferNo" class="form-check-input" name="CompanyInternshipTransportOffer" value="false" checked="@(companyInternship.CompanyInternshipTransportOffer ? "" : "checked")" @onchange="() => UpdateTransportOffer(false)" />
                                                                <label for="CompanyInternshipTransportOfferNo" class="form-check-label">Όχι</label>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label @onclick="ToggleCheckboxesForCompanyInternship">
                                                                <strong>Τομέας Πρακτικής</strong><span style="color: red;"> *</span>
                                                                <span class="light-cadetblue-text"> (Άνοιγμα/Κλείσιμο)</span>
                                                            </label>

                                                            <div id="toggleCheckboxes" class="checkbox-container @(showErrorMessage && !SelectedAreasWhenUploadInternshipAsCompany.Any() ? "shake error" : "")">
                                                                @if (Areas == null || !Areas.Any())
                                                                {
                                                                    <p>Φορτώνει...</p>
                                                                }
                                                                else
                                                                {
                                                                    @foreach (var area in Areas)
                                                                    {
                                                                        <div class="form-check">
                                                                            <input type="checkbox"
                                                                                   id="area_@area.Id"
                                                                                   class="form-check-input"
                                                                                   @onchange="(e) => OnCheckedChangedAreasWhenUploadInternshipAsCompany(e, area)"
                                                                                   checked="@IsSelectedAreasWhenUploadInternshipAsCompany(area)" />
                                                                            <label class="form-check-label" for="area_@area.Id">
                                                                                @area.AreaName
                                                                            </label>
                                                                        </div>
                                                                    }
                                                                }
                                                            </div>
                                                            @if (showErrorMessage && !SelectedAreasWhenUploadInternshipAsCompany.Any())
                                                            {
                                                                <div class="text-danger mt-1">Πρέπει να επιλέξετε τουλάχιστον 1 Περιοχή Ενδιαφέροντος.</div>
                                                            }
                                                        </div>
                                                    </div>


                                                    <div class="row mb-3">
                                                        <div class="col-md-4 position-relative">
                                                            <label for="CompanyInternshipDescription"><strong>Περιγραφή Πρακτικής</strong><span style="color: red;"> *</span></label>
                                                            <textarea id="CompanyInternshipDescription" class="form-control @(showErrorMessage && string.IsNullOrWhiteSpace(companyInternship.CompanyInternshipDescription) ? "shake error" : "")"
                                                                      @bind="companyInternship.CompanyInternshipDescription"
                                                                      @oninput="CheckCharacterLimitInInternshipDescriptionUploadAsCompany"
                                                                      maxlength="1000"
                                                                      placeholder="Περιγραφή Πρακτικής"></textarea>
                                                            <small class="character-limit light-cadetblue-text">@remainingCharactersInInternshipDescriptionUploadAsCompany/1000</small>
                                                        </div>
                                                        @if (showErrorMessage && string.IsNullOrWhiteSpace(companyInternship.CompanyInternshipDescription))
                                                        {
                                                            <div class="text-danger mt-1">Απαιτείται περιγραφή της θέσης.</div>
                                                        }
                                                    </div>
                                                    

                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="CompanyInternshipAttachment">Συνημμένο Αρχείο Πρακτικής Άσκησης<span style="font-style: italic; color: gray;"> (Προαιρετικό)</span></label>
                                                            <InputFile id="positionAttachment" class="form-control" OnChange="HandleFileSelectedForUploadInternshipAsCompany" />
                                                        </div>
                                                    </div>

                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="CompanyInternshipEKPASupervisor">Επιβλέπων Καθηγητής<span style="font-style: italic; color: gray;"> (Προαιρετικό)</span></label>
                                                            <div class="input-group">
                                                                <select id="CompanyInternshipEKPASupervisor" class="form-control" @bind="selectedProfessorId">
                                                                    <option value="">-- Χωρίς Προτίμηση --</option>
                                                                    @foreach (var professor in professors)
                                                                    {
                                                                        <option value="@professor.Id">
                                                                            @($"{professor.ProfName} {professor.ProfSurname}")
                                                                        </option>
                                                                    }
                                                                </select>
                                                                <div class="input-group-append">
                                                                    <span class="input-group-text">
                                                                        <i class="fas fa-chevron-down"></i>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>


                                                    <div class="mb-3">
                                                        <button class="modern-button" style="background-color: #007bff; color: white; display: inline-flex; align-items: center;" @onclick="HandleSaveClickToSaveInternshipsAsCompany">
                                                            <i class="fa-regular fa-floppy-disk" style="margin-right: 8px;"></i>Προσωρινή Αποθήκευση Πρακτικής Άσκησης
                                                        </button>
                                                        
                                                        <button class="modern-button" style="background-color: #28a745; color: white; display: inline-flex; align-items: center;" @onclick="HandlePublishClickToSaveInternshipsAsCompany">
                                                            <i class="fa-solid fa-floppy-disk" style="margin-right: 8px;"></i>Δημοσίευση Πρακτικής Άσκησης
                                                        </button>
                                                    </div>
                                                    @if (showSuccessMessageWhenSaveInternshipAsCompany)
                                                    {
                                                        <div class="alert alert-success alert-dismissible fade show" role="alert">
                                                            <strong>Η Θέση Έχει Δημιουργηθεί Επιτυχώς!</strong>
                                                        </div>
                                                    }

                                                }


                                                    @*EDW THA MPOOUNE TA PEDIA GIA TO ANEVASMA PRAKTIKIS APO COMPANY - EDW EMEINA PRIN TIS DIAKOPES FRIDAY 26/7*@
                                                    @*ΠΡΕΠΕΙ ΝΑ ΜΠΕΙ ΚΟΥΜΠΑΚΙ ΓΙΑ ΑΝΕΒΑΣΜΑ ΠΡΑΚΤΙΚΗΣ ΩΣ ΕΤΑΙΡΙΑ ΚΑΙ ΤΑ ΥΠΟΛΟΙΠΟΑ ΠΕΔΙΑ. ΜΕΤΑ ΚΑΝΕ ΤΗΝ ΕΜΦΑΝΙΣΗ ΤΩΝ ΠΡΑΚΤΙΚΩΝ ΟΠΩΣ ΟΙ STUDENTS*@



@*-------------------------------------------------------------------------------------SHOW MY UPLOADED INTERNSHIPS AS COMPANY---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*@


                                                <div class="mb-3 row-dark-gray">
                                                    <div class="d-flex justify-content-between align-items-center">
                                                        <label class="form-label" style="color: #FFF8DC;">• Ιστορικό Θέσεων Πρακτικής Άσκησης •</label>
                                                        <button class="btn btn-link" @onclick="ToggleFormVisibilityToShowMyActiveInternshipsAsCompany">
                                                            @if (isShowActiveInternshipsAsCompanyFormVisible)
                                                            {
                                                                <span>&#8722;</span> <!-- Minus sign -->
                                                            }
                                                            else
                                                            {
                                                                <span>&#43;</span> <!-- Plus sign -->
                                                            }
                                                        </button>
                                                    </div>
                                                </div>                                              
                                                @if (isShowActiveInternshipsAsCompanyFormVisible)
                                                {
                                                    <div class="col-md-2">
                                                        <!-- Reduced the column width -->
                                                        <label for="statusFilter" style="color: #4682b4;"><strong>Φίλτρο Εμφάνισης</strong></label>
                                                        <div class="input-group">
                                                            <select id="statusFilter" class="form-control form-control-sm" @bind="selectedStatusFilterForInternships">
                                                                <!-- form-control-sm for a smaller dropdown -->
                                                                <option value="Όλα">Όλες</option>
                                                                <option value="Δημοσιευμένη">Δημοσιευμένες</option>
                                                                <option value="Μη Δημοσιευμένη">Μη Δημοσιευμένες</option>
                                                                <option value="Αποσυρμένη">Αποσυρμένες</option>
                                                            </select>
                                                            <div class="input-group-append">
                                                                <span class="input-group-text">
                                                                    <i class="fas fa-chevron-down"></i>
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-2">
                                                        <label  style="color: #4682b4;"><strong>Αποτελέσματα ανά Σελίδα</strong></label>
                                                        <div class="input-group" style="max-width: 65px;">
                                                            <select class="form-control form-control-sm" @onchange="OnPageSizeChange_SeeMyUploadedInternshipsAsCompany">
                                                                @foreach (var option in pageSizeOptions_SeeMyUploadedInternshipsAsCompany)
                                                                {
                                                                    <option value="@option" selected="@(companyInternshipsPerPage == option)">@option</option>
                                                                }
                                                            </select>
                                                            <div class="input-group-append">
                                                                <span class="input-group-text">
                                                                    <i class="fas fa-chevron-down"></i>
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <br/>
                                                    <div class="col-md-2">
                                                          @if (selectedStatusFilterForInternships == "Όλα")
                                                           {
                                                              <span><strong>Σύνολο: </strong>@totalCount</span>
                                                           }
                                                           @if (selectedStatusFilterForInternships == "Δημοσιευμένη")
                                                           {
                                                               <span><strong>Σύνολο: </strong>@publishedCount</span>
                                                           }
                                                           else if (selectedStatusFilterForInternships == "Μη Δημοσιευμένη")
                                                           {
                                                                <span><strong>Σύνολο: </strong>@unpublishedCount</span>
                                                           }
                                                           else if (selectedStatusFilterForInternships == "Αποσυρμένη")
                                                           {
                                                                 <span><strong>Σύνολο: </strong>@withdrawnCount</span>
                                                           }
                                                     </div>       
                                                    
                                                    @*COMPANY INTERNSHIPS*@
                                                    @if (internships != null && internships.Any())
                                                    {
                                                        <table class="table">
                                                            <thead>
                                                                <tr style="background-color: lightgray; border: 2px solid black;">
                                                                    <th style="border: 2px solid black;"><i class="fa-solid fa-key fa-sm" style="color: #9D00FF;"></i> Κωδικός Θέσης</th>
                                                                    <th style="border: 2px solid black;">
                                                                        <i class="fa-solid fa-font fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Τίτλος
                                                                    </th>
                                                                    <th style="border: 2px solid black;">
                                                                        <i class="fa-solid fa-arrows-up-down fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Κατάσταση Θέσης
                                                                    </th>
                                                                    <th style="border: 2px solid black;">
                                                                        <i class="fa-solid fa-calendar-days fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Δημιουργία Θέσης
                                                                    </th>
                                                                    <th style="border: 2px solid black;">
                                                                        <i class="fa-solid fa-location-dot fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Τόπος Άσκησης Πρακτικής
                                                                    </th>
                                                                    <th style="border: 2px solid black;">
                                                                        <i class="fa-solid fa-hand fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Ενέργειες
                                                                    </th>
                                                                    <th style="border: 2px solid black;">
                                                                        <i class="fa-solid fa-paperclip fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Αρχείο
                                                                    </th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                @foreach (var internship in GetPaginatedCompanyInternships().Where(i => selectedStatusFilterForInternships == "Όλα" || i.CompanyUploadedInternshipStatus == selectedStatusFilterForInternships))
                                                                {
                                                                    <tr class="internship-position-frame @(internship.CompanyUploadedInternshipStatus == "Δημοσιευμένη" ? "internshipstatus-dimosieumeni" : (internship.CompanyUploadedInternshipStatus == "Μη Δημοσιευμένη" ? "internshipstatus-midimosieumeni" : "internshipstatus-aposirmeni"))">
                                                                        <td style="color: #9D00FF;">
                                                                            @internship.RNGForInternshipUploadedAsCompany_HashedAsUniqueID
                                                                        </td>
                                                                        <td @onclick="() => ToggleInternshipExpanded(internship.RNGForInternshipUploadedAsCompany)" style="cursor: pointer;" title="Κλικ για εμφάνιση αιτούντων">
                                                                            @internship.CompanyInternshipTitle
                                                                        </td>
                                                                        <td>@internship.CompanyUploadedInternshipStatus</td>
                                                                        <td>@internship.CompanyInternshipUploadDate</td>
                                                                        <td>@internship.CompanyInternshipDimosLocation</td>
                                                                        <td>
                                                                        
                                                                            <div style="display: flex; align-items: center; gap: 10px;">
                                                                                <!-- Trash icon button for deleting the internship -->
                                                                                <button class="btn btn-danger" @onclick="() => DeleteInternship(internship.Id)" title="Οριστική Διαγραφή ">
                                                                                    <i class="fas fa-trash icon-button"></i>
                                                                                </button>


                                                                                <!-- Eye icon button for viewing details -->
                                                                                <button class="btn btn-secondary" @onclick="() => ShowInternshipDetails(internship)" title="Εμφάνιση Λεπτομερειών">
                                                                                    <i class="fas fa-eye icon-button"></i>
                                                                                </button>
                                                                                        @if (internship.CompanyUploadedInternshipStatus != "Δημοσιευμένη")
                                                                                        {
                                                                                            <!-- Pencil icon button for editing details -->
                                                                                            <button class="btn btn-secondary" @onclick="() => EditInternshipDetails(internship)" title="Διαμόρφωση Θέσεως">
                                                                                                <i class="fas fa-pencil-alt icon-button"></i>
                                                                                            </button>

                                                                                            <!-- Arrow Up icon button for updating status to Δημοσιευμένη -->
                                                                                            <button class="btn btn-secondary" @onclick='async () => await UpdateInternshipStatusAsCompany(internship.Id, "Δημοσιευμένη")' title="Δημοσίευση Θέσεως">
                                                                                                <i class="fas fa-arrow-up icon-button"style="color: cornflowerblue;" ></i>
                                                                                            </button>
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <!-- X icon button for updating status to Αποσυρμένη -->
                                                                                            <button class="btn btn-secondary" @onclick='async () => await UpdateInternshipStatusAsCompany(internship.Id, "Αποσυρμένη")' title="Απόσυρση Θέσεως">
                                                                                                <i class="fas fa-times" style="color: red;"></i>
                                                                                            </button>
                                                                                        }
                                                                                        @if (internship.CompanyUploadedInternshipStatus != "Μη Δημοσιευμένη")
                                                                                        {
                                                                                            <!-- Down Arrow icon button for updating status to Μη Δημοσιευμένη -->
                                                                                            <button class="btn btn-secondary" @onclick='() => ChangeInternshipStatusToUnpublished(internship.Id)' title="Αποδημοσίευση Θέσεως">
                                                                                                <i class="fas fa-arrow-down icon-button" style="color: yellow;"></i>
                                                                                            </button>
                                                                                        }
                                                                                        <!--  human icon FOR INTERNSHIP APPLICATION DETAILS -->
                                                                                <button class="btn btn-secondary" @onclick="() => ToggleInternshipExpanded(internship.RNGForInternshipUploadedAsCompany)" title="Εμφάνιση Υποψηφίων">
                                                                                    <i class="fa-solid fa-graduation-cap icon-button"></i> 
                                                                                </button>
                                                                            </div>
                                                                        </td>
                                                                               
                    
                                                                        
                                                                                @*MODAL TO EDIT COMPANY INTERNSHIP*@
                                                                                @if (isEditPopupVisibleForInternships)
                                                                                {
                                                                                    <div class="modal fade show" style="display: block;" tabindex="-1" role="dialog" aria-modal="true">
                                                                                        <div class="modal-dialog" role="document">
                                                                                            <div class="modal-content">
                                                                                                <div class="modal-header">
                                                                                                    <h5 class="modal-title" style="color: #007BFF;">@selectedInternship.CompanyInternshipTitle</h5>
                                                                                                    <button type="button" class="close" @onclick="CloseEditPopupForInternships">&times;</button>
                                                                                                </div>
                                                                                                <div class="modal-body">
                                                                                                    <!-- Form to edit the internship details -->
                                                                                                    <div class="form-group">
                                                                                                        <label for="editTitle"><strong>Τίτλος</strong></label>
                                                                                                        <input type="text" id="editTitle" class="form-control" @bind="selectedInternship.CompanyInternshipTitle" />
                                                                                                    </div>

                                                                                                    <div class="form-group">
                                                                                                        <label for="editDescription"><strong>Περιγραφή</strong></label>
                                                                                                        <textarea id="editDescription" class="form-control" @bind="selectedInternship.CompanyInternshipDescription"></textarea>
                                                                                                    </div>

                                                                                                    <div class="form-group">
                                                                                                        <label for="editType"><strong>Τύπος</strong></label>
                                                                                                        <div class="input-group">
                                                                                                            <select id="editType" class="form-control @(showErrorMessage && string.IsNullOrWhiteSpace(selectedInternship.CompanyInternshipType) ? "shake error" : "")" @bind="selectedInternship.CompanyInternshipType">
                                                                                                                <option value="">-- Επιλέξτε --</option>
                                                                                                                <option value="Full-Time">Πλήρους Απασχόλησης</option>
                                                                                                                <option value="Part-Time">Μερικής Απασχόλησης</option>
                                                                                                                <option value="Part-Time_Full-Time">Μερικής ή Πλήρους Απασχόλησης</option>
                                                                                                            </select>
                                                                                                            <div class="input-group-append">
                                                                                                                <span class="input-group-text">
                                                                                                                    <i class="fas fa-chevron-down"></i>
                                                                                                                </span>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>


                                                                                                    <div class="form-group">
                                                                                                        <label for="editType"><strong>Χρηματοδότηση</strong></label>
                                                                                                        <div class="input-group">
                                                                                                            <select id="editType" class="form-control @(showErrorMessage && string.IsNullOrWhiteSpace(selectedInternship.CompanyInternshipESPA) ? "shake error" : "")" @bind="selectedInternship.CompanyInternshipESPA">
                                                                                                                <option value="">-- Επιλέξτε --</option>
                                                                                                                <option value="ESPA-Funding">Μέσω ΕΣΠΑ</option>
                                                                                                                <option value="Self-Funding">Ιδίου Φορέα</option>
                                                                                                                <option value="ESPA-Funding_Self-Funding">Μέσω ΕΣΠΑ ή Ιδίου Φορέα</option>
                                                                                                            </select>
                                                                                                            <div class="input-group-append">
                                                                                                                <span class="input-group-text">
                                                                                                                    <i class="fas fa-chevron-down"></i>
                                                                                                                </span>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>


                                                                                                    <div class="form-group">
                                                                                                        <label for="editForeas"><strong>Φορέας</strong></label>
                                                                                                        <div class="input-group">
                                                                                                            <select id="editForeas" class="form-control @(showErrorMessage && string.IsNullOrWhiteSpace(selectedInternship.CompanyInternshipForeas) ? "shake error" : "")" @bind="selectedInternship.CompanyInternshipForeas">
                                                                                                                <option value="">-- Επιλέξτε --</option>
                                                                                                                @foreach (var foreas in ForeasType)
                                                                                                                {
                                                                                                                    <option value="@foreas">@foreas</option>
                                                                                                                }
                                                                                                            </select>
                                                                                                            <div class="input-group-append">
                                                                                                                <span class="input-group-text">
                                                                                                                    <i class="fas fa-chevron-down"></i>
                                                                                                                </span>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>

                                                                                                    <div class="form-group">
                                                                                                        <label for="editContactPerson"><strong>Υπεύθυνος Επικοινωνίας</strong></label>
                                                                                                        <input type="text" id="editContactPerson" class="form-control" @bind="selectedInternship.CompanyInternshipContactPerson" />
                                                                                                    </div>

                                                                                                    <div class="form-group">
                                                                                                        <label for="editPerifereiaLocation"><strong>Περιφέρεια</strong></label>
                                                                                                        <div class="input-group">
                                                                                                            <select id="editPerifereiaLocation" class="form-control @(showErrorMessage && string.IsNullOrWhiteSpace(selectedInternship.CompanyInternshipPerifereiaLocation) ? "shake error" : "")" @bind="selectedInternship.CompanyInternshipPerifereiaLocation">
                                                                                                                <option value="">-- Επιλέξτε Περιφέρεια --</option>
                                                                                                                @foreach (var region in Regions)
                                                                                                                {
                                                                                                                    <option value="@region">@region</option>
                                                                                                                }
                                                                                                            </select>
                                                                                                            <div class="input-group-append">
                                                                                                                <span class="input-group-text">
                                                                                                                    <i class="fas fa-chevron-down"></i>
                                                                                                                </span>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>

                                                                                                    <div class="form-group">
                                                                                                        <label for="editDimosLocation"><strong>Δήμος</strong></label>
                                                                                                        <div class="input-group">
                                                                                                            <select id="editDimosLocation" class="form-control" @bind="selectedInternship.CompanyInternshipDimosLocation">
                                                                                                                <option value="">-- Επιλέξτε Δήμο --</option>
                                                                                                                @if (!string.IsNullOrEmpty(selectedInternship.CompanyInternshipDimosLocation) && RegionToTownsMap.ContainsKey(selectedInternship.CompanyInternshipPerifereiaLocation))
                                                                                                                {
                                                                                                                    foreach (var town in RegionToTownsMap[selectedInternship.CompanyInternshipPerifereiaLocation])
                                                                                                                    {
                                                                                                                        <option value="@town">@town</option>
                                                                                                                    }
                                                                                                                }
                                                                                                            </select>
                                                                                                            <div class="input-group-append">
                                                                                                                <span class="input-group-text">
                                                                                                                    <i class="fas fa-chevron-down"></i>
                                                                                                                </span>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <div class="form-group">
                                                                                                        <label for="editTransportOffer"><strong>Προσφορά Μεταφοράς</strong></label>
                                                                                                        <div>
                                                                                                            <input type="checkbox" id="editTransportOffer" class="form-check-input" @bind="selectedInternship.CompanyInternshipTransportOffer" />
                                                                                                            <span class="ml-2">@(selectedInternship.CompanyInternshipTransportOffer ? "Ναι" : "Όχι")</span>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <br/>
                                                                                                    <div class="form-group">
                                                                                                        <label for="editjobAreas" @onclick="ToggleAreasInEditCompanyInternshipModalAsCompany" style="cursor: pointer;">
                                                                                                            <strong>Τομείς Πρακτικής</strong> 
                                                                                                            <i class="fas @(showExpandedAreasInCompanyInternshipEditModalAsCompany ? "fa-chevron-up" : "fa-chevron-down")"></i>
                                                                                                        </label>
                                                                                                        @if (showExpandedAreasInCompanyInternshipEditModalAsCompany)
                                                                                                        {
                                                                                                            <div id="toggleCheckboxes" class="checkbox-container">
                                                                                                                @foreach (var area in Areas)
                                                                                                                {
                                                                                                                    <div class="form-check">
                                                                                                                        <input type="checkbox"
                                                                                                                               id="area_@area.Id"
                                                                                                                               class="form-check-input"
                                                                                                                               @onchange="(e) => OnCheckedChangedForEditCompanyInternshipAreas(e, area)"
                                                                                                                               checked="@(selectedInternship.CompanyInternshipAreas.Contains(area.AreaName))" />
                                                                                                                        <label class="form-check-label" for="area_@area.Id">@area.AreaName</label>
                                                                                                                    </div>
                                                                                                                }
                                                                                                            </div>
                                                                                                        }
                                                                                                    </div>
                                                                                                    <br/>
                                                                                                    <div class="form-group">
                                                                                                        <label for="editActivePeriod"><strong>Ξεκινάει Από</strong></label>
                                                                                                        <input type="date" id="editActivePeriod" class="form-control" @bind="selectedInternship.CompanyInternshipActivePeriod" />
                                                                                                    </div>

                                                                                                    <div class="form-group">
                                                                                                        <label for="editFinishEstimation"><strong>Εκτιμώμενη Ημερομηνία Ολοκλήρωσης</strong></label>
                                                                                                        <input type="date" id="editFinishEstimation" class="form-control" @bind="selectedInternship.CompanyInternshipFinishEstimation" />
                                                                                                    </div>

                                                                                                    <div class="form-group">
                                                                                                        <label for="editSupervisor"><strong style="color: #87CEEB;">Επιβλέπων Καθηγητής</strong></label>
                                                                                                        <div class="input-group">
                                                                                                            <select id="editSupervisor" class="form-control" @bind="selectedInternship.CompanyInternshipEKPASupervisor">
                                                                                                                <option value="">Κανένας Καθηγητής</option>
                                                                                                                @foreach (var professor in professors)
                                                                                                                {
                                                                                                                    <option value="@professor.ProfName @professor.ProfSurname">@professor.ProfName @professor.ProfSurname</option>
                                                                                                                }
                                                                                                            </select>
                                                                                                            <div class="input-group-append">
                                                                                                                <span class="input-group-text">
                                                                                                                    <i class="fas fa-chevron-down"></i>
                                                                                                                </span>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>

                                                                                                    <div class="form-group">
                                                                                                        <label for="editJobAttachment"><strong>Αντικατάσταση Συνημμένου</strong></label>
                                                                                                        <InputFile OnChange="HandleFileUploadToEditCompanyInternshipAttachment" />
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="modal-footer">
                                                                                                    <button type="button" class="btn btn-secondary" @onclick="CloseEditPopupForInternships">Ακύρωση</button>
                                                                                                    <button type="button" class="btn btn-primary" @onclick="SaveEditedInternship">Αποθήκευση</button>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                }



                                                                                @if (isModalVisibleForInternships && currentInternship != null)
                                                                                {
                                                                                    <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0,0,0,0.5);">
                                                                                        <div class="modal-dialog modal-dialog-centered" role="document">
                                                                                            <div class="modal-content">
                                                                                                <div class="modal-header">
                                                                                                    <h5 class="modal-title" style="color: #4682B4;">@currentInternship.CompanyInternshipTitle</h5>
                                                                                                    <button type="button" class="close" @onclick="CloseModalForInternships">
                                                                                                        <span aria-hidden="true">&times;</span>
                                                                                                    </button>
                                                                                                </div>
                                                                                                <div class="modal-body">
                                                                                                    @*
                                                                                                    <div class="form-group">
                                                                                                        <label for="viewTitle" style="font-weight: bold;">Τίτλος</label>
                                                                                                        <input type="text" id="viewTitle" class="form-control" value="@currentInternship.CompanyInternshipTitle" readonly />
                                                                                                    </div>
                                                                                                    *@
                                                                                                    <div class="form-group">
                                                                                                        <label for="viewDescription" style="font-weight: bold;">Περιγραφή</label>
                                                                                                        <textarea id="viewDescription" class="form-control" readonly>@currentInternship.CompanyInternshipDescription</textarea>
                                                                                                    </div>
                                                                                                    <div class="form-group">
                                                                                                        <label for="viewType"><strong>Τύπος</strong></label>
                                                                                                        <input type="text" id="viewType" class="form-control" 
                                                                                                               value="@(currentInternship.CompanyInternshipType == "Full-Time" ? "Πλήρους Απασχόλησης" : 
                                                                                                                      currentInternship.CompanyInternshipType == "Part-Time" ? "Μερικής Απασχόλησης" : 
                                                                                                                      currentInternship.CompanyInternshipType == "Part-Time_Full-Time" ? "Μερικής ή Πλήρους Απασχόλησης" : "")" 
                                                                                                               readonly />
                                                                                                    </div>
                                                                                                    <div class="form-group">
                                                                                                        <label style="font-weight: bold;">Χρηματοδότηση</label>
                                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                            <i class="fas fa-hand-holding-dollar" style="color: #28a745; margin-right: 8px;"></i>
                                                                                                            <span>
                                                                                                                @(
                                                                                                                    currentInternship.CompanyInternshipESPA == "ESPA-Funding" ? "Μέσω ΕΣΠΑ" :
                                                                                                                    currentInternship.CompanyInternshipESPA == "Self-Funding" ? "Ιδίου Φορέα" :
                                                                                                                    currentInternship.CompanyInternshipESPA == "ESPA-Funding_Self-Funding" ? "Μέσω ΕΣΠΑ ή Ιδίου Φορέα" :
                                                                                                                    ""
                                                                                                                )
                                                                                                            </span>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <div class="form-group">
                                                                                                        <label for="viewForeas" style="font-weight: bold;">Φορέας</label>
                                                                                                        <input type="text" id="viewForeas" class="form-control" value="@currentInternship.CompanyInternshipForeas" readonly />
                                                                                                    </div>
                                                                                                    <div class="form-group">
                                                                                                        <label style="font-weight: bold;">Email Επικοινωνίας</label>
                                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                            <i class="fas fa-envelope" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                                            <span>@currentInternship.CompanyInternshipContactPerson</span>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <div class="form-group">
                                                                                                        <label for="viewPerifereiaLocation" style="font-weight: bold;">Περιφέρεια</label>
                                                                                                        <input type="text" id="viewPerifereiaLocation" class="form-control" value="@currentInternship.CompanyInternshipPerifereiaLocation" readonly />
                                                                                                    </div>
                                                                                                    <div class="form-group">
                                                                                                        <label for="viewDimosLocation" style="font-weight: bold;">Δήμος</label>
                                                                                                        <input type="text" id="viewDimosLocation" class="form-control" value="@currentInternship.CompanyInternshipDimosLocation" readonly />
                                                                                                    </div>
                                                                                                    <div class="form-group">
                                                                                                        <label for="viewPostalCodeLocation" style="font-weight: bold;">Ταχ. Κώδικας</label>
                                                                                                        <input type="text" id="viewPostalCodeLocation" class="form-control" value="@currentInternship.CompanyInternshipPostalCodeLocation" readonly />
                                                                                                    </div>
                                                                                                    <div class="form-group">
                                                                                                        <label style="font-weight: bold;">Προσφορά Μεταφορικού Μέσου</label>
                                                                                                        <div class="form-control d-flex align-items-center" style="height: auto; 
                                                                                                             @(currentInternship.CompanyInternshipTransportOffer ? "color: #28a745;" : "color: #dc3545;")">
                                                                                                            <i class="fas fa-car" style="margin-right: 8px;"></i>
                                                                                                            <span>@(currentInternship.CompanyInternshipTransportOffer ? "Ναι" : "Όχι")</span>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <div class="form-group">
                                                                                                        <label for="viewAreas" style="font-weight: bold;">Τομείς</label>
                                                                                                        <textarea id="viewAreas" class="form-control" readonly>@string.Join(Environment.NewLine, currentInternship.CompanyInternshipAreas.Split(','))</textarea>
                                                                                                    </div>
                                                                                                    <div class="form-group">
                                                                                                        <label style="font-weight: bold;">Ξεκινάει Από</label>
                                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                            <i class="far fa-calendar-alt" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                                            <span>@currentInternship.CompanyInternshipActivePeriod.ToString("yyyy-MM-dd")</span>
                                                                                                        </div>
                                                                                                    </div>

                                                                                                    <div class="form-group">
                                                                                                        <label style="font-weight: bold;">Εκτιμώμενη Ημερομηνία Ολοκλήρωσης</label>
                                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                            <i class="far fa-calendar-alt" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                                            <span>@currentInternship.CompanyInternshipFinishEstimation.ToString("yyyy-MM-dd")</span>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <div class="form-group">
                                                                                                        <label style="font-weight: bold; color: #87CEEB;">Επιβλέπων Καθηγητής</label>
                                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                            <i class="fas fa-user-tie" style="color: #87CEEB; margin-right: 8px;"></i>
                                                                                                            <span>@currentInternship.CompanyInternshipEKPASupervisor</span>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <div class="form-group">
                                                                                                        <label for="viewStatus" style="font-weight: bold;">Κατάσταση</label>
                                                                                                        <select id="viewStatus" class="form-control" disabled>
                                                                                                            <option value="Δημοσιευμένη" selected="@(currentInternship.CompanyUploadedInternshipStatus == "Δημοσιευμένη")">Δημοσιευμένη</option>
                                                                                                            <option value="Μη Δημοσιευμένη" selected="@(currentInternship.CompanyUploadedInternshipStatus == "Μη Δημοσιευμένη")">Μη Δημοσιευμένη</option>
                                                                                                            <option value="Αποσυρμένη" selected="@(currentInternship.CompanyUploadedInternshipStatus == "Αποσυρμένη")">Αποσυρμένη</option>
                                                                                                        </select>
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="modal-footer">
                                                                                                    <button type="button" class="btn btn-secondary" @onclick="CloseModalForInternships">Κλείσιμο</button>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                }
                                                                                
                                                                                <td>
                                                                                    @if (internship.CompanyInternshipAttachment != null && internship.CompanyInternshipAttachment.Length > 0)
                                                                                    {
                                                                                        <div style="display: flex; align-items: center;">
                                                                                            <button class="btn btn-secondary" @onclick="() => DownloadAttachmentForCompanyInternships(internship.Id)" title="Λήψη" style="text-decoration: none;">
                                                                                                <i class="fas fa-download icon-button"></i> Λήψη
                                                                                            </button>
                                                                                        </div>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <span style="display: block; text-align: center; font-weight: bold; font-style: italic;">
                                                                                            Δεν Διατίθεται
                                                                                        </span>
                                                                                    }
                                                                                </td>                                                              
                                                                    </tr>
                                                                    
                                                                    @*COMPANY INTERNSHIP APPLICANTS*@
                                                                    @if (expandedInternships.ContainsKey(internship.RNGForInternshipUploadedAsCompany) && expandedInternships[internship.RNGForInternshipUploadedAsCompany])
                                                                    {
                                                                        <br />
                                                                        <tr>
                                                                            <td colspan="9" style="padding: 0;">
                                                                                <div style="display: flex; justify-content: space-between; align-items: center; height: 24px; line-height: 24px; width: 100%;">
                                                                                    <i class="fa-solid fa-graduation-cap" style="font-size: 18px; color: #0d6efd;"></i>
                                                                                    <label class="form-label" style="color: #0d6efd; font-weight: bold; font-size: 18px; margin: 0;">Λεπτομέρειες Αιτούντων</label>
                                                                                    <i class="fa-solid fa-graduation-cap" style="font-size: 18px; color: #0d6efd;"></i>
                                                                                </div>
                                                                            </td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td colspan="9">
                                                                                <table class="table table-sm">
                                                                                    <thead>
                                                                                        <tr style="background-color: #f5f5f5; border: 1px solid darkblue;">
                                                                                            <th style="border: 1px solid darkblue;">
                                                                                                <i class="fa-solid fa-user fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                Προφίλ
                                                                                            </th>
                                                                                            <th style="border: 1px solid darkblue;">
                                                                                                <i class="fa-solid fa-signature fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                Όνομα
                                                                                            </th>
                                                                                            <th style="border: 1px solid darkblue;">
                                                                                                <i class="fa-solid fa-signature fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                Επώνυμο
                                                                                            </th>
                                                                                            <th style="border: 1px solid darkblue;">
                                                                                                <i class="fa-solid fa-calendar-plus fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                Ημερομηνία Αίτησης
                                                                                            </th>
                                                                                            <th style="border: 1px solid darkblue;">
                                                                                                <i class="fa-solid fa-calendar-plus fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                Έτος Φοίτησης
                                                                                            </th>
                                                                                            <th style="border: 1px solid darkblue;">
                                                                                                <i class="fa-solid fa-phone fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                Τηλέφωνο
                                                                                            </th>
                                                                                            <th style="border: 1px solid darkblue;">
                                                                                                <i class="fa-solid fa-comments fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                Επικοινωνία
                                                                                            </th>
                                                                                            <th style="border: 1px solid darkblue;">
                                                                                                <i class="fa-solid fa-hand fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                Ενέργεια
                                                                                            </th>
                                                                                            <th style="border: 1px solid darkblue;">
                                                                                                <i class="fa-solid fa-hourglass-half fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                Κατάσταση Αίτησης
                                                                                            </th>
                                                                                        </tr>
                                                                                    </thead>
                                                                                    <tbody>
                                                                                    @if (studentDataCache == null)
                                                                                    {
                                                                                        <!-- Loading state -->
                                                                                        <tr>
                                                                                            <td colspan="9" class="text-center">
                                                                                                <div class="spinner-border text-primary" role="status">
                                                                                                    <span class="sr-only">Φόρτωση...</span>
                                                                                                </div>
                                                                                                <p>Φόρτωση δεδομένων φοιτητών...</p>
                                                                                            </td>
                                                                                        </tr>
                                                                                    }
                                                                                    else if (internshipApplicantsMap.ContainsKey(internship.RNGForInternshipUploadedAsCompany) && 
                                                                                     internshipApplicantsMap[internship.RNGForInternshipUploadedAsCompany].Any())
                                                                                    {
                                                                                        @foreach (var applicant in internshipApplicantsMap[internship.RNGForInternshipUploadedAsCompany])
                                                                                        {
                                                                                            var student = studentDataCache.TryGetValue(applicant.StudentDetails.StudentEmailAppliedForInternship, out var s) ? s : null;
                                                                                            var status = applicant.InternshipStatusAppliedAtTheStudentSide ?? "N/A";
                                                                                            var companyStatus = applicant.InternshipStatusAppliedAtTheCompanySide ?? "N/A";

                                                                                            <tr style="background-color: @(companyStatus == "Επιτυχής" ? "lightgreen" :
                                                                                                                companyStatus == "Απορρίφθηκε" ? "lightcoral" :
                                                                                                                companyStatus == "Απορρίφθηκε (Απόσυρση Θέσεως Από Εταιρία)" ? "coral" :
                                                                                                                companyStatus == "Αποσύρθηκε από τον φοιτητή" ? "lightyellow" : "transparent")">
                                                                                                <td>
                                                                                                    <a href="#" @onclick="() => ShowStudentDetailsInNameAsHyperlink(applicant.StudentDetails.StudentUniqueIDAppliedForInternship)" 
                                                                                                       title="Προφίλ Υποψήφιου Σπουδαστή">
                                                                                                        <i class="fas fa-eye icon-button"></i>
                                                                                                        @if (student == null)
                                                                                                        {
                                                                                                            <span class="badge badge-warning ml-1">Δε βρέθηκε</span>
                                                                                                        }
                                                                                                    </a>
                                                                                                </td>
                                                                                                <td>@(student?.Name ?? "Δε βρέθηκε")</td>
                                                                                                <td>@(student?.Surname ?? "Δε βρέθηκε")</td>
                                                                                                <td>@applicant.StudentDetails.DateTimeStudentAppliedForInternship.ToString("dd/MM/yyyy HH:mm")</td>
                                                                                                <td>@(student?.StudyYear ?? "-")</td>
                                                                                                <td>@(student?.Telephone ?? "-")</td>
                                                                                                <td class="text-center">
                                                                                                    @applicant.StudentDetails.StudentEmailAppliedForInternship
                                                                                                    <a href="mailto:@applicant.StudentDetails.StudentEmailAppliedForInternship" title="Αποστολή Email">
                                                                                                        <i class="fas fa-envelope"></i>
                                                                                                    </a>
                                                                                                </td>
                                                                                                <td>
                                                                                                    @if (status == "Σε Επεξεργασία")
                                                                                                    {
                                                                                                        <div style="display: flex; gap: 10px; justify-content: center;">
                                                                                                            <span @onclick="() => ConfirmAndAcceptInternship(applicant.RNGForInternshipApplied, applicant.StudentDetails.StudentUniqueIDAppliedForInternship)" 
                                                                                                                  title="Αποδοχή Αίτησης" style="cursor: pointer;">
                                                                                                                <i class="fas fa-check" style="color: green; font-size: 24px;"></i>
                                                                                                            </span>

                                                                                                            <span @onclick="() => ConfirmAndRejectInternship(applicant.RNGForInternshipApplied, applicant.StudentDetails.StudentUniqueIDAppliedForInternship)" 
                                                                                                                  title="Απόρριψη Αίτησης" style="cursor: pointer;">
                                                                                                                <i class="fas fa-times" style="color: red; font-size: 24px;"></i>
                                                                                                            </span>
                                                                                                        </div>
                                                                                                    }
                                                                                                    else
                                                                                                    {
                                                                                                        <span class="text">@status</span>
                                                                                                    }
                                                                                                </td>
                                                                                                <td>
                                                                                                    @if (companyStatus == "Επιτυχής")
                                                                                                    {
                                                                                                        <span style="color: green; font-weight: bold;">Έχει γίνει Αποδοχή</span>
                                                                                                    }
                                                                                                    else if (companyStatus == "Απορρίφθηκε")
                                                                                                    {
                                                                                                        <span style="color: red; font-weight: bold;">Έχει Απορριφθεί</span>
                                                                                                    }
                                                                                                    else
                                                                                                    {
                                                                                                        <span>@companyStatus</span>
                                                                                                    }
                                                                                                </td>
                                                                                            </tr>
                                                                                        }
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <tr>
                                                                                            <td colspan="9" class="text-center text-danger">
                                                                                                <strong>Καμία Αίτηση για αυτήν την Πρακτική Άσκηση ακόμη</strong>
                                                                                            </td>
                                                                                        </tr>
                                                                                    }
                                                                                </tbody>
                                                                                </table>
                                                                            </td>
                                                                        </tr>
                                                                    }
                                                                }
                                                            </tbody>
                                                       </table>
                                                       <br/>
                                                       <!-- Pagination Controls -->
                                                        <div class="d-flex justify-content-center align-items-center mt-3 gap-1">
                                                            <!-- First Page (<<) -->
                                                            <span class="pagination-item @(currentPageForCompanyInternships == 1 ? "disabled" : "")" 
                                                                  @onclick="@(() => GoToFirstPageForCompanyInternships())">
                                                                &lt;&lt;
                                                            </span>
    
                                                            <!-- Previous Page (<) -->
                                                            <span class="pagination-item @(currentPageForCompanyInternships == 1 ? "disabled" : "")" 
                                                                  @onclick="@(() => PreviousPageForCompanyInternships())">
                                                                &lt;
                                                            </span>
    
                                                            <!-- Page Numbers -->
                                                            @foreach (var pageNum in GetVisiblePagesForCompanyInternships())
                                                            {
                                                                @if (pageNum == -1)
                                                                {
                                                                    <span class="pagination-ellipsis">...</span>
                                                                }
                                                                else
                                                                {
                                                                    <span class="pagination-item @(pageNum == currentPageForCompanyInternships ? "active" : "")" 
                                                                          @onclick="@(() => GoToPageForCompanyInternships(pageNum))">
                                                                        @pageNum
                                                                    </span>
                                                                }
                                                            }
    
                                                            <!-- Next Page (>) -->
                                                            <span class="pagination-item @(currentPageForCompanyInternships == totalPagesForCompanyInternships ? "disabled" : "")" 
                                                                  @onclick="@(() => NextPageForCompanyInternships())">
                                                                &gt;
                                                            </span>
    
                                                            <!-- Last Page (>>) -->
                                                            <span class="pagination-item @(currentPageForCompanyInternships == totalPagesForCompanyInternships ? "disabled" : "")" 
                                                                  @onclick="@(() => GoToLastPageForCompanyInternships())">
                                                                &gt;&gt;
                                                            </span>
    
                                                            <!-- Page counter -->
                                                            <span class="ms-3">Σελίδα @currentPageForCompanyInternships από @totalPagesForCompanyInternships</span>
                                                        </div>
                                                       <br/>
                                                       <br/>
                                                    }
                                                }
                                            </div>

                                            <!-- MODAL FOR STUDENT DETAILS FROM COMPANY JOBS/INTERNSHIPS/THESIS -->
                                            @if (isModalVisibleToShowStudentDetailsAsCompanyFromTheirHyperlinkNameInCompanyInternships)
                                            {
                                                <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                                    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                        <div class="modal-content">
                                                            <div class="modal-header">
                                                                <h5 class="modal-title" style="color: #4682B4;">
                                                                    @(selectedStudentFromCache?.Name ?? "N/A") @(selectedStudentFromCache?.Surname ?? "N/A")
                                                                </h5>
                                                                <button type="button" class="close" aria-label="Close" @onclick="CloseModalforHyperLinkTitleStudentName">
                                                                    <span aria-hidden="true">&times;</span>
                                                                </button>
                                                            </div>
                                                            <div class="modal-body">
                                                                @if (selectedStudentFromCache == null)
                                                                {
                                                                    <div class="alert alert-warning">Δεν βρέθηκαν στοιχεία για τον φοιτητή</div>
                                                                }
                                                                else
                                                                {
                                                                    <!-- Display student details here -->
                                                                    <div class="form-group text-center">
                                                                        @if (selectedStudentFromCache?.Image != null && selectedStudentFromCache.Image.Length > 0)
                                                                        {
                                                                            var base64Image = Convert.ToBase64String(selectedStudentFromCache.Image);
                                                                            <img src="data:image/jpeg;base64,@base64Image" alt="Φωτογραφία Προφίλ Σπουδαστή" 
                                                                                 style="max-width: 150px; max-height: 150px; border-radius: 50%; object-fit: cover;" />
                                                                        }
                                                                        else
                                                                        {
                                                                            <p>Δεν υπάρχει φωτογραφία Προφίλ</p>
                                                                        }
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Αριθμός Μητρώου</strong></label>
                                                                        <input type="text" class="form-control" value="@selectedStudentFromCache?.RegNumber" readonly />
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Πανεπιστήμιο</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-university" style="color: #007BFF; margin-right: 8px;"></i>
                                                                            <span>@selectedStudentFromCache?.University</span>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Τμήμα</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-building" style="color: #6c757d; margin-right: 8px;"></i>
                                                                            <span>@selectedStudentFromCache?.Department</span>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Επίπεδο Σπουδών</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-graduation-cap" style="color: #6c757d; margin-right: 8px;"></i>
                                                                            <span>@selectedStudentFromCache?.LevelOfDegree</span>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Τεχνικές Ικανότητες</strong></label>
                                                                        <textarea class="form-control" rows="2" readonly>@selectedStudentFromCache?.Keywords</textarea>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Περιοχές Εξειδίκευσης</strong></label>
                                                                        <textarea class="form-control" value="@selectedStudentFromCache?.AreasOfExpertise" readonly></textarea>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Ημερομηνία Εγγραφής</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="far fa-calendar-alt" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                            <span>@selectedStudentFromCache?.EnrollmentDate</span>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Επικοινωνία</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-envelope" style="color: #007BFF; margin-right: 8px;"></i>
                                                                            <span>@selectedStudentFromCache?.Email</span>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Τηλέφωνο</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                            <span>@selectedStudentFromCache?.Telephone</span>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Περιφέρεια</strong></label>
                                                                        <input type="text" class="form-control" value="@selectedStudentFromCache?.PermanentRegion" readonly />
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label><strong>Πόλη</strong></label>
                                                                        <input type="text" class="form-control" value="@selectedStudentFromCache?.PermanentTown" readonly />
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Διεύθυνση</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                            <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                            @if (!string.IsNullOrEmpty(selectedStudentFromCache?.PermanentAddress))
                                                                            {
                                                                                <a href="https://www.google.com/maps/search/?api=1&query=@Uri.EscapeDataString(selectedStudentFromCache.PermanentAddress)"
                                                                                   target="_blank"
                                                                                   style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                    @selectedStudentFromCache.PermanentAddress
                                                                                </a>
                                                                            }
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">LinkedIn Προφίλ</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                            <i class="fab fa-linkedin" style="color: #0077b5; margin-right: 8px;"></i>
                                                                            @if (!string.IsNullOrEmpty(selectedStudentFromCache?.LinkedInProfile))
                                                                            {
                                                                                <a href="@selectedStudentFromCache.LinkedInProfile" target="_blank" 
                                                                                   style="color: #0077b5; text-decoration: underline; word-break: break-word;">
                                                                                    @selectedStudentFromCache.LinkedInProfile
                                                                                </a>
                                                                            }
                                                                            else
                                                                            {
                                                                                <span style="color: #6c757d;">Δεν έχει οριστεί προφίλ LinkedIn ακόμη..</span>
                                                                            }
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Προσωπική Ιστοσελίδα</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                            <i class="fas fa-globe" style="color: #17a2b8; margin-right: 8px;"></i>
                                                                            @if (!string.IsNullOrEmpty(selectedStudentFromCache?.PersonalWebsite))
                                                                            {
                                                                                <a href="@selectedStudentFromCache.PersonalWebsite" target="_blank" 
                                                                                   style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                    @selectedStudentFromCache.PersonalWebsite
                                                                                </a>
                                                                            }
                                                                            else
                                                                            {
                                                                                <span style="color: #6c757d;">Δεν έχει οριστεί ιστοσελίδα ακόμη..</span>
                                                                            }
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Διαθέτει Μέσο Μεταφοράς</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto; 
                                                                             @(selectedStudentFromCache?.Transport == true ? "color: #28a745;" : "color: #dc3545;")">
                                                                            <i class="fas fa-car" style="margin-right: 8px;"></i>
                                                                            <span>@(selectedStudentFromCache?.Transport == true ? "Ναι" : "Όχι")</span>
                                                                        </div>
                                                                    </div>
                                                                    <br/>
                                                                    <div class="form-group">
                                                                        <label><strong>Βιογραφικό</strong></label>
                                                                        <div>
                                                                            @if (selectedStudentFromCache?.Attachment != null)
                                                                            {
                                                                                <button class="btn btn-primary" @onclick="() => DownloadStudentCVFromCompanyInternships(selectedStudentFromCache.Email)">
                                                                                    Λήψη Βιογραφικού
                                                                                </button>
                                                                            }
                                                                            else
                                                                            {
                                                                                <span>Δεν Διατίθεται Βιογραφικό!</span>
                                                                            }
                                                                        </div>
                                                                    </div>
                                                                }
                                                            </div>
                                                            <div class="modal-footer">
                                                                <button type="button" class="btn btn-secondary" @onclick="CloseModalforHyperLinkTitleStudentName">Κλείσιμο</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            }



@*----------------------------------------------------------------------------------------------------------INTERNSHIPS TAB COMPANIES END------------------------------------------------------------------------------------------------------------*@



@*----------------------------------------------------------------------------------------------------------THESIS COMPANIES START------------------------------------------------------------------------------------------------------------*@
                                            <!-- COMPANY THESIS tab content -->
                                            <div class="tab-pane fade" id="thesis" role="tabpanel" aria-labelledby="thesis-tab">
                                                <!-- ΔΗΜΙΟΥΡΓΙΑ ΠΤΥΧΙΑΚΗΣ ΕΡΓΑΣΙΑΣ ΩΣ COMPANY USER-->
                                                <div class="mb-3 row-dark-gray">
                                                    <div class="d-flex justify-content-between align-items-center">
                                                        <label class="form-label" style="color: #FFF8DC;">• Δημιουργία Πτυχιακής Εργασίας •</label>
                                                        <button class="btn btn-link" @onclick="ToggleFormVisibilityForUploadCompanyThesis">
                                                            @if (isUploadCompanyThesisFormVisible)
                                                            {
                                                                <span>&#8722;</span> <!-- Minus sign -->
                                                            }
                                                            else
                                                            {
                                                                <span>&#43;</span> <!-- Plus sign -->
                                                            }
                                                        </button>
                                                    </div>
                                                </div>

                                                @if (isUploadCompanyThesisFormVisible)
                                                {
                                                    <div class="row mb-3">
                                                         <div class="col-md-4">
                                                                <label for="companyThesisPositionTitle"><strong>Τίτλος</strong><span style="color: red;"> *</span></label>
                                                                <input type="text" id="companyThesisTitle" class="form-control @(showErrorMessageforUploadingthesisAsCompany && string.IsNullOrWhiteSpace(thesis.CompanyThesisTitle) ? "shake error" : "")" @bind="thesis.CompanyThesisTitle" @oninput="CheckCharacterLimitInThesisFieldUploadAsCompany" maxlength="120" />
                                                                <small class="character-limit light-cadetblue-text">@remainingCharactersInThesisFieldUploadAsCompany/120</small>
                                                         </div>
                                                         @if (showErrorMessageforUploadingthesisAsCompany && string.IsNullOrWhiteSpace(thesis.CompanyThesisTitle))
                                                         {
                                                            <div class="text-danger mt-1">Απαιτείται επιλογή Τίτλος Θέσης.</div>
                                                         }
                                                    </div>

                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="companyThesisDescription"><strong>Περιγραφή</strong> <span style="color: red;"> *</span></label>
                                                            <textarea id="CompanyThesisDescription" class="form-control @(showErrorMessageforUploadingthesisAsCompany && string.IsNullOrWhiteSpace(thesis.CompanyThesisDescriptionsUploaded) ? "shake error" : "")"
                                                                      @bind="thesis.CompanyThesisDescriptionsUploaded"
                                                                      @oninput="CheckCharacterLimitInThesisDescriptionUploadAsCompany"
                                                                      maxlength="1000"
                                                                      placeholder="Σύντομη Περιγραφή Πτυχιακής"></textarea>
                                                            <small class="character-limit light-cadetblue-text">@remainingCharactersInThesisDescriptionUploadAsCompany/1000</small>
                                                        </div>
                                                        @if (showErrorMessageforUploadingthesisAsCompany && string.IsNullOrWhiteSpace(thesis.CompanyThesisDescriptionsUploaded))
                                                        {
                                                            <div class="text-danger mt-1">Απαιτείται Περιγραφή της Θέσης.</div>
                                                        }
                                                    </div>

                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="companyThesisCompanySupervisorFullName">
                                                                <strong>Όνομ/νυμο Υπευθύνου</strong><span style="color: red;"> *</span>
                                                            </label>
                                                            <input type="text" id="CompanyThesisCompanySupervisorFullName" 
                                                                   class="form-control @(showErrorMessageforUploadingthesisAsCompany && string.IsNullOrWhiteSpace(thesis.CompanyThesisCompanySupervisorFullName) ? "shake error" : "")" 
                                                                   @bind="thesis.CompanyThesisCompanySupervisorFullName" />
                                                        </div>
                                                        @if (showErrorMessageforUploadingthesisAsCompany && string.IsNullOrWhiteSpace(thesis.CompanyThesisCompanySupervisorFullName))
                                                        {
                                                            <div class="text-danger mt-1">Απαιτείται Όνομα Υπευθύνου Πτυχιακής Εργασίας.</div>
                                                        }
                                                    </div>

                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="companyThesisContactPersonEmail">
                                                                <strong>Email Υπευθύνου</strong><span style="color: red;"> *</span>
                                                            </label>
                                                            <input type="text" id="thesisContactPersonEmail" 
                                                                   class="form-control @(showErrorMessageforUploadingthesisAsCompany && string.IsNullOrWhiteSpace(thesis.CompanyThesisContactPersonEmail) ? "shake error" : "")" 
                                                                   @bind="thesis.CompanyThesisContactPersonEmail" />
                                                        </div>
                                                        @if (showErrorMessageforUploadingthesisAsCompany && string.IsNullOrWhiteSpace(thesis.CompanyThesisContactPersonEmail))
                                                        {
                                                            <div class="text-danger mt-1">Απαιτείται το Email Υπευθύνου Πτυχιακής Εργασίας.</div>
                                                        }
                                                    </div>


                                                    <div class="row mb-3">
                                                         <div class="col-md-4">
                                                              <label for="CompanyThesisContactTelephonePerson">Τηλέφωνο Υπευθύνου<span style="font-style: italic; color: gray;"> (Προαιρετικό)</span></label>
                                                                 <div class="input-group">
                                                                     <div class="input-group-prepend">
                                                                         <span class="input-group-textfortelephone">+30</span>
                                                                     </div>
                                                                        <input type="tel" id="companyThesisContactTelephonePerson"
                                                                               class="form-control"
                                                                               @bind="thesis.CompanyThesisContactPersonTelephone"
                                                                               placeholder="Τηλέφωνο Υπευθύνου"/>
                                                                 </div>
                                                         </div>
                                                    </div>

                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label @onclick="ToggleCheckboxesForAreasForCompanyThesis">
                                                                <strong>Τομείς Πτυχιακής</strong><span style="color: red;"> *</span>
                                                                <span class="light-cadetblue-text"> (Άνοιγμα/Κλείσιμο)</span>
                                                            </label>
                                                            <div id="toggleCheckboxesForThesisAreas" class="checkbox-containerThesisAreas" style="display: none;">
                                                                @if (Areas == null || !Areas.Any())
                                                                {
                                                                    <p>Φορτώνει...</p>
                                                                }
                                                                else
                                                                {
                                                                    <div class="d-flex flex-wrap">
                                                                        @foreach (var area in Areas)
                                                                        {
                                                                            <div class="form-check me-2 mb-2" style="flex-basis: 20%;">
                                                                                <input type="checkbox"
                                                                                       id="area_@area.Id"
                                                                                       class="form-check-input"
                                                                                       @onchange="(e) => OnCheckedChangedAreasWhenUploadThesisAsCompany(e, area)"
                                                                                       checked="@IsSelectedAreasWhenUploadThesisAsCompany(area)" />
                                                                                       <label class="form-check-label @(showErrorMessageforUploadingthesisAsCompany && string.IsNullOrWhiteSpace(thesis.CompanyThesisAreasUpload) ? "shake error" : "")" for="area_@area.Id">
                                                                                            @area.AreaName
                                                                                       </label>
                                                                            </div>
                                                                        }
                                                                    </div>
                                                                }
                                                            </div>
                                                        </div>
                                                        @if (showErrorMessageforUploadingthesisAsCompany && !SelectedAreasWhenUploadThesisAsCompany.Any())
                                                        {
                                                            <div class="text-danger mt-1">Πρέπει να επιλέξετε τουλάχιστον 1 Περιοχή Ενδιαφέροντος.</div>
                                                        }
                                                    </div>

                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label @onclick="ToggleCheckboxesForSkillsForCompanyThesis">
                                                                <strong>Απαιτούμενες Δεξιότητες</strong><span style="color: red;"> *</span>
                                                                <span class="light-cadetblue-text"> (Άνοιγμα/Κλείσιμο)</span>
                                                            </label>
                                                            <div id="toggleCheckboxesForThesisSkills" class="checkbox-containerThesisSkills" style="display: none;">
                                                                @if (Skills == null || !Skills.Any())
                                                                {
                                                                    <p>Φορτώνει...</p>
                                                                }
                                                                else
                                                                {
                                                                    <div class="d-flex flex-wrap">
                                                                        @foreach (var skill in Skills)
                                                                        {
                                                                            <div class="form-check me-2 mb-2" style="flex-basis: 20%;">
                                                                                <input type="checkbox"
                                                                                       id="skill_@skill.Id"
                                                                                       class="form-check-input"
                                                                                       @onchange="(e) => OnCheckedChangedForSkillsWhenUploadThesisAsCompany(e, skill)"
                                                                                       checked="@IsSelectedForSkillsWhenUploadThesisAsCompany(skill)" />
                                                                                    <label class="form-check-label @(showErrorMessagesForSkillsWhenUploadThesisAsCompany && string.IsNullOrWhiteSpace(thesis.CompanyThesisSkillsNeeded) ? "shake error" : "")" for="skill_@skill.Id">
                                                                                        @skill.SkillName
                                                                                    </label>
                                                                            </div>
                                                                        }
                                                                    </div>
                                                                }
                                                            </div>
                                                        </div>
                                                        @if (showErrorMessageforUploadingthesisAsCompany && !SelectedSkillsWhenUploadThesisAsCompany.Any())
                                                        {
                                                            <div class="text-danger mt-1">Πρέπει να επιλέξετε τουλάχιστον 1 Περιοχή Ενδιαφέροντος.</div>
                                                        }
                                                    </div>

                                                    <div class="row mb-3">
                                                            <div class="col-md-4">
                                                                <label for="companyThesisDepartment">Τμήμα Εταιρείας<span style="font-style: italic; color: gray;"> (Προαιρετικό)</span></label>
                                                                <input type="text" id="thesisDepartment" class="form-control" @bind="thesis.CompanyThesisDepartment" />
                                                            </div>
                                                    </div>

                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="companyThesisStartingDate">
                                                                <strong>Ημερομηνία Έναρξης</strong><span style="color: red;"> *</span>
                                                            </label>
                                                            <input type="date" id="CompanyThesisStartingDate" 
                                                                   class="form-control @(showErrorMessageforUploadingthesisAsCompany && thesis.CompanyThesisStartingDate.Date <= DateTime.Today ? "shake error" : "")" 
                                                                   @bind="thesis.CompanyThesisStartingDate" />
                                                        </div>
                                                        @if (showErrorMessageforUploadingthesisAsCompany && thesis.CompanyThesisStartingDate.Date <= DateTime.Today)
                                                        {
                                                            <div class="text-danger mt-1">Η ημερομηνία πρέπει να είναι μεταγενέστερη της σημερινής ημερομηνίας.</div>
                                                        }                                                      
                                                    </div>

                                              
                                                    <div class="row mb-3">
                                                            <div class="col-md-4">
                                                                <label for="companyThesisAttachment">Συνημμένο Αρχείο Πτυχιακής Εργασίας<span style="font-style: italic; color: gray;"> (Προαιρετικό)</span></label>
                                                                <InputFile id="companyThesisAttachment" class="form-control" OnChange="HandleFileSelectedForCompanyThesisAttachment" />
                                                            </div>
                                                    </div>

                                                    <div class="mb-3">
                                                        <button class="modern-button" style="background-color: #007bff; color: white; display: inline-flex; align-items: center;" 
                                                                @onclick="HandleTemporarySaveThesisAsCompany">
                                                                <i class="fa-regular fa-floppy-disk" style="margin-right: 8px;"></i>Προσωρινή Αποθήκευση Πτυχιακής Εργασίας
                                                        </button>      
                                                        <button class="modern-button" style="background-color: #28a745; color: white; display: inline-flex; align-items: center;" 
                                                                @onclick="HandlePublishSaveThesisAsCompany">
                                                                <i class="fa-solid fa-floppy-disk" style="margin-right: 8px;"></i>Δημοσίευση Πτυχιακής Εργασίας
                                                        </button>
                                                    </div>
                                                        @if (showErrorMessageforUploadingthesisAsCompany)
                                                        {
                                                            <div class="alert alert-danger" role="alert">
                                                                Συμπληρώστε Όλα Τα Υποχρεωτικά Πεδία και Προσπαθήστε Ξανά
                                                            </div>
                                                        }
                                                        @if (showSuccessMessage)
                                                        {
                                                            <div class="alert alert-success alert-dismissible fade show" role="alert">
                                                                <strong>Η Θέση Έχει Δημιουργηθεί Επιτυχώς!</strong>
                                                            </div>
                                                        }
                                                }

                                                        
                                                 <!-- COMPANY SEARCH MY UPLOADED THESIS tab content -->
                                                <div class="mb-3 row-dark-gray">
                                                    <div class="d-flex justify-content-between align-items-center">
                                                        <label class="form-label" style="color: #FFF8DC; font-family: inherit; margin: 0; padding: 0;">• Ιστορικό Θέσεων Πτυχιακών Εργασιών •</label>
                                                        <button class="btn btn-link" @onclick="ToggleFormVisibilityToShowMyActiveThesesAsCompany">
                                                            @if (isShowActiveThesesAsCompanyFormVisible)
                                                            {
                                                                <span>&#8722;</span> <!-- Minus sign -->
                                                            }
                                                            else
                                                            {
                                                                <span>&#43;</span> <!-- Plus sign -->
                                                            }
                                                        </button>
                                                    </div>
                                                </div>
                                                @if (isShowActiveThesesAsCompanyFormVisible)
                                                {

                                                    <div class="col-md-2">
                                                        <label for="statusFilterForCompanyTheses" style="color: #4682b4;"><strong>Φίλτρο Εμφάνισης</strong></label>
                                                        <div class="input-group">
                                                            <select id="statusFilterForCompanyTheses" class="form-control form-control-sm" 
                                                                    @onchange="HandleStatusFilterChangeForThesesAsCompany">
                                                                <option value="Όλα">Όλες</option>
                                                                <option value="Δημοσιευμένη">Δημοσιευμένες</option>
                                                                <option value="Μη Δημοσιευμένη">Μη Δημοσιευμένες</option>
                                                                <option value="Αποσυρμένη">Αποσυρμένες</option>
                                                            </select>
                                                            <div class="input-group-append">
                                                                <span class="input-group-text">
                                                                    <i class="fas fa-chevron-down"></i>
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                            <div class="col-md-2">
                                                                <label style="color: #4682b4;"><strong>Αποτελέσματα ανά Σελίδα</strong></label>
                                                                <div class="input-group" style="max-width: 65px;">
                                                                    <select class="form-control form-control-sm" @onchange="OnPageSizeChange_SeeMyUploadedThesesAsCompany">
                                                                        @foreach (var option in pageSizeOptions_SeeMyUploadedThesesAsCompany)
                                                                        {
                                                                            <option value="@option" selected="@(CompanyThesesPerPage == option)">@option</option>
                                                                        }
                                                                    </select>
                                                                    <div class="input-group-append">
                                                                        <span class="input-group-text">
                                                                            <i class="fas fa-chevron-down"></i>
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                    <br/>
                                                    <div class="col-md-2">
                                                        @if (selectedStatusFilterForCompanyTheses == "Όλα")
                                                        {
                                                            <span><strong>Σύνολο: </strong>@totalCountForCompanyTheses</span>
                                                        }
                                                        else if (selectedStatusFilterForCompanyTheses == "Δημοσιευμένη")
                                                        {
                                                            <span><strong>Σύνολο: </strong>@publishedCountForCompanyTheses</span>
                                                        }
                                                        else if (selectedStatusFilterForCompanyTheses == "Μη Δημοσιευμένη")
                                                        {
                                                            <span><strong>Σύνολο: </strong>@unpublishedCountForCompanyTheses</span>
                                                        }
                                                        else if (selectedStatusFilterForCompanyTheses == "Αποσυρμένη")
                                                        {
                                                            <span><strong>Σύνολο: </strong>@withdrawnCountForCompanyTheses</span>
                                                        }
                                                    </div>

                                                            @if (companytheses != null && companytheses.Any())
                                                            {
                                                                <table class="table">
                                                                    <thead>
                                                                        <tr style="background-color: lightgray; border: 2px solid black;">
                                                                            <th style="border: 2px solid black;">
                                                                                <i class="fa-solid fa-key fa-sm" style="color: #9D00FF; margin-right: 8px;"></i>
                                                                                Κωδικός Θέσης
                                                                            </th>
                                                                            <th style="border: 2px solid black;">
                                                                                <i class="fa-solid fa-font fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                Τίτλος
                                                                            </th>
                                                                            <th style="border: 2px solid black;">
                                                                                <i class="fa-solid fa-arrows-up-down fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                Κατάσταση Θέσης
                                                                            </th>
                                                                            <th style="border: 2px solid black;">
                                                                                <i class="fa-solid fa-calendar-days fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                Δημιουργία Θέσης
                                                                            </th>
                                                                            <th style="border: 2px solid black;">
                                                                                <i class="fa-solid fa-hand fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                Ενέργειες
                                                                            </th>
                                                                            <th style="border: 2px solid black;">
                                                                                <i class="fa-solid fa-paperclip fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                Αρχείο
                                                                            </th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        @foreach (var companythesis in GetPaginatedCompanyTheses().Where(j => selectedStatusFilterForCompanyTheses == "Όλα" || j.CompanyThesisStatus == selectedStatusFilterForCompanyTheses))
                                                                        {
                                                                            <tr class="companythesis-position-frame @(companythesis.CompanyThesisStatus == "Δημοσιευμένη" ? "companythesisstatus-dimosieumeni" : (companythesis.CompanyThesisStatus == "Μη Δημοσιευμένη" ? "companythesisstatus-midimosieumeni" : "companythesisstatus-aposirmeni"))">
                                                                                <td style="color: #9D00FF;">
                                                                                    @companythesis.RNGForThesisUploadedAsCompany_HashedAsUniqueID
                                                                                </td>
                                                                                <td @onclick="() => ToggleCompanyThesesExpanded(companythesis.RNGForThesisUploadedAsCompany)" style="cursor: pointer;" title="Κλικ για εμφάνιση λεπτομερειών">
                                                                                    @companythesis.CompanyThesisTitle
                                                                                </td>
                                                                                <td>@companythesis.CompanyThesisStatus</td>
                                                                                <td>@companythesis.CompanyThesisUploadDateTime</td>
                                                                                <td>
                                                                                    <div style="display: flex; align-items: center; gap: 10px;">

                                                                                         <button class="btn btn-danger" @onclick="() => DeleteCompanyThesis(companythesis.Id)" title="Οριστική Διαγραφή Θέσης">
                                                                                            <i class="fas fa-trash icon-button"></i>
                                                                                        </button>
                                                                                        <button class="btn btn-secondary" @onclick="() => ShowCompanyThesisDetails(companythesis)" title="Εμφάνιση Λεπτομερειών">
                                                                                            <i class="fas fa-eye icon-button"></i>
                                                                                        </button>                                                                                                                                                                       
                                                                                        @if (companythesis.CompanyThesisStatus != "Δημοσιευμένη")
                                                                                        {
                                                                                             <button class="btn btn-secondary" @onclick="() => EditCompanyThesisDetails(companythesis)" title="Επεξεργασία Θέσης">
                                                                                                <i class="fas fa-pencil-alt icon-button"></i>
                                                                                            </button>
                                                                                            <button class="btn btn-secondary" @onclick='async () => await UpdateThesisStatusAsCompany(companythesis.Id, "Δημοσιευμένη")' title="Δημοσίευση Θέσης">
                                                                                                <i class="fas fa-arrow-up icon-button" style="color: cornflowerblue;"></i>
                                                                                            </button>
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <button class="btn btn-secondary" @onclick='async () => await UpdateThesisStatusAsCompany(companythesis.Id, "Αποσυρμένη")' title="Απόσυρση Θέσης">
                                                                                                <i class="fas fa-times icon-button" style="color: red;"></i>
                                                                                            </button>
                                                                                        }
                                                                                        @if (companythesis.CompanyThesisStatus != "Μη Δημοσιευμένη")
                                                                                        {
                                                                                            <button class="btn btn-secondary" @onclick='() => ChangeCompanyThesisStatusToUnpublished(companythesis.Id)' title="Αποδημοσίευση Θέσης">
                                                                                                <i class="fas fa-arrow-down icon-button" style="color: yellow;"></i>
                                                                                            </button>
                                                                                        }
                                                                                            <button class="btn btn-secondary" @onclick="() => ToggleCompanyThesesExpanded(companythesis.RNGForThesisUploadedAsCompany)" title="Εμφάνιση Υποψηφίων">
                                                                                                <i class="fa-solid fa-graduation-cap icon-button"></i>
                                                                                            </button>

                                                                                            <button class="btn btn-info ml-2" @onclick="() => ToggleCompanyThesesExpandedForProfessorInterest(companythesis.RNGForThesisUploadedAsCompany)" title="Καθηγητής που Ενδιαφέρθηκε">
                                                                                                <i class="fa-solid fa-user-tie icon-button"></i>
                                                                                            </button>

                                                                                    </div>
                                                                                </td>
                                                                                <td>
                                                                                @if (companythesis.CompanyThesisAttachmentUpload != null && companythesis.CompanyThesisAttachmentUpload.Length > 0)
                                                                                {
                                                                                    <div style="display: flex; align-items: center;">
                                                                                    <button class="btn btn-secondary" @onclick="() => DownloadAttachmentForCompanyTheses(companythesis.Id)" title="Λήψη" style="text-decoration: none;">
                                                                                        <i class="fas fa-download icon-button"></i> Λήψη
                                                                                    </button>
                                                                                </div>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <span style="display: block; text-align: center; font-weight: bold; font-style: italic;">
                                                                                        Δεν Διατίθεται
                                                                                    </span>
                                                                                }
                                                                            </td>
                                                                        </tr>


                                                                        @if (expandedCompanyTheses.ContainsKey(companythesis.RNGForThesisUploadedAsCompany) && expandedCompanyTheses[companythesis.RNGForThesisUploadedAsCompany])
                                                                        {
                                                                            <br/>
                                                                            <tr>
                                                                                <td colspan="9" style="padding: 0;">
                                                                                    <div style="display: flex; justify-content: space-between; align-items: center; height: 24px; line-height: 24px; width: 100%;">
                                                                                        <i class="fa-solid fa-graduation-cap" style="font-size: 18px; color: #0d6efd;"></i>
                                                                                        <label class="form-label" style="color: #0d6efd; font-weight: bold; font-size: 18px; margin: 0;">Λεπτομέρειες Αιτούντων</label>
                                                                                        <i class="fa-solid fa-graduation-cap" style="font-size: 18px; color: #0d6efd;"></i>
                                                                                    </div>
                                                                                </td>
                                                                            </tr>
                                                                            <tr>
                                                                                <td colspan="6">
                                                                                    <table class="table table-sm">
                                                                                        <thead>
                                                                                            <tr style="background-color: #f5f5f5; border: 1px solid darkblue;">
                                                                                                <th style="border: 1px solid darkblue;">
                                                                                                    <i class="fa-solid fa-user fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                    Προφίλ
                                                                                                </th>
                                                                                                <th style="border: 1px solid darkblue;">
                                                                                                    <i class="fa-solid fa-signature fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                    Όνομα
                                                                                                </th>
                                                                                                <th style="border: 1px solid darkblue;">
                                                                                                    <i class="fa-solid fa-signature fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                    Επώνυμο
                                                                                                </th>
                                                                                                <th style="border: 1px solid darkblue;">
                                                                                                    <i class="fa-solid fa-calendar-plus fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                    Ημερομηνία Αίτησης
                                                                                                </th>
                                                                                                <th style="border: 1px solid darkblue;">
                                                                                                    <i class="fa-solid fa-graduation-cap fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                    Έτος Φοίτησης
                                                                                                </th>
                                                                                                <th style="border: 1px solid darkblue;">
                                                                                                    <i class="fa-solid fa-phone fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                    Τηλεφωνο
                                                                                                </th>
                                                                                                <th style="border: 1px solid darkblue;">
                                                                                                    <i class="fa-solid fa-comments fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                    Επικοινωνία
                                                                                                </th>
                                                                                                <th style="border: 1px solid darkblue;">
                                                                                                    <i class="fa-solid fa-hand fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                    Ενέργεια
                                                                                                </th>
                                                                                                <th style="border: 1px solid darkblue;">
                                                                                                    <i class="fa-solid fa-hourglass-half fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                    Κατάσταση Αίτησης
                                                                                                </th>
                                                                                            </tr>
                                                                                        </thead>
                                                                                        <tbody>
                                                                                            @if (studentDataCache == null)
                                                                                            {
                                                                                                <!-- Loading state -->
                                                                                                <tr>
                                                                                                    <td colspan="9" class="text-center">
                                                                                                        <div class="spinner-border text-primary" role="status">
                                                                                                            <span class="sr-only">Φόρτωση...</span>
                                                                                                        </div>
                                                                                                        <p>Φόρτωση δεδομένων φοιτητών...</p>
                                                                                                    </td>
                                                                                                </tr>
                                                                                            }
                                                                                            else if (companyThesisApplicantsMap.ContainsKey(companythesis.RNGForThesisUploadedAsCompany) 
                                                                                                     && companyThesisApplicantsMap[companythesis.RNGForThesisUploadedAsCompany].Any())
                                                                                            {
                                                                                                @foreach (var applicant in companyThesisApplicantsMap[companythesis.RNGForThesisUploadedAsCompany])
                                                                                                {
                                                                                                    var student = studentDataCache.TryGetValue(applicant.StudentEmailAppliedForThesis, out var s) ? s : null;
                                                                                                    var status = applicant.CompanyThesisStatusAppliedAtStudentSide ?? "N/A";
                                                                                                    var companyStatus = applicant.CompanyThesisStatusAppliedAtCompanySide ?? "N/A";

                                                                                                    <tr style="background-color: @(companyStatus == "Έχει γίνει Αποδοχή" ? "lightgreen" :
                                                                                                                        companyStatus == "Έχει Απορριφθεί" ? "lightcoral" :
                                                                                                                        companyStatus == "Απορρίφθηκε (Απόσυρση Θέσεως Από Εταιρία)" ? "coral" :
                                                                                                                        companyStatus == "Αποσύρθηκε από τον φοιτητή" ? "lightyellow" : "transparent")">
                                                                                                        <td>
                                                                                                            <a href="#" @onclick="() => ShowStudentDetailsInNameAsHyperlink(applicant.StudentUniqueIDAppliedForThesis)" 
                                                                                                               title="Προφίλ Υποψήφιου Σπουδαστή">
                                                                                                                <i class="fas fa-eye icon-button"></i>
                                                                                                                @if (student == null)
                                                                                                                {
                                                                                                                    <span class="badge badge-warning ml-1">Δε βρέθηκε</span>
                                                                                                                }
                                                                                                            </a>
                                                                                                        </td>
                                                                                                        <td>@(student?.Name ?? "Δε βρέθηκε")</td>
                                                                                                        <td>@(student?.Surname ?? "Δε βρέθηκε")</td>
                                                                                                        <td>@applicant.DateTimeStudentAppliedForThesis.ToString("dd/MM/yyyy HH:mm")</td>
                                                                                                        <td>@(student?.StudyYear ?? "-")</td>
                                                                                                        <td>@(student?.Telephone ?? "-")</td>
                                                                                                        <td class="text-center">
                                                                                                            @applicant.StudentEmailAppliedForThesis
                                                                                                            <a href="mailto:@applicant.StudentEmailAppliedForThesis" title="Αποστολή Email">
                                                                                                                <i class="fas fa-envelope"></i>
                                                                                                            </a>
                                                                                                        </td>
                                                                                                        <td>
                                                                                                            @if (status == "Σε Επεξεργασία")
                                                                                                            {
                                                                                                                <div style="display: flex; gap: 10px; justify-content: center;">
                                                                                                                    <span @onclick="() => ConfirmAndAcceptStudentThesisApplicationAsCompany(applicant.RNGForCompanyThesisApplied, applicant.StudentUniqueIDAppliedForThesis)" 
                                                                                                                          title="Αποδοχή Αίτησης" style="cursor: pointer;">
                                                                                                                        <i class="fas fa-check" style="color: green; font-size: 24px;"></i>
                                                                                                                    </span>

                                                                                                                    <span @onclick="() => ConfirmAndRejectStudentThesisApplicationAsCompany(applicant.RNGForCompanyThesisApplied, applicant.StudentUniqueIDAppliedForThesis)" 
                                                                                                                          title="Απόρριψη Αίτησης" style="cursor: pointer;">
                                                                                                                        <i class="fas fa-times" style="color: red; font-size: 24px;"></i>
                                                                                                                    </span>
                                                                                                                </div>
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                                <span class="text">@status</span>
                                                                                                            }
                                                                                                        </td>
                                                                                                        <td>
                                                                                                            @if (companyStatus == "Επιτυχής")
                                                                                                            {
                                                                                                                <span style="color: green; font-weight: bold;">Έχει γίνει Αποδοχή</span>
                                                                                                            }
                                                                                                            else if (companyStatus == "Απορρίφθηκε")
                                                                                                            {
                                                                                                                <span style="color: red; font-weight: bold;">Έχει Απορριφθεί</span>
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                                <span>@companyStatus</span>
                                                                                                            }
                                                                                                        </td>
                                                                                                    </tr>
                                                                                                }
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                <tr>
                                                                                                    <td colspan="9" class="text-center text-danger">
                                                                                                        <strong>Καμία Αίτηση για αυτήν την Πτυχιακή Εργασία ακόμη</strong>
                                                                                                    </td>
                                                                                                </tr>
                                                                                            }
                                                                                        </tbody>

                                                                                    </table>                                                                                   
                                                                                </td>
                                                                            </tr>
                                                                        }




                                                                        @if (expandedCompanyThesesForProfessorInterest.ContainsKey(companythesis.RNGForThesisUploadedAsCompany) && expandedCompanyThesesForProfessorInterest[companythesis.RNGForThesisUploadedAsCompany])
                                                                        {
                                                                            <br/>
                                                                            <tr>
                                                                                <td colspan="9" style="padding: 0;">
                                                                                    <div style="display: flex; justify-content: space-between; align-items: center; height: 24px; line-height: 24px; width: 100%;">
                                                                                        <i class="fa-solid fa-user-tie" style="font-size: 18px; color: #0d6efd;"></i>
                                                                                        <label class="form-label" style="color: #0d6efd; font-weight: bold; font-size: 18px; margin: 0;">Λεπτομέρειες Ενδιαφερόμενου Καθηγητή</label>
                                                                                        <i class="fa-solid fa-user-tie" style="font-size: 18px; color: #0d6efd;"></i>
                                                                                    </div>
                                                                                </td>
                                                                            </tr>
                                                                            <tr>
                                                                                <td colspan="6">
                                                                                    <table class="table table-sm">
                                                                                        <thead>
                                                                                            <tr style="background-color: #f5f5f5; border: 1px solid darkblue;">
                                                                                                <th style="border: 1px solid darkblue;">
                                                                                                    <i class="fa-solid fa-user-tie fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                    Προφίλ
                                                                                                </th>
                                                                                                <th style="border: 1px solid darkblue;">
                                                                                                    <i class="fa-solid fa-signature fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                    Όνοματεπώνυμο
                                                                                                </th>
                                                                                                <th style="border: 1px solid darkblue;">
                                                                                                    <i class="fa-solid fa-envelope fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                    Email
                                                                                                </th>
                                                                                                <th style="border: 1px solid darkblue;">
                                                                                                    <i class="fa-solid fa-phone fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                    Τηλέφωνο Εργασίας
                                                                                                </th>
                                                                                                <th style="border: 1px solid darkblue;">
                                                                                                    <i class="fa-solid fa-phone fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                    Προσωπικό Τηλέφωνο
                                                                                                </th>
                                                                                                <th style="border: 1px solid darkblue;">
                                                                                                    <i class="fa-solid fa-globe fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                    Ιστότοπος
                                                                                                </th>
                                                                                                <th style="border: 1px solid darkblue;">
                                                                                                    <i class="fa-brands fa-linkedin fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                    LinkedIn
                                                                                                </th>
                                                                                            </tr>
                                                                                        </thead>
                                                                                        <tbody>
                                                                                            @if (professorDataCache == null)
                                                                                            {
                                                                                                <!-- Loading state -->
                                                                                                <tr>
                                                                                                    <td colspan="7" class="text-center">
                                                                                                        <div class="spinner-border text-primary" role="status">
                                                                                                            <span class="sr-only">Φόρτωση...</span>
                                                                                                        </div>
                                                                                                        <p>Φόρτωση δεδομένων καθηγητών...</p>
                                                                                                    </td>
                                                                                                </tr>
                                                                                            }
                                                                                            else if (companythesis.IsProfessorInteresetedInCompanyThesis)
                                                                                            {
                                                                                                var professor = professorDataCache.TryGetValue(companythesis.ProfessorEmailInterestedInCompanyThesis, out var p) ? p : null;
        
                                                                                                <tr>
                                                                                                    <td>
                                                                                                        <a href="#" @onclick="() => ShowProfessorDetailsAtCompanyThesisInterest(companythesis)" 
                                                                                                           title="Προβολή Στοιχείων Καθηγητή">
                                                                                                            <i class="fas fa-eye icon-button"></i>
                                                                                                            @if (professor == null)
                                                                                                            {
                                                                                                                <span class="badge badge-warning ml-1">Δε βρέθηκε</span>
                                                                                                            }
                                                                                                        </a>
                                                                                                    </td>
                                                                                                    <td>
                                                                                                        @(professor?.ProfName ?? "Άγνωστο") @(professor?.ProfSurname ?? "Όνομα")
                                                                                                    </td>
                                                                                                    <td>
                                                                                                        @companythesis.ProfessorEmailInterestedInCompanyThesis
                                                                                                        <a href="mailto:@companythesis.ProfessorEmailInterestedInCompanyThesis" title="Αποστολή Email">
                                                                                                            <i class="fas fa-envelope"></i>
                                                                                                        </a>
                                                                                                    </td>
                                                                                                    <td>
                                                                                                        @if (!string.IsNullOrWhiteSpace(professor?.ProfWorkTelephone))
                                                                                                        {
                                                                                                            @professor.ProfWorkTelephone
                                                                                                            <a href="tel:@professor.ProfWorkTelephone" title="Κλήση">
                                                                                                                <i class="fas fa-phone"></i>
                                                                                                            </a>
                                                                                                        }
                                                                                                        else
                                                                                                        {
                                                                                                            <span style="display: block; text-align: center; font-weight: bold; font-style: italic;">
                                                                                                                Δεν Διατίθεται
                                                                                                            </span>
                                                                                                        }
                                                                                                    </td>
                                                                                                    <td>
                                                                                                        @if (professor?.ProfPersonalTelephoneVisibility ?? false)
                                                                                                        {
                                                                                                            @professor.ProfPersonalTelephone
                                                                                                            <a href="tel:@professor.ProfPersonalTelephone" title="Κλήση">
                                                                                                                <i class="fas fa-phone"></i>
                                                                                                            </a>
                                                                                                        }
                                                                                                        else
                                                                                                        {
                                                                                                            <span style="display: block; text-align: center; font-weight: bold; font-style: italic;">
                                                                                                                Δεν Διατίθεται
                                                                                                            </span>
                                                                                                        }
                                                                                                    </td>
                                                                                                    <td>
                                                                                                        @professor?.ProfPersonalWebsite
                                                                                                        @if (!string.IsNullOrWhiteSpace(professor?.ProfPersonalWebsite))
                                                                                                        {
                                                                                                            <a href="@professor.ProfPersonalWebsite" target="_blank" title="Προβολή Ιστότοπου Καθηγητή">
                                                                                                                <i class="fas fa-globe"></i>
                                                                                                            </a>
                                                                                                        }
                                                                                                    </td>
                                                                                                    <td>
                                                                                                        @professor?.ProfLinkedInSite
                                                                                                        @if (!string.IsNullOrWhiteSpace(professor?.ProfLinkedInSite))
                                                                                                        {
                                                                                                            <a href="@professor.ProfLinkedInSite" target="_blank" title="Προβολή LinkedIn Καθηγητή">
                                                                                                                <i class="fab fa-linkedin"></i>
                                                                                                            </a>
                                                                                                        }
                                                                                                    </td>
                                                                                                </tr>
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                <tr>
                                                                                                    <td colspan="7" class="text-center text-danger">
                                                                                                        <strong>Κανένας Καθηγητής δεν έχει εκδηλώσει ενδιαφέρον ακόμη</strong>
                                                                                                    </td>
                                                                                                </tr>
                                                                                            }
                                                                                        </tbody>
                                                                                    </table>
                                                                                </td>
                                                                            </tr>
                                                                        }



                                                                        @if (isModalVisibleToEditCompanyThesisDetails)
                                                                        {
                                                                            <div class="modal fade show" style="display: block;" tabindex="-1" role="dialog" aria-modal="true">
                                                                                <div class="modal-dialog modal-lg" role="document">
                                                                                    <div class="modal-content">
                                                                                        <div class="modal-header">
                                                                                            <h5 class="modal-title" style="color: #007BFF;">@selectedCompanyThesis.CompanyThesisTitle</h5>
                                                                                            <button type="button" class="close" @onclick="CloseCompanyThesisEditModal">&times;</button>
                                                                                        </div>
                                                                                        <div class="modal-body">
                                                                                            <div class="form-group">
                                                                                                <label for="editThesisTitle"><strong>Τίτλος Θέσης</strong></label>
                                                                                                <input type="text" id="editThesisTitle" class="form-control" @bind="selectedCompanyThesis.CompanyThesisTitle" />
                                                                                            </div>

                                                                                            <div class="form-group">
                                                                                                <label for="editSupervisor"><strong>Υπεύθυνος</strong></label>
                                                                                                <input type="text" id="editSupervisor" class="form-control" @bind="selectedCompanyThesis.CompanyThesisCompanySupervisorFullName" />
                                                                                            </div>

                                                                                            <div class="form-group">
                                                                                                <label for="editThesisDescription"><strong>Περιγραφή</strong></label>
                                                                                                <textarea id="editThesisDescription" class="form-control" rows="4" @bind="selectedCompanyThesis.CompanyThesisDescriptionsUploaded"></textarea>
                                                                                            </div>
                                                                                            <br/>
                                                                                            <div class="form-group">
                                                                                                <label for="editjobAreas" @onclick="ToggleAreasInEditCompanyThesisModalAsCompany" style="cursor: pointer;">
                                                                                                    <strong>Τομείς Πτυχιακής</strong> 
                                                                                                    <i class="fas @(showExpandedAreasInCompanyThesisEditModalAsCompany ? "fa-chevron-up" : "fa-chevron-down")"></i>
                                                                                                </label>
                                                                                                @if (showExpandedAreasInCompanyThesisEditModalAsCompany)
                                                                                                {
                                                                                                    <div id="toggleCheckboxes" class="checkbox-container">
                                                                                                        @foreach (var area in Areas)
                                                                                                        {
                                                                                                            <div class="form-check">
                                                                                                                <input type="checkbox"
                                                                                                                       id="area_@area.Id"
                                                                                                                       class="form-check-input"
                                                                                                                       @onchange="(e) => OnCheckedChangedForEditCompanyThesisAreas(e, area)"
                                                                                                                       checked="@(selectedCompanyThesis.CompanyThesisAreasUpload.Contains(area.AreaName))" />
                                                                                                                <label class="form-check-label" for="area_@area.Id">@area.AreaName</label>
                                                                                                            </div>
                                                                                                        }
                                                                                                    </div>
                                                                                                }
                                                                                            </div>
                                                                                            <br/>
                                                                                            <div class="form-group">
                                                                                                <label for="editThesisSkills" @onclick="ToggleSkillsInEditCompanyThesisModalAsCompany" style="cursor: pointer;">
                                                                                                    <strong>Απαιτούμενα Προσόντα</strong> 
                                                                                                    <i class="fas @(showExpandedSkillsInCompanyThesisEditModalAsCompany ? "fa-chevron-up" : "fa-chevron-down")"></i>
                                                                                                </label>
                                                                                                @if (showExpandedSkillsInCompanyThesisEditModalAsCompany)
                                                                                                {
                                                                                                    <div id="toggleCheckboxesSkills" class="checkbox-container">
                                                                                                        @foreach (var skill in Skills) 
                                                                                                        {
                                                                                                            <div class="form-check">
                                                                                                                <input type="checkbox"
                                                                                                                       id="skill_@skill.Id"
                                                                                                                       class="form-check-input"
                                                                                                                       @onchange="(e) => OnCheckedChangedForEditCompanyThesisSkills(e, skill)"
                                                                                                                       checked="@(selectedCompanyThesis.CompanyThesisSkillsNeeded.Contains(skill.SkillName))" />
                                                                                                                <label class="form-check-label" for="skill_@skill.Id">@skill.SkillName</label>
                                                                                                            </div>
                                                                                                        }
                                                                                                    </div>
                                                                                                }
                                                                                            </div>
                                                                                            <br/>

                                                                                            <div class="form-group">
                                                                                                <label for="editThesisDepartment"><strong>Τμήμα</strong></label>
                                                                                                <input type="text" id="editThesisDepartment" class="form-control" @bind="selectedCompanyThesis.CompanyThesisDepartment" />
                                                                                            </div>

                                                                                            <div class="form-group">
                                                                                                <label for="editThesisStartDate"><strong>Ημερομηνία Έναρξης</strong></label>
                                                                                                <input type="date" id="editThesisStartDate" class="form-control" @bind="selectedCompanyThesis.CompanyThesisStartingDate" />
                                                                                            </div>

                                                                                            <div class="form-group">
                                                                                                <label for="editThesisEmail"><strong>Email Επικοινωνίας</strong></label>
                                                                                                <input type="email" id="editThesisEmail" class="form-control" @bind="selectedCompanyThesis.CompanyThesisContactPersonEmail" />
                                                                                            </div>

                                                                                            <div class="form-group">
                                                                                                <label for="editThesisPhone"><strong>Τηλέφωνο Επικοινωνίας</strong></label>
                                                                                                <input type="tel" id="editThesisPhone" class="form-control" @bind="selectedCompanyThesis.CompanyThesisContactPersonTelephone" />
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="modal-footer">
                                                                                            <button type="button" class="btn btn-secondary" @onclick="CloseCompanyThesisEditModal">Ακύρωση</button>
                                                                                            <button type="button" class="btn btn-primary" @onclick="SaveEditedCompanyThesis">Αποθήκευση</button>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        }
                                                                    }                                                                  
                                                                </tbody>
                                                            </table>
                                                            <br/>
                                                            <!-- Pagination Controls -->
                                                            <div class="d-flex justify-content-center align-items-center mt-3 gap-1">
                                                                <!-- First Page (<<) -->
                                                                     <span class="pagination-item @(currentPageForCompanyTheses == 1 ? "disabled" : "")" 
                                                                                  @onclick="@(() => GoToFirstPageForCompanyTheses())">
                                                                                  &lt;&lt;
                                                                     </span>
        
                                                                <!-- Previous Page (<) -->
                                                                    <span class="pagination-item @(currentPageForCompanyTheses == 1 ? "disabled" : "")" 
                                                                                 @onclick="@(() => PreviousPageForCompanyTheses())">
                                                                                 &lt;
                                                                    </span>
        
                                                                 <!-- Page Numbers -->
                                                                      @foreach (var pageNum in GetVisiblePagesForCompanyTheses())
                                                                      {
                                                                        @if (pageNum == -1)
                                                                        {
                                                                          <span class="pagination-ellipsis">...</span>
                                                                        }
                                                                        else
                                                                        {
                                                                           <span class="pagination-item @(pageNum == currentPageForCompanyTheses ? "active" : "")" 
                                                                                 @onclick="@(() => GoToPageForCompanyTheses(pageNum))">
                                                                                 @pageNum
                                                                           </span>
                                                                        }
                                                                      }
        
                                                              <!-- Next Page (>) -->
                                                                   <span class="pagination-item @(currentPageForCompanyTheses == totalPagesForCompanyTheses ? "disabled" : "")" 
                                                                         @onclick="@(() => NextPageForCompanyTheses())">
                                                                         &gt;
                                                                    </span>
        
                                                              <!-- Last Page (>>) -->
                                                                  <span class="pagination-item @(currentPageForCompanyTheses == totalPagesForCompanyTheses ? "disabled" : "")" 
                                                                        @onclick="@(() => GoToLastPageForCompanyTheses())">
                                                                        &gt;&gt;
                                                                  </span>
        
                                                              <!-- Page counter -->
                                                                   <span class="ms-3">Σελίδα @currentPageForCompanyTheses από @totalPagesForCompanyTheses</span>
                                                            </div>
                                                            }                                                                                                                                                                    
                                                }   
                                                


                                                            <!-- SEARCH PROFESSOR THESES AS COMPANY --> 
                                                            <div class="mb-3 row-dark-gray mt-4">
                                                                <div class="d-flex justify-content-between align-items-center">
                                                                    <label class="form-label" style="color: #FFF8DC;">• Αναζήτηση Πτυχιακών Από Καθηγητές •</label>
                                                                    <button class="btn btn-link" @onclick="ToggleToSearchForUploadedProfessorThesesAsCompany">
                                                                        @if (isUploadedProfessorThesesVisibleAsCompany)
                                                                        {
                                                                            <span>&#8722;</span> <!-- Minus sign -->
                                                                        }
                                                                        else
                                                                        {
                                                                            <span>&#43;</span> <!-- Plus sign -->
                                                                        }
                                                                    </button>
                                                                </div>
                                                            </div>
                                                            @if (isUploadedProfessorThesesVisibleAsCompany)
                                                            {
                                                                <!-- Search Form -->
                                                                <div class="row mb-3">
                                                                    <div class="col-md-4">
                                                                        <label for="searchProfessorNameToFindThesesAsCompany" class="fw-bold">Όνομα Καθηγητή</label>
                                                                        <input type="text" id="searchProfessorNameToFindThesesAsCompany" class="form-control" @bind="searchProfessorNameToFindThesesAsCompany" placeholder="Εισάγετε Όνομα Καθηγητή" />
                                                                    </div>
                                                                    <div class="col-md-4">
                                                                        <label for="searchProfessorSurnameToFindThesesAsCompany" class="fw-bold">Επώνυμο Καθηγητή</label>
                                                                        <input type="text" id="searchProfessorSurnameToFindThesesAsCompany" class="form-control" @bind="searchProfessorSurnameToFindThesesAsCompany" placeholder="Εισάγετε Επώνυμο Καθηγητή" />
                                                                    </div> 
                                                                    <div class="col-md-4">
                                                                        <label for="searchProfessorThesisTitleToFindThesesAsCompany" class="fw-bold">Τίτλος Πτυχιακής</label>
                                                                        <input type="text" id="searchProfessorThesisTitleToFindThesesAsCompany" class="form-control" @bind="searchProfessorThesisTitleToFindThesesAsCompany" placeholder="Εισάγετε Τίτλο" />
                                                                    </div>  
                                                                    <div class="col-md-4 position-relative">
                                                                        <label for="searchAreasToFindThesesAsCompany" class="fw-bold">Περιοχές Ενδιαφέροντος</label>
                                                                        <input 
                                                                            type="text" 
                                                                            id="searchAreasToFindThesesAsCompany"
                                                                            class="form-control" 
                                                                            placeholder="Εισάγετε Περιοχές Ενδιαφέροντος" 
                                                                            @bind="searchAreasInputToFindThesesAsCompany" 
                                                                            @oninput="HandleAreasInputToFindThesesAsCompany" />

                                                                        <!-- Suggestions Dropdown -->
                                                                        <ul class="list-group position-absolute" 
                                                                            style="z-index: 100; width: 100%; max-height: 150px; overflow-y: auto;" 
                                                                            hidden="@(!areaSuggestionsToFindThesesAsCompany.Any())">
                                                                            @foreach (var suggestion in areaSuggestionsToFindThesesAsCompany)
                                                                            {
                                                                                <li class="list-group-item list-group-item-action" 
                                                                                    @onclick="() => SelectAreaSuggestionToFindThesesAsCompany(suggestion)">
                                                                                    @suggestion
                                                                                </li>
                                                                            }
                                                                        </ul>

                                                                        <!-- Selected Areas -->
                                                                        <div class="mt-3 selected-areas-container">
                                                                            @if (selectedAreasToFindThesesAsCompany.Any())
                                                                            {
                                                                                <ul class="list-group selected-areas-list">
                                                                                    @foreach (var area in selectedAreasToFindThesesAsCompany)
                                                                                    {
                                                                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                                                                            @area
                                                                                            <button class="btn btn-danger btn-sm" @onclick="() => RemoveSelectedAreaToFindThesesAsCompany(area)">
                                                                                                <i class="fas fa-times"></i>
                                                                                            </button>
                                                                                        </li>
                                                                                    }
                                                                                </ul>
                                                                            }
                                                                        </div>
                                                                    </div>
                                                                    <br/>
                                                                    <div class="col-md-4">
                                                                        <label for="searchSkillsToFindThesesAsCompany" class="fw-bold">Δεξιότητες</label>
                                                                        <input type="text" id="searchSkillsToFindThesesAsCompany" class="form-control" @bind="searchSkillsToFindThesesAsCompany" placeholder="Εισάγετε Δεξιότητες" />
                                                                    </div>
                                                                    <div class="col-md-4">
                                                                        <label for="searchStartingDateToFindThesesAsCompany" class="fw-bold">Ξεκινάει Από</label>
                                                                        <input type="date" id="searchStartingDateToFindThesesAsCompany" class="form-control" @bind="searchStartingDateToFindThesesAsCompany" />
                                                                    </div>
                                                                </div>


                                                                <div class="row mb-3">
                                                                    <div class="col-md-12">
                                                                        <button class="modern-button" style="background-color: #007bff; color: white; display: inline-flex; align-items: center;" @onclick="SearchProfessorThesesAsCompany">
                                                                            <i class="fa-brands fa-searchengin" style="margin-right: 8px;"></i>Αναζήτηση
                                                                        </button>
                                                                        <button class="modern-button" style="background-color: #28a745; color: white; display: inline-flex; align-items: center;" @onclick="ClearSearchFieldsForSearchProfessorThesesAsCompany">
                                                                            <i class="fa-solid fa-broom" style="margin-right: 8px;"></i>Εκκαθάριση
                                                                        </button>
                                                                    </div>
                                                                </div>
                                                                <br/>
                                                                <br/>
                                                                @if (searchPerformedToFindThesesAsCompany)
                                                                {
                                                                    @if (professorThesesResultsToFindThesesAsCompany.Any())
                                                                    {
                                                                        <label style="color: #4682b4; font-weight: bold; font-size: 15px; display: block;">Αποτελέσματα ανά Σελίδα</label>
                                                                        <div class="input-group" style="max-width: 68px;"> <!-- Adjust width here -->
                                                                            <select class="form-select" @onchange="OnPageSizeChange_SearchForProfessorThesesAsCompany">
                                                                                @foreach (var option in pageSizeOptions_SearchForProfessorThesesAsCompany)
                                                                                {
                                                                                    <option value="@option" selected="@(itemsPerPage_ProfessorTheses == option)">@option</option>
                                                                                }
                                                                            </select>
                                                                        </div>
                                                                        <br/>
                                                                        <table class="table table-bordered">
                                                                            <thead>
                                                                                <tr>
                                                                                    <td colspan="9" style="padding: 0;">
                                                                                        <div style="display: flex; justify-content: space-between; align-items: center; height: 24px; line-height: 24px; width: 100%;">
                                                                                            <i class="fa-solid fa-magnifying-glass" style="font-size: 18px; color: #0d6efd;"></i>
                                                                                            <label class="form-label" style="color: #0d6efd; font-weight: bold; font-size: 18px; margin: 0;">Αποτέλεσμα Αναζήτησης</label>
                                                                                            <i class="fa-solid fa-magnifying-glass" style="font-size: 18px; color: #0d6efd;"></i>
                                                                                        </div>
                                                                                    </td>
                                                                                </tr>
                                                                                <tr style="background-color: lightgray; border: 2px solid black;">
                                                                                    <th style="border: 2px solid black;">
                                                                                        <i class="fa-solid fa-chalkboard-user fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                        Επιβλέπων
                                                                                    </th>
                                                                                    <th style="border: 2px solid black;">
                                                                                        <i class="fa-solid fa-font fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                        Τίτλος Πτυχιακής
                                                                                    </th>
                                                                                    <th style="border: 2px solid black;">
                                                                                        <i class="fa-solid fa-calendar-plus fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                        Ημερομηνία Δημιουργίας
                                                                                    </th>
                                                                                    <th style="border: 2px solid black;">
                                                                                        <i class="fa-solid fa-circle-info fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                        Επισκόπηση
                                                                                    </th>
                                                                                    <th style="border: 2px solid black;">
                                                                                        <i class="fa-solid fa-heart fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                        Ένδειξη Ενδιαφέροντος
                                                                                    </th>
                                                                                    <th style="border: 2px solid black;">
                                                                                        <i class="fa-solid fa-hourglass-half fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                        Κατάσταση
                                                                                    </th>
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                @foreach (var thesis in GetPaginatedProfessorTheses_AsCompany())
                                                                                {
                                                                                    string rowColor = thesis.IsCompanyInterestedInProfessorThesisStatus == "Έχετε Αποδεχτεί" ? "lightgreen" : "transparent";

                                                                                    <tr style="background-color: @rowColor;">
                                                                                        <td>
                                                                                            <a href="#" @onclick="() => ShowProfessorDetailsFromHyperlinkName(thesis.ProfessorEmailUsedToUploadThesis)">
                                                                                                @(thesis.Professor != null ? $"{thesis.Professor.ProfName} {thesis.Professor.ProfSurname}" : "Άγνωστος Καθηγητής")
                                                                                            </a>
                                                                                        </td>
                                                                                        <td>@thesis.ThesisTitle</td>
                                                                                        <td>@thesis.ThesisUploadDateTime.ToShortDateString()</td>
                                                                                        <td style="text-align: center;">
                                                                                            <i class="fa fa-eye" aria-hidden="true" style="cursor: pointer; color: blue;" @onclick="() => ShowThesisDetailsAsCompany(thesis)"></i>
                                                                                        </td>
                                                                                        <td style="text-align: center;">
                                                                                            @if (thesis.IsCompanyInteresetedInProfessorThesis)
                                                                                            {
                                                                                                // Check if the CURRENT company is the one who showed interest
                                                                                                if (thesis.CompanyEmailInterestedInProfessorThesis == CurrentUserEmail)
                                                                                                {
                                                                                                    if (thesis.IsCompanyInterestedInProfessorThesisStatus == "Έχετε Αποδεχτεί")
                                                                                                    {
                                                                                                        <span>Ολοκληρώθηκε</span>
                                                                                                    }
                                                                                                    else
                                                                                                    {
                                                                                                        <span>Έχετε Εκδηλώσει Ενδιαφέρον</span>
                                                                                                    }
                                                                                                }
                                                                                                else
                                                                                                {
                                                                                                    // Another company has shown interest - show "Not Available"
                                                                                                    <span style="color: black;">Μη Διαθέσιμο</span>
                                                                                                }
                                                                                            }
                                                                                            else if (thesis.IsCompanyInterestedInProfessorThesisStatus == "Δεν έχει γίνει Αποδοχή")
                                                                                            {
                                                                                                <i class="fas fa-check" @onclick="() => MarkInterestInProfessorThesis(thesis)" style="cursor: pointer;"></i>
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                <span>Αναμονή Αποδοχής</span>
                                                                                            }
                                                                                        </td>
                                                                                        <td>
                                                                                            @if (thesis.IsCompanyInteresetedInProfessorThesis)
                                                                                            {
                                                                                                if (thesis.CompanyEmailInterestedInProfessorThesis == CurrentUserEmail)
                                                                                                {
                                                                                                    @thesis.IsCompanyInterestedInProfessorThesisStatus
                                                                                                }
                                                                                                else
                                                                                                {
                                                                                                    <span style="display: block; text-align: center;">-</span>
                                                                                                }
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                @thesis.IsCompanyInterestedInProfessorThesisStatus
                                                                                            }
                                                                                        </td>
                                                                                    </tr>
                                                                                }
                                                                            </tbody>
                                                                        </table>
                                                                        <br/>
                                                                        <br/>
                                                                            <div class="d-flex justify-content-center align-items-center mt-3 gap-1">
                                                                                <span class="pagination-item @(currentPage_ProfessorTheses == 1 ? "disabled" : "")"
                                                                                      @onclick="GoToFirstPage_ProfessorTheses">
                                                                                    &lt;&lt;
                                                                                </span>

                                                                                <span class="pagination-item @(currentPage_ProfessorTheses == 1 ? "disabled" : "")"
                                                                                      @onclick="PreviousPage_ProfessorTheses">
                                                                                    &lt;
                                                                                </span>

                                                                                @foreach (var pageNum in GetVisiblePages_ProfessorTheses_AsCompany())
                                                                                {
                                                                                    if (pageNum == -1)
                                                                                    {
                                                                                        <span class="pagination-ellipsis">...</span>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <span class="pagination-item @(pageNum == currentPage_ProfessorTheses ? "active" : "")"
                                                                                              @onclick="@(() => GoToPage_ProfessorTheses(pageNum))">
                                                                                            @pageNum
                                                                                        </span>
                                                                                    }
                                                                                }

                                                                                <span class="pagination-item @(currentPage_ProfessorTheses == totalPages_ProfessorTheses ? "disabled" : "")"
                                                                                      @onclick="NextPage_ProfessorTheses">
                                                                                    &gt;
                                                                                </span>

                                                                                <span class="pagination-item @(currentPage_ProfessorTheses == totalPages_ProfessorTheses ? "disabled" : "")"
                                                                                      @onclick="GoToLastPage_ProfessorTheses">
                                                                                    &gt;&gt;
                                                                                </span>

                                                                                <span class="ms-3">
                                                                                    Σελίδα @currentPage_ProfessorTheses από @totalPages_ProfessorTheses
                                                                                </span>
                                                                            </div>
                                                                            <br />
                                                                            <br />                                                                        

                                                                        
                                                                    }
                                                                    else
                                                                    {
                                                                        <div class="alert alert-warning d-flex align-items-center" role="alert">
                                                                          <i class="fas fa-exclamation-triangle me-2"></i>
                                                                          <div>Δεν βρέθηκε κάποιο αποτέλεσμα που να πληρεί τα κριτήρια της Αναζήτησης σας.</div>
                                                                        </div>
                                                                        <br />
                                                                        <br />
                                                                    }                                                               
                                                                }
                                                            }

                                            </div>

                                                        @if (isThesisDetailEyeIconModalVisibleToSeeAsCompany && selectedProfessorThesisToSeeDetailsOnEyeIconAsCompany != null)
                                                        {
                                                            <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0,0,0,0.5);">
                                                                <div class="modal-dialog modal-dialog-centered" role="document">
                                                                    <div class="modal-content">
                                                                        <div class="modal-header">
                                                                            <h5 class="modal-title" style="color: #4682B4;">@selectedProfessorThesisToSeeDetailsOnEyeIconAsCompany.ThesisTitle</h5>
                                                                            <button type="button" class="close" @onclick="() => isThesisDetailEyeIconModalVisibleToSeeAsCompany = false">
                                                                                <span aria-hidden="true">&times;</span>
                                                                            </button>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">Τμήμα ΕΚΠΑ</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-university text-dark me-2"></i>
                                                                                    <span>@(selectedProfessorThesisToSeeDetailsOnEyeIconAsCompany.Professor?.ProfDepartment ?? "Άγνωστο Τμήμα")</span>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">Επιβλέπων Καθηγητής</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-user-tie text-primary me-2"></i>
                                                                                    <span>@(selectedProfessorThesisToSeeDetailsOnEyeIconAsCompany.Professor != null ? 
                                                                                        $"{selectedProfessorThesisToSeeDetailsOnEyeIconAsCompany.Professor.ProfName} {selectedProfessorThesisToSeeDetailsOnEyeIconAsCompany.Professor.ProfSurname}" : 
                                                                                        "Άγνωστος Καθηγητής")</span>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">Email Καθηγητή</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-envelope text-dark me-2"></i>
                                                                                    <span>@selectedProfessorThesisToSeeDetailsOnEyeIconAsCompany.ProfessorEmailUsedToUploadThesis</span>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label for="viewThesisDescription"><strong>Περιγραφή Πτυχιακής</strong></label>
                                                                                <textarea id="viewThesisDescription" class="form-control" readonly>@selectedProfessorThesisToSeeDetailsOnEyeIconAsCompany.ThesisDescription</textarea>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label for="viewThesisAreas"><strong>Περιοχές Ενδιαφέροντος</strong></label>
                                                                                <textarea id="viewThesisAreas" class="form-control" readonly>@selectedProfessorThesisToSeeDetailsOnEyeIconAsCompany.ThesisAreas</textarea>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label for="viewThesisSkills"><strong>Απαιτούμενες Δεξιότητες</strong></label>
                                                                                <textarea id="viewThesisSkills" class="form-control" readonly>@selectedProfessorThesisToSeeDetailsOnEyeIconAsCompany.ThesisSkills</textarea>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">Ημερομηνία Έναρξης Πτυχιακής</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-calendar-alt text-dark me-2"></i>
                                                                                    <span>@selectedProfessorThesisToSeeDetailsOnEyeIconAsCompany.ThesisActivePeriod.ToString("dd/MM/yyyy")</span>
                                                                                </div>
                                                                            </div>

                                                                            @if (selectedProfessorThesisToSeeDetailsOnEyeIconAsCompany.IsCompanyInteresetedInProfessorThesis && 
                                                                                selectedProfessorThesisToSeeDetailsOnEyeIconAsCompany.CompanyInterested != null)
                                                                            {
                                                                                <div class="form-group">
                                                                                    <label for="viewCompanyName" class="font-weight-bold text-primary">
                                                                                        <strong>Όνομα Ενδιαφερόμενης Εταιρίας</strong>
                                                                                    </label>
                                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                        <i class="fas fa-industry text-primary me-2"></i>
                                                                                        <span>@selectedProfessorThesisToSeeDetailsOnEyeIconAsCompany.CompanyInterested.CompanyName</span>
                                                                                    </div>
                                                                                </div>

                                                                                <div class="form-group">
                                                                                    <label for="viewCompanyEmail" class="font-weight-bold text-primary">
                                                                                        <strong>Email Ενδιαφερόμενης Εταιρίας</strong>
                                                                                    </label>
                                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                        <i class="fas fa-envelope text-primary me-2"></i>
                                                                                        <span>@selectedProfessorThesisToSeeDetailsOnEyeIconAsCompany.CompanyInterested.CompanyEmail</span>
                                                                                    </div>
                                                                                </div>

                                                                                <div class="form-group">
                                                                                    <label class="font-weight-bold text-primary"><strong>Τοποθεσία Ενδιαφερόμενης Εταιρίας</strong></label>
                                                                                    <div class="form-control d-flex align-items-center mt-1" style="height: auto;">
                                                                                        <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                        <a href="https://www.google.com/maps/search/@selectedProfessorThesisToSeeDetailsOnEyeIconAsCompany.CompanyInterested.CompanyLocation"
                                                                                           target="_blank"
                                                                                           style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                            @selectedProfessorThesisToSeeDetailsOnEyeIconAsCompany.CompanyInterested.CompanyLocation
                                                                                        </a>
                                                                                    </div>
                                                                                </div>

                                                                                <div class="form-group">
                                                                                    <label class="font-weight-bold text-primary"><strong>Ιστότοπος Ενδιαφερόμενης Εταιρίας</strong></label>
                                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                        <i class="fas fa-globe" style="color: #007bff; margin-right: 8px;"></i>
                                                                                        <a href="@selectedProfessorThesisToSeeDetailsOnEyeIconAsCompany.CompanyInterested.CompanyWebsite"
                                                                                           target="_blank"
                                                                                           style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                            @selectedProfessorThesisToSeeDetailsOnEyeIconAsCompany.CompanyInterested.CompanyWebsite
                                                                                        </a>
                                                                                    </div>
                                                                                </div>

                                                                                <div class="form-group">
                                                                                    <label for="viewCompanyDescription" class="font-weight-bold text-primary"><strong>Περιγραφή Ενδιαφερόμενης Εταιρίας</strong></label>
                                                                                    <textarea id="viewCompanyDescription" class="form-control" readonly>@selectedProfessorThesisToSeeDetailsOnEyeIconAsCompany.CompanyInterested.CompanyDescription</textarea>
                                                                                </div>
                                                                            }
                                                                            <br/>

                                                                            <div class="form-group">
                                                                                <label for="viewProfessorThesisAttachment"><strong>Αρχείο Πτυχιακής: </strong></label>
                                                                                @if (selectedProfessorThesisToSeeDetailsOnEyeIconAsCompany.ThesisAttachment != null)
                                                                                {
                                                                                    <button class="btn btn-primary btn-sm"
                                                                                            @onclick="() => DownloadProfessorThesisAttachmentWhenSearchForProfessorThesisAsCompany(selectedProfessorThesisToSeeDetailsOnEyeIconAsCompany.Id)"
                                                                                            title="Λήψη Αρχείου">
                                                                                        <i class="fas fa-download"></i> Λήψη
                                                                                    </button>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <span style="color: darkred;"><strong>Δεν Διατίθεται Συννημένο Αρχείο</strong></span>
                                                                                }
                                                                            </div>
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button" class="btn btn-secondary" @onclick="() => isThesisDetailEyeIconModalVisibleToSeeAsCompany = false">Κλείσιμο</button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        }
                                                
                                            
                                                        @if (isProfessorDetailModalVisible && selectedProfessorDetails != null)
                                                        {
                                                            <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0,0,0,0.5);">
                                                                <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
                                                                    <div class="modal-content">
                                                                        <div class="modal-header">
                                                                            <h5 class="modal-title" style="color: #007BFF;">
                                                                                @(selectedProfessorDetails.ProfName ?? "Δεν έχει Καθοριστεί") @(selectedProfessorDetails.ProfSurname ?? "")
                                                                            </h5>
                                                                            <button type="button" class="btn-close" @onclick="CloseProfessorModalFromHyperlinkName" aria-label="Κλείσιμο"></button>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            <!-- Profile Picture -->
                                                                            <div class="form-group text-center">
                                                                                @if (selectedProfessorDetails.ProfImage != null && selectedProfessorDetails.ProfImage.Length > 0)
                                                                                {
                                                                                    var base64Image = Convert.ToBase64String(selectedProfessorDetails.ProfImage);
                                                                                    <img src="data:image/jpeg;base64,@base64Image" alt="Φωτογραφία Προφίλ Καθηγητή" 
                                                                                         style="max-width: 150px; max-height: 150px; border-radius: 50%; object-fit: cover;" />
                                                                                }
                                                                                else
                                                                                {
                                                                                    <p>Δεν υπάρχει φωτογραφία Προφίλ</p>
                                                                                }
                                                                            </div>

                                                                            <!-- Professor Email -->
                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">Email</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-envelope" style="color: #007bff; margin-right: 8px;"></i>
                                                                                    <span>@(selectedProfessorDetails.ProfEmail ?? "Δεν έχει Καθοριστεί")</span>
                                                                                </div>
                                                                            </div>

                                                                            <!-- Professor University and Department -->
                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">Πανεπιστήμιο</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-university" style="color: #007bff; margin-right: 8px;"></i>
                                                                                    <span>@(selectedProfessorDetails.ProfUniversity ?? "Δεν έχει Καθοριστεί")</span>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">Τμήμα</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fa-solid fa-building" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                    <span>@(selectedProfessorDetails.ProfDepartment ?? "Δεν έχει Καθοριστεί")</span>
                                                                                </div>
                                                                            </div>

                                                                            <!-- Professor Vahmida Department -->
                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">Βαθμίδα ΔΕΠ</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fa-solid fa-user-tie" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                    <span>@(selectedProfessorDetails.ProfVahmidaDEP ?? "Δεν έχει Καθοριστεί")</span>
                                                                                </div>
                                                                            </div>

                                                                            <!-- Professor Work and Personal Telephone -->
                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">Τηλέφωνο Εργασίας</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fa-solid fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                                    <span>@(selectedProfessorDetails.ProfWorkTelephone ?? "Δεν έχει Καθοριστεί")</span>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">Προσωπικό Τηλέφωνο</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fa-solid fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                                    @if (selectedProfessorDetails.ProfPersonalTelephoneVisibility)
                                                                                    {
                                                                                        <span>@(selectedProfessorDetails.ProfPersonalTelephone ?? "Δεν έχει Καθοριστεί")</span>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <span>Δεν Διατίθεται</span>
                                                                                    }
                                                                                </div>
                                                                            </div>

                                                                            <!-- Professor Personal Website -->
                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">Προσωπική Ιστοσελίδα</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fa-solid fa-globe" style="color: #007bff; margin-right: 8px;"></i>
                                                                                    @if (!string.IsNullOrWhiteSpace(selectedProfessorDetails.ProfPersonalWebsite))
                                                                                    {
                                                                                        <a href="@selectedProfessorDetails.ProfPersonalWebsite" target="_blank" class="flex-grow-1 text-truncate" style="text-decoration:none; color:#007bff;">
                                                                                            @selectedProfessorDetails.ProfPersonalWebsite
                                                                                        </a>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <span class="flex-grow-1 text-muted">Δεν Διατίθεται</span>
                                                                                    }
                                                                                </div>
                                                                            </div>

                                                                            <!-- Professor LinkedIn Site -->
                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">LinkedIn</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fab fa-linkedin" style="color: #0A66C2; margin-right: 8px;"></i>
                                                                                    @if (!string.IsNullOrWhiteSpace(selectedProfessorDetails.ProfLinkedInSite))
                                                                                    {
                                                                                        <a href="@selectedProfessorDetails.ProfLinkedInSite" target="_blank" class="flex-grow-1 text-truncate" style="text-decoration:none; color:#0A66C2;">
                                                                                            @selectedProfessorDetails.ProfLinkedInSite
                                                                                        </a>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <span class="flex-grow-1 text-muted">Δεν Διατίθεται</span>
                                                                                    }
                                                                                </div>
                                                                            </div>

                                                                            <!-- Professor Scholar Profile -->
                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">Scholar Profile</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-graduation-cap" style="color: #4285F4; margin-right: 8px;"></i>
                                                                                    @if (!string.IsNullOrWhiteSpace(selectedProfessorDetails.ProfScholarProfile))
                                                                                    {
                                                                                        <a href="@selectedProfessorDetails.ProfScholarProfile" target="_blank" class="flex-grow-1 text-truncate" style="text-decoration:none; color:#4285F4;">
                                                                                            @selectedProfessorDetails.ProfScholarProfile
                                                                                        </a>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <span class="flex-grow-1 text-muted">Δεν Διατίθεται</span>
                                                                                    }
                                                                                </div>
                                                                            </div>

                                                                            <!-- Professor ORCID Profile -->
                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">ORCID Profile</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-id-card" style="color: #A6CE39; margin-right: 8px;"></i>
                                                                                    @if (!string.IsNullOrWhiteSpace(selectedProfessorDetails.ProfOrchidProfile))
                                                                                    {
                                                                                        <a href="@selectedProfessorDetails.ProfOrchidProfile" target="_blank" class="flex-grow-1 text-truncate" style="text-decoration:none; color:#A6CE39;">
                                                                                            @selectedProfessorDetails.ProfOrchidProfile
                                                                                        </a>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <span class="flex-grow-1 text-muted">Δεν Διατίθεται</span>
                                                                                    }
                                                                                </div>
                                                                            </div>

                                                                            <!-- Professor General Field of Work -->
                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">Γενικός Τομέας Εργασίας</label>
                                                                                <textarea class="form-control" readonly>@(selectedProfessorDetails.ProfGeneralFieldOfWork ?? "Δεν έχει Καθοριστεί")</textarea>
                                                                            </div>

                                                                            <!-- Professor Personal Description -->
                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">Προσωπική Περιγραφή</label>
                                                                                <textarea class="form-control" readonly>@(selectedProfessorDetails.ProfPersonalDescription ?? "Δεν έχει Καθοριστεί")</textarea>
                                                                            </div>
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button" class="btn btn-secondary" @onclick="CloseProfessorModalFromHyperlinkName">
                                                                                <i class="fas fa-times mr-2"></i>Κλείσιμο
                                                                            </button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        }



                                                        @if (showProfessorModal && selectedProfessorToShowDetailsForInterestinCompanyEvent != null)
                                                        {
                                                            <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0,0,0,0.5);">
                                                                <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
                                                                    <div class="modal-content">
                                                                        <div class="modal-header">
                                                                            <h5 class="modal-title" style="color: #007BFF;">
                                                                                @selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfName 
                                                                                @selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfSurname
                                                                            </h5>
                                                                            <button type="button" class="btn-close" @onclick="CloseProfessorDetailsModal" aria-label="Κλείσιμο"></button>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            <!-- Profile Picture -->
                                                                            <div class="form-group text-center">
                                                                                @if (selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfImage != null)
                                                                                {
                                                                                    var base64Image = Convert.ToBase64String(selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfImage);
                                                                                    <img src="data:image/jpeg;base64,@base64Image" alt="Φωτογραφία Προφίλ Καθηγητή" 
                                                                                         style="max-width: 150px; max-height: 150px; border-radius: 50%; object-fit: cover;" />
                                                                                }
                                                                                else
                                                                                {
                                                                                    <p>Δεν υπάρχει φωτογραφία Προφίλ</p>
                                                                                }
                                                                            </div>

                                                                            <!-- Professor Email -->
                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">Email</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-envelope" style="color: #007bff; margin-right: 8px;"></i>
                                                                                    <span>@selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfEmail</span>
                                                                                </div>
                                                                            </div>

                                                                            <!-- Professor University and Department -->
                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">Πανεπιστήμιο</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-university" style="color: #007bff; margin-right: 8px;"></i>
                                                                                    <span>@selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfUniversity</span>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">Τμήμα</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fa-solid fa-building" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                    <span>@selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfDepartment</span>
                                                                                </div>
                                                                            </div>

                                                                            <!-- Professor Vahmida Department -->
                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">Βαθμίδα ΔΕΠ</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fa-solid fa-user-tie" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                    <span>@selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfVahmidaDEP</span>
                                                                                </div>
                                                                            </div>

                                                                            <!-- Professor Work and Personal Telephone -->
                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">Τηλέφωνο Εργασίας</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fa-solid fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                                    <span>@selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfWorkTelephone</span>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">Προσωπικό Τηλέφωνο</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fa-solid fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                                    @if (selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfPersonalTelephoneVisibility)
                                                                                    {
                                                                                        <span>@selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfPersonalTelephone</span>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <span>Δεν Διατίθεται</span>
                                                                                    }
                                                                                </div>
                                                                            </div>

                                                                            <!-- Professor Personal Website -->
                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">Προσωπική Ιστοσελίδα</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fa-solid fa-globe" style="color: #007bff; margin-right: 8px;"></i>
                                                                                    @if (!string.IsNullOrWhiteSpace(selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfPersonalWebsite))
                                                                                    {
                                                                                        <a href="@selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfPersonalWebsite" 
                                                                                           target="_blank" 
                                                                                           class="flex-grow-1 text-truncate" 
                                                                                           style="text-decoration:none; color:#007bff;">
                                                                                            @selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfPersonalWebsite
                                                                                        </a>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <span class="flex-grow-1 text-muted">Δεν Διατίθεται</span>
                                                                                    }
                                                                                </div>
                                                                            </div>

                                                                            <!-- Professor LinkedIn Site -->
                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">LinkedIn</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fab fa-linkedin" style="color: #0A66C2; margin-right: 8px;"></i>
                                                                                    @if (!string.IsNullOrWhiteSpace(selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfLinkedInSite))
                                                                                    {
                                                                                        <a href="@selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfLinkedInSite" 
                                                                                           target="_blank" 
                                                                                           class="flex-grow-1 text-truncate" 
                                                                                           style="text-decoration:none; color:#0A66C2;">
                                                                                            @selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfLinkedInSite
                                                                                        </a>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <span class="flex-grow-1 text-muted">Δεν Διατίθεται</span>
                                                                                    }
                                                                                </div>
                                                                            </div>

                                                                            <!-- Professor Scholar Profile -->
                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">Scholar Profile</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-graduation-cap" style="color: #4285F4; margin-right: 8px;"></i>
                                                                                    @if (!string.IsNullOrWhiteSpace(selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfScholarProfile))
                                                                                    {
                                                                                        <a href="@selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfScholarProfile" 
                                                                                           target="_blank" 
                                                                                           class="flex-grow-1 text-truncate" 
                                                                                           style="text-decoration:none; color:#4285F4;">
                                                                                            @selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfScholarProfile
                                                                                        </a>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <span class="flex-grow-1 text-muted">Δεν Διατίθεται</span>
                                                                                    }
                                                                                </div>
                                                                            </div>

                                                                            <!-- Professor ORCID Profile -->
                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">ORCID Profile</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-id-card" style="color: #A6CE39; margin-right: 8px;"></i>
                                                                                    @if (!string.IsNullOrWhiteSpace(selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfOrchidProfile))
                                                                                    {
                                                                                        <a href="@selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfOrchidProfile" 
                                                                                           target="_blank" 
                                                                                           class="flex-grow-1 text-truncate" 
                                                                                           style="text-decoration:none; color:#A6CE39;">
                                                                                            @selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfOrchidProfile
                                                                                        </a>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <span class="flex-grow-1 text-muted">Δεν Διατίθεται</span>
                                                                                    }
                                                                                </div>
                                                                            </div>

                                                                            <!-- Professor General Field of Work -->
                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">Πεδίο Εργασίας</label>
                                                                                <textarea class="form-control" readonly>@selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfGeneralFieldOfWork</textarea>
                                                                            </div>

                                                                            <!-- Professor Personal Description -->
                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">Προσωπική Περιγραφή</label>
                                                                                <textarea class="form-control" rows="3" readonly>@selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfPersonalDescription</textarea>
                                                                            </div>
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button" class="btn btn-secondary" @onclick="CloseProfessorDetailsModal">
                                                                                <i class="fas fa-times mr-2"></i>Κλείσιμο
                                                                            </button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        }







                                                        @if (isModalVisibleToShowCompanyThesisDetails && currentThesis != null)
                                                        {
                                                            <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0,0,0,0.5);">
                                                                <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
                                                                    <!-- Modal size set to large and centered -->
                                                                    <div class="modal-content">
                                                                        <div class="modal-header">
                                                                            <h5 class="modal-title" style="color: #4682B4;">@currentThesis.CompanyThesisTitle</h5>
                                                                            <button type="button" class="close" @onclick="CloseModalForCompanyThesis">
                                                                                <span>&times;</span>
                                                                            </button>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            @*
                                                                            <div class="form-group">
                                                                                <label for="viewThesisTitle"><strong>Τίτλος Θέσης</strong></label>
                                                                                <input type="text" id="viewThesisTitle" class="form-control" value="@currentThesis.CompanyThesisTitle" readonly />
                                                                            </div>
                                                                            *@
                                                                            <div class="form-group">
                                                                                <label for="viewThesisDescription"><strong>Περιγραφή</strong></label>
                                                                                <textarea id="viewThesisDescription" class="form-control" readonly>@currentThesis.CompanyThesisDescriptionsUploaded</textarea>
                                                                            </div>
                                                                            <div class="form-group">
                                                                                <label for="viewThesisAreas"><strong>Τομείς</strong></label>
                                                                                <textarea id="viewThesisAreas" class="form-control" readonly>@currentThesis.CompanyThesisAreasUpload</textarea>
                                                                            </div>
                                                                            <div class="form-group">
                                                                                <label for="viewThesisSkills"><strong>Απαιτούμενα Προσόντα</strong></label>
                                                                                <textarea id="viewThesisSkills" class="form-control" readonly>@currentThesis.CompanyThesisSkillsNeeded</textarea>
                                                                            </div>
                                                                            <div class="form-group">
                                                                                <label for="viewThesisSupervisor" style="font-weight: bold;">Επόπτης</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-user-tie" style="color: #007bff; margin-right: 8px;"></i>
                                                                                    <span>@currentThesis.CompanyThesisCompanySupervisorFullName</span>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label for="viewThesisStatus"><strong>Κατάσταση</strong></label>
                                                                                <input type="text" id="viewThesisStatus" class="form-control" value="@currentThesis.CompanyThesisStatus" readonly />
                                                                            </div>
                                                                            <div class="form-group">
                                                                                <label for="viewThesisDepartment" style="font-weight: bold;">Τμήμα</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fa-solid fa-building" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                    <span>@(!string.IsNullOrEmpty(currentThesis.CompanyThesisDepartment) ? currentThesis.CompanyThesisDepartment : "Δεν έχει Καθοριστεί")</span>
                                                                                </div>
                                                                            </div>


                                                                            <div class="form-group">
                                                                                <label for="viewThesisContactEmail" style="font-weight: bold;">Email Επικοινωνίας</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-envelope" style="color: #007bff; margin-right: 8px;"></i>
                                                                                    <span>@currentThesis.CompanyThesisContactPersonEmail</span>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label for="viewThesisContactPhone" style="font-weight: bold;">Τηλέφωνο Επικοινωνίας</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-phone-alt" style="color: #28a745; margin-right: 8px;"></i>
                                                                                    <span>@currentThesis.CompanyThesisContactPersonTelephone</span>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label for="viewThesisUploadDate" style="font-weight: bold;">Ημερομηνία Δημιουργίας</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-calendar-alt" style="color: #17a2b8; margin-right: 8px;"></i>
                                                                                    <span>@currentThesis.CompanyThesisUploadDateTime.ToString("yyyy-MM-dd")</span>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label for="viewThesisStartingDate" style="font-weight: bold;">Ημερομηνία Έναρξης</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-calendar-alt" style="color: #17a2b8; margin-right: 8px;"></i>
                                                                                    <span>@currentThesis.CompanyThesisStartingDate.ToString("yyyy-MM-dd")</span>
                                                                                </div>
                                                                            </div>
                                                                         
                                                                            <div class="form-group">
                                                                                <label for="viewThesisProfessorSurname" style="color: #87CEEB; font-weight: bold;">
                                                                                    <i class="fas fa-user-graduate" style="margin-right: 6px;"></i>Εκδήλωση Ενδιαφέροντος από Καθηγητή
                                                                                </label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-chalkboard-teacher" style="color: #007bff; margin-right: 8px;"></i>
                                                                                    @if (currentThesis.ProfessorInterested != null)
                                                                                    {
                                                                                        <span>@currentThesis.ProfessorInterested.ProfName @currentThesis.ProfessorInterested.ProfSurname</span>
                                                                                    }
                                                                                    else if (!string.IsNullOrWhiteSpace(currentThesis.ProfessorEmailInterestedInCompanyThesis))
                                                                                    {
                                                                                        <span>Καθηγητής με email: @currentThesis.ProfessorEmailInterestedInCompanyThesis</span>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <span style="color: #6c757d;">Δεν έχει γίνει Ένδειξη Ενδιαφέροντος από Καθηγητή</span>
                                                                                    }
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label for="viewThesisProfessorEmail" style="color: #87CEEB; font-weight: bold;">
                                                                                    <i class="fas fa-envelope" style="margin-right: 6px;"></i>Email Ενδιαφερόμενου Καθηγητή
                                                                                </label>
                                                                                <input type="email" id="viewThesisProfessorEmail" class="form-control" value="@currentThesis.ProfessorEmailInterestedInCompanyThesis" readonly />
                                                                            </div>

                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button" class="btn btn-secondary" @onclick="CloseModalForCompanyThesis">Κλείσιμο</button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        }





                                                        @if(isModalVisibleToShowprofessorDetailsAtCompanyThesisInterest)
                                                        {
                                                            <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0,0,0,0.5);">
                                                                <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
                                                                    <div class="modal-content">
                                                                        <div class="modal-header">
                                                                            <h5 class="modal-title" style="color: #007BFF;">
                                                                                @currentProfessorDetails.ProfName @currentProfessorDetails.ProfSurname
                                                                            </h5>
                                                                            <button type="button" class="btn-close" @onclick="CloseModalForProfessorDetails" aria-label="Κλείσιμο"></button>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            <!-- Display student details here -->
                                                                            <div class="form-group text-center">
                                                                                @if (currentProfessorDetails?.ProfImage != null && currentProfessorDetails.ProfImage.Length > 0)
                                                                                {
                                                                                    var base64Image = Convert.ToBase64String(currentProfessorDetails.ProfImage);
                                                                                    <img src="data:image/jpeg;base64,@base64Image" alt="Φωτογραφία Προφίλ Καθηγητή" 
                                                                                         style="max-width: 150px; max-height: 150px; border-radius: 50%; object-fit: cover;" />
                                                                                }
                                                                                else
                                                                                {
                                                                                    <p>Δεν υπάρχει φωτογραφία Προφίλ</p>
                                                                                }
                                                                            </div>
                                                                            <!-- Professor Name and Surname -->
                                                                            @*
                                                                            <div class="form-group">
                                                                                <label for="viewThesisTitle">Όνομα</label>
                                                                                <input type="text" id="viewThesisTitle" class="form-control" value="@currentProfessorDetails.ProfName" readonly />
                                                                            </div>
                                                                            
                                                                            <div class="form-group">
                                                                                <label for="viewThesisDescription">Επώνυμο</label>
                                                                                <input type="text" id="viewThesisDescription" class="form-control" value="@currentProfessorDetails.ProfSurname" readonly />
                                                                            </div>
                                                                            *@
                                                                            <!-- Professor Email -->
                                                                            <div class="form-group">
                                                                                <label for="viewProfessorEmail" style="font-weight: bold;">Email</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-envelope" style="color: #007bff; margin-right: 8px;"></i>
                                                                                    <input type="text" id="viewProfessorEmail" class="border-0 flex-grow-1" 
                                                                                           value="@currentProfessorDetails.ProfEmail" readonly />
                                                                                </div>
                                                                            </div>


                                                                            <!-- Professor University and Department -->
                                                                            <div class="form-group">
                                                                                <label for="viewProfessorUniversity" style="font-weight: bold;">Πανεπιστήμιο</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-university" style="color: #007bff; margin-right: 8px;"></i>
                                                                                    <input type="text" id="viewProfessorUniversity" class="border-0 flex-grow-1" 
                                                                                           value="@currentProfessorDetails.ProfUniversity" readonly />
                                                                                </div>
                                                                            </div>


                                                                            <div class="form-group">
                                                                                <label for="viewProfessorDepartment" style="font-weight: bold;">Τμήμα</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fa-solid fa-building" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                    <input type="text" id="viewProfessorDepartment" class="border-0 flex-grow-1" 
                                                                                           value="@currentProfessorDetails.ProfDepartment" readonly />
                                                                                </div>
                                                                            </div>


                                                                            <!-- Professor Vahmida Department -->
                                                                            <div class="form-group">
                                                                                <label for="viewProfessorVahmida" style="font-weight: bold;">Βαθμίδα ΔΕΠ</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fa-solid fa-user-tie" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                    <input type="text" id="viewProfessorVahmida" class="border-0 flex-grow-1" 
                                                                                           value="@currentProfessorDetails.ProfVahmidaDEP" readonly />
                                                                                </div>
                                                                            </div>


                                                                            <!-- Professor Work and Personal Telephone -->
                                                                            <div class="form-group">
                                                                                <label for="viewProfessorWorkTelephone" style="font-weight: bold;">Τηλέφωνο Εργασίας</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fa-solid fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                                    <input type="text" id="viewProfessorWorkTelephone" class="border-0 flex-grow-1" 
                                                                                           value="@currentProfessorDetails.ProfWorkTelephone" readonly />
                                                                                </div>
                                                                            </div>


                                                                            <div class="form-group">
                                                                                <label for="viewProfessorPersonalTelephone" style="font-weight: bold;">Προσωπικό Τηλέφωνο</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fa-solid fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                                    @if (currentProfessorDetails.ProfPersonalTelephoneVisibility)
                                                                                    {
                                                                                        <input type="text" id="viewProfessorPersonalTelephone" class="border-0 flex-grow-1" 
                                                                                               value="@currentProfessorDetails.ProfPersonalTelephone" readonly />
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <input type="text" id="viewProfessorPersonalTelephone" class="border-0 flex-grow-1" 
                                                                                               value="Δεν Διατίθεται" readonly />
                                                                                    }
                                                                                </div>
                                                                            </div>


                                                                            <!-- Professor Personal Website -->
                                                                            <div class="form-group">
                                                                                <label for="viewProfessorWebsite" style="font-weight: bold;">Ιστότοπος</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fa-solid fa-globe" style="color: #007bff; margin-right: 8px;"></i>
                                                                                    @if (!string.IsNullOrWhiteSpace(currentProfessorDetails.ProfPersonalWebsite))
                                                                                    {
                                                                                        <a href="@currentProfessorDetails.ProfPersonalWebsite" target="_blank" class="flex-grow-1 text-truncate" style="text-decoration:none; color:#007bff;">
                                                                                            @currentProfessorDetails.ProfPersonalWebsite
                                                                                        </a>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <span class="flex-grow-1 text-muted">Δεν Διατίθεται</span>
                                                                                    }
                                                                                </div>
                                                                            </div>

                                                                            <!-- Professor LinkedIn Site -->
                                                                            <div class="form-group">
                                                                                <label for="viewProfessorLinkedIn" style="font-weight: bold;">LinkedIn</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fab fa-linkedin" style="color: #0A66C2; margin-right: 8px;"></i>
                                                                                    @if (!string.IsNullOrWhiteSpace(currentProfessorDetails.ProfLinkedInSite))
                                                                                    {
                                                                                        <a href="@currentProfessorDetails.ProfLinkedInSite" target="_blank" class="flex-grow-1 text-truncate" style="text-decoration:none; color:#0A66C2;">
                                                                                            @currentProfessorDetails.ProfLinkedInSite
                                                                                        </a>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <span class="flex-grow-1 text-muted">Δεν Διατίθεται</span>
                                                                                    }
                                                                                </div>
                                                                            </div>

                                                                            <!-- Professor Scholar Profile -->
                                                                            <div class="form-group">
                                                                                <label for="viewProfessorScholarProfile" style="font-weight: bold;">Scholar Profile</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-graduation-cap" style="color: #4285F4; margin-right: 8px;"></i>
                                                                                    @if (!string.IsNullOrWhiteSpace(currentProfessorDetails.ProfScholarProfile))
                                                                                    {
                                                                                        <a href="@currentProfessorDetails.ProfScholarProfile" target="_blank" class="flex-grow-1 text-truncate" style="text-decoration:none; color:#4285F4;">
                                                                                            @currentProfessorDetails.ProfScholarProfile
                                                                                        </a>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <span class="flex-grow-1 text-muted">Δεν Διατίθεται</span>
                                                                                    }
                                                                                </div>
                                                                            </div>

                                                                            <!-- Professor ORCID Profile -->
                                                                            <div class="form-group">
                                                                                <label for="viewProfessorOrchidProfile" style="font-weight: bold;">ORCID Profile</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-id-card" style="color: #A6CE39; margin-right: 8px;"></i>
                                                                                    @if (!string.IsNullOrWhiteSpace(currentProfessorDetails.ProfOrchidProfile))
                                                                                    {
                                                                                        <a href="@currentProfessorDetails.ProfOrchidProfile" target="_blank" class="flex-grow-1 text-truncate" style="text-decoration:none; color:#A6CE39;">
                                                                                            @currentProfessorDetails.ProfOrchidProfile
                                                                                        </a>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <span class="flex-grow-1 text-muted">Δεν Διατίθεται</span>
                                                                                    }
                                                                                </div>
                                                                            </div>



                                                                            <!-- Professor General Field of Work (Areas) -->
                                                                            <div class="form-group">
                                                                                <label for="viewProfessorFieldOfWork">Γενικός Τομέας Εργασίας</label>
                                                                                <textarea id="viewProfessorFieldOfWork" class="form-control" readonly>@currentProfessorDetails.ProfGeneralFieldOfWork</textarea>
                                                                            </div>

                                                                            <!-- Professor General Skills -->
                                                                            <div class="form-group">
                                                                                <label for="viewProfessorSkills">Γενικές Δεξιότητες</label>
                                                                                <textarea id="viewProfessorSkills" class="form-control" readonly>@currentProfessorDetails.ProfGeneralSkills</textarea>
                                                                            </div>


                                                                            <!-- Professor Personal Description -->
                                                                            <div class="form-group">
                                                                                <label for="viewProfessorDescription">Προσωπική Περιγραφή</label>
                                                                                <textarea id="viewProfessorDescription" class="form-control" readonly>@currentProfessorDetails.ProfPersonalDescription</textarea>
                                                                            </div>

                                                                            @* VGIKE 20/2 ISWS XREIASTEI NA MPEI KAI CV OTAN KANEI AITISI GIA COMPANY THESIS
                                                                            <!-- Professor CV Attachment -->
                                                                            <div class="form-group">
                                                                                <label for="viewProfessorCV">Βιογραφικό</label>
                                                                                @if (currentProfessorDetails.ProfCVAttachment != null)
                                                                                {
                                                                                    <a href="data:application/pdf;base64,@Convert.ToBase64String(currentProfessorDetails.ProfCVAttachment)" target="_blank" class="btn btn-primary">
                                                                                        <i class="fas fa-download"></i> Λήψη
                                                                                    </a>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <span>Δεν υπάρχει συνημμένο CV</span>
                                                                                }
                                                                            </div>
                                                                            *@
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button" class="btn btn-secondary" @onclick="CloseModalForProfessorDetails">Κλείσιμο</button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        }


@*---------------------------------------------------------------------------------------------------------- COMPANY THESIS END------------------------------------------------------------------------------------------------------------*@









@*----------------------------------------------------------------------------------------------------------COMPANY EVENTS START------------------------------------------------------------------------------------------------------------*@

                                            <!-- COMPANY EVENTS tab content -->
                                            <div class="tab-pane fade" id="events" role="tabpanel" aria-labelledby="events-tab">                                               
                                                            <div class="mb-3 row-dark-gray">
                                                                <div class="calendar-section">
                                                                    <strong> - Ημερολόγιο Εκδηλώσεων - </strong>
                                                                    <div>
                                                                        <!-- CALENDAR component -->
                                                                        <div class="calendar">
                                                                            <div class="calendar-header">
                                                                                <h2>@currentMonth.ToString("MMMM yyyy", CultureInfo.GetCultureInfo("el-GR"))</h2>
                                                                            </div>
                                                                            <div class="calendar-grid">
                                                                                <!-- Days of the week header in Greek -->
                                                                                <div class="day-header">Δ</div>
                                                                                <div class="day-header">Τ</div>
                                                                                <div class="day-header">Τ</div>
                                                                                <div class="day-header">Π</div>
                                                                                <div class="day-header">Π</div>
                                                                                <div class="day-header">Σ</div>
                                                                                <div class="day-header">Κ</div>

                                                                                @for (int i = 0; i < adjustedFirstDayOfMonth; i++)
                                                                                {
                                                                                    <div class="day-cell empty-cell"></div>
                                                                                }

                                                                                @for (int i = 1; i <= daysInCurrentMonth; i++)
                                                                                {
                                                                                    DateTime dayDate = new DateTime(currentMonth.Year, currentMonth.Month, i);
            
                                                                                    // Filter events by status "Δημοσιευμένη"
                                                                                    var companyEvents = eventsForDate.ContainsKey(i) 
                                                                                        ? eventsForDate[i].Where(e => e.CompanyEventStatus == "Δημοσιευμένη").ToList()
                                                                                        : new List<CompanyEvent>();
                
                                                                                    var professorEvents = eventsForDateForProfessors.ContainsKey(i)
                                                                                        ? eventsForDateForProfessors[i].Where(e => e.ProfessorEventStatus == "Δημοσιευμένη").ToList()
                                                                                        : new List<ProfessorEvent>();
                
                                                                                    bool hasPublishedEvent = companyEvents.Any() || professorEvents.Any();

                                                                                    string dayCellClass = "day-cell";

                                                                                    // Check if this day is today's date
                                                                                    if (dayDate.Date == DateTime.Today.Date)
                                                                                    {
                                                                                        dayCellClass += " today";
                                                                                    }

                                                                                    // Check if this day should be highlighted
                                                                                    if (i == highlightedDay)
                                                                                    {
                                                                                        dayCellClass += " highlighted";
                                                                                    }

                                                                                    // Add event-day class if this day has published events
                                                                                    if (hasPublishedEvent)
                                                                                    {
                                                                                        dayCellClass += " event-day";
                                                                                    }

                                                                                    <div class="@dayCellClass" @onclick="() => OnDateClicked(dayDate)">
                                                                                        <span>@i</span>
                                                                                        @if (hasPublishedEvent)
                                                                                        {
                                                                                            <div class="event-indicators">
                                                                                                @if (companyEvents.Any())
                                                                                                {
                                                                                                    <span class="company-indicator">● (@companyEvents.Count)</span>
                                                                                                }
                                                                                                @if (professorEvents.Any())
                                                                                                {
                                                                                                    <span class="professor-indicator">● (@professorEvents.Count)</span>
                                                                                                }
                                                                                            </div>
                                                                                        }
                                                                                    </div>
                                                                                }
                                                                            </div>

                                                                            <!-- Pagination buttons to navigate between months -->
                                                                            <div class="pagination">
                                                                                <button @onclick="ShowPreviousMonth" class="btn btn-small">◀</button>
                                                                                <button @onclick="ShowNextMonth" class="btn btn-small">▶</button>
                                                                            </div>
                                                                            <!-- Legend section -->
                                                                            <div class="calendar-legend">
                                                                                <div class="legend-item">
                                                                                    <span class="legend-color today-legend"></span>
                                                                                    <span class="legend-text">Σημερινή Ημερομηνία</span>
                                                                                </div>
                                                                                <div class="legend-item">
                                                                                    <span class="legend-color event-day-legend"></span>
                                                                                    <span class="legend-text">Ημέρα Εκδήλωσης</span>
                                                                                </div>
                                                                                <div class="legend-item">
                                                                                    <span class="company-indicator">●</span>
                                                                                    <span class="legend-text">(Εκδηλώσεις Εταιρειών)</span>
                                                                                </div>
                                                                                <div class="legend-item">
                                                                                    <span class="professor-indicator">●</span>
                                                                                    <span class="legend-text">(Εκδηλώσεις Καθηγητών)</span>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>


                                                            @if (isModalVisibleToShowEventsOnCalendarForEachClickedDay)
                                                            {
                                                                <div class="row mb-3">
                                                                    <div class="col-md-12">
                                                                        <div class="modal custom-modal"> <!-- Added custom class here -->
                                                                            <div class="modal-content">
                                                                                <h3><strong>Λεπτομέρειες Εκδήλωσης/σεων</strong>: <span style="color: #00008B;">@selectedDate?.ToString("MMMM dd yyyy")</span></h3>
                                                                                <!-- Filter Section -->
                                                                                @if (selectedEvent == null)
                                                                                {
                                                                                    <div class="form-group">
                                                                                        <label style="font-weight: bold; color: #4682b4;">Φιλτράρισμα Εκδηλώσεων</label>
                                                                                        <div class="input-group custom-width">
                                                                                            <select class=".form-control-calendarEventModal" @bind="selectedEventFilter">
                                                                                                <option value="All">Όλες οι Εκδηλώσεις</option>
                                                                                                <option value="Company">Εκδηλώσεις Εταιρειών</option>
                                                                                                <option value="Professor">Εκδηλώσεις Καθηγητών</option>
                                                                                            </select>
                                                                                            <div class="input-group-append">
                                                                                                <span class="input-group-text"></span>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <br/>
                                                                                    @if (selectedEvent == null)
                                                                                    {
                                                                                        @if (filteredCompanyEvents.Count == 0 && filteredProfessorEvents.Count == 0)
                                                                                        {
                                                                                            <p>
                                                                                                "Δεν βρέθηκε καμία Εκδήλωση για αυτήν τη μέρα"
                                                                                            </p>
                                                                                            <p>
                                                                                                Η σημερινή ημερομηνία είναι: <strong>@DateTime.Today.ToString("dd MMMM , yyyy", new System.Globalization.CultureInfo("el-GR"))</strong>
                                                                                            </p>
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <ul class="list-group">
                                                                                                @if (selectedEventFilter == "All" || selectedEventFilter == "Company" || selectedEventFilter == "Professor")
                                                                                                {
                                                                                                    <div class="table-responsive" style="max-height: 400px; overflow-y: auto;">
                                                                                                        <table class="table table-responsive" style="width: auto; table-layout: fixed;">
                                                                                                            <thead>
                                                                                                                <tr>
                                                                                                                    <th class="text-center" style="width: auto;">Διοργανωτής</th>
                                                                                                                    <th class="text-center" style="width: auto;">Ημερομηνία</th>
                                                                                                                    <th class="text-center" style="width: auto;">Ώρα</th>                                                                                                          
                                                                                                                    <th class="text-center" style="width: auto;">Τίτλος</th>                                                                                                 
                                                                                                                    <th class="text-center" style="width: auto;">Λεπτομέρειες</th>
                                                                                                                    @if (selectedEventFilter != "Company") 
                                                                                                                    {
                                                                                                                        <th class="text-center" style="width: auto;">Ένδειξη Ενδιαφέροντος</th>
                                                                                                                    }
                                                                                                                </tr>
                                                                                                            </thead>
                                                                                                            <tbody>
                                                                                                                @if (selectedEventFilter == "All" || selectedEventFilter == "Company")
                                                                                                                {
                                                                                                                    @foreach (var companyEvent in filteredCompanyEvents)
                                                                                                                    {
                                                                                                                        <tr style="cursor:pointer; text-align: center;">
                                                                                                                            <td style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">@companyEvent.Company.CompanyName</td>
                                                                                                                            <td>@companyEvent.CompanyEventActiveDate.Date.ToString("dd MMMM", new System.Globalization.CultureInfo("el-GR"))</td>
                                                                                                                            <td>@companyEvent.CompanyEventTime</td>
                                                                                                                            <td style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">@companyEvent.CompanyEventTitle</td>
                                                                                                                            <td>
                                                                                                                                <i class="fas fa-eye" @onclick="() => ShowEventDetails(companyEvent)" style="cursor: pointer; font-size: 20px;"></i>
                                                                                                                            </td>
                                                                                                                            @if (selectedEventFilter != "Company") 
                                                                                                                            {
                                                                                                                                <td> - </td>
                                                                                                                            }
                                                                                                                        </tr>
                                                                                                                    }
                                                                                                                }
                                                                                                                @if (selectedEventFilter == "All" || selectedEventFilter == "Professor")
                                                                                                                {
                                                                                                                    @foreach (var professorEvent in filteredProfessorEvents)
                                                                                                                    {                                                                                                                  
                                                                                                                        bool hasAlreadyExpressedInterest = dbContext.InterestInProfessorEventsAsCompany
                                                                                                                            .Any(i => i.RNGForProfessorEventInterestAsCompany == professorEvent.RNGForEventUploadedAsProfessor
                                                                                                                                      && i.CompanyEmailShowInterestForProfessorEvent == CurrentUserEmail);

                                                                                                                        <tr style="cursor:pointer; text-align: center; background-color: @(hasAlreadyExpressedInterest ? "lightgreen" : "transparent");">
                                                                                                                            <td style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">
                                                                                                                                @professorEvent.Professor?.ProfName @professorEvent.Professor?.ProfSurname
                                                                                                                            </td>
                                                                                                                            <td>@professorEvent.ProfessorEventActiveDate.Date.ToString("dd MMMM", new System.Globalization.CultureInfo("el-GR"))</td>
                                                                                                                            <td>@professorEvent.ProfessorEventTime</td>
                                                                                                                            <td style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">@professorEvent.ProfessorEventTitle</td>
                                                                                                                            <td>
                                                                                                                                <i class="fas fa-eye" @onclick="() => ShowEventDetails(professorEvent)" style="cursor: pointer; font-size: 20px;"></i>
                                                                                                                            </td>
                                                                                                                            @if (selectedEventFilter != "Company") 
                                                                                                                            {
                                                                                                                                <td>
                                                                                                                                    <div style="display: flex; align-items: center; justify-content: center; gap: 5px; flex-wrap: wrap;">                                                                                                                                  
                                                                                                                                        @if (!hasAlreadyExpressedInterest)
                                                                                                                                        {
                                                                                                                                            <span style="white-space: nowrap; font-size: 12px; font-weight: bold;">Αριθμός Συμμετοχόντων</span>
                                                                                                                                            <input type="number"                                                                                                                                        
                                                                                                                                                   value="@GetOrAddNumberOfPeople(professorEvent.RNGForEventUploadedAsProfessor)" 
                                                                                                                                                   @onchange="(e) => HandleNumberChangeForParticipantsWhenShowInterestAsACompanyForAProfessorEvent(e, professorEvent.RNGForEventUploadedAsProfessor)"
                                                                                                                                                   min="1" 
                                                                                                                                                   class="form-control" 
                                                                                                                                                   style="width: auto; margin: 0; text-align: center;"/>
                                                                                                                                        }

                                                                                                                                        @if (hasAlreadyExpressedInterest)
                                                                                                                                        {
                                                                                                                                            <span style="color: black; font-weight: bold; white-space: nowrap;">Έχετε Εκδηλώσει Ενδιαφέρον</span>
                                                                                                                                        }
                                                                                                                                        else
                                                                                                                                        {
                                                                                                                                            <span style="white-space: nowrap; font-size: 12px; font-weight: bold;">
                                                                                                                                                Δείξτε Ενδιαφέρον 
                                                                                                                                                <span style="color: lightgray; font-weight: normal; font-style: italic;">(πατήστε το εικονίδιο)</span>
                                                                                                                                            </span>
                                                                                                                                            <i class="fas fa-heart" @onclick="() => ShowInterestInProfessorEventAsCompany(professorEvent)" 
                                                                                                                                               style="cursor: pointer; font-size: 18px; color: goldenrod;"></i>
                                                                                                                                        }
                                                                                                                                    </div>
                                                                                                                                </td>
                                                                                                                            }
                                                                                                                        </tr>
                                                                                                                    }
                                                                                                                }
                                                                                                            </tbody>
                                                                                                        </table>
                                                                                                    </div>
                                                                                                }
                                                                                            </ul>




                                                                                        }
                                                                                    }

                                                                                    <button class="btn btn-danger mt-3" @onclick="CloseModalForCompanyAndProfessorEventTitles">Κλείσιμο</button>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <!-- Display full details of the selected event -->
                                                                                    @if (selectedEvent is CompanyEvent companyEventDetails)
                                                                                    {
                                                                                        <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                                                                            <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                                                                <div class="modal-content">
                                                                                                    <div class="modal-header">
                                                                                                        <h5 class="modal-title" style="color: #4682B4;">@companyEventDetails.CompanyEventTitle</h5>
                                                                                                        <button type="button" class="close" @onclick="CloseEventDetails">
                                                                                                            <span aria-hidden="true">&times;</span>
                                                                                                        </button>
                                                                                                    </div>
                                                                                                    <div class="modal-body">
                                                                                                        @if (companyEventDetails.Company.CompanyLogo != null)
                                                                                                        {
                                                                                                            <div class="form-group text-center">
                                                                                                                <img src="data:image/png;base64,@Convert.ToBase64String(companyEventDetails.Company.CompanyLogo)" 
                                                                                                                     class="rounded-circle img-fluid" 
                                                                                                                     style="width: 150px; height: 150px; object-fit: cover;" 
                                                                                                                     alt="Company Logo" />
                                                                                                            </div>
                                                                                                        }

                                                                                                        <div class="list-group">
                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Όνομα Εταιρίας</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                    <i class="fas fa-industry" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                                                    <span>@companyEventDetails.Company.CompanyName</span>
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Τίτλος Εκδήλωσης</label>
                                                                                                                <input type="text" class="form-control" value="@companyEventDetails.CompanyEventTitle" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Περιγραφή</label>
                                                                                                                <textarea class="form-control" rows="3" readonly>@companyEventDetails.CompanyEventDescription</textarea>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Ημερομηνία</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                    <i class="far fa-calendar-alt" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                                                    <span>@companyEventDetails.CompanyEventActiveDate.ToString("yyyy-MM-dd", new System.Globalization.CultureInfo("el-GR"))</span>
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Ώρα Εκδήλωσης</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                    <i class="far fa-clock" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                                                    <span>@companyEventDetails.CompanyEventTime.ToString(@"hh\:mm")</span>
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Τύπος Εκδήλωσης</label>
                                                                                                                <input type="text" class="form-control" value="@companyEventDetails.CompanyEventType" readonly />
                                                                                                            </div>

                                                                                                            @if (companyEventDetails.CompanyEventOtherOrganizerToBeVisible)
                                                                                                            {
                                                                                                                <div class="form-group">
                                                                                                                    <label style="font-weight: bold;">Άλλος Διοργανωτής</label>
                                                                                                                    <input type="text" class="form-control" value="@companyEventDetails.CompanyEventOtherOrganizer" readonly />
                                                                                                                </div>
                                                                                                            }

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Περιοχές Ενδιαφέροντος</label>
                                                                                                                <textarea class="form-control" rows="3" readonly>@companyEventDetails.CompanyEventAreasOfInterest</textarea>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Κατάσταση Εκδήλωσης</label>
                                                                                                                <input type="text" class="form-control" value="@companyEventDetails.CompanyEventStatus" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Υπεύθυνος Εκδήλωσης</label>
                                                                                                                <input type="text" class="form-control" value="@companyEventDetails.CompanyEventResponsiblePerson" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Email Υπεύθυνου</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                                                    <i class="fas fa-envelope" style="color: #4682B4; margin-right: 8px;"></i>
                                                                                                                    @if (!string.IsNullOrEmpty(companyEventDetails.CompanyEventResponsiblePersonEmail))
                                                                                                                    {
                                                                                                                        <a href="mailto:@companyEventDetails.CompanyEventResponsiblePersonEmail" 
                                                                                                                           style="color: #007bff; text-decoration: underline; word-break: break-all;">
                                                                                                                            @companyEventDetails.CompanyEventResponsiblePersonEmail
                                                                                                                        </a>
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        <span style="color: #6c757d;">Δεν υπάρχει email</span>
                                                                                                                    }
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Τηλέφωνο Υπεύθυνου</label>
                                                                                                                <input type="text" class="form-control" value="@companyEventDetails.CompanyEventResponsiblePersonTelephone" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Τμήμα Εταιρίας</label>
                                                                                                                <input type="text" class="form-control" value="@companyEventDetails.CompanyEventCompanyDepartment" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Διεύθυνση Email Εταιρίας</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                                                    <i class="fas fa-envelope" style="color: #4682B4; margin-right: 8px;"></i>
                                                                                                                    @if (!string.IsNullOrEmpty(companyEventDetails.CompanyEmailUsedToUploadEvent))
                                                                                                                    {
                                                                                                                        <a href="mailto:@companyEventDetails.CompanyEmailUsedToUploadEvent" 
                                                                                                                           style="color: #007bff; text-decoration: underline; word-break: break-all;">
                                                                                                                            @companyEventDetails.CompanyEmailUsedToUploadEvent
                                                                                                                        </a>
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        <span style="color: #6c757d;">Δεν υπάρχει email</span>
                                                                                                                    }
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Ημερομηνία Ανάρτησης Εκδήλωσης</label>
                                                                                                                <input type="text" class="form-control" 
                                                                                                                       value="@companyEventDetails.CompanyEventUploadedDate.ToString("yyyy-MM-dd", new System.Globalization.CultureInfo("el-GR"))" 
                                                                                                                       readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Περιοχή Εκδήλωσης</label>
                                                                                                                <input type="text" class="form-control" value="@companyEventDetails.CompanyEventPerifereiaLocation" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Δήμος Εκδήλωσης</label>
                                                                                                                <input type="text" class="form-control" value="@companyEventDetails.CompanyEventDimosLocation" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Τοποθεσία Εκδήλωσης</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                                                    <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                                                    @if (!string.IsNullOrEmpty(companyEventDetails.CompanyEventPlaceLocation))
                                                                                                                    {
                                                                                                                        <a href="https://www.google.com/maps/search/?api=1&query=@Uri.EscapeDataString(companyEventDetails.CompanyEventPlaceLocation)" 
                                                                                                                           target="_blank"
                                                                                                                           style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                                            @companyEventDetails.CompanyEventPlaceLocation
                                                                                                                        </a>
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        <span style="color: #6c757d;">Δεν έχει οριστεί τοποθεσία Εκδήλωσης ακόμη..</span>
                                                                                                                    }
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Ταχυδρομικός Κώδικας Εκδήλωσης</label>
                                                                                                                <input type="text" class="form-control" value="@companyEventDetails.CompanyEventPostalCodeLocation" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Μεταφορά Στον Χώρο Εκδήλωσης</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto; 
                                                                                                                     @(companyEventDetails.CompanyEventOfferingTransportToEventLocation.GetValueOrDefault() ? "color: #28a745;" : "color: #dc3545;")">
                                                                                                                    <i class="fas fa-car" style="margin-right: 8px;"></i>
                                                                                                                    <span>@(companyEventDetails.CompanyEventOfferingTransportToEventLocation.GetValueOrDefault() ? "Ναι" : "Όχι")</span>
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            @if (companyEventDetails.CompanyEventOfferingTransportToEventLocation ?? false)
                                                                                                            {
                                                                                                                <div class="form-group">
                                                                                                                    <label style="font-weight: bold;">Σημεία Εκκίνησης για Μεταφορά</label>
                                                                                                                    @if (!string.IsNullOrWhiteSpace(companyEventDetails.CompanyEventStartingPointLocationToTransportPeopleToEvent1))
                                                                                                                    {
                                                                                                                        <div class="form-group">
                                                                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                                <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                                                                <a href="https://www.google.com/maps/search/@Uri.EscapeDataString(companyEventDetails.CompanyEventStartingPointLocationToTransportPeopleToEvent1)"
                                                                                                                                   target="_blank"
                                                                                                                                   style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                                                    @companyEventDetails.CompanyEventStartingPointLocationToTransportPeopleToEvent1
                                                                                                                                </a>
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                    }
                                                                                                                    @if (!string.IsNullOrWhiteSpace(companyEventDetails.CompanyEventStartingPointLocationToTransportPeopleToEvent2))
                                                                                                                    {
                                                                                                                        <div class="form-group">
                                                                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                                <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                                                                <a href="https://www.google.com/maps/search/@Uri.EscapeDataString(companyEventDetails.CompanyEventStartingPointLocationToTransportPeopleToEvent2)"
                                                                                                                                   target="_blank"
                                                                                                                                   style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                                                    @companyEventDetails.CompanyEventStartingPointLocationToTransportPeopleToEvent2
                                                                                                                                </a>
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                    }
                                                                                                                    @if (!string.IsNullOrWhiteSpace(companyEventDetails.CompanyEventStartingPointLocationToTransportPeopleToEvent3))
                                                                                                                    {
                                                                                                                        <div class="form-group">
                                                                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                                <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                                                                <a href="https://www.google.com/maps/search/@Uri.EscapeDataString(companyEventDetails.CompanyEventStartingPointLocationToTransportPeopleToEvent3)"
                                                                                                                                   target="_blank"
                                                                                                                                   style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                                                    @companyEventDetails.CompanyEventStartingPointLocationToTransportPeopleToEvent3
                                                                                                                                </a>
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                    }
                                                                                                                </div>
                                                                                                            }
                                                                                                            <button class="btn btn-primary mt-3" @onclick="CloseEventDetails">Πίσω</button>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    }
                                                                                    else if (selectedEvent is ProfessorEvent professorEventDetails)
                                                                                    {
                                                                                        <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                                                                            <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                                                                <div class="modal-content">
                                                                                                    <div class="modal-header">
                                                                                                        <h5 class="modal-title" style="color: #4682B4;">@professorEventDetails.ProfessorEventTitle</h5>
                                                                                                        <button type="button" class="close" @onclick="CloseEventDetails">
                                                                                                            <span aria-hidden="true">&times;</span>
                                                                                                        </button>
                                                                                                    </div>
                                                                                                    <div class="modal-body">
                                                                                                        @if (professorEventDetails.Professor.ProfImage != null)
                                                                                                        {
                                                                                                            <div class="form-group text-center">
                                                                                                                <img src="data:image/png;base64,@Convert.ToBase64String(professorEventDetails.Professor.ProfImage)" 
                                                                                                                     class="rounded-circle img-fluid" 
                                                                                                                     style="width: 150px; height: 150px; object-fit: cover;" 
                                                                                                                     alt="Professor Image" />
                                                                                                            </div>
                                                                                                        }

                                                                                                        <div class="list-group">
                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Ονοματεπώνυμο Διοργανωτή</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                    <i class="fas fa-user" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                                                    <span>@professorEventDetails.Professor.ProfName @professorEventDetails.Professor.ProfSurname</span>
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Τίτλος Εκδήλωσης</label>
                                                                                                                <input type="text" class="form-control" value="@professorEventDetails.ProfessorEventTitle" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Περιγραφή</label>
                                                                                                                <textarea class="form-control" rows="3" readonly>@professorEventDetails.ProfessorEventDescription</textarea>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Ημερομηνία</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                    <i class="far fa-calendar-alt" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                                                    <span>@professorEventDetails.ProfessorEventActiveDate.ToString("yyyy-MM-dd")</span>
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Ώρα Εκδήλωσης</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                    <i class="far fa-clock" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                                                    <span>@professorEventDetails.ProfessorEventTimeOnly.ToString("HH:mm")</span>
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Τύπος Εκδήλωσης</label>
                                                                                                                <input type="text" class="form-control" value="@professorEventDetails.ProfessorEventType" readonly />
                                                                                                            </div>

                                                                                                            @if (professorEventDetails.ProfessorEventOtherOrganizerToBeVisible)
                                                                                                            {
                                                                                                                <div class="form-group">
                                                                                                                    <label style="font-weight: bold;">Άλλος Διοργανωτής</label>
                                                                                                                    <input type="text" class="form-control" value="@professorEventDetails.ProfessorEventOtherOrganizer" readonly />
                                                                                                                </div>
                                                                                                            }

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Περιοχές Ενδιαφέροντος</label>
                                                                                                                <textarea class="form-control" rows="3" readonly>@professorEventDetails.ProfessorEventAreasOfInterest</textarea>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Κατάσταση Εκδήλωσης</label>
                                                                                                                <input type="text" class="form-control" value="@professorEventDetails.ProfessorEventStatus" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Ονοματεπώνυμο Υπεύθυνου</label>
                                                                                                                <input type="text" class="form-control" value="@professorEventDetails.ProfessorEventResponsiblePerson" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Email Υπεύθυνου</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                                                    <i class="fas fa-envelope" style="color: #4682B4; margin-right: 8px;"></i>
                                                                                                                    @if (!string.IsNullOrEmpty(professorEventDetails.ProfessorEventResponsiblePersonEmail))
                                                                                                                    {
                                                                                                                        <a href="mailto:@professorEventDetails.ProfessorEventResponsiblePersonEmail" 
                                                                                                                           style="color: #007bff; text-decoration: underline; word-break: break-all;">
                                                                                                                            @professorEventDetails.ProfessorEventResponsiblePersonEmail
                                                                                                                        </a>
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        <span style="color: #6c757d;">Δεν υπάρχει email</span>
                                                                                                                    }
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Τηλέφωνο Υπεύθυνου</label>
                                                                                                                <input type="text" class="form-control" value="@professorEventDetails.ProfessorEventResponsiblePersonTelephone" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Πανεπιστήμιο</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                    <i class="fas fa-university" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                                                    <span>@professorEventDetails.Professor.ProfUniversity</span>
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Τμήμα Πανεπιστημίου</label>
                                                                                                                <input type="text" class="form-control" value="@professorEventDetails.ProfessorEventUniversityDepartment" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Email Καθηγητή</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                                                    <i class="fas fa-envelope" style="color: #4682B4; margin-right: 8px;"></i>
                                                                                                                    @if (!string.IsNullOrEmpty(professorEventDetails.Professor.ProfEmail))
                                                                                                                    {
                                                                                                                        <a href="mailto:@professorEventDetails.Professor.ProfEmail" 
                                                                                                                           style="color: #007bff; text-decoration: underline; word-break: break-all;">
                                                                                                                            @professorEventDetails.Professor.ProfEmail
                                                                                                                        </a>
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        <span style="color: #6c757d;">Δεν υπάρχει email</span>
                                                                                                                    }
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Περιφέρεια</label>
                                                                                                                <input type="text" class="form-control" value="@professorEventDetails.ProfessorEventPerifereiaLocation" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Δήμος</label>
                                                                                                                <input type="text" class="form-control" value="@professorEventDetails.ProfessorEventDimosLocation" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Τοποθεσία Εκδήλωσης</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                                                    <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                                                    @if (!string.IsNullOrEmpty(professorEventDetails.ProfessorEventPlaceLocation))
                                                                                                                    {
                                                                                                                        <a href="https://www.google.com/maps/search/?api=1&query=@Uri.EscapeDataString(professorEventDetails.ProfessorEventPlaceLocation)"
                                                                                                                           target="_blank"
                                                                                                                           style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                                            @professorEventDetails.ProfessorEventPlaceLocation
                                                                                                                        </a>
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        <span style="color: #6c757d;">Δεν έχει οριστεί τοποθεσία Εκδήλωσης ακόμη..</span>
                                                                                                                    }
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Ταχυδρομικός Κώδικας Τοποθεσίας</label>
                                                                                                                <input type="text" class="form-control" value="@professorEventDetails.ProfessorEventPostalCodeLocation" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Μεταφορά Στον Χώρο Εκδήλωσης</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto; 
                                                                                                                     @(professorEventDetails.ProfessorEventOfferingTransportToEventLocation.GetValueOrDefault() ? "color: #28a745;" : "color: #dc3545;")">
                                                                                                                    <i class="fas fa-car" style="margin-right: 8px;"></i>
                                                                                                                    <span>@(professorEventDetails.ProfessorEventOfferingTransportToEventLocation.GetValueOrDefault() ? "Ναι" : "Όχι")</span>
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            @if (professorEventDetails.ProfessorEventOfferingTransportToEventLocation ?? false)
                                                                                                            {
                                                                                                                <div class="form-group">
                                                                                                                    <label style="font-weight: bold;">Σημεία Εκκίνησης για Μεταφορά</label>
                                                                                                                    @if (!string.IsNullOrWhiteSpace(professorEventDetails.ProfessorEventStartingPointLocationToTransportPeopleToEvent1))
                                                                                                                    {
                                                                                                                        <div class="form-group">
                                                                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                                <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                                                                <a href="https://www.google.com/maps/search/@Uri.EscapeDataString(professorEventDetails.ProfessorEventStartingPointLocationToTransportPeopleToEvent1)"
                                                                                                                                   target="_blank"
                                                                                                                                   style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                                                    @professorEventDetails.ProfessorEventStartingPointLocationToTransportPeopleToEvent1
                                                                                                                                </a>
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                    }
                                                                                                                    @if (!string.IsNullOrWhiteSpace(professorEventDetails.ProfessorEventStartingPointLocationToTransportPeopleToEvent2))
                                                                                                                    {
                                                                                                                        <div class="form-group">
                                                                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                                <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                                                                <a href="https://www.google.com/maps/search/@Uri.EscapeDataString(professorEventDetails.ProfessorEventStartingPointLocationToTransportPeopleToEvent2)"
                                                                                                                                   target="_blank"
                                                                                                                                   style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                                                    @professorEventDetails.ProfessorEventStartingPointLocationToTransportPeopleToEvent2
                                                                                                                                </a>
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                    }
                                                                                                                    @if (!string.IsNullOrWhiteSpace(professorEventDetails.ProfessorEventStartingPointLocationToTransportPeopleToEvent3))
                                                                                                                    {
                                                                                                                        <div class="form-group">
                                                                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                                <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                                                                <a href="https://www.google.com/maps/search/@Uri.EscapeDataString(professorEventDetails.ProfessorEventStartingPointLocationToTransportPeopleToEvent3)"
                                                                                                                                   target="_blank"
                                                                                                                                   style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                                                    @professorEventDetails.ProfessorEventStartingPointLocationToTransportPeopleToEvent3
                                                                                                                                </a>
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                    }
                                                                                                                </div>
                                                                                                            }
                                                                                                            <button class="btn btn-primary mt-3" @onclick="CloseEventDetails">Πίσω</button>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    }                                                                                  
                                                                                }
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            }








                                                <!-- ΔΗΜΙΟΥΡΓΙΑ ΕΚΔΗΛΩΣΗΣ ΩΣ COMPANY USER-->
                                                <div class="mb-3 row-dark-gray">
                                                    <div class="d-flex justify-content-between align-items-center">
                                                        <label class="form-label" style="color: #FFF8DC;">• Δημιουργία Εκδήλωσης •</label>
                                                        <button class="btn btn-link" @onclick="ToggleFormVisibilityForUploadCompanyEvent">
                                                            @if (isUploadCompanyEventFormVisible)
                                                            {
                                                                <span>&#8722;</span> <!-- Minus sign -->
                                                            }
                                                            else
                                                            {
                                                                <span>&#43;</span> <!-- Plus sign -->
                                                            }
                                                        </button>
                                                    </div>
                                                </div>

                                                @if (isUploadCompanyEventFormVisible)
                                                {
                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="CompanyEventType">
                                                                <strong>Τύπος Εκδήλωσης</strong>
                                                                <span style="color: red;"> *</span>
                                                            </label>
                                                            <div class="input-group">
                                                                <select id="CompanyEventType" class="form-control @(showErrorMessageForUploadingCompanyEvent && string.IsNullOrWhiteSpace(companyEvent.CompanyEventType) ? "shake error" : "")" @bind="companyEvent.CompanyEventType">
                                                                    <option value="">-- Επιλέξτε τύπο εκδήλωσης --</option>
                                                                    <option value="Έκθεση">Έκθεση</option>
                                                                    <option value="Hackathon">Hackathon</option>
                                                                    <option value="Career Day">Career Day</option>
                                                                    <option value="Seminar">Seminar</option>
                                                                    <option value="Επίσκεψη">Επίσκεψη</option>
                                                                    <option value="Άλλο">Άλλο</option>
                                                                </select>
                                                                <div class="input-group-append">
                                                                    <span class="input-group-text">
                                                                        <i class="fas fa-chevron-down"></i>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        @if (showErrorMessageForUploadingCompanyEvent && string.IsNullOrWhiteSpace(companyEvent.CompanyEventType))
                                                        {
                                                           <div class="text-danger mt-1">Απαιτείται επιλογή Τύπου Θέσης.</div>
                                                        }
                                                    </div>

                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="CompanyEventOtherOrganizerToBeVisible"><strong>Θέλετε να προσθέσετε άλλον διοργανωτή;</strong><span style="color: red;"> *</span></label>
                                                            <div class="form-check">
                                                                <input type="radio" id="true" name="CompanyEventOtherOrganizerToBeVisible" class="form-check-input @(showErrorMessageForUploadingCompanyEvent && companyEvent.CompanyEventOtherOrganizerToBeVisible == null ? "error" : "")" 
                                                                       value="true" checked="@(companyEvent.CompanyEventOtherOrganizerToBeVisible == true)"
                                                                       @onchange="() => { companyEvent.CompanyEventOtherOrganizerToBeVisible = true; UpdateOrganizerVisibility(true); }" />
                                                                <label class="form-check-label" for="true">Ναι</label>
                                                            </div>
                                                            <div class="form-check">
                                                                <input type="radio" id="false" name="CompanyEventOtherOrganizerToBeVisible" class="form-check-input @(showErrorMessageForUploadingCompanyEvent && companyEvent.CompanyEventOtherOrganizerToBeVisible == null ? "error" : "")" 
                                                                       value="false" checked="@(companyEvent.CompanyEventOtherOrganizerToBeVisible == false)"
                                                                       @onchange="() => { companyEvent.CompanyEventOtherOrganizerToBeVisible = false; UpdateOrganizerVisibility(false); }" />
                                                                <label class="form-check-label" for="false">Όχι</label>
                                                            </div>
                                                        </div>
                                                        @if (showErrorMessageForUploadingCompanyEvent && companyEvent.CompanyEventOtherOrganizerToBeVisible == null)
                                                        {
                                                            <div class="text-danger mt-1">Επιλέξτε Ναι ή Όχι</div>
                                                        }
                                                    </div>

                                                    @if (companyEvent.CompanyEventOtherOrganizerToBeVisible)
                                                    {
                                                        <div class="row mb-3">
                                                            <div class="col-md-4">
                                                                <label for="CompanyEventOtherOrganizer"><strong>Διοργανωτής</strong><span style="color: red;"> *</span></label>
                                                                <div class="input-group">
                                                                    <input type="text" class="form-control @(showErrorMessageForUploadingCompanyEvent && string.IsNullOrWhiteSpace(companyEvent.CompanyEventOtherOrganizer) ? "shake error" : "")"
                                                                           @bind="companyEvent.CompanyEventOtherOrganizer" placeholder="Πληκτρολογείστε τον Διοργανωτή" />
                                                                    <div class="input-group-append">
                                                                        <span class="input-group-text">
                                                                            <i class="fas fa-user"></i>
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            @if (showErrorMessageForUploadingCompanyEvent && string.IsNullOrWhiteSpace(companyEvent.CompanyEventOtherOrganizer))
                                                            {
                                                               <div class="text-danger mt-1">Εισάγετε τον επιπλέον Διοργανωτή της Εκδήλωσης</div>
                                                            }
                                                        </div>
                                                    }



                                                    <!-- Areas of Interest Toggle -->
                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label @onclick="ToggleCheckboxesForAreasForCompanyEvent">
                                                                <strong>Περιοχές Ενδιαφέροντος</strong>
                                                                <span style="color: red;"> *</span>
                                                                <span class="light-cadetblue-text"> (Άνοιγμα/Κλείσιμο)</span>
                                                            </label>
                                                            <div id="toggleCheckboxesForAreasOfInterest" class="checkbox-containerAreasOfInterest" style="display: none;">
                                                                @if (Areas == null || !Areas.Any())
                                                                {
                                                                    <p>Φορτώνει...</p>
                                                                }
                                                                else
                                                                {
                                                                    <div class="d-flex flex-wrap">
                                                                        @foreach (var area in Areas)
                                                                        {
                                                                            <div class="form-check me-2 mb-2" style="flex-basis: 20%;">
                                                                                <input type="checkbox"
                                                                                       id="areaOfInterest_@area.Id"
                                                                                       class="form-check-input"
                                                                                       @onchange="(e) => OnCheckedChangedForCompanyEvent(e, area)"
                                                                                       checked="@IsSelectedAreaForCompanyEvent(area)" />
                                                                                <label class="form-check-label @(showErrorMessageForUploadingCompanyEvent && string.IsNullOrWhiteSpace(companyEvent.CompanyEventAreasOfInterest) ? "shake error" : "")" for="areaOfInterest_@area.Id">
                                                                                    @area.AreaName
                                                                                </label>
                                                                            </div>
                                                                        }
                                                                    </div>
                                                                }
                                                            </div>
                                                        </div>
                                                    </div>


                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="CompanyEventTitle"><strong>Τίτλος Εκδήλωσης</strong><span style="color: red;"> *</span></label>
                                                            <input type="text" id="CompanyEventTitle" class="form-control @(showErrorMessageForUploadingCompanyEvent && string.IsNullOrWhiteSpace(companyEvent.CompanyEventTitle) ? "shake error" : "")" @bind="companyEvent.CompanyEventTitle" @oninput="CheckCharacterLimitInEventTitleField" maxlength="120" placeholder="Πληκτρολογείστε τον τίτλο της εκδήλωσης" />
                                                            <small class="character-limit light-cadetblue-text">@remainingCharactersInEventTitleField/120</small>
                                                        </div>
                                                        @if (showErrorMessageForUploadingCompanyEvent && string.IsNullOrWhiteSpace(companyEvent.CompanyEventTitle))
                                                        {
                                                            <div class="text-danger mt-1">Απαιτείται ο Τίτλος της Εκδήλωσης</div>
                                                        }
                                                    </div>

                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="CompanyEventDescription"><strong>Περιγραφή Εκδήλωσης</strong> <span style="color: red;"> *</span></label>
                                                            <textarea id="CompanyEventDescription" class="form-control @(showErrorMessageForUploadingCompanyEvent && string.IsNullOrWhiteSpace(companyEvent.CompanyEventDescription) ? "shake error" : "")" @bind="companyEvent.CompanyEventDescription" @oninput="CheckCharacterLimitInCompanyEventDescription" maxlength="1000" placeholder="Πληκτρολογείστε την Περιγραφή της Εκδήλωσής σας"></textarea>
                                                            <small class="character-limit light-cadetblue-text">@remainingCharactersInCompanyEventDescription/1000</small>
                                                        </div>
                                                        @if (showErrorMessageForUploadingCompanyEvent && string.IsNullOrWhiteSpace(companyEvent.CompanyEventDescription))
                                                        {
                                                            <div class="text-danger mt-1">Απαιτείται η Περιγραφή της Εκδήλωσης</div>
                                                        }
                                                    </div>

                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="CompanyEventResponsiblePerson">Υπεύθυνος Εκδήλωσης (Ονοματεπώνυμο)<span style="font-style: italic; color: gray;"> (Προαιρετικό)</span></label>
                                                            <input type="text" id="CompanyEventResponsiblePerson" class="form-control" @bind="companyEvent.CompanyEventResponsiblePerson" />
                                                        </div>
                                                    </div>

                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="CompanyEventResponsiblePersonEmail">
                                                                Email Υπεύθυνου
                                                                <span style="font-style: italic; color: gray;"> (Προαιρετικό)</span>
                                                            </label>
                                                            <input type="email" id="CompanyEventResponsiblePersonEmail" class="form-control" 
                                                                   @bind="companyEvent.CompanyEventResponsiblePersonEmail" 
                                                                   placeholder="example@mail.com" />
                                                        </div>
                                                    </div>


                                                    <div class="row mb-3">
                                                    <div class="col-md-4">
                                                        <label for="CompanyEventResponsiblePersonTelephone">Τηλέφωνο Υπεύθυνου<span style="font-style: italic; color: gray;"> (Προαιρετικό)</span></label>
                                                        <div class="input-group">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-textfortelephone">+30</span>
                                                            </div>
                                                            <input type="tel" id="CompanyEventResponsiblePersonTelephone" class="form-control" 
                                                                   @bind="companyEvent.CompanyEventResponsiblePersonTelephone" placeholder="Τηλέφωνο Υπευθύνου" />
                                                        </div>
                                                    </div>
                                                </div>



                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="CompanyEventCompanyDepartment">Τμήμα Εταιρείας<span style="font-style: italic; color: gray;"> (Προαιρετικό)</span></label>
                                                            <input type="text" id="CompanyEventCompanyDepartment" class="form-control" @bind="companyEvent.CompanyEventCompanyDepartment" />
                                                        </div>
                                                    </div>

                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="CompanyEventDate">
                                                                <strong>Ημερομηνία Εκδήλωσης</strong>
                                                                <span style="color: red;">*</span>
                                                            </label>
                                                            <input type="date" id="CompanyEventDate" 
                                                                   class="form-control @(showErrorMessageForUploadingCompanyEvent && companyEvent.CompanyEventActiveDate.Date <= DateTime.Today ? "shake error" : "")" 
                                                                   value="@companyEvent.CompanyEventActiveDate.ToString("yyyy-MM-dd")"
                                                                   @onchange="HandleDateChange" />
                                                        </div>
                                                        @if (showErrorMessageForUploadingCompanyEvent && companyEvent.CompanyEventActiveDate.Date <= DateTime.Today)
                                                        {
                                                            <div class="text-danger mt-1">Η ημερομηνία πρέπει να είναι μεταγενέστερη της σημερινής ημερομηνίας.</div>
                                                        }
                                                        @if (hasExistingEventsOnSelectedDate)
                                                        {
                                                            <div class="text-info mt-1">
                                                                <i class="fas fa-info-circle"></i> Ενημέρωση: "Υπάρχουν ήδη <strong>@existingEventsCount</strong> εκδηλώσεις για αυτή την ημερομηνία."
                                                            </div>
                                                        }
                                                    </div>

                                                    <!-- Region Dropdown -->
                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="CompanyEventPerifereiaLocation">
                                                                <strong>Περιφέρεια</strong>
                                                                <span style="color: red;">*</span>
                                                            </label>
                                                            <div class="input-group">
                                                                <select id="CompanyEventPerifereiaLocation" class="form-control @(showErrorMessageForUploadingCompanyEvent && string.IsNullOrWhiteSpace(companyEvent.CompanyEventPerifereiaLocation) ? "shake error" : "")" @bind="companyEvent.CompanyEventPerifereiaLocation">
                                                                    <option value="">-- Επιλέξτε Περιφέρεια --</option>
                                                                    @foreach (var region in Regions)
                                                                    {
                                                                        <option value="@region">@region</option>
                                                                    }
                                                                </select>
                                                                <div class="input-group-append">
                                                                    <span class="input-group-text">
                                                                        <i class="fas fa-chevron-down"></i>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        @if (showErrorMessageForUploadingCompanyEvent && string.IsNullOrWhiteSpace(companyEvent.CompanyEventPerifereiaLocation))
                                                        {
                                                            <div class="text-danger mt-1">Απαιτείται η Περιφέρεια στην οποία θα πραγματοποιηθεί η Εκδήλωση</div>
                                                        }
                                                    </div>

                                                    <!-- Town Dropdown -->
                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="CompanyEventDimosLocation">
                                                                <strong>Δήμος</strong>
                                                                <span style="color: red;">*</span>
                                                            </label>
                                                            <div class="input-group">
                                                                <select id="CompanyEventDimosLocation" class="form-control @(showErrorMessageForUploadingCompanyEvent && string.IsNullOrWhiteSpace(companyEvent.CompanyEventDimosLocation) ? "shake error" : "")" @bind="companyEvent.CompanyEventDimosLocation">
                                                                    <option value="">-- Επιλέξτε Δήμο --</option>
                                                                    @foreach (var town in GetTownsForRegion(companyEvent.CompanyEventPerifereiaLocation))
                                                                    {
                                                                        <option value="@town">@town</option>
                                                                    }
                                                                </select>
                                                                <div class="input-group-append">
                                                                    <span class="input-group-text">
                                                                        <i class="fas fa-chevron-down"></i>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        @if (showErrorMessageForUploadingCompanyEvent && string.IsNullOrWhiteSpace(companyEvent.CompanyEventDimosLocation))
                                                        {
                                                            <div class="text-danger mt-1">Απαιτείται o Δήμος στον οποίο θα πραγματοποιηθεί η Εκδήλωση</div>
                                                        }
                                                    </div>


                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="CompanyEventPlaceLocation"><strong>Τοποθεσία Εκδήλωσης</strong><span style="color: red;"> *</span></label>
                                                            <input type="text" id="autocomplete" class="form-control @(showErrorMessageForUploadingCompanyEvent && string.IsNullOrWhiteSpace(companyEvent.CompanyEventPlaceLocation) ? "shake error" : "")" @bind="companyEvent.CompanyEventPlaceLocation" placeholder="Αναζήτηση χώρου εκδήλωσης " />
                                                        </div>
                                                        @if (showErrorMessageForUploadingCompanyEvent && string.IsNullOrWhiteSpace(companyEvent.CompanyEventPlaceLocation))
                                                        {
                                                            <div class="text-danger mt-1">Απαιτείται Τοποθεσία/Διεύθυνση του χώρου Εκδήλωσης</div>
                                                        }
                                                    </div>

                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="CompanyEventTime">
                                                                <strong>Ώρα Εκδήλωσης</strong>
                                                                <span style="color: red;">*</span>
                                                            </label>
                                                            <input type="time" 
                                                                   id="CompanyEventTime" 
                                                                   class="form-control @(showErrorMessageForUploadingCompanyEvent && (companyEvent.CompanyEventTimeOnly == TimeOnly.MinValue || IsTimeInRestrictedRangeWhenUploadEventAsCompany(companyEvent.CompanyEventTimeOnly)) ? "shake error" : "")" 
                                                                   @bind="companyEvent.CompanyEventTimeOnly" 
                                                                   min="06:00" 
                                                                   max="22:00" />
                                                        </div>
                                                        @if (showErrorMessageForUploadingCompanyEvent && companyEvent.CompanyEventTimeOnly == TimeOnly.MinValue)
                                                        {
                                                            <div class="text-danger mt-1">Η ώρα εκδήλωσης είναι υποχρεωτική.</div>
                                                        }
                                                        @if (showErrorMessageForUploadingCompanyEvent && IsTimeInRestrictedRangeWhenUploadEventAsCompany(companyEvent.CompanyEventTimeOnly))
                                                        {
                                                            <div class="text-danger mt-1">Η ώρα πρέπει να είναι μεταξύ 06:00 και 22:00.</div>
                                                        }
                                                    </div>




                                               
                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="CompanyEventPostalCodeLocation"><strong>Ταχυδρομικός Κώδικας</strong><span style="color: red;"> *</span></label>
                                                            <input type="text" id="CompanyEventPostalCodeLocation" class="form-control @(showErrorMessageForUploadingCompanyEvent && string.IsNullOrWhiteSpace(companyEvent.CompanyEventPostalCodeLocation) ? "shake error" : "")" @bind="companyEvent.CompanyEventPostalCodeLocation" placeholder="Πληκτρολογείστε τον ταχυδρομικό κώδικα" />
                                                        </div>
                                                        @if (showErrorMessageForUploadingCompanyEvent && string.IsNullOrWhiteSpace(companyEvent.CompanyEventPostalCodeLocation))
                                                        {
                                                            <div class="text-danger mt-1">Απαιτείται Ταχυδρομικός Κώδικας.</div>
                                                        }
                                                    </div>

                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="CompanyEventOfferingTransportToEventLocation">
                                                                <strong>Παροχή Μεταφοράς προς/από Χώρο Εκδήλωσης;</strong>
                                                                <span style="color: red;"> *</span>
                                                            </label>
                                                            <select id="CompanyEventOfferingTransportToEventLocation" 
                                                                    class="form-control @(showErrorMessageForUploadingCompanyEvent && companyEvent.CompanyEventOfferingTransportToEventLocation == null ? "shake error" : "")"
                                                                    @onchange="OnTransportOptionChange">
                                                                <option value="">-- Επιλέξτε --</option>
                                                                <option value="true">Ναι</option>
                                                                <option value="false">Όχι</option>
                                                            </select>
                                                        </div>
                                                        @if (showErrorMessageForUploadingCompanyEvent && companyEvent.CompanyEventOfferingTransportToEventLocation == null)
                                                        {
                                                            <div class="text-danger mt-1">Απαιτείται Επιλογή Παροχής Μεταφοράς προς/από τον χώρο της Εκδήλωσης.</div>
                                                        }
                                                    </div>


                                                    @if (companyEvent.CompanyEventOfferingTransportToEventLocation == true)
                                                    {
                                                        <div class="row mb-3">
                                                            <div class="col-md-4">
                                                                <label for="CompanyEventStartingPointLocationToTransportPeopleToEvent1">
                                                                    <strong>Σημείο Εκκίνησης 1 για μεταφορά προς Εκδήλωση</strong> 
                                                                    <span style="color: red;"> *</span>
                                                                </label>
                                                                <input type="text" id="autocomplete2" 
                                                                       class="form-control @(showErrorMessageForUploadingCompanyEvent && !HasAtLeastOneStartingPointWhenUploadEventAsCompany() ? "shake error" : "")" 
                                                                       @bind="companyEvent.CompanyEventStartingPointLocationToTransportPeopleToEvent1" 
                                                                       placeholder="Αναζήτηση 1ου σημείου εκκίνησης" />
                                                            </div>
                                                        </div>
                                                        <div class="row mb-3">
                                                            <div class="col-md-4">
                                                                <label for="CompanyEventStartingPointLocationToTransportPeopleToEvent2">
                                                                    <strong>Σημείο Εκκίνησης 2 για μεταφορά προς Εκδήλωση</strong>
                                                                </label>
                                                                <input type="text" id="autocomplete3" 
                                                                       class="form-control" 
                                                                       @bind="companyEvent.CompanyEventStartingPointLocationToTransportPeopleToEvent2" 
                                                                       placeholder="Αναζήτηση 2ου σημείου εκκίνησης (προαιρετικό)" />
                                                            </div>
                                                        </div>
                                                        <div class="row mb-3">
                                                            <div class="col-md-4">
                                                                <label for="CompanyEventStartingPointLocationToTransportPeopleToEvent3">
                                                                    <strong>Σημείο Εκκίνησης 3 για μεταφορά προς Εκδήλωση</strong>
                                                                </label>
                                                                <input type="text" id="autocomplete4" 
                                                                       class="form-control" 
                                                                       @bind="companyEvent.CompanyEventStartingPointLocationToTransportPeopleToEvent3" 
                                                                       placeholder="Αναζήτηση 3ου σημείου εκκίνησης (προαιρετικό)" />
                                                            </div>
                                                        </div>
    
                                                        @if (showErrorMessageForUploadingCompanyEvent && !HasAtLeastOneStartingPointWhenUploadEventAsCompany())
                                                        {
                                                            <div class="text-danger mt-1">Πρέπει να ορίσετε τουλάχιστον 1 σημείο εκκίνησης.</div>
                                                        }
                                                    }

                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="CompanyEventAttachmentFile">Συννημένο Αρχείο Εκδήλωσης<span style="font-style: italic; color: gray;"> (Προαιρετικό)</span></label>
                                                            <InputFile id="CompanyEventAttachmentFile" class="form-control" OnChange="UploadCompanyEventAttachmentFile" />
                                                        </div>
                                                    </div>


                                                    <!-- Buttons to save the event -->
                                                    <div class="row mb-3">
                                                        <div class="col-md-12">
                                                            <button class="modern-button" style="background-color: #007bff; color: white; display: inline-flex; align-items: center;" @onclick="HandleTemporarySaveCompanyEvent">
                                                                <i class="fa-regular fa-floppy-disk" style="margin-right: 8px;"></i>Προσωρινή Αποθήκευση Εκδήλωσης
                                                            </button>
                                                            <button class="modern-button" style="background-color: #28a745; color: white; display: inline-flex; align-items: center;" @onclick="HandlePublishSaveCompanyEvent">
                                                                <i class="fa-solid fa-floppy-disk" style="margin-right: 8px;"></i>Δημοσίευση Εκδήλωσης
                                                            </button>
                                                        </div>
                                                    </div>


                                                    @if (!isFormValidToSaveEventAsCompany)
                                                    {
                                                            <div class="alert alert-danger" role="alert">
                                                                Συμπληρώστε Όλα Τα Υποχρεωτικά Πεδία και Προσπαθήστε Ξανά
                                                            </div>
                                                    }
                                                    @if (!string.IsNullOrEmpty(saveEventAsCompanyMessage))
                                                    {
                                                            <div class="alert @(isSaveAnnouncementAsCompanySuccessful ? "alert-success" : "alert-danger")" role="alert">
                                                                    @saveEventAsCompanyMessage
                                                             </div>
                                                    }
                                                }


                                                <!-- VIEW UPLOADED EVENTS AS COMPANY -->
                                                <div class="mb-3 row-dark-gray mt-4">
                                                    <div class="d-flex justify-content-between align-items-center">
                                                        <label class="form-label" style="color: #FFF8DC;">• Οι Εκδηλώσεις μου •</label>
                                                        <button class="btn btn-link" @onclick="ToggleUploadedCompanyEventsVisibility">
                                                            @if (isUploadedEventsVisible)
                                                            {
                                                                <span>&#8722;</span> <!-- Minus sign -->
                                                            }
                                                            else
                                                            {
                                                                <span>&#43;</span> <!-- Plus sign -->
                                                            }
                                                        </button>
                                                    </div>
                                                </div>
                                                @if (isUploadedEventsVisible)
                                                {
                                                    <div class="col-md-2">
                                                        <label for="statusFilterForAnnouncements" style="color: #4682b4; font-size: 15px;"><strong>Φίλτρο Εμφάνισης</strong></label>
                                                        <div class="input-group">
                                                            <select id="statusFilterForAnnouncements" class="form-control form-control-sm" 
                                                                    @onchange="HandleStatusFilterChangeForCompanyEvents">
                                                                <option value="Όλα">Όλες</option>
                                                                <option value="Δημοσιευμένη">Δημοσιευμένες</option>
                                                                <option value="Μη Δημοσιευμένη">Μη Δημοσιευμένες</option>
                                                            </select>

                                                            <div class="input-group-append">
                                                                <span class="input-group-text">
                                                                    <i class="fas fa-chevron-down"></i>
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-2">
                                                        <label style="color: #4682b4; font-size: 15px; display: block;"><strong>Αποτελέσματα ανά Σελίδα</strong></label>
                                                        <div class="input-group" style="max-width: 65px;">
                                                            <select class="form-control form-control-sm" @onchange="OnPageSizeChange_SeeMyUploadedEventsAsCompany">
                                                                @foreach (var option in pageSizeOptions_SeeMyUploadedEventsAsCompany)
                                                                {
                                                                    <option value="@option" selected="@(CompanyEventsPerPage == option)">@option</option>
                                                                }
                                                            </select>
                                                            <div class="input-group-append">
                                                                <span class="input-group-text">
                                                                    <i class="fas fa-chevron-down"></i>
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <br/>
                                                    <div class="col-md-2">
                                                        @if (selectedStatusFilterForEventsAsCompany == "Όλα")
                                                        {
                                                            <span><strong>Σύνολο: </strong>@totalCountEventsAsCompany</span>
                                                        }
                                                        else if (selectedStatusFilterForEventsAsCompany == "Δημοσιευμένη")
                                                        {
                                                            <span><strong>Σύνολο: </strong>@publishedCountEventsAsCompany</span>
                                                        }
                                                        else if (selectedStatusFilterForEventsAsCompany == "Μη Δημοσιευμένη")
                                                        {
                                                            <span><strong>Σύνολο: </strong>@unpublishedCountEventsAsCompany</span>
                                                        }
                                                    </div>

                                                    <div style="max-width: auto; margin-left: 0;">
                                                        <div class="table-responsive">
                                                            <table class="table table-striped">
                                                                <thead>
                                                                    <tr style="border: 2px solid black; background-color: lightgray;">
                                                                        <th style="border: 2px solid black;"><i class="fa-solid fa-key fa-sm" style="color: #9D00FF;"></i> Κωδικός Θέσης</th>
                                                                        <th style="border: 2px solid black;">
                                                                            <i class="fa-solid fa-font fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                            Τίτλος
                                                                        </th>
                                                                        <th style="border: 2px solid black;">
                                                                            <i class="fa-solid fa-file-lines fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                            Περιγραφή
                                                                        </th>
                                                                        <th style="border: 2px solid black;">
                                                                            <i class="fa-solid fa-calendar-days fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                            Ημερομηνία Δημοσίευσης
                                                                        </th>
                                                                        <th style="border: 2px solid black;">
                                                                            <i class="fa-solid fa-arrows-up-down fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                            Κατάσταση
                                                                        </th>
                                                                        <th style="width: 300px; border: 2px solid black;">
                                                                            <i class="fa-solid fa-hand fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                            Ενέργειες
                                                                        </th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    @if (FilteredCompanyEvents != null && FilteredCompanyEvents.Any())
                                                                    {
                                                                        @foreach (var companyevent in GetPaginatedCompanyEvents())
                                                                        {
                                                                            <tr style="background-color: @(companyevent.CompanyEventStatus == "Δημοσιευμένη" ? "lightblue" : "lightcoral");">
                                                                                <td style="color: #9D00FF;">
                                                                                    @companyevent.RNGForEventUploadedAsCompany_HashedAsUniqueID
                                                                                </td>
                                                                                <td>@companyevent.CompanyEventTitle</td>
                                                                                <td style="width: 30%;">
                                                                                    @if (companyevent.CompanyEventDescription.Length > 50) 
                                                                                    {
                                                                                        @companyevent.CompanyEventDescription.Substring(0, 50)
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        @companyevent.CompanyEventDescription
                                                                                    }
                                                                                </td>
                                                                                <td>@companyevent.CompanyEventUploadedDate.ToString("dd/MM/yyyy")</td>
                                                                                <td>@companyevent.CompanyEventStatus</td>
                                                                                <td>
                                                                                    <!-- Trash button -->
                                                                                    <button class="btn btn-danger me-2" @onclick="() => DeleteCompanyEvent(companyevent.Id)">
                                                                                        <i class="fas fa-trash icon-button"></i>
                                                                                    </button>

                                                                                    <!-- Arrow down/up buttons -->
                                                                                    @if (companyevent.CompanyEventStatus == "Δημοσιευμένη")
                                                                                    {
                                                                                        <button class="btn btn-secondary me-2" @onclick='async () => await ChangeCompanyEventStatus(companyevent.Id, "Μη Δημοσιευμένη")' title="Αποδημοσίευση Ανακοίνωσης">
                                                                                            <i class="fas fa-arrow-down icon-button" style="color: yellow;"></i>
                                                                                        </button>
                                                                                    }
                                                                                    else if (companyevent.CompanyEventStatus == "Μη Δημοσιευμένη")
                                                                                    {
                                                                                        <button class="btn btn-secondary me-2" @onclick='async () => await ChangeCompanyEventStatus(companyevent.Id, "Δημοσιευμένη")' title="Δημοσίευση Ανακοίνωσης">
                                                                                            <i class="fas fa-arrow-up icon-button" style="color: cornflowerblue;"></i>
                                                                                        </button>

                                                                                        <!-- Pencil icon button to edit the announcement -->
                                                                                        <button class="btn btn-secondary me-2" @onclick="() => OpenEditModalForCompanyEvent(companyevent)" title="Επεξεργασία Ανακοίνωσης">
                                                                                            <i class="fas fa-pencil-alt icon-button"></i>
                                                                                        </button>
                                                                                    }
                                                                                    <!-- User icon button -->
                                                                                    <button class="btn  btn-secondary me-2" @onclick="() => ShowInterestedStudentsInCompanyEvent(companyevent.RNGForEventUploadedAsCompany)" title="Ενδιαφερόμενοι Φοιτητές">
                                                                                        <i class="fa-solid fa-graduation-cap icon-button"></i>
                                                                                    </button>
                                                                                    <button class="btn btn-secondary me-2" @onclick="async () => await ShowInterestedProfessorsInCompanyEvent(companyevent.RNGForEventUploadedAsCompany)" title="Ενδιαφερόμενοι Καθηγητές">
                                                                                        <i class="fa-solid fa-user-tie icon-button"></i>
                                                                                    </button>
                                                                                </td>
                                                                            </tr>

                                                                            @if (selectedEventIdForStudents == companyevent.RNGForEventUploadedAsCompany)
                                                                            {
                                                                                @if (InterestedStudents.Any())
                                                                                {
                                                                                    <br/>
                                                                                    <tr>
                                                                                        <td colspan="9" style="padding: 0;">
                                                                                            <div style="display: flex; justify-content: space-between; align-items: center; height: 24px; line-height: 24px; width: 100%;">
                                                                                                <i class="fa-solid fa-graduation-cap" style="font-size: 18px; color: #0d6efd;"></i>
                                                                                                <label class="form-label" style="color: #0d6efd; font-weight: bold; font-size: 18px; margin: 0;">Λεπτομέρειες Ενδιαφερόμενων Φοιτητών</label>
                                                                                                <i class="fa-solid fa-graduation-cap" style="font-size: 18px; color: #0d6efd;"></i>
                                                                                            </div>
                                                                                        </td>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td colspan="6">
                                                                                            <div class="table-responsive mt-2" style="background-color: white; padding: 10px; border-radius: 5px;"> 
                    
                                                                                                <!-- Modern Download Button -->
                                                                                                <button class="modern-button" @onclick="DownloadStudentListForInterestInCompanyEventAsCompany">
                                                                                                    <i class="fas fa-download"></i> Λήψη Λίστας Ενδιαφερόμενων Φοιτητών
                                                                                                </button>


                                                                                                <table class="table table-striped">
                                                                                                    <thead>
                                                                                                        <tr style="border: 1px solid darkblue;">
                                                                                                            <th style="border: 1px solid darkblue;">
                                                                                                                <i class="fa-solid fa-user fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                                Ονοματεπώνυμο
                                                                                                            </th>
                                                                                                            <th style="border: 1px solid darkblue;">
                                                                                                                <i class="fa-solid fa-phone fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                                Τηλέφωνο
                                                                                                            </th>
                                                                                                            <th style="border: 1px solid darkblue;">
                                                                                                                <i class="fa-solid fa-envelope fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                                Email
                                                                                                            </th>
                                                                                                            <th style="border: 1px solid darkblue;">
                                                                                                                <i class="fa-solid fa-bus fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                                Χρειάζεται Μεταφορά Προς/Από Εκδήλωση
                                                                                                            </th>
                                                                                                            <th style="border: 1px solid darkblue;">
                                                                                                                <i class="fa-solid fa-map-marker-alt fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                                Σημείο Μεταφοράς
                                                                                                            </th>
                                                                                                        </tr>
                                                                                                    </thead>
                                                                                                    <tbody>
                                                                                                    @if (studentDataCache == null)
                                                                                                    {
                                                                                                        <tr>
                                                                                                            <td colspan="5" class="text-center">
                                                                                                                <div class="spinner-border text-primary" role="status">
                                                                                                                    <span class="sr-only">Φόρτωση...</span>
                                                                                                                </div>
                                                                                                                <p>Φόρτωση δεδομένων φοιτητών...</p>
                                                                                                            </td>
                                                                                                        </tr>
                                                                                                    }
                                                                                                    else if (InterestedStudents != null && InterestedStudents.Any())
                                                                                                    {
                                                                                                        @foreach (var application in InterestedStudents)
                                                                                                        {
                                                                                                            var student = studentDataCache.TryGetValue(application.StudentEmailShowInterestForEvent, out var s) ? s : null;

                                                                                                            <tr>
                                                                                                                <td>
                                                                                                                    <a href="#" @onclick="() => ShowStudentDetailsAtCompanyEventInterest(application)">
                                                                                                                        @(student != null ? $"{student.Name} {student.Surname}" : "Δε βρέθηκε")
                                                                                                                    </a>
                                                                                                                </td>
                                                                                                                <td>
                                                                                                                    <i class="fas fa-phone-alt"></i> @(student?.Telephone ?? "-")
                                                                                                                </td>
                                                                                                                <td>
                                                                                                                    <i class="fas fa-envelope"></i> @application.StudentEmailShowInterestForEvent
                                                                                                                </td>
                                                                                                                <td>@application.StudentTransportNeedWhenShowInterestForCompanyEvent</td>
                                                                                                                <td>
                                                                                                                    @if (application.StudentTransportNeedWhenShowInterestForCompanyEvent == "Όχι")
                                                                                                                    {
                                                                                                                        <span> - </span>
                                                                                                                    }
                                                                                                                    else if (!string.IsNullOrEmpty(application.StudentTransportChosenLocationWhenShowInterestForCompanyEvent))
                                                                                                                    {
                                                                                                                        <div class="d-flex align-items-center">
                                                                                                                            <i class="fas fa-map-marker-alt text-danger mr-2"></i>
                                                                                                                            <a href="https://www.google.com/maps/search/?api=1&query=@Uri.EscapeDataString(application.StudentTransportChosenLocationWhenShowInterestForCompanyEvent)"
                                                                                                                               target="_blank"
                                                                                                                               class="text-primary">
                                                                                                                                @application.StudentTransportChosenLocationWhenShowInterestForCompanyEvent
                                                                                                                            </a>
                                                                                                                        </div>
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        <span class="text-muted">N/A</span>
                                                                                                                    }
                                                                                                                </td>
                                                                                                            </tr>
                                                                                                        }
                                                                                                    }
                                                                                                    else
                                                                                                    {
                                                                                                        <tr>
                                                                                                            <td colspan="5" class="text-center text-danger">
                                                                                                                <strong>Καμία Εκδήλωση Ενδιαφέροντος από Φοιτητές ακόμη</strong>
                                                                                                            </td>
                                                                                                        </tr>
                                                                                                    }
                                                                                                </tbody>
                                                                                                </table>
                                                                                            </div>
                                                                                        </td>
                                                                                    </tr>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <tr>
                                                                                        <td colspan="6" class="text-center">
                                                                                            <strong style="color: darkred;">
                                                                                                Δεν Υπάρχει Εκδήλωση Ενδιαφέροντος Ακόμη από Φοιτητές...
                                                                                            </strong>
                                                                                        </td>
                                                                                    </tr>
                                                                                }
                                                                            }
                                                                            @if (selectedEventIdForProfessors == companyevent.RNGForEventUploadedAsCompany)
                                                                            {
                                                                                @if (filteredProfessorInterestForCompanyEvents.Any())
                                                                                {
                                                                                    <br/>
                                                                                    <tr>
                                                                                        <td colspan="9" style="padding: 0;">
                                                                                            <div style="display: flex; justify-content: space-between; align-items: center; height: 24px; line-height: 24px; width: 100%;">
                                                                                                <i class="fa-solid fa-user-tie" style="font-size: 18px; color: #0d6efd;"></i>
                                                                                                <label class="form-label" style="color: #0d6efd; font-weight: bold; font-size: 18px; margin: 0;">Λεπτομέρειες Ενδιαφερόμενων Καθηγητών</label>
                                                                                                <i class="fa-solid fa-user-tie" style="font-size: 18px; color: #0d6efd;"></i>
                                                                                            </div>
                                                                                        </td>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td colspan="6">
                                                                                            <div class="table-responsive mt-2" style="background-color: white; padding: 10px; border-radius: 5px;">

                                                                                                <!-- Modern Download Button -->
                                                                                                <button class="modern-button" @onclick="DownloadProfessorListForInterestInCompanyEventAsCompany">
                                                                                                    <i class="fas fa-download"></i> Λήψη Λίστας Ενδιαφερόμενων Καθηγητών
                                                                                                </button>

                                                                                                <table class="table table-striped">
                                                                                                    <thead>
                                                                                                        <tr style="border: 1px solid darkblue;">
                                                                                                            <th style="border: 1px solid darkblue;">
                                                                                                                <i class="fa-solid fa-user fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                                Ονοματεπώνυμο
                                                                                                            </th>
                                                                                                            <th style="border: 1px solid darkblue;">
                                                                                                                <i class="fa-solid fa-phone fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                                Τηλέφωνο Εργασίας
                                                                                                            </th>
                                                                                                            <th style="border: 1px solid darkblue;">
                                                                                                                <i class="fa-solid fa-envelope fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                                Email
                                                                                                            </th>
                                                                                                        </tr>
                                                                                                    </thead>
                                                                                                    <tbody>
                                                                                                        @foreach (var interest in filteredProfessorInterestForCompanyEvents)
                                                                                                        {
                                                                                                            var professor = professorDataCache.TryGetValue(interest.ProfessorEmailShowInterestForCompanyEvent, out var p) ? p : null;
                                                                                                            <tr>
                                                                                                                <td>
                                                                                                                    <a href="#" @onclick="() => ShowProfessorDetailsAtCompanyEventInterest(interest)">
                                                                                                                        @($"{professor?.ProfName} {professor?.ProfSurname}")
                                                                                                                    </a>
                                                                                                                </td>
                                                                                                                <td>
                                                                                                                    <i class="fas fa-phone-alt"></i> @professor?.ProfWorkTelephone
                                                                                                                </td>
                                                                                                                <td>
                                                                                                                    <i class="fas fa-envelope"></i> @interest.ProfessorEmailShowInterestForCompanyEvent
                                                                                                                </td>
                                                                                                            </tr>
                                                                                                        }
                                                                                                    </tbody>
                                                                                                </table>
                                                                                            </div>
                                                                                        </td>
                                                                                    </tr>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <tr>
                                                                                        <td colspan="6" class="text-center">
                                                                                            <strong style="color: darkred;">
                                                                                                Δεν Υπάρχει Εκδήλωση Ενδιαφέροντος Ακόμη από Καθηγητές...
                                                                                            </strong>
                                                                                        </td>
                                                                                    </tr>
                                                                                }
                                                                            }

                                                                        }
                                                                    }
                                                                    else
                                                                    {
                                                                        <tr>
                                                                            <td colspan="7" class="text-center" style="font-weight: bold; color: red;">Δεν υπάρχουν Εκδηλώσεις Ακόμη</td>
                                                                        </tr>
                                                                    }
                                                                </tbody>
                                                            </table>
                                                            <br/>
                                                            <!-- Pagination Controls -->
                                                            <div class="d-flex justify-content-center align-items-center mt-3 gap-1">
                                                                <!-- First Page (<<) -->
                                                                <span class="pagination-item @(currentPageForCompanyEvents == 1 ? "disabled" : "")" 
                                                                      @onclick="@(() => GoToFirstPageForCompanyEvents())">
                                                                    &lt;&lt;
                                                                </span>
        
                                                                <!-- Previous Page (<) -->
                                                                <span class="pagination-item @(currentPageForCompanyEvents == 1 ? "disabled" : "")" 
                                                                      @onclick="@(() => PreviousPageForCompanyEvents())">
                                                                    &lt;
                                                                </span>
        
                                                                <!-- Page Numbers -->
                                                                @foreach (var pageNum in GetVisiblePagesForCompanyEvents())
                                                                {
                                                                    @if (pageNum == -1)
                                                                    {
                                                                        <span class="pagination-ellipsis">...</span>
                                                                    }
                                                                    else
                                                                    {
                                                                        <span class="pagination-item @(pageNum == currentPageForCompanyEvents ? "active" : "")" 
                                                                              @onclick="@(() => GoToPageForCompanyEvents(pageNum))">
                                                                            @pageNum
                                                                        </span>
                                                                    }
                                                                }
        
                                                                <!-- Next Page (>) -->
                                                                <span class="pagination-item @(currentPageForCompanyEvents == totalPagesForCompanyEvents_CompanyEventsToSee ? "disabled" : "")" 
                                                                      @onclick="@(() => NextPageForCompanyEvents())">
                                                                    &gt;
                                                                </span>
        
                                                                <!-- Last Page (>>) -->
                                                                <span class="pagination-item @(currentPageForCompanyEvents == totalPagesForCompanyEvents_CompanyEventsToSee ? "disabled" : "")" 
                                                                      @onclick="@(() => GoToLastPageForCompanyEvents())">
                                                                    &gt;&gt;
                                                                </span>
        
                                                                <!-- Page counter -->
                                                                <span class="ms-3">Σελίδα @currentPageForCompanyEvents από @totalPagesForCompanyEvents_CompanyEventsToSee</span>
                                                            </div>
                                                            <br/>
                                                            <br/>
                                                        </div>
                                                    </div>
                                                }

                                                @if (showModal && selectedStudentToShowDetailsForInterestinCompanyEvent != null && selectedStudentFromCache != null)
                                                {
                                                    <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                                        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h5 class="modal-title" style="color: #4682B4;">
                                                                        @($"{selectedStudentFromCache.Name} {selectedStudentFromCache.Surname}")
                                                                    </h5>
                                                                    <button type="button" class="close" aria-label="Close" @onclick="CloseStudentDetailsModal">
                                                                        <span aria-hidden="true">&times;</span>
                                                                    </button>
                                                                </div>
                                                                <div class="modal-body">
                                                                    <!-- Profile Picture -->
                                                                    <div class="text-center mb-4">
                                                                        @if (selectedStudentFromCache.Image != null)
                                                                        {
                                                                            <img src="data:image/png;base64,@Convert.ToBase64String(selectedStudentFromCache.Image)" 
                                                                                 alt="Φωτογραφία Φοιτητή" 
                                                                                 style="max-width: 150px; max-height: 150px; border-radius: 50%; object-fit: cover; border: 3px solid #ddd;" />
                                                                        }
                                                                        else
                                                                        {
                                                                            <img src="path/to/default/profile/image.png" 
                                                                                 alt="Default Profile Picture" 
                                                                                 style="max-width: 150px; max-height: 150px; border-radius: 50%; object-fit: cover; border: 3px solid #ddd;" />
                                                                        }
                                                                    </div>

                                                                    <!-- Student Details -->
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Επίπεδο Σπουδών</label>
                                                                        <div class="form-control d-flex align-items-center">
                                                                            <i class="fas fa-graduation-cap mr-2"></i>
                                                                            <span>@selectedStudentFromCache.LevelOfDegree</span>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Όνοματεπώνυμο</label>
                                                                        <div class="form-control d-flex align-items-center">
                                                                            <i class="fas fa-user mr-2 text-primary"></i>
                                                                            <span>@($"{selectedStudentFromCache.Name} {selectedStudentFromCache.Surname}")</span>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Πανεπιστήμιο</label>
                                                                        <div class="form-control d-flex align-items-center">
                                                                            <i class="fas fa-university mr-2 text-primary"></i>
                                                                            <span>@selectedStudentFromCache.University</span>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Τμήμα</label>
                                                                        <div class="form-control d-flex align-items-center">
                                                                            <i class="fas fa-building mr-2"></i>
                                                                            <span>@selectedStudentFromCache.Department</span>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Αριθμός Μητρώου</label>
                                                                        <div class="form-control d-flex align-items-center">
                                                                            <i class="fas fa-id-card mr-2 text-info"></i>
                                                                            <span>@selectedStudentFromCache.RegNumber</span>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Email</label>
                                                                        <div class="form-control d-flex align-items-center">
                                                                            <i class="fas fa-envelope mr-2 text-primary"></i>
                                                                            <span>@selectedStudentFromCache.Email</span>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Τηλέφωνο</label>
                                                                        <div class="form-control d-flex align-items-center">
                                                                            <i class="fas fa-phone mr-2 text-success"></i>
                                                                            <span>@(selectedStudentFromCache.Telephone ?? "N/A")</span>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Έτος Σπουδών</label>
                                                                        <div class="form-control d-flex align-items-center">
                                                                            <i class="fas fa-calendar-alt mr-2 text-info"></i>
                                                                            <span>@selectedStudentFromCache.StudyYear</span>
                                                                        </div>
                                                                    </div>

                                                                    <!-- Transport Info from Application -->
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Μεταφορική Ανάγκη για Εκδήλωση</label>
                                                                        <div class="form-control d-flex align-items-center">
                                                                            <i class="fas fa-bus mr-2"></i>
                                                                            <span>@selectedStudentToShowDetailsForInterestinCompanyEvent.StudentTransportNeedWhenShowInterestForCompanyEvent</span>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Επιλεγμένη Τοποθεσία Μεταφοράς</label>
                                                                        <div class="form-control d-flex align-items-center">
                                                                            <i class="fas fa-map-marker-alt mr-2 text-danger"></i>
                                                                            <span>@selectedStudentToShowDetailsForInterestinCompanyEvent.StudentTransportChosenLocationWhenShowInterestForCompanyEvent</span>
                                                                        </div>
                                                                    </div>

                                                                    <!-- Address -->
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Μόνιμη Διεύθυνση</label>
                                                                        <div class="form-control d-flex align-items-center" style="background-color: #fff;">
                                                                            <i class="fas fa-map-marker-alt mr-2 text-danger"></i>
                                                                            @if (!string.IsNullOrEmpty(selectedStudentFromCache.PermanentAddress))
                                                                            {
                                                                                <a href="https://www.google.com/maps/search/?api=1&query=@Uri.EscapeDataString(selectedStudentFromCache.PermanentAddress)"
                                                                                   target="_blank"
                                                                                   class="text-primary text-decoration-underline">
                                                                                    @selectedStudentFromCache.PermanentAddress
                                                                                </a>
                                                                            }
                                                                            else
                                                                            {
                                                                                <span class="text-muted">N/A</span>
                                                                            }
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Μόνιμη Περιοχή</label>
                                                                        <div class="form-control d-flex align-items-center">
                                                                            <i class="fas fa-map-marked-alt mr-2"></i>
                                                                            <span>@selectedStudentFromCache.PermanentRegion</span>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Μόνιμος Τόπος</label>
                                                                        <div class="form-control d-flex align-items-center">
                                                                            <i class="fas fa-city mr-2"></i>
                                                                            <span>@selectedStudentFromCache.PermanentTown</span>
                                                                        </div>
                                                                    </div>

                                                                    <!-- LinkedIn -->
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">LinkedIn Προφίλ</label>
                                                                        <div class="form-control d-flex align-items-center" style="background-color: #fff;">
                                                                            <i class="fab fa-linkedin mr-2 text-info"></i>
                                                                            @if (!string.IsNullOrEmpty(selectedStudentFromCache.LinkedInProfile))
                                                                            {
                                                                                <a href="@selectedStudentFromCache.LinkedInProfile" target="_blank" class="text-info text-decoration-underline">
                                                                                    @selectedStudentFromCache.LinkedInProfile
                                                                                </a>
                                                                            }
                                                                            else
                                                                            {
                                                                                <span class="text-muted">Δεν έχει οριστεί προφίλ LinkedIn ακόμη..</span>
                                                                            }
                                                                        </div>
                                                                    </div>

                                                                    <!-- Website -->
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Προσωπική Ιστοσελίδα</label>
                                                                        <div class="form-control d-flex align-items-center" style="background-color: #fff;">
                                                                            <i class="fas fa-globe mr-2 text-info"></i>
                                                                            @if (!string.IsNullOrEmpty(selectedStudentFromCache.PersonalWebsite))
                                                                            {
                                                                                <a href="@selectedStudentFromCache.PersonalWebsite" target="_blank" class="text-primary text-decoration-underline">
                                                                                    @selectedStudentFromCache.PersonalWebsite
                                                                                </a>
                                                                            }
                                                                            else
                                                                            {
                                                                                <span class="text-muted">Δεν έχει οριστεί ιστοσελίδα ακόμη..</span>
                                                                            }
                                                                        </div>
                                                                    </div>

                                                                    <!-- Expertise -->
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Τομείς Εξειδίκευσης</label>
                                                                        <textarea class="form-control" readonly rows="3">@selectedStudentFromCache.AreasOfExpertise</textarea>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Δεξιότητες</label>
                                                                        <textarea class="form-control" readonly rows="3">@selectedStudentFromCache.Keywords</textarea>
                                                                    </div>
                                                                </div>

                                                                <div class="modal-footer">
                                                                    <button type="button" class="btn btn-secondary" @onclick="CloseStudentDetailsModal">
                                                                        <i class="fas fa-times mr-2"></i> Κλείσιμο
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                }


                                                @if (showProfessorModal && selectedProfessorToShowDetailsForInterestinCompanyEvent != null)
                                                {
                                                    <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0,0,0,0.5);">
                                                        <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h5 class="modal-title" style="color: #007BFF;">
                                                                        @selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfName 
                                                                        @selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfSurname
                                                                    </h5>
                                                                    <button type="button" class="btn-close" @onclick="CloseProfessorDetailsModal" aria-label="Κλείσιμο"></button>
                                                                </div>
                                                                <div class="modal-body">
                                                                    <!-- Profile Picture -->
                                                                    <div class="form-group text-center mb-3">
                                                                        @if (selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfImage != null)
                                                                        {
                                                                            <img src="data:image/png;base64,@Convert.ToBase64String(selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfImage)"
                                                                                 alt="Φωτογραφία Καθηγητή"
                                                                                 style="max-width: 150px; max-height: 150px; border-radius: 50%; object-fit: cover;" />
                                                                        }
                                                                        else
                                                                        {
                                                                            <p>Δεν υπάρχει φωτογραφία Προφίλ</p>
                                                                        }
                                                                    </div>

                                                                    <!-- Details with Icons -->
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Βαθμίδα</label>
                                                                        <div class="form-control d-flex align-items-center">
                                                                            <i class="fas fa-user-tie text-secondary me-2"></i>
                                                                            <span>@selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfVahmidaDEP</span>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Email</label>
                                                                        <div class="form-control d-flex align-items-center">
                                                                            <i class="fas fa-envelope text-primary me-2"></i>
                                                                            <span>@selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfEmail</span>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Πανεπιστήμιο</label>
                                                                        <div class="form-control d-flex align-items-center">
                                                                            <i class="fas fa-university text-primary me-2"></i>
                                                                            <span>@selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfUniversity</span>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Τμήμα</label>
                                                                        <div class="form-control d-flex align-items-center">
                                                                            <i class="fas fa-building text-secondary me-2"></i>
                                                                            <span>@selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfDepartment</span>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Τηλέφωνο Εργασίας</label>
                                                                        <div class="form-control d-flex align-items-center">
                                                                            <i class="fas fa-phone-alt text-success me-2"></i>
                                                                            <span>@selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfWorkTelephone</span>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Προσωπικό Τηλέφωνο</label>
                                                                        <div class="form-control d-flex align-items-center">
                                                                            <i class="fas fa-mobile-alt text-danger me-2"></i>
                                                                            <span>
                                                                                @(selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfPersonalTelephoneVisibility 
                                                                                    ? selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfPersonalTelephone 
                                                                                    : "Μη διαθέσιμο")
                                                                            </span>
                                                                        </div>
                                                                    </div>

                                                                    <!-- Links Section -->
                                                                    @if (!string.IsNullOrWhiteSpace(selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfLinkedInSite))
                                                                    {
                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">LinkedIn</label>
                                                                            <a class="form-control text-primary" href="@selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfLinkedInSite" target="_blank" style="text-decoration: underline;">
                                                                                <i class="fab fa-linkedin me-2"></i>
                                                                                @selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfLinkedInSite
                                                                            </a>
                                                                        </div>
                                                                    }

                                                                    @if (!string.IsNullOrWhiteSpace(selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfPersonalWebsite))
                                                                    {
                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Προσωπική Ιστοσελίδα</label>
                                                                            <a class="form-control text-primary" href="@selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfPersonalWebsite" target="_blank" style="text-decoration: underline;">
                                                                                <i class="fas fa-globe me-2"></i>
                                                                                @selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfPersonalWebsite
                                                                            </a>
                                                                        </div>
                                                                    }

                                                                    @if (!string.IsNullOrWhiteSpace(selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfScholarProfile))
                                                                    {
                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Scholar</label>
                                                                            <a class="form-control text-primary" href="@selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfScholarProfile" target="_blank" style="text-decoration: underline;">
                                                                                <i class="fas fa-graduation-cap me-2"></i>
                                                                                @selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfScholarProfile
                                                                            </a>
                                                                        </div>
                                                                    }

                                                                    <!-- Professor ORCID Profile -->
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">ORCID Profile</label>
                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                            <i class="fas fa-id-card" style="color: #A6CE39; margin-right: 8px;"></i>
                                                                            @if (!string.IsNullOrWhiteSpace(selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfOrchidProfile))
                                                                            {
                                                                                <a href="@selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfOrchidProfile" target="_blank" class="flex-grow-1 text-truncate" style="text-decoration:none; color:#A6CE39;">
                                                                                    @selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfOrchidProfile
                                                                                </a>
                                                                            }
                                                                            else
                                                                            {
                                                                                <span class="flex-grow-1 text-muted">Δεν Διατίθεται</span>
                                                                            }
                                                                        </div>
                                                                    </div>

                                                                    <!-- Text Areas -->
                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Πεδίο Εργασίας</label>
                                                                        <textarea class="form-control" readonly>
                                                                            @(selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfGeneralFieldOfWork ?? "Δεν έχει Καθοριστεί")
                                                                        </textarea>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label style="font-weight: bold;">Προσωπική Περιγραφή</label>
                                                                        <textarea class="form-control" rows="3" readonly>@selectedProfessorToShowDetailsForInterestinCompanyEvent.ProfPersonalDescription</textarea>
                                                                    </div>
                                                                </div>

                                                                <div class="modal-footer">
                                                                    <button type="button" class="btn btn-secondary" @onclick="CloseProfessorDetailsModal">Κλείσιμο</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                }








                                               <!-- Modal for editing company event -->
                                                @if (isEditModalVisibleForEventsAsCompany)
                                                {
                                                    <div class="modal fade show" style="display: block;" tabindex="-1" role="dialog" aria-modal="true">
                                                        <div class="modal-dialog modal-lg" role="document">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h5 class="modal-title" style="color: #007BFF;">Επεξεργασία Εκδήλωσης</h5>
                                                                    <button type="button" class="close" @onclick="CloseEditModalForCompanyEvent">&times;</button>
                                                                </div>
                                                                <div class="modal-body">
                                                                    <!-- Τίτλος Εκδήλωσης -->
                                                                    <div class="form-group">
                                                                        <label><strong>Τίτλος Εκδήλωσης</strong></label>
                                                                        <input type="text" class="form-control" @bind="currentCompanyEvent.CompanyEventTitle" />
                                                                    </div>

                                                                    <!-- Περιγραφή Εκδήλωσης -->
                                                                    <div class="form-group">
                                                                        <label><strong>Περιγραφή Εκδήλωσης</strong></label>
                                                                        <textarea class="form-control" @bind="currentCompanyEvent.CompanyEventDescription"></textarea>
                                                                    </div>

                                                                    <!-- Τύπος Εκδήλωσης -->
                                                                    <div class="form-group">
                                                                        <label><strong>Τύπος Εκδήλωσης</strong></label>
                                                                        <select class="form-control" @bind="currentCompanyEvent.CompanyEventType">
                                                                            <option value="">-- Επιλέξτε Τύπο Εκδήλωσης --</option>
                                                                            <option value="Έκθεση">Έκθεση</option>
                                                                            <option value="Hackathon">Hackathon</option>
                                                                            <option value="Career Day">Career Day</option>
                                                                            <option value="Seminar">Σεμινάριο</option>
                                                                            <option value="Επίσκεψη">Επίσκεψη</option>
                                                                            <option value="Άλλο">Άλλο</option>
                                                                        </select>
                                                                    </div>

                                                                    <!-- Υπεύθυνος Εκδήλωσης -->
                                                                    <div class="form-group">
                                                                        <label><strong>Υπεύθυνος Εκδήλωσης</strong></label>
                                                                        <input type="text" class="form-control" @bind="currentCompanyEvent.CompanyEventResponsiblePerson" />
                                                                    </div>

                                                                    <!-- Email Υπευθύνου -->
                                                                    <div class="form-group">
                                                                        <label><strong>Email Υπευθύνου</strong></label>
                                                                        <input type="email" class="form-control" @bind="currentCompanyEvent.CompanyEventResponsiblePersonEmail" />
                                                                    </div>

                                                                    <!-- Τηλέφωνο Υπευθύνου -->
                                                                    <div class="form-group">
                                                                        <label><strong>Τηλέφωνο Υπευθύνου</strong></label>
                                                                        <input type="text" class="form-control" @bind="currentCompanyEvent.CompanyEventResponsiblePersonTelephone" />
                                                                    </div>

                                                                    <!-- Τμήμα Εταιρείας -->
                                                                    <div class="form-group">
                                                                        <label><strong>Τμήμα Εταιρείας</strong></label>
                                                                        <input type="text" class="form-control" @bind="currentCompanyEvent.CompanyEventCompanyDepartment" />
                                                                    </div>

                                                                    <!--Περιφέρεια Εκδήλωσης (Region) -->
                                                                    <div class="form-group">
                                                                        <label for="CompanyEventDimosLocation"><strong>Περιφέρεια Εκδήλωσης</strong></label>
                                                                        <select id="CompanyEventPerifereiaLocation" class="form-control"
                                                                                @bind="currentCompanyEvent.CompanyEventPerifereiaLocation"
                                                                                @bind:event="onchange">
                                                                            <option value="">-- Επιλέξτε Περιφέρεια --</option>
                                                                            @foreach (var region in Regions)
                                                                            {
                                                                                <option value="@region">@region</option>
                                                                            }
                                                                        </select>
                                                                    </div>


                                                                    <!-- Δήμος Εκδήλωσης (Town) -->
                                                                    <div class="form-group">
                                                                        <label for="CompanyEventDimosLocation"><strong>Δήμος Εκδήλωσης</strong></label>
                                                                        <select id="CompanyEventDimosLocation" class="form-control"
                                                                                @bind="currentCompanyEvent.CompanyEventDimosLocation">
                                                                            <option value="">-- Επιλέξτε Δήμο --</option>
                                                                            @if (!string.IsNullOrEmpty(currentCompanyEvent.CompanyEventPerifereiaLocation) &&
                                                                                 RegionToTownsMap.ContainsKey(currentCompanyEvent.CompanyEventPerifereiaLocation))
                                                                            {
                                                                                foreach (var town in RegionToTownsMap[currentCompanyEvent.CompanyEventPerifereiaLocation])
                                                                                {
                                                                                    <option value="@town">@town</option>
                                                                                }
                                                                            }
                                                                        </select>
                                                                    </div>


                                                                    <!-- Χώρος Εκδήλωσης -->
                                                                    <div class="form-group">
                                                                        <label><strong>Χώρος Εκδήλωσης</strong></label>
                                                                        <input type="text" id="autocomplete" class="form-control" @bind="currentCompanyEvent.CompanyEventPlaceLocation" />
                                                                    </div>

                                                                    <!-- Ταχυδρομικός Κώδικας -->
                                                                    <div class="form-group">
                                                                        <label><strong>Ταχυδρομικός Κώδικας</strong></label>
                                                                        <input type="text" class="form-control" @bind="currentCompanyEvent.CompanyEventPostalCodeLocation" />
                                                                    </div>

                                                                    <!-- Ημερομηνία Εκδήλωσης -->
                                                                    <div class="form-group">
                                                                        <label><strong>Ημερομηνία Εκδήλωσης</strong></label>
                                                                        <input type="date" class="form-control" @bind="currentCompanyEvent.CompanyEventActiveDate" />
                                                                    </div>

                                                                    <!-- Ώρα Εκδήλωσης -->
                                                                    <div class="form-group">
                                                                        <label><strong>Ώρα Εκδήλωσης</strong></label>
                                                                        <input type="time" class="form-control" @bind="currentCompanyEvent.CompanyEventTimeOnly" />
                                                                    </div>
                                                                    <br/>
                                                                    <!-- Περιοχές Ενδιαφέροντος -->
                                                                    <div class="form-group">
                                                                        <label for="editEventAreas" @onclick="ToggleAreasInEditCompanyEventModal" style="cursor: pointer;">
                                                                            <strong>Περιοχές Ενδιαφέροντος</strong>
                                                                            <i class="fas @(showExpandedAreasInCompanyEventEditModal ? "fa-chevron-up" : "fa-chevron-down")"></i>
                                                                        </label>
                                                                        @if (showExpandedAreasInCompanyEventEditModal)
                                                                        {
                                                                            <div id="toggleCheckboxes" class="checkbox-container">
                                                                                @foreach (var area in Areas)
                                                                                {
                                                                                    <div class="form-check">
                                                                                        <input type="checkbox"
                                                                                               id="event_area_@area.Id"
                                                                                               class="form-check-input"
                                                                                               @onchange="(e) => OnCheckedChangedForEditCompanyEventAreas(e, area)"
                                                                                               checked="@(SelectedAreasToEditForCompanyEvent != null && SelectedAreasToEditForCompanyEvent.Any(a => a.AreaName.Equals(area.AreaName, StringComparison.OrdinalIgnoreCase)))" />
                                                                                        <label class="form-check-label" for="event_area_@area.Id">@area.AreaName</label>
                                                                                    </div>
                                                                                }
                                                                            </div>
                                                                        }
                                                                    </div>



                                                                    <br/>
                                                                    <!-- Προσφορά Μεταφοράς προς/από Εκδήλωση -->
                                                                    <div class="form-group">
                                                                        <label><strong>Προσφορά Μεταφοράς προς/από Εκδήλωση</strong></label>
                                                                        <br />
                                                                        <input type="checkbox" @bind="currentCompanyEvent.CompanyEventOfferingTransportToEventLocation" />
                                                                        <span>Παρέχεται μεταφορά προς την εκδήλωση</span>
                                                                    </div>
                                                                    <br/>
                                                                    <!-- Σημεία Εκκίνησης Μεταφοράς (Starting Points for Transport) -->
                                                                    <div class="form-group">
                                                                        <label><strong>Σημεία Εκκίνησης Μεταφοράς</strong></label>
                                                                        <div class="input-group" style="position: relative;">
                                                                            <input type="text" id="autocomplete4" class="form-control mt-2" 
                                                                                   @bind="currentCompanyEvent.CompanyEventStartingPointLocationToTransportPeopleToEvent1" 
                                                                                   placeholder="Σημείο Εκκίνησης 1" />
                                                                            @if (!string.IsNullOrEmpty(currentCompanyEvent.CompanyEventStartingPointLocationToTransportPeopleToEvent1))
                                                                            {
                                                                                <button type="button" class="btn-close" @onclick="() => ClearField(1)" style="position: absolute; right: 10px; top: 70%; transform: translateY(-50%);"></button>
                                                                            }
                                                                        </div>
                                                                        <div class="input-group" style="position: relative;">
                                                                            <input type="text" id="autocomplete2" class="form-control mt-2" 
                                                                                   @bind="currentCompanyEvent.CompanyEventStartingPointLocationToTransportPeopleToEvent2" 
                                                                                   placeholder="Σημείο Εκκίνησης 2" />
                                                                            @if (!string.IsNullOrEmpty(currentCompanyEvent.CompanyEventStartingPointLocationToTransportPeopleToEvent2))
                                                                            {
                                                                                <button type="button" class="btn-close" @onclick="() => ClearField(2)" style="position: absolute; right: 10px; top: 70%; transform: translateY(-40%);"></button>
                                                                            }
                                                                        </div>
                                                                        <div class="input-group" style="position: relative;">
                                                                            <input type="text" id="autocomplete3" class="form-control mt-2" 
                                                                                   @bind="currentCompanyEvent.CompanyEventStartingPointLocationToTransportPeopleToEvent3" 
                                                                                   placeholder="Σημείο Εκκίνησης 3" />
                                                                            @if (!string.IsNullOrEmpty(currentCompanyEvent.CompanyEventStartingPointLocationToTransportPeopleToEvent3))
                                                                            {
                                                                                <button type="button" class="btn-close" @onclick="() => ClearField(3)" style="position: absolute; right: 10px; top: 70%; transform: translateY(-50%);"></button>
                                                                            }
                                                                        </div>
                                                                    </div>




                                                                    <!-- Επισυναπτόμενο Αρχείο -->
                                                                    <div class="form-group">
                                                                        <label><strong>Επισυναπτόμενο Αρχείο</strong></label>
                                                                        <input type="file" class="form-control" @onchange="UploadFileToUpdateCompanyEventAttachment" />
                                                                    </div>

                                                                </div>
                                                                <div class="modal-footer">
                                                                    <button class="btn btn-primary" @onclick="() => UpdateCompanyEvent(currentCompanyEvent)">Αποθήκευση</button>
                                                                    <button class="btn btn-secondary" @onclick="CloseEditModalForCompanyEvent">Κλείσιμο</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                }


                                                                                            
                                            </div>

@*----------------------------------------------------------------------------------------------------------COMPANY EVENTS END------------------------------------------------------------------------------------------------------------*@




@*----------------------------------------------------------------------------------------------------------COMPANY STUDENT SEARCH START------------------------------------------------------------------------------------------------------------*@


                                            <!-- Toggle Search Visibility -->
                                            <div class="tab-pane fade" id="student-search" role="tabpanel" aria-labelledby="student-search-tab">
                                                <div class="mb-3 row-dark-gray mt-4">
                                                    <div class="d-flex justify-content-between align-items-center">
                                                        <label class="form-label" style="color: #FFF8DC;">• Αναζήτηση Φοιτητή •</label>
                                                        <button class="btn btn-link" @onclick="ToggleCompanySearchStudentVisible">
                                                            @if (isCompanySearchStudentVisible)
                                                            {
                                                                <span>&#8722;</span> <!-- Minus sign -->
                                                            }
                                                            else
                                                            {
                                                                <span>&#43;</span> <!-- Plus sign -->
                                                            }
                                                        </button>
                                                    </div>
                                                </div>

                                                @if (isCompanySearchStudentVisible)
                                                {
                                                    <!-- Search Form -->
                                                    <div class="row">
                                                        <!-- Name/Surname Field -->
                                                        <div class="col-md-4 position-relative">
                                                            <label for="searchNameOrSurname" style="font-weight: bold;">Όνομα/Επώνυμο Φοιτητή</label>
                                                            <input 
                                                                type="text" 
                                                                id="searchNameOrSurname"
                                                                class="form-control" 
                                                                placeholder="Αναζήτηση με όνομα ή επώνυμο" 
                                                                @bind="searchNameOrSurname" 
                                                                @oninput="HandleInput" />
                                                        </div>

                                                        <div class="col-md-4">
                                                            <label for="degreeLevel" style="font-weight: bold;">Κατηγορία Σπουδών</label>
                                                            <div class="input-group">
                                                                <select id="degreeLevel" class="form-control" @bind="selectedDegreeLevel">
                                                                    <option value="">-- Επιλέξτε Κατηγορία --</option>
                                                                    @foreach (var degree in DegreeLevel)
                                                                    {
                                                                        <option value="@degree">@degree</option>
                                                                    }
                                                                </select>
                                                                <div class="input-group-append">
                                                                    <span class="input-group-text">
                                                                        <i class="fas fa-chevron-down"></i>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <!-- Registration Number Field -->
                                                        <div class="col-md-4">
                                                            <label for="searchRegNumberAsCompanyToFindStudent" style="font-weight: bold;">Αριθμός Μητρώου</label>
                                                            <input 
                                                                type="text" 
                                                                id="searchRegNumberAsCompanyToFindStudent" 
                                                                class="form-control" 
                                                                placeholder="Αναζήτηση με αριθμό μητρώου" 
                                                                @bind="searchRegNumberAsCompanyToFindStudent" />
                                                        </div>


                                                        <!-- Search Student by School -->
                                                        <div class="col-md-4">
                                                            <label for="searchSchoolAsCompanyToFindStudent" style="font-weight: bold;">Σχολή</label>
                                                            <div class="input-group">
                                                                <select class="form-control" 
                                                                        value="@searchSchoolAsCompanyToFindStudent"
                                                                        @onchange="OnStudentSchoolChanged">
                                                                    <option value=""> - Επιλέξτε Σχολή - </option>
                                                                    @foreach (var school in researchGroupSchools)
                                                                    {
                                                                        <option value="@school">@school</option>
                                                                    }
                                                                </select>
                                                                <div class="input-group-append">
                                                                    <span class="input-group-text">
                                                                        <i class="fas fa-chevron-down"></i>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <!-- Search Student by Department -->
                                                        <div class="col-md-4">
                                                            <label for="searchDepartmentAsCompanyToFindStudent" style="font-weight: bold;">Τμήμα Πανεπιστημίου</label>
                                                            <div class="input-group">
                                                                <select class="form-control" 
                                                                        @bind="searchDepartmentAsCompanyToFindStudent"
                                                                        disabled="@string.IsNullOrEmpty(searchSchoolAsCompanyToFindStudent)">
                                                                    <option value=""> - Επιλέξτε Τμήμα - </option>
                                                                    @if (string.IsNullOrEmpty(searchSchoolAsCompanyToFindStudent))
                                                                    {
                                                                        <!-- Show all departments when no school is selected -->
                                                                        @foreach (var department in GetAllStudentDepartments())
                                                                        {
                                                                            <option value="@department">@department</option>
                                                                        }
                                                                    }
                                                                    else
                                                                    {
                                                                        <!-- Show only departments from selected school -->
                                                                        @foreach (var department in filteredStudentDepartments)
                                                                        {
                                                                            <option value="@department">@department</option>
                                                                        }
                                                                    }
                                                                </select>
                                                                <div class="input-group-append">
                                                                    <span class="input-group-text">
                                                                        <i class="fas fa-chevron-down"></i>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <!-- Internship Status Dropdown -->
                                                        <div class="col-md-4">
                                                            <label for="internshipStatus" style="font-weight: bold;">Κατάσταση Πρακτικής Άσκησης</label>
                                                            <div class="input-group">
                                                                <select id="internshipStatus" class="form-control" @bind="InternshipStatus">
                                                                    <option value="">-- Καμία Επιλογή --</option>
                                                                    <option value="Ενδιαφέρομαι για θέση Πρακτικής Άσκησης">Ενδιαφέρεται για θέση Πρακτικής Άσκησης</option>
                                                                    <option value="Έχω ήδη αναλάβει Πρακτική Άσκηση">Έχει ήδη αναλάβει Πρακτική Άσκηση</option>
                                                                    <option value="Δεν ενδιαφέρομαι για ανάληψη Πρακτικής Άσκησης προς το παρόν">Δεν ενδιαφέρεται για ανάληψη Πρακτικής Άσκησης προς το παρόν</option>
                                                                </select>
                                                                <div class="input-group-append">
                                                                    <span class="input-group-text">
                                                                        <i class="fas fa-chevron-down"></i>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <!-- Thesis Status Dropdown -->
                                                        <div class="col-md-4">
                                                            <label for="thesisStatus" style="font-weight: bold;">Κατάσταση Πτυχιακής Εργασίας</label>
                                                            <div class="input-group">
                                                                <select id="thesisStatus" class="form-control" @bind="ThesisStatus">
                                                                    <option value="">-- Καμία Επιλογή --</option>
                                                                    <option value="Ενδιαφέρομαι για ανάληψη Πτυχιακής Εργασίας">Ενδιαφέρεται για ανάληψη Πτυχιακής Εργασίας</option>
                                                                    <option value="Έχω ήδη αναλάβει Πτυχιακή Εργασία">Έχει ήδη αναλάβει Πτυχιακή Εργασία</option>
                                                                    <option value="Δεν ενδιαφέρομαι για ανάληψη Πτυχιακής Εργασίας προς το παρόν">Δεν ενδιαφέρεται για ανάληψη Πτυχιακής Εργασίας προς το παρόν</option>
                                                                </select>
                                                                <div class="input-group-append">
                                                                    <span class="input-group-text">
                                                                        <i class="fas fa-chevron-down"></i>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <!-- Areas of Expertise Container -->
                                                        <div class="col-md-4 position-relative">
                                                            <label for="searchAreasOfExpertise" style="font-weight: bold;">Περιοχές Εξειδίκευσης</label>
                                                            <input 
                                                                type="text" 
                                                                id="searchAreasOfExpertise"
                                                                class="form-control" 
                                                                placeholder="Αναζήτηση με περιοχές εξειδίκευσης" 
                                                                @bind="searchAreasOfExpertise" 
                                                                @oninput="HandleAreasOfExpertiseInput" />

                                                            <ul class="list-group position-absolute" 
                                                                style="z-index: 100; width: 100%; max-height: 150px; overflow-y: auto;" 
                                                                hidden="@(!areasOfExpertiseSuggestions.Any())">
                                                                @foreach (var suggestion in areasOfExpertiseSuggestions)
                                                                {
                                                                    <li class="list-group-item list-group-item-action" 
                                                                        @onclick="() => SelectAreasOfExpertiseSuggestion(suggestion)">
                                                                        @suggestion
                                                                    </li>
                                                                }
                                                            </ul>

                                                            <div class="mt-3 selected-areas-container">
                                                                @if (selectedAreasOfExpertise.Any())
                                                                {
                                                                    <ul class="list-group selected-areas-list">
                                                                        @foreach (var area in selectedAreasOfExpertise)
                                                                        {
                                                                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                                                                @area
                                                                                <button class="btn btn-danger btn-sm" @onclick="() => RemoveSelectedAreaOfExpertise(area)">
                                                                                    <i class="fas fa-times"></i>
                                                                                </button>
                                                                            </li>
                                                                        }
                                                                    </ul>
                                                                }
                                                            </div>
                                                        </div>

                                                        <!-- Keywords (Skills) Container -->
                                                        <div class="col-md-4 position-relative">
                                                            <label for="searchKeywords" style="font-weight: bold;">Δεξιότητες</label>
                                                            <input 
                                                                type="text" 
                                                                id="searchKeywords"
                                                                class="form-control" 
                                                                placeholder="Αναζήτηση με λέξεις κλειδιά ή δεξιότητες" 
                                                                @bind="searchKeywords" 
                                                                @oninput="HandleKeywordsInput" />

                                                            <ul class="list-group position-absolute" 
                                                                style="z-index: 100; width: 100%; max-height: 150px; overflow-y: auto;" 
                                                                hidden="@(!keywordsSuggestions.Any())">
                                                                @foreach (var suggestion in keywordsSuggestions)
                                                                {
                                                                    <li class="list-group-item list-group-item-action" 
                                                                        @onclick="() => SelectKeywordsSuggestion(suggestion)">
                                                                        @suggestion
                                                                    </li>
                                                                }
                                                            </ul>

                                                            <div class="mt-3 selected-keywords-container">
                                                                @if (selectedKeywords.Any())
                                                                {
                                                                    <ul class="list-group selected-keywords-list">
                                                                        @foreach (var keyword in selectedKeywords)
                                                                        {
                                                                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                                                                @keyword
                                                                                <button class="btn btn-danger btn-sm" @onclick="() => RemoveKeyword(keyword)">
                                                                                    <i class="fas fa-times"></i>
                                                                                </button>
                                                                            </li>
                                                                        }
                                                                    </ul>
                                                                }
                                                            </div>
                                                        </div>
                                                    </div>



                                                            <!-- Action Buttons -->
                                                            <div class="col-md-4 text-end mt-3">
                                                                <!-- Search Button -->
                                                                <button 
                                                                    class="btn me-2" 
                                                                    style="background-color: lightblue; color: black;" 
                                                                    @onclick="SearchStudentsAsCompanyToFindStudent" 
                                                                    title="Αναζήτηση Φοιτητή">
                                                                    <i class="fas fa-search"></i>
                                                                </button>

                                                                <!-- Clear Button -->
                                                                <button 
                                                                    class="btn" 
                                                                    style="background-color: orange; color: black;" 
                                                                    @onclick="ClearSearchFieldsAsCompanyToFindStudent" 
                                                                    title="Εκκαθάριση Πεδιών και Πίνακα Αποτελεσμάτων" 
                                                                    aria-label="Clear">
                                                                    <i class="fas fa-times"></i>
                                                                </button>
                                                            </div>
                                                            <br/>
                                                            <br/>



                                                    @if (searchResultsAsCompanyToFindStudent != null && searchResultsAsCompanyToFindStudent.Any())
                                                    {
                                                        <div class="col-md-2">
                                                            <label style="color: #4682b4; font-weight: bold; font-size: 15px; display: block;">Αποτελέσματα ανά Σελίδα</label>
                                                            <div class="input-group" style="max-width: 65px;">
                                                                <select class="form-control form-control-sm" @onchange="OnPageSizeChange_SearchForStudentsAsCompany" aria-label="Items per page">
                                                                    @foreach (var option in pageSizeOptions_SearchForStudentsAsCompany)
                                                                    {
                                                                        <option value="@option" selected="@(StudentsPerPage_SearchForStudentsAsCompany == option)">@option</option>
                                                                    }
                                                                </select>
                                                                <div class="input-group-append">
                                                                    <span class="input-group-text">
                                                                        <i class="fas fa-chevron-down"></i>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <table class="table mt-4">
                                                            <thead>
                                                                <tr>
                                                                    <td colspan="9" style="padding: 0;">
                                                                        <div style="display: flex; justify-content: space-between; align-items: center; height: 24px; line-height: 24px; width: 100%;">
                                                                            <i class="fa-solid fa-magnifying-glass" style="font-size: 18px; color: #0d6efd;"></i>
                                                                            <label class="form-label" style="color: #0d6efd; font-weight: bold; font-size: 18px; margin: 0;">Αποτέλεσμα Αναζήτησης</label>
                                                                            <i class="fa-solid fa-magnifying-glass" style="font-size: 18px; color: #0d6efd;"></i>
                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                                <tr style="border: 2px solid black; background-color: lightgray;">
                                                                    <th style="border: 1px solid black;">
                                                                        <i class="fa-solid fa-signature fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Όνομα
                                                                    </th>
                                                                    <th style="border: 2px solid black;">
                                                                        <i class="fa-solid fa-signature fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Επώνυμο
                                                                    </th>
                                                                    <th style="border: 2px solid black;">
                                                                        <i class="fa-solid fa-building fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Τμήμα
                                                                    </th>
                                                                    <th style="border: 2px solid black;">
                                                                        <i class="fa-solid fa-envelope fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Ηλ. Ταχυδρομείο
                                                                    </th>
                                                                    <th style="border: 2px solid black;">
                                                                        <i class="fa-solid fa-phone fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Τηλέφωνο
                                                                    </th>
                                                                    <th style="border: 2px solid black;">
                                                                        <i class="fa-solid fa-circle-info fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Αναλυτική Επισκόπηση
                                                                    </th>
                                                                    <th style="border: 2px solid black;">
                                                                        <i class="fa-solid fa-file-user fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Βιογραφικό
                                                                    </th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                @foreach (var student in GetPaginatedStudents_SearchForStudentsAsCompany())
                                                                {
                                                                    <tr>
                                                                        <td>@student.Name</td>
                                                                        <td>@student.Surname</td>
                                                                        <td>@student.Department</td>
                                                                        <td>
                                                                            @student.Email
                                                                            <a href="mailto:@student.Email" title="Αποστολή Email">
                                                                                <i class="fas fa-envelope"></i>
                                                                            </a>
                                                                        </td>
                                                                        <td>
                                                                            @(student.PhoneVisibility ? student.Telephone : "Μη Ορατό")
                                                                            <span class="ml-2">
                                                                                <i class="fas fa-phone"></i>
                                                                            </span>
                                                                        </td>
                                                                        <td>
                                                                            <div class="text-center">
                                                                                <i class="fas fa-eye" 
                                                                                   style="cursor: pointer; font-size: 1.5rem;" 
                                                                                   @onclick="() => ShowStudentDetailsOnEyeIconWhenSearchForStudentsAsCompany(student)">
                                                                                </i>
                                                                            </div>
                                                                        </td>
                                                                        <td>
                                                                            @if (student.Attachment != null)
                                                                            {
                                                                                <div class="text-center">
                                                                                    <i class="fas fa-download" 
                                                                                       style="cursor: pointer; font-size: 1.5rem;" 
                                                                                       @onclick="() => DownloadStudentAttachmentAsCompanyInSearchForStudents(student.Id)">
                                                                                    </i>
                                                                                </div>
                                                                            }
                                                                            else
                                                                            {
                                                                                <span style="display: block; text-align: center; font-weight: bold; font-style: italic;">
                                                                                        Δεν Διατίθεται
                                                                                </span>
                                                                            }
                                                                        </td>
                                                                    </tr>
                                                                }
                                                            </tbody>
                                                        </table>
                                                        <br/>
                                                        <!-- Pagination Controls -->
                                                        <div class="d-flex justify-content-center align-items-center mt-3 gap-1">
                                                            <!-- First Page (<<) -->
                                                            <span class="pagination-item @(currentPageForStudents_SearchForStudentsAsCompany == 1 ? "disabled" : "")" 
                                                                  @onclick="@(() => GoToFirstPageForStudents_SearchForStudentsAsCompany())">
                                                                &lt;&lt;
                                                            </span>
            
                                                            <!-- Previous Page (<) -->
                                                            <span class="pagination-item @(currentPageForStudents_SearchForStudentsAsCompany == 1 ? "disabled" : "")" 
                                                                  @onclick="@(() => PreviousPageForStudents_SearchForStudentsAsCompany())">
                                                                &lt;
                                                            </span>
            
                                                            <!-- Page Numbers -->
                                                            @foreach (var pageNum in GetVisiblePagesForStudents_SearchForStudentsAsCompany())
                                                            {
                                                                @if (pageNum == -1)
                                                                {
                                                                    <span class="pagination-ellipsis">...</span>
                                                                }
                                                                else
                                                                {
                                                                    <span class="pagination-item @(pageNum == currentPageForStudents_SearchForStudentsAsCompany ? "active" : "")" 
                                                                          @onclick="@(() => GoToPageForStudents_SearchForStudentsAsCompany(pageNum))">
                                                                        @pageNum
                                                                    </span>
                                                                }
                                                            }
            
                                                            <!-- Next Page (>) -->
                                                            <span class="pagination-item @(currentPageForStudents_SearchForStudentsAsCompany == totalPagesForStudents_SearchForStudentsAsCompany ? "disabled" : "")" 
                                                                  @onclick="@(() => NextPageForStudents_SearchForStudentsAsCompany())">
                                                                &gt;
                                                            </span>
            
                                                            <!-- Last Page (>>) -->
                                                            <span class="pagination-item @(currentPageForStudents_SearchForStudentsAsCompany == totalPagesForStudents_SearchForStudentsAsCompany ? "disabled" : "")" 
                                                                  @onclick="@(() => GoToLastPageForStudents_SearchForStudentsAsCompany())">
                                                                &gt;&gt;
                                                            </span>
            
                                                            <!-- Page counter -->
                                                            <span class="ms-3">Σελίδα @currentPageForStudents_SearchForStudentsAsCompany από @totalPagesForStudents_SearchForStudentsAsCompany</span>
                                                        </div>
                                                        <br/>
                                                        <br/>
                                                    }
                                                    else if (searchResultsAsCompanyToFindStudent != null)
                                                    {
                                                        <div class="alert alert-warning d-flex align-items-center" role="alert">
                                                          <i class="fas fa-exclamation-triangle me-2"></i>
                                                          <div>Δεν βρέθηκε κάποιο αποτέλεσμα που να πληρεί τα κριτήρια της Αναζήτησης σας.</div>
                                                        </div>
                                                        <br/>
                                                        <br/>
                                                    }

                                                }
                                            </div>

                                            <!-- Modal for displaying student details FOR SEARCH AS COMPANY -->
                                            @if (showStudentDetailsModalWhenSearchForStudentsAsCompany && selectedStudentWhenSearchForStudentsAsCompany != null)
                                            {
                                                <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                                    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                        <div class="modal-content">
                                                            <div class="modal-header">
                                                                <h5 class="modal-title" style="color: #4682B4;">@selectedStudentWhenSearchForStudentsAsCompany.Name @selectedStudentWhenSearchForStudentsAsCompany.Surname</h5>
                                                                <button type="button" class="close" aria-label="Close" @onclick="CloseModalStudentDetailsOnEyeIconWhenSearchForStudentsAsCompany">
                                                                    <span aria-hidden="true">&times;</span>
                                                                </button>
                                                            </div>
                                                            <div class="modal-body">
                                                                <!-- Profile Picture -->
                                                                <div class="form-group text-center">
                                                                    @if (selectedStudentWhenSearchForStudentsAsCompany.Image != null && selectedStudentWhenSearchForStudentsAsCompany.Image.Length > 0)
                                                                    {
                                                                        var base64Image = Convert.ToBase64String(selectedStudentWhenSearchForStudentsAsCompany.Image);
                                                                        <img src="data:image/jpeg;base64,@base64Image" alt="Φωτογραφία Προφίλ Σπουδαστή" 
                                                                             style="max-width: 150px; max-height: 150px; border-radius: 50%; object-fit: cover;" />
                                                                    }
                                                                    else
                                                                    {
                                                                        <p>Δεν υπάρχει φωτογραφία Προφίλ</p>
                                                                    }
                                                                </div>

                                                                <!-- Student Details -->
                                                                <div class="form-group">
                                                                    <label><strong>Αριθμός Μητρώου</strong></label>
                                                                    <input type="text" class="form-control" value="@selectedStudentWhenSearchForStudentsAsCompany.RegNumber" readonly />
                                                                </div>

                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Πανεπιστήμιο</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-university" style="color: #007BFF; margin-right: 8px;"></i>
                                                                        <span>@selectedStudentWhenSearchForStudentsAsCompany.University</span>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Τμήμα</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-building" style="color: #6c757d; margin-right: 8px;"></i>
                                                                        <span>@selectedStudentWhenSearchForStudentsAsCompany.Department</span>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Επίπεδο Σπουδών</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-graduation-cap" style="color: #6c757d; margin-right: 8px;"></i>
                                                                        <span>@selectedStudentWhenSearchForStudentsAsCompany.LevelOfDegree</span>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label><strong>Τεχνικές Ικανότητες</strong></label>
                                                                    <textarea class="form-control" rows="2" readonly>@selectedStudentWhenSearchForStudentsAsCompany.Keywords</textarea>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label><strong>Περιοχές Εξειδίκευσης</strong></label>
                                                                    <textarea class="form-control" rows="2" readonly>@selectedStudentWhenSearchForStudentsAsCompany.AreasOfExpertise</textarea>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Επικοινωνία</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-envelope" style="color: #007BFF; margin-right: 8px;"></i>
                                                                        <span>@selectedStudentWhenSearchForStudentsAsCompany.Email</span>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Τηλέφωνο</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                        <span>@(selectedStudentWhenSearchForStudentsAsCompany.PhoneVisibility ? selectedStudentWhenSearchForStudentsAsCompany.Telephone : "N/A")</span>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label><strong>Περιφέρεια (Μόνιμης Διαμονής)</strong></label>
                                                                    <input type="text" class="form-control" value="@selectedStudentWhenSearchForStudentsAsCompany.PermanentRegion" readonly />
                                                                </div>

                                                                <div class="form-group">
                                                                    <label><strong>Πόλη (Μόνιμης Διαμονής)</strong></label>
                                                                    <input type="text" class="form-control" value="@selectedStudentWhenSearchForStudentsAsCompany.PermanentTown" readonly />
                                                                </div>

                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Διεύθυνση</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                        <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                        @if (!string.IsNullOrEmpty(selectedStudentWhenSearchForStudentsAsCompany.PermanentAddress))
                                                                        {
                                                                            <a href="https://www.google.com/maps/search/?api=1&query=@Uri.EscapeDataString(selectedStudentWhenSearchForStudentsAsCompany.PermanentAddress)"
                                                                               target="_blank"
                                                                               style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                @selectedStudentWhenSearchForStudentsAsCompany.PermanentAddress
                                                                            </a>
                                                                        }
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Προτιμώμενη Περιφέρεια</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-map-marked-alt" style="color: #6c757d; margin-right: 8px;"></i>
                                                                        <span>@selectedStudentWhenSearchForStudentsAsCompany.PreferedRegions</span>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Προτιμώμενη Πόλη</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-map-marker" style="color: #6c757d; margin-right: 8px;"></i>
                                                                        <span>@selectedStudentWhenSearchForStudentsAsCompany.PreferredTowns</span>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Διαθέτει Μέσο Μεταφοράς</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto; 
                                                                         @(selectedStudentWhenSearchForStudentsAsCompany.Transport == true ? "color: #28a745;" : "color: #dc3545;")">
                                                                        <i class="fas fa-car" style="margin-right: 8px;"></i>
                                                                        <span>@(selectedStudentWhenSearchForStudentsAsCompany.Transport == true ? "Ναι" : "Όχι")</span>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Κατάσταση Πρακτικής</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-briefcase" style="color: #6c757d; margin-right: 8px;"></i>
                                                                        <span>@selectedStudentWhenSearchForStudentsAsCompany.InternshipStatus</span>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Κατάσταση Πτυχιακής</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-file-alt" style="color: #6c757d; margin-right: 8px;"></i>
                                                                        <span>@selectedStudentWhenSearchForStudentsAsCompany.ThesisStatus</span>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">LinkedIn Προφίλ</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                        <i class="fab fa-linkedin" style="color: #0077b5; margin-right: 8px;"></i>
                                                                        @if (!string.IsNullOrEmpty(selectedStudentWhenSearchForStudentsAsCompany.LinkedInProfile))
                                                                        {
                                                                            <a href="@selectedStudentWhenSearchForStudentsAsCompany.LinkedInProfile" target="_blank" 
                                                                               style="color: #0077b5; text-decoration: underline; word-break: break-word;">
                                                                                @selectedStudentWhenSearchForStudentsAsCompany.LinkedInProfile
                                                                            </a>
                                                                        }
                                                                        else
                                                                        {
                                                                            <span style="color: #6c757d;">Δεν έχει οριστεί προφίλ LinkedIn ακόμη..</span>
                                                                        }
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Προσωπική Ιστοσελίδα</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                        <i class="fas fa-globe" style="color: #17a2b8; margin-right: 8px;"></i>
                                                                        @if (!string.IsNullOrEmpty(selectedStudentWhenSearchForStudentsAsCompany.PersonalWebsite))
                                                                        {
                                                                            <a href="@selectedStudentWhenSearchForStudentsAsCompany.PersonalWebsite" target="_blank" 
                                                                               style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                @selectedStudentWhenSearchForStudentsAsCompany.PersonalWebsite
                                                                            </a>
                                                                        }
                                                                        else
                                                                        {
                                                                            <span style="color: #6c757d;">Δεν έχει οριστεί ιστοσελίδα ακόμη..</span>
                                                                        }
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="modal-footer">
                                                                <button type="button" class="btn btn-secondary" @onclick="CloseModalStudentDetailsOnEyeIconWhenSearchForStudentsAsCompany">Κλείσιμο</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            }


                                        
@*----------------------------------------------------------------------------------------------------------COMPANY STUDENT SEARCH END------------------------------------------------------------------------------------------------------------*@
 


@*----------------------------------------------------------------------------------------------------------COMPANY FOR PROFESSOR SEARCH TAB START------------------------------------------------------------------------------------------------------------*@


                                            <!-- PROFESSOR SEARCH tab content  EDW EMEINA 26/11 FTIAXNW KAI AYTO KAI META NA KANW ELEGXO STA MODALS KAI STA DOWNLOADS-->
                                            <!-- PROFESSOR SEARCH Tab -->
                                            <div class="tab-pane fade" id="professor-search" role="tabpanel" aria-labelledby="professor-search-tab">
                                                <div class="mb-3 row-dark-gray mt-4">
                                                    <div class="d-flex justify-content-between align-items-center">
                                                        <label class="form-label" style="color: #FFF8DC;">• Αναζήτηση Καθηγητή •</label>
                                                        <button class="btn btn-link" @onclick="ToggleCompanySearchProfessorVisible">
                                                            @if (isCompanySearchProfessorVisible)
                                                            {
                                                                <span>&#8722;</span> <!-- Minus sign -->
                                                            }
                                                            else
                                                            {
                                                                <span>&#43;</span> <!-- Plus sign -->
                                                            }
                                                        </button>
                                                    </div>
                                                </div>

                                                @if (isCompanySearchProfessorVisible)
                                                {
                                                    <!-- Search Form -->
                                                    <div class="row mb-3">
                                                        <!-- Search Professor by Name and Surname -->
                                                        <div class="col-md-4 position-relative">
                                                            <label for="searchNameSurnameAsCompanyToFindProfessor" style="font-weight: bold;">Όνοματεπώνυμο Καθηγητή</label>
                                                            <input 
                                                                type="text" 
                                                                id="searchNameSurnameAsCompanyToFindProfessor"
                                                                class="form-control" 
                                                                placeholder="Αναζήτηση με όνομα ή επώνυμο" 
                                                                @bind="searchNameSurnameAsCompanyToFindProfessor" 
                                                                @oninput="HandleProfessorInput" />

                                                            <!-- Suggestions dropdown -->
                                                            <ul class="list-group position-absolute" 
                                                                style="z-index: 100; width: 100%; max-height: 150px; overflow-y: auto;" 
                                                                hidden="@(!professorNameSurnameSuggestions.Any())">
                                                                @foreach (var suggestion in professorNameSurnameSuggestions)
                                                                {
                                                                    <li class="list-group-item list-group-item-action" 
                                                                        @onclick="() => SelectProfessorNameSurnameSuggestion(suggestion)">
                                                                        @suggestion
                                                                    </li>
                                                                }
                                                            </ul>
                                                        </div>

                                                        <!-- Search Professor by School -->
                                                        <div class="col-md-4">
                                                            <label for="searchSchoolAsCompanyToFindProfessor" style="font-weight: bold;">Σχολή</label>
                                                            <div class="input-group">
                                                                <select class="form-control"
                                                                        value="@searchSchoolAsCompanyToFindProfessor"
                                                                        @onchange="HandleProfessorSchoolChanged">
                                                                    <option value=""> - Επιλέξτε Σχολή - </option>
                                                                    @foreach (var school in researchGroupSchools)
                                                                    {
                                                                        <option value="@school">@school</option>
                                                                    }
                                                                </select>

                                                                <div class="input-group-append">
                                                                    <span class="input-group-text">
                                                                        <i class="fas fa-chevron-down"></i>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <!-- Search Professor by Department -->
                                                        <div class="col-md-4">
                                                            <label for="searchDepartmentAsCompanyToFindProfessor" style="font-weight: bold;">Τμήμα Πανεπιστημίου</label>
                                                            <div class="input-group">
                                                                <select class="form-control" 
                                                                        @bind="searchDepartmentAsCompanyToFindProfessor"
                                                                        disabled="@string.IsNullOrEmpty(searchSchoolAsCompanyToFindProfessor)">
                                                                    <option value=""> - Επιλέξτε Τμήμα - </option>
                                                                    @if (string.IsNullOrEmpty(searchSchoolAsCompanyToFindProfessor))
                                                                    {
                                                                        <!-- Show all departments when no school is selected -->
                                                                        @foreach (var department in GetAllProfessorDepartments())
                                                                        {
                                                                            <option value="@department">@department</option>
                                                                        }
                                                                    }
                                                                    else
                                                                    {
                                                                        <!-- Show only departments from selected school -->
                                                                        @foreach (var department in filteredProfessorDepartments)
                                                                        {
                                                                            <option value="@department">@department</option>
                                                                        }
                                                                    }
                                                                </select>
                                                                <div class="input-group-append">
                                                                    <span class="input-group-text">
                                                                        <i class="fas fa-chevron-down"></i>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <!-- Search Professor by Areas of Interest -->
                                                        <div class="col-md-4 position-relative">
                                                            <label for="searchAreasOfInterestAsCompanyToFindProfessor" style="font-weight: bold;">Περιοχές Ενδιαφέροντος</label>
                                                            <input 
                                                                type="text" 
                                                                id="searchAreasOfInterestAsCompanyToFindProfessor"
                                                                class="form-control" 
                                                                placeholder="Αναζήτηση με περιοχές ενδιαφέροντος" 
                                                                @bind="searchAreasOfInterestAsCompanyToFindProfessor" 
                                                                @oninput="HandleAreasOfInterestInput" />

                                                            <!-- Suggestions dropdown for Areas of Interest -->
                                                            <ul class="list-group position-absolute" 
                                                                style="z-index: 100; width: 100%; max-height: 150px; overflow-y: auto;" 
                                                                hidden="@(!areasOfInterestSuggestions.Any())">
                                                                @foreach (var suggestion in areasOfInterestSuggestions)
                                                                {
                                                                    <li class="list-group-item list-group-item-action" 
                                                                        @onclick="() => SelectAreasOfInterestSuggestion(suggestion)">
                                                                        @suggestion
                                                                    </li>
                                                                }
                                                            </ul>

                                                            <!-- Selected Areas of Interest -->
                                                            <div class="mt-3 selected-areas-container">
                                                                @if (selectedAreasOfInterest.Any())
                                                                {
                                                                    <ul class="list-group selected-areas-list">
                                                                        @foreach (var area in selectedAreasOfInterest)
                                                                        {
                                                                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                                                                @area
                                                                                <button class="btn btn-danger btn-sm" @onclick="() => RemoveSelectedAreaOfInterest(area)">
                                                                                    <i class="fas fa-times"></i>
                                                                                </button>
                                                                            </li>
                                                                        }
                                                                    </ul>
                                                                }
                                                            </div>
                                                        </div>


                                                        <!-- Search Professors Button -->
                                                        <div class="col-md-4 text-end mt-3">
                                                            <button class="btn me-2" style="background-color: lightblue; color: black;" @onclick="SearchProfessorsAsCompanyToFindProfessor" title="Αναζήτηση Καθηγητή">
                                                                <i class="fas fa-search"></i>
                                                            </button>

                                                            <!-- Clear Search Professors Button -->
                                                            <button class="btn" style="background-color: orange; color: black;" @onclick="ClearSearchFieldsAsCompanyToFindProfessor" title="Εκκαθάριση Πεδίων και Πίνακα Αποτελεσμάτων" aria-label="Clear">
                                                                <i class="fas fa-times"></i>
                                                            </button>
                                                        </div>
                                                    </div>

                                                    <!-- Results Table -->
                                                    @if (searchResultsAsCompanyToFindProfessor != null && searchResultsAsCompanyToFindProfessor.Any())
                                                    {
                                                        <div class="col-md-2">
                                                            <label style="color: #4682b4; font-weight: bold; font-size: 15px; display: block;">Αποτελέσματα ανά Σελίδα</label>
                                                            <div class="input-group" style="max-width: 65px;">
                                                                    <select class="form-control form-control-sm" @onchange="OnPageSizeChange_SearchForProfessorsAsStudent" aria-label="Items per page">
                                                                        @foreach (var option in pageSizeOptions_SearchForProfessorsAsStudent)
                                                                        {
                                                                            <option value="@option" selected="@(ProfessorsPerPage_SearchForProfessorsAsStudent == option)">@option</option>
                                                                        }
                                                                    </select>
                                                                    <div class="input-group-append">
                                                                        <span class="input-group-text">
                                                                            <i class="fas fa-chevron-down"></i>
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        <table class="table mt-4">
                                                            <thead>
                                                                <tr>
                                                                    <td colspan="9" style="padding: 0;">
                                                                        <div style="display: flex; justify-content: space-between; align-items: center; height: 24px; line-height: 24px; width: 100%;">
                                                                            <i class="fa-solid fa-magnifying-glass" style="font-size: 18px; color: #0d6efd;"></i>
                                                                            <label class="form-label" style="color: #0d6efd; font-weight: bold; font-size: 18px; margin: 0;">Αποτέλεσμα Αναζήτησης</label>
                                                                            <i class="fa-solid fa-magnifying-glass" style="font-size: 18px; color: #0d6efd;"></i>
                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                                <tr style="background-color: lightgray; border: 2px solid black;">
                                                                    <th style="border: 2px solid black;">
                                                                        <i class="fa-solid fa-signature fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Όνομα
                                                                    </th>
                                                                    <th style="border: 2px solid black;">
                                                                        <i class="fa-solid fa-signature fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Επώνυμο
                                                                    </th>
                                                                    <th style="border: 2px solid black;">
                                                                        <i class="fa-solid fa-building fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Τμήμα
                                                                    </th>
                                                                    <th style="border: 2px solid black;">
                                                                        <i class="fa-solid fa-tags fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Περιοχές Ενδιαφέροντος
                                                                    </th>
                                                                    <th style="border: 2px solid black;">
                                                                        <i class="fa-solid fa-envelope fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Ηλ. Ταχυδρομείο
                                                                    </th>
                                                                    <th style="border: 2px solid black;">
                                                                        <i class="fa-solid fa-phone fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Τηλέφωνο
                                                                    </th>
                                                                    <th style="border: 2px solid black;">
                                                                        <i class="fa-solid fa-circle-info fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Επισκόπηση
                                                                    </th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                @foreach (var professor in GetPaginatedProfessorResults())
                                                                {
                                                                    <tr>
                                                                        <td>@professor.ProfName</td>
                                                                        <td>@professor.ProfSurname</td>
                                                                        <td>@professor.ProfDepartment</td>
                                                                        <td>
                                                                            @string.Join(", ", professor.ProfGeneralFieldOfWork)
                                                                        </td>
                                                                        <td>
                                                                            @professor.ProfEmail
                                                                            <a href="mailto:@professor.ProfEmail" title="Αποστολή Email">
                                                                                <i class="fas fa-envelope"></i>
                                                                            </a>
                                                                        </td>
                                                                        <td>@(professor.ProfPersonalTelephoneVisibility ? professor.ProfPersonalTelephone : "N/A")
                                                                            <span class="ml-2">
                                                                                <i class="fas fa-phone"></i>
                                                                            </span>
                                                                        </td>
                                                                        <td>
                                                                            <div class="text-center">
                                                                                <i class="fas fa-eye" 
                                                                                   style="cursor: pointer; font-size: 1.5rem;" 
                                                                                   @onclick="() => ShowProfessorDetailsOnEyeIconWhenSearchForProfessorAsCompany(professor)">
                                                                                </i>
                                                                            </div>
                                                                        </td>
                                                                    </tr>
                                                                }
                                                            </tbody>
                                                        </table>
                                                        <div class="d-flex justify-content-center align-items-center mt-3 gap-1">
                                                        <!-- First Page (<<) -->
                                                        <span class="pagination-item @(currentProfessorPage_SearchForProfessorsAsStudent == 1 ? "disabled" : "")" 
                                                              @onclick="@(() => GoToFirstProfessorPage())">
                                                            &lt;&lt;
                                                        </span>

                                                        <!-- Previous Page (<) -->
                                                        <span class="pagination-item @(currentProfessorPage_SearchForProfessorsAsStudent == 1 ? "disabled" : "")" 
                                                              @onclick="@(() => PreviousProfessorPage())">
                                                            &lt;
                                                        </span>

                                                        <!-- Page Numbers -->
                                                        @foreach (var pageNum in GetVisibleProfessorPages())
                                                        {
                                                            @if (pageNum == -1)
                                                            {
                                                                <span class="pagination-ellipsis">...</span>
                                                            }
                                                            else
                                                            {
                                                                <span class="pagination-item @(pageNum == currentProfessorPage_SearchForProfessorsAsStudent ? "active" : "")" 
                                                                      @onclick="@(() => GoToProfessorPage(pageNum))">
                                                                    @pageNum
                                                                </span>
                                                            }
                                                        }

                                                        <!-- Next Page (>) -->
                                                        <span class="pagination-item @(currentProfessorPage_SearchForProfessorsAsStudent == totalProfessorPages_SearchForProfessorsAsStudent ? "disabled" : "")" 
                                                              @onclick="@(() => NextProfessorPage())">
                                                            &gt;
                                                        </span>

                                                        <!-- Last Page (>>) -->
                                                        <span class="pagination-item @(currentProfessorPage_SearchForProfessorsAsStudent == totalProfessorPages_SearchForProfessorsAsStudent ? "disabled" : "")" 
                                                              @onclick="@(() => GoToLastProfessorPage())">
                                                            &gt;&gt;
                                                        </span>

                                                        <!-- Page counter -->
                                                        <span class="ms-3">Σελίδα @currentProfessorPage_SearchForProfessorsAsStudent από @totalProfessorPages_SearchForProfessorsAsStudent</span>
                                                    </div>
                                                    }
                                                    else if (searchResultsAsCompanyToFindProfessor != null)
                                                    {
                                                        <div class="alert alert-warning d-flex align-items-center" role="alert">
                                                          <i class="fas fa-exclamation-triangle me-2"></i>
                                                          <div>Δεν βρέθηκε κάποιο αποτέλεσμα που να πληρεί τα κριτήρια της Αναζήτησης σας.</div>
                                                        </div>
                                                    }
                                                }

                                            </div>

                                            <!-- Modal for displaying professor details FOR SEARCH AS COMPANY -->
                                            @if (showProfessorDetailsModalWhenSearchForProfessorsAsCompany && selectedProfessorWhenSearchForProfessorsAsCompany != null)
                                            {
                                                <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0,0,0,0.5);">
                                                    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
                                                        <div class="modal-content">
                                                            <div class="modal-header">
                                                                <h5 class="modal-title" style="color: #007BFF;">
                                                                    @selectedProfessorWhenSearchForProfessorsAsCompany.ProfName @selectedProfessorWhenSearchForProfessorsAsCompany.ProfSurname
                                                                </h5>
                                                                <button type="button" class="btn-close" @onclick="CloseModalProfessorDetailsOnEyeIconWhenSearchForProfessorsAsCompany" aria-label="Κλείσιμο"></button>
                                                            </div>
                                                            <div class="modal-body">
                                                                <!-- Profile Picture -->
                                                                <div class="form-group text-center">
                                                                    @if (selectedProfessorWhenSearchForProfessorsAsCompany.ProfImage != null && selectedProfessorWhenSearchForProfessorsAsCompany.ProfImage.Length > 0)
                                                                    {
                                                                        var base64Image = Convert.ToBase64String(selectedProfessorWhenSearchForProfessorsAsCompany.ProfImage);
                                                                        <img src="data:image/jpeg;base64,@base64Image" alt="Φωτογραφία Προφίλ Καθηγητή" 
                                                                             style="max-width: 150px; max-height: 150px; border-radius: 50%; object-fit: cover;" />
                                                                    }
                                                                    else
                                                                    {
                                                                        <p>Δεν υπάρχει φωτογραφία Προφίλ</p>
                                                                    }
                                                                </div>

                                                                <!-- Professor Email -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Email</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-envelope" style="color: #007bff; margin-right: 8px;"></i>
                                                                        <span>@selectedProfessorWhenSearchForProfessorsAsCompany.ProfEmail</span>
                                                                    </div>
                                                                </div>

                                                                <!-- Professor University and Department -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Πανεπιστήμιο</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-university" style="color: #007bff; margin-right: 8px;"></i>
                                                                        <span>@selectedProfessorWhenSearchForProfessorsAsCompany.ProfUniversity</span>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Τμήμα</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fa-solid fa-building" style="color: #6c757d; margin-right: 8px;"></i>
                                                                        <span>@selectedProfessorWhenSearchForProfessorsAsCompany.ProfDepartment</span>
                                                                    </div>
                                                                </div>

                                                                <!-- Professor Vahmida Department -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Βαθμίδα ΔΕΠ</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fa-solid fa-user-tie" style="color: #6c757d; margin-right: 8px;"></i>
                                                                        <span>@selectedProfessorWhenSearchForProfessorsAsCompany.ProfVahmidaDEP</span>
                                                                    </div>
                                                                </div>

                                                                <!-- Professor Work and Personal Telephone -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Τηλέφωνο Εργασίας</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fa-solid fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                        <span>@selectedProfessorWhenSearchForProfessorsAsCompany.ProfWorkTelephone</span>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Προσωπικό Τηλέφωνο</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fa-solid fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                        @if (selectedProfessorWhenSearchForProfessorsAsCompany.ProfPersonalTelephoneVisibility)
                                                                        {
                                                                            <span>@selectedProfessorWhenSearchForProfessorsAsCompany.ProfPersonalTelephone</span>
                                                                        }
                                                                        else
                                                                        {
                                                                            <span>Δεν Διατίθεται</span>
                                                                        }
                                                                    </div>
                                                                </div>

                                                                <!-- Professor Personal Website -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Ιστότοπος</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fa-solid fa-globe" style="color: #007bff; margin-right: 8px;"></i>
                                                                        @if (!string.IsNullOrWhiteSpace(selectedProfessorWhenSearchForProfessorsAsCompany.ProfPersonalWebsite))
                                                                        {
                                                                            <a href="@selectedProfessorWhenSearchForProfessorsAsCompany.ProfPersonalWebsite" target="_blank" class="flex-grow-1 text-truncate" style="text-decoration:none; color:#007bff;">
                                                                                @selectedProfessorWhenSearchForProfessorsAsCompany.ProfPersonalWebsite
                                                                            </a>
                                                                        }
                                                                        else
                                                                        {
                                                                            <span class="flex-grow-1 text-muted">Δεν Διατίθεται</span>
                                                                        }
                                                                    </div>
                                                                </div>

                                                                <!-- Professor LinkedIn Site -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">LinkedIn</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fab fa-linkedin" style="color: #0A66C2; margin-right: 8px;"></i>
                                                                        @if (!string.IsNullOrWhiteSpace(selectedProfessorWhenSearchForProfessorsAsCompany.ProfLinkedInSite))
                                                                        {
                                                                            <a href="@selectedProfessorWhenSearchForProfessorsAsCompany.ProfLinkedInSite" target="_blank" class="flex-grow-1 text-truncate" style="text-decoration:none; color:#0A66C2;">
                                                                                @selectedProfessorWhenSearchForProfessorsAsCompany.ProfLinkedInSite
                                                                            </a>
                                                                        }
                                                                        else
                                                                        {
                                                                            <span class="flex-grow-1 text-muted">Δεν Διατίθεται</span>
                                                                        }
                                                                    </div>
                                                                </div>

                                                                <!-- Professor Scholar Profile -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Scholar Profile</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-graduation-cap" style="color: #4285F4; margin-right: 8px;"></i>
                                                                        @if (!string.IsNullOrWhiteSpace(selectedProfessorWhenSearchForProfessorsAsCompany.ProfScholarProfile))
                                                                        {
                                                                            <a href="@selectedProfessorWhenSearchForProfessorsAsCompany.ProfScholarProfile" target="_blank" class="flex-grow-1 text-truncate" style="text-decoration:none; color:#4285F4;">
                                                                                @selectedProfessorWhenSearchForProfessorsAsCompany.ProfScholarProfile
                                                                            </a>
                                                                        }
                                                                        else
                                                                        {
                                                                            <span class="flex-grow-1 text-muted">Δεν Διατίθεται</span>
                                                                        }
                                                                    </div>
                                                                </div>

                                                                <!-- Professor ORCID Profile -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">ORCID Profile</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-id-card" style="color: #A6CE39; margin-right: 8px;"></i>
                                                                        @if (!string.IsNullOrWhiteSpace(selectedProfessorWhenSearchForProfessorsAsCompany.ProfOrchidProfile))
                                                                        {
                                                                            <a href="@selectedProfessorWhenSearchForProfessorsAsCompany.ProfOrchidProfile" target="_blank" class="flex-grow-1 text-truncate" style="text-decoration:none; color:#A6CE39;">
                                                                                @selectedProfessorWhenSearchForProfessorsAsCompany.ProfOrchidProfile
                                                                            </a>
                                                                        }
                                                                        else
                                                                        {
                                                                            <span class="flex-grow-1 text-muted">Δεν Διατίθεται</span>
                                                                        }
                                                                    </div>
                                                                </div>

                                                                <!-- Professor General Field of Work (Areas) -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Γενικός Τομέας Εργασίας</label>
                                                                    <textarea class="form-control" readonly>@selectedProfessorWhenSearchForProfessorsAsCompany.ProfGeneralFieldOfWork</textarea>
                                                                </div>

                                                                <!-- Professor General Skills -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Γενικές Δεξιότητες</label>
                                                                    <textarea class="form-control" readonly>@selectedProfessorWhenSearchForProfessorsAsCompany.ProfGeneralSkills</textarea>
                                                                </div>

                                                                <!-- Professor Personal Description -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Προσωπική Περιγραφή</label>
                                                                    <textarea class="form-control" readonly>@selectedProfessorWhenSearchForProfessorsAsCompany.ProfPersonalDescription</textarea>
                                                                </div>
                                                            </div>
                                                            <div class="modal-footer">
                                                                <button type="button" class="btn btn-secondary" @onclick="CloseModalProfessorDetailsOnEyeIconWhenSearchForProfessorsAsCompany">Κλείσιμο</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            }
                                        </div>
                                    </div>

                                    @*SEARCH RESEARCH GROUP AS COMPANY - START - *@
                                    <div class="tab-pane fade" id="researchgroup-search" role="tabpanel" aria-labelledby="researchgroup-search-tab">
                                        <div class="mb-3 row-dark-gray mt-4">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <label class="form-label" style="color: #FFF8DC;">• Αναζήτηση Ερευνητικής Ομάδας •</label>
                                                <button class="btn btn-link" @onclick="ToggleCompanySearchResearchGroupVisible">
                                                    @if (isCompanySearchResearchGroupVisible)
                                                    {
                                                        <span>&#8722;</span> <!-- Minus sign -->
                                                    }
                                                    else
                                                    {
                                                        <span>&#43;</span> <!-- Plus sign -->
                                                    }
                                                </button>
                                            </div>
                                        </div>

                                        @if (isCompanySearchResearchGroupVisible)
                                        {
                                            <!-- Search Form -->
                                            <div class="row mb-3">
                                                <!-- Search Research Group by Name -->
                                                <div class="col-md-4 position-relative">
                                                    <label for="searchResearchGroupNameAsCompanyToFindResearchGroup" style="font-weight: bold;">Όνομα Ερευνητικής Ομάδας</label>
                                                    <input 
                                                        type="text" 
                                                        id="searchResearchGroupNameAsCompanyToFindResearchGroup"
                                                        class="form-control" 
                                                        placeholder="Αναζήτηση με όνομα ομάδας" 
                                                        @bind="searchResearchGroupNameAsCompanyToFindResearchGroup" 
                                                        @oninput="HandleResearchGroupNameInput" />

                                                    <!-- Suggestions dropdown -->
                                                    <ul class="list-group position-absolute" 
                                                        style="z-index: 100; width: 100%; max-height: 150px; overflow-y: auto;" 
                                                        hidden="@(!researchgroupNameSuggestions.Any())">
                                                        @foreach (var suggestion in researchgroupNameSuggestions)
                                                        {
                                                            <li class="list-group-item list-group-item-action" 
                                                                @onclick="() => SelectResearchGroupNameSuggestion(suggestion)">
                                                                @suggestion
                                                            </li>
                                                        }
                                                    </ul>
                                                </div>
                                                <!-- Search Research Group by School -->
                                                <div class="col-md-4">
                                                    <label for="searchResearchGroupSchoolAsCompanyToFindResearchGroup" style="font-weight: bold;">Σχολή</label>
                                                    <div class="input-group">
                                                        <select class="form-control" 
                                                                value="@searchResearchGroupSchoolAsCompanyToFindResearchGroup"
                                                                @onchange="OnSchoolSelectionChanged">
                                                            <option value=""> - Επιλέξτε Σχολή - </option>
                                                            @foreach (var school in researchGroupSchools)
                                                            {
                                                                <option value="@school">@school</option>
                                                            }
                                                        </select>
                                                        <div class="input-group-append">
                                                            <span class="input-group-text">
                                                                <i class="fas fa-chevron-down"></i>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- Search Research Group by University Department -->
                                                <div class="col-md-4">
                                                    <label for="searchResearchGroupUniversityDepartmentAsCompanyToFindResearchGroup" style="font-weight: bold;">Τμήμα Πανεπιστημίου</label>
                                                    <div class="input-group">
                                                        <select class="form-control" 
                                                                @bind="searchResearchGroupUniversityDepartmentAsCompanyToFindResearchGroup"
                                                                disabled="@string.IsNullOrEmpty(searchResearchGroupSchoolAsCompanyToFindResearchGroup)">
                                                            <option value=""> - Επιλέξτε Τμήμα - </option>
                                                            @if (!string.IsNullOrEmpty(searchResearchGroupSchoolAsCompanyToFindResearchGroup))
                                                            {
                                                                @foreach (var department in filteredDepartments)
                                                                {
                                                                    <option value="@department">@department</option>
                                                                }
                                                            }
                                                        </select>
                                                        <div class="input-group-append">
                                                            <span class="input-group-text">
                                                                <i class="fas fa-chevron-down"></i>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- Search Research Group by Areas -->
                                                <div class="col-md-4 position-relative mt-3">
                                                    <label for="searchResearchGroupAreasAsCompanyToFindResearchGroup" style="font-weight: bold;">Περιοχές Έρευνας</label>
                                                    <input 
                                                        type="text" 
                                                        id="searchResearchGroupAreasAsCompanyToFindResearchGroup"
                                                        class="form-control" 
                                                        placeholder="Αναζήτηση με περιοχές έρευνας" 
                                                        @bind="searchResearchGroupAreasAsCompanyToFindResearchGroup" 
                                                        @oninput="HandleResearchGroupAreasInput"
                                                        @onkeydown="HandleResearchGroupAreasKeyDown" />

                                                    <!-- Suggestions dropdown for Research Areas -->
                                                    <ul class="list-group position-absolute" 
                                                        style="z-index: 100; width: 100%; max-height: 150px; overflow-y: auto;" 
                                                        hidden="@(!researchGroupAreasSuggestions.Any())">
                                                        @foreach (var suggestion in researchGroupAreasSuggestions)
                                                        {
                                                            <li class="list-group-item list-group-item-action" 
                                                                @onclick="() => SelectResearchGroupAreasSuggestion(suggestion)">
                                                                @suggestion
                                                            </li>
                                                        }
                                                    </ul>

                                                    <!-- Selected Research Areas -->
                                                    <div class="mt-3 selected-areas-container">
                                                        @if (selectedResearchGroupAreas.Any())
                                                        {
                                                            <ul class="list-group selected-areas-list">
                                                                @foreach (var area in selectedResearchGroupAreas)
                                                                {
                                                                    <li class="list-group-item d-flex justify-content-between align-items-center">
                                                                        @area
                                                                        <button class="btn btn-danger btn-sm" @onclick="() => RemoveSelectedResearchGroupArea(area)">
                                                                            <i class="fas fa-times"></i>
                                                                        </button>
                                                                    </li>
                                                                }
                                                            </ul>
                                                        }
                                                    </div>
                                                </div>

                                                <!-- Search Research Group by Skills -->
                                                <div class="col-md-4 position-relative mt-3">
                                                    <label for="searchResearchGroupSkillsAsCompanyToFindResearchGroup" style="font-weight: bold;">Τεχνολογίες</label>
                                                    <input 
                                                        type="text" 
                                                        id="searchResearchGroupSkillsAsCompanyToFindResearchGroup"
                                                        class="form-control" 
                                                        placeholder="Αναζήτηση με δεξιότητες" 
                                                        @bind="searchResearchGroupSkillsAsCompanyToFindResearchGroup" 
                                                        @oninput="HandleResearchGroupSkillsInput"
                                                        @onkeydown="HandleResearchGroupSkillsKeyDown" />

                                                    <!-- Suggestions dropdown for Research Skills -->
                                                    <ul class="list-group position-absolute" 
                                                        style="z-index: 100; width: 100%; max-height: 150px; overflow-y: auto;" 
                                                        hidden="@(!researchGroupSkillsSuggestions.Any())">
                                                        @foreach (var suggestion in researchGroupSkillsSuggestions)
                                                        {
                                                            <li class="list-group-item list-group-item-action" 
                                                                @onclick="() => SelectResearchGroupSkillsSuggestion(suggestion)">
                                                                @suggestion
                                                            </li>
                                                        }
                                                    </ul>

                                                    <!-- Selected Research Skills -->
                                                    <div class="mt-3 selected-skills-container">
                                                        @if (selectedResearchGroupSkills.Any())
                                                        {
                                                            <ul class="list-group selected-skills-list">
                                                                @foreach (var skill in selectedResearchGroupSkills)
                                                                {
                                                                    <li class="list-group-item d-flex justify-content-between align-items-center">
                                                                        @skill
                                                                        <button class="btn btn-danger btn-sm" @onclick="() => RemoveSelectedResearchGroupSkill(skill)">
                                                                            <i class="fas fa-times"></i>
                                                                        </button>
                                                                    </li>
                                                                } 
                                                            </ul>
                                                        }
                                                    </div>
                                                </div>

                                                <!-- Search Research Group by Keywords -->
                                                <div class="col-md-4 position-relative mt-3">
                                                    <label for="searchResearchGroupKeywordsAsCompanyToFindResearchGroup" style="font-weight: bold;">Λέξεις Κλειδιά</label>
                                                    <input 
                                                        type="text" 
                                                        id="searchResearchGroupKeywordsAsCompanyToFindResearchGroup"
                                                        class="form-control" 
                                                        placeholder="Αναζήτηση με λέξεις κλειδιά" 
                                                        @bind="searchResearchGroupKeywordsAsCompanyToFindResearchGroup" />
                                                </div>

                                                <!-- Search Research Groups Button -->
                                                <div class="col-md-4 text-end mt-3">
                                                    <button class="btn me-2" style="background-color: lightblue; color: black;" @onclick="SearchResearchGroupsAsCompany" title="Αναζήτηση Ερευνητικής Ομάδας">
                                                        <i class="fas fa-search"></i>
                                                    </button>

                                                    <!-- Clear Search Research Groups Button -->
                                                    <button class="btn" style="background-color: orange; color: black;" @onclick="ClearSearchFieldsAsCompanyToFindResearchGroup" title="Εκκαθάριση Πεδίων και Πίνακα Αποτελεσμάτων" aria-label="Clear">
                                                        <i class="fas fa-times"></i>
                                                    </button>
                                                </div>
                                            </div>

                                            <!-- Results Table -->
                                            @if (hasSearchedForResearchGroups && searchResultsAsCompanyToFindResearchGroup != null)
                                            {
                                                if (searchResultsAsCompanyToFindResearchGroup.Any())
                                                {
                                                    <div class="col-md-2">
                                                        <label style="color: #4682b4; font-weight: bold; font-size: 15px; display: block;">Αποτελέσματα ανά Σελίδα</label>
                                                        <div class="input-group" style="max-width: 65px;">
                                                            <select class="form-control form-control-sm" @onchange="OnPageSizeChange_SearchForResearchGroupsAsCompany" aria-label="Items per page">
                                                                @foreach (var option in pageSizeOptions_SearchForResearchGroupsAsCompany)
                                                                {
                                                                    <option value="@option" selected="@(ResearchGroupsPerPage_SearchForResearchGroupsAsCompany == option)">@option</option>
                                                                }
                                                            </select>
                                                            <div class="input-group-append">
                                                                <span class="input-group-text">
                                                                    <i class="fas fa-chevron-down"></i>
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <table class="table mt-4">
                                                        <thead>
                                                            <tr>
                                                                <td colspan="9" style="padding: 0;">
                                                                    <div style="display: flex; justify-content: space-between; align-items: center; height: 24px; line-height: 24px; width: 100%;">
                                                                        <i class="fa-solid fa-magnifying-glass" style="font-size: 18px; color: #0d6efd;"></i>
                                                                        <label class="form-label" style="color: #0d6efd; font-weight: bold; font-size: 18px; margin: 0;">Αποτέλεσμα Αναζήτησης</label>
                                                                        <i class="fa-solid fa-magnifying-glass" style="font-size: 18px; color: #0d6efd;"></i>
                                                                    </div>
                                                                </td>
                                                            </tr>
                                                            <tr style="background-color: lightgray; border: 2px solid black;">
                                                                <th style="border: 2px solid black;">
                                                                    <i class="fa-solid fa-signature fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                    Όνομα Ομάδας
                                                                </th>
                                                                <th style="border: 2px solid black;">
                                                                    <i class="fa-solid fa-building fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                    Σχολή
                                                                </th>
                                                                <th style="border: 2px solid black;">
                                                                    <i class="fa-solid fa-building fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                    Τμήμα
                                                                </th>
                                                                <th style="border: 2px solid black;">
                                                                    <i class="fa-solid fa-tags fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                    Περιοχές Έρευνας
                                                                </th>
                                                                <th style="border: 2px solid black;">
                                                                    <i class="fa-solid fa-tools fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                    Τεχνολογίες
                                                                </th>
                                                                <th style="border: 2px solid black;">
                                                                    <i class="fa-solid fa-key fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                    Λέξεις Κλειδιά
                                                                </th>
                                                                <th style="border: 2px solid black;">
                                                                    <i class="fa-solid fa-circle-info fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                    Επισκόπηση
                                                                </th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            @foreach (var researchGroup in GetPaginatedResearchGroupResults())
                                                            {
                                                                <tr>
                                                                    <td>@researchGroup.ResearchGroupName</td>
                                                                    <td>@researchGroup.ResearchGroupSchool</td>
                                                                    <td>@researchGroup.ResearchGroupUniversityDepartment</td>
                                                                    <td>
                                                                        @string.Join(", ", researchGroup.ResearchGroupAreas)
                                                                    </td>
                                                                    <td>
                                                                        @string.Join(", ", researchGroup.ResearchGroupSkills)
                                                                    </td>
                                                                    <td>
                                                                        @string.Join(", ", researchGroup.ResearchGroupKeywords)
                                                                    </td>
                                                                    <td>
                                                                        <div class="text-center">
                                                                            <i class="fas fa-eye" 
                                                                               style="cursor: pointer; font-size: 1.5rem;" 
                                                                               @onclick="() => ShowResearchGroupDetailsModal(researchGroup)">
                                                                            </i>
                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                            }
                                                        </tbody>
                                                    </table>
                                                    <div class="d-flex justify-content-center align-items-center mt-3 gap-1">
                                                        <!-- Pagination controls similar to professor search -->
                                                        <!-- First Page (<<) -->
                                                        <span class="pagination-item @(currentResearchGroupPage_SearchForResearchGroupsAsCompany == 1 ? "disabled" : "")" 
                                                              @onclick="@(() => GoToFirstResearchGroupPage())">
                                                            &lt;&lt;
                                                        </span>

                                                        <!-- Previous Page (<) -->
                                                        <span class="pagination-item @(currentResearchGroupPage_SearchForResearchGroupsAsCompany == 1 ? "disabled" : "")" 
                                                              @onclick="@(() => PreviousResearchGroupPage())">
                                                            &lt;
                                                        </span>

                                                        <!-- Page Numbers -->
                                                        @foreach (var pageNum in GetVisibleResearchGroupPages())
                                                        {
                                                            @if (pageNum == -1)
                                                            {
                                                                <span class="pagination-ellipsis">...</span>
                                                            }
                                                            else
                                                            {
                                                                <span class="pagination-item @(pageNum == currentResearchGroupPage_SearchForResearchGroupsAsCompany ? "active" : "")" 
                                                                      @onclick="@(() => GoToResearchGroupPage(pageNum))">
                                                                    @pageNum
                                                                </span>
                                                            }
                                                        }

                                                        <!-- Next Page (>) -->
                                                        <span class="pagination-item @(currentResearchGroupPage_SearchForResearchGroupsAsCompany == totalResearchGroupPages_SearchForResearchGroupsAsCompany ? "disabled" : "")" 
                                                              @onclick="@(() => NextResearchGroupPage())">
                                                            &gt;
                                                        </span>

                                                        <!-- Last Page (>>) -->
                                                        <span class="pagination-item @(currentResearchGroupPage_SearchForResearchGroupsAsCompany == totalResearchGroupPages_SearchForResearchGroupsAsCompany ? "disabled" : "")" 
                                                              @onclick="@(() => GoToLastResearchGroupPage())">
                                                            &gt;&gt;
                                                        </span>

                                                        <!-- Page counter -->
                                                        <span class="ms-3">Σελίδα @currentResearchGroupPage_SearchForResearchGroupsAsCompany από @totalResearchGroupPages_SearchForResearchGroupsAsCompany</span>
                                                    </div>
                                                }
                                                else
                                                {
                                                    <div class="alert alert-warning d-flex align-items-center" role="alert">
                                                      <i class="fas fa-exclamation-triangle me-2"></i>
                                                      <div>Δεν βρέθηκε κάποιο αποτέλεσμα που να πληρεί τα κριτήρια της Αναζήτησης σας.</div>
                                                    </div>
                                                }
                                            }
                                        }
                                    </div>
                                    @*SEARCH RESEARCH GROUP AS COMPANY - END - *@

                                    <!-- Modal for displaying research group details FOR SEARCH AS COMPANY -->
                                    @if (showResearchGroupDetailsModalWhenSearchForResearchGroupsAsCompany && selectedResearchGroupWhenSearchForResearchGroupsAsCompany != null)
                                    {
                                        <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0,0,0,0.5);">
                                            <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <h5 class="modal-title" style="color: #007BFF;">
                                                            @selectedResearchGroupWhenSearchForResearchGroupsAsCompany.ResearchGroupName
                                                        </h5>
                                                        <button type="button" class="btn-close" @onclick="CloseModalResearchGroupDetailsOnEyeIconWhenSearchForResearchGroupsAsCompany" aria-label="Κλείσιμο"></button>
                                                    </div>
                                                    <div class="modal-body">

                                                        <!-- Research Group Logo -->
                                                        <div class="form-group text-center mb-4">
                                                            @if (selectedResearchGroupWhenSearchForResearchGroupsAsCompany.ResearchGroupImage != null && selectedResearchGroupWhenSearchForResearchGroupsAsCompany.ResearchGroupImage.Length > 0)
                                                            {
                                                                var base64Image = Convert.ToBase64String(selectedResearchGroupWhenSearchForResearchGroupsAsCompany.ResearchGroupImage);
                                                                <img src="data:image/jpeg;base64,@base64Image" alt="Λογότυπο Ερευνητικής Ομάδας" 
                                                                     style="max-width: 150px; max-height: 150px; border-radius: 50%; object-fit: cover;" />
                                                            }
                                                            else
                                                            {
                                                                <div style="width: 150px; height: 150px; border-radius: 50%; background-color: #f8f9fa; display: flex; align-items: center; justify-content: center; margin: 0 auto;">
                                                                    <i class="fas fa-users fa-3x text-muted"></i>
                                                                </div>
                                                                <p class="text-muted mt-2">Δεν υπάρχει λογότυπο Ομάδας</p>
                                                            }
                                                        </div>

                                                        <!-- Research Group Name -->
                                                        <div class="form-group">
                                                            <label style="font-weight: bold;">Όνομα Ομάδας</label>
                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                <i class="fas fa-users" style="color: #007bff; margin-right: 8px;"></i>
                                                                <span>@selectedResearchGroupWhenSearchForResearchGroupsAsCompany.ResearchGroupName</span>
                                                            </div>
                                                        </div>

                                                        <!-- Research Group School -->
                                                        <div class="form-group">
                                                            <label style="font-weight: bold;">Σχολή</label>
                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                <i class="fas fa-university" style="color: #007bff; margin-right: 8px;"></i>
                                                                <span>@selectedResearchGroupWhenSearchForResearchGroupsAsCompany.ResearchGroupSchool</span>
                                                            </div>
                                                        </div>

                                                        <!-- Research Group University Department -->
                                                        <div class="form-group">
                                                            <label style="font-weight: bold;">Τμήμα Πανεπιστημίου</label>
                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                <i class="fa-solid fa-building" style="color: #6c757d; margin-right: 8px;"></i>
                                                                <span>@selectedResearchGroupWhenSearchForResearchGroupsAsCompany.ResearchGroupUniversityDepartment</span>
                                                            </div>
                                                        </div>

                                                        <!-- Research Group Email -->
                                                        <div class="form-group">
                                                            <label style="font-weight: bold;">Email</label>
                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                <i class="fas fa-envelope" style="color: #007bff; margin-right: 8px;"></i>
                                                                <span>@selectedResearchGroupWhenSearchForResearchGroupsAsCompany.ResearchGroupEmail</span>
                                                            </div>
                                                        </div>

                                                        <!-- Research Group Contact Email -->
                                                        @if (!string.IsNullOrEmpty(selectedResearchGroupWhenSearchForResearchGroupsAsCompany.ResearchGroupContactEmail))
                                                        {
                                                            <div class="form-group">
                                                                <label style="font-weight: bold;">Email Επικοινωνίας</label>
                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                    <i class="fas fa-envelope" style="color: #6c757d; margin-right: 8px;"></i>
                                                                    <span>@selectedResearchGroupWhenSearchForResearchGroupsAsCompany.ResearchGroupContactEmail</span>
                                                                </div>
                                                            </div>
                                                        }

                                                        <!-- Research Group Telephone -->
                                                        @if (!string.IsNullOrEmpty(selectedResearchGroupWhenSearchForResearchGroupsAsCompany.ResearchGroupTelephoneNumber))
                                                        {
                                                            <div class="form-group">
                                                                <label style="font-weight: bold;">Τηλέφωνο</label>
                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                    <i class="fas fa-phone" style="color: #6c757d; margin-right: 8px;"></i>
                                                                    <span>@selectedResearchGroupWhenSearchForResearchGroupsAsCompany.ResearchGroupTelephoneNumber</span>
                                                                </div>
                                                            </div>
                                                        }

                                                        <!-- Research Group Areas -->
                                                        <div class="form-group">
                                                            <label style="font-weight: bold;">Περιοχές Έρευνας</label>
                                                            <textarea class="form-control" readonly>@selectedResearchGroupWhenSearchForResearchGroupsAsCompany.ResearchGroupAreas</textarea>
                                                        </div>

                                                        <!-- Research Group Skills -->
                                                        <div class="form-group">
                                                            <label style="font-weight: bold;">Δεξιότητες</label>
                                                            <textarea class="form-control" readonly>@selectedResearchGroupWhenSearchForResearchGroupsAsCompany.ResearchGroupSkills</textarea>
                                                        </div>

                                                        <!-- Research Group Keywords -->
                                                        <div class="form-group">
                                                            <label style="font-weight: bold;">Λέξεις Κλειδιά</label>
                                                            <textarea class="form-control" readonly>@selectedResearchGroupWhenSearchForResearchGroupsAsCompany.ResearchGroupKeywords</textarea>
                                                        </div>

                                                        <!-- Faculty Members -->
                                                        <div class="form-group">
                                                            <label style="font-weight: bold;">Ακαδημαϊκό Προσωπικό</label>
                                                            <div class="form-control" style="height: auto; min-height: 60px;">
                                                                @if (facultyMembers.Any())
                                                                {
                                                                    @foreach (var member in facultyMembers)
                                                                    {
                                                                        <span class="badge bg-info me-1 mb-1">@member.FullName</span>
                                                                    }
                                                                }
                                                                else
                                                                {
                                                                    <span class="text-muted">Δεν υπάρχουν ακαδημαϊκοί μέλη</span>
                                                                }
                                                            </div>
                                                        </div>

                                                        <!-- Non-Faculty Members -->
                                                        <div class="form-group">
                                                            <label style="font-weight: bold;">Μη Ακαδημαϊκό Προσωπικό</label>
                                                            <div class="form-control" style="height: auto; min-height: 60px;">
                                                                @if (nonFacultyMembers.Any())
                                                                {
                                                                    @foreach (var member in nonFacultyMembers)
                                                                    {
                                                                        <span class="badge bg-warning text-dark me-1 mb-1">@member.FullName</span>
                                                                    }
                                                                }
                                                                else
                                                                {
                                                                    <span class="text-muted">Δεν υπάρχουν μη ακαδημαϊκά μέλη</span>
                                                                }
                                                            </div>
                                                        </div>

                                                        <!-- Patents Count -->
                                                        <div class="form-group">
                                                            <label style="font-weight: bold;">Αριθμός Πατεντών</label>
                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                <i class="fas fa-certificate" style="color: #ffc107; margin-right: 8px;"></i>
                                                                <span>@patentsCount</span>
                                                            </div>
                                                        </div>

                                                        <!-- Active Research Actions Count -->
                                                        <div class="form-group">
                                                            <label style="font-weight: bold;">Ενεργές Ερευνητικές Δράσεις</label>
                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                <i class="fas fa-flask" style="color: #28a745; margin-right: 8px;"></i>
                                                                <span>@activeResearchActionsCount</span>
                                                            </div>
                                                        </div>

                                                        <!-- Spin-off Companies -->
                                                        <div class="form-group">
                                                            <label style="font-weight: bold;">Spin-off Εταιρεία</label>
                                                            <div class="form-control" style="height: auto; min-height: 60px;">
                                                                @if (spinOffCompanies.Any())
                                                                {
                                                                    @foreach (var company in spinOffCompanies)
                                                                    {
                                                                        <div class="mb-2">
                                                                            <span class="fw-bold">@company.CompanyTitle</span>
                                                                            <span class="text-muted">(ΑΦΜ: @company.CompanyAFM)</span>
                                                                        </div>
                                                                    }
                                                                }
                                                                else
                                                                {
                                                                    <span class="text-muted">Δεν υπάρχουν spin-off εταιρείες</span>
                                                                }
                                                            </div>
                                                        </div>

                                                        <!-- Website -->
                                                        @if (!string.IsNullOrEmpty(selectedResearchGroupWhenSearchForResearchGroupsAsCompany.ResearchGroup_Website))
                                                        {
                                                            <div class="form-group">
                                                                <label style="font-weight: bold;">Ιστοσελίδα</label>
                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                    <i class="fas fa-globe" style="color: #007bff; margin-right: 8px;"></i>
                                                                    <a href="@selectedResearchGroupWhenSearchForResearchGroupsAsCompany.ResearchGroup_Website" target="_blank" class="text-decoration-none w-100">
                                                                        <textarea class="form-control border-0 bg-transparent p-0" readonly rows="1" style="resize: none; overflow: hidden; cursor: pointer;">@selectedResearchGroupWhenSearchForResearchGroupsAsCompany.ResearchGroup_Website</textarea>
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        }

                                                        <!-- Facebook -->
                                                        @if (!string.IsNullOrEmpty(selectedResearchGroupWhenSearchForResearchGroupsAsCompany.ResearchGroup_Facebook))
                                                        {
                                                            <div class="form-group">
                                                                <label style="font-weight: bold;">Facebook</label>
                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                    <i class="fab fa-facebook" style="color: #3b5998; margin-right: 8px;"></i>
                                                                    <a href="@selectedResearchGroupWhenSearchForResearchGroupsAsCompany.ResearchGroup_Facebook" target="_blank" class="text-decoration-none w-100">
                                                                        <textarea class="form-control border-0 bg-transparent p-0" readonly rows="1" style="resize: none; overflow: hidden; cursor: pointer;">@selectedResearchGroupWhenSearchForResearchGroupsAsCompany.ResearchGroup_Facebook</textarea>
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        }

                                                        <!-- Twitter -->
                                                        @if (!string.IsNullOrEmpty(selectedResearchGroupWhenSearchForResearchGroupsAsCompany.ResearchGroup_Twitter))
                                                        {
                                                            <div class="form-group">
                                                                <label style="font-weight: bold;">Twitter</label>
                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                    <i class="fab fa-twitter" style="color: #1da1f2; margin-right: 8px;"></i>
                                                                    <a href="@selectedResearchGroupWhenSearchForResearchGroupsAsCompany.ResearchGroup_Twitter" target="_blank" class="text-decoration-none w-100">
                                                                        <textarea class="form-control border-0 bg-transparent p-0" readonly rows="1" style="resize: none; overflow: hidden; cursor: pointer;">@selectedResearchGroupWhenSearchForResearchGroupsAsCompany.ResearchGroup_Twitter</textarea>
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        }

                                                        <!-- LinkedIn -->
                                                        @if (!string.IsNullOrEmpty(selectedResearchGroupWhenSearchForResearchGroupsAsCompany.ResearchGroup_LinkedIn))
                                                        {
                                                            <div class="form-group">
                                                                <label style="font-weight: bold;">LinkedIn</label>
                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                    <i class="fab fa-linkedin" style="color: #0077b5; margin-right: 8px;"></i>
                                                                    <a href="@selectedResearchGroupWhenSearchForResearchGroupsAsCompany.ResearchGroup_LinkedIn" target="_blank" class="text-decoration-none w-100">
                                                                        <textarea class="form-control border-0 bg-transparent p-0" readonly rows="1" style="resize: none; overflow: hidden; cursor: pointer;">@selectedResearchGroupWhenSearchForResearchGroupsAsCompany.ResearchGroup_LinkedIn</textarea>
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        }

                                                        <!-- YouTube -->
                                                        @if (!string.IsNullOrEmpty(selectedResearchGroupWhenSearchForResearchGroupsAsCompany.ResearchGroup_YouTubeChannel))
                                                        {
                                                            <div class="form-group">
                                                                <label style="font-weight: bold;">YouTube</label>
                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                    <i class="fab fa-youtube" style="color: #ff0000; margin-right: 8px;"></i>
                                                                    <a href="@selectedResearchGroupWhenSearchForResearchGroupsAsCompany.ResearchGroup_YouTubeChannel" target="_blank" class="text-decoration-none w-100">
                                                                        <textarea class="form-control border-0 bg-transparent p-0" readonly rows="1" style="resize: none; overflow: hidden; cursor: pointer;">@selectedResearchGroupWhenSearchForResearchGroupsAsCompany.ResearchGroup_YouTubeChannel</textarea>
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        }
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-secondary" @onclick="CloseModalResearchGroupDetailsOnEyeIconWhenSearchForResearchGroupsAsCompany">Κλείσιμο</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    }
                                </div>                                                                                     
                            }
                       }




@*---------------------------------------------------------------------------------------- PROFESSORS TAB TABLE START ---------------------------------------------------------------------------------------------------------------------------------------------*@
                            else if (UserRole == "Professor")
                            {
                                @if (!isInitializedAsProfessorUser)
                                {
                                    <div style="color: purple; font-weight: bold; text-align: center; margin: 10px 0;">
                                        Φορτώνει, Παρακαλώ Περιμένετε...
                                    </div>
                                    <div class="loading-bar-container">                                       
                                        <div class="loading-bar"></div>
                                    </div>
                                }
                                else if (!isProfessorRegistered)
                                {
                                    <div style="display: flex; justify-content: flex-start; padding: 20px; flex-direction: column;">
                                        <div style="width: 300px; border: none; border-radius: 12px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); transition: transform 0.3s ease, box-shadow 0.3s ease; background: linear-gradient(135deg, #f9f9f9, #e0e0e0);">
                                            <div style="padding: 20px; text-align: center;">
                                                <h5 style="font-size: 1.5rem; font-weight: bold; color: #333; margin-bottom: 20px;">Εγγραφή Καθηγητή</h5>
                                                <a style="background-color: #007bff; border: none; border-radius: 25px; padding: 10px 20px; font-size: 1rem; color: white; text-decoration: none; transition: background-color 0.3s ease, transform 0.2s ease;" 
                                                   href="professorRegistration" 
                                                   onmouseover="this.style.backgroundColor='#0056b3'; this.style.transform='scale(1.05)'" 
                                                   onmouseout="this.style.backgroundColor='#007bff'; this.style.transform='scale(1)'">
                                                    Εγγραφή
                                                </a>
                                            </div>
                                        </div>
                                        <p style="font-size: 0.9rem; color: #000; margin-top: 7px; text-align: center; font-weight: bold;">
                                            <span style="color: #ff0000;">**</span> <span style="color: #ff0000;">Προσοχή</span>: Για εμφάνιση του περιεχομένου της σελίδας είναι <span style="color: #ff0000;">Υποχρεωτική</span> η Εγγραφή σας
                                        </p>                                      
                                    </div>
                                }
                                else
                                {
                                <div class="content-area">
                                    <div class="table-bordered">
                                        <!-- Tabs navigation -->
                                        <ul class="nav nav-tabs" id="myTab" role="tablist">
                                            <li class="nav-item" role="presentation">
                                                <button class="nav-link fade show active" id="professorannouncements-tab" data-bs-toggle="tab" data-bs-target="#professorannouncements" type="button" role="tab" aria-controls="professorannouncements" aria-selected="true">Ανακοινώσεις</button>
                                            </li>
                                            <li class="nav-item" role="presentation">
                                                <button class="nav-link" id="professorevent-tab" data-bs-toggle="tab" data-bs-target="#professorevent" type="button" role="tab" aria-controls="professorevent" aria-selected="false">Εκδηλώσεις</button>
                                            </li>
                                            <li class="nav-item" role="presentation">
                                                <button class="nav-link" id="professorthesis-tab" data-bs-toggle="tab" data-bs-target="#professorthesis" type="button" role="tab" aria-controls="professorthesis" aria-selected="false">Πτυχιακές Εργασίες</button>
                                            </li>
                                            <li class="nav-item" role="presentation">
                                                <button class="nav-link" id="professorinternships-tab" data-bs-toggle="tab" data-bs-target="#professorinternships" type="button" role="tab" aria-controls="professorinternships" aria-selected="false">Θέσεις Πρακτικής Άσκησης</button>
                                            </li>
                                            <li class="nav-item" role="presentation">
                                                <button class="nav-link" id="professorsearchstudent-tab" data-bs-toggle="tab" data-bs-target="#professorsearchstudent" type="button" role="tab" aria-controls="professorsearchstudent" aria-selected="false">Αναζήτηση Φοιτητή</button>
                                            </li>
                                            <li class="nav-item" role="presentation">
                                                <button class="nav-link" id="professorsearchcompany-tab" data-bs-toggle="tab" data-bs-target="#professorsearchcompany" type="button" role="tab" aria-controls="professorsearchcompany" aria-selected="false">Αναζήτηση Εταιρείας</button>
                                            </li>
                                        </ul>
                                    
                                              <!-- Tab panes -->
                                              <div class="tab-content mt-3" id="myTabContent">
                                                    <!-- CREATE ANNOUNCEMENTS TAB AS PROFESSOR -->
                                                    <div class="tab-pane fade show active" id="professorannouncements" role="tabpanel" aria-labelledby="professorannouncements-tab">

                                                     @*iNPUT FIELDS SHOULD BE HERE FOR UPLOAD ANNOUNCEMENT AS PROFESSOR*@
                                                        <div class="tab-pane  fade show active" id="announcements" role="tabpanel" aria-labelledby="announcements-tab">
                                                            <div class="mb-3 row-dark-gray mt-4">
                                                                <div class="d-flex justify-content-between align-items-center">
                                                                    <label class="form-label" style="color: #FFF8DC;">• Πρόσφατες Ανακοινώσεις •</label>
                                                                    <button class="btn btn-link" @onclick="ToggleAnnouncementsAsProfessorVisibility">
                                                                        @if (isAnnouncementsAsProfessorVisible)
                                                                        {
                                                                            <span>&#8722;</span> <!-- Minus sign -->
                                                                        }
                                                                        else
                                                                        {
                                                                            <span>&#43;</span> <!-- Plus sign -->
                                                                        }
                                                                    </button>
                                                                </div>
                                                            </div>
                                                            @if(isAnnouncementsAsProfessorVisible)
                                                            {
                                                                            <!-- University News Section -->
                                                                            <div class="mb-3" style="background-color: #e6f2ff; border: 1px solid #b3c6e0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                                                                <div class="d-flex justify-content-between align-items-center p-3" style="border-bottom: 1px solid #b3c6e0;">
                                                                                    <h1 class="news-heading form-label m-0">
                                                                                        <span class="black-text">
                                                                                            <span style="color: #b399d4; margin-left: 10px; margin-right: 5px;">
                                                                                                <i class="fas fa-rss"></i>
                                                                                            </span>
                                                                                            Πανεπιστήμιο Αθηνών
                                                                                        </span>
                                                                                    </h1>
                                                                                    <button class="btn" 
                                                                                            style="width: 30px; height: 30px; border-radius: 50%; background-color: #0d47a1; color: white; border: none; padding: 0; display: flex; align-items: center; justify-content: center; margin-right: 10px;" 
                                                                                            @onclick="ToggleUniversityNewsVisibility">
                                                                                        @if (isUniversityNewsVisible)
                                                                                        {
                                                                                            <span>&#8722;</span> 
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <span>&#43;</span> 
                                                                                        }
                                                                                    </button>
                                                                                </div>
    
                                                                                @if (isUniversityNewsVisible)
                                                                                {
                                                                                    <div id="university-news-content" class="p-3" style="border-top: 1px solid #e6f2ff;">
                                                                                        @if (newsArticles != null && newsArticles.Any())
                                                                                        {
                                                                                            @foreach (var article in newsArticles)
                                                                                            {
                                                                                                <div class="news-article mb-2 pb-2" style="border-bottom: 1px dashed #ccc;">
                                                                                                    <a href="@article.Url" target="_blank" style="color: #0d47a1; text-decoration: none;">
                                                                                                        <i class="fa fa-external-link me-2" style="font-size: 0.8em;"></i>@article.Title
                                                                                                    </a>
                                                                                                </div>
                                                                                            }
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <p class="mb-0 text-muted">Καμία Ανακοίνωση από το Πανεπιστήμιο Αθηνών ακόμη....</p>
                                                                                        }
                                                                                    </div>
                                                                                }
                                                                            </div>

                                                                            <!-- SVSE News Section -->
                                                                            <div class="mb-3" style="background-color: #e6f2ff; border: 1px solid #b3c6e0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                                                                <div class="d-flex justify-content-between align-items-center p-3" style="border-bottom: 1px solid #b3c6e0;">
                                                                                    <h1 class="news-heading form-label m-0">
                                                                                        <span class="black-text">
                                                                                            <span style="color: #b399d4; margin-left: 10px; margin-right: 5px;">
                                                                                                <i class="fas fa-rss"></i>
                                                                                            </span>
                                                                                            Σύνδεσμος Βιομηχανιών Στερεάς Ελλάδας
                                                                                        </span>
                                                                                    </h1>
                                                                                    <button class="btn" 
                                                                                            style="width: 30px; height: 30px; border-radius: 50%; background-color: #0d47a1; color: white; border: none; padding: 0; display: flex; align-items: center; justify-content: center; margin-right: 10px;" 
                                                                                            @onclick="ToggleSvseNewsVisibility">
                                                                                        @if (isSvseNewsVisible)
                                                                                        {
                                                                                            <span>&#8722;</span> <!-- Minus sign -->
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <span>&#43;</span> <!-- Plus sign -->
                                                                                        }
                                                                                    </button>
                                                                                </div>
    
                                                                                @if (isSvseNewsVisible)
                                                                                {
                                                                                    <div id="svse-news-content" class="p-3" style="border-top: 1px solid #e6f2ff;">
                                                                                        @if (svseNewsArticles != null && svseNewsArticles.Any())
                                                                                        {
                                                                                            @foreach (var article in svseNewsArticles)
                                                                                            {
                                                                                                <div class="news-article mb-2 pb-2" style="border-bottom: 1px dashed #ccc;">
                                                                                                    <a href="@article.Url" target="_blank" style="color: #0d47a1; text-decoration: none;">
                                                                                                        <i class="fa fa-external-link me-2" style="font-size: 0.8em;"></i>@article.Title
                                                                                                    </a>
                                                                                                </div>
                                                                                            }
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <p class="mb-0 text-muted">Καμία Ανακοίνωση από τον ΣΒΣΕ ακόμη....</p>
                                                                                        }
                                                                                    </div>
                                                                                }
                                                                            </div>

                                                                            <!-- Platform company announcements -->
                                                                            <div class="mb-3" style="background-color: #e6f2ff; border: 1px solid #b3c6e0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                                                                <div class="d-flex justify-content-between align-items-center p-3" style="border-bottom: 1px solid #b3c6e0;">
                                                                                    <h1 class="news-heading form-label m-0">
                                                                                        <span class="black-text">
                                                                                            <span style="color: #b399d4; margin-left: 10px; margin-right: 5px;">
                                                                                                <i class="fas fa-list"></i>
                                                                                            </span>
                                                                                            Ανακοινώσεις Εταιρειών
                                                                                        </span>
                                                                                    </h1>
                                                                                    <button class="btn" 
                                                                                            style="width: 30px; height: 30px; border-radius: 50%; background-color: #0d47a1; color: white; border: none; padding: 0; display: flex; align-items: center; justify-content: center; margin-right: 10px;" 
                                                                                            @onclick="ToggleCompanyAnnouncementsVisibility">
                                                                                        @if (isCompanyAnnouncementsVisible)
                                                                                        {
                                                                                            <span>&#8722;</span> <!-- Minus sign -->
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <span>&#43;</span> <!-- Plus sign -->
                                                                                        }
                                                                                    </button>
                                                                                </div>
    
                                                                                @if (isCompanyAnnouncementsVisible)
                                                                                {
                                                                                    <div class="p-3" style="border-top: 1px solid #e6f2ff;">
                                                                                        @if (Announcements != null && Announcements.Any(announcement => announcement.CompanyAnnouncementStatus == "Δημοσιευμένη"))
                                                                                        {
                                                                                            <!-- Display paginated announcements sorted by upload date descending -->
                                                                                            @foreach (var announcement in Announcements
                                                                                               .Where(a => a.CompanyAnnouncementStatus == "Δημοσιευμένη")
                                                                                               .OrderByDescending(a => a.CompanyAnnouncementUploadDate)
                                                                                               .Skip((currentPageForCompanyAnnouncements - 1) * pageSize)
                                                                                               .Take(pageSize))
                                                                                            {
                                                                                                <div class="news-article mb-3 pb-2" style="border-bottom: 1px dashed #ccc;">
                                                                                                    <!-- Clicking on title toggles description -->
                                                                                                    <a href="javascript:void(0);"
                                                                                                       @onclick="() => ToggleDescription(announcement.Id)"
                                                                                                       style="display: block; max-width: 100%; overflow-wrap: break-word; color: #0d47a1; text-decoration: none; cursor: pointer;"
                                                                                                       title="Κάντε Κλικ εδώ για να δείτε την περιγραφή της ανακοίνωσης">
                                                                                                        <span class="black-text">• <strong>@(announcement.Company?.CompanyName ?? "Άγνωστη Εταιρεία")</strong></span> - @announcement.CompanyAnnouncementTitle
                                                                                                        <span class="text-muted">(@announcement.CompanyAnnouncementUploadDate.ToString("dd/MM/yyyy"))</span>
                                                                                                    </a>

                                                                                                    <!-- Show description based on toggle state -->
                                                                                                    <div class="announcement-description mt-2 @(expandedAnnouncementId == announcement.Id ? "expanded" : "collapsed")">
                                                                                                        @if (expandedAnnouncementId == announcement.Id)
                                                                                                        {
                                                                                                            <p style="color: #333;">@announcement.CompanyAnnouncementDescription</p>
                                    
                                                                                                            @if (announcement.CompanyAnnouncementAttachmentFile != null && announcement.CompanyAnnouncementAttachmentFile.Length > 0)
                                                                                                            {
                                                                                                                <p class="announcement-attachment mt-2">
                                                                                                                    <a href="#"
                                                                                                                       @onclick="() => DownloadAnnouncementAttachmentFrontPage(announcement.CompanyAnnouncementAttachmentFile, announcement.CompanyAnnouncementTitle)"
                                                                                                                       style="color: #c62828; text-decoration: none;"
                                                                                                                       title="Κάντε Κλικ εδώ για να κατεβάσετε το αρχείο">
                                                                                                                        <i class="fa fa-download me-1"></i> 
                                                                                                                        Συννημένο Αρχείο Ανακοίνωσης
                                                                                                                    </a>
                                                                                                                </p>
                                                                                                            }
                                                                                                        }
                                                                                                    </div>
                                                                                                </div>
                                                                                            }

                                                                                                <!-- Pagination Controls for Company Announcements -->
                                                                                                <div class="d-flex justify-content-center align-items-center mt-3 gap-1">
                                                                                                    <!-- First Page (<<) -->
                                                                                                    <span class="pagination-item @(currentPageForCompanyAnnouncements == 1 ? "disabled" : "")"
                                                                                                          @onclick="GoToFirstPageForCompanyAnnouncements">
                                                                                                        &lt;&lt;
                                                                                                    </span>

                                                                                                    <!-- Previous Page (<) -->
                                                                                                    <span class="pagination-item @(currentPageForCompanyAnnouncements == 1 ? "disabled" : "")"
                                                                                                          @onclick="PreviousPageForCompanyAnnouncements">
                                                                                                        &lt;
                                                                                                    </span>

                                                                                                    <!-- Page Numbers -->
                                                                                                    @foreach (var pageNumber in GetVisiblePagesForCompanyAnnouncements())
                                                                                                    {
                                                                                                        if (pageNumber == -1)
                                                                                                        {
                                                                                                            <span class="pagination-ellipsis">...</span>
                                                                                                        }
                                                                                                        else
                                                                                                        {
                                                                                                            <span class="pagination-item @(pageNumber == currentPageForCompanyAnnouncements ? "active" : "")"
                                                                                                                  @onclick="() => GoToPageForCompanyAnnouncements(pageNumber)">
                                                                                                                @pageNumber
                                                                                                            </span>
                                                                                                        }
                                                                                                    }

                                                                                                    <!-- Next Page (>) -->
                                                                                                    <span class="pagination-item @(currentPageForCompanyAnnouncements == totalPagesForCompanyAnnouncements ? "disabled" : "")"
                                                                                                          @onclick="NextPageForCompanyAnnouncements">
                                                                                                        &gt;
                                                                                                    </span>

                                                                                                    <!-- Last Page (>>) -->
                                                                                                    <span class="pagination-item @(currentPageForCompanyAnnouncements == totalPagesForCompanyAnnouncements ? "disabled" : "")"
                                                                                                          @onclick="GoToLastPageForCompanyAnnouncements">
                                                                                                        &gt;&gt;
                                                                                                    </span>

                                                                                                    <span class="ms-3">Σελίδα @currentPageForCompanyAnnouncements από @totalPagesForCompanyAnnouncements</span>
                                                                                                </div>

                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <p class="mb-0 text-muted">Καμία Ανακοίνωση από Εταιρείες ακόμη......</p>
                                                                                        }
                                                                                    </div>
                                                                                }
                                                                            </div>

                                                                            <!-- Platform professor announcements -->
                                                                            <div class="mb-3" style="background-color: #e6f2ff; border: 1px solid #b3c6e0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                                                                <div class="d-flex justify-content-between align-items-center p-3" style="border-bottom: 1px solid #b3c6e0;">
                                                                                    <h1 class="news-heading form-label m-0">
                                                                                        <span class="black-text">
                                                                                            <span style="color: #b399d4; margin-left: 10px; margin-right: 5px;">
                                                                                                <i class="fas fa-list"></i>
                                                                                            </span>
                                                                                            Ανακοινώσεις Καθηγητών
                                                                                        </span>
                                                                                    </h1>
                                                                                    <button class="btn" 
                                                                                            style="width: 30px; height: 30px; border-radius: 50%; background-color: #0d47a1; color: white; border: none; padding: 0; display: flex; align-items: center; justify-content: center; margin-right: 10px; cursor: pointer;"
                                                                                            @onclick="ToggleProfessorAnnouncementsVisibility">
                                                                                        @if (isProfessorAnnouncementsVisible)
                                                                                        {
                                                                                            <span>&#8722;</span> <!-- Minus sign -->
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <span>&#43;</span> <!-- Plus sign -->
                                                                                        }
                                                                                    </button>
                                                                                </div>
    
                                                                                @if (isProfessorAnnouncementsVisible)
                                                                                {
                                                                                    <div class="p-3" style="border-top: 1px solid #e6f2ff;">
                                                                                        @if (ProfessorAnnouncements != null && ProfessorAnnouncements.Any(announcement => announcement.ProfessorAnnouncementStatus == "Δημοσιευμένη"))
                                                                                        {
                                                                                            <!-- Display paginated announcements sorted by upload date descending -->
                                                                                            @foreach (var announcement in ProfessorAnnouncements
                                                                                           .Where(a => a.ProfessorAnnouncementStatus == "Δημοσιευμένη")
                                                                                           .OrderByDescending(a => a.ProfessorAnnouncementUploadDate)
                                                                                           .Skip((currentPageForProfessorAnnouncements - 1) * pageSize)
                                                                                           .Take(pageSize))
                                                                                           {
                                                                                                <div class="news-article mb-3 pb-2" style="border-bottom: 1px dashed #ccc;">
                                                                                                    <!-- Clicking on title toggles description -->
                                                                                                    <a href="javascript:void(0);"
                                                                                                       @onclick="() => ToggleDescriptionForProfessorAnnouncements(announcement.Id)"
                                                                                                       style="display: block; max-width: 100%; overflow-wrap: break-word; color: #0d47a1; text-decoration: none; cursor: pointer;"
                                                                                                       title="Κάντε Κλικ εδώ για να δείτε την περιγραφή της ανακοίνωσης">
                                                                                                        <span class="black-text">• 
                                                                                                            <strong>@announcement.Professor?.ProfName</strong> 
                                                                                                            <strong>@announcement.Professor?.ProfSurname</strong>
                                                                                                        </span> - @announcement.ProfessorAnnouncementTitle
                                                                                                        <span class="text-muted">(@announcement.ProfessorAnnouncementUploadDate.ToString("dd/MM/yyyy"))</span>
                                                                                                    </a>
                                                                                                    <!-- Show description based on toggle state -->
                                                                                                    <div class="announcement-description mt-2 @(expandedProfessorAnnouncementId == announcement.Id ? "expanded" : "collapsed")">
                                                                                                        @if (expandedProfessorAnnouncementId == announcement.Id)
                                                                                                        {
                                                                                                            <p style="color: #333;">@announcement.ProfessorAnnouncementDescription</p>
                                
                                                                                                            @if (announcement.ProfessorAnnouncementAttachmentFile != null && announcement.ProfessorAnnouncementAttachmentFile.Length > 0)
                                                                                                            {
                                                                                                                <p class="announcement-attachment mt-2">
                                                                                                                    <a href="#"
                                                                                                                       @onclick="() => DownloadProfessorAnnouncementAttachmentFrontPage(announcement.ProfessorAnnouncementAttachmentFile, announcement.ProfessorAnnouncementTitle)"
                                                                                                                       style="color: #c62828; text-decoration: none;"
                                                                                                                       title="Κάντε Κλικ εδώ για να κατεβάσετε το αρχείο">
                                                                                                                        <i class="fa fa-download me-1"></i>
                                                                                                                        Συννημένο Αρχείο Ανακοίνωσης
                                                                                                                    </a>
                                                                                                                </p>
                                                                                                            }
                                                                                                        }
                                                                                                    </div>
                                                                                                </div>
                                                                                           }
                                                                                                <!-- Pagination Controls for Professor Announcements -->
                                                                                                <div class="d-flex justify-content-center align-items-center mt-3 gap-1">
                                                                                                    <!-- First Page (<<) -->
                                                                                                    <span class="pagination-item @(currentPageForProfessorAnnouncements == 1 ? "disabled" : "")"
                                                                                                          @onclick="GoToFirstPageForProfessorAnnouncements">
                                                                                                        &lt;&lt;
                                                                                                    </span>

                                                                                                    <!-- Previous Page (<) -->
                                                                                                    <span class="pagination-item @(currentPageForProfessorAnnouncements == 1 ? "disabled" : "")"
                                                                                                          @onclick="PreviousPageForProfessorAnnouncements">
                                                                                                        &lt;
                                                                                                    </span>

                                                                                                    <!-- Page Numbers -->
                                                                                                    @foreach (var pageNumber in GetVisiblePagesForProfessorAnnouncements())
                                                                                                    {
                                                                                                        if (pageNumber == -1)
                                                                                                        {
                                                                                                            <span class="pagination-ellipsis">...</span>
                                                                                                        }
                                                                                                        else
                                                                                                        {
                                                                                                            <span class="pagination-item @(pageNumber == currentPageForProfessorAnnouncements ? "active" : "")"
                                                                                                                  @onclick="() => GoToPageForProfessorAnnouncements(pageNumber)">
                                                                                                                @pageNumber
                                                                                                            </span>
                                                                                                        }
                                                                                                    }

                                                                                                    <!-- Next Page (>) -->
                                                                                                    <span class="pagination-item @(currentPageForProfessorAnnouncements == totalPagesForProfessorAnnouncements ? "disabled" : "")"
                                                                                                          @onclick="NextPageForProfessorAnnouncements">
                                                                                                        &gt;
                                                                                                    </span>

                                                                                                    <!-- Last Page (>>) -->
                                                                                                    <span class="pagination-item @(currentPageForProfessorAnnouncements == totalPagesForProfessorAnnouncements ? "disabled" : "")"
                                                                                                          @onclick="GoToLastPageForProfessorAnnouncements">
                                                                                                        &gt;&gt;
                                                                                                    </span>

                                                                                                    <span class="ms-3">Σελίδα @currentPageForProfessorAnnouncements από @totalPagesForProfessorAnnouncements</span>
                                                                                                </div>

                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <p class="mb-0 text-muted">Καμία Ανακοίνωση από Καθηγητές ακόμη......</p>
                                                                                        }
                                                                                    </div>
                                                                                }
                                                                            </div>
                                                                            @*
                                                                            <div class="mb-3" style="background-color: #e6f2ff; border: 1px solid #b3c6e0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                                                                <div class="d-flex justify-content-between align-items-center p-3" style="border-bottom: 1px solid #b3c6e0;">
                                                                                    <h1 class="news-heading form-label m-0">
                                                                                        <span class="black-text">
                                                                                            <span style="color: #b399d4; margin-left: 10px; margin-right: 5px;">
                                                                                                <i class="fas fa-calendar-day"></i>
                                                                                            </span>
                                                                                            Εκδηλώσεις Εταιρειών
                                                                                        </span>
                                                                                    </h1>
                                                                                    <button class="btn" 
                                                                                            style="width: 30px; height: 30px; border-radius: 50%; background-color: #0d47a1; color: white; border: none; padding: 0; display: flex; align-items: center; justify-content: center; margin-right: 10px; cursor: pointer; transition: all 0.2s ease;"
                                                                                            @onclick="ToggleCompanyEventsVisibility">
                                                                                        @if (isCompanyEventsVisible)
                                                                                        {
                                                                                            <span>&#8722;</span> <!-- Minus sign -->
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <span>&#43;</span> <!-- Plus sign -->
                                                                                        }
                                                                                    </button>
                                                                                </div>
    
                                                                                @if (isCompanyEventsVisible)
                                                                                {
                                                                                    <div class="p-3" style="border-top: 1px solid #e6f2ff;">
                                                                                        @if (CompanyEventsToShowAtFrontPage != null && CompanyEventsToShowAtFrontPage.Any(eventItem => eventItem.CompanyEventStatus == "Δημοσιευμένη"))
                                                                                        {
                                                                                            <!-- Display paginated events sorted by date descending -->
                                                                                            @foreach (var eventItem in CompanyEventsToShowAtFrontPage
                                                                                           .Where(e => e.CompanyEventStatus == "Δημοσιευμένη")
                                                                                           .OrderByDescending(e => e.CompanyEventUploadedDate)
                                                                                           .Skip((currentCompanyEventPage - 1) * currentCompanyEventpageSize)
                                                                                           .Take(currentCompanyEventpageSize))
                                                                                           {
                                                                                                <div class="news-article mb-3 pb-2" style="border-bottom: 1px dashed #ccc;">
                                                                                                    <!-- Clicking on title toggles description -->
                                                                                                    <a href="javascript:void(0);"
                                                                                                       @onclick="() => ToggleDescriptionForCompanyEvent(eventItem.Id)"
                                                                                                       style="display: block; max-width: 100%; overflow-wrap: break-word; color: #0d47a1; text-decoration: none; cursor: pointer;"
                                                                                                       title="Κάντε Κλικ εδώ για να δείτε την περιγραφή της εκδήλωσης">
                                                                                                        <span class="black-text">• 
                                                                                                            <strong>
                                                                                                                @eventItem.CompanyEventCompanyName
                                                                                                                @if (eventItem.CompanyEventOtherOrganizerToBeVisible)
                                                                                                                {
                                                                                                                    @($" / {eventItem.CompanyEventOtherOrganizer}")
                                                                                                                }
                                                                                                            </strong>
                                                                                                        </span> - @eventItem.CompanyEventTitle
                                                                                                        <span class="text-muted">(@eventItem.CompanyEventUploadedDate.ToString("dd/MM/yyyy"))</span>
                                                                                                    </a>
                                                                                                    <!-- Show description based on toggle state -->
                                                                                                    <div class="event-description mt-2 @(expandedCompanyEventId == eventItem.Id ? "expanded" : "collapsed")">
                                                                                                        @if (expandedCompanyEventId == eventItem.Id)
                                                                                                        {
                                                                                                               <p style="color: #333;">@eventItem.CompanyEventDescription</p>                                                                                                                  
                                                                                                               var location = $"{eventItem.CompanyEventPerifereiaLocation} ({eventItem.CompanyEventDimosLocation}) - {eventItem.CompanyEventPlaceLocation}";
                                                                                                                if (!string.IsNullOrWhiteSpace(location))
                                                                                                                {
                                                                                                                    <p class="event-location mt-2">
                                                                                                                        <a href="https://www.google.com/maps/search/?api=1&query=@Uri.EscapeDataString(location)" 
                                                                                                                           target="_blank" 
                                                                                                                           style="color: #2e7d32; text-decoration: none;"
                                                                                                                           title="Δείτε στον Χάρτη">
                                                                                                                            <i class="fas fa-map-marker-alt me-1"></i> @location
                                                                                                                        </a>
                                                                                                                    </p>
                                                                                                                }
                                                                                            

                                                                                                            @if (eventItem.CompanyEventAttachmentFile != null && eventItem.CompanyEventAttachmentFile.Length > 0)
                                                                                                            {
                                                                                                                <p class="event-attachment mt-2">
                                                                                                                    <a href="#"
                                                                                                                       @onclick="() => DownloadCompanyEventAttachmentFrontPage(eventItem.CompanyEventAttachmentFile, eventItem.CompanyEventTitle)"
                                                                                                                       style="color: #c62828; text-decoration: none;"
                                                                                                                       title="Κάντε Κλικ εδώ για να κατεβάσετε το αρχείο">
                                                                                                                        <i class="fa fa-download me-1"></i>
                                                                                                                        Συννημένο Αρχείο Εκδήλωσης
                                                                                                                    </a>
                                                                                                                </p>
                                                                                                            }
                                                                                                        }
                                                                                                    </div>
                                                                                                </div>
                                                                                           }

                                                                                            <div class="pagination mt-3">
                                                                                                <button class="btn me-2" 
                                                                                                        @onclick="() => ChangePageForCompanyEvents(currentCompanyEventPage - 1)" 
                                                                                                        disabled="@(currentCompanyEventPage == 1 || totalPagesForCompanyEvents == 0)"
                                                                                                        style="min-width: 100px;">
                                                                                                    Προηγούμενες
                                                                                                </button>
                                                                                                <span class="mx-2 text-muted">
                                                                                                    Σελίδα @currentCompanyEventPage από @totalPagesForCompanyEvents
                                                                                                </span>
                                                                                                <button class="btn btn-secondary" 
                                                                                                        @onclick="() => ChangePageForCompanyEvents(currentCompanyEventPage + 1)" 
                                                                                                        disabled="@(currentCompanyEventPage == totalPagesForCompanyEvents || totalPagesForCompanyEvents == 0)"
                                                                                                        style="min-width: 100px;">
                                                                                                    Επόμενες
                                                                                                </button>
                                                                                            </div>
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <p class="mb-0 text-muted">Καμία Εκδήλωση από Εταιρείες ακόμη......</p>
                                                                                        }
                                                                                    </div>
                                                                                }
                                                                            </div>

                                                                            <div class="mb-3" style="background-color: #e6f2ff; border: 1px solid #b3c6e0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                                                                <div class="d-flex justify-content-between align-items-center p-3" style="border-bottom: 1px solid #b3c6e0;">
                                                                                    <h1 class="news-heading form-label m-0">
                                                                                        <span class="black-text">
                                                                                            <span style="color: #b399d4; margin-left: 10px; margin-right: 5px;">
                                                                                                <i class="fas fa-calendar-day"></i>
                                                                                            </span>
                                                                                            Εκδηλώσεις Καθηγητών
                                                                                        </span>
                                                                                    </h1>
                                                                                    <button class="btn" 
                                                                                            style="width: 30px; height: 30px; border-radius: 50%; background-color: #0d47a1; color: white; border: none; padding: 0; display: flex; align-items: center; justify-content: center; margin-right: 10px; cursor: pointer; transition: all 0.2s ease;"
                                                                                            @onclick="ToggleProfessorEventsVisibility">
                                                                                        @if (isProfessorEventsVisible)
                                                                                        {
                                                                                            <span>&#8722;</span> <!-- Minus sign -->
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <span>&#43;</span> <!-- Plus sign -->
                                                                                        }
                                                                                    </button>
                                                                                </div>
    
                                                                                @if (isProfessorEventsVisible)
                                                                                {
                                                                                    <div class="p-3" style="border-top: 1px solid #e6f2ff;">
                                                                                        @if (ProfessorEventsToShowAtFrontPage != null && ProfessorEventsToShowAtFrontPage.Any(eventItem => eventItem.ProfessorEventStatus == "Δημοσιευμένη"))
                                                                                        {
                                                                                            @foreach (var eventItem in ProfessorEventsToShowAtFrontPage
                                                                                           .Where(e => e.ProfessorEventStatus == "Δημοσιευμένη")
                                                                                           .OrderByDescending(e => e.ProfessorEventUploadedDate)
                                                                                           .Skip((currentProfessorEventPage - 1) * currentProfessorEventpageSize)
                                                                                           .Take(currentProfessorEventpageSize))
                                                                                            {
                                                                                                <div class="news-article mb-3 pb-2" style="border-bottom: 1px dashed #ccc;">
                                                                                                    <a href="javascript:void(0);"
                                                                                                       @onclick="() => ToggleDescriptionForProfessorEvent(eventItem.Id)"
                                                                                                       style="display: block; max-width: 100%; overflow-wrap: break-word; color: #0d47a1; text-decoration: none; cursor: pointer;"
                                                                                                       title="Κάντε Κλικ εδώ για να δείτε την περιγραφή της εκδήλωσης">
                                                                                                        <span class="black-text">• 
                                                                                                            <strong>
                                                                                                                @eventItem.ProfessorEventProfessorName @eventItem.ProfessorEventProfessorSurName
                                                                                                                @if (eventItem.ProfessorEventOtherOrganizer == "True")
                                                                                                                {
                                                                                                                    @($" / {eventItem.ProfessorEventOtherOrganizer}")
                                                                                                                }
                                                                                                            </strong>
                                                                                                        </span> - @eventItem.ProfessorEventTitle
                                                                                                        <span class="text-muted">(@eventItem.ProfessorEventActiveDate.ToString("dd/MM/yyyy"))</span>
                                                                                                    </a>
                                                                                                    <div class="event-description mt-2 @(expandedProfessorEventId == eventItem.Id ? "expanded" : "collapsed")">
                                                                                                        @if (expandedProfessorEventId == eventItem.Id)
                                                                                                        {
                                                                                                            <p style="color: #333;">@eventItem.ProfessorEventDescription</p>                                                                                                                          
                                                                                                                var location = $"{eventItem.ProfessorEventPerifereiaLocation} ({eventItem.ProfessorEventDimosLocation}) - {eventItem.ProfessorEventPlaceLocation}";
                                                                                                                if (!string.IsNullOrWhiteSpace(location))
                                                                                                                {
                                                                                                                    <p class="event-location mt-2">
                                                                                                                        <a href="https://www.google.com/maps/search/?api=1&query=@Uri.EscapeDataString(location)" 
                                                                                                                           target="_blank" 
                                                                                                                           style="color: #2e7d32; text-decoration: none;"
                                                                                                                           title="Δείτε στον Χάρτη">
                                                                                                                            <i class="fas fa-map-marker-alt me-1"></i> @location
                                                                                                                        </a>
                                                                                                                    </p>
                                                                                                                }
                                                                                            

                                                                                                            @if (eventItem.ProfessorEventAttachmentFile != null && eventItem.ProfessorEventAttachmentFile.Length > 0)
                                                                                                            {
                                                                                                                <p class="event-attachment mt-2">
                                                                                                                    <a href="#"
                                                                                                                       @onclick="() => DownloadProfessorEventAttachmentFrontPage(eventItem.ProfessorEventAttachmentFile, eventItem.ProfessorEventTitle)"
                                                                                                                       style="color: #c62828; text-decoration: none;"
                                                                                                                       title="Κάντε Κλικ εδώ για να κατεβάσετε το αρχείο">
                                                                                                                        <i class="fa fa-download me-1"></i> 
                                                                                                                        Συννημένο Αρχείο Εκδήλωσης
                                                                                                                    </a>
                                                                                                                </p>
                                                                                                            }
                                                                                                        }
                                                                                                    </div>
                                                                                                </div>
                                                                                            }

                                                                                            <div class="pagination mt-3">
                                                                                                <button class="btn me-2" 
                                                                                                        @onclick="() => ChangePageForProfessorEvents(currentProfessorEventPage - 1)" 
                                                                                                        disabled="@(currentProfessorEventPage == 1 || totalPagesForProfessorEvents == 0)"
                                                                                                        style="min-width: 100px;">
                                                                                                    Προηγούμενες
                                                                                                </button>
                                                                                                <span class="mx-2 text-muted">
                                                                                                    Σελίδα @currentProfessorEventPage από @totalPagesForProfessorEvents
                                                                                                </span>
                                                                                                <button class="btn btn-secondary" 
                                                                                                        @onclick="() => ChangePageForProfessorEvents(currentProfessorEventPage + 1)" 
                                                                                                        disabled="@(currentProfessorEventPage == totalPagesForProfessorEvents || totalPagesForProfessorEvents == 0)"
                                                                                                        style="min-width: 100px;">
                                                                                                    Επόμενες
                                                                                                </button>
                                                                                            </div>
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <p class="mb-0 text-muted">Καμία Εκδήλωση από Καθηγητές ακόμη......</p>
                                                                                        }
                                                                                    </div>
                                                                                }
                                                                            </div>
                                                                            *@
                                                                            <br/>
                                                                            <br />
                                                        }
                                                            <div class="mb-3 row-dark-gray">
                                                                <div class="d-flex justify-content-between align-items-center">
                                                                    <label class="form-label" style="color: #FFF8DC;">• Δημιουργία Ανακοίνωσης •</label>
                                                                    <button class="btn btn-link" @onclick="ToggleFormVisibilityForUploadProfessorAnnouncements">
                                                                        @if (isProfessorAnnouncementsFormVisible)
                                                                        {
                                                                            <span>&#8722;</span> <!-- Minus sign -->
                                                                        }
                                                                        else
                                                                        {
                                                                            <span>&#43;</span> <!-- Plus sign -->
                                                                        }
                                                                    </button>
                                                                </div>
                                                            </div>
                                                                <!-- SHOW ANNOUNCEMENT AS PROFESSOR - PEDIA INPUTS -->
                                                                @if (isProfessorAnnouncementsFormVisible)
                                                                {

                                                                     <div class="row mb-3">
                                                                            <div class="col-md-4 position-relative">
                                                                                <label for="professorannouncementTitle">
                                                                                    <strong>Τίτλος Ανακοίνωσης</strong>
                                                                                    <span style="color: red;">*</span>
                                                                                </label>
                                                                                <input type="text" id="professorannouncementTitle" class="form-control @(showErrorMessageforUploadingannouncementsAsProfessor && string.IsNullOrWhiteSpace(professorannouncement.ProfessorAnnouncementTitle) ? "shake error" : "")" @bind="professorannouncement.ProfessorAnnouncementTitle" @oninput="CheckCharacterLimitInAnnouncementFieldUploadAsProfessor" maxlength="120" />
                                                                                <small class="character-limit light-cadetblue-text">@remainingCharactersInAnnouncementFieldUploadAsProfessor/120</small>
                                                                            </div>
                                                                     </div>

                                                                    <div class="row mb-3">
                                                                        <div class="col-md-4 position-relative">
                                                                            <label for="ProfessorAnnouncementDescription"><strong>Περιγραφή Ανακοίνωσης</strong> <span style="color: red;"> *</span></label>
                                                                            <textarea id="ProfessorAnnouncementDescription" class="form-control @(showErrorMessageforUploadingannouncementsAsProfessor && string.IsNullOrWhiteSpace(professorannouncement.ProfessorAnnouncementDescription) ? "shake error" : "")"
                                                                                      @bind="professorannouncement.ProfessorAnnouncementDescription"
                                                                                      @oninput="CheckCharacterLimitInAnnouncementDescriptionUploadAsProfessor"
                                                                                      maxlength="1000"
                                                                                      placeholder="Πληκτρολογείστε την Ανακοίνωσή σας"></textarea>
                                                                            <small class="character-limit light-cadetblue-text">@remainingCharactersInAnnouncementDescriptionUploadAsProfessor/1000</small>
                                                                        </div>
                                                                    </div>

                                                                    <div class="row mb-3">
                                                                        <div class="col-md-4 position-relative">
                                                                            <label for="ProfessorAnnouncementTimeToBeActive"><strong>Ημερομηνία Λήξης Ανακοίνωσης</strong> <span style="color: red;"> *</span></label>
                                                                            <input type="date" id="ProfessorAnnouncementTimeToBeActive" 
                                                                                   class="form-control @(showErrorMessageforUploadingannouncementsAsProfessor && (professorannouncement.ProfessorAnnouncementTimeToBeActive.Date == DateTime.Today) ? "shake error" : "")" 
                                                                                   @bind="professorannouncement.ProfessorAnnouncementTimeToBeActive" />
                                                                        </div>
                                                                    </div>


                                                                    <div class="row mb-3">
                                                                        <div class="col-md-4">
                                                                            <label for="ProfessorannouncementAttachment">Συνημμένο Ανακοίνωσης<span style="font-style: italic; color: gray;"> (Προαιρετικό)</span></label>
                                                                            <InputFile id="ProfessorannouncementAttachment" class="form-control" OnChange="HandleFileSelectedForAnnouncementAttachmentAsProfessor" />
                                                                        </div>
                                                                    </div>


                                                                    //SAVE ANOUNCEMENT AS PROFESSOR
                                                                    <div class="row mb-3">
                                                                        <div class="col-md-12">
                                                                            <button class="modern-button" style="background-color: #007bff; color: white;" @onclick="SaveAnnouncementAsUnpublishedAsProfessor">
                                                                                Προσωρινή Αποθήκευση Ανακοίνωσης
                                                                            </button>
                                                                            <button class="modern-button" style="background-color: #28a745; color: white;" @onclick="SaveAnnouncementAsPublishedAsProfessor">
                                                                                Δημοσίευση Ανακοίνωσης
                                                                            </button>
                                                                        </div>
                                                                    </div>

                                                                    @if (!string.IsNullOrEmpty(saveAnnouncementAsProfessorMessage))
                                                                    {
                                                                        <div class="alert @(isSaveAnnouncementAsProfessorSuccessful ? "alert-success" : "alert-danger")" role="alert">
                                                                            @saveAnnouncementAsProfessorMessage
                                                                        </div>
                                                                    }
                                                                }                                                            
                                                        </div>

                                                        <!-- VIEW UPLOADED ANNOUNCEMENTS AS PROFESSOR  -->
                                                        <div class="mb-3 row-dark-gray mt-4">
                                                            <div class="d-flex justify-content-between align-items-center">
                                                                <label class="form-label" style="color: #FFF8DC;">• Οι Ανακοινώσεις μου •</label>
                                                                <button class="btn btn-link" @onclick="ToggleUploadedAnnouncementsVisibilityAsProfessor">
                                                                    @if (isUploadedAnnouncementsVisibleAsProfessor)
                                                                    {
                                                                        <span>&#8722;</span> <!-- Minus sign -->
                                                                    }
                                                                    else
                                                                    {
                                                                        <span>&#43;</span> <!-- Plus sign -->
                                                                    }
                                                                </button>
                                                            </div>
                                                        </div>


                                                        @if (isUploadedAnnouncementsVisibleAsProfessor)
                                                        {
                                                            <div class="col-md-2">
                                                                <label for="statusFilterForAnnouncementsAsProfessor" style="color: #4682b4; font-size: 15px;"><strong>Φίλτρο Εμφάνισης</strong></label>
                                                                <div class="input-group">
                                                                    <select id="statusFilterForAnnouncementsAsProfessor" class="form-control form-control-sm" 
                                                                            @onchange="HandleStatusFilterChangeForAnnouncementsAsProfessor">
                                                                        <option value="Όλα">Όλες</option>
                                                                        <option value="Δημοσιευμένη">Δημοσιευμένες</option>
                                                                        <option value="Μη Δημοσιευμένη">Μη Δημοσιευμένες</option>
                                                                    </select>


                                                                    <div class="input-group-append">
                                                                        <span class="input-group-text">
                                                                            <i class="fas fa-chevron-down"></i>
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <label style="color: #4682b4; font-weight: bold; font-size: 15px; display: block;">Αποτελέσματα ανά Σελίδα</label>
                                                                <div class="input-group" style="max-width: 65px;">
                                                                    <select class="form-control form-control-sm" @onchange="OnPageSizeChange_SeeMyUploadedAnnouncementsAsProfessor" aria-label="Items per page">
                                                                        @foreach (var option in pageSizeOptions_SeeMyUploadedAnnouncementsAsProfessor)
                                                                        {
                                                                            <option value="@option" selected="@(professorAnnouncementsPerPage_SeeMyUploadedAnnouncementsAsProfessor == option)">@option</option>
                                                                        }
                                                                    </select>
                                                                    <div class="input-group-append">
                                                                        <span class="input-group-text">
                                                                            <i class="fas fa-chevron-down"></i>
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <br/>
                                                            <div class="col-md-2">
                                                                @if (selectedStatusFilterForAnnouncementsAsProfessor == "Όλα")
                                                                {
                                                                    <span><strong>Σύνολο: </strong>@totalCountAnnouncementsAsProfessor</span>
                                                                }
                                                                else if (selectedStatusFilterForAnnouncementsAsProfessor == "Δημοσιευμένη")
                                                                {
                                                                    <span><strong>Σύνολο: </strong>@publishedCountAnnouncementsAsProfessor</span>
                                                                }
                                                                else if (selectedStatusFilterForAnnouncementsAsProfessor == "Μη Δημοσιευμένη")
                                                                {
                                                                    <span><strong>Σύνολο: </strong>@unpublishedCountAnnouncementsAsProfessor</span>
                                                                }
                                                            </div>

                                                            <div style="max-width: auto; margin-left: 0;">
                                                                <div class="table-responsive">
                                                                    <table class="table table-striped">
                                                                        <thead>
                                                                            <tr style="background-color: lightgray; border: 2px solid black;">
                                                                                <th style="border: 2px solid black;">
                                                                                    <i class="fa-solid fa-key fa-sm" style="color: #9D00FF; margin-right: 8px;"></i>
                                                                                    ID
                                                                                </th>
                                                                                <th style="border: 2px solid black;">
                                                                                    <i class="fa-solid fa-font fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                    Τίτλος
                                                                                </th>
                                                                                <th style="border: 2px solid black; width: 30%;">
                                                                                    <i class="fa-solid fa-file-lines fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                    Περιγραφή
                                                                                </th>
                                                                                <th style="border: 2px solid black;">
                                                                                    <i class="fa-solid fa-calendar-day fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                    Ημερομηνία Δημοσίευσης
                                                                                </th>
                                                                                <th style="border: 2px solid black;">
                                                                                    <i class="fa-solid fa-arrows-up-down fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                    Κατάσταση
                                                                                </th>
                                                                                <th style="border: 2px solid black;">
                                                                                    <i class="fa-solid fa-hand fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                    Ενέργειες
                                                                                </th>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            @if (FilteredAnnouncementsAsProfessor != null && FilteredAnnouncementsAsProfessor.Any())
                                                                            {
                                                                                @foreach (var professorannouncement in GetPaginatedProfessorAnnouncements_ProfessorAnnouncements())
                                                                                {
                                                                                    <tr class="job-position-frame" style="background-color: @(professorannouncement.ProfessorAnnouncementStatus == "Δημοσιευμένη" ? "lightblue" : "lightcoral");">
                                                                                        <td style="color: #9D00FF;">@professorannouncement.ProfessorAnnouncementRNG_HashedAsUniqueID</td>
                                                                                        <td>@professorannouncement.ProfessorAnnouncementTitle</td>
                                                                                        <td style="width: 30%;">
                                                                                            @if (professorannouncement.ProfessorAnnouncementDescription.Length > 50) 
                                                                                            {
                                                                                                @professorannouncement.ProfessorAnnouncementDescription.Substring(0, 50)
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                @professorannouncement.ProfessorAnnouncementDescription
                                                                                            }
                                                                                        </td>
                                                                                        <td>@professorannouncement.ProfessorAnnouncementUploadDate.ToString("dd/MM/yyyy")</td>
                                                                                        <td>@professorannouncement.ProfessorAnnouncementStatus</td>
                                                                                        <td>
                                                                                            <div class="d-inline-flex">
                                                                                                <!-- Trash button -->
                                                                                                <button class="btn btn-danger me-2" @onclick="() => DeleteAnnouncementAsProfessor(professorannouncement.Id)">
                                                                                                    <i class="fas fa-trash icon-button"></i>
                                                                                                </button>

                                                                                                <!-- Eye icon button to view details -->
                                                                                                <button class="btn btn-info me-2" @onclick="() => OpenProfessorAnnouncementDetailsModal(professorannouncement)" title="Προβολή Ανακοίνωσης">
                                                                                                    <i class="fas fa-eye icon-button"></i>
                                                                                                </button>

                                                                                                <!-- Arrow down/up buttons -->
                                                                                                @if (professorannouncement.ProfessorAnnouncementStatus == "Δημοσιευμένη")
                                                                                                {
                                                                                                    <button class="btn btn-secondary me-2" @onclick='async () => await ChangeAnnouncementStatusAsProfessor(professorannouncement.Id, "Μη Δημοσιευμένη")' title="Αποδημοσίευση Ανακοίνωσης">
                                                                                                        <i class="fas fa-arrow-down icon-button" style="color: yellow;"></i>
                                                                                                    </button>
                                                                                                }
                                                                                                else if (professorannouncement.ProfessorAnnouncementStatus == "Μη Δημοσιευμένη")
                                                                                                {
                                                                                                    <button class="btn btn-secondary me-2" @onclick='async () => await ChangeAnnouncementStatusAsProfessor(professorannouncement.Id, "Δημοσιευμένη")' title="Δημοσίευση Ανακοίνωσης">
                                                                                                        <i class="fas fa-arrow-up icon-button" style="color: cornflowerblue;"></i>
                                                                                                    </button>

                                                                                                    <!-- Pencil icon button to edit the announcement -->
                                                                                                    <button class="btn btn-secondary me-2" @onclick="() => OpenEditModalAsProfessor(professorannouncement)" title="Επεξεργασία Ανακοίνωσης">
                                                                                                        <i class="fas fa-pencil-alt icon-button"></i>
                                                                                                    </button>
                                                                                                }
                                                                                            </div>
                                                                                        </td>
                                                                                    </tr>
                                                                                }
                                                                            }
                                                                            else
                                                                            {
                                                                                <tr>
                                                                                    <td colspan="6" class="text-center">Δεν υπάρχουν Ανακοινώσεις</td>
                                                                                </tr>
                                                                            }
                                                                        </tbody>
                                                                    </table>
                                                                    <!-- Pagination Controls -->
                                                                    <div class="d-flex justify-content-center align-items-center mt-3 gap-1">
                                                                        <!-- First Page (<<) -->
                                                                        <span class="pagination-item @(currentPageForProfessorAnnouncements_ProfessorAnnouncements == 1 ? "disabled" : "")" 
                                                                              @onclick="@(() => GoToFirstPageForProfessorAnnouncements_ProfessorAnnouncements())">
                                                                            &lt;&lt;
                                                                        </span>
    
                                                                        <!-- Previous Page (<) -->
                                                                        <span class="pagination-item @(currentPageForProfessorAnnouncements_ProfessorAnnouncements == 1 ? "disabled" : "")" 
                                                                              @onclick="@(() => PreviousPageForProfessorAnnouncements_ProfessorAnnouncements())">
                                                                            &lt;
                                                                        </span>
    
                                                                        <!-- Page Numbers -->
                                                                        @foreach (var pageNum in GetVisiblePagesForProfessorAnnouncements_ProfessorAnnouncements())
                                                                        {
                                                                            @if (pageNum == -1)
                                                                            {
                                                                                <span class="pagination-ellipsis">...</span>
                                                                            }
                                                                            else
                                                                            {
                                                                                <span class="pagination-item @(pageNum == currentPageForProfessorAnnouncements_ProfessorAnnouncements ? "active" : "")" 
                                                                                      @onclick="@(() => GoToPageForProfessorAnnouncements_ProfessorAnnouncements(pageNum))">
                                                                                    @pageNum
                                                                                </span>
                                                                            }
                                                                        }
    
                                                                        <!-- Next Page (>) -->
                                                                        <span class="pagination-item @(currentPageForProfessorAnnouncements_ProfessorAnnouncements == totalPagesForProfessorAnnouncements_ProfessorAnnouncements ? "disabled" : "")" 
                                                                              @onclick="@(() => NextPageForProfessorAnnouncements_ProfessorAnnouncements())">
                                                                            &gt;
                                                                        </span>
    
                                                                        <!-- Last Page (>>) -->
                                                                        <span class="pagination-item @(currentPageForProfessorAnnouncements_ProfessorAnnouncements == totalPagesForProfessorAnnouncements_ProfessorAnnouncements ? "disabled" : "")" 
                                                                              @onclick="@(() => GoToLastPageForProfessorAnnouncements_ProfessorAnnouncements())">
                                                                            &gt;&gt;
                                                                        </span>
    
                                                                        <!-- Page counter -->
                                                                        <span class="ms-3">Σελίδα @currentPageForProfessorAnnouncements_ProfessorAnnouncements από @totalPagesForProfessorAnnouncements_ProfessorAnnouncements</span>
                                                                    </div>
                                                                    <br/>
                                                                    <br/>
                                                                </div>
                                                            </div>
                                                        }

                                                        @if (selectedProfessorAnnouncementToSeeDetails != null)
                                                        {
                                                            <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0,0,0,0.5);">
                                                                <div class="modal-dialog modal-dialog-centered" role="document">
                                                                    <div class="modal-content">
                                                                        <div class="modal-header">
                                                                            <h5 class="modal-title" style="color: #4682B4;">@selectedProfessorAnnouncementToSeeDetails.ProfessorAnnouncementTitle</h5>
                                                                            <button type="button" class="close" @onclick="CloseProfessorAnnouncementDetailsModal">
                                                                                <span>&times;</span>
                                                                            </button>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            <div class="form-group">
                                                                                <label for="viewDescription"><strong>Περιγραφή</strong></label>
                                                                                <textarea id="viewDescription" class="form-control" readonly>@selectedProfessorAnnouncementToSeeDetails.ProfessorAnnouncementDescription</textarea>
                                                                            </div>
                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">Ημερομηνία Δημοσίευσης</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="far fa-calendar-alt" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                    <span>@selectedProfessorAnnouncementToSeeDetails.ProfessorAnnouncementUploadDate.ToString("dd/MM/yyyy")</span>
                                                                                </div>
                                                                            </div>
                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">Ισχύς έως</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="far fa-calendar-alt" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                    <span>@selectedProfessorAnnouncementToSeeDetails.ProfessorAnnouncementTimeToBeActive.ToString("dd/MM/yyyy")</span>
                                                                                </div>
                                                                            </div>
                                                                            <div class="form-group">
                                                                                <label for="viewStatus"><strong>Κατάσταση</strong></label>
                                                                                <select id="viewStatus" class="form-control" disabled>
                                                                                    <option value="Δημοσιευμένη" selected="@(selectedProfessorAnnouncementToSeeDetails.ProfessorAnnouncementStatus == "Δημοσιευμένη")">Δημοσιευμένη</option>
                                                                                    <option value="Μη Δημοσιευμένη" selected="@(selectedProfessorAnnouncementToSeeDetails.ProfessorAnnouncementStatus == "Μη Δημοσιευμένη")">Μη Δημοσιευμένη</option>
                                                                                </select>
                                                                            </div>
                                                                            <div class="form-group">
                                                                                <label for="viewProfessorName"><strong>Καθηγητής</strong></label>
                                                                                <input type="text" id="viewProfessorName" class="form-control" 
                                                                                       value="@(selectedProfessorAnnouncementToSeeDetails.Professor?.ProfName + " " + selectedProfessorAnnouncementToSeeDetails.Professor?.ProfSurname)" 
                                                                                       readonly />
                                                                            </div>
                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">Email Καθηγητή</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-envelope" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                    <span>@selectedProfessorAnnouncementToSeeDetails.ProfessorAnnouncementProfessorEmail</span>
                                                                                </div>
                                                                            </div>
                                                                            <br/>
                                                                            @if (selectedProfessorAnnouncementToSeeDetails.ProfessorAnnouncementAttachmentFile != null)
                                                                            {
                                                                                <div class="form-group">
                                                                                    <label for="viewAttachment"><strong>Συνημμένο</strong></label>
                                                                                    <p>
                                                                                        <a href="data:application/pdf;base64,@Convert.ToBase64String(selectedProfessorAnnouncementToSeeDetails.ProfessorAnnouncementAttachmentFile)" 
                                                                                           download="ProfessorAnnouncement.pdf" class="btn btn-primary">
                                                                                            Λήψη Αρχείου
                                                                                        </a>
                                                                                    </p>
                                                                                </div>
                                                                            }
                                                                            else
                                                                            {
                                                                                <div class="form-group">
                                                                                    <label for="viewAttachment"><strong>Συνημμένο</strong></label>
                                                                                    <p style="color: red;">Δεν έχετε συμπεριλάβει Συνημμένο Αρχείο</p>
                                                                                </div>
                                                                            }

                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button" class="btn btn-secondary" @onclick="CloseProfessorAnnouncementDetailsModal">Κλείσιμο</button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        }


                                                        <!-- Modal for editing announcement as PROFESSOR -->
                                                        @if (isEditModalVisibleForAnnouncementsAsProfessor)
                                                        {
                                                            <div class="modal fade show" style="display: block;" tabindex="-1" role="dialog" aria-modal="true">
                                                                <div class="modal-dialog" role="document">
                                                                    <div class="modal-content">
                                                                        <div class="modal-header">
                                                                            <h5 class="modal-title" style="color: #4682B4;">@currentAnnouncementAsProfessor?.ProfessorAnnouncementTitle</h5>
                                                                            <button type="button" class="close" @onclick="CloseEditModalForAnnouncementsAsProfessor">
                                                                                <span>&times;</span>
                                                                            </button>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            <div class="form-group">
                                                                                <label for="title"><strong>Τίτλος</strong></label>
                                                                                <input type="text" id="title" class="form-control" @bind="currentAnnouncementAsProfessor.ProfessorAnnouncementTitle" />
                                                                            </div>
                                                                            <div class="form-group">
                                                                                <label for="description"><strong>Περιγραφή</strong></label>
                                                                                <textarea id="description" class="form-control" @bind="currentAnnouncementAsProfessor.ProfessorAnnouncementDescription"></textarea>
                                                                            </div>
                                                                            <div class="form-group">
                                                                                <label for="editProfessorAnnouncementAttachment"><strong>Αντικατάσταση Συνημμένου</strong></label>
                                                                                <InputFile OnChange="HandleFileUploadToEditProfessorAnnouncementAttachment" />
                                                                            </div>
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button class="btn btn-primary" @onclick="() => UpdateAnnouncementAsProfessor(currentAnnouncementAsProfessor)">Αποθήκευση</button>
                                                                            <button class="btn btn-secondary" @onclick="CloseEditModalForAnnouncementsAsProfessor">Κλείσιμο</button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        }
                                                    </div>


@*--------------------------------------------------------------------- PROFESSOR PTYXIAKES - DIMIOURGIA PTYXIAKIS ------------------------------------------------------------------------------------------------------------------------------------*@
                                                        
                                                        <div class="tab-pane fade" id="professorthesis" role="tabpanel" aria-labelledby="professorthesis-tab">
                                                            <div class="mb-3 row-dark-gray">
                                                                <div class="d-flex justify-content-between align-items-center">
                                                                    <label class="form-label" style="color: #FFF8DC;">• Δημιουργία Πτυχιακής Εργασίας •</label>
                                                                    <button class="btn btn-link" @onclick="ToggleFormVisibilityForUploadProfessorThesis">
                                                                        @if (isProfessorThesisFormVisible)
                                                                        {
                                                                            <span>&#8722;</span> <!-- Minus sign -->
                                                                        }
                                                                        else
                                                                        {
                                                                            <span>&#43;</span> <!-- Plus sign -->
                                                                        }
                                                                    </button>
                                                                </div>
                                                            </div>
                                                            @*UPLOAD THESIS AS PROFESSOR - PEDIA INPUTS*@  
                                                                @if (isProfessorThesisFormVisible)
                                                                {

                                                                     <div class="row mb-3">
                                                                            <div class="col-md-4">
                                                                                <label for="professorthesisTitle">
                                                                                    <strong>Τίτλος Πτυχιακής Εργασίας</strong>
                                                                                    <span style="color: red;">*</span>
                                                                                </label>
                                                                                <input type="text" id="professorthesisTitle" class="form-control @(showErrorMessageforUploadingThesisAsProfessor && string.IsNullOrWhiteSpace(professorthesis.ThesisTitle) ? "shake error" : "")" 
                                                                                    @bind="professorthesis.ThesisTitle" 
                                                                                    @oninput="CheckCharacterLimitInThesisFieldUploadAsProfessor" 
                                                                                    maxlength="120"
                                                                                    placeholder="Πληκτρολογήστε τον Τίτλο της Πτυχιακής"/>
                                                                                <small class="character-limit light-cadetblue-text">@remainingCharactersInThesisFieldUploadAsProfessor/120</small>
                                                                            </div>
                                                                     </div>

                                                                    <div class="row mb-3">
                                                                        <div class="col-md-4">
                                                                            <label for="ProfessorThesisDescription"><strong>Σύντομη Περιγραφή</strong> <span style="color: red;"> *</span></label>
                                                                            <textarea id="ProfessorThesisDescription" class="form-control @(showErrorMessageforUploadingThesisAsProfessor && string.IsNullOrWhiteSpace(professorthesis.ThesisDescription) ? "shake error" : "")"
                                                                                        @bind="professorthesis.ThesisDescription"
                                                                                        @oninput="CheckCharacterLimitInThesisDescriptionUploadAsProfessor"
                                                                                      maxlength="1000"
                                                                                      placeholder="Πληκτρολογήστε την Περιγραφή της Πτυχιακής"></textarea>
                                                                            <small class="character-limit light-cadetblue-text">@remainingCharactersInThesisDescriptionUploadAsProfessor/1000</small>
                                                                        </div>
                                                                    </div>
                                                                 
                                                                    <div class="row mb-3">
                                                                        <div class="col-md-4">
                                                                            <label @onclick="ToggleCheckboxesForThesisAreasAsProfessor">
                                                                                <strong>Τομείς Πτυχιακής</strong><span style="color: red;"> *</span>
                                                                                <span class="light-cadetblue-text"> (Άνοιγμα/Κλείσιμο)</span>
                                                                            </label>
                                                                            <div id="toggleCheckboxesForThesisAreasAsProfessor" class="checkbox-containerThesisAreas" style="display: none;">
                                                                                @if (availableAreasForProfessorThesis == null || !availableAreasForProfessorThesis.Any())
                                                                                {
                                                                                    <p>Φορτώνει...</p>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <div class="d-flex flex-wrap">
                                                                                        @foreach (var area in availableAreasForProfessorThesis)
                                                                                        {
                                                                                            <div class="form-check me-2 mb-2" style="flex-basis: 20%;">
                                                                                                <input type="checkbox"
                                                                                                       id="area_@area.Id"
                                                                                                       class="form-check-input"
                                                                                                       @onchange="(e) => OnCheckedChangedForThesisAreasAsProfessor(e, area)"
                                                                                                       checked="@IsSelectedForThesisAreasAsProfessor(area)" />
                                                                                                <label class="form-check-label @(showErrorMessageforUploadingThesisAsProfessor && string.IsNullOrWhiteSpace(professorthesis.ThesisAreas) ? "shake error" : "")"
                                                                                                       for="area_@area.Id">
                                                                                                    @area.AreaName
                                                                                                </label>
                                                                                            </div>
                                                                                        }
                                                                                    </div>
                                                                                }
                                                                            </div>
                                                                        </div>
                                                                    </div>


                                                                    <div class="row mb-3">
                                                                        <div class="col-md-4">
                                                                            <label @onclick="ToggleCheckboxesForThesisSkillsAsProfessor">
                                                                                <strong>Απαιτούμενες Δεξιότητες</strong><span style="color: red;"> *</span>
                                                                                <span class="light-cadetblue-text"> (Άνοιγμα/Κλείσιμο)</span>
                                                                            </label>
                                                                            <div id="toggleCheckboxesForThesisSkillsAsProfessor" class="checkbox-containerThesisSkills" style="display: none;">
                                                                                @if (availableSkillsForProfessorThesis == null || !availableSkillsForProfessorThesis.Any())
                                                                                {
                                                                                    <p>Φορτώνει...</p>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <div class="d-flex flex-wrap">
                                                                                        @foreach (var skill in availableSkillsForProfessorThesis)
                                                                                        {
                                                                                            <div class="form-check me-2 mb-2" style="flex-basis: 20%;">
                                                                                                <input type="checkbox"
                                                                                                       id="skill_@skill.Id"
                                                                                                       class="form-check-input"
                                                                                                       @onchange="(e) => OnCheckedChangedForThesisSkillsAsProfessor(e, skill)"
                                                                                                       checked="@IsSelectedForThesisSkillsAsProfessor(skill)" />
                                                                                                <label class="form-check-label @(showErrorMessageforUploadingThesisAsProfessor && string.IsNullOrWhiteSpace(professorthesis.ThesisSkills) ? "shake error" : "")"
                                                                                                       for="skill_@skill.Id">
                                                                                                    @skill.SkillName
                                                                                                </label>
                                                                                            </div>
                                                                                        }
                                                                                    </div>
                                                                                }
                                                                            </div>
                                                                        </div>
                                                                    </div>


                                                                    <div class="row mb-3">
                                                                        <div class="col-md-4">
                                                                            <label for="ProfessorThesisActivePeriod"><strong>Ημερομηνία Έναρξης</strong> <span style="color: red;"> *</span></label>
                                                                            <input type="date" id="ProfessorThesisActivePeriod" class="form-control @(showErrorMessageforUploadingThesisAsProfessor && professorthesis.ThesisActivePeriod == default ? "shake error" : "")" 
                                                                                   @bind="professorthesis.ThesisActivePeriod" />
                                                                        </div>
                                                                    </div>

                                                                    <div class="row mb-3">
                                                                        <div class="col-md-4">
                                                                            <label for="ProfessorThesisAttachment">Συνημμένο Αρχείο Πτυχιακής<span style="font-style: italic; color: gray;"> (Προαιρετικό)</span></label>
                                                                            <InputFile id="ProfessorThesisAttachment" class="form-control" OnChange="HandleFileSelectedForThesisAttachmentAsProfessor" />
                                                                        </div>
                                                                    </div>


                                                                    <!-- SAVE THESIS AS PROFESSOR -->
                                                                    <div class="mb-3">
                                                                        <button class="modern-button"
                                                                                style="background-color: #007bff; color: white; display: inline-flex; align-items: center;"
                                                                                @onclick="SaveThesisAsUnpublishedAsProfessor">
                                                                            <i class="fa-regular fa-floppy-disk" style="margin-right: 8px;"></i>
                                                                            Προσωρινή Αποθήκευση Πτυχιακής
                                                                        </button>      
                                                                        <button class="modern-button"
                                                                                style="background-color: #28a745; color: white; display: inline-flex; align-items: center;"
                                                                                @onclick="SaveThesisAsPublishedAsProfessor">
                                                                            <i class="fa-solid fa-floppy-disk" style="margin-right: 8px;"></i>
                                                                            Δημοσίευση Πτυχιακής
                                                                        </button>
                                                                    </div>

                                                                    @if (!string.IsNullOrEmpty(saveThesisAsProfessorMessage))
                                                                    {
                                                                        <div class="alert @(isSaveThesisAsProfessorSuccessful ? "alert-success" : "alert-danger")" role="alert">
                                                                            @saveThesisAsProfessorMessage
                                                                        </div>
                                                                    }
                                                                }            


                                                            <!-- VIEW UPLOADED THESES AS PROFESSOR -->
                                                            <div class="mb-3 row-dark-gray mt-4">
                                                                <div class="d-flex justify-content-between align-items-center">
                                                                    <label class="form-label" style="color: #FFF8DC;">• Οι Πτυχιακές μου Εργασίες •</label>
                                                                    <button class="btn btn-link" @onclick="ToggleUploadedThesesVisibilityAsProfessor">
                                                                        @if (isUploadedThesesVisibleAsProfessor)
                                                                        {
                                                                            <span>&#8722;</span> <!-- Minus sign -->
                                                                        }
                                                                        else
                                                                        {
                                                                            <span>&#43;</span> <!-- Plus sign -->
                                                                        }
                                                                    </button>
                                                                </div>
                                                            </div>

                                                            @if (isUploadedThesesVisibleAsProfessor)
                                                            {
                                                                <div class="col-md-2">
                                                                    <label for="statusFilterForThesesAsProfessor" style="color: #4682b4; font-size: 15px; display: block;"><strong>Φίλτρο Εμφάνισης</strong></label>
                                                                    <div class="input-group">
                                                                        <select id="statusFilterForThesesAsProfessor" class="form-control form-control-sm" 
                                                                                @onchange="HandleStatusFilterChangeForThesesAsProfessor">
                                                                            <option value="Όλα">Όλες</option>
                                                                            <option value="Δημοσιευμένη">Δημοσιευμένες</option>
                                                                            <option value="Μη Δημοσιευμένη">Μη Δημοσιευμένες</option>
                                                                            <option value="Αποσυρμένη">Αποσυρμένες</option>
                                                                        </select>
                                                                        <div class="input-group-append">
                                                                            <span class="input-group-text">
                                                                                <i class="fas fa-chevron-down"></i>
                                                                            </span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-2">
                                                                    <label style="color: #4682b4; font-weight: bold; font-size: 15px; display: block;">Αποτελέσματα ανά Σελίδα</label>
                                                                    <div class="input-group" style="max-width: 65px;">
                                                                        <select class="form-control form-control-sm" @onchange="OnPageSizeChange_SeeMyUploadedThesesAsProfessor" aria-label="Items per page">
                                                                            @foreach (var option in pageSizeOptions_SeeMyUploadedThesesAsProfessor)
                                                                            {
                                                                                <option value="@option" selected="@(ProfessorThesesPerPage == option)">@option</option>
                                                                            }
                                                                        </select>
                                                                        <div class="input-group-append">
                                                                            <span class="input-group-text">
                                                                                <i class="fas fa-chevron-down"></i>
                                                                            </span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <br/>
                                                                <div class="col-md-2">
                                                                    @if (selectedStatusFilterForThesesAsProfessor == "Όλα")
                                                                    {
                                                                        <span><strong>Σύνολο: </strong>@totalCountThesesAsProfessor</span>
                                                                    }
                                                                    else if (selectedStatusFilterForThesesAsProfessor == "Δημοσιευμένη")
                                                                    {
                                                                        <span><strong>Σύνολο: </strong>@publishedCountThesesAsProfessor</span>
                                                                    }
                                                                    else if (selectedStatusFilterForThesesAsProfessor == "Μη Δημοσιευμένη")
                                                                    {
                                                                        <span><strong>Σύνολο: </strong>@unpublishedCountThesesAsProfessor</span>
                                                                    }
                                                                    else if (selectedStatusFilterForThesesAsProfessor == "Αποσυρμένη")
                                                                    {
                                                                        <span><strong>Σύνολο: </strong>@withdrawnCountThesesAsProfessor</span>
                                                                    }
                                                                </div>
                                                                                                                          
                                                                        <table class="table">
                                                                            <thead>
                                                                                <tr style="background-color: lightgray; border: 2px solid black;">
                                                                                    <th style="border: 2px solid black;">
                                                                                        <i class="fa-solid fa-key fa-sm" style="color: #9D00FF; margin-right: 8px;"></i>
                                                                                        ID
                                                                                    </th>
                                                                                    <th style="border: 2px solid black;">
                                                                                        <i class="fa-solid fa-font fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                        Τίτλος
                                                                                    </th>
                                                                                    <th style="border: 2px solid black;">
                                                                                        <i class="fa-solid fa-arrows-up-down fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                        Κατάσταση Θέσης
                                                                                    </th>
                                                                                    <th style="border: 2px solid black;">
                                                                                        <i class="fa-solid fa-calendar-day fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                        Δημιουργία Θέσης
                                                                                    </th>
                                                                                    <th style="border: 2px solid black;">
                                                                                        <i class="fa-solid fa-hand fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                        Ενέργειες
                                                                                    </th>
                                                                                    <th style="border: 2px solid black;">
                                                                                        <i class="fa-solid fa-paperclip fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                        Αρχείο
                                                                                    </th>
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                               @if (FilteredThesesAsProfessor != null && FilteredThesesAsProfessor.Any())
                                                                               {
                                                                                    @foreach (var thesis in GetPaginatedProfessorTheses().Where(j => selectedStatusFilterForThesesAsProfessor == "Όλα" || j.ThesisStatus == selectedStatusFilterForThesesAsProfessor))
                                                                                    {
                                                                                        <tr class="professorthesis-position-frame @(thesis.ThesisStatus == "Δημοσιευμένη" ? "companythesisstatus-dimosieumeni" : 
                                                                                                                                  (thesis.ThesisStatus == "Μη Δημοσιευμένη" ? "professorthesisstatus-midimosieumeni" : 
                                                                                                                                  (thesis.ThesisStatus == "Αποσυρμένη" ? "professorthesisstatus-aposirmeni" : "")))">
                                                                                            <td style="color: #9D00FF;">
                                                                                                @thesis.RNGForThesisUploaded_HashedAsUniqueID
                                                                                            </td>
                                                                                            <td>@thesis.ThesisTitle</td>
                                                                                            <td>@thesis.ThesisStatus</td>
                                                                                            <td>@thesis.ThesisUploadDateTime.ToString("dd/MM/yyyy")</td>                                                                                        
                                                                                            <td>
                                                                                                <div class="d-inline-flex">
                                                                                                    <!-- Trash button for permanent deletion -->
                                                                                                    <button class="btn btn-danger me-2" @onclick="() => DeleteThesisAsProfessor(thesis.Id)" title="Διαγραφή Πτυχιακής Εργασίας">
                                                                                                        <i class="fas fa-trash icon-button"></i>
                                                                                                    </button>
                                                                                                    <!-- Show Details Button for professor thesis -->
                                                                                                    <button class="btn btn-secondary me-2" @onclick="() => ShowProfessorThesisDetailsAsProfessor(thesis)" title="Εμφάνιση Λεπτομερειών Πτυχιακής Εργασίας">
                                                                                                        <i class="fas fa-eye icon-button"></i>
                                                                                                    </button>
                                                                                                    @if (thesis.ThesisStatus == "Δημοσιευμένη")
                                                                                                    {
                                                                                                        <!-- Button to change from Δημοσιευμένη to Μη Δημοσιευμένη -->
                                                                                                        <button class="btn btn-secondary me-2" @onclick='async () => await ChangeThesisStatusAsProfessor(thesis.Id, "Μη Δημοσιευμένη")' title="Αποδημοσίευση Πτυχιακής Εργασίας">
                                                                                                            <i class="fas fa-arrow-down icon-button" style="color: yellow;"></i>
                                                                                                        </button>

                                                                                                        <!-- Button to change from Δημοσιευμένη to Αποσυρμένη -->
                                                                                                        <button class="btn btn-secondary me-2" @onclick='async () => await ChangeThesisStatusAsProfessor(thesis.Id, "Αποσυρμένη")' title="Απόσυρση Πτυχιακής Εργασίας">
                                                                                                            <i class="fas fa-times icon-button" style="color: red;"></i>
                                                                                                        </button>
                                                                                                    }
                                                                                                    else if (thesis.ThesisStatus == "Μη Δημοσιευμένη")
                                                                                                    {
                                                                                                        <!-- Button to edit the thesis -->
                                                                                                        <button class="btn btn-secondary me-2" @onclick="() => OpenEditModalForThesisAsProfessor(thesis)" title="Επεξεργασία Πτυχιακής Εργασίας">
                                                                                                            <i class="fas fa-pencil-alt icon-button"></i>
                                                                                                        </button>

                                                                                                        <!-- Button to change from Μη Δημοσιευμένη to Δημοσιευμένη -->
                                                                                                        <button class="btn btn-secondary me-2" @onclick='async () => await ChangeThesisStatusAsProfessor(thesis.Id, "Δημοσιευμένη")' title="Δημοσίευση Πτυχιακής Εργασίας">
                                                                                                            <i class="fas fa-arrow-up icon-button" style="color: cornflowerblue;"></i>
                                                                                                        </button>
                                                                                                    }
                                                                                                    else if (thesis.ThesisStatus == "Αποσυρμένη")
                                                                                                    {
                                                                                                        <!-- Button to edit the thesis -->
                                                                                                        <button class="btn btn-secondary me-2" @onclick="() => OpenEditModalForThesisAsProfessor(thesis)" title="Επεξεργασία Πτυχιακής Εργασίας">
                                                                                                            <i class="fas fa-pencil-alt icon-button"></i>
                                                                                                        </button>

                                                                                                        <!-- Button to change from Αποσυρμένη to Δημοσιευμένη -->
                                                                                                        <button class="btn btn-secondary me-2" @onclick='async () => await ChangeThesisStatusAsProfessor(thesis.Id, "Δημοσιευμένη")' title="Δημοσίευση Πτυχιακής Εργασίας">
                                                                                                            <i class="fas fa-arrow-up icon-button" style="color: cornflowerblue;"></i>
                                                                                                        </button>

                                                                                                        <!-- Button to change from Αποσυρμένη to Μη Δημοσιευμένη -->
                                                                                                        <button class="btn btn-secondary me-2" @onclick='async () => await ChangeThesisStatusAsProfessor(thesis.Id, "Μη Δημοσιευμένη")' title="Αποδημοσίευση Πτυχιακής Εργασίας">
                                                                                                            <i class="fas fa-arrow-down icon-button" style="color: yellow;"></i>
                                                                                                        </button>
                                                                                                    }
                                                                                                    <!--  human icon FOR THESIS APPLICATION DETAILS EDW EMEINA X8ES AYRIO SINEXWIZW APO EDW -->
                                                                                                    <button class="btn btn-secondary me-2" @onclick="() => ToggleProfessorThesisExpanded(thesis.RNGForThesisUploaded)" title="Εμφάνιση Υποψηφίων">
                                                                                                        <i class="fa-solid fa-graduation-cap icon-button"></i> 
                                                                                                    </button>

                                                                                                    <button class="btn btn-secondary me-2" @onclick="() => ToggleProfessorThesesExpandedForCompanyInterest(thesis.RNGForThesisUploaded)" title="Εταιρεία που Ενδιαφέρθηκε">
                                                                                                        <i class="fa-solid fa-industry icon-button"></i>
                                                                                                    </button>  
                                                                                                    
                                                                                                </div>
                                                                                            </td>
                                                                                            <td>
                                                                                                @if (thesis.ThesisAttachment != null && thesis.ThesisAttachment.Length > 0)
                                                                                                {
                                                                                                    <div style="display: flex; align-items: center;">
                                                                                                        <button class="btn btn-secondary" @onclick="() => DownloadAttachmentForProfessorTheses(thesis.Id)" title="Λήψη" style="text-decoration: none;">
                                                                                                            <i class="fas fa-download icon-button"></i> Λήψη
                                                                                                        </button>
                                                                                                    </div>
                                                                                                }
                                                                                                else
                                                                                                {
                                                                                                    <span>Κανένα Αρχείο</span>
                                                                                                }
                                                                                            </td>
                                                                                        </tr>
                                                                                        @if (expandedProfessorThesesForCompanyInterest.ContainsKey(thesis.RNGForThesisUploaded) && expandedProfessorThesesForCompanyInterest[thesis.RNGForThesisUploaded])
                                                                                        {
                                                                                            <br/>
                                                                                            <tr>
                                                                                                <td colspan="9" style="padding: 0;">
                                                                                                    <div style="display: flex; justify-content: space-between; align-items: center; height: 24px; line-height: 24px; width: 100%;">
                                                                                                        <i class="fa-solid fa-industry" style="font-size: 18px; color: #0d6efd;"></i>
                                                                                                        <label class="form-label" style="color: #0d6efd; font-weight: bold; font-size: 18px; margin: 0;">Λεπτομέρειες Ενδιαφερόμενης Εταιρείας</label>
                                                                                                        <i class="fa-solid fa-industry" style="font-size: 18px; color: #0d6efd;"></i>
                                                                                                    </div>
                                                                                                </td>
                                                                                            </tr>
                                                                                            <tr>
                                                                                                <td colspan="6">
                                                                                                    <table class="table table-sm">
                                                                                                        <thead>
                                                                                                            <tr style="border: 1px solid darkblue;">
                                                                                                                <th style="border: 1px solid darkblue;">
                                                                                                                    <i class="fa-solid fa-industry fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                                    Εταιρεία
                                                                                                                </th>
                                                                                                                <th style="border: 1px solid darkblue;">
                                                                                                                    <i class="fa-solid fa-envelope fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                                    Email
                                                                                                                </th>
                                                                                                            </tr>
                                                                                                        </thead>
                                                                                                        <tbody>
                                                                                                            @if (thesis.IsCompanyInteresetedInProfessorThesis && thesis.CompanyInterested != null)
                                                                                                            {
                                                                                                                <tr>
                                                                                                                    <td>
                                                                                                                        <a href="#" @onclick="() => ShowCompanyDetailsAtProfessorThesisInterestFromHyperlinkCompanyName(thesis)" title="Προβολή Στοιχείων Εταιρείας">
                                                                                                                            @(thesis.CompanyInterested.CompanyName ?? "Άγνωστη Εταιρεία")
                                                                                                                        </a>
                                                                                                                    </td>
                                                                                                                    <td>
                                                                                                                        @thesis.CompanyInterested.CompanyEmail
                                                                                                                        <a href="mailto:@thesis.CompanyInterested.CompanyEmail" title="Αποστολή Email">
                                                                                                                            <i class="fas fa-envelope"></i>
                                                                                                                        </a>
                                                                                                                    </td>
                                                                                                                </tr>
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                                <tr>
                                                                                                                    <td colspan="5" class="text-center text-danger">
                                                                                                                        <strong>Καμία Εταιρεία δεν έχει εκδηλώσει ενδιαφέρον ακόμη</strong>
                                                                                                                    </td>
                                                                                                                </tr>
                                                                                                            }
                                                                                                        </tbody>
                                                                                                    </table>
                                                                                                </td>
                                                                                            </tr>
                                                                                        }
                                                                                        @if (expandedTheses.ContainsKey(thesis.RNGForThesisUploaded) && expandedTheses[thesis.RNGForThesisUploaded])
                                                                                        {
                                                                                            <br/>
                                                                                            <tr>
                                                                                                <td colspan="9" style="padding: 0;">
                                                                                                    <div style="display: flex; justify-content: space-between; align-items: center; height: 24px; line-height: 24px; width: 100%;">
                                                                                                        <i class="fa-solid fa-graduation-cap" style="font-size: 18px; color: #0d6efd;"></i>
                                                                                                        <label class="form-label" style="color: #0d6efd; font-weight: bold; font-size: 18px; margin: 0;">Λεπτομέρειες Αιτούντων</label>
                                                                                                        <i class="fa-solid fa-graduation-cap" style="font-size: 18px; color: #0d6efd;"></i>
                                                                                                    </div>
                                                                                                </td>
                                                                                            </tr>
                                                                                            <tr>
                                                                                                <td colspan="9">
                                                                                                    <table class="table table-sm">
                                                                                                        <thead>
                                                                                                            <tr style="border: 1px solid #00008B;">
                                                                                                                <th style="border: 1px solid #00008B;">
                                                                                                                    <i class="fa-solid fa-user fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                                    Προφίλ
                                                                                                                </th>
                                                                                                                <th style="border: 1px solid #00008B;">
                                                                                                                    <i class="fa-solid fa-signature fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                                    Όνομα
                                                                                                                </th>
                                                                                                                <th style="border: 1px solid #00008B;">
                                                                                                                    <i class="fa-solid fa-signature fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                                    Επώνυμο
                                                                                                                </th>
                                                                                                                <th style="border: 1px solid #00008B;">
                                                                                                                    <i class="fa-solid fa-calendar-plus fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                                    Ημερομηνία Αίτησης
                                                                                                                </th>
                                                                                                                <th style="border: 1px solid #00008B;">
                                                                                                                    <i class="fa-solid fa-calendar-plus fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                                    Έτος Φοίτησης
                                                                                                                </th>
                                                                                                                <th style="border: 1px solid #00008B;">
                                                                                                                    <i class="fa-solid fa-phone fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                                    Τηλεφωνο
                                                                                                                </th>
                                                                                                                <th style="border: 1px solid #00008B;">
                                                                                                                    <i class="fa-solid fa-comments fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                                    Επικοινωνία
                                                                                                                </th>
                                                                                                                <th style="border: 1px solid #00008B;">
                                                                                                                    <i class="fa-solid fa-hand fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                                    Ενέργεια
                                                                                                                </th>
                                                                                                                <th style="border: 1px solid #00008B;">
                                                                                                                    <i class="fa-solid fa-hourglass-half fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                                    Κατάσταση Αίτησης
                                                                                                                </th>
                                                                                                            </tr>
                                                                                                        </thead>
                                                                                                        <tbody>
                                                                                                            @if (studentDataCache == null)
                                                                                                            {
                                                                                                                <!-- Loading state -->
                                                                                                                <tr>
                                                                                                                    <td colspan="9" class="text-center">
                                                                                                                        <div class="spinner-border text-primary" role="status">
                                                                                                                            <span class="sr-only">Φόρτωση...</span>
                                                                                                                        </div>
                                                                                                                        <p>Φόρτωση δεδομένων φοιτητών...</p>
                                                                                                                    </td>
                                                                                                                </tr>
                                                                                                            }
                                                                                                            else if (professorThesisApplicantsMap.ContainsKey(thesis.RNGForThesisUploaded) && 
                                                                                                                    professorThesisApplicantsMap[thesis.RNGForThesisUploaded].Any())
                                                                                                            {
                                                                                                                @foreach (var applicant in professorThesisApplicantsMap[thesis.RNGForThesisUploaded])
                                                                                                                {
                                                                                                                    var student = studentDataCache.TryGetValue(applicant.StudentEmailAppliedForProfessorThesis.ToLower(), out var s) ? s : null;
                                                                                                                    var status = applicant.ProfessorThesisStatusAppliedAtStudentSide ?? "N/A";
                                                                                                                    var professorStatus = applicant.ProfessorThesisStatusAppliedAtProfessorSide ?? "N/A";

                                                                                                                    <tr style="background-color: @(professorStatus == "Έχει γίνει Αποδοχή" ? "lightgreen" :
                                                                                                                                        professorStatus == "Έχει Απορριφθεί" ? "lightcoral" :
                                                                                                                                        professorStatus == "Αποσύρθηκε από τον φοιτητή" ? "lightyellow" : "transparent")">
                                                                                                                        <td>
                                                                                                                            <a href="#" @onclick="() => ShowStudentDetailsInNameAsHyperlinkForProfessorThesis(applicant.StudentUniqueIDAppliedForProfessorThesis)" 
                                                                                                                               title="Προφίλ Υποψήφιου Σπουδαστή">
                                                                                                                                <i class="fas fa-eye icon-button"></i>
                                                                                                                                @if (student == null)
                                                                                                                                {
                                                                                                                                    <span class="badge badge-warning ml-1">Δε βρέθηκε</span>
                                                                                                                                }
                                                                                                                            </a>
                                                                                                                        </td>
                                                                                                                        <td>@(student?.Name ?? "Δε βρέθηκε")</td>
                                                                                                                        <td>@(student?.Surname ?? "Δε βρέθηκε")</td>
                                                                                                                        <td>@applicant.DateTimeStudentAppliedForProfessorThesis.ToString("dd/MM/yyyy HH:mm")</td>
                                                                                                                        <td>@(student?.StudyYear ?? "-")</td>
                                                                                                                        <td>@(student?.Telephone ?? "-")</td>
                                                                                                                        <td class="text-center">
                                                                                                                            @applicant.StudentEmailAppliedForProfessorThesis
                                                                                                                            <a href="mailto:@applicant.StudentEmailAppliedForProfessorThesis" title="Αποστολή Email">
                                                                                                                                <i class="fas fa-envelope"></i>
                                                                                                                            </a>
                                                                                                                        </td>
                                                                                                                        <td>
                                                                                                                            @if (status == "Σε Επεξεργασία")
                                                                                                                            {
                                                                                                                                <div style="display: flex; gap: 10px; justify-content: center;">
                                                                                                                                    <span @onclick="() => ConfirmAndAcceptProfessorThesis(applicant.Id, applicant.StudentUniqueIDAppliedForProfessorThesis)" 
                                                                                                                                          title="Αποδοχή Αίτησης" style="cursor: pointer;">
                                                                                                                                        <i class="fas fa-check" style="color: green; font-size: 24px;"></i>
                                                                                                                                    </span>

                                                                                                                                    <span @onclick="() => ConfirmAndRejectProfessorThesis(applicant.Id, applicant.StudentUniqueIDAppliedForProfessorThesis)" 
                                                                                                                                          title="Απόρριψη Αίτησης" style="cursor: pointer;">
                                                                                                                                        <i class="fas fa-times" style="color: red; font-size: 24px;"></i>
                                                                                                                                    </span>
                                                                                                                                </div>
                                                                                                                            }
                                                                                                                            else
                                                                                                                            {
                                                                                                                                <span class="text">@status</span>
                                                                                                                            }
                                                                                                                        </td>
                                                                                                                        <td>
                                                                                                                            @if (professorStatus == "Έχει γίνει Αποδοχή")
                                                                                                                            {
                                                                                                                                <span style="color: green; font-weight: bold;">Έχει γίνει Αποδοχή</span>
                                                                                                                            }
                                                                                                                            else if (professorStatus == "Έχει Απορριφθεί")
                                                                                                                            {
                                                                                                                                <span style="color: red; font-weight: bold;">Έχει Απορριφθεί</span>
                                                                                                                            }
                                                                                                                            else
                                                                                                                            {
                                                                                                                                <span>@professorStatus</span>
                                                                                                                            }
                                                                                                                        </td>
                                                                                                                    </tr>
                                                                                                                }
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                                <tr>
                                                                                                                    <td colspan="9" class="text-center text-danger">
                                                                                                                        <strong>Καμία Αίτηση για αυτήν την Πτυχιακή Εργασία ακόμη</strong>
                                                                                                                    </td>
                                                                                                                </tr>
                                                                                                            }
                                                                                                        </tbody>
                                                                                                    </table>
                                                                                                </td>
                                                                                            </tr>
                                                                                        }

                                                                                    }

                                                                               }
                                                                                else
                                                                                {
                                                                                    <tr>
                                                                                        <td colspan="6" class="text-center">Δεν υπάρχουν Πτυχιακές Εργασίες</td>
                                                                                    </tr>
                                                                                }

                                                                            </tbody>
                                                                        </table>
                                                                         <!-- Pagination Controls -->
                                                                        <div class="d-flex justify-content-center align-items-center mt-3 gap-1">
                                                                            <!-- First Page (<<) -->
                                                                            <span class="pagination-item @(currentPageForProfessorTheses == 1 ? "disabled" : "")" 
                                                                                  @onclick="@(() => GoToFirstPageForProfessorTheses())">
                                                                                &lt;&lt;
                                                                            </span>
        
                                                                            <!-- Previous Page (<) -->
                                                                            <span class="pagination-item @(currentPageForProfessorTheses == 1 ? "disabled" : "")" 
                                                                                  @onclick="@(() => PreviousPageForProfessorTheses())">
                                                                                &lt;
                                                                            </span>
        
                                                                            <!-- Page Numbers -->
                                                                            @foreach (var pageNum in GetVisiblePagesForProfessorTheses())
                                                                            {
                                                                                @if (pageNum == -1)
                                                                                {
                                                                                    <span class="pagination-ellipsis">...</span>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <span class="pagination-item @(pageNum == currentPageForProfessorTheses ? "active" : "")" 
                                                                                          @onclick="@(() => GoToPageForProfessorTheses(pageNum))">
                                                                                        @pageNum
                                                                                    </span>
                                                                                }
                                                                            }
        
                                                                            <!-- Next Page (>) -->
                                                                            <span class="pagination-item @(currentPageForProfessorTheses == totalPagesForProfessorTheses ? "disabled" : "")" 
                                                                                  @onclick="@(() => NextPageForProfessorTheses())">
                                                                                &gt;
                                                                            </span>
        
                                                                            <!-- Last Page (>>) -->
                                                                            <span class="pagination-item @(currentPageForProfessorTheses == totalPagesForProfessorTheses ? "disabled" : "")" 
                                                                                  @onclick="@(() => GoToLastPageForProfessorTheses())">
                                                                                &gt;&gt;
                                                                            </span>
        
                                                                            <!-- Page counter -->
                                                                            <span class="ms-3">Σελίδα @currentPageForProfessorTheses από @totalPagesForProfessorTheses</span>
                                                                        </div>
                                                                                                                                                                                                  
                                                            }                                                     
                                                            

                                                            <!-- SEARCH COMPANY THESES AS PROFESSOR -->
                                                            <div class="mb-3 row-dark-gray mt-4">
                                                                <div class="d-flex justify-content-between align-items-center">
                                                                    <label class="form-label" style="color: #FFF8DC;">• Αναζήτηση Πτυχιακών Από Εταιρείες •</label>
                                                                    <button class="btn btn-link" @onclick="ToggleToSearchForUploadedCompanyThesesAsProfessor">
                                                                        @if (isUploadedCompanyThesesVisibleAsProfessor)
                                                                        {
                                                                            <span>&#8722;</span> <!-- Minus sign -->
                                                                        }
                                                                        else
                                                                        {
                                                                            <span>&#43;</span> <!-- Plus sign -->
                                                                        }
                                                                    </button>
                                                                </div>
                                                            </div>



                                                            @if (isUploadedCompanyThesesVisibleAsProfessor)
                                                            {
                                                                <!-- Search Form -->
                                                                <div class="row mb-3">
                                                                    <div class="col-md-4">
                                                                        <label for="searchCompanyNameToFindThesesAsProfessor"><strong>Όνομα Εταιρείας</strong></label>
                                                                        <input type="text" id="searchCompanyNameToFindThesesAsProfessor" class="form-control" @bind="searchCompanyNameToFindThesesAsProfessor" placeholder="Εισάγετε όνομα εταιρείας" />
                                                                    </div>
                                                                    <div class="col-md-4">
                                                                        <label for="searchThesisTitleToFindThesesAsProfessor"><strong>Τίτλος Πτυχιακής</strong></label>
                                                                        <input type="text" id="searchThesisTitleToFindThesesAsProfessor" class="form-control" @bind="searchThesisTitleToFindThesesAsProfessor" placeholder="Εισάγετε τίτλο" />
                                                                    </div>
                                                                    <div class="col-md-4">
                                                                        <label for="searchSupervisorToFindThesesAsProfessor"><strong>Ονοματεπώνυμο Επιβλέποντα</strong></label>
                                                                        <input type="text" id="searchSupervisorToFindThesesAsProfessor" class="form-control" @bind="searchSupervisorToFindThesesAsProfessor" placeholder="Εισάγετε όνομα επιβλέποντα" />
                                                                    </div>                                                                        
                                                                    <div class="col-md-4">
                                                                        <label for="searchDepartmentToFindThesesAsProfessor"><strong>Τμήμα</strong></label>
                                                                        <input type="text" id="searchDepartmentToFindThesesAsProfessor" class="form-control" @bind="searchDepartmentToFindThesesAsProfessor" placeholder="Εισάγετε τμήμα" />
                                                                    </div>
                                                                    <div class="col-md-4">
                                                                        <label for="searchSkillsToFindThesesAsProfessor"><strong>Δεξιότητες</strong></label>
                                                                        <input type="text" id="searchSkillsToFindThesesAsProfessor" class="form-control" @bind="searchSkillsToFindThesesAsProfessor" placeholder="Εισάγετε δεξιότητες" />
                                                                    </div>
                                                                    <div class="col-md-4">
                                                                        <label for="searchStartingDateToFindThesesAsProfessor"><strong>Ξεκινάει Από</strong></label>
                                                                        <input type="date" id="searchStartingDateToFindThesesAsProfessor" class="form-control" @bind="searchStartingDateToFindThesesAsProfessor" />
                                                                    </div>
                                                                </div>


                                                                <div class="col-md-4 text-end mt-3">
                                                                    <!-- Search Button -->
                                                                    <button 
                                                                        class="btn me-2" 
                                                                        style="background-color: lightblue; color: black;" 
                                                                        @onclick="SearchCompanyThesesAsProfessor" 
                                                                        title="Αναζήτηση Πτυχιακής">
                                                                        <i class="fas fa-search"></i>
                                                                    </button>

                                                                    <!-- Clear Button -->
                                                                    <button 
                                                                        class="btn" 
                                                                        style="background-color: orange; color: black;" 
                                                                        @onclick="ClearSearchFieldsForSearchCompanyThesesAsProfessor" 
                                                                        title="Εκκαθάριση Πεδιών και Πίνακα Αποτελεσμάτων" 
                                                                        aria-label="Clear">
                                                                        <i class="fas fa-times"></i>
                                                                    </button>
                                                                </div>
                                                                <br/>
                                                                <br/>


                                                                
                                                               @if (searchPerformedToFindThesesAsProfessor)
                                                               {
                                                                    @if (companyThesesResultsToFindThesesAsProfessor != null && companyThesesResultsToFindThesesAsProfessor.Any())
                                                                    {
                                                                        <div class="row mb-3">
                                                                            <div class="col-md-2">
                                                                                <label style="color: #4682b4; font-weight: bold; font-size: 15px;">Αποτελέσματα ανά Σελίδα</label>
                                                                                <div class="input-group" style="max-width: 65px;">
                                                                                    <select class="form-control form-control-sm" 
                                                                                            @onchange="OnPageSizeChange_SearchForCompanyThesesAsProfessor" 
                                                                                            aria-label="Items per page">
                                                                                        @foreach (var option in companyThesesPageSize_SearchForCompanyThesesAsProfessor)
                                                                                        {
                                                                                            <option value="@option" selected="@(CompanyThesesPerPage == option)">@option</option>
                                                                                        }
                                                                                    </select>
                                                                                    <div class="input-group-append">
                                                                                        <span class="input-group-text">
                                                                                            <i class="fas fa-chevron-down"></i>
                                                                                        </span>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <table class="table table-bordered">
                                                                            <thead>
                                                                                <tr>
                                                                                    <td colspan="9" style="padding: 0;">
                                                                                        <div style="display: flex; justify-content: space-between; align-items: center; height: 24px; line-height: 24px; width: 100%;">
                                                                                             <i class="fa-solid fa-magnifying-glass" style="font-size: 18px; color: #0d6efd;"></i>
                                                                                                <label class="form-label" style="color: #0d6efd; font-weight: bold; font-size: 18px; margin: 0;">Αποτέλεσμα Αναζήτησης</label>
                                                                                             <i class="fa-solid fa-magnifying-glass" style="font-size: 18px; color: #0d6efd;"></i>
                                                                                         </div>
                                                                                    </td>
                                                                                </tr>
                                                                                <tr style="background-color: lightgray; border: 2px solid black;">
                                                                                    <th style="border: 2px solid black;">
                                                                                        <i class="fa-solid fa-industry fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                        Εταιρεία
                                                                                    </th>
                                                                                    <th style="border: 2px solid black;">
                                                                                        <i class="fa-solid fa-font fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                        Τίτλος Πτυχιακής
                                                                                    </th>
                                                                                    <th style="border: 2px solid black;">
                                                                                        <i class="fa-solid fa-calendar-plus fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                        Ημερομηνία Δημιουργίας
                                                                                    </th>
                                                                                    <th style="border: 2px solid black;">
                                                                                        <i class="fa-solid fa-circle-info fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                        Επισκόπηση
                                                                                    </th>
                                                                                    <th style="border: 2px solid black;">
                                                                                        <i class="fa-solid fa-heart fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                        Ένδειξη Ενδιαφέροντος
                                                                                    </th>
                                                                                    <th style="border: 2px solid black;">
                                                                                        <i class="fa-solid fa-hourglass-half fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                        Κατάσταση
                                                                                    </th>
                                                                                </tr>
                                                                            </thead>
                                                                                <tbody>
                                                                                    @foreach (var thesis in GetPaginatedCompanyTheses_AsProfessor())
                                                                                    {
                                                                                        // Determine row background color
                                                                                        string rowColor = thesis.IsProfessorInterestedInCompanyThesisStatus switch
                                                                                        {
                                                                                            "Έχετε Αποδεχτεί" => "lightgreen",
                                                                                            _ => "transparent"
                                                                                        };

                                                                                        <tr style="background-color: @rowColor;">
                                                                                            <td>
                                                                                                <a href="#" @onclick="() => ShowCompanyDetailsFromHyperlinkNameToTheProfessor(thesis.CompanyEmailUsedToUploadThesis)">
                                                                                                    @(thesis.Company?.CompanyName ?? "Άγνωστη Εταιρεία")
                                                                                                </a>
                                                                                            </td>
                                                                                            <td>@thesis.CompanyThesisTitle</td>
                                                                                            <td>@thesis.CompanyThesisUploadDateTime.ToShortDateString()</td>                             
                                                                                            <td style="text-align: center;">
                                                                                                <i class="fa fa-eye" aria-hidden="true" style="cursor: pointer; color: blue;" @onclick="() => ShowThesisDetails(thesis)"></i>
                                                                                            </td>
                                                                                            <td style="text-align: center;">
                                                                                                @if (thesis.IsProfessorInteresetedInCompanyThesis)
                                                                                                {
                                                                                                    // Check if the CURRENT professor is the one who showed interest
                                                                                                    if (thesis.ProfessorEmailInterestedInCompanyThesis == CurrentUserEmail)
                                                                                                    {
                                                                                                        if (thesis.IsProfessorInterestedInCompanyThesisStatus == "Έχετε Αποδεχτεί")
                                                                                                        {
                                                                                                            <span>Ολοκληρώθηκε</span>
                                                                                                        }
                                                                                                        else
                                                                                                        {
                                                                                                            <span>Έχετε Εκδηλώσει Ενδιαφέρον</span>
                                                                                                        }
                                                                                                    }
                                                                                                    else
                                                                                                    {
                                                                                                        // Another professor has shown interest - show "Not Available"
                                                                                                        <span style="color: black;">Μη Διαθέσιμο</span>
                                                                                                    }
                                                                                                }
                                                                                                else if (thesis.IsProfessorInterestedInCompanyThesisStatus == "Δεν έχει γίνει Αποδοχή")
                                                                                                {
                                                                                                    <i class="fas fa-check" @onclick="() => MarkInterestInThesisCompanyThesisAsProfessor(thesis)" style="cursor: pointer;"></i>
                                                                                                }
                                                                                                else
                                                                                                {
                                                                                                    <span>Αναμονή Αποδοχής</span>; 
                                                                                                }
                                                                                            </td>
                                                                                            <td>
                                                                                                @if (thesis.IsProfessorInteresetedInCompanyThesis)
                                                                                                {
                                                                                                    if (thesis.ProfessorEmailInterestedInCompanyThesis == CurrentUserEmail)
                                                                                                    {
                                                                                                        @thesis.IsProfessorInterestedInCompanyThesisStatus
                                                                                                    }
                                                                                                    else
                                                                                                    {
                                                                                                        <span style="display: block; text-align: center;">-</span>
                                                                                                    }
                                                                                                }
                                                                                                else
                                                                                                {
                                                                                                    @thesis.IsProfessorInterestedInCompanyThesisStatus
                                                                                                }
                                                                                            </td>
                                                                                        </tr>
                                                                                    }
                                                                            </tbody>
                                                                        </table>
                                                                        <!-- Pagination Controls -->
                                                                        <div class="d-flex justify-content-center align-items-center mt-3 gap-1">
                                                                            <span class="pagination-item @(currentPage_CompanyTheses == 1 ? "disabled" : "")"
                                                                                  @onclick="GoToFirstPage_CompanyTheses">
                                                                                &lt;&lt;
                                                                            </span>

                                                                            <span class="pagination-item @(currentPage_CompanyTheses == 1 ? "disabled" : "")"
                                                                                  @onclick="PreviousPage_CompanyTheses">
                                                                                &lt;
                                                                            </span>

                                                                            @foreach (var pageNum in GetVisiblePages_CompanyTheses_AsProfessor())
                                                                            {
                                                                                if (pageNum == -1)
                                                                                {
                                                                                    <span class="pagination-ellipsis">...</span>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <span class="pagination-item @(pageNum == currentPage_CompanyTheses ? "active" : "")"
                                                                                          @onclick="@(() => GoToPage_CompanyTheses(pageNum))">
                                                                                        @pageNum
                                                                                    </span>
                                                                                }
                                                                            }

                                                                            <span class="pagination-item @(currentPage_CompanyTheses == totalPages_CompanyTheses ? "disabled" : "")"
                                                                                  @onclick="NextPage_CompanyTheses">
                                                                                &gt;
                                                                            </span>

                                                                            <span class="pagination-item @(currentPage_CompanyTheses == totalPages_CompanyTheses ? "disabled" : "")"
                                                                                  @onclick="GoToLastPage_CompanyTheses">
                                                                                &gt;&gt;
                                                                            </span>

                                                                            <span class="ms-3">
                                                                                Σελίδα @currentPage_CompanyTheses από @totalPages_CompanyTheses
                                                                            </span>
                                                                        </div>

                                                                        <br/>
                                                                        <br/>
                                                                    }
                                                                    else
                                                                    {
                                                                        <div class="alert alert-warning d-flex align-items-center" role="alert">
                                                                          <i class="fas fa-exclamation-triangle me-2"></i>
                                                                          <div>Δεν βρέθηκε κάποιο αποτέλεσμα που να πληρεί τα κριτήρια της Αναζήτησης σας.</div>
                                                                        </div>
                                                                        <br/>
                                                                        <br/>
                                                                    }
                                                               }
                                                            
                                                            } 
                                                            


                                                        </div>  

@* ------------------------------------------------------------------------------------ ΕΔΩ ΘΑ ΜΠΟΥΝΕ ΟΙ ΠΡΑΚΤΙΚΕΣ ΤΩΝ ΚΑΘΗΓΗΤΩΝ (ΑΡΧΗ) - PROFESSOR INTERNSHIPS TAB 10/03/2025 ---------------------------------------------------------------------------------------------------------*@                                                            
                                                                <div class="tab-pane  fade" id="professorinternships" role="tabpanel" aria-labelledby="professorinternships-tab">

                                                                    <div class="mb-3 row-dark-gray">
                                                                        <div class="d-flex justify-content-between align-items-center">
                                                                            <label class="form-label" style="color: #FFF8DC;">• Δημιουργία Θέσης Πρακτικής Άσκησης •</label>
                                                                            <button class="btn btn-link" @onclick="ToggleFormVisibilityForUploadProfessorInternship">
                                                                                @if (isProfessorInternshipFormVisible)
                                                                                {
                                                                                    <span>&#8722;</span> <!-- Minus sign -->
                                                                                }
                                                                                else
                                                                                {
                                                                                    <span>&#43;</span> <!-- Plus sign -->
                                                                                }
                                                                            </button>
                                                                        </div>
                                                                    </div>
                                                                    @if (isProfessorInternshipFormVisible)
                                                                    {
                                                                        <div class="row mb-3">
                                                                            <div class="col-md-4">
                                                                                <label><strong>Τύπος Πρακτικής</strong><span style="color: red;"> *</span></label>
                                                                                <select class="form-control @(showErrorMessage && string.IsNullOrWhiteSpace(professorInternship.ProfessorInternshipType) ? "shake error" : "")"
                                                                                        @bind="professorInternship.ProfessorInternshipType">
                                                                                    <option value="">-- Επιλέξτε Τύπο Πρακτικής --</option>
                                                                                    <option value="Full-Time">Πλήρους Απασχόλησης</option>
                                                                                    <option value="Part-Time">Μερικής Απασχόλησης</option>
                                                                                    <option value="Part-Time_Full-Time">Πλήρης ή Μερικής Απασχόλησης</option>
                                                                                </select>
                                                                            </div>
                                                                        </div>

                                                                        <div class="row mb-3">
                                                                            <div class="col-md-4">
                                                                                <label><strong>Χρηματοδότηση</strong><span style="color: red;"> *</span></label>
                                                                                <select class="form-control @(showErrorMessage && string.IsNullOrWhiteSpace(professorInternship.ProfessorInternshipESPA) ? "shake error" : "")"
                                                                                        @bind="professorInternship.ProfessorInternshipESPA">
                                                                                    <option value="">-- Επιλέξτε Χρηματοδότηση --</option>
                                                                                    <option value="ESPA-Funding">Μέσω ΕΣΠΑ</option>
                                                                                    <option value="Same-Funding">Ιδίου Φορεά</option>
                                                                                    <option value="ESPA-Funding_Same-Funding">Μέσω ΕΣΠΑ ή Ιδίου Φορεά</option>
                                                                                </select>
                                                                            </div>
                                                                        </div>

                                                                        <div class="row mb-3">
                                                                            <div class="col-md-4">
                                                                                 <label for="editForeas">Φορέας</label> <span style="font-style: italic; color: gray;"> (Προαιρετικό)</span>
                                                                                 <select id="editForeas" class="form-control" @bind="professorInternship.ProfessorInternshipForeas">
                                                                                          @foreach (var foreas in ForeasType)
                                                                                          {
                                                                                            <option value="@foreas">@foreas</option>
                                                                                          }
                                                                                 </select>
                                                                            </div>  
                                                                        </div>
                                                                        
                                                                        <div class="row mb-3">
                                                                            <div class="col-md-4">
                                                                                <label for="ProfessorInternshipCompanyToCooperate">Εταιρείας Συνεργασίας<span style="font-style: italic; color: gray;"> (Προαιρετικό)</span></label>
                                                                                <div class="input-group">
                                                                                    <select id="ProfessorInternshipCompanyToCooperate" class="form-control" @bind="selectedCompanyId">
                                                                                        <option value="">-- Χωρίς Προτίμηση --</option>
                                                                                        @foreach (var company in companies)
                                                                                        {
                                                                                            <option value="@company.Id">
                                                                                                @($"{company.CompanyName}")
                                                                                            </option>
                                                                                        }
                                                                                    </select>
                                                                                    <div class="input-group-append">
                                                                                        <span class="input-group-text">
                                                                                            <i class="fas fa-chevron-down"></i>
                                                                                        </span>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                        <div class="row mb-3">
                                                                            <div class="col-md-4">
                                                                                <label><strong>Διαθέσιμη Από</strong><span style="color: red;"> *</span></label>
                                                                                <input type="date" class="form-control @(showErrorMessage && professorInternship.ProfessorInternshipActivePeriod.Date <= DateTime.Today ? "shake error" : "")"
                                                                                       @bind="professorInternship.ProfessorInternshipActivePeriod" />
                                                                            </div>
                                                                        </div>

                                                                        <div class="row mb-3">
                                                                            <div class="col-md-4">
                                                                                <label><strong>Ολοκλήρωση Μέχρι</strong><span style="color: red;"> *</span></label>
                                                                                <input type="date" class="form-control @(showErrorMessage && professorInternship.ProfessorInternshipFinishEstimation.Date <= DateTime.Today ? "shake error" : "")"
                                                                                       @bind="professorInternship.ProfessorInternshipFinishEstimation" />
                                                                            </div>
                                                                        </div>

                                                                        <div class="row mb-3">
                                                                            <div class="col-md-4">
                                                                                <label><strong>Τίτλος Πρακτικής</strong><span style="color: red;"> *</span></label>
                                                                                <input type="text" class="form-control @(showErrorMessage && string.IsNullOrWhiteSpace(professorInternship.ProfessorInternshipTitle) ? "shake error" : "")"
                                                                                       @bind="professorInternship.ProfessorInternshipTitle" maxlength="120" />
                                                                            </div>
                                                                        </div>

                                                                        <div class="row mb-3">
                                                                            <div class="col-md-4">
                                                                                <label><strong>Υπεύθυνος Επικοινωνίας</strong><span style="color: red;"> *</span></label>
                                                                                <input type="text" class="form-control @(showErrorMessage && string.IsNullOrWhiteSpace(professorInternship.ProfessorInternshipContactPerson) ? "shake error" : "")"
                                                                                       @bind="professorInternship.ProfessorInternshipContactPerson" />
                                                                            </div>
                                                                        </div>

                                                                        <div class="row mb-3">
                                                                            <div class="col-md-4">
                                                                                <label for="PositionContactPerson">
                                                                                    <strong>Email Υπευθύνου</strong>
                                                                                    <span style="color: red;">*</span>
                                                                                </label>
                                                                                <input type="email" id="PositionContactPerson" 
                                                                                       class="form-control @(showErrorMessageforUploadinginternshipsAsProfessor && !IsValidEmailForProfessorInternships(professorInternship.ProfessorEmailUsedToUploadInternship) ? "shake error" : "")" 
                                                                                       @bind="professorInternship.ProfessorEmailUsedToUploadInternship" 
                                                                                       placeholder="example@mail.com" />
                                                                                @if (showErrorMessageforUploadinginternshipsAsProfessor && !IsValidEmailForProfessorInternships(professorInternship.ProfessorEmailUsedToUploadInternship))
                                                                                {
                                                                                    <small style="color: red;">Παρακαλώ εισάγετε ένα έγκυρο email.</small>
                                                                                }
                                                                            </div>
                                                                        </div>

                                                                        <div class="row mb-3">
                                                                            <div class="col-md-4">
                                                                                <label><strong>Τηλέφωνο Υπεύθυνου</strong></label>
                                                                                <div class="input-group">
                                                                                    <div class="input-group-prepend">
                                                                                        <span class="input-group-textfortelephone">+30</span>
                                                                                    </div>
                                                                                    <input type="tel" class="form-control"
                                                                                           @bind="professorInternship.ProfessorInternshipContactTelephonePerson" />
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                         <!-- Περιφέρεια Καθηγητή -->
                                                                        <div class="row mb-3">
                                                                            <div class="col-md-4">
                                                                                <label for="ProfessorInternshipPerifereiaLocation"><strong>Περιφέρεια</strong><span style="color: red;"> *</span></label>
                                                                                <div class="input-group">
                                                                                    <select id="ProfessorInternshipPerifereiaLocation" class="form-control @(showErrorMessage && string.IsNullOrWhiteSpace(professorInternship.ProfessorInternshipPerifereiaLocation) ? "shake error" : "")" @bind="professorInternship.ProfessorInternshipPerifereiaLocation">
                                                                                        <option value="">-- Επιλέξτε Περιφέρεια --</option>
                                                                                        @foreach (var region in Regions)
                                                                                        {
                                                                                            <option value="@region">@region</option>
                                                                                        }
                                                                                    </select>
                                                                                    <div class="input-group-append">
                                                                                        <span class="input-group-text">
                                                                                            <i class="fas fa-chevron-down"></i>
                                                                                        </span>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                        <!-- Δήμος Καθηγητή -->
                                                                        <div class="row mb-3">
                                                                            <div class="col-md-4">
                                                                                <label for="ProfessorInternshipDimosLocation"><strong>Δήμος</strong><span style="color: red;"> *</span></label>
                                                                                <div class="input-group">
                                                                                    <select id="ProfessorInternshipDimosLocation" class="form-control @(showErrorMessage && string.IsNullOrWhiteSpace(professorInternship.ProfessorInternshipDimosLocation) ? "shake error" : "")" @bind="professorInternship.ProfessorInternshipDimosLocation">
                                                                                        <option value="">-- Επιλέξτε Δήμο --</option>
                                                                                        @foreach (var town in GetTownsForRegion(professorInternship.ProfessorInternshipPerifereiaLocation))
                                                                                        {
                                                                                            <option value="@town">@town</option>
                                                                                        }
                                                                                    </select>
                                                                                    <div class="input-group-append">
                                                                                        <span class="input-group-text">
                                                                                            <i class="fas fa-chevron-down"></i>
                                                                                        </span>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                        <!-- Ταχυδρομικός Κώδικας Τοποθεσίας Καθηγητή -->
                                                                        <div class="row mb-3">
                                                                            <div class="col-md-4">
                                                                                <label for="ProfessorInternshipPostalCodeLocation">Ταχυδρομικός Κώδικας Τοποθεσίας<span style="font-style: italic; color: gray;"> (Προαιρετικό)</span></label>
                                                                                <input type="text" id="ProfessorInternshipPostalCodeLocation" class="form-control" @bind="professorInternship.ProfessorInternshipPostalCodeLocation" placeholder="Ταχυδρομικός Κώδικας" />
                                                                            </div>
                                                                        </div>

                                                                        <div class="row mb-3">
                                                                            <div class="col-md-4">
                                                                                <label><strong>Προσφορά Μεταφοράς</strong><span style="color: red;"> *</span></label>
                                                                                <div class="form-check">
                                                                                    <input type="radio" id="ProfessorInternshipTransportOfferYes" class="form-check-input" name="ProfessorInternshipTransportOffer" value="true" checked="@(professorInternship.ProfessorInternshipTransportOffer ? "checked" : "")" @onchange="() => UpdateTransportOfferForProfessorInternship(true)" />
                                                                                    <label for="CompanyInternshipTransportOfferYes" class="form-check-label">Ναι</label>
                                                                                </div>
                                                                                <div class="form-check">
                                                                                    <input type="radio" id="ProfessorInternshipTransportOfferYes" class="form-check-input" name="ProfessorInternshipTransportOffer" value="false" checked="@(professorInternship.ProfessorInternshipTransportOffer  ? "" : "checked")" @onchange="() => UpdateTransportOfferForProfessorInternship(false)" />
                                                                                    <label for="ProfessorInternshipTransportOfferYes" class="form-check-label">Όχι</label>
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                        <!-- Γενικός Τομέας Εργασίας Καθηγητή -->
                                                                        <div class="row mb-3">
                                                                            <div class="col-md-4">
                                                                                <label @onclick="ToggleCheckboxesForProfessorInternship">
                                                                                    <strong>Τομέας Πρακτικής</strong><span style="color: red;"> *</span>
                                                                                    <span class="light-cadetblue-text"> (Άνοιγμα/Κλείσιμο)</span>
                                                                                </label>
                                                                                <div id="toggleCheckboxes" class="checkbox-container">
                                                                                    @if (Areas == null || !Areas.Any())
                                                                                    {
                                                                                        <p>Loading...</p>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        @foreach (var area in Areas)
                                                                                        {
                                                                                            <div class="form-check">
                                                                                                <input type="checkbox"
                                                                                                       id="area_@area.Id"
                                                                                                       class="form-check-input"
                                                                                                       @onchange="(e) => OnCheckedChangedAreasWhenUploadInternshipAsProfessor(e, area)"
                                                                                                       checked="@IsSelectedAreaForProfessorInternship(area)" />
                                                                                                <label class="form-check-label" for="area_@area.Id">
                                                                                                    @area.AreaName
                                                                                                </label>
                                                                                            </div>
                                                                                        }
                                                                                    }
                                                                                </div>
                                                                            </div>
                                                                        </div>                                                               

                                                                        <div class="row mb-3">
                                                                            <div class="col-md-4">
                                                                                <label><strong>Περιγραφή</strong><span style="color: red;"> *</span></label>
                                                                                <textarea class="form-control @(showErrorMessage && string.IsNullOrWhiteSpace(professorInternship.ProfessorInternshipDescription) ? "shake error" : "")"
                                                                                          @bind="professorInternship.ProfessorInternshipDescription"></textarea>
                                                                            </div>
                                                                        </div>

                                                                        <div class="row mb-3">
                                                                            <div class="col-md-4">
                                                                                <label for="ProfessorInternshipAttachment">Συνημμένο Αρχείο Πρακτικής<span style="font-style: italic; color: gray;"> (Προαιρετικό)</span></label>
                                                                                <InputFile id="positionAttachment" class="form-control" OnChange="HandleFileUploadForProfessorInternships" />
                                                                            </div>
                                                                        </div>

                                                                                                                                               

                                                                        <!-- SAVE INTERNSHIP AS PROFESSOR -->
                                                                        <div class="mb-3">
                                                                            <button class="modern-button"
                                                                                    style="background-color: #007bff; color: white; display: inline-flex; align-items: center;"
                                                                                    @onclick="HandleSaveClickToSaveProfessorInternship">
                                                                                <i class="fa-regular fa-floppy-disk" style="margin-right: 8px;"></i>
                                                                                Προσωρινή Αποθήκευση Πρακτικής
                                                                            </button>
                                                                            <button class="modern-button"
                                                                                    style="background-color: #28a745; color: white; display: inline-flex; align-items: center;"
                                                                                    @onclick="HandlePublishClickToSaveProfessorInternship">
                                                                                <i class="fa-solid fa-floppy-disk" style="margin-right: 8px;"></i>
                                                                                Δημοσίευση Πρακτικής
                                                                            </button>
                                                                        </div>

                                                                    }


@*-------------------------------------------------------------------------------------SHOW MY UPLOADED INTERNSHIPS AS PROFESSOR ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*@


                                                                    <div class="mb-3 row-dark-gray">
                                                                        <div class="d-flex justify-content-between align-items-center">
                                                                            <label class="form-label" style="color: #FFF8DC;">• Ιστορικό Θέσεων Πρακτικής Άσκησης •</label>
                                                                            <button class="btn btn-link" @onclick="ToggleFormVisibilityToShowMyActiveInternshipsAsProfessor">
                                                                                @if (isShowActiveInternshipsAsProfessorFormVisible)
                                                                                {
                                                                                    <span>&#8722;</span> <!-- Minus sign -->
                                                                                }
                                                                                else
                                                                                {
                                                                                    <span>&#43;</span> <!-- Plus sign -->
                                                                                }
                                                                            </button>
                                                                        </div>
                                                                    </div>

                                                                    @if (isShowActiveInternshipsAsProfessorFormVisible)
                                                                    {
                                                                        <div class="col-md-2">
                                                                            <label for="statusFilterProfessor" style="color: #4682b4; font-size: 15px; display: block;"><strong>Φίλτρο Εμφάνισης</strong></label>
                                                                            <div class="input-group">
                                                                                <select id="statusFilterProfessor" class="form-control form-control-sm" 
                                                                                        @onchange="HandleStatusFilterChangeForProfessorInternships">
                                                                                        <option value="Όλα">Όλες</option>
                                                                                        <option value="Δημοσιευμένη">Δημοσιευμένες</option>
                                                                                        <option value="Μη Δημοσιευμένη">Μη Δημοσιευμένες</option>
                                                                                        <option value="Αποσυρμένη">Αποσυρμένες</option>
                                                                                </select>
                                                                                <div class="input-group-append">
                                                                                    <span class="input-group-text">
                                                                                        <i class="fas fa-chevron-down"></i>
                                                                                    </span>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-md-2">
                                                                            <label style="color: #4682b4; font-weight: bold; font-size: 15px; display: block;">Αποτελέσματα ανά Σελίδα</label>
                                                                            <div class="input-group" style="max-width: 65px;">
                                                                                <select class="form-control form-control-sm" 
                                                                                        @onchange="OnPageSizeChange_SeeMyUploadedInternshipsAsProfessor" 
                                                                                        aria-label="Items per page">
                                                                                    @foreach (var option in pageSizeOptions_SeeMyUploadedInternshipsAsProfessor)
                                                                                    {
                                                                                        <option value="@option" selected="@(itemsPerPage_ProfessorInternships == option)">@option</option>
                                                                                    }
                                                                                </select>
                                                                                <div class="input-group-append">
                                                                                    <span class="input-group-text">
                                                                                        <i class="fas fa-chevron-down"></i>
                                                                                    </span>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <br/>
                                                                        <div class="col-md-2">
                                                                            @if (selectedStatusFilterForProfessorInternships == "Όλα")
                                                                            {
                                                                                <span><strong>Σύνολο: </strong>@totalProfessorInternshipsCount</span>
                                                                            }
                                                                            @if (selectedStatusFilterForProfessorInternships == "Δημοσιευμένη")
                                                                            {
                                                                                <span><strong>Σύνολο: </strong>@publishedProfessorInternshipsCount</span>
                                                                            }
                                                                            else if (selectedStatusFilterForProfessorInternships == "Μη Δημοσιευμένη")
                                                                            {
                                                                                <span><strong>Σύνολο: </strong>@unpublishedProfessorInternshipsCount</span>
                                                                            }
                                                                            else if (selectedStatusFilterForProfessorInternships == "Αποσυρμένη")
                                                                            {
                                                                                <span><strong>Σύνολο: </strong>@withdrawnProfessorInternshipsCount</span>
                                                                            }
                                                                        </div>
                                                                        <br/>
                                                                        @if (professorInternships != null && professorInternships.Any())
                                                                        {
                                                                            <table class="table">
                                                                                <thead>
                                                                                    <tr style="background-color: lightgray; border: 2px solid black;">
                                                                                        <th style="border: 2px solid black;">
                                                                                            <i class="fa-solid fa-key fa-sm" style="color: #9D00FF; margin-right: 8px;"></i>
                                                                                            ID
                                                                                        </th>
                                                                                        <th style="border: 2px solid black;">
                                                                                            <i class="fa-solid fa-font fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                            Τίτλος
                                                                                        </th>
                                                                                        <th style="border: 2px solid black;">
                                                                                            <i class="fa-solid fa-arrows-up-down fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                            Κατάσταση Θέσης
                                                                                        </th>
                                                                                        <th style="border: 2px solid black;">
                                                                                            <i class="fa-solid fa-calendar-day fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                            Δημιουργία Θέσης
                                                                                        </th>
                                                                                        <th style="border: 2px solid black;">
                                                                                            <i class="fa-solid fa-location-dot fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                            Τόπος Άσκησης
                                                                                        </th>
                                                                                        <th style="border: 2px solid black;">
                                                                                            <i class="fa-solid fa-hand fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                            Ενέργειες
                                                                                        </th>
                                                                                        <th style="border: 2px solid black;">
                                                                                            <i class="fa-solid fa-paperclip fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                            Αρχείο
                                                                                        </th>
                                                                                    </tr>
                                                                                </thead>
                                                                                <tbody>
                                                                                @foreach (var internship in GetPaginatedProfessorInternships().Where(i => selectedStatusFilterForProfessorInternships == "Όλα" || i.ProfessorUploadedInternshipStatus == selectedStatusFilterForProfessorInternships))
                                                                                {
                                                                                    <tr class="internship-position-frame @(internship.ProfessorUploadedInternshipStatus == "Δημοσιευμένη" ? "internshipstatus-dimosieumeni" : (internship.ProfessorUploadedInternshipStatus == "Μη Δημοσιευμένη" ? "internshipstatus-midimosieumeni" : "internshipstatus-aposirmeni"))">
                                                                                        <td>
                                                                                          <span style="color: #9D00FF;">
                                                                                            @internship.RNGForInternshipUploadedAsProfessor_HashedAsUniqueID
                                                                                          </span>
                                                                                        </td>
                                                                                        <td @onclick="() => ToggleProfessorInternshipApplicants(internship.RNGForInternshipUploadedAsProfessor)" 
                                                                                            style="cursor: pointer;" 
                                                                                            title="Κλικ για εμφάνιση αιτούντων">
                                                                                            @internship.ProfessorInternshipTitle
                                                                                        </td>
                                                                                        <td>@internship.ProfessorUploadedInternshipStatus</td>
                                                                                        <td>@internship.ProfessorInternshipUploadDate</td>
                                                                                        <td>@internship.ProfessorInternshipDimosLocation</td>
                                                                                        <td>                                                                                        
                                                                                            <div style="display: flex; align-items: center; gap: 10px;">
                                                                                                <!-- Trash icon button for deleting the internship -->
                                                                                                <button class="btn btn-danger" @onclick="() => DeleteProfessorInternship(internship.Id)" title="Οριστική Διαγραφή">
                                                                                                    <i class="fas fa-trash icon-button"></i>
                                                                                                </button>

                                                                                                <!-- Eye icon button for viewing details -->
                                                                                                <button class="btn btn-secondary" @onclick="() => ShowProfessorInternshipDetails(internship)" title="Εμφάνιση Λεπτομερειών">
                                                                                                    <i class="fas fa-eye icon-button"></i>
                                                                                                </button>

                                                                                                @if (internship.ProfessorUploadedInternshipStatus != "Δημοσιευμένη")
                                                                                                {
                                                                                                    <!-- Pencil icon button for editing details -->
                                                                                                    <button class="btn btn-secondary" @onclick="() => EditProfessorInternshipDetails(internship)" title="Διαμόρφωση Θέσεως">
                                                                                                        <i class="fas fa-pencil-alt icon-button"></i>
                                                                                                    </button>

                                                                                                    <!-- Arrow Up icon button for updating status to Δημοσιευμένη -->
                                                                                                    <button class="btn btn-secondary" @onclick='async () => await UpdateInternshipStatusAsProfessor(internship.Id, "Δημοσιευμένη")' title="Δημοσίευση Θέσεως">
                                                                                                        <i class="fas fa-arrow-up icon-button" style="color: cornflowerblue;"></i>
                                                                                                    </button>
                                                                                                }
                                                                                                else
                                                                                                {
                                                                                                    <!-- X icon button for updating status to Αποσυρμένη -->
                                                                                                    <button class="btn btn-secondary" @onclick='async () => await UpdateInternshipStatusAsProfessor(internship.Id, "Αποσυρμένη")' title="Απόσυρση Θέσεως">
                                                                                                        <i class="fas fa-times" style="color: red;"></i>
                                                                                                    </button>
                                                                                                }

                                                                                                @if (internship.ProfessorUploadedInternshipStatus != "Μη Δημοσιευμένη")
                                                                                                {
                                                                                                    <!-- Down Arrow icon button for updating status to Μη Δημοσιευμένη -->
                                                                                                    <button class="btn btn-secondary" @onclick='() => ChangeProfessorInternshipStatusToUnpublished(internship.Id)' title="Αποδημοσίευση Θέσεως">
                                                                                                        <i class="fas fa-arrow-down icon-button" style="color: yellow;"></i>
                                                                                                    </button>
                                                                                                }
                                                                                                    <!-- Human icon for internship application details -->
                                                                                                    <button class="btn btn-secondary" 
                                                                                                            @onclick="() => ToggleProfessorInternshipExpanded(internship.RNGForInternshipUploadedAsProfessor)" 
                                                                                                            title="Εμφάνιση Υποψηφίων">
                                                                                                        <i class="fa-solid fa-graduation-cap icon-button"></i> 
                                                                                                    </button>
                                                                                            </div>
                                                                                        </td>
                                                                                        <td>
                                                                                            @if (internship.ProfessorInternshipAttachment != null && internship.ProfessorInternshipAttachment.Length > 0)
                                                                                            {
                                                                                                <div style="display: flex; align-items: center;">
                                                                                                    <button class="btn btn-secondary" @onclick="() => DownloadAttachmentForProfessorInternships(internship.Id)" title="Λήψη" style="text-decoration: none;">
                                                                                                        <i class="fas fa-download icon-button"></i> Λήψη
                                                                                                    </button>
                                                                                                </div>
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                <span style="font-weight: bold; color: black;">Δεν Διατίθεται</span>
                                                                                            }
                                                                                        </td>
                                                                                  
                                                                                    </tr>

                                                                                    @* Display applicants if expanded *@
                                                                                    @if (expandedProfessorInternships.ContainsKey(internship.RNGForInternshipUploadedAsProfessor) && expandedProfessorInternships[internship.RNGForInternshipUploadedAsProfessor])
                                                                                    {
                                                                                        <br/>
                                                                                        <tr>
                                                                                            <td colspan="9" style="padding: 0;">
                                                                                                <div style="display: flex; justify-content: space-between; align-items: center; height: 24px; line-height: 24px; width: 100%;">
                                                                                                    <i class="fa-solid fa-graduation-cap" style="font-size: 18px; color: #0d6efd;"></i>
                                                                                                    <label class="form-label" style="color: #0d6efd; font-weight: bold; font-size: 18px; margin: 0;">Λεπτομέρειες Αιτούντων</label>
                                                                                                    <i class="fa-solid fa-graduation-cap" style="font-size: 18px; color: #0d6efd;"></i>
                                                                                                </div>
                                                                                            </td>
                                                                                        </tr>
                                                                                        <tr>
                                                                                            <td colspan="9"> 
                                                                                                <table class="table table-sm">
                                                                                                    <thead>
                                                                                                        <tr style="border: 1px solid darkblue;">
                                                                                                            <th style="border: 1px solid darkblue;">
                                                                                                                <i class="fa-solid fa-user fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                                Προφίλ
                                                                                                            </th>
                                                                                                            <th style="border: 1px solid darkblue;">
                                                                                                                <i class="fa-solid fa-signature fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                                Όνομα
                                                                                                            </th>
                                                                                                            <th style="border: 1px solid darkblue;">
                                                                                                                <i class="fa-solid fa-signature fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                                Επώνυμο
                                                                                                            </th>
                                                                                                            <th style="border: 1px solid darkblue;">
                                                                                                                <i class="fa-solid fa-calendar-plus fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                                Ημερομηνία Αίτησης
                                                                                                            </th>
                                                                                                            <th style="border: 1px solid darkblue;">
                                                                                                                <i class="fa-solid fa-calendar-plus fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                                Έτος Φοίτησης
                                                                                                            </th>
                                                                                                            <th style="border: 1px solid darkblue;">
                                                                                                                <i class="fa-solid fa-phone fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                                Τηλέφωνο
                                                                                                            </th>
                                                                                                            <th style="border: 1px solid darkblue;">
                                                                                                                <i class="fa-solid fa-comments fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                                Επικοινωνία
                                                                                                            </th>
                                                                                                            <th style="border: 1px solid darkblue;">
                                                                                                                <i class="fa-solid fa-hand fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                                Ενέργεια
                                                                                                            </th>
                                                                                                            <th style="border: 1px solid darkblue;">
                                                                                                                <i class="fa-solid fa-hourglass-half fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                                Κατάσταση Αίτησης
                                                                                                            </th>
                                                                                                        </tr>
                                                                                                    </thead>
                                                                                                    <tbody>
                                                                                                        @if (studentDataCache == null)
                                                                                                        {
                                                                                                            <!-- Loading state -->
                                                                                                            <tr>
                                                                                                                <td colspan="9" class="text-center">
                                                                                                                    <div class="spinner-border text-primary" role="status">
                                                                                                                        <span class="sr-only">Φόρτωση...</span>
                                                                                                                    </div>
                                                                                                                    <p>Φόρτωση δεδομένων φοιτητών...</p>
                                                                                                                </td>
                                                                                                            </tr>
                                                                                                        }
                                                                                                        else if (professorInternshipApplicantsMap.ContainsKey(internship.RNGForInternshipUploadedAsProfessor) && professorInternshipApplicantsMap[internship.RNGForInternshipUploadedAsProfessor].Any())
                                                                                                        {
                                                                                                            @foreach (var applicant in professorInternshipApplicantsMap[internship.RNGForInternshipUploadedAsProfessor])
                                                                                                            {
                                                                                                                var student = studentDataCache.TryGetValue(applicant.StudentDetails.StudentEmailAppliedForProfessorInternship, out var s) ? s : null;
                                                                                                                var status = applicant.InternshipStatusAppliedAtTheStudentSide ?? "N/A";
                                                                                                                var professorStatus = applicant.InternshipStatusAppliedAtTheProfessorSide ?? "N/A";

                                                                                                                <tr style="background-color: @(professorStatus == "Επιτυχής" ? "lightgreen" :
                                                                                                                                    professorStatus == "Απορρίφθηκε" ? "lightcoral" :
                                                                                                                                    professorStatus == "Απορρίφθηκε (Απόσυρση Θέσεως Από Καθηγητή)" ? "coral" :
                                                                                                                                    professorStatus == "Αποσύρθηκε από τον φοιτητή" ? "lightyellow" : "transparent")">
                                                                                                                    <td>
                                                                                                                        <a href="#" @onclick="() => ShowStudentDetailsInNameAsHyperlink_StudentAppliedinternshipsAtProfessor(applicant.StudentDetails.StudentUniqueIDAppliedForProfessorInternship)" 
                                                                                                                           title="Προφίλ Υποψήφιου Σπουδαστή">
                                                                                                                            <i class="fas fa-eye icon-button"></i>
                                                                                                                            @if (student == null)
                                                                                                                            {
                                                                                                                                <span class="badge badge-warning ml-1">Δε βρέθηκε</span>
                                                                                                                            }
                                                                                                                        </a>
                                                                                                                    </td>
                                                                                                                    <td>@(student?.Name ?? "Δε βρέθηκε")</td>
                                                                                                                    <td>@(student?.Surname ?? "Δε βρέθηκε")</td>
                                                                                                                    <td>@applicant.StudentDetails.DateTimeStudentAppliedForProfessorInternship.ToString("dd/MM/yyyy HH:mm")</td>
                                                                                                                    <td>@(student?.StudyYear ?? "-")</td>
                                                                                                                    <td>@(student?.Telephone ?? "-")</td>
                                                                                                                    <td class="text-center">
                                                                                                                        @applicant.StudentDetails.StudentEmailAppliedForProfessorInternship
                                                                                                                        <a href="mailto:@applicant.StudentDetails.StudentEmailAppliedForProfessorInternship" title="Αποστολή Email">
                                                                                                                            <i class="fas fa-envelope"></i>
                                                                                                                        </a>
                                                                                                                    </td>
                                                                                                                    <td>
                                                                                                                        @if (status == "Σε Επεξεργασία")
                                                                                                                        {
                                                                                                                            <div style="display: flex; gap: 10px; justify-content: center;">
                                                                                                                                <span @onclick="() => ConfirmAndAcceptProfessorInternship(applicant.RNGForProfessorInternshipApplied, applicant.StudentDetails.StudentUniqueIDAppliedForProfessorInternship)" 
                                                                                                                                      title="Αποδοχή Αίτησης" style="cursor: pointer;">
                                                                                                                                    <i class="fas fa-check" style="color: green; font-size: 24px;"></i>
                                                                                                                                </span>

                                                                                                                                <span @onclick="() => ConfirmAndRejectProfessorInternship(applicant.RNGForProfessorInternshipApplied, applicant.StudentDetails.StudentUniqueIDAppliedForProfessorInternship)" 
                                                                                                                                      title="Απόρριψη Αίτησης" style="cursor: pointer;">
                                                                                                                                    <i class="fas fa-times" style="color: red; font-size: 24px;"></i>
                                                                                                                                </span>
                                                                                                                            </div>
                                                                                                                        }
                                                                                                                        else
                                                                                                                        {
                                                                                                                            <span class="text">@status</span>
                                                                                                                        }
                                                                                                                    </td>
                                                                                                                    <td>
                                                                                                                        @if (professorStatus == "Επιτυχής")
                                                                                                                        {
                                                                                                                            <span style="color: green; font-weight: bold;">Έχει γίνει Αποδοχή</span>
                                                                                                                        }
                                                                                                                        else if (professorStatus == "Απορρίφθηκε")
                                                                                                                        {
                                                                                                                            <span style="color: red; font-weight: bold;">Έχει Απορριφθεί</span>
                                                                                                                        }
                                                                                                                        else
                                                                                                                        {
                                                                                                                            <span>@professorStatus</span>
                                                                                                                        }
                                                                                                                    </td>
                                                                                                                </tr>
                                                                                                            }
                                                                                                        }
                                                                                                        else
                                                                                                        {
                                                                                                            <tr>
                                                                                                                <td colspan="9" class="text-center text-danger">
                                                                                                                    <strong>Καμία Αίτηση για αυτήν την Πρακτική Άσκηση ακόμη</strong>
                                                                                                                </td>
                                                                                                            </tr>
                                                                                                        }
                                                                                                    </tbody>
                                                                                                </table>
                                                                                            </td>
                                                                                        </tr>
                                                                                    }
                                                                                }
                                                                            </tbody>
                                                                            </table>
                                                                            <!-- Pagination Controls -->
                                                                            <div class="d-flex justify-content-center align-items-center mt-3 gap-1">
                                                                                <span class="pagination-item @(currentPage_ProfessorInternships == 1 ? "disabled" : "")"
                                                                                      @onclick="GoToFirstPage_ProfessorInternships">
                                                                                    &lt;&lt;
                                                                                </span>

                                                                                <span class="pagination-item @(currentPage_ProfessorInternships == 1 ? "disabled" : "")"
                                                                                      @onclick="PreviousPage_ProfessorInternships">
                                                                                    &lt;
                                                                                </span>

                                                                                @foreach (var pageNum in GetVisiblePages_ProfessorInternships())
                                                                                {
                                                                                    if (pageNum == -1)
                                                                                    {
                                                                                        <span class="pagination-ellipsis">...</span>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <span class="pagination-item @(pageNum == currentPage_ProfessorInternships ? "active" : "")"
                                                                                              @onclick="@(() => GoToPage_ProfessorInternships(pageNum))">
                                                                                            @pageNum
                                                                                        </span>
                                                                                    }
                                                                                }

                                                                                <span class="pagination-item @(currentPage_ProfessorInternships == totalPages_ProfessorInternships ? "disabled" : "")"
                                                                                      @onclick="NextPage_ProfessorInternships">
                                                                                    &gt;
                                                                                </span>

                                                                                <span class="pagination-item @(currentPage_ProfessorInternships == totalPages_ProfessorInternships ? "disabled" : "")"
                                                                                      @onclick="GoToLastPage_ProfessorInternships">
                                                                                    &gt;&gt;
                                                                                </span>

                                                                                <span class="ms-3">
                                                                                    Σελίδα @currentPage_ProfessorInternships από @totalPages_ProfessorInternships
                                                                                </span>
                                                                            </div>

                                                                        }
                                                                        else
                                                                        {
                                                                            <p>Δεν υπάρχουν διαθέσιμες πρακτικές ασκήσεις.</p>
                                                                        }
                                                                    }

                                                                        @if (isModalVisibleToShowStudentDetailsAsProfessorFromTheirHyperlinkNameInProfessorInternships && selectedStudent != null)
                                                                        {
                                                                            <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                                                                <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                                                    <div class="modal-content">
                                                                                        <div class="modal-header">
                                                                                            <h5 class="modal-title" style="color: #4682B4;">@selectedStudent?.Name @selectedStudent?.Surname</h5>
                                                                                            <button type="button" class="close" aria-label="Close" @onclick="CloseModalforHyperLinkTitleStudentName_StudentAppliedinternshipsAtProfessor">
                                                                                                <span aria-hidden="true">&times;</span>
                                                                                            </button>
                                                                                        </div>
                                                                                        <div class="modal-body">
                                                                                            <!-- Profile Picture -->
                                                                                            <div class="form-group text-center">
                                                                                                @if (selectedStudent?.Image != null && selectedStudent.Image.Length > 0)
                                                                                                {
                                                                                                    var base64Image = Convert.ToBase64String(selectedStudent.Image);
                                                                                                    <img src="data:image/jpeg;base64,@base64Image" alt="Φωτογραφία Προφίλ Σπουδαστή" 
                                                                                                         style="max-width: 150px; max-height: 150px; border-radius: 50%; object-fit: cover;" />
                                                                                                }
                                                                                                else
                                                                                                {
                                                                                                    <p>Δεν υπάρχει φωτογραφία Προφίλ</p>
                                                                                                }
                                                                                            </div>

                                                                                            <!-- Student Details -->
                                                                                            <div class="form-group">
                                                                                                <label><strong>Αριθμός Μητρώου</strong></label>
                                                                                                <input type="text" class="form-control" value="@selectedStudent?.RegNumber" readonly />
                                                                                            </div>

                                                                                            <div class="form-group">
                                                                                                <label style="font-weight: bold;">Πανεπιστήμιο</label>
                                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                    <i class="fas fa-university" style="color: #007BFF; margin-right: 8px;"></i>
                                                                                                    <span>@selectedStudent?.University</span>
                                                                                                </div>
                                                                                            </div>

                                                                                            <div class="form-group">
                                                                                                <label style="font-weight: bold;">Τμήμα</label>
                                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                    <i class="fas fa-building" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                                    <span>@selectedStudent?.Department</span>
                                                                                                </div>
                                                                                            </div>

                                                                                            <div class="form-group">
                                                                                                <label style="font-weight: bold;">Επίπεδο Σπουδών</label>
                                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                    <i class="fas fa-graduation-cap" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                                    <span>@selectedStudent?.LevelOfDegree</span>
                                                                                                </div>
                                                                                            </div>

                                                                                            <div class="form-group">
                                                                                                <label><strong>Τεχνικές Ικανότητες</strong></label>
                                                                                                <textarea class="form-control" rows="2" readonly>@selectedStudent?.Keywords</textarea>
                                                                                            </div>

                                                                                            <div class="form-group">
                                                                                                <label><strong>Περιοχές Εξειδίκευσης</strong></label>
                                                                                                <textarea class="form-control" rows="2" readonly>@selectedStudent?.AreasOfExpertise</textarea>
                                                                                            </div>

                                                                                            <div class="form-group">
                                                                                                <label style="font-weight: bold;">Ημερομηνία Εγγραφής</label>
                                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                    <i class="fas fa-calendar-day" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                                    <span>@(DateTime.TryParse(selectedStudent?.EnrollmentDate, out var date) ? date.ToString("dd/MM/yyyy") : string.Empty)</span>
                                                                                                </div>
                                                                                            </div>

                                                                                            <div class="form-group">
                                                                                                <label style="font-weight: bold;">Επικοινωνία</label>
                                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                    <i class="fas fa-envelope" style="color: #007BFF; margin-right: 8px;"></i>
                                                                                                    <span>@selectedStudent?.Email</span>
                                                                                                </div>
                                                                                            </div>

                                                                                            <div class="form-group">
                                                                                                <label style="font-weight: bold;">Τηλέφωνο</label>
                                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                    <i class="fas fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                                                    <span>@selectedStudent?.Telephone</span>
                                                                                                </div>
                                                                                            </div>

                                                                                            <div class="form-group">
                                                                                                <label><strong>Περιφέρεια (Μόνιμης Διαμονής)</strong></label>
                                                                                                <input type="text" class="form-control" value="@selectedStudent?.PermanentRegion" readonly />
                                                                                            </div>

                                                                                            <div class="form-group">
                                                                                                <label><strong>Πόλη (Μόνιμης Διαμονής)</strong></label>
                                                                                                <input type="text" class="form-control" value="@selectedStudent?.PermanentTown" readonly />
                                                                                            </div>

                                                                                            <div class="form-group">
                                                                                                <label style="font-weight: bold;">Διεύθυνση</label>
                                                                                                <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                                    <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                                    @if (!string.IsNullOrEmpty(selectedStudent?.PermanentAddress))
                                                                                                    {
                                                                                                        <a href="https://www.google.com/maps/search/?api=1&query=@Uri.EscapeDataString(selectedStudent.PermanentAddress)"
                                                                                                           target="_blank"
                                                                                                           style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                            @selectedStudent.PermanentAddress
                                                                                                        </a>
                                                                                                    }
                                                                                                </div>
                                                                                            </div>

                                                                                            <div class="form-group">
                                                                                                <label style="font-weight: bold;">Προτιμώμενη Περιφέρεια</label>
                                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                    <i class="fas fa-map-marked-alt" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                                    <span>@selectedStudent?.PreferedRegions</span>
                                                                                                </div>
                                                                                            </div>

                                                                                            <div class="form-group">
                                                                                                <label style="font-weight: bold;">Προτιμώμενη Πόλη</label>
                                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                    <i class="fas fa-map-marker" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                                    <span>@selectedStudent?.PreferredTowns</span>
                                                                                                </div>
                                                                                            </div>

                                                                                            <div class="form-group">
                                                                                                <label style="font-weight: bold;">Διαθέτει Μέσο Μεταφοράς</label>
                                                                                                <div class="form-control d-flex align-items-center" style="height: auto; 
                                                                                                     @(selectedStudent?.Transport == true ? "color: #28a745;" : "color: #dc3545;")">
                                                                                                    <i class="fas fa-car" style="margin-right: 8px;"></i>
                                                                                                    <span>@(selectedStudent?.Transport == true ? "Ναι" : "Όχι")</span>
                                                                                                </div>
                                                                                            </div>

                                                                                            <div class="form-group">
                                                                                                <label style="font-weight: bold;">Κατάσταση Πρακτικής</label>
                                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                    <i class="fas fa-briefcase" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                                    <span>@selectedStudent?.InternshipStatus</span>
                                                                                                </div>
                                                                                            </div>

                                                                                            <div class="form-group">
                                                                                                <label style="font-weight: bold;">Κατάσταση Πτυχιακής</label>
                                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                    <i class="fas fa-file-alt" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                                    <span>@selectedStudent?.ThesisStatus</span>
                                                                                                </div>
                                                                                            </div>

                                                                                            <div class="form-group">
                                                                                                <label style="font-weight: bold;">LinkedIn Προφίλ</label>
                                                                                                <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                                    <i class="fab fa-linkedin" style="color: #0077b5; margin-right: 8px;"></i>
                                                                                                    @if (!string.IsNullOrEmpty(selectedStudent?.LinkedInProfile))
                                                                                                    {
                                                                                                        <a href="@selectedStudent.LinkedInProfile" target="_blank" 
                                                                                                           style="color: #0077b5; text-decoration: underline; word-break: break-word;">
                                                                                                            @selectedStudent.LinkedInProfile
                                                                                                        </a>
                                                                                                    }
                                                                                                    else
                                                                                                    {
                                                                                                        <span style="color: #6c757d;">Δεν έχει οριστεί προφίλ LinkedIn ακόμη..</span>
                                                                                                    }
                                                                                                </div>
                                                                                            </div>

                                                                                            <div class="form-group">
                                                                                                <label style="font-weight: bold;">Προσωπική Ιστοσελίδα</label>
                                                                                                <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                                    <i class="fas fa-globe" style="color: #17a2b8; margin-right: 8px;"></i>
                                                                                                    @if (!string.IsNullOrEmpty(selectedStudent?.PersonalWebsite))
                                                                                                    {
                                                                                                        <a href="@selectedStudent.PersonalWebsite" target="_blank" 
                                                                                                           style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                            @selectedStudent.PersonalWebsite
                                                                                                        </a>
                                                                                                    }
                                                                                                    else
                                                                                                    {
                                                                                                        <span style="color: #6c757d;">Δεν έχει οριστεί ιστοσελίδα ακόμη..</span>
                                                                                                    }
                                                                                                </div>
                                                                                            </div>

                                                                                            <div class="form-group">
                                                                                                <label style="font-weight: bold;">Βιογραφικό</label>
                                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                    <i class="fas fa-file-pdf" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                                    @if (selectedStudent?.Attachment != null)
                                                                                                    {
                                                                                                        <button class="btn btn-dark" @onclick="() => DownloadStudentCVFromCompanyInternships(selectedStudent.Email)">
                                                                                                            <i class="fas fa-download"></i> Λήψη
                                                                                                        </button>
                                                                                                    }
                                                                                                    else
                                                                                                    {
                                                                                                        <span style="color: #6c757d;">Δεν Διατίθεται Βιογραφικό!</span>
                                                                                                    }
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="modal-footer">
                                                                                            <button type="button" class="btn btn-secondary" @onclick="CloseModalforHyperLinkTitleStudentName_StudentAppliedinternshipsAtProfessor">Κλείσιμο</button>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        }



                                                                                @if (isModalVisibleForProfessorInternships && currentProfessorInternship != null)
                                                                                {
                                                                                    <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                                                                        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                                                            <div class="modal-content">
                                                                                                <div class="modal-header">
                                                                                                    <h5 class="modal-title" style="color: #4682B4;">@currentProfessorInternship.ProfessorInternshipTitle</h5>
                                                                                                    <button type="button" class="close" aria-label="Close" @onclick="CloseModalForProfessorInternships">
                                                                                                        <span aria-hidden="true">&times;</span>
                                                                                                    </button>
                                                                                                </div>
                                                                                                <div class="modal-body">
                                                                                                    <!-- Internship Details -->

                                                                                                    <div class="form-group">
                                                                                                        <label style="font-weight: bold;">Περιγραφή</label>
                                                                                                        <div class="form-control" style="height: auto; min-height: 100px;">
                                                                                                            <div>@currentProfessorInternship.ProfessorInternshipDescription</div>
                                                                                                        </div>
                                                                                                    </div>

                                                                                                    <div class="form-group">
                                                                                                        <label style="font-weight: bold;">Τύπος</label>
                                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                            <i class="fas fa-tag" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                                            <span>
                                                                                                                @if (currentProfessorInternship.ProfessorInternshipType == "Full-Time")
                                                                                                                {
                                                                                                                    @:Πλήρους Απασχόλησης
                                                                                                                }
                                                                                                                else if (currentProfessorInternship.ProfessorInternshipType == "Part-Time")
                                                                                                                {
                                                                                                                    @:Μερικής Απασχόλησης
                                                                                                                }
                                                                                                                else if (currentProfessorInternship.ProfessorInternshipType == "Part-Time_Full-Time")
                                                                                                                {
                                                                                                                    @:Πλήρους ή Μερικής Απασχόλησης
                                                                                                                }
                                                                                                                else
                                                                                                                {
                                                                                                                    @:—
                                                                                                                }
                                                                                                            </span>
                                                                                                        </div>
                                                                                                    </div>


                                                                                                    <div class="form-group">
                                                                                                        <label style="font-weight: bold;">Φορέας</label>
                                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                            <i class="fas fa-building" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                                            <span>
                                                                                                                @(string.IsNullOrEmpty(currentProfessorInternship?.ProfessorInternshipForeas) 
                                                                                                                  ? "Δεν έχει Καθοριστεί" 
                                                                                                                  : currentProfessorInternship.ProfessorInternshipForeas)
                                                                                                            </span>
                                                                                                        </div>
                                                                                                    </div>


                                                                                                    <!-- Contact Information -->
                                                                                                    <div class="form-group">
                                                                                                        <label style="font-weight: bold;">Email Επικοινωνίας</label>
                                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                            <i class="fas fa-envelope" style="color: #007BFF; margin-right: 8px;"></i>
                                                                                                            <span>@currentProfessorInternship.ProfessorEmailUsedToUploadInternship</span>
                                                                                                        </div>
                                                                                                    </div>

                                                                                                    <div class="form-group">
                                                                                                        <label style="font-weight: bold;">Τηλέφωνο Επικοινωνίας</label>
                                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                            <i class="fas fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                                                            <span>@currentProfessorInternship.ProfessorInternshipContactTelephonePerson</span>
                                                                                                        </div>
                                                                                                    </div>

                                                                                                    <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Τοποθεσία Εκδήλωσης</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                                                    <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                                                    @if (!string.IsNullOrEmpty(currentProfessorInternship.ProfessorInternshipAddress))
                                                                                                                    {
                                                                                                                        <a href="https://www.google.com/maps/search/?api=1&query=@Uri.EscapeDataString(currentProfessorInternship.ProfessorInternshipAddress)" 
                                                                                                                           target="_blank"
                                                                                                                           style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                                            @currentProfessorInternship.ProfessorInternshipAddress
                                                                                                                        </a>
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        <span style="color: #6c757d;">Δεν έχει οριστεί τοποθεσία Εκδήλωσης ακόμη..</span>
                                                                                                                    }
                                                                                                                </div>
                                                                                                      </div>

                                                                                                    <!-- Location Information -->
                                                                                                    <div class="form-group">
                                                                                                        <label style="font-weight: bold;">Περιφέρεια</label>
                                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                            <i class="fas fa-map" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                                            <span>@currentProfessorInternship.ProfessorInternshipPerifereiaLocation</span>
                                                                                                        </div>
                                                                                                    </div>

                                                                                                    <div class="form-group">
                                                                                                        <label style="font-weight: bold;">Δήμος</label>
                                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                            <i class="fas fa-map-marker-alt" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                                            <span>@currentProfessorInternship.ProfessorInternshipDimosLocation</span>
                                                                                                        </div>
                                                                                                    </div>

                                                                                                    <div class="form-group">
                                                                                                        <label style="font-weight: bold;">Ταχ. Κώδικας</label>
                                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                            <i class="fas fa-envelope-open" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                                            <span>@currentProfessorInternship.ProfessorInternshipPostalCodeLocation</span>
                                                                                                        </div>
                                                                                                    </div>


                                                                                                    <div class="form-group">
                                                                                                        <label style="font-weight: bold;">Προσφορά Μεταφορικού Μέσου</label>
                                                                                                        <div class="form-control d-flex align-items-center" style="height: auto; 
                                                                                                             @(currentProfessorInternship.ProfessorInternshipTransportOffer ? "color: #28a745;" : "color: #dc3545;")">
                                                                                                            <i class="fas fa-car" style="margin-right: 8px;"></i>
                                                                                                            <span>@(currentProfessorInternship.ProfessorInternshipTransportOffer ? "Ναι" : "Όχι")</span>
                                                                                                        </div>
                                                                                                    </div>

                                                                                                    <div class="form-group">
                                                                                                        <label style="font-weight: bold;">Τομείς</label>
                                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                            <span>@currentProfessorInternship.ProfessorInternshipAreas</span>
                                                                                                        </div>
                                                                                                    </div>

                                                                                                    <!-- Dates Section -->
                                                                                                    <div class="form-group">
                                                                                                        <label style="font-weight: bold;">Ξεκινάει Από</label>
                                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                            <i class="fas fa-calendar" style="color: #007bff; margin-right: 8px;"></i>
                                                                                                            <span>@currentProfessorInternship.ProfessorInternshipActivePeriod.ToString("dd/MM/yyyy")</span>
                                                                                                        </div>
                                                                                                    </div>

                                                                                                    <div class="form-group">
                                                                                                        <label style="font-weight: bold;">Εκτιμώμενη Ημερομηνία Ολοκλήρωσης</label>
                                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                            <i class="fas fa-calendar" style="color: #007bff; margin-right: 8px;"></i>
                                                                                                            <span>@currentProfessorInternship.ProfessorInternshipFinishEstimation.ToString("dd/MM/yyyy")</span>
                                                                                                        </div>
                                                                                                    </div>

                                                                                                    <!-- Professor Information -->
                                                                                                    <div class="form-group">
                                                                                                        <label style="font-weight: bold; color: #007bff;">Εταιρεία Συνεργασίας</label>
                                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                            <i class="fas fa-handshake" style="color: #007bff; margin-right: 8px;"></i>
                                                                                                            <span>@currentProfessorInternship.ProfessorInternshipEKPASupervisor</span>
                                                                                                        </div>
                                                                                                    </div>

                                                                                                   

                                                                                                    <div class="form-group">
                                                                                                        <label style="font-weight: bold;">Πανεπιστήμιο</label>
                                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                            <i class="fas fa-university" style="color: #007BFF; margin-right: 8px;"></i>
                                                                                                            <span>@currentProfessorInternship.Professor.ProfUniversity</span>
                                                                                                        </div>
                                                                                                    </div>

                                                                                                    <div class="form-group">
                                                                                                        <label style="font-weight: bold;">Τμήμα Πανεπιστημίου</label>
                                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                            <i class="fas fa-building" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                                            <span>@currentProfessorInternship.Professor.ProfDepartment</span>
                                                                                                        </div>
                                                                                                    </div>

                                                                                                    <div class="form-group">
                                                                                                        <label style="font-weight: bold;">Ημερομηνία Καταχώρησης</label>
                                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                            <i class="fas fa-calendar-plus" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                                            <span>@currentProfessorInternship.ProfessorInternshipUploadDate.ToString("dd/MM/yyyy")</span>
                                                                                                        </div>
                                                                                                    </div>

                                                                                                    <div class="form-group">
                                                                                                        <label style="font-weight: bold;">Κατάσταση</label>
                                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;
                                                                                                             @(currentProfessorInternship.ProfessorUploadedInternshipStatus == "Δημοσιευμένη" ? "color: #28a745;" : 
                                                                                                               currentProfessorInternship.ProfessorUploadedInternshipStatus == "Αποσυρμένη" ? "color: #dc3545;" : "color: #6c757d;")">
                                                                                                            <i class="fas fa-info-circle" style="margin-right: 8px;"></i>
                                                                                                            <span>@currentProfessorInternship.ProfessorUploadedInternshipStatus</span>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="modal-footer">
                                                                                                    <button type="button" class="btn btn-secondary" @onclick="CloseModalForProfessorInternships">Κλείσιμο</button>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                }


                                                                </div>
                                                                                                                             
@* ------------------------------------------------------------------------------------ ΕΔΩ ΘΑ ΜΠΟΥΝΕ ΟΙ ΕΚΔΗΛΩΣΕΙΣ ΤΩΝ ΚΑΘΗΓΗΤΩΝ (ΑΡΧΗ) - PROFESSOR EVENTS TAB ---------------------------------------------------------------------------------------------------------*@                                                            
                                                         
                                                    <div class="tab-pane fade" id="professorevent" role="tabpanel" aria-labelledby="professorevent-tab">  
                                                        
                                                            <div class="mb-3 row-dark-gray">
                                                                <div class="calendar-section">
                                                                    <strong> - Ημερολόγιο Εκδηλώσεων - </strong>
                                                                    <div>
                                                                        <!-- CALENDAR component -->
                                                                        <div class="calendar">
                                                                            <div class="calendar-header">
                                                                                <h2>@currentMonth.ToString("MMMM yyyy", CultureInfo.GetCultureInfo("el-GR"))</h2>
                                                                            </div>
                                                                            <div class="calendar-grid">
                                                                                <!-- Days of the week header in Greek -->
                                                                                <div class="day-header">Δ</div>
                                                                                <div class="day-header">Τ</div>
                                                                                <div class="day-header">Τ</div>
                                                                                <div class="day-header">Π</div>
                                                                                <div class="day-header">Π</div>
                                                                                <div class="day-header">Σ</div>
                                                                                <div class="day-header">Κ</div>

                                                                                @for (int i = 0; i < adjustedFirstDayOfMonth; i++)
                                                                                {
                                                                                    <div class="day-cell empty-cell"></div>
                                                                                }

                                                                                @for (int i = 1; i <= daysInCurrentMonth; i++)
                                                                                {
                                                                                    DateTime dayDate = new DateTime(currentMonth.Year, currentMonth.Month, i);
            
                                                                                    // Filter events by status "Δημοσιευμένη"
                                                                                    var companyEvents = eventsForDate.ContainsKey(i) 
                                                                                        ? eventsForDate[i].Where(e => e.CompanyEventStatus == "Δημοσιευμένη").ToList()
                                                                                        : new List<CompanyEvent>();
                
                                                                                    var professorEvents = eventsForDateForProfessors.ContainsKey(i)
                                                                                        ? eventsForDateForProfessors[i].Where(e => e.ProfessorEventStatus == "Δημοσιευμένη").ToList()
                                                                                        : new List<ProfessorEvent>();
                
                                                                                    bool hasPublishedEvent = companyEvents.Any() || professorEvents.Any();

                                                                                    string dayCellClass = "day-cell";

                                                                                    // Check if this day is today's date
                                                                                    if (dayDate.Date == DateTime.Today.Date)
                                                                                    {
                                                                                        dayCellClass += " today";
                                                                                    }

                                                                                    // Check if this day should be highlighted
                                                                                    if (i == highlightedDay)
                                                                                    {
                                                                                        dayCellClass += " highlighted";
                                                                                    }

                                                                                    // Add event-day class if this day has published events
                                                                                    if (hasPublishedEvent)
                                                                                    {
                                                                                        dayCellClass += " event-day";
                                                                                    }

                                                                                    <div class="@dayCellClass" @onclick="() => OnDateClicked(dayDate)">
                                                                                        <span>@i</span>
                                                                                        @if (hasPublishedEvent)
                                                                                        {
                                                                                            <div class="event-indicators">
                                                                                                @if (companyEvents.Any())
                                                                                                {
                                                                                                    <span class="company-indicator">● (@companyEvents.Count)</span>
                                                                                                }
                                                                                                @if (professorEvents.Any())
                                                                                                {
                                                                                                    <span class="professor-indicator">● (@professorEvents.Count)</span>
                                                                                                }
                                                                                            </div>
                                                                                        }
                                                                                    </div>
                                                                                }
                                                                            </div>

                                                                            <!-- Pagination buttons to navigate between months -->
                                                                            <div class="pagination">
                                                                                <button @onclick="ShowPreviousMonth" class="btn btn-small">◀</button>
                                                                                <button @onclick="ShowNextMonth" class="btn btn-small">▶</button>
                                                                            </div>
                                                                            <!-- Legend section -->
                                                                            <div class="calendar-legend">
                                                                                <div class="legend-item">
                                                                                    <span class="legend-color today-legend"></span>
                                                                                    <span class="legend-text">Σημερινή Ημερομηνία</span>
                                                                                </div>
                                                                                <div class="legend-item">
                                                                                    <span class="legend-color event-day-legend"></span>
                                                                                    <span class="legend-text">Ημέρα Εκδήλωσης</span>
                                                                                </div>
                                                                                <div class="legend-item">
                                                                                    <span class="company-indicator">●</span>
                                                                                    <span class="legend-text">(Εκδηλώσεις Εταιρειών)</span>
                                                                                </div>
                                                                                <div class="legend-item">
                                                                                    <span class="professor-indicator">●</span>
                                                                                    <span class="legend-text">(Εκδηλώσεις Καθηγητών)</span>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>


                                                            @if (isModalVisibleToShowEventsOnCalendarForEachClickedDay)
                                                            {
                                                                <div class="row mb-3">
                                                                    <div class="col-md-12">
                                                                        <div class="modal custom-modal"> <!-- Added custom class here -->
                                                                            <div class="modal-content">
                                                                                <h3><strong>Λεπτομέρειες Εκδήλωσης/σεων</strong>: <span style="color: #00008B;">@selectedDate?.ToString("MMMM dd yyyy")</span></h3>
                                                                                <!-- Filter Section -->
                                                                                @if (selectedEvent == null)
                                                                                {
                                                                                    <div class="form-group">
                                                                                        <label style="font-weight: bold;">Φιλτράρισμα Εκδηλώσεων</label>
                                                                                        <div class="input-group custom-width">
                                                                                            <select class=".form-control-calendarEventModal" @bind="selectedEventFilter">
                                                                                                <option value="All">Όλες οι Εκδηλώσεις</option>
                                                                                                <option value="Company">Εκδηλώσεις Εταιρειών</option>
                                                                                                <option value="Professor">Εκδηλώσεις Καθηγητών</option>
                                                                                            </select>
                                                                                            <div class="input-group-append">
                                                                                                <span class="input-group-text"></span>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <br/>
                                                                                    @if (selectedEvent == null)
                                                                                    {
                                                                                        @if (filteredCompanyEvents.Count == 0 && filteredProfessorEvents.Count == 0)
                                                                                        {
                                                                                            <p>
                                                                                                "Δεν βρέθηκε καμία Εκδήλωση για αυτήν τη μέρα"
                                                                                            </p>
                                                                                            <p>
                                                                                                Η σημερινή ημερομηνία είναι: <strong>@DateTime.Today.ToString("dd MMMM , yyyy", new System.Globalization.CultureInfo("el-GR"))</strong>
                                                                                            </p>
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <ul class="list-group">
                                                                                                @if (selectedEventFilter == "All" || selectedEventFilter == "Company" || selectedEventFilter == "Professor")
                                                                                                {
                                                                                                    <div class="table-responsive" style="max-height: 400px; overflow-y: auto;">
                                                                                                        <table class="table table-responsive" style="width: auto; table-layout: fixed;">
                                                                                                        <thead>
                                                                                                            <tr>
                                                                                                                <th class="text-center" style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">Διοργανωτής</th>
                                                                                                                <th class="text-center" style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">Ημερομηνία</th>
                                                                                                                <th class="text-center" style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">Ώρα</th>                                                                                                          
                                                                                                                <th class="text-center" style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">Τίτλος</th>                                                                                                 
                                                                                                                <th class="text-center" style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">Λεπτομέρειες</th>
                                                                                                                @if (selectedEventFilter != "Professor")  
                                                                                                                {
                                                                                                                    <th class="text-center" style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">Ένδειξη Ενδιαφέροντος</th>
                                                                                                                }
                                                                                                            </tr>
                                                                                                        </thead>
                                                                                                        <tbody>
                                                                                                            @if (selectedEventFilter == "All" || selectedEventFilter == "Company")
                                                                                                            {
                                                                                                                @foreach (var companyEvent in filteredCompanyEvents)
                                                                                                                {
                                                                                                                    bool hasAlreadyExpressedInterest = dbContext.InterestInCompanyEventsAsProfessor
                                                                                                                        .Any(i => i.RNGForCompanyEventInterestAsProfessor == companyEvent.RNGForEventUploadedAsCompany 
                                                                                                                                && i.ProfessorEmailShowInterestForCompanyEvent == CurrentUserEmail);

                                                                                                                    Console.WriteLine($"Interest found: {hasAlreadyExpressedInterest} for {companyEvent.CompanyEventTitle} with Professor Email {CurrentUserEmail}");
                        
                                                                                                                    <tr style="cursor:pointer; text-align: center; background-color: @(hasAlreadyExpressedInterest ? "lightgreen" : "transparent");">
                                                                                                                        <td style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">@companyEvent.Company.CompanyName</td>
                                                                                                                        <td style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">
                                                                                                                            @companyEvent.CompanyEventActiveDate.Date.ToString("dd MMMM", new System.Globalization.CultureInfo("el-GR"))
                                                                                                                        </td>
                                                                                                                        <td style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">@companyEvent.CompanyEventTime</td>
                                                                                                                        <td style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">@companyEvent.CompanyEventTitle</td>
                                                                                                                        <td style="max-width: auto; overflow: hidden; text-overflow: ellipsis; justify-content: center; align-items: center; height: 100%; vertical-align: middle;">
                                                                                                                            <i class="fas fa-eye" @onclick="() => ShowEventDetails(companyEvent)" style="cursor: pointer; font-size: 20px;"></i>
                                                                                                                        </td>
                                                                                                                        @if (selectedEventFilter != "Professor")  
                                                                                                                        {
                                                                                                                            <td style="max-width: 250px; text-align: center; vertical-align: middle;">
                                                                                                                                @if (hasAlreadyExpressedInterest)
                                                                                                                                {
                                                                                                                                    <span style="color: black; font-weight: bold;">Έχετε Εκδηλώσει Ενδιαφέρον</span>
                                                                                                                                }
                                                                                                                                else
                                                                                                                                {
                                                                                                                                    <i class="fas fa-heart" @onclick="() => ShowInterestInCompanyEventAsProfessor(companyEvent)" 
                                                                                                                                       style="cursor: pointer; font-size: 20px; color: goldenrod;"></i>
                                                                                                                                }
                                                                                                                            </td>
                                                                                                                        }
                                                                                                                    </tr>
                                                                                                                }
                                                                                                            }

                                                                                                            @if (selectedEventFilter == "All" || selectedEventFilter == "Professor")
                                                                                                            {
                                                                                                                @foreach (var professorEvent in filteredProfessorEvents)
                                                                                                                {
                                                                                                                    <tr style="cursor:pointer; text-align: center;">
                                                                                                                        <td style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">
                                                                                                                            @professorEvent.Professor?.ProfName @professorEvent.Professor?.ProfSurname
                                                                                                                        </td>
                                                                                                                        <td style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">@professorEvent.ProfessorEventActiveDate.Date.ToString("dd MMMM", new System.Globalization.CultureInfo("el-GR"))</td>
                                                                                                                        <td style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">@professorEvent.ProfessorEventTime</td>
                                                                                                                        <td style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">@professorEvent.ProfessorEventTitle</td>
                                                                                                                        <td style="max-width: auto; overflow: hidden; text-overflow: ellipsis; justify-content: center; align-items: center; height: 100%; vertical-align: middle;">
                                                                                                                            <i class="fas fa-eye" @onclick="() => ShowEventDetails(professorEvent)" style="cursor: pointer; font-size: 20px;"></i>
                                                                                                                        </td>
                                                                                                                        @if (selectedEventFilter != "Professor")  
                                                                                                                        {
                                                                                                                            <td> - </td>
                                                                                                                        }
                                                                                                                    </tr>
                                                                                                                }
                                                                                                            }
                                                                                                        </tbody>
                                                                                                    </table>
                                                                                                    </div>
                                                                                                }
                                                                                            </ul>

                                                                                        }
                                                                                    }

                                                                                    <button class="btn btn-danger mt-3" @onclick="CloseModalForCompanyAndProfessorEventTitles">Κλείσιμο</button>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <!-- Display full details of the selected event -->
                                                                                    @if (selectedEvent is CompanyEvent companyEventDetails)
                                                                                    {
                                                                                        <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                                                                            <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                                                                <div class="modal-content">
                                                                                                    <div class="modal-header">
                                                                                                        <h5 class="modal-title" style="color: #4682B4;">@companyEventDetails.CompanyEventTitle</h5>
                                                                                                        <button type="button" class="close" @onclick="CloseEventDetails">
                                                                                                            <span aria-hidden="true">&times;</span>
                                                                                                        </button>
                                                                                                    </div>
                                                                                                    <div class="modal-body">
                                                                                                        @if (companyEventDetails.Company.CompanyLogo != null)
                                                                                                        {
                                                                                                            <div class="form-group text-center">
                                                                                                                <img src="data:image/png;base64,@Convert.ToBase64String(companyEventDetails.Company.CompanyLogo)" 
                                                                                                                     class="rounded-circle img-fluid" 
                                                                                                                     style="width: 150px; height: 150px; object-fit: cover;" 
                                                                                                                     alt="Company Logo" />
                                                                                                            </div>
                                                                                                        }

                                                                                                        <div class="list-group">
                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Όνομα Εταιρίας</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                    <i class="fas fa-industry" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                                                    <span>@companyEventDetails.Company.CompanyName</span>
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Τίτλος Εκδήλωσης</label>
                                                                                                                <input type="text" class="form-control" value="@companyEventDetails.CompanyEventTitle" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Περιγραφή</label>
                                                                                                                <textarea class="form-control" rows="3" readonly>@companyEventDetails.CompanyEventDescription</textarea>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Ημερομηνία</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                    <i class="far fa-calendar-alt" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                                                    <span>@companyEventDetails.CompanyEventActiveDate.ToString("yyyy-MM-dd", new System.Globalization.CultureInfo("el-GR"))</span>
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Ώρα Εκδήλωσης</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                    <i class="far fa-clock" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                                                    <span>@companyEventDetails.CompanyEventTime.ToString(@"hh\:mm")</span>
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Τύπος Εκδήλωσης</label>
                                                                                                                <input type="text" class="form-control" value="@companyEventDetails.CompanyEventType" readonly />
                                                                                                            </div>

                                                                                                            @if (companyEventDetails.CompanyEventOtherOrganizerToBeVisible)
                                                                                                            {
                                                                                                                <div class="form-group">
                                                                                                                    <label style="font-weight: bold;">Άλλος Διοργανωτής</label>
                                                                                                                    <input type="text" class="form-control" value="@companyEventDetails.CompanyEventOtherOrganizer" readonly />
                                                                                                                </div>
                                                                                                            }

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Περιοχές Ενδιαφέροντος</label>
                                                                                                                <textarea class="form-control" rows="3" readonly>@companyEventDetails.CompanyEventAreasOfInterest</textarea>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Κατάσταση Εκδήλωσης</label>
                                                                                                                <input type="text" class="form-control" value="@companyEventDetails.CompanyEventStatus" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Υπεύθυνος Εκδήλωσης</label>
                                                                                                                <input type="text" class="form-control" value="@companyEventDetails.CompanyEventResponsiblePerson" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Email Υπεύθυνου</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                                                    <i class="fas fa-envelope" style="color: #4682B4; margin-right: 8px;"></i>
                                                                                                                    @if (!string.IsNullOrEmpty(companyEventDetails.CompanyEventResponsiblePersonEmail))
                                                                                                                    {
                                                                                                                        <a href="mailto:@companyEventDetails.CompanyEventResponsiblePersonEmail" 
                                                                                                                           style="color: #007bff; text-decoration: underline; word-break: break-all;">
                                                                                                                            @companyEventDetails.CompanyEventResponsiblePersonEmail
                                                                                                                        </a>
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        <span style="color: #6c757d;">Δεν υπάρχει email</span>
                                                                                                                    }
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Τηλέφωνο Υπεύθυνου</label>
                                                                                                                <input type="text" class="form-control" value="@companyEventDetails.CompanyEventResponsiblePersonTelephone" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Τμήμα Εταιρίας</label>
                                                                                                                <input type="text" class="form-control" value="@companyEventDetails.CompanyEventCompanyDepartment" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Διεύθυνση Email Εταιρίας</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                                                    <i class="fas fa-envelope" style="color: #4682B4; margin-right: 8px;"></i>
                                                                                                                    @if (!string.IsNullOrEmpty(companyEventDetails.CompanyEmailUsedToUploadEvent))
                                                                                                                    {
                                                                                                                        <a href="mailto:@companyEventDetails.CompanyEmailUsedToUploadEvent" 
                                                                                                                           style="color: #007bff; text-decoration: underline; word-break: break-all;">
                                                                                                                            @companyEventDetails.CompanyEmailUsedToUploadEvent
                                                                                                                        </a>
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        <span style="color: #6c757d;">Δεν υπάρχει email</span>
                                                                                                                    }
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Ημερομηνία Ανάρτησης Εκδήλωσης</label>
                                                                                                                <input type="text" class="form-control" 
                                                                                                                       value="@companyEventDetails.CompanyEventUploadedDate.ToString("yyyy-MM-dd", new System.Globalization.CultureInfo("el-GR"))" 
                                                                                                                       readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Περιοχή Εκδήλωσης</label>
                                                                                                                <input type="text" class="form-control" value="@companyEventDetails.CompanyEventPerifereiaLocation" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Δήμος Εκδήλωσης</label>
                                                                                                                <input type="text" class="form-control" value="@companyEventDetails.CompanyEventDimosLocation" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Τοποθεσία Εκδήλωσης</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                                                    <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                                                    @if (!string.IsNullOrEmpty(companyEventDetails.CompanyEventPlaceLocation))
                                                                                                                    {
                                                                                                                        <a href="https://www.google.com/maps/search/?api=1&query=@Uri.EscapeDataString(companyEventDetails.CompanyEventPlaceLocation)" 
                                                                                                                           target="_blank"
                                                                                                                           style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                                            @companyEventDetails.CompanyEventPlaceLocation
                                                                                                                        </a>
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        <span style="color: #6c757d;">Δεν έχει οριστεί τοποθεσία Εκδήλωσης ακόμη..</span>
                                                                                                                    }
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Ταχυδρομικός Κώδικας Εκδήλωσης</label>
                                                                                                                <input type="text" class="form-control" value="@companyEventDetails.CompanyEventPostalCodeLocation" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Μεταφορά Στον Χώρο Εκδήλωσης</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto; 
                                                                                                                     @(companyEventDetails.CompanyEventOfferingTransportToEventLocation.GetValueOrDefault() ? "color: #28a745;" : "color: #dc3545;")">
                                                                                                                    <i class="fas fa-car" style="margin-right: 8px;"></i>
                                                                                                                    <span>@(companyEventDetails.CompanyEventOfferingTransportToEventLocation.GetValueOrDefault() ? "Ναι" : "Όχι")</span>
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            @if (companyEventDetails.CompanyEventOfferingTransportToEventLocation ?? false)
                                                                                                            {
                                                                                                                <div class="form-group">
                                                                                                                    <label style="font-weight: bold;">Σημεία Εκκίνησης για Μεταφορά</label>
                                                                                                                    @if (!string.IsNullOrWhiteSpace(companyEventDetails.CompanyEventStartingPointLocationToTransportPeopleToEvent1))
                                                                                                                    {
                                                                                                                        <div class="form-group">
                                                                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                                <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                                                                <a href="https://www.google.com/maps/search/@Uri.EscapeDataString(companyEventDetails.CompanyEventStartingPointLocationToTransportPeopleToEvent1)"
                                                                                                                                   target="_blank"
                                                                                                                                   style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                                                    @companyEventDetails.CompanyEventStartingPointLocationToTransportPeopleToEvent1
                                                                                                                                </a>
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                    }
                                                                                                                    @if (!string.IsNullOrWhiteSpace(companyEventDetails.CompanyEventStartingPointLocationToTransportPeopleToEvent2))
                                                                                                                    {
                                                                                                                        <div class="form-group">
                                                                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                                <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                                                                <a href="https://www.google.com/maps/search/@Uri.EscapeDataString(companyEventDetails.CompanyEventStartingPointLocationToTransportPeopleToEvent2)"
                                                                                                                                   target="_blank"
                                                                                                                                   style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                                                    @companyEventDetails.CompanyEventStartingPointLocationToTransportPeopleToEvent2
                                                                                                                                </a>
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                    }
                                                                                                                    @if (!string.IsNullOrWhiteSpace(companyEventDetails.CompanyEventStartingPointLocationToTransportPeopleToEvent3))
                                                                                                                    {
                                                                                                                        <div class="form-group">
                                                                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                                <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                                                                <a href="https://www.google.com/maps/search/@Uri.EscapeDataString(companyEventDetails.CompanyEventStartingPointLocationToTransportPeopleToEvent3)"
                                                                                                                                   target="_blank"
                                                                                                                                   style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                                                    @companyEventDetails.CompanyEventStartingPointLocationToTransportPeopleToEvent3
                                                                                                                                </a>
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                    }
                                                                                                                </div>
                                                                                                            }
                                                                                                            <button class="btn btn-primary mt-3" @onclick="CloseEventDetails">Πίσω</button>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    }
                                                                                    else if (selectedEvent is ProfessorEvent professorEventDetails)
                                                                                    {
                                                                                        <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                                                                            <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                                                                <div class="modal-content">
                                                                                                    <div class="modal-header">
                                                                                                        <h5 class="modal-title" style="color: #4682B4;">@professorEventDetails.ProfessorEventTitle</h5>
                                                                                                        <button type="button" class="close" @onclick="CloseEventDetails">
                                                                                                            <span aria-hidden="true">&times;</span>
                                                                                                        </button>
                                                                                                    </div>
                                                                                                    <div class="modal-body">
                                                                                                        @if (professorEventDetails.Professor.ProfImage != null)
                                                                                                        {
                                                                                                            <div class="form-group text-center">
                                                                                                                <img src="data:image/png;base64,@Convert.ToBase64String(professorEventDetails.Professor.ProfImage)" 
                                                                                                                     class="rounded-circle img-fluid" 
                                                                                                                     style="width: 150px; height: 150px; object-fit: cover;" 
                                                                                                                     alt="Professor Image" />
                                                                                                            </div>
                                                                                                        }

                                                                                                        <div class="list-group">
                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Ονοματεπώνυμο Διοργανωτή</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                    <i class="fas fa-user" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                                                    <span>@professorEventDetails.Professor.ProfName @professorEventDetails.Professor.ProfSurname</span>
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Τίτλος Εκδήλωσης</label>
                                                                                                                <input type="text" class="form-control" value="@professorEventDetails.ProfessorEventTitle" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Περιγραφή</label>
                                                                                                                <textarea class="form-control" rows="3" readonly>@professorEventDetails.ProfessorEventDescription</textarea>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Ημερομηνία</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                    <i class="far fa-calendar-alt" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                                                    <span>@professorEventDetails.ProfessorEventActiveDate.ToString("yyyy-MM-dd")</span>
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Ώρα Εκδήλωσης</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                    <i class="far fa-clock" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                                                    <span>@professorEventDetails.ProfessorEventTimeOnly.ToString("HH:mm")</span>
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Τύπος Εκδήλωσης</label>
                                                                                                                <input type="text" class="form-control" value="@professorEventDetails.ProfessorEventType" readonly />
                                                                                                            </div>

                                                                                                            @if (professorEventDetails.ProfessorEventOtherOrganizerToBeVisible)
                                                                                                            {
                                                                                                                <div class="form-group">
                                                                                                                    <label style="font-weight: bold;">Άλλος Διοργανωτής</label>
                                                                                                                    <input type="text" class="form-control" value="@professorEventDetails.ProfessorEventOtherOrganizer" readonly />
                                                                                                                </div>
                                                                                                            }

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Περιοχές Ενδιαφέροντος</label>
                                                                                                                <textarea class="form-control" rows="3" readonly>@professorEventDetails.ProfessorEventAreasOfInterest</textarea>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Κατάσταση Εκδήλωσης</label>
                                                                                                                <input type="text" class="form-control" value="@professorEventDetails.ProfessorEventStatus" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Ονοματεπώνυμο Υπεύθυνου</label>
                                                                                                                <input type="text" class="form-control" value="@professorEventDetails.ProfessorEventResponsiblePerson" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Email Υπεύθυνου</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                                                    <i class="fas fa-envelope" style="color: #4682B4; margin-right: 8px;"></i>
                                                                                                                    @if (!string.IsNullOrEmpty(professorEventDetails.ProfessorEventResponsiblePersonEmail))
                                                                                                                    {
                                                                                                                        <a href="mailto:@professorEventDetails.ProfessorEventResponsiblePersonEmail" 
                                                                                                                           style="color: #007bff; text-decoration: underline; word-break: break-all;">
                                                                                                                            @professorEventDetails.ProfessorEventResponsiblePersonEmail
                                                                                                                        </a>
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        <span style="color: #6c757d;">Δεν υπάρχει email</span>
                                                                                                                    }
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Τηλέφωνο Υπεύθυνου</label>
                                                                                                                <input type="text" class="form-control" value="@professorEventDetails.ProfessorEventResponsiblePersonTelephone" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Πανεπιστήμιο</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                    <i class="fas fa-university" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                                                    <span>@professorEventDetails.Professor.ProfUniversity</span>
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Τμήμα Πανεπιστημίου</label>
                                                                                                                <input type="text" class="form-control" value="@professorEventDetails.ProfessorEventUniversityDepartment" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Email Καθηγητή</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                                                    <i class="fas fa-envelope" style="color: #4682B4; margin-right: 8px;"></i>
                                                                                                                    @if (!string.IsNullOrEmpty(professorEventDetails.Professor.ProfEmail))
                                                                                                                    {
                                                                                                                        <a href="mailto:@professorEventDetails.Professor.ProfEmail" 
                                                                                                                           style="color: #007bff; text-decoration: underline; word-break: break-all;">
                                                                                                                            @professorEventDetails.Professor.ProfEmail
                                                                                                                        </a>
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        <span style="color: #6c757d;">Δεν υπάρχει email</span>
                                                                                                                    }
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Περιφέρεια</label>
                                                                                                                <input type="text" class="form-control" value="@professorEventDetails.ProfessorEventPerifereiaLocation" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Δήμος</label>
                                                                                                                <input type="text" class="form-control" value="@professorEventDetails.ProfessorEventDimosLocation" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Τοποθεσία Εκδήλωσης</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                                                    <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                                                    @if (!string.IsNullOrEmpty(professorEventDetails.ProfessorEventPlaceLocation))
                                                                                                                    {
                                                                                                                        <a href="https://www.google.com/maps/search/?api=1&query=@Uri.EscapeDataString(professorEventDetails.ProfessorEventPlaceLocation)"
                                                                                                                           target="_blank"
                                                                                                                           style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                                            @professorEventDetails.ProfessorEventPlaceLocation
                                                                                                                        </a>
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        <span style="color: #6c757d;">Δεν έχει οριστεί τοποθεσία Εκδήλωσης ακόμη..</span>
                                                                                                                    }
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Ταχυδρομικός Κώδικας Τοποθεσίας</label>
                                                                                                                <input type="text" class="form-control" value="@professorEventDetails.ProfessorEventPostalCodeLocation" readonly />
                                                                                                            </div>

                                                                                                            <div class="form-group">
                                                                                                                <label style="font-weight: bold;">Μεταφορά Στον Χώρο Εκδήλωσης</label>
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto; 
                                                                                                                     @(professorEventDetails.ProfessorEventOfferingTransportToEventLocation.GetValueOrDefault() ? "color: #28a745;" : "color: #dc3545;")">
                                                                                                                    <i class="fas fa-car" style="margin-right: 8px;"></i>
                                                                                                                    <span>@(professorEventDetails.ProfessorEventOfferingTransportToEventLocation.GetValueOrDefault() ? "Ναι" : "Όχι")</span>
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            @if (professorEventDetails.ProfessorEventOfferingTransportToEventLocation ?? false)
                                                                                                            {
                                                                                                                <div class="form-group">
                                                                                                                    <label style="font-weight: bold;">Σημεία Εκκίνησης για Μεταφορά</label>
                                                                                                                    @if (!string.IsNullOrWhiteSpace(professorEventDetails.ProfessorEventStartingPointLocationToTransportPeopleToEvent1))
                                                                                                                    {
                                                                                                                        <div class="form-group">
                                                                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                                <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                                                                <a href="https://www.google.com/maps/search/@Uri.EscapeDataString(professorEventDetails.ProfessorEventStartingPointLocationToTransportPeopleToEvent1)"
                                                                                                                                   target="_blank"
                                                                                                                                   style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                                                    @professorEventDetails.ProfessorEventStartingPointLocationToTransportPeopleToEvent1
                                                                                                                                </a>
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                    }
                                                                                                                    @if (!string.IsNullOrWhiteSpace(professorEventDetails.ProfessorEventStartingPointLocationToTransportPeopleToEvent2))
                                                                                                                    {
                                                                                                                        <div class="form-group">
                                                                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                                <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                                                                <a href="https://www.google.com/maps/search/@Uri.EscapeDataString(professorEventDetails.ProfessorEventStartingPointLocationToTransportPeopleToEvent2)"
                                                                                                                                   target="_blank"
                                                                                                                                   style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                                                    @professorEventDetails.ProfessorEventStartingPointLocationToTransportPeopleToEvent2
                                                                                                                                </a>
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                    }
                                                                                                                    @if (!string.IsNullOrWhiteSpace(professorEventDetails.ProfessorEventStartingPointLocationToTransportPeopleToEvent3))
                                                                                                                    {
                                                                                                                        <div class="form-group">
                                                                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                                <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                                                                <a href="https://www.google.com/maps/search/@Uri.EscapeDataString(professorEventDetails.ProfessorEventStartingPointLocationToTransportPeopleToEvent3)"
                                                                                                                                   target="_blank"
                                                                                                                                   style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                                                    @professorEventDetails.ProfessorEventStartingPointLocationToTransportPeopleToEvent3
                                                                                                                                </a>
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                    }
                                                                                                                </div>
                                                                                                            }
                                                                                                            <button class="btn btn-primary mt-3" @onclick="CloseEventDetails">Πίσω</button>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    } 

                                                                                    <button class="btn btn-primary mt-3" @onclick="CloseEventDetails">Πίσω</button>
                                                                                }
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            }







                                                            <!-- ΔΗΜΙΟΥΡΓΙΑ ΕΚΔΗΛΩΣΗΣ ΩΣ PROFESSOR USER-->
                                                            <div class="mb-3 row-dark-gray">
                                                                <div class="d-flex justify-content-between align-items-center">
                                                                    <label class="form-label" style="color: #FFF8DC;">• Δημιουργία Εκδήλωσης •</label>
                                                                    <button class="btn btn-link" @onclick="ToggleFormVisibilityForUploadProfessorEvent">
                                                                        @if (isUploadProfessorEventFormVisible)
                                                                        {
                                                                            <span>&#8722;</span> <!-- Minus sign -->
                                                                        }
                                                                        else
                                                                        {
                                                                            <span>&#43;</span> <!-- Plus sign -->
                                                                        }
                                                                    </button>
                                                                </div>
                                                            </div>
                                                            @if (isUploadProfessorEventFormVisible)
                                                            {

                                                                
                                                                    <div class="row mb-3">
                                                                        <div class="col-md-4">
                                                                            <label for="ProfessorEventType">
                                                                                <strong>Τύπος Εκδήλωσης</strong>
                                                                                <span style="color: red;"> *</span>
                                                                            </label>
                                                                            <div class="input-group">
                                                                                <select id="ProfessorEventType" class="form-control @(showErrorMessageForUploadingProfessorEvent && string.IsNullOrWhiteSpace(professorEvent.ProfessorEventType) ? "shake error" : "")" @bind="professorEvent.ProfessorEventType">
                                                                                    <option value="">-- Επιλέξτε τύπο εκδήλωσης --</option>
                                                                                    <option value="Έκθεση">Έκθεση</option>
                                                                                    <option value="Hackathon">Hackathon</option>
                                                                                    <option value="Career Day">Career Day</option>
                                                                                    <option value="Seminar">Seminar</option>
                                                                                    <option value="Επίσκεψη">Επίσκεψη</option>
                                                                                    <option value="Άλλο">Άλλο</option>
                                                                                </select>
                                                                                <div class="input-group-append">
                                                                                    <span class="input-group-text">
                                                                                        <i class="fas fa-chevron-down"></i>
                                                                                    </span>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                    <div class="row mb-3">
                                                                        <div class="col-md-4">
                                                                            <label for="ProfessorEventOtherOrganizerToBeVisible"><strong>Θέλετε να προσθέσετε άλλον διοργανωτή;</strong><span style="color: red;"> *</span></label>
                                                                            <div class="form-check">
                                                                                <input type="radio" id="true" name="ProfessorEventOtherOrganizerToBeVisible" class="form-check-input" 
                                                                                       value="true" @onclick="() => UpdateOrganizerVisibilityForProfessorEvents(true)" />
                                                                                <label class="form-check-label" for="true">Ναι</label>
                                                                            </div>
                                                                            <div class="form-check">
                                                                                <input type="radio" id="false" name="ProfessorEventOtherOrganizerToBeVisible" class="form-check-input" 
                                                                                       value="false" @onclick="() => UpdateOrganizerVisibilityForProfessorEvents(false)" />
                                                                                <label class="form-check-label" for="false">Όχι</label>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                    @if (professorEvent.ProfessorEventOtherOrganizerToBeVisible)
                                                                    {
                                                                        <div class="row mb-3">
                                                                            <div class="col-md-4">
                                                                                <label for="ProfessorEventOtherOrganizer"><strong>Διοργανωτής</strong><span style="color: red;"> *</span></label>
                                                                                <div class="input-group">
                                                                                    <input type="text" class="form-control @(showErrorMessageForUploadingProfessorEvent && string.IsNullOrWhiteSpace(professorEvent.ProfessorEventOtherOrganizer) ? "shake error" : "")"
                                                                                           @bind="professorEvent.ProfessorEventOtherOrganizer" placeholder="Πληκτρολογείστε τον Διοργανωτή" />
                                                                                    <div class="input-group-append">
                                                                                        <span class="input-group-text">
                                                                                            <i class="fas fa-user"></i>
                                                                                        </span>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    }

                                                                   

                                                                    <!-- Areas of Interest Toggle -->
                                                                    <div class="row mb-3">
                                                                        <div class="col-md-4">
                                                                            <label @onclick="ToggleCheckboxesForAreasForProfessorEvent">
                                                                                <strong>Περιοχές Ενδιαφέροντος</strong>
                                                                                <span style="color: red;"> *</span>
                                                                                <span class="light-cadetblue-text"> (Άνοιγμα/Κλείσιμο)</span>
                                                                            </label>
                                                                            <div id="toggleCheckboxesForAreasOfInterest" class="checkbox-containerAreasOfInterest" style="display: none;">
                                                                                @if (Areas == null || !Areas.Any())
                                                                                {
                                                                                    <p>Φορτώνει...</p>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <div class="d-flex flex-wrap">
                                                                                        @foreach (var area in Areas)
                                                                                        {
                                                                                            <div class="form-check me-2 mb-2" style="flex-basis: 20%;">
                                                                                                <input type="checkbox"
                                                                                                       id="areaOfInterest_@area.Id"
                                                                                                       class="form-check-input"
                                                                                                       @onchange="(e) => OnCheckedChangedForProfessorEvent(e, area)"
                                                                                                       checked="@IsSelectedAreaForProfessorEvent(area)" />
                                                                                                <label class="form-check-label @(showErrorMessageForUploadingProfessorEvent && string.IsNullOrWhiteSpace(professorEvent.ProfessorEventAreasOfInterest) ? "shake error" : "")" for="areaOfInterest_@area.Id">
                                                                                                    @area.AreaName
                                                                                                </label>
                                                                                            </div>
                                                                                        }
                                                                                    </div>
                                                                                }
                                                                            </div>
                                                                        </div>
                                                                    </div>



                                                                    <div class="row mb-3">
                                                                        <div class="col-md-4">
                                                                            <label for="ProfessorEventTitle"><strong>Τίτλος Εκδήλωσης</strong><span style="color: red;"> *</span></label>
                                                                            <input type="text" id="ProfessorEventTitle" class="form-control @(showErrorMessageForUploadingProfessorEvent && string.IsNullOrWhiteSpace(professorEvent.ProfessorEventTitle) ? "shake error" : "")" @bind="professorEvent.ProfessorEventTitle" @oninput="CheckCharacterLimitInEventTitleField" maxlength="120" placeholder="Πληκτρολογείστε τον τίτλο της εκδήλωσης" />
                                                                            <small class="character-limit light-cadetblue-text">@remainingCharactersInEventTitleField/120</small>
                                                                        </div>
                                                                    </div>

                                                                    <div class="row mb-3">
                                                                        <div class="col-md-4">
                                                                            <label for="ProfessorEventDescription"><strong>Περιγραφή Εκδήλωσης</strong> <span style="color: red;"> *</span></label>
                                                                            <textarea id="ProfessorEventDescription" class="form-control @(showErrorMessageForUploadingProfessorEvent && string.IsNullOrWhiteSpace(professorEvent.ProfessorEventDescription) ? "shake error" : "")" @bind="professorEvent.ProfessorEventDescription" @oninput="CheckCharacterLimitInCompanyEventDescription" maxlength="1000" placeholder="Πληκτρολογείστε την Περιγραφή της Εκδήλωσής σας"></textarea>
                                                                            <small class="character-limit light-cadetblue-text">@remainingCharactersInCompanyEventDescription/1000</small>
                                                                        </div>
                                                                    </div>

                                                                    <div class="row mb-3">
                                                                        <div class="col-md-4">
                                                                            <label for="ProfessorEventResponsiblePerson">Υπεύθυνος Εκδήλωσης (Ονοματεπώνυμο)<span style="font-style: italic; color: gray;"> (Προαιρετικό)</span></label>
                                                                            <input type="text" id="ProfessorEventResponsiblePerson" class="form-control" @bind="professorEvent.ProfessorEventResponsiblePerson" />
                                                                        </div>
                                                                    </div>

                                                                    <div class="row mb-3">
                                                                        <div class="col-md-4">
                                                                            <label for="ProfessorEventResponsiblePersonEmail">
                                                                                Email Υπεύθυνου
                                                                                <span style="font-style: italic; color: gray;"> (Προαιρετικό)</span>
                                                                            </label>
                                                                            <input type="email" id="ProfessorEventResponsiblePersonEmail" class="form-control" 
                                                                                   @bind="professorEvent.ProfessorEventResponsiblePersonEmail" 
                                                                                   placeholder="example@mail.com" />
                                                                        </div>
                                                                    </div>


                                                                    <div class="row mb-3">
                                                                        <div class="col-md-4">
                                                                            <label for="ProfessorEventResponsiblePersonTelephone">Τηλέφωνο Υπεύθυνου<span style="font-style: italic; color: gray;"> (Προαιρετικό)</span></label>
                                                                            <div class="input-group">
                                                                                <div class="input-group-prepend">
                                                                                    <span class="input-group-textfortelephone">+30</span>
                                                                                </div>
                                                                                <input type="tel" id="ProfessorEventResponsiblePersonTelephone" class="form-control" 
                                                                                       @bind="professorEvent.ProfessorEventResponsiblePersonTelephone" placeholder="Τηλέφωνο Υπευθύνου" />
                                                                            </div>
                                                                        </div>
                                                                    </div>


                                                                    <div class="row mb-3">
                                                                        <div class="col-md-4">
                                                                            <label for="ProfessorEventUniversity">Πανεπιστήμιο<span style="font-style: italic; color: gray;"> (Προαιρετικό)</span></label>
                                                                            <input type="text" id="ProfessorEventUniversity" class="form-control" @bind="professorEvent.Professor.ProfUniversity" />
                                                                        </div>
                                                                    </div>


                                                                    <div class="row mb-3">
                                                                        <div class="col-md-4">
                                                                            <label for="ProfessorEventUniversityDepartment">Τμήμα Πανεπιστημίου<span style="font-style: italic; color: gray;"> (Προαιρετικό)</span></label>
                                                                            <input type="text" id="ProfessorEventUniversityDepartment" class="form-control" @bind="professorEvent.ProfessorEventUniversityDepartment" />
                                                                        </div>
                                                                    </div>

                                                                    <div class="row mb-3">
                                                                        <div class="col-md-4">
                                                                            <label for="ProfessorEventDate">
                                                                                <strong>Ημερομηνία Εκδήλωσης</strong>
                                                                                <span style="color: red;">*</span>
                                                                            </label>
                                                                            <input type="date" id="ProfessorEventDate"
                                                                                   class="form-control @(showErrorMessageForUploadingProfessorEvent && professorEvent.ProfessorEventActiveDate.Date < DateTime.Today ? "shake error" : "")" 
                                                                                   value="@professorEvent.ProfessorEventActiveDate.ToString("yyyy-MM-dd")"
                                                                                   @onchange="HandleProfessorDateChange" />
        
                                                                            @if (showErrorMessageForUploadingProfessorEvent && professorEvent.ProfessorEventActiveDate.Date < DateTime.Today)
                                                                            {
                                                                                <div class="text-danger mt-1">Η ημερομηνία πρέπει να είναι μεταγενέστερη ή ίση με τη σημερινή ημερομηνία.</div>
                                                                            }
        
                                                                            @if (hasExistingEventsOnSelectedDateForProfessor)
                                                                            {
                                                                                <div class="text-info mt-1">
                                                                                    <i class="fas fa-info-circle"></i> Ενημέρωση: "Υπάρχουν ήδη <strong>@existingEventsCountToCheckAsProfessor</strong> εκδηλώσεις για αυτή την ημερομηνία."
                                                                                </div>
                                                                            }
                                                                        </div>
                                                                    </div>

                                                                    <!-- Region Dropdown -->
                                                                    <div class="row mb-3">
                                                                        <div class="col-md-4">
                                                                            <label for="ProfessorEventPerifereiaLocation">
                                                                                <strong>Περιφέρεια</strong>
                                                                                <span style="color: red;">*</span>
                                                                            </label>
                                                                            <div class="input-group">
                                                                                <select id="ProfessorEventPerifereiaLocation" class="form-control @(showErrorMessageForUploadingProfessorEvent && string.IsNullOrWhiteSpace(professorEvent.ProfessorEventPerifereiaLocation) ? "shake error" : "")" @bind="professorEvent.ProfessorEventPerifereiaLocation">
                                                                                    <option value="">-- Επιλέξτε Περιφέρεια --</option>
                                                                                    @foreach (var region in Regions)
                                                                                    {
                                                                                        <option value="@region">@region</option>
                                                                                    }
                                                                                </select>
                                                                                <div class="input-group-append">
                                                                                    <span class="input-group-text">
                                                                                        <i class="fas fa-chevron-down"></i>
                                                                                    </span>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                    <!-- Town Dropdown -->
                                                                    <div class="row mb-3">
                                                                        <div class="col-md-4">
                                                                            <label for="ProfessorEventDimosLocation">
                                                                                <strong>Δήμος</strong>
                                                                                <span style="color: red;">*</span>
                                                                            </label>
                                                                            <div class="input-group">
                                                                                <select id="ProfessorEventDimosLocation" class="form-control @(showErrorMessageForUploadingProfessorEvent && string.IsNullOrWhiteSpace(professorEvent.ProfessorEventDimosLocation) ? "shake error" : "")" @bind="professorEvent.ProfessorEventDimosLocation">
                                                                                    <option value="">-- Επιλέξτε Δήμο --</option>
                                                                                    @foreach (var town in GetTownsForRegion(professorEvent.ProfessorEventPerifereiaLocation))
                                                                                    {
                                                                                        <option value="@town">@town</option>
                                                                                    }
                                                                                </select>
                                                                                <div class="input-group-append">
                                                                                    <span class="input-group-text">
                                                                                        <i class="fas fa-chevron-down"></i>
                                                                                    </span>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>


                                                                    <div class="row mb-3">
                                                                        <div class="col-md-4">
                                                                            <label for="ProfessorEventPlaceLocation"><strong>Τοποθεσία Εκδήλωσης</strong><span style="color: red;"> *</span></label>
                                                                            <input type="text" id="autocomplete" class="form-control @(showErrorMessageForUploadingProfessorEvent && string.IsNullOrWhiteSpace(professorEvent.ProfessorEventPlaceLocation) ? "shake error" : "")" @bind="professorEvent.ProfessorEventPlaceLocation" placeholder="Αναζήτηση χώρου εκδήλωσης " />
                                                                        </div>
                                                                    </div>

                                                                    <div class="row mb-3">
                                                                        <div class="col-md-4">
                                                                            <label for="ProfessorEventTime">
                                                                                <strong>Ώρα Εκδήλωσης</strong>
                                                                                <span style="color: red;">*</span>
                                                                            </label>
                                                                            <input type="time" 
                                                                                   id="ProfessorEventTime" 
                                                                                   class="form-control @(showErrorMessageForUploadingProfessorEvent && professorEvent.ProfessorEventTimeOnly == TimeOnly.MinValue ? "shake error" : "")" 
                                                                                   @bind="professorEvent.ProfessorEventTimeOnly" />
                                                                        </div>
                                                                    </div>




                                               
                                                                    <div class="row mb-3">
                                                                        <div class="col-md-4">
                                                                            <label for="ProfessorEventPostalCodeLocation"><strong>Ταχυδρομικός Κώδικας</strong><span style="color: red;"> *</span></label>
                                                                            <input type="text" id="ProfessorEventPostalCodeLocation" class="form-control @(showErrorMessageForUploadingProfessorEvent && string.IsNullOrWhiteSpace(professorEvent.ProfessorEventPostalCodeLocation) ? "shake error" : "")" @bind="professorEvent.ProfessorEventPostalCodeLocation" placeholder="Πληκτρολογείστε τον ταχυδρομικό κώδικα" />
                                                                        </div>
                                                                    </div>

                                                                    <div class="row mb-3">
                                                                        <div class="col-md-4">
                                                                            <label for="ProfessorEventOfferingTransportToEventLocation">
                                                                                <strong>Παροχή Μεταφοράς προς Χώρο Εκδήλωσης;</strong>
                                                                                <span style="color: red;"> *</span>
                                                                            </label>
                                                                            <select id="ProfessorEventOfferingTransportToEventLocation" 
                                                                                    class="form-control @(showErrorMessageForUploadingProfessorEvent && professorEvent.ProfessorEventOfferingTransportToEventLocation == null ? "shake error" : "")"
                                                                                    @onchange="OnTransportOptionChangeForProfessorEvent">
                                                                                <option value="">-- Επιλέξτε --</option>
                                                                                <option value="true">Ναι</option>
                                                                                <option value="false">Όχι</option>
                                                                            </select>
                                                                        </div>
                                                                    </div>


                                                                    @if (professorEvent.ProfessorEventOfferingTransportToEventLocation == true)
                                                                    {
                                                                        <div class="row mb-3">
                                                                            <div class="col-md-4">
                                                                                <label for="ProfessorEventStartingPointLocationToTransportPeopleToEvent1">
                                                                                    <strong>Σημείο Εκκίνησης 1 για μεταφορά προς Εκδήλωση</strong> 
                                                                                    <span style="color: red;"> *</span>
                                                                                </label>
                                                                                <input type="text" id="autocomplete2" 
                                                                                       class="form-control @(showErrorMessageForUploadingProfessorEvent && string.IsNullOrWhiteSpace(professorEvent.ProfessorEventStartingPointLocationToTransportPeopleToEvent1) ? "shake error" : "")" 
                                                                                       @bind="professorEvent.ProfessorEventStartingPointLocationToTransportPeopleToEvent1" 
                                                                                       placeholder="Αναζήτηση 1ου σημείου εκκίνησης" />
                                                                            </div>
                                                                        </div>
                                                                        <div class="row mb-3">
                                                                            <div class="col-md-4">
                                                                                <label for="ProfessorEventStartingPointLocationToTransportPeopleToEvent2">
                                                                                    <strong>Σημείο Εκκίνησης 2 για μεταφορά προς Εκδήλωση</strong> 
                                                                                    <span style="color: red;"> *</span>
                                                                                </label>
                                                                                <input type="text" id="autocomplete3" 
                                                                                       class="form-control @(showErrorMessageForUploadingProfessorEvent && string.IsNullOrWhiteSpace(professorEvent.ProfessorEventStartingPointLocationToTransportPeopleToEvent2) ? "shake error" : "")" 
                                                                                       @bind="professorEvent.ProfessorEventStartingPointLocationToTransportPeopleToEvent2" 
                                                                                       placeholder="Αναζήτηση 2ου σημείου εκκίνησης" />
                                                                            </div>
                                                                        </div>
                                                                        <div class="row mb-3">
                                                                            <div class="col-md-4">
                                                                                <label for="ProfessorEventStartingPointLocationToTransportPeopleToEvent3">
                                                                                    <strong>Σημείο Εκκίνησης 3 για μεταφορά προς Εκδήλωση</strong> 
                                                                                    <span style="color: red;"> *</span>
                                                                                </label>
                                                                                <input type="text" id="autocomplete4" 
                                                                                       class="form-control @(showErrorMessageForUploadingProfessorEvent && string.IsNullOrWhiteSpace(professorEvent.ProfessorEventStartingPointLocationToTransportPeopleToEvent3) ? "shake error" : "")" 
                                                                                       @bind="professorEvent.ProfessorEventStartingPointLocationToTransportPeopleToEvent3" 
                                                                                       placeholder="Αναζήτηση 3ου σημείου εκκίνησης" />
                                                                            </div>
                                                                        </div>
                                                                    }

                                                                    <div class="row mb-3">
                                                                        <div class="col-md-4">
                                                                             <label for="ProfessorEventAttachmentFile">Επισύναψη Αρχείου<span style="font-style: italic; color: gray;"> (Προαιρετικό)</span></label>
                                                                             <br />
                                                                            <InputFile OnChange="UploadProfessorEventAttachmentFile" />
                                                                        </div>
                                                                    </div>


                                                                    <!-- Buttons to save the event -->
                                                                    <div class="mb-3">
                                                                        <button class="modern-button"
                                                                                style="background-color: #007bff; color: white; display: inline-flex; align-items: center;"
                                                                                @onclick="HandleTemporarySaveProfessorEvent">
                                                                            <i class="fa-regular fa-floppy-disk" style="margin-right: 8px;"></i>
                                                                            Προσωρινή Αποθήκευση Εκδήλωσης
                                                                        </button>
                                                                        <button class="modern-button"
                                                                                style="background-color: #28a745; color: white; display: inline-flex; align-items: center;"
                                                                                @onclick="HandlePublishSaveProfessorEvent">
                                                                            <i class="fa-solid fa-floppy-disk" style="margin-right: 8px;"></i>
                                                                            Δημοσίευση Εκδήλωσης
                                                                        </button>
                                                                    </div>


                                                                    @if (!isFormValidToSaveEventAsProfessor)
                                                                    {
                                                                            <div class="alert alert-danger" role="alert">
                                                                                Συμπληρώστε Όλα Τα Υποχρεωτικά Πεδία και Προσπαθήστε Ξανά
                                                                            </div>
                                                                    }
                                                                    <br />
                                                                    @if (!string.IsNullOrEmpty(saveEventAsProfessorMessage))
                                                                    {
                                                                            <div class="alert @(isSaveAnnouncementAsProfessorSuccessful ? "alert-success" : "alert-danger")" role="alert">
                                                                                    @saveEventAsProfessorMessage
                                                                            </div>
                                                                    }
                                                                    <br />
                                                            }


                                                            <!-- VIEW UPLOADED EVENTS AS PROFESSOR -->
                                                            <div class="mb-3 row-dark-gray">
                                                                <div class="d-flex justify-content-between align-items-center">
                                                                    <label class="form-label" style="color: #FFF8DC;">• Οι Εκδηλώσεις μου •</label>
                                                                    <button class="btn btn-link" @onclick="ToggleUploadedProfessorEventsVisibility">
                                                                        @if (isUploadedEventsVisibleAsProfessor)
                                                                        {
                                                                            <span>&#8722;</span> <!-- Minus sign -->
                                                                        }
                                                                        else
                                                                        {
                                                                            <span>&#43;</span> <!-- Plus sign -->
                                                                        }
                                                                    </button>
                                                                </div>
                                                            </div>
                                                            <br />
                                                            @if (isUploadedEventsVisibleAsProfessor)
                                                            {
                                                                <div class="col-md-2">
                                                                    <label for="statusFilterForAnnouncements" style="color: #4682b4; font-size: 15px; display: block;"><strong>Φίλτρο Εμφάνισης</strong></label>
                                                                    <div class="input-group">
                                                                        <select id="statusFilterForAnnouncements" class="form-control form-control-sm" 
                                                                                @onchange="HandleStatusFilterChangeForProfessorEvents">
                                                                            <option value="Όλα">Όλες</option>
                                                                            <option value="Δημοσιευμένη">Δημοσιευμένες</option>
                                                                            <option value="Μη Δημοσιευμένη">Μη Δημοσιευμένες</option>
                                                                        </select>

                                                                        <div class="input-group-append">
                                                                            <span class="input-group-text">
                                                                                <i class="fas fa-chevron-down"></i>
                                                                            </span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-2">
                                                                    <label style="color: #4682b4; font-weight: bold; font-size: 15px; display: block;">Αποτελέσματα ανά Σελίδα</label>
                                                                    <div class="input-group" style="max-width: 65px;">
                                                                        <select class="form-control form-control-sm" 
                                                                                @onchange="OnPageSizeChange_SeeMyUploadedEventsAsProfessor" 
                                                                                aria-label="Items per page">
                                                                            @foreach (var option in pageSizeOptions_SeeMyUploadedEventsAsProfessor)
                                                                            {
                                                                                <option value="@option" selected="@(itemsPerPage_ProfessorEvents == option)">@option</option>
                                                                            }
                                                                        </select>
                                                                        <div class="input-group-append">
                                                                            <span class="input-group-text">
                                                                                <i class="fas fa-chevron-down"></i>
                                                                            </span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <br/>
                                                                <div class="col-md-2">
                                                                    @if (selectedStatusFilterForEventsAsProfessor == "Όλα")
                                                                    {
                                                                        <span><strong>Σύνολο: </strong>@totalCountEventsAsProfessor</span>
                                                                    }
                                                                    else if (selectedStatusFilterForEventsAsProfessor == "Δημοσιευμένη")
                                                                    {
                                                                        <span><strong>Σύνολο: </strong>@publishedCountEventsAsProfessor</span>
                                                                    }
                                                                    else if (selectedStatusFilterForEventsAsProfessor == "Μη Δημοσιευμένη")
                                                                    {
                                                                        <span><strong>Σύνολο: </strong>@unpublishedCountEventsAsProfessor</span>
                                                                    }
                                                                </div>

                                                                <div style="max-width: auto; margin-left: 0;">
                                                                    <div class="table-responsive">
                                                                        <table class="table table-striped">
                                                                            <thead>
                                                                                <tr style="background-color: lightgray; border: 2px solid black;">
                                                                                    <th style="border: 2px solid black;">
                                                                                        <i class="fa-solid fa-key fa-sm" style="color: #9D00FF; margin-right: 8px;"></i>
                                                                                        ID
                                                                                    </th>
                                                                                    <th style="border: 2px solid black;">
                                                                                        <i class="fa-solid fa-font fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                        Τίτλος
                                                                                    </th>
                                                                                    <th style="border: 2px solid black; width: 30%;">
                                                                                        <i class="fa-solid fa-align-left fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                        Περιγραφή
                                                                                    </th>
                                                                                    <th style="border: 2px solid black;">
                                                                                        <i class="fa-solid fa-calendar-day fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                        Ημερομηνία Δημοσίευσης
                                                                                    </th>
                                                                                    <th style="border: 2px solid black;">
                                                                                        <i class="fa-solid fa-hourglass-half fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                        Κατάσταση
                                                                                    </th>
                                                                                    <th style="border: 2px solid black; width: 300px;">
                                                                                        <i class="fa-solid fa-hand fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                        Ενέργειες
                                                                                    </th>
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                @if (FilteredProfessorEvents != null && FilteredProfessorEvents.Any())
                                                                                {
                                                                                    @foreach (var professorevent in GetPaginatedProfessorEvents())
                                                                                    {
                                                                                        <tr style="background-color: @(professorevent.ProfessorEventStatus == "Δημοσιευμένη" ? "lightblue" : "lightcoral");">
                                                                                            <td>
                                                                                              <span style="color: #9D00FF;">
                                                                                                @professorevent.RNGForEventUploadedAsProfessor_HashedAsUniqueID
                                                                                              </span>
                                                                                            </td>
                                                                                            <td>@professorevent.ProfessorEventTitle</td>
                                                                                            <td style="width: 30%;">
                                                                                                @if (professorevent.ProfessorEventDescription.Length > 50) 
                                                                                                {
                                                                                                    @professorevent.ProfessorEventDescription.Substring(0, 50)
                                                                                                }
                                                                                                else
                                                                                                {
                                                                                                    @professorevent.ProfessorEventDescription
                                                                                                }
                                                                                            </td>
                                                                                            <td>@professorevent.ProfessorEventUploadedDate.ToString("dd/MM/yyyy")</td>
                                                                                            <td>@professorevent.ProfessorEventStatus</td>
                                                                                            <td>
                                                                                                <!-- Trash button -->
                                                                                                <button class="btn btn-danger me-2" @onclick="() => DeleteProfessorEvent(professorevent.Id)">
                                                                                                    <i class="fas fa-trash icon-button"></i>
                                                                                                </button>

                                                                                                <!-- Arrow down/up buttons -->
                                                                                                @if (professorevent.ProfessorEventStatus == "Δημοσιευμένη")
                                                                                                {
                                                                                                    <button class="btn btn-secondary me-2" @onclick='async () => await ChangeProfessorEventStatus(professorevent.Id, "Μη Δημοσιευμένη")' title="Αποδημοσίευση Ανακοίνωσης">
                                                                                                        <i class="fas fa-arrow-down icon-button" style="color: yellow;"></i>
                                                                                                    </button>
                                                                                                }
                                                                                                else if (professorevent.ProfessorEventStatus == "Μη Δημοσιευμένη")
                                                                                                {
                                                                                                    <button class="btn btn-secondary me-2" @onclick='async () => await ChangeProfessorEventStatus(professorevent.Id, "Δημοσιευμένη")' title="Δημοσίευση Ανακοίνωσης">
                                                                                                        <i class="fas fa-arrow-up icon-button" style="color: cornflowerblue;"></i>
                                                                                                    </button>

                                                                                                    <!-- Pencil icon button to edit the announcement -->
                                                                                                    <button class="btn btn-secondary me-2" @onclick="() => OpenEditModalForProfessorEvent(professorevent)" title="Επεξεργασία Ανακοίνωσης">
                                                                                                        <i class="fas fa-pencil-alt icon-button"></i>
                                                                                                    </button>
                                                                                                }
                                                                                                <!-- User icon button -->
                                                                                                <button class="btn btn-info me-2" @onclick="() => ShowInterestedStudentsInProfessorEvent(professorevent.RNGForEventUploadedAsProfessor)" title="Ενδιαφερόμενοι Φοιτητές">
                                                                                                    <i class="fa-solid fa-graduation-cap icon-button"></i>
                                                                                                </button>
                                                                                                <button class="btn btn-info me-2" @onclick="() => ShowInterestedCompaniesInProfessorEvent(professorevent.RNGForEventUploadedAsProfessor)" title="Ενδιαφερόμενες Εταιρείες">
                                                                                                     <i class="fa-solid fa-industry icon-button"></i>
                                                                                                </button>
                                                                                            </td>
                                                                                        </tr>

                                                                                        @*--- SINEXIZW APO EDW AYRIO 21/1/2025*@
                                                                                        @if (selectedEventIdForStudentsWhenShowInterestForProfessorEvent == professorevent.RNGForEventUploadedAsProfessor)
                                                                                        {
                                                                                            @if (InterestedStudentsForProfessorEvent.Any())
                                                                                            {
                                                                                                <br/>
                                                                                                <tr>
                                                                                                    <td colspan="9" style="padding: 0;">
                                                                                                        <div style="display: flex; justify-content: space-between; align-items: center; height: 24px; line-height: 24px; width: 100%;">
                                                                                                            <i class="fa-solid fa-graduation-cap" style="font-size: 18px; color: #0d6efd;"></i>
                                                                                                            <label class="form-label" style="color: #0d6efd; font-weight: bold; font-size: 18px; margin: 0;">Λεπτομέρειες Ενδιαφερόμενων Φοιτητών</label>
                                                                                                            <i class="fa-solid fa-graduation-cap" style="font-size: 18px; color: #0d6efd;"></i>
                                                                                                        </div>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td colspan="6">
                                                                                                        <div class="table-responsive">

                                                                                                            <!-- Modern Download Button -->
                                                                                                            <button class="modern-button" @onclick="DownloadStudentListForInterestInProfessorEventAsProfessor">
                                                                                                                <i class="fas fa-download"></i> Λήψη Λίστας Ενδιαφερόμενων Φοιτητών
                                                                                                            </button>

                                                                                                            <table class="table table-striped">
                                                                                                                <thead>
                                                                                                                    <tr style="border: 1px solid darkblue;">
                                                                                                                        <th style="border: 1px solid black;">
                                                                                                                            <i class="fa-solid fa-user fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                                            Ονοματεπώνυμο
                                                                                                                        </th>
                                                                                                                        <th style="border: 1px solid darkblue;">
                                                                                                                            <i class="fa-solid fa-phone fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                                            Τηλέφωνο
                                                                                                                        </th>
                                                                                                                        <th style="border: 1px solid darkblue;">
                                                                                                                            <i class="fa-solid fa-envelope fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                                            Email
                                                                                                                        </th>
                                                                                                                        <th style="border: 1px solid darkblue;">
                                                                                                                            <i class="fa-solid fa-bus fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                                            Χρειάζεται Μεταφορά Προς/Από Εκδήλωση
                                                                                                                        </th>
                                                                                                                        <th style="border: 1px solid darkblue;">
                                                                                                                            <i class="fa-solid fa-map-marker-alt fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                                            Σημείο Μεταφοράς
                                                                                                                        </th>
                                                                                                                    </tr>
                                                                                                                </thead>
                                                                                                                    <tbody>
                                                                                                                        @if (studentDataCache == null)
                                                                                                                        {
                                                                                                                            <tr>
                                                                                                                                <td colspan="5" class="text-center">
                                                                                                                                    <div class="spinner-border text-primary" role="status">
                                                                                                                                        <span class="sr-only">Φόρτωση...</span>
                                                                                                                                    </div>
                                                                                                                                    <p>Φόρτωση δεδομένων φοιτητών...</p>
                                                                                                                                </td>
                                                                                                                            </tr>
                                                                                                                        }
                                                                                                                        else if (InterestedStudentsForProfessorEvent != null && InterestedStudentsForProfessorEvent.Any())
                                                                                                                        {
                                                                                                                            @foreach (var application in InterestedStudentsForProfessorEvent)
                                                                                                                            {
                                                                                                                                var student = studentDataCache.TryGetValue(application.StudentEmailShowInterestForEvent?.ToLower(), out var s) ? s : null;

                                                                                                                                <tr>
                                                                                                                                    <td>
                                                                                                                                        <a href="#" @onclick="() => ShowStudentDetailsAtProfessorEventInterest(application)">
                                                                                                                                            @(student != null ? $"{student.Name} {student.Surname}" : "Δε βρέθηκε")
                                                                                                                                        </a>
                                                                                                                                    </td>
                                                                                                                                    <td>
                                                                                                                                        <i class="fas fa-phone-alt"></i> @(student?.Telephone ?? "-")
                                                                                                                                    </td>
                                                                                                                                    <td>
                                                                                                                                        <i class="fas fa-envelope"></i> @application.StudentEmailShowInterestForEvent
                                                                                                                                    </td>
                                                                                                                                    <td>@application.StudentTransportNeedWhenShowInterestForProfessorEvent</td>
                                                                                                                                    <td>
                                                                                                                                        @if (application.StudentTransportNeedWhenShowInterestForProfessorEvent == "Όχι")
                                                                                                                                        {
                                                                                                                                            <span> - </span>
                                                                                                                                        }
                                                                                                                                        else if (!string.IsNullOrEmpty(application.StudentTransportChosenLocationWhenShowInterestForProfessorEvent))
                                                                                                                                        {
                                                                                                                                            <div class="d-flex align-items-center">
                                                                                                                                                <i class="fas fa-map-marker-alt text-danger mr-2"></i>
                                                                                                                                                <a href="https://www.google.com/maps/search/?api=1&query=@Uri.EscapeDataString(application.StudentTransportChosenLocationWhenShowInterestForProfessorEvent)"
                                                                                                                                                   target="_blank"
                                                                                                                                                   class="text-primary">
                                                                                                                                                    @application.StudentTransportChosenLocationWhenShowInterestForProfessorEvent
                                                                                                                                                </a>
                                                                                                                                            </div>
                                                                                                                                        }
                                                                                                                                        else
                                                                                                                                        {
                                                                                                                                            <span class="text-muted">N/A</span>
                                                                                                                                        }
                                                                                                                                    </td>
                                                                                                                                </tr>
                                                                                                                            }
                                                                                                                        }
                                                                                                                        else
                                                                                                                        {
                                                                                                                            <tr>
                                                                                                                                <td colspan="5" class="text-center text-danger">
                                                                                                                                    <strong>Καμία Εκδήλωση Ενδιαφέροντος από Φοιτητές ακόμη</strong>
                                                                                                                                </td>
                                                                                                                            </tr>
                                                                                                                        }
                                                                                                                    </tbody>
                                                                                                            </table>
                                                                                                        </div>
                                                                                                    </td>
                                                                                                </tr>
                                                                                            }

                                                                                            else
                                                                                            {
                                                                                                <tr>
                                                                                                    <td colspan="6" class="text-center">
                                                                                                        <strong>Δεν Υπάρχει Εκδήλωση Ενδιαφέροντος Ακόμη...</strong>
                                                                                                    </td>
                                                                                                </tr>
                                                                                            }
                                                                                        }
                                                                                        @if (selectedEventIdForCompaniesWhenShowInterestForProfessorEvent == professorevent.RNGForEventUploadedAsProfessor)
                                                                                        {
                                                                                            @if (filteredCompanyInterestForProfessorEvents.Any())
                                                                                            {
                                                                                                <br/>
                                                                                                <tr>
                                                                                                    <td colspan="9" style="padding: 0;">
                                                                                                        <div style="display: flex; justify-content: space-between; align-items: center; height: 24px; line-height: 24px; width: 100%;">
                                                                                                            <i class="fa-solid fa-industry" style="font-size: 18px; color: #0d6efd;"></i>
                                                                                                            <label class="form-label" style="color: #0d6efd; font-weight: bold; font-size: 18px; margin: 0;">Λεπτομέρειες Ενδιαφερόμενης Εταιρείας</label>
                                                                                                            <i class="fa-solid fa-industry" style="font-size: 18px; color: #0d6efd;"></i>
                                                                                                        </div>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td colspan="6">
                                                                                                        <div class="table-responsive">

                                                                                                            <!-- Modern Download Button -->
                                                                                                            <button class="modern-button" @onclick="DownloadCompanyListForInterestInProfessorEventAsProfessor">
                                                                                                                <i class="fas fa-download"></i> Λήψη Λίστας Ενδιαφερόμενων Eταιρειών
                                                                                                            </button>

                                                                                                            <table class="table table-striped">
                                                                                                                <thead>
                                                                                                                    <tr style="border: 1px solid #00008B;">
                                                                                                                        <th style="border: 1px solid #00008B;">
                                                                                                                            <i class="fa-solid fa-industry fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                                            Επωνυμία
                                                                                                                        </th>
                                                                                                                        <th style="border: 1px solid #00008B;">
                                                                                                                            <i class="fa-solid fa-phone fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                                            Τηλέφωνο
                                                                                                                        </th>
                                                                                                                        <th style="border: 1px solid #00008B;">
                                                                                                                            <i class="fa-solid fa-envelope fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                                            Email
                                                                                                                        </th>
                                                                                                                        <th style="border: 1px solid #00008B;">
                                                                                                                            <i class="fa-solid fa-users fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                                            Αριθμός Συμμετοχόντων
                                                                                                                        </th>
                                                                                                                        <th style="border: 1px solid #00008B;">
                                                                                                                            <i class="fa-solid fa-calendar fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                                                                            Ημερομηνία Δήλωσης
                                                                                                                        </th>
                                                                                                                    </tr>
                                                                                                                </thead>
                                                                                                                <tbody>
                                                                                                                    @foreach (var interest in filteredCompanyInterestForProfessorEvents)
                                                                                                                    {
                                                                                                                        var company = companyDataCache.TryGetValue(interest.CompanyEmailShowInterestForProfessorEvent, out var c) ? c : null;
                                                                                                                        <tr>
                                                                                                                            <td>
                                                                                                                                <a href="#" @onclick="() => ShowCompanyDetailsAtProfessorEventInterest(interest)">
                                                                                                                                    @(company?.CompanyName ?? "N/A")
                                                                                                                                </a>
                                                                                                                            </td>
                                                                                                                            <td>@(company?.CompanyTelephone ?? "N/A")</td>
                                                                                                                            <td>@interest.CompanyEmailShowInterestForProfessorEvent</td>
                                                                                                                            <td>@interest.CompanyNumberOfPeopleToShowUpWhenShowInterestForProfessorEvent</td>
                                                                                                                            <td>@interest.DateTimeCompanyShowInterestForProfessorEvent.ToString("dd/MM/yyyy HH:mm")</td>
                                                                                                                        </tr>
                                                                                                                    }
                                                                                                                </tbody>
                                                                                                            </table>
                                                                                                        </div>
                                                                                                    </td>
                                                                                                </tr>
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                <tr>
                                                                                                    <td colspan="6" class="text-center">
                                                                                                        <strong>Δεν Υπάρχουν Ενδιαφερόμενες Εταιρείες Ακόμη...</strong>
                                                                                                    </td>
                                                                                                </tr>
                                                                                            }
                                                                                        }


                                                                                    }
                                                                                }
                                                                                else
                                                                                {
                                                                                    <tr>
                                                                                        <td colspan="6" class="text-center">Δεν υπάρχουν Εκδηλώσεις Ακόμη</td>
                                                                                    </tr>
                                                                                }
                                                                            </tbody>
                                                                        </table>
                                                                            <div class="d-flex justify-content-center align-items-center mt-3 gap-1">
                                                                                <span class="pagination-item @(currentPage_ProfessorEvents == 1 ? "disabled" : "")"
                                                                                      @onclick="GoToFirstPage_ProfessorEvents">
                                                                                    &lt;&lt;
                                                                                </span>

                                                                                <span class="pagination-item @(currentPage_ProfessorEvents == 1 ? "disabled" : "")"
                                                                                      @onclick="PreviousPage_ProfessorEvents">
                                                                                    &lt;
                                                                                </span>

                                                                                @foreach (var pageNum in GetVisiblePages_ProfessorEvents())
                                                                                {
                                                                                    if (pageNum == -1)
                                                                                    {
                                                                                        <span class="pagination-ellipsis">...</span>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <span class="pagination-item @(pageNum == currentPage_ProfessorEvents ? "active" : "")"
                                                                                              @onclick="@(() => GoToPage_ProfessorEvents(pageNum))">
                                                                                            @pageNum
                                                                                        </span>
                                                                                    }
                                                                                }

                                                                                <span class="pagination-item @(currentPage_ProfessorEvents == totalPages_ProfessorEvents ? "disabled" : "")"
                                                                                      @onclick="NextPage_ProfessorEvents">
                                                                                    &gt;
                                                                                </span>

                                                                                <span class="pagination-item @(currentPage_ProfessorEvents == totalPages_ProfessorEvents ? "disabled" : "")"
                                                                                      @onclick="GoToLastPage_ProfessorEvents">
                                                                                    &gt;&gt;
                                                                                </span>

                                                                                <span class="ms-3">
                                                                                    Σελίδα @currentPage_ProfessorEvents από @totalPages_ProfessorEvents
                                                                                </span>
                                                                            </div>
                                                                            <br/>
                                                                            <br/>
                                                                    </div>
                                                                </div>
                                                            }


                                                            <!-- Modal for editing professor event -->
                                                            @if (isEditModalVisibleForEventsAsProfessor)
                                                            {
                                                                <div class="modal fade show" style="display: block;" tabindex="-1" role="dialog" aria-modal="true">
                                                                    <div class="modal-dialog" role="document">
                                                                        <div class="modal-content">
                                                                            <div class="modal-header">
                                                                                <h5 class="modal-title">Επεξεργασία Εκδήλωσης</h5>
                                                                                <button type="button" class="close" @onclick="CloseEditModalForProfessorEvent">
                                                                                    <span>&times;</span>
                                                                                </button>
                                                                            </div>
                                                                            <div class="modal-body">
                                                                                <div class="form-group">
                                                                                    <label for="title">Τίτλος Εκδήλωσης</label>
                                                                                    <input type="text" id="title" class="form-control" @bind="currentProfessorEvent.ProfessorEventTitle" />
                                                                                </div>
                                                                                <div class="form-group">
                                                                                    <label for="description">Περιγραφή Εκδήλωσης</label>
                                                                                    <textarea id="description" class="form-control" @bind="currentProfessorEvent.ProfessorEventDescription"></textarea>
                                                                                </div>
                                                                            </div>
                                                                            <div class="modal-footer">
                                                                                <button class="btn btn-primary" @onclick="() => UpdateProfessorEvent(currentProfessorEvent)">Αποθήκευση</button>
                                                                                <button class="btn btn-secondary" @onclick="CloseEditModalForProfessorEvent">Κλείσιμο</button>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            }                                                                                            

                                                           
                                                    </div>
@* ------------------------------------------------------------------------------------  ΕΚΔΗΛΩΣΕΙΣ ΤΩΝ ΚΑΘΗΓΗΤΩΝ (ΤΕΛΟΣ) PROFESSOR EVENTS TAB ---------------------------------------------------------------------------------------------------------*@   


                                                            @if (isModalVisibleToShowProfessorThesisAsProfessor)
                                                            {
                                                                <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0,0,0,0.5);">
                                                                    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
                                                                        <div class="modal-content">
                                                                            <div class="modal-header">
                                                                                <h5 class="modal-title" style="color: #4682B4;">
                                                                                    @currentProfessorThesis.ThesisTitle
                                                                                </h5>
                                                                                <button type="button" class="btn-close" @onclick="() => isModalVisibleToShowProfessorThesisAsProfessor = false" aria-label="Close"></button>
                                                                            </div>
                                                                            <div class="modal-body">
                                                                                <div class="form-group">
                                                                                    <label style="font-weight: bold;">Περιγραφή Πτυχιακής</label>
                                                                                    <textarea class="form-control" readonly style="background-color: #e9ecef;">
                                                                                        @((string.IsNullOrWhiteSpace(currentProfessorThesis.ThesisDescription) ? "Δεν έχει διευκρινιστεί" : currentProfessorThesis.ThesisDescription))
                                                                                    </textarea>
                                                                                </div>

                                                                                <div class="form-group">
                                                                                    <label style="font-weight: bold;">Τομείς Ενδιαφέροντος</label>
                                                                                    <textarea class="form-control" readonly style="background-color: #e9ecef;">
                                                                                        @((string.IsNullOrWhiteSpace(currentProfessorThesis.ThesisAreas) ? "Δεν έχει διευκρινιστεί" : currentProfessorThesis.ThesisAreas.Replace(",", Environment.NewLine)))
                                                                                    </textarea>
                                                                                </div>

                                                                                <div class="form-group">
                                                                                    <label style="font-weight: bold;">Απαιτούμενες Δεξιότητες</label>
                                                                                    <textarea class="form-control" readonly style="background-color: #e9ecef;">
                                                                                        @((string.IsNullOrWhiteSpace(currentProfessorThesis.ThesisSkills) ? "Δεν έχει διευκρινιστεί" : currentProfessorThesis.ThesisSkills.Replace(",", Environment.NewLine)))
                                                                                    </textarea>
                                                                                </div>

                                                                                <div class="form-group">
                                                                                    <label style="font-weight: bold;">Email Υπευθύνου</label>
                                                                                    <div class="form-control d-flex align-items-center" style="height: auto; background-color: #e9ecef;">
                                                                                        <i class="fas fa-envelope" style="color: #007bff; margin-right: 8px;"></i>
                                                                                        <span>@(string.IsNullOrWhiteSpace(currentProfessorThesis.ProfessorEmailUsedToUploadThesis) ? "Δεν έχει διευκρινιστεί" : currentProfessorThesis.ProfessorEmailUsedToUploadThesis)</span>
                                                                                    </div>
                                                                                </div>

                                                                                <div class="form-group">
                                                                                    <label style="font-weight: bold;">Ημερομηνία Ανάρτησης</label>
                                                                                    <div class="form-control d-flex align-items-center" style="height: auto; background-color: #e9ecef;">
                                                                                        <i class="far fa-calendar-alt" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                        <span>@currentProfessorThesis.ThesisUploadDateTime.ToShortDateString()</span>
                                                                                    </div>
                                                                                </div>

                                                                                <div class="form-group">
                                                                                    <label style="font-weight: bold;">Ξεκινάει</label>
                                                                                    <div class="form-control d-flex align-items-center" style="height: auto; background-color: #e9ecef;">
                                                                                        <i class="far fa-calendar-alt" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                        <span>@currentProfessorThesis.ThesisActivePeriod.ToShortDateString()</span>
                                                                                    </div>
                                                                                </div>

                                                                                <div class="form-group">
                                                                                    <label style="font-weight: bold;">Τμήμα Καθηγητή</label>
                                                                                    <div class="form-control d-flex align-items-center" style="height: auto; background-color: #e9ecef;">
                                                                                        <i class="fas fa-university" style="color: #28a745; margin-right: 8px;"></i>
                                                                                        <span>@(currentProfessorThesis.Professor?.ProfDepartment ?? "Δεν έχει διευκρινιστεί")</span>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="modal-footer">
                                                                                <button type="button" class="btn btn-secondary" @onclick="() => isModalVisibleToShowProfessorThesisAsProfessor = false">Κλείσιμο</button>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            }

                                                                @if (isModalVisibleToShowCompanyDetailsAtProfessorThesisInterest && currentCompanyDetails != null)
                                                                {
                                                                    <div id="companyDetailsModal" class="modal fade @(isModalVisibleToShowCompanyDetailsAtProfessorThesisInterest ? "show d-block" : "")" 
                                                                         tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                                                        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                                            <div class="modal-content">
                                                                                <div class="modal-header">
                                                                                    <h5 class="modal-title" style="color: #4682B4;">
                                                                                        @currentCompanyDetails.CompanyNameENG
                                                                                    </h5>
                                                                                    <button type="button" class="close" @onclick="() => isModalVisibleToShowCompanyDetailsAtProfessorThesisInterest = false">
                                                                                        <span aria-hidden="true">&times;</span>
                                                                                    </button>
                                                                                </div>
                                                                                <div class="modal-body">
                                                                                    <div class="form-group text-center">
                                                                                        @if (currentCompanyDetails.CompanyLogo != null)
                                                                                        {
                                                                                            <img src="data:image/png;base64,@Convert.ToBase64String(currentCompanyDetails.CompanyLogo)" 
                                                                                                 alt="Company Logo"
                                                                                                 class="rounded-circle img-fluid"
                                                                                                 style="max-width: 150px; max-height: 150px; object-fit: cover;" />
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <p>Δεν είναι διαθέσιμο</p>
                                                                                        }
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Σύντομη Ονομασία</strong></label>
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                            <i class="fas fa-tag" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                            <span class="flex-grow-1">
                                                                                                @(!string.IsNullOrWhiteSpace(currentCompanyDetails.CompanyShortName)
                                                                                                    ? currentCompanyDetails.CompanyShortName
                                                                                                    : "Δεν έχει Καθοριστεί")
                                                                                            </span>
                                                                                        </div>
                                                                                    </div>


                                                                                    <div class="form-group">
                                                                                        <label><strong>Τύπος Εταιρείας</strong></label>
                                                                                        <input type="text" class="form-control" value="@currentCompanyDetails.CompanyType" readonly />
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Email Εταιρείας</strong></label>
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                            <i class="fas fa-envelope" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                            <span class="flex-grow-1">@currentCompanyDetails.CompanyEmail</span>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Ιστοσελίδα Εταιρείας</strong></label>
                                                                                        @if (!string.IsNullOrWhiteSpace(currentCompanyDetails.CompanyWebsite))
                                                                                        {
                                                                                            <div class="form-control d-flex align-items-center" style="height: auto; cursor: pointer; color: #007bff;"
                                                                                                 @onclick="() => OpenUrl(currentCompanyDetails.CompanyWebsite)">
                                                                                                <i class="fa-solid fa-globe" style="margin-right: 8px;"></i>
                                                                                                <span class="flex-grow-1">@currentCompanyDetails.CompanyWebsite</span>
                                                                                            </div>
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <input type="text" class="form-control" value="Δεν υπάρχει" readonly />
                                                                                        }
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Περιγραφή Εταιρείας</strong></label>
                                                                                        <textarea class="form-control" rows="3" readonly>@currentCompanyDetails.CompanyDescription</textarea>
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Δραστηριότητα Εταιρείας</strong></label>
                                                                                        <input type="text" class="form-control" value="@currentCompanyDetails.CompanyActivity" readonly />
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Περιοχές Ενδιαφέροντος</strong></label>
                                                                                        <textarea class="form-control" rows="2" readonly>@currentCompanyDetails.CompanyAreas</textarea>
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Χώρα</strong></label>
                                                                                        <input type="text" class="form-control" value="@currentCompanyDetails.CompanyCountry" readonly />
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Περιφέρεια</strong></label>
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                            <i class="fa-solid fa-map" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                            <span class="flex-grow-1">@currentCompanyDetails.CompanyRegions</span>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Πόλη</strong></label>
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                            <i class="fa-solid fa-city" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                            <span class="flex-grow-1">@currentCompanyDetails.CompanyTown</span>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Διεύθυνση</strong></label>
                                                                                        <div class="form-control d-flex align-items-center mt-1" style="height: auto;">
                                                                                            <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                            <span @onclick="() => OpenMap(currentCompanyDetails.CompanyLocation)"
                                                                                                  style="color: #007bff; text-decoration: underline; cursor: pointer; word-break: break-word;">
                                                                                                @currentCompanyDetails.CompanyLocation
                                                                                            </span>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Ταχυδρομικός Κώδικας</strong></label>
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                            <i class="fa-solid fa-envelope-open-text" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                            <span class="flex-grow-1">@currentCompanyDetails.CompanyPC</span>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Τηλέφωνο Εταιρείας</strong></label>
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                            <i class="fa-solid fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                                            <span class="flex-grow-1">@currentCompanyDetails.CompanyTelephone</span>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Ιστοσελίδα Ανακοινώσεων</strong></label>
                                                                                        @if (!string.IsNullOrWhiteSpace(currentCompanyDetails.CompanyWebsiteAnnouncements))
                                                                                        {
                                                                                            <div class="form-control d-flex align-items-center" style="height: auto; cursor: pointer; color: #007bff;"
                                                                                                 @onclick="() => OpenUrl(currentCompanyDetails.CompanyWebsiteAnnouncements)">
                                                                                                <i class="fa-solid fa-globe" style="margin-right: 8px;"></i>
                                                                                                <span class="flex-grow-1">@currentCompanyDetails.CompanyWebsiteAnnouncements</span>
                                                                                            </div>
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <input type="text" class="form-control" value="Δεν υπάρχει" readonly />
                                                                                        }
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Ιστοσελίδα Θέσεων Εργασίας</strong></label>
                                                                                        @if (!string.IsNullOrWhiteSpace(currentCompanyDetails.CompanyWebsiteJobs))
                                                                                        {
                                                                                            <div class="form-control d-flex align-items-center" style="height: auto; cursor: pointer; color: #007bff;"
                                                                                                 @onclick="() => OpenUrl(currentCompanyDetails.CompanyWebsiteJobs)">
                                                                                                <i class="fa-solid fa-globe" style="margin-right: 8px;"></i>
                                                                                                <span class="flex-grow-1">@currentCompanyDetails.CompanyWebsiteJobs</span>
                                                                                            </div>
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <input type="text" class="form-control" value="Δεν υπάρχει" readonly />
                                                                                        }
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Υπεύθυνος Ανθρώπινου Δυναμικού</strong></label>
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                            <i class="fas fa-user-tie" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                            <span class="flex-grow-1">@currentCompanyDetails.CompanyHRName @currentCompanyDetails.CompanyHRSurname</span>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Email Υπεύθυνου</strong></label>
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                            <i class="fa-solid fa-envelope" style="color: #007bff; margin-right: 8px;"></i>
                                                                                            <span class="flex-grow-1">@currentCompanyDetails.CompanyHREmail</span>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Τηλέφωνο Υπεύθυνου</strong></label>
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                            <i class="fa-solid fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                                            <span class="flex-grow-1">@currentCompanyDetails.CompanyHRTelephone</span>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="modal-footer">
                                                                                    <button type="button" class="btn btn-secondary" @onclick="() => isModalVisibleToShowCompanyDetailsAtProfessorThesisInterest = false">
                                                                                        Κλείσιμο
                                                                                    </button>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                }

                                                                @if (isModalVisibleToShowStudentDetailsInNameAsHyperlinkForProfessorThesis && currentStudentDetails != null)
                                                                {
                                                                    <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                                                        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                                            <div class="modal-content">
                                                                                <div class="modal-header">
                                                                                    <h5 class="modal-title" style="color: #4682B4;">@currentStudentDetails.Name @currentStudentDetails.Surname</h5>
                                                                                    <button type="button" class="close" aria-label="Close" @onclick="() => isModalVisibleToShowStudentDetailsInNameAsHyperlinkForProfessorThesis = false">
                                                                                        <span aria-hidden="true">&times;</span>
                                                                                    </button>
                                                                                </div>
                                                                                <div class="modal-body">
                                                                                    <!-- Profile Picture -->
                                                                                    <div class="form-group text-center">
                                                                                        @if (currentStudentDetails.Image != null && currentStudentDetails.Image.Length > 0)
                                                                                        {
                                                                                            var base64Image = Convert.ToBase64String(currentStudentDetails.Image);
                                                                                            <img src="data:image/jpeg;base64,@base64Image" alt="Φωτογραφία Προφίλ Σπουδαστή" 
                                                                                                 style="max-width: 150px; max-height: 150px; border-radius: 50%; object-fit: cover;" />
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <p>Δεν υπάρχει φωτογραφία Προφίλ</p>
                                                                                        }
                                                                                    </div>

                                                                                    <!-- Student Details -->
                                                                                    <div class="form-group">
                                                                                        <label><strong>Αριθμός Μητρώου</strong></label>
                                                                                        <input type="text" class="form-control" value="@currentStudentDetails.RegNumber" readonly />
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label style="font-weight: bold;">Πανεπιστήμιο</label>
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                            <i class="fas fa-university" style="color: #007BFF; margin-right: 8px;"></i>
                                                                                            <span>@currentStudentDetails.University</span>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label style="font-weight: bold;">Τμήμα</label>
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                            <i class="fas fa-building" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                            <span>@currentStudentDetails.Department</span>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label style="font-weight: bold;">Επίπεδο Σπουδών</label>
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                            <i class="fas fa-graduation-cap" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                            <span>@currentStudentDetails.LevelOfDegree</span>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Τεχνικές Ικανότητες</strong></label>
                                                                                        <textarea class="form-control" rows="2" readonly>@currentStudentDetails.Keywords</textarea>
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Περιοχές Εξειδίκευσης</strong></label>
                                                                                        <textarea class="form-control" rows="2" readonly>@currentStudentDetails.AreasOfExpertise</textarea>
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label style="font-weight: bold;">Επικοινωνία</label>
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                            <i class="fas fa-envelope" style="color: #007BFF; margin-right: 8px;"></i>
                                                                                            <span>@currentStudentDetails.Email</span>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label style="font-weight: bold;">Τηλέφωνο</label>
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                            <i class="fas fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                                            <span>@currentStudentDetails.Telephone</span>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Περιφέρεια (Μόνιμης Διαμονής)</strong></label>
                                                                                        <input type="text" class="form-control" value="@currentStudentDetails.PermanentRegion" readonly />
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Πόλη (Μόνιμης Διαμονής)</strong></label>
                                                                                        <input type="text" class="form-control" value="@currentStudentDetails.PermanentTown" readonly />
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label style="font-weight: bold;">Διεύθυνση</label>
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                            <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                            @if (!string.IsNullOrEmpty(currentStudentDetails.PermanentAddress))
                                                                                            {
                                                                                                <a href="https://www.google.com/maps/search/?api=1&query=@Uri.EscapeDataString(currentStudentDetails.PermanentAddress)"
                                                                                                   target="_blank"
                                                                                                   style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                    @currentStudentDetails.PermanentAddress
                                                                                                </a>
                                                                                            }
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label style="font-weight: bold;">Προτιμώμενη Περιφέρεια</label>
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                            <i class="fas fa-map-marked-alt" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                            <span>@currentStudentDetails.PreferedRegions</span>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label style="font-weight: bold;">Προτιμώμενη Πόλη</label>
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                            <i class="fas fa-map-marker" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                            <span>@currentStudentDetails.PreferredTowns</span>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label style="font-weight: bold;">Διαθέτει Μέσο Μεταφοράς</label>
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto; 
                                                                                             @(currentStudentDetails.Transport == true ? "color: #28a745;" : "color: #dc3545;")">
                                                                                            <i class="fas fa-car" style="margin-right: 8px;"></i>
                                                                                            <span>@(currentStudentDetails.Transport == true ? "Ναι" : "Όχι")</span>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label style="font-weight: bold;">Κατάσταση Πρακτικής</label>
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                            <i class="fas fa-briefcase" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                            <span>@currentStudentDetails.InternshipStatus</span>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label style="font-weight: bold;">Κατάσταση Πτυχιακής</label>
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                            <i class="fas fa-file-alt" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                            <span>@currentStudentDetails.ThesisStatus</span>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label style="font-weight: bold;">Αναμενόμενη Ημερομηνία Αποφοίτησης</label>
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                            <i class="fas fa-calendar-alt" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                            <span>@currentStudentDetails.ExpectedGraduationDate.ToShortDateString()</span>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Ολοκληρωμένα ECTS</strong></label>
                                                                                        <input type="text" class="form-control" value="@currentStudentDetails.CompletedECTS" readonly />
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Έτος Σπουδών</strong></label>
                                                                                        <input type="text" class="form-control" value="@currentStudentDetails.StudyYear" readonly />
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label style="font-weight: bold;">LinkedIn Προφίλ</label>
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                            <i class="fab fa-linkedin" style="color: #0077b5; margin-right: 8px;"></i>
                                                                                            @if (!string.IsNullOrEmpty(currentStudentDetails.LinkedInProfile))
                                                                                            {
                                                                                                <a href="@currentStudentDetails.LinkedInProfile" target="_blank" 
                                                                                                   style="color: #0077b5; text-decoration: underline; word-break: break-word;">
                                                                                                    @currentStudentDetails.LinkedInProfile
                                                                                                </a>
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                <span style="color: #6c757d;">Δεν έχει οριστεί προφίλ LinkedIn ακόμη..</span>
                                                                                            }
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label style="font-weight: bold;">Προσωπική Ιστοσελίδα</label>
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                            <i class="fas fa-globe" style="color: #17a2b8; margin-right: 8px;"></i>
                                                                                            @if (!string.IsNullOrEmpty(currentStudentDetails.PersonalWebsite))
                                                                                            {
                                                                                                <a href="@currentStudentDetails.PersonalWebsite" target="_blank" 
                                                                                                   style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                    @currentStudentDetails.PersonalWebsite
                                                                                                </a>
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                <span style="color: #6c757d;">Δεν έχει οριστεί ιστοσελίδα ακόμη..</span>
                                                                                            }
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="modal-footer">
                                                                                    <button type="button" class="btn btn-secondary" @onclick="() => isModalVisibleToShowStudentDetailsInNameAsHyperlinkForProfessorThesis = false">Κλείσιμο</button>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                }




                                                               
                                                                @if(isExpandedModalVisibleToSeeCompanyDetailsAsProfessor && selectedCompanyToSeeDetailsOnExpandedInterestAsProfessor != null)
                                                                {
                                                                    <div id="companyDetailsModal" class="modal fade @(isExpandedModalVisibleToSeeCompanyDetailsAsProfessor ? "show d-block" : "")" 
                                                                         tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                                                        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                                            <div class="modal-content">
                                                                                <div class="modal-header">
                                                                                    <h5 class="modal-title" style="color: #4682B4;">
                                                                                        @selectedCompanyToSeeDetailsOnExpandedInterestAsProfessor.CompanyNameENG
                                                                                    </h5>
                                                                                    <button type="button" class="close" @onclick="() => isExpandedModalVisibleToSeeCompanyDetailsAsProfessor = false">
                                                                                        <span aria-hidden="true">&times;</span>
                                                                                    </button>
                                                                                </div>
                                                                                <div class="modal-body">
                                                                                    <div class="form-group text-center">
                                                                                        @if (selectedCompanyToSeeDetailsOnExpandedInterestAsProfessor.CompanyLogo != null)
                                                                                        {
                                                                                            <img src="data:image/png;base64,@Convert.ToBase64String(selectedCompanyToSeeDetailsOnExpandedInterestAsProfessor.CompanyLogo)" 
                                                                                                 alt="Company Logo"
                                                                                                 class="rounded-circle img-fluid"
                                                                                                 style="max-width: 150px; max-height: 150px; object-fit: cover;" />
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <p>Δεν είναι διαθέσιμο</p>
                                                                                        }
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Σύντομη Ονομασία</strong></label>
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                            <i class="fas fa-tag" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                            <span class="flex-grow-1">
                                                                                                @(!string.IsNullOrWhiteSpace(selectedCompanyToSeeDetailsOnExpandedInterestAsProfessor.CompanyShortName)
                                                                                                    ? selectedCompanyToSeeDetailsOnExpandedInterestAsProfessor.CompanyShortName
                                                                                                    : "Δεν έχει Καθοριστεί")
                                                                                            </span>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Τύπος Εταιρείας</strong></label>
                                                                                        <input type="text" class="form-control" value="@selectedCompanyToSeeDetailsOnExpandedInterestAsProfessor.CompanyType" readonly />
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Email Εταιρείας</strong></label>
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                            <i class="fas fa-envelope" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                            <span class="flex-grow-1">@selectedCompanyToSeeDetailsOnExpandedInterestAsProfessor.CompanyEmail</span>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Ιστοσελίδα Εταιρείας</strong></label>
                                                                                        @if (!string.IsNullOrWhiteSpace(selectedCompanyToSeeDetailsOnExpandedInterestAsProfessor.CompanyWebsite))
                                                                                        {
                                                                                            <div class="form-control d-flex align-items-center" style="height: auto; cursor: pointer; color: #007bff;"
                                                                                                 @onclick="() => OpenUrl(selectedCompanyToSeeDetailsOnExpandedInterestAsProfessor.CompanyWebsite)">
                                                                                                <i class="fa-solid fa-globe" style="margin-right: 8px;"></i>
                                                                                                <span class="flex-grow-1">@selectedCompanyToSeeDetailsOnExpandedInterestAsProfessor.CompanyWebsite</span>
                                                                                            </div>
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <input type="text" class="form-control" value="Δεν υπάρχει" readonly />
                                                                                        }
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Περιγραφή Εταιρείας</strong></label>
                                                                                        <textarea class="form-control" rows="3" readonly>@selectedCompanyToSeeDetailsOnExpandedInterestAsProfessor.CompanyDescription</textarea>
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Δραστηριότητα Εταιρείας</strong></label>
                                                                                        <input type="text" class="form-control" value="@selectedCompanyToSeeDetailsOnExpandedInterestAsProfessor.CompanyActivity" readonly />
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Περιοχές Ενδιαφέροντος</strong></label>
                                                                                        <textarea class="form-control" rows="2" readonly>@selectedCompanyToSeeDetailsOnExpandedInterestAsProfessor.CompanyAreas</textarea>
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Χώρα</strong></label>
                                                                                        <input type="text" class="form-control" value="@selectedCompanyToSeeDetailsOnExpandedInterestAsProfessor.CompanyCountry" readonly />
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Περιφέρεια</strong></label>
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                            <i class="fa-solid fa-map" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                            <span class="flex-grow-1">@selectedCompanyToSeeDetailsOnExpandedInterestAsProfessor.CompanyRegions</span>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Πόλη</strong></label>
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                            <i class="fa-solid fa-city" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                            <span class="flex-grow-1">@selectedCompanyToSeeDetailsOnExpandedInterestAsProfessor.CompanyTown</span>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Διεύθυνση</strong></label>
                                                                                        <div class="form-control d-flex align-items-center mt-1" style="height: auto;">
                                                                                            <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                            <span @onclick="() => OpenMap(selectedCompanyToSeeDetailsOnExpandedInterestAsProfessor.CompanyLocation)"
                                                                                                  style="color: #007bff; text-decoration: underline; cursor: pointer; word-break: break-word;">
                                                                                                @selectedCompanyToSeeDetailsOnExpandedInterestAsProfessor.CompanyLocation
                                                                                            </span>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Ταχυδρομικός Κώδικας</strong></label>
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                            <i class="fa-solid fa-envelope-open-text" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                            <span class="flex-grow-1">@selectedCompanyToSeeDetailsOnExpandedInterestAsProfessor.CompanyPC</span>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Τηλέφωνο Εταιρείας</strong></label>
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                            <i class="fa-solid fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                                            <span class="flex-grow-1">@selectedCompanyToSeeDetailsOnExpandedInterestAsProfessor.CompanyTelephone</span>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Ιστοσελίδα Ανακοινώσεων</strong></label>
                                                                                        @if (!string.IsNullOrWhiteSpace(selectedCompanyToSeeDetailsOnExpandedInterestAsProfessor.CompanyWebsiteAnnouncements))
                                                                                        {
                                                                                            <div class="form-control d-flex align-items-center" style="height: auto; cursor: pointer; color: #007bff;"
                                                                                                 @onclick="() => OpenUrl(selectedCompanyToSeeDetailsOnExpandedInterestAsProfessor.CompanyWebsiteAnnouncements)">
                                                                                                <i class="fa-solid fa-globe" style="margin-right: 8px;"></i>
                                                                                                <span class="flex-grow-1">@selectedCompanyToSeeDetailsOnExpandedInterestAsProfessor.CompanyWebsiteAnnouncements</span>
                                                                                            </div>
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <input type="text" class="form-control" value="Δεν υπάρχει" readonly />
                                                                                        }
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Ιστοσελίδα Θέσεων Εργασίας</strong></label>
                                                                                        @if (!string.IsNullOrWhiteSpace(selectedCompanyToSeeDetailsOnExpandedInterestAsProfessor.CompanyWebsiteJobs))
                                                                                        {
                                                                                            <div class="form-control d-flex align-items-center" style="height: auto; cursor: pointer; color: #007bff;"
                                                                                                 @onclick="() => OpenUrl(selectedCompanyToSeeDetailsOnExpandedInterestAsProfessor.CompanyWebsiteJobs)">
                                                                                                <i class="fa-solid fa-globe" style="margin-right: 8px;"></i>
                                                                                                <span class="flex-grow-1">@selectedCompanyToSeeDetailsOnExpandedInterestAsProfessor.CompanyWebsiteJobs</span>
                                                                                            </div>
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <input type="text" class="form-control" value="Δεν υπάρχει" readonly />
                                                                                        }
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Υπεύθυνος Ανθρώπινου Δυναμικού</strong></label>
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                            <i class="fas fa-user-tie" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                            <span class="flex-grow-1">@selectedCompanyToSeeDetailsOnExpandedInterestAsProfessor.CompanyHRName @selectedCompanyToSeeDetailsOnExpandedInterestAsProfessor.CompanyHRSurname</span>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Email Υπεύθυνου</strong></label>
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                            <i class="fa-solid fa-envelope" style="color: #007bff; margin-right: 8px;"></i>
                                                                                            <span class="flex-grow-1">@selectedCompanyToSeeDetailsOnExpandedInterestAsProfessor.CompanyHREmail</span>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label><strong>Τηλέφωνο Υπεύθυνου</strong></label>
                                                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                            <i class="fa-solid fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                                            <span class="flex-grow-1">@selectedCompanyToSeeDetailsOnExpandedInterestAsProfessor.CompanyHRTelephone</span>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="modal-footer">
                                                                                    <button type="button" class="btn btn-secondary" @onclick="() => isExpandedModalVisibleToSeeCompanyDetailsAsProfessor = false">
                                                                                        Κλείσιμο
                                                                                    </button>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                }
                                                                


@* ------------------------------------------------------------------------------------------ SEARCH STUDENTS AS PROFESSOR ---------------------------------------------------------------------------------------------------------------------------------------*@
                                                    <div class="tab-pane fade" id="professorsearchstudent" role="tabpanel" aria-labelledby="professorsearchstudent-tab">
                                                        <div class="mb-3 row-dark-gray">
                                                            <div class="d-flex justify-content-between align-items-center">
                                                                <label class="form-label" style="color: #FFF8DC;">• Αναζήτηση Φοιτητή •</label>
                                                                <button class="btn btn-link" @onclick="ToggleFormVisibilityForSearchStudentAsProfessor">
                                                                    @if (isProfessorSearchStudentFormVisible)
                                                                    {
                                                                        <span>&#8722;</span> <!-- Minus sign -->
                                                                    }
                                                                    else
                                                                    {
                                                                        <span>&#43;</span> <!-- Plus sign -->
                                                                    }
                                                                </button>
                                                            </div>
                                                        </div>

                                                        @if (isProfessorSearchStudentFormVisible)
                                                        {
                                                            <div class="row">
                                                                <!-- Email Field -->
                                                                <div class="col-md-4">
                                                                    <label for="searchEmailAsProfessorToFindStudent" style="font-weight: bold;">Email</label>
                                                                    <input 
                                                                        type="text" 
                                                                        id="searchEmailAsProfessorToFindStudent"
                                                                        class="form-control" 
                                                                        placeholder="Αναζήτηση με Email" 
                                                                        @bind="searchEmailAsProfessorToFindStudent" />
                                                                </div>

                                                                <!-- Name Field -->
                                                                <div class="col-md-4">
                                                                    <label for="searchNameAsProfessorToFindStudent" style="font-weight: bold;">Όνομα</label>
                                                                    <input 
                                                                        type="text" 
                                                                        id="searchNameAsProfessorToFindStudent"
                                                                        class="form-control" 
                                                                        placeholder="Αναζήτηση με Όνομα" 
                                                                        @bind="searchNameAsProfessorToFindStudent" />
                                                                </div>

                                                                <!-- Surname Field -->
                                                                <div class="col-md-4">
                                                                    <label for="searchSurnameAsProfessorToFindStudent" style="font-weight: bold;">Επώνυμο</label>
                                                                    <input 
                                                                        type="text" 
                                                                        id="searchSurnameAsProfessorToFindStudent"
                                                                        class="form-control" 
                                                                        placeholder="Αναζήτηση με Επώνυμο" 
                                                                        @bind="searchSurnameAsProfessorToFindStudent" />
                                                                </div>

                                                                <!-- Registration Number Field -->
                                                                <div class="col-md-4">
                                                                    <label for="searchRegNumberAsProfessorToFindStudent" style="font-weight: bold;">Αριθμός Μητρώου</label>
                                                                    <input 
                                                                        type="text" 
                                                                        id="searchRegNumberAsProfessorToFindStudent"
                                                                        class="form-control" 
                                                                        placeholder="Αναζήτηση με Αριθμό Μητρώου" 
                                                                        @bind="searchRegNumberAsProfessorToFindStudent" />
                                                                </div>

                                                                <!-- Search Student by School (Professor) -->
                                                                <div class="col-md-4">
                                                                    <label for="searchSchoolAsProfessorToFindStudent" style="font-weight: bold;">Σχολή</label>
                                                                    <div class="input-group">
                                                                        <select class="form-control" 
                                                                                value="@searchSchoolAsProfessorToFindStudent"
                                                                                @onchange="OnStudentSchoolChangedAsProfessor">
                                                                            <option value=""> - Επιλέξτε Σχολή - </option>
                                                                            @foreach (var school in researchGroupSchools)
                                                                            {
                                                                                <option value="@school">@school</option>
                                                                            }
                                                                        </select>
                                                                        <div class="input-group-append">
                                                                            <span class="input-group-text">
                                                                                <i class="fas fa-chevron-down"></i>
                                                                            </span>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                                <!-- Search Student by Department (Professor) -->
                                                                <div class="col-md-4">
                                                                    <label for="searchDepartmentAsProfessorToFindStudent" style="font-weight: bold;">Τμήμα Πανεπιστημίου</label>
                                                                    <div class="input-group">
                                                                        <select class="form-control" 
                                                                                @bind="searchDepartmentAsProfessorToFindStudent"
                                                                                disabled="@string.IsNullOrEmpty(searchSchoolAsProfessorToFindStudent)">
                                                                            <option value=""> - Επιλέξτε Τμήμα - </option>
                                                                            @if (string.IsNullOrEmpty(searchSchoolAsProfessorToFindStudent))
                                                                            {
                                                                                <!-- Show all departments when no school is selected -->
                                                                                @foreach (var department in GetAllStudentDepartments())
                                                                                {
                                                                                    <option value="@department">@department</option>
                                                                                }
                                                                            }
                                                                            else
                                                                            {
                                                                                <!-- Show only departments from selected school -->
                                                                                @foreach (var department in filteredStudentDepartmentsAsProfessor)
                                                                                {
                                                                                    <option value="@department">@department</option>
                                                                                }
                                                                            }
                                                                        </select>
                                                                        <div class="input-group-append">
                                                                            <span class="input-group-text">
                                                                                <i class="fas fa-chevron-down"></i>
                                                                            </span>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                                <!-- Areas of Expertise Container -->
                                                                <div class="col-md-4 position-relative">
                                                                    <label for="searchAreasOfExpertiseAsProfessorToFindStudent" style="font-weight: bold;">Περιοχές Εξειδίκευσης</label>
                                                                    <input 
                                                                        type="text" 
                                                                        id="searchAreasOfExpertiseAsProfessorToFindStudent"
                                                                        class="form-control" 
                                                                        placeholder="Αναζήτηση με Περιοχές Εξειδίκευσης" 
                                                                        @bind="searchAreasOfExpertiseAsProfessorToFindStudent" 
                                                                        @oninput="HandleAreasOfExpertiseInput" />

                                                                    <ul class="list-group position-absolute" 
                                                                        style="z-index: 100; width: 100%; max-height: 150px; overflow-y: auto;" 
                                                                        hidden="@(!areasOfExpertiseSuggestions.Any())">
                                                                        @foreach (var suggestion in areasOfExpertiseSuggestions)
                                                                        {
                                                                            <li class="list-group-item list-group-item-action" 
                                                                                @onclick="() => SelectAreasOfExpertiseSuggestion(suggestion)">
                                                                                @suggestion
                                                                            </li>
                                                                        }
                                                                    </ul>

                                                                    <div class="mt-3 selected-areas-container">
                                                                        @if (selectedAreasOfExpertise.Any())
                                                                        {
                                                                            <ul class="list-group selected-areas-list">
                                                                                @foreach (var area in selectedAreasOfExpertise)
                                                                                {
                                                                                    <li class="list-group-item d-flex justify-content-between align-items-center">
                                                                                        @area
                                                                                        <button class="btn btn-danger btn-sm" @onclick="() => RemoveSelectedAreaOfExpertise(area)">
                                                                                            <i class="fas fa-times"></i>
                                                                                        </button>
                                                                                    </li>
                                                                                }
                                                                            </ul>
                                                                        }
                                                                    </div>
                                                                </div>

                                                                <!-- Keywords (Skills) Container -->
                                                                <div class="col-md-4 position-relative">
                                                                    <label for="searchKeywordsAsProfessorToFindStudent" style="font-weight: bold;">Ικανότητες</label>
                                                                    <input 
                                                                        type="text" 
                                                                        id="searchKeywordsAsProfessorToFindStudent"
                                                                        class="form-control" 
                                                                        placeholder="Αναζήτηση με Εξειδικεύσεις" 
                                                                        @bind="searchKeywordsAsProfessorToFindStudent" 
                                                                        @oninput="HandleKeywordsInput" />

                                                                    <ul class="list-group position-absolute" 
                                                                        style="z-index: 100; width: 100%; max-height: 150px; overflow-y: auto;" 
                                                                        hidden="@(!keywordsSuggestions.Any())">
                                                                        @foreach (var suggestion in keywordsSuggestions)
                                                                        {
                                                                            <li class="list-group-item list-group-item-action" 
                                                                                @onclick="() => SelectKeywordsSuggestion(suggestion)">
                                                                                @suggestion
                                                                            </li>
                                                                        }
                                                                    </ul>

                                                                    <div class="mt-3 selected-keywords-container">
                                                                        @if (selectedKeywords.Any())
                                                                        {
                                                                            <ul class="list-group selected-keywords-list">
                                                                                @foreach (var keyword in selectedKeywords)
                                                                                {
                                                                                    <li class="list-group-item d-flex justify-content-between align-items-center">
                                                                                        @keyword
                                                                                        <button class="btn btn-danger btn-sm" @onclick="() => RemoveKeyword(keyword)">
                                                                                            <i class="fas fa-times"></i>
                                                                                        </button>
                                                                                    </li>
                                                                                }
                                                                            </ul>
                                                                        }
                                                                    </div>
                                                                </div>

                                                                <div class="col-md-4 text-end mt-3">
                                                                        <!-- Search Button -->
                                                                        <button 
                                                                            class="btn me-2" 
                                                                            style="background-color: lightblue; color: black;" 
                                                                            @onclick="SearchStudentsAsProfessorToFindStudent" 
                                                                            title="Αναζήτηση Φοιτητή">
                                                                            <i class="fas fa-search"></i>
                                                                        </button>

                                                                        <!-- Clear Button -->
                                                                        <button 
                                                                            class="btn" 
                                                                            style="background-color: orange; color: black;" 
                                                                            @onclick="ClearSearchFieldsAsProfessorToFindStudent" 
                                                                            title="Εκκαθάριση Πεδιών και Πίνακα Αποτελεσμάτων" 
                                                                            aria-label="Clear">
                                                                            <i class="fas fa-times"></i>
                                                                        </button>
                                                                </div>
                                                            </div>
                                                        }


                                                        @if (searchResultsAsProfessorToFindStudent != null && searchResultsAsProfessorToFindStudent.Any())
                                                        {
                                                            <div class="row mb-3">
                                                                <div class="col-md-2">
                                                                    <label style="color: #4682b4; font-weight: bold; font-size: 15px; display: block;">Αποτελέσματα ανά Σελίδα</label>
                                                                    <div class="input-group" style="max-width: 65px;">
                                                                        <select class="form-control form-control-sm" 
                                                                                @onchange="OnPageSizeChangeForStudentSearch" 
                                                                                aria-label="Items per page">
                                                                            @foreach (var option in studentSearchPageSizeOptions)
                                                                            {
                                                                                <option value="@option" selected="@(StudentSearchPerPage == option)">@option</option>
                                                                            }
                                                                        </select>
                                                                        <div class="input-group-append">
                                                                            <span class="input-group-text">
                                                                                <i class="fas fa-chevron-down"></i>
                                                                            </span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <table class="table mt-4">
                                                                <thead>
                                                                    <td colspan="9" style="padding: 0;">
                                                                            <div style="display: flex; justify-content: space-between; align-items: center; height: 24px; line-height: 24px; width: 100%;">
                                                                                <i class="fa-solid fa-magnifying-glass" style="font-size: 18px; color: #0d6efd  ;"></i>
                                                                                <label class="form-label" style="color: #0d6efd ; font-weight: bold; font-size: 18px; margin: 0;">Αποτέλεσμα Αναζήτησης</label>
                                                                                <i class="fa-solid fa-magnifying-glass" style="font-size: 18px; color: #0d6efd  ;"></i>
                                                                            </div>
                                                                        </td>
                                                                    <tr style="background-color: lightgray; border: 2px solid black;">
                                                                        <th style="border: 2px solid black;">
                                                                            <i class="fa-solid fa-signature fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                            Όνομα
                                                                        </th>
                                                                        <th style="border: 2px solid black;">
                                                                            <i class="fa-solid fa-signature fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                            Επώνυμο
                                                                        </th>
                                                                        <th style="border: 2px solid black;">
                                                                            <i class="fa-solid fa-building fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                            Τμήμα
                                                                        </th>
                                                                        <th style="border: 2px solid black;">
                                                                            <i class="fa-solid fa-envelope fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                            Ηλ. Ταχυδρομείο
                                                                        </th>
                                                                        <th style="border: 2px solid black;">
                                                                            <i class="fa-solid fa-phone fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                            Τηλέφωνο
                                                                        </th>
                                                                        <th style="border: 2px solid black;">
                                                                            <i class="fa-solid fa-circle-info fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                            Επισκόπηση
                                                                        </th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    @foreach (var student in GetPaginatedStudentSearchResults())
                                                                    {
                                                                        
                                                                        <tr>
                                                                            <td>@student.Name</td>
                                                                            <td>@student.Surname</td>
                                                                            <td>@student.Department</td>
                                                                            <td>
                                                                                @student.Email
                                                                                <a href="mailto:@student.Email" title="Αποστολή Email">
                                                                                    <i class="fas fa-envelope"></i>
                                                                                </a>
                                                                            </td>
                                                                            <td>
                                                                                @(student.PhoneVisibility ? student.Telephone : "N/A")
                                                                                <span class="ml-2">
                                                                                    <i class="fas fa-phone"></i>
                                                                                </span>
                                                                            </td>
                                                                           <td class="text-center align-middle">
                                                                                <i class="fas fa-eye text-primary" style="cursor: pointer;" @onclick="() => ShowStudentDetailsWhenSearchAsProfessor(student)" title="Προβολή λεπτομερειών"></i>
                                                                            </td>
                                                                        </tr>
                                                                    }
                                                                </tbody>
                                                            </table>
                                                            <!-- Pagination Controls -->
                                                            <div class="d-flex justify-content-center align-items-center mt-3 gap-1">
                                                                <span class="pagination-item @(currentPage_StudentSearch == 1 ? "disabled" : "")"
                                                                      @onclick="GoToFirstPage_StudentSearch">
                                                                    &lt;&lt;
                                                                </span>

                                                                <span class="pagination-item @(currentPage_StudentSearch == 1 ? "disabled" : "")"
                                                                      @onclick="PreviousPage_StudentSearch">
                                                                    &lt;
                                                                </span>

                                                                @foreach (var pageNum in GetVisiblePages_StudentSearch())
                                                                {
                                                                    if (pageNum == -1)
                                                                    {
                                                                        <span class="pagination-ellipsis">...</span>
                                                                    }
                                                                    else
                                                                    {
                                                                        <span class="pagination-item @(pageNum == currentPage_StudentSearch ? "active" : "")"
                                                                              @onclick="@(() => GoToPage_StudentSearch(pageNum))">
                                                                            @pageNum
                                                                        </span>
                                                                    }
                                                                }

                                                                <span class="pagination-item @(currentPage_StudentSearch == totalPages_StudentSearch ? "disabled" : "")"
                                                                      @onclick="NextPage_StudentSearch">
                                                                    &gt;
                                                                </span>

                                                                <span class="pagination-item @(currentPage_StudentSearch == totalPages_StudentSearch ? "disabled" : "")"
                                                                      @onclick="GoToLastPage_StudentSearch">
                                                                    &gt;&gt;
                                                                </span>

                                                                <span class="ms-3">
                                                                    Σελίδα @currentPage_StudentSearch από @totalPages_StudentSearch
                                                                </span>
                                                            </div>
                                                            <br/>
                                                        }
                                                        else if (searchResultsAsProfessorToFindStudent != null)
                                                        {
                                                            <div class="alert alert-warning d-flex align-items-center" role="alert">
                                                                 <i class="fas fa-exclamation-triangle me-2"></i>
                                                                 <div>
                                                                     Δεν βρέθηκε κάποιο αποτέλεσμα που να πληρεί τα κριτήρια της Αναζήτησης σας.
                                                                 </div>
                                                            </div>
                                                        }
                                                    </div>

                                                    @*EMEINE AKOMA AYTO TO MODAL 26/5*@
                                                    @if (showStudentDetailsModal && selectedStudent != null)
                                                    {
                                                        <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                                            <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                                <div class="modal-content">
                                                                    <div class="modal-header">
                                                                        <h5 class="modal-title" style="color: #4682B4;">@selectedStudent.Name @selectedStudent.Surname</h5>
                                                                        <button type="button" class="close" aria-label="Close" @onclick="CloseStudentDetailsModalWhenSearchAsProfessor">
                                                                            <span aria-hidden="true">&times;</span>
                                                                        </button>
                                                                    </div>
                                                                    <div class="modal-body">
                                                                        <!-- Profile Picture -->
                                                                        <div class="form-group text-center">
                                                                            @if (selectedStudent.Image != null && selectedStudent.Image.Length > 0)
                                                                            {
                                                                                var base64Image = Convert.ToBase64String(selectedStudent.Image);
                                                                                <img src="data:image/jpeg;base64,@base64Image" alt="Φωτογραφία Προφίλ Σπουδαστή" 
                                                                                     style="max-width: 150px; max-height: 150px; border-radius: 50%; object-fit: cover;" />
                                                                            }
                                                                            else
                                                                            {
                                                                                <p>Δεν υπάρχει φωτογραφία Προφίλ</p>
                                                                            }
                                                                        </div>

                                                                        <!-- Student Details -->
                                                                        <div class="form-group">
                                                                            <label><strong>Αριθμός Μητρώου</strong></label>
                                                                            <input type="text" class="form-control" value="@selectedStudent.RegNumber" readonly />
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Κατηγορία Σπουδών</label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fas fa-graduation-cap" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                <span>@selectedStudent.LevelOfDegree</span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Πανεπιστήμιο</label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fas fa-university" style="color: #007BFF; margin-right: 8px;"></i>
                                                                                <span>@selectedStudent.University</span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Τμήμα</label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fas fa-building" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                <span>@selectedStudent.Department</span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label><strong>Έτος Σπουδών</strong></label>
                                                                            <input type="text" class="form-control" value="@selectedStudent.StudyYear" readonly />
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Ημερομηνία Εγγραφής</label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fas fa-calendar-day" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                <span>@selectedStudent.EnrollmentDate</span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Επικοινωνία</label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fas fa-envelope" style="color: #007BFF; margin-right: 8px;"></i>
                                                                                <span>@selectedStudent.Email</span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Τηλέφωνο</label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fas fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                                <span>@(selectedStudent.PhoneVisibility ? selectedStudent.Telephone : "N/A")</span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Κατάσταση Πρακτικής</label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fas fa-briefcase" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                <span>@selectedStudent.InternshipStatus</span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Κατάσταση Πτυχιακής</label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fas fa-file-alt" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                <span>@selectedStudent.ThesisStatus</span>
                                                                            </div>
                                                                        </div>
                                                                       
                                                                        <div class="form-group">
                                                                            <label><strong>Περιοχές Ενδιαφέροντος</strong></label>
                                                                            <textarea class="form-control" rows="3" readonly>@selectedStudent.AreasOfExpertise</textarea>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label><strong>Εξειδίκευση</strong></label>
                                                                            <textarea class="form-control" rows="3" readonly>@selectedStudent.Keywords</textarea>
                                                                        </div>

                                                                        <!-- Address Section -->
                                                                        <div class="form-group">
                                                                            <label><strong>Περιφέρεια (Μόνιμης Διαμονής)</strong></label>
                                                                            <input type="text" class="form-control" value="@selectedStudent.PermanentRegion" readonly />
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label><strong>Πόλη (Μόνιμης Διαμονής)</strong></label>
                                                                            <input type="text" class="form-control" value="@selectedStudent.PermanentTown" readonly />
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Διεύθυνση</label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                @if (!string.IsNullOrEmpty(selectedStudent.PermanentAddress))
                                                                                {
                                                                                    <a href="https://www.google.com/maps/search/?api=1&query=@Uri.EscapeDataString(selectedStudent.PermanentAddress)"
                                                                                       target="_blank"
                                                                                       style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                        @selectedStudent.PermanentAddress
                                                                                    </a>
                                                                                }
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Διαθέτει Μέσο Μεταφοράς</label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto; 
                                                                                 @(selectedStudent.Transport == true ? "color: #28a745;" : "color: #dc3545;")">
                                                                                <i class="fas fa-car" style="margin-right: 8px;"></i>
                                                                                <span>@(selectedStudent.Transport == true ? "Ναι" : "Όχι")</span>
                                                                            </div>
                                                                        </div>

                                                                        <!-- Social Links -->
                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">LinkedIn Προφίλ</label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                <i class="fab fa-linkedin" style="color: #0077b5; margin-right: 8px;"></i>
                                                                                @if (!string.IsNullOrEmpty(selectedStudent.LinkedInProfile))
                                                                                {
                                                                                    <a href="@selectedStudent.LinkedInProfile" target="_blank" 
                                                                                       style="color: #0077b5; text-decoration: underline; word-break: break-word;">
                                                                                        @selectedStudent.LinkedInProfile
                                                                                    </a>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <span style="color: #6c757d;">Δεν έχει οριστεί προφίλ LinkedIn ακόμη..</span>
                                                                                }
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Προσωπική Ιστοσελίδα</label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                <i class="fas fa-globe" style="color: #17a2b8; margin-right: 8px;"></i>
                                                                                @if (!string.IsNullOrEmpty(selectedStudent.PersonalWebsite))
                                                                                {
                                                                                    <a href="@selectedStudent.PersonalWebsite" target="_blank" 
                                                                                       style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                        @selectedStudent.PersonalWebsite
                                                                                    </a>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <span style="color: #6c757d;">Δεν έχει οριστεί ιστοσελίδα ακόμη..</span>
                                                                                }
                                                                            </div>
                                                                        </div>
                                                                       
                                                                    </div>
                                                                    <div class="modal-footer">
                                                                        <button type="button" class="btn btn-secondary" @onclick="CloseStudentDetailsModalWhenSearchAsProfessor">Κλείσιμο</button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    }


                                                     @*SEARCH COMPANIES AS PROFESSOR*@
                                                    <div class="tab-pane fade" id="professorsearchcompany" role="tabpanel" aria-labelledby="professorsearchcompany-tab">
                                                        <div class="mb-3 row-dark-gray">
                                                            <div class="d-flex justify-content-between align-items-center">
                                                                <label class="form-label" style="color: #FFF8DC;">• Αναζήτηση Εταιρείας •</label>
                                                                <button class="btn btn-link" @onclick="ToggleFormVisibilityForSearchCompanyAsProfessor">
                                                                    @if (isProfessorSearchCompanyFormVisible)
                                                                    {
                                                                        <span>&#8722;</span> <!-- Minus sign -->
                                                                    }
                                                                    else
                                                                    {
                                                                        <span>&#43;</span> <!-- Plus sign -->
                                                                    }
                                                                </button>
                                                            </div>
                                                        </div>

                                                        @if (isProfessorSearchCompanyFormVisible)
                                                        {
                                                            <div class="row mb-3">
                                                                 <div class="col-md-4">
                                                                    <label for="searchCompanyEmailAsProfessor"><strong>Email</strong></label>
                                                                    <input type="text" class="form-control" placeholder="Αναζήτηση με Email" @bind="searchCompanyEmailAsProfessorToFindCompany" />
                                                                </div>
                                                                <div class="col-md-4 position-relative">
                                                                    <label for="searchCompanyNameAsProfessor"><strong>Όνομα Εταιρείας (ENG)</strong></label>
                                                                    <input 
                                                                        type="text" 
                                                                        id="searchCompanyNameAsProfessor"
                                                                        class="form-control" 
                                                                        placeholder="Αναζήτηση με όνομα" 
                                                                        @bind="searchCompanyNameENGAsProfessorToFindCompany" 
                                                                        @oninput="HandleCompanyInput" />

                                                                    <!-- Suggestions dropdown -->
                                                                    <ul class="list-group position-absolute" 
                                                                        style="z-index: 100; width: 100%; max-height: 150px; overflow-y: auto;" 
                                                                        hidden="@(!companyNameSuggestions.Any())">
                                                                        @foreach (var suggestion in companyNameSuggestions)
                                                                        {
                                                                            <li class="list-group-item list-group-item-action" 
                                                                                @onclick="() => SelectCompanyNameSuggestion(suggestion)">
                                                                                @suggestion
                                                                            </li>
                                                                        }
                                                                    </ul>
                                                                </div>
                                                                <div class="col-md-4">
                                                                    <label for="searchCompanyTypeAsProfessor" style="font-weight: bold;">Τύπος Εταιρείας</label>
                                                                    <div class="input-group">
                                                                        <select 
                                                                            id="searchCompanyTypeAsProfessor" 
                                                                            class="form-control" 
                                                                            @bind="searchCompanyTypeAsProfessorToFindCompany">
                                                                            <option value=""> - Επιλέξτε Τύπο - </option>
                                                                            @foreach (var type in ForeasType)
                                                                            {
                                                                                <option value="@type">@type</option>
                                                                            }
                                                                        </select>
                                                                        <div class="input-group-append">
                                                                            <span class="input-group-text">
                                                                                <i class="fas fa-chevron-down"></i>
                                                                            </span>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                                <div class="col-md-4">
                                                                    <label for="searchCompanyActivityAsProfessor"><strong>Δραστηριότητα Εταιρείας</strong></label>
                                                                    <input type="text" class="form-control" placeholder="Αναζήτηση με δραστηριότητα" @bind="searchCompanyActivityrAsProfessorToFindCompany" />
                                                                </div>

                                                                <div class="col-md-4">
                                                                    <label for="searchCompanyTownAsProfessor" style="font-weight: bold;">Πόλη</label>
                                                                    <div class="input-group">
                                                                        <select id="searchCompanyTownAsProfessor" 
                                                                                class="form-control" 
                                                                                @bind="searchCompanyTownAsProfessorToFindCompany">
                                                                            <option value=""> - Επιλέξτε Πόλη - </option>
                                                                            @foreach (var region in Regions)
                                                                            {
                                                                                <optgroup label="@region">
                                                                                    @foreach (var town in RegionToTownsMap[region])
                                                                                    {
                                                                                        <option value="@town">@town</option>
                                                                                    }
                                                                                </optgroup>
                                                                            }
                                                                        </select>
                                                                        <div class="input-group-append">
                                                                            <span class="input-group-text">
                                                                                <i class="fas fa-chevron-down"></i>
                                                                            </span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <!-- Areas of Interest Container -->
                                                                <div class="col-md-4 position-relative">
                                                                    <label for="searchCompanyAreasAsProfessorToFindCompany" style="font-weight: bold;">Περιοχές Ενδιαφέροντος</label>
                                                                    <input 
                                                                        type="text"
                                                                        class="form-control"
                                                                        placeholder="Αναζήτηση με Περιοχές"
                                                                        @bind="searchCompanyAreasAsProfessorToFindCompany"
                                                                        @oninput="HandleAreasOfInterestInput_WhenSearchForCompanyAsProfessor" />


                                                                    <ul class="list-group position-absolute" 
                                                                        style="z-index: 100; width: 100%; max-height: 150px; overflow-y: auto;" 
                                                                        hidden="@(!areasOfInterestSuggestions.Any())">
                                                                        @foreach (var suggestion in areasOfInterestSuggestions)
                                                                        {
                                                                            <li class="list-group-item list-group-item-action" 
                                                                                @onclick="() => SelectAreasOfInterestSuggestion_WhenSearchForCompanyAsProfessor(suggestion)">
                                                                                @suggestion
                                                                            </li>
                                                                        }
                                                                    </ul>

                                                                    <div class="mt-3 selected-areas-container">
                                                                        @if (selectedAreasOfInterest.Any())
                                                                        {
                                                                            <ul class="list-group selected-areas-list">
                                                                                @foreach (var area in selectedAreasOfInterest)
                                                                                {
                                                                                    <li class="list-group-item d-flex justify-content-between align-items-center">
                                                                                        @area
                                                                                        <button class="btn btn-danger btn-sm" @onclick="() => RemoveSelectedAreaOfInterest_WhenSearchForCompanyAsProfessor(area)">
                                                                                            <i class="fas fa-times"></i>
                                                                                        </button>
                                                                                    </li>
                                                                                }
                                                                            </ul>
                                                                        }
                                                                    </div>
                                                                </div>


                                                                <br/>
                                                                <div class="col-md-4">
                                                                    <label for="searchCompanyDesiredSkillsAsProfessor"><strong>Επιθυμητές Δεξιότητες</strong></label>
                                                                    <input type="text" class="form-control" placeholder="Αναζήτηση με δεξιότητες" @bind="searchCompanyDesiredSkillsAsProfessorToFindCompany" />
                                                                </div>

                                                                <div class="col-md-4 text-end mt-3">
                                                                    <!-- Search Button -->
                                                                    <button 
                                                                        class="btn me-2" 
                                                                        style="background-color: lightblue; color: black;" 
                                                                        @onclick="SearchCompaniesAsProfessor" 
                                                                        title="Αναζήτηση Εταιρείας">
                                                                        <i class="fas fa-search"></i>
                                                                    </button>

                                                                    <!-- Clear Button -->
                                                                    <button 
                                                                        class="btn" 
                                                                        style="background-color: orange; color: black;" 
                                                                        @onclick="ClearSearchFieldsAsProfessorToFindCompany" 
                                                                        title="Εκκαθάριση Πεδιών και Πίνακα Αποτελεσμάτων" 
                                                                        aria-label="Clear">
                                                                        <i class="fas fa-times"></i>
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        }


                                                        @if (searchResultsAsProfessorToFindCompany != null && searchResultsAsProfessorToFindCompany.Any())
                                                        {
                                                           <div class="row mb-3">
                                                                <div class="col-md-2">
                                                                    <label style="color: #4682b4; font-weight: bold; font-size: 15px; display: block;">Αποτελέσματα ανά Σελίδα</label>
                                                                    <div class="input-group" style="max-width: 65px;">
                                                                        <select class="form-control form-control-sm" 
                                                                                @onchange="OnPageSizeChangeForCompanySearch" 
                                                                                aria-label="Items per page">
                                                                            @foreach (var option in companySearchPageSizeOptions)
                                                                            {
                                                                                <option value="@option" selected="@(CompanySearchPerPage == option)">@option</option>
                                                                            }
                                                                        </select>
                                                                        <div class="input-group-append">
                                                                            <span class="input-group-text">
                                                                                <i class="fas fa-chevron-down"></i>
                                                                            </span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <table class="table mt-4">
                                                                <thead>
                                                                    <td colspan="9" style="padding: 0;">
                                                                            <div style="display: flex; justify-content: space-between; align-items: center; height: 24px; line-height: 24px; width: 100%;">
                                                                                <i class="fa-solid fa-magnifying-glass" style="font-size: 18px; color: #0d6efd  ;"></i>
                                                                                <label class="form-label" style="color: #0d6efd ; font-weight: bold; font-size: 18px; margin: 0;">Αποτέλεσμα Αναζήτησης</label>
                                                                                <i class="fa-solid fa-magnifying-glass" style="font-size: 18px; color: #0d6efd  ;"></i>
                                                                            </div>
                                                                        </td>
                                                                    <tr style="border: 2px solid black; background-color: lightgray;">
                                                                        <th style="border: 2px solid black;">
                                                                            <i class="fa-solid fa-industry fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                            Όνομα Εταιρείας
                                                                        </th>
                                                                        <th style="border: 2px solid black;">
                                                                            <i class="fa-solid fa-tags fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                            Δραστηριότητα
                                                                        </th>
                                                                        <th style="border: 2px solid black;">
                                                                            <i class="fa-solid fa-city fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                            Πόλη
                                                                        </th>
                                                                        <th style="border: 2px solid black;">
                                                                            <i class="fa-solid fa-envelope fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                            Email
                                                                        </th>
                                                                        <th style="border: 2px solid black;">
                                                                            <i class="fa-solid fa-circle-info fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                            Επισκόπηση
                                                                        </th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    @foreach (var company in GetPaginatedCompanySearchResults())
                                                                    {
                                                                        
                                                                        <tr>
                                                                            <td>@company.CompanyName</td>
                                                                            <td>@company.CompanyActivity</td>
                                                                            <td>@company.CompanyTown</td>
                                                                            <td>
                                                                                @company.CompanyEmail
                                                                                <a href="mailto:@company.CompanyEmail" title="Αποστολή Email">
                                                                                    <i class="fas fa-envelope"></i>
                                                                                </a>
                                                                            </td>
                                                                            <td class="text-center align-middle">
                                                                                <i class="fas fa-eye text-primary" style="cursor: pointer;" @onclick="() => ShowCompanyDetailsWhenSearchAsProfessor(company)" title="Προβολή λεπτομερειών"></i>
                                                                            </td>
                                                                        </tr>
                                                                    }
                                                                </tbody>
                                                            </table>
                                                            <div class="d-flex justify-content-center align-items-center mt-3 gap-1">
                                                                <span class="pagination-item @(currentPage_CompanySearch == 1 ? "disabled" : "")"
                                                                      @onclick="GoToFirstPage_CompanySearch">
                                                                    &lt;&lt;
                                                                </span>

                                                                <span class="pagination-item @(currentPage_CompanySearch == 1 ? "disabled" : "")"
                                                                      @onclick="PreviousPage_CompanySearch">
                                                                    &lt;
                                                                </span>

                                                                @foreach (var pageNum in GetVisiblePages_CompanySearch())
                                                                {
                                                                    if (pageNum == -1)
                                                                    {
                                                                        <span class="pagination-ellipsis">...</span>
                                                                    }
                                                                    else
                                                                    {
                                                                        <span class="pagination-item @(pageNum == currentPage_CompanySearch ? "active" : "")"
                                                                              @onclick="@(() => GoToPage_CompanySearch(pageNum))">
                                                                            @pageNum
                                                                        </span>
                                                                    }
                                                                }

                                                                <span class="pagination-item @(currentPage_CompanySearch == totalPages_CompanySearch ? "disabled" : "")"
                                                                      @onclick="NextPage_CompanySearch">
                                                                    &gt;
                                                                </span>

                                                                <span class="pagination-item @(currentPage_CompanySearch == totalPages_CompanySearch ? "disabled" : "")"
                                                                      @onclick="GoToLastPage_CompanySearch">
                                                                    &gt;&gt;
                                                                </span>

                                                                <span class="ms-3">
                                                                    Σελίδα @currentPage_CompanySearch από @totalPages_CompanySearch
                                                                </span>
                                                            </div>
                                                            <br/>
                                                            <br/>
                                                        }
                                                        else if (searchResultsAsProfessorToFindCompany != null)
                                                        {
                                                            <div class="alert alert-warning d-flex align-items-center" role="alert">
                                                                 <i class="fas fa-exclamation-triangle me-2"></i>
                                                                 <div>
                                                                     Δεν βρέθηκε κάποιο αποτέλεσμα που να πληρεί τα κριτήρια της Αναζήτησης σας.
                                                                 </div>
                                                            </div>
                                                        }
                                                    </div>
                                                  
                                                  
                                                    @if (showCompanyDetailsModal && selectedCompany != null)
                                                    {
                                                        <div id="companyDetailsModal" class="modal fade @(showCompanyDetailsModal ? "show d-block" : "")" 
                                                             tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                                            <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                                <div class="modal-content">
                                                                    <div class="modal-header">
                                                                        <h5 class="modal-title" style="color: #4682B4;">
                                                                            @selectedCompany.CompanyNameENG
                                                                        </h5>
                                                                        <button type="button" class="close" @onclick="CloseCompanyDetailsModalWhenSearchAsProfessor">
                                                                            <span aria-hidden="true">&times;</span>
                                                                        </button>
                                                                    </div>
                                                                    <div class="modal-body">
                                                                        <div class="form-group text-center">
                                                                            @if (selectedCompany.CompanyLogo != null)
                                                                            {
                                                                                <img src="data:image/png;base64,@Convert.ToBase64String(selectedCompany.CompanyLogo)" 
                                                                                     alt="Company Logo"
                                                                                     class="rounded-circle img-fluid"
                                                                                     style="max-width: 150px; max-height: 150px; object-fit: cover;" />
                                                                            }
                                                                            else
                                                                            {
                                                                                <p>Δεν είναι διαθέσιμο</p>
                                                                            }
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label><strong>Σύντομη Ονομασία</strong></label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fas fa-tag" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                <span class="flex-grow-1">
                                                                                    @(!string.IsNullOrWhiteSpace(selectedCompany.CompanyShortName)
                                                                                        ? selectedCompany.CompanyShortName
                                                                                        : "Δεν έχει Καθοριστεί")
                                                                                </span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label><strong>Τύπος Εταιρείας</strong></label>
                                                                            <input type="text" class="form-control" value="@selectedCompany.CompanyType" readonly />
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label><strong>Email Εταιρείας</strong></label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fas fa-envelope" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                <span class="flex-grow-1">@selectedCompany.CompanyEmail</span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label><strong>Ιστοσελίδα Εταιρείας</strong></label>
                                                                            @if (!string.IsNullOrWhiteSpace(selectedCompany.CompanyWebsite))
                                                                            {
                                                                                <div class="form-control d-flex align-items-center" style="height: auto; cursor: pointer; color: #007bff;"
                                                                                     @onclick="() => OpenUrl(selectedCompany.CompanyWebsite)">
                                                                                    <i class="fa-solid fa-globe" style="margin-right: 8px;"></i>
                                                                                    <span class="flex-grow-1">@selectedCompany.CompanyWebsite</span>
                                                                                </div>
                                                                            }
                                                                            else
                                                                            {
                                                                                <input type="text" class="form-control" value="Δεν υπάρχει" readonly />
                                                                            }
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label><strong>Περιγραφή Εταιρείας</strong></label>
                                                                            <textarea class="form-control" rows="3" readonly>@selectedCompany.CompanyDescription</textarea>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label><strong>Δραστηριότητα Εταιρείας</strong></label>
                                                                            <input type="text" class="form-control" value="@selectedCompany.CompanyActivity" readonly />
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label><strong>Περιοχές Ενδιαφέροντος</strong></label>
                                                                            <textarea class="form-control" rows="2" readonly>@selectedCompany.CompanyAreas</textarea>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label><strong>Χώρα</strong></label>
                                                                            <input type="text" class="form-control" value="@selectedCompany.CompanyCountry" readonly />
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label><strong>Περιφέρεια</strong></label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fa-solid fa-map" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                <span class="flex-grow-1">@selectedCompany.CompanyRegions</span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label><strong>Πόλη</strong></label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fa-solid fa-city" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                <span class="flex-grow-1">@selectedCompany.CompanyTown</span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label><strong>Διεύθυνση</strong></label>
                                                                            <div class="form-control d-flex align-items-center mt-1" style="height: auto;">
                                                                                <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                <span @onclick="() => OpenMap(selectedCompany.CompanyLocation)"
                                                                                      style="color: #007bff; text-decoration: underline; cursor: pointer; word-break: break-word;">
                                                                                    @selectedCompany.CompanyLocation
                                                                                </span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label><strong>Ταχυδρομικός Κώδικας</strong></label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fa-solid fa-envelope-open-text" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                <span class="flex-grow-1">@selectedCompany.CompanyPC</span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label><strong>Τηλέφωνο Εταιρείας</strong></label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fa-solid fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                                <span class="flex-grow-1">@selectedCompany.CompanyTelephone</span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label><strong>Ιστοσελίδα Ανακοινώσεων</strong></label>
                                                                            @if (!string.IsNullOrWhiteSpace(selectedCompany.CompanyWebsiteAnnouncements))
                                                                            {
                                                                                <div class="form-control d-flex align-items-center" style="height: auto; cursor: pointer; color: #007bff;"
                                                                                     @onclick="() => OpenUrl(selectedCompany.CompanyWebsiteAnnouncements)">
                                                                                    <i class="fa-solid fa-globe" style="margin-right: 8px;"></i>
                                                                                    <span class="flex-grow-1">@selectedCompany.CompanyWebsiteAnnouncements</span>
                                                                                </div>
                                                                            }
                                                                            else
                                                                            {
                                                                                <input type="text" class="form-control" value="Δεν υπάρχει" readonly />
                                                                            }
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label><strong>Ιστοσελίδα Θέσεων Εργασίας</strong></label>
                                                                            @if (!string.IsNullOrWhiteSpace(selectedCompany.CompanyWebsiteJobs))
                                                                            {
                                                                                <div class="form-control d-flex align-items-center" style="height: auto; cursor: pointer; color: #007bff;"
                                                                                     @onclick="() => OpenUrl(selectedCompany.CompanyWebsiteJobs)">
                                                                                    <i class="fa-solid fa-globe" style="margin-right: 8px;"></i>
                                                                                    <span class="flex-grow-1">@selectedCompany.CompanyWebsiteJobs</span>
                                                                                </div>
                                                                            }
                                                                            else
                                                                            {
                                                                                <input type="text" class="form-control" value="Δεν υπάρχει" readonly />
                                                                            }
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label><strong>Υπεύθυνος Ανθρώπινου Δυναμικού</strong></label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fas fa-user-tie" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                <span class="flex-grow-1">@selectedCompany.CompanyHRName @selectedCompany.CompanyHRSurname</span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label><strong>Email Υπεύθυνου</strong></label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fa-solid fa-envelope" style="color: #007bff; margin-right: 8px;"></i>
                                                                                <span class="flex-grow-1">@selectedCompany.CompanyHREmail</span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label><strong>Τηλέφωνο Υπεύθυνου</strong></label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fa-solid fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                                <span class="flex-grow-1">@selectedCompany.CompanyHRTelephone</span>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="modal-footer">
                                                                        <button type="button" class="btn btn-secondary" @onclick="CloseCompanyDetailsModalWhenSearchAsProfessor">
                                                                            Κλείσιμο
                                                                        </button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    }





                                              </div>                                                                                                                                                                                                  
                                    </div>                                                                                                     
                                </div>
                                @if (isCompanyDetailModalVisibleForHyperlinkNameToShowCompanyDetailsToTheProfessor)
                                {
                                    <div id="companyDetailsWhenSearchAsProfessorThesisDetailsModal" class="modal fade @(isExpandedModalVisibleToSeeCompanyDetailsAsProfessor ? "show d-block" : "")" 
                                        tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title" style="color: #4682B4;">
                                                        @selectedCompanyNameAsHyperlinkToShowDetailsToTheProfessor.CompanyName
                                                    </h5>
                                                    <button type="button" class="close" @onclick="CloseCompanyModalToShowCompanyDetailsFromHyperlinkNameToTheProfessor">
                                                        <span aria-hidden="true">&times;</span>
                                                    </button>
                                                </div>
                                                <div class="modal-body">
                                                    <!-- Logo or fallback icon -->
                                                    <div class="form-group text-center">
                                                        @if (selectedCompanyNameAsHyperlinkToShowDetailsToTheProfessor.CompanyLogo != null)
                                                        {
                                                            <img src="data:image/png;base64,@Convert.ToBase64String(selectedCompanyNameAsHyperlinkToShowDetailsToTheProfessor.CompanyLogo)" 
                                                                 alt="Company Logo"
                                                                 class="rounded-circle img-fluid"
                                                                 style="max-width: 150px; max-height: 150px; object-fit: cover;" />
                                                        }
                                                        else
                                                        {
                                                            <div class="d-flex justify-content-center align-items-center" 
                                                                 style="width: 150px; height: 150px; background-color: #f8f9fa; border-radius: 50%; margin: 0 auto;">
                                                                <i class="fas fa-building" style="font-size: 3rem; color: #6c757d;"></i>
                                                            </div>
                                                        }
                                                    </div>

                                                    <div class="form-group">
                                                        <label><strong>Όνομα Εταιρείας</strong></label>
                                                        <input type="text" class="form-control" value="@selectedCompanyNameAsHyperlinkToShowDetailsToTheProfessor.CompanyName" readonly />
                                                    </div>

                                                    <div class="form-group">
                                                        <label><strong>Email Εταιρείας</strong></label>
                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                            <i class="fas fa-envelope" style="color: #6c757d; margin-right: 8px;"></i>
                                                            <span class="flex-grow-1">@selectedCompanyNameAsHyperlinkToShowDetailsToTheProfessor.CompanyEmail</span>
                                                        </div>
                                                    </div>

                                                    <div class="form-group">
                                                        <label><strong>Τηλέφωνο Εταιρείας</strong></label>
                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                            <i class="fas fa-phone" style="color: #6c757d; margin-right: 8px;"></i>
                                                            <span class="flex-grow-1">@selectedCompanyNameAsHyperlinkToShowDetailsToTheProfessor.CompanyTelephone</span>
                                                        </div>
                                                    </div>

                                                    @if (!string.IsNullOrWhiteSpace(selectedCompanyNameAsHyperlinkToShowDetailsToTheProfessor.CompanyDescription))
                                                    {
                                                        <div class="form-group">
                                                            <label><strong>Περιγραφή</strong></label>
                                                            <textarea class="form-control" rows="4" readonly>@selectedCompanyNameAsHyperlinkToShowDetailsToTheProfessor.CompanyDescription</textarea>
                                                        </div>
                                                    }

                                                    <div class="form-group">
                                                        <label><strong>Τύπος Εταιρείας</strong></label>
                                                        <input type="text" class="form-control" value="@selectedCompanyNameAsHyperlinkToShowDetailsToTheProfessor.CompanyType" readonly />
                                                    </div>

                                                    <div class="form-group">
                                                        <label><strong>Δραστηριότητα Εταιρείας</strong></label>
                                                        <input type="text" class="form-control" value="@selectedCompanyNameAsHyperlinkToShowDetailsToTheProfessor.CompanyActivity" readonly />
                                                    </div>

                                                    <div class="form-group">
                                                        <label><strong>Πόλη</strong></label>
                                                        <div class="form-control d-flex align-items-center" style="height: auto;">
                                                            <i class="fa-solid fa-city" style="color: #6c757d; margin-right: 8px;"></i>
                                                            <span class="flex-grow-1">@selectedCompanyNameAsHyperlinkToShowDetailsToTheProfessor.CompanyTown</span>
                                                        </div>
                                                    </div>

                                                    <div class="form-group">
                                                        <label><strong>Περιοχές</strong></label>
                                                        <textarea class="form-control" rows="2" readonly>@selectedCompanyNameAsHyperlinkToShowDetailsToTheProfessor.CompanyAreas</textarea>
                                                    </div>

                                                    <div class="form-group">
                                                        <label><strong>Επιθυμητές Δεξιότητες</strong></label>
                                                        <textarea class="form-control" rows="3" readonly>@selectedCompanyNameAsHyperlinkToShowDetailsToTheProfessor.CompanyDesiredSkills</textarea>
                                                    </div>

                                                    @if (!string.IsNullOrWhiteSpace(selectedCompanyNameAsHyperlinkToShowDetailsToTheProfessor.CompanyWebsite))
                                                    {
                                                        <div class="form-group">
                                                            <label><strong>Ιστοσελίδα</strong></label>
                                                            <div class="form-control d-flex align-items-center" style="height: auto; cursor: pointer; color: #007bff;"
                                                                 @onclick="() => OpenUrl(selectedCompanyNameAsHyperlinkToShowDetailsToTheProfessor.CompanyWebsite)">
                                                                <i class="fa-solid fa-globe" style="margin-right: 8px;"></i>
                                                                <span class="flex-grow-1">@selectedCompanyNameAsHyperlinkToShowDetailsToTheProfessor.CompanyWebsite</span>
                                                            </div>
                                                        </div>
                                                    }

                                                    @if (!string.IsNullOrWhiteSpace(selectedCompanyNameAsHyperlinkToShowDetailsToTheProfessor.CompanyLocation))
                                                    {
                                                        <div class="form-group">
                                                            <label><strong>Τοποθεσία</strong></label>
                                                            <div class="form-control d-flex align-items-center mt-1" style="height: auto;">
                                                                <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                <span @onclick="() => OpenMap(selectedCompanyNameAsHyperlinkToShowDetailsToTheProfessor.CompanyLocation)"
                                                                      style="color: #007bff; text-decoration: underline; cursor: pointer; word-break: break-word;">
                                                                    @selectedCompanyNameAsHyperlinkToShowDetailsToTheProfessor.CompanyLocation
                                                                </span>
                                                            </div>
                                                        </div>
                                                    }

                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-secondary" @onclick="CloseCompanyModalToShowCompanyDetailsFromHyperlinkNameToTheProfessor">Κλείσιμο</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                }


                                                 




                                                        <!-- Modal for SHOW THESIS DETAILS WHEN SEARCH FOR COMPANY THESIS as PROFESSOR (EYE ICON) -->
                                                        @*
                                                        @if (isThesisDetailEyeIconModalVisibleToSeeAsProfessor && selectedCompanyThesisToSeeDetailsOnEyeIconAsProfessor != null)
                                                        {
                                                            <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0,0,0,0.5);">
                                                                <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
                                                                    <div class="modal-content">
                                                                        <div class="modal-header">
                                                                            <h5 class="modal-title">Λεπτομέρειες Πτυχιακής</h5>
                                                                            <button type="button" class="btn-close" @onclick="() => isThesisDetailEyeIconModalVisibleToSeeAsProfessor = false" aria-label="Κλείσιμο"></button>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            <div class="form-group">
                                                                                <label for="viewCompanyThesisCompanyName">Όνομα Εταιρείας</label>
                                                                                <input type="text" id="viewCompanyThesisCompanyName" class="form-control" value="@selectedCompanyThesisToSeeDetailsOnEyeIconAsProfessor.CompanyNameUploadedThesis" readonly />
                                                                            </div>
                                                                            <div class="form-group">
                                                                                <label for="viewCompanyThesisTitle">Τίτλος Πτυχιακής</label>
                                                                                <input type="text" id="viewCompanyThesisTitle" class="form-control" value="@selectedCompanyThesisToSeeDetailsOnEyeIconAsProfessor.CompanyThesisTitle" readonly />
                                                                            </div>
                                                                            <div class="form-group">
                                                                                <label for="viewCompanyThesisSupervisor">Επιβλέπων Εταιρείας</label>
                                                                                <input type="text" id="viewCompanyThesisSupervisor" class="form-control" value="@selectedCompanyThesisToSeeDetailsOnEyeIconAsProfessor.CompanyThesisCompanySupervisorFullName" readonly />
                                                                            </div>
                                                                            <div class="form-group">
                                                                                <label for="viewCompanyThesisDepartment">Υπεύθυνο Τμήμα</label>
                                                                                <input type="text" id="viewCompanyThesisDepartment" class="form-control" value="@selectedCompanyThesisToSeeDetailsOnEyeIconAsProfessor.CompanyThesisDepartment" readonly />
                                                                            </div>
                                                                            <div class="form-group">
                                                                                <label for="viewCompanyThesisSkillsNeeded">Τομείς Ενδιαφέροντος</label>
                                                                                <textarea id="viewCompanyThesisSkillsNeeded" class="form-control" readonly>@selectedCompanyThesisToSeeDetailsOnEyeIconAsProfessor.CompanyThesisSkillsNeeded</textarea>
                                                                            </div>
                                                                            <div class="form-group">
                                                                                <label for="viewCompanyThesisUploadDate">Έναρξη Πτυχιακής</label>
                                                                                <input type="text" id="viewCompanyThesisUploadDate" class="form-control" value="@selectedCompanyThesisToSeeDetailsOnEyeIconAsProfessor.CompanyThesisStartingDate.ToShortDateString()" readonly />
                                                                            </div>
                                                                            <div class="form-group">
                                                                                <label for="viewCompanyThesisDescription">Περιγραφή</label>
                                                                                <textarea id="viewCompanyThesisDescription" class="form-control" readonly>@selectedCompanyThesisToSeeDetailsOnEyeIconAsProfessor.CompanyThesisDescriptionsUploaded</textarea>
                                                                            </div>
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button" class="btn btn-secondary" @onclick="() => isThesisDetailEyeIconModalVisibleToSeeAsProfessor = false">Κλείσιμο</button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        }
                                                        *@


                                                        @if (isThesisDetailEyeIconModalVisibleToSeeAsProfessor && selectedCompanyThesisToSeeDetailsOnEyeIconAsProfessor != null)
                                                        {
                                                            <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0,0,0,0.5);">
                                                                <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
                                                                    <div class="modal-content">
                                                                        <div class="modal-header">
                                                                            <h5 class="modal-title" style="color: #4682B4;">@selectedCompanyThesisToSeeDetailsOnEyeIconAsProfessor.CompanyThesisTitle</h5>
                                                                            <button type="button" class="close" @onclick="() => isThesisDetailEyeIconModalVisibleToSeeAsProfessor = false">
                                                                                <span>&times;</span>
                                                                            </button>
                                                                        </div>
                                                                        <div class="modal-body">

                                                                            <div class="form-group">
                                                                                <label for="viewCompanyName" style="font-weight: bold;">Εταιρεία</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fa-solid fa-building" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                    <span>@(selectedCompanyThesisToSeeDetailsOnEyeIconAsProfessor.Company?.CompanyName ?? "Άγνωστη Εταιρεία")</span>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label for="viewThesisDescription"><strong>Περιγραφή</strong></label>
                                                                                <textarea id="viewThesisDescription" class="form-control" readonly>@selectedCompanyThesisToSeeDetailsOnEyeIconAsProfessor.CompanyThesisDescriptionsUploaded</textarea>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label for="viewThesisSkills"><strong>Απαιτούμενα Προσόντα</strong></label>
                                                                                <textarea id="viewThesisSkills" class="form-control" readonly>@selectedCompanyThesisToSeeDetailsOnEyeIconAsProfessor.CompanyThesisSkillsNeeded</textarea>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label for="viewThesisSupervisor" style="font-weight: bold;">Επόπτης</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-user-tie" style="color: #007bff; margin-right: 8px;"></i>
                                                                                    <span>@(string.IsNullOrWhiteSpace(selectedCompanyThesisToSeeDetailsOnEyeIconAsProfessor.CompanyThesisCompanySupervisorFullName) 
                                                                                        ? "Δεν Διατίθεται" 
                                                                                        : selectedCompanyThesisToSeeDetailsOnEyeIconAsProfessor.CompanyThesisCompanySupervisorFullName)</span>
                                                                                </div>
                                                                            </div>


                                                                            <div class="form-group">
                                                                                <label for="viewThesisDepartment" style="font-weight: bold;">Τμήμα</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fa-solid fa-building" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                    <span>@(!string.IsNullOrEmpty(selectedCompanyThesisToSeeDetailsOnEyeIconAsProfessor.CompanyThesisDepartment) 
                                                                                        ? selectedCompanyThesisToSeeDetailsOnEyeIconAsProfessor.CompanyThesisDepartment 
                                                                                        : "Δεν Διατίθεται")</span>
                                                                                </div>
                                                                            </div>


                                                                            <div class="form-group">
                                                                                <label for="viewThesisStartingDate" style="font-weight: bold;">Ημερομηνία Έναρξης</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-calendar-alt" style="color: #17a2b8; margin-right: 8px;"></i>
                                                                                    <span>@selectedCompanyThesisToSeeDetailsOnEyeIconAsProfessor.CompanyThesisStartingDate.ToString("yyyy-MM-dd")</span>
                                                                                </div>
                                                                            </div>
                                                                            
                                                                            <div class="form-group">
                                                                                <label for="viewThesisContactEmail" style="font-weight: bold;">Email Επικοινωνίας</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-envelope" style="color: #007bff; margin-right: 8px;"></i>
                                                                                    <span>@(selectedCompanyThesisToSeeDetailsOnEyeIconAsProfessor.CompanyThesisContactPersonEmail ?? "Δεν Διατίθεται")</span>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label for="viewThesisContactPhone" style="font-weight: bold;">Τηλέφωνο Επικοινωνίας</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-phone-alt" style="color: #28a745; margin-right: 8px;"></i>
                                                                                    <span>@(selectedCompanyThesisToSeeDetailsOnEyeIconAsProfessor.CompanyThesisContactPersonTelephone ?? "Δεν Διατίθεται")</span>
                                                                                </div>
                                                                            </div>

                                                                            <br/>
                                                                            <div class="form-group">
                                                                                <label for="viewThesisAttachment"><strong>Αρχείο Πτυχιακής: </strong></label>
                                                                                @if (selectedCompanyThesisToSeeDetailsOnEyeIconAsProfessor.CompanyThesisAttachmentUpload != null)
                                                                                {
                                                                                    <a href="data:application/pdf;base64,@Convert.ToBase64String(selectedCompanyThesisToSeeDetailsOnEyeIconAsProfessor.CompanyThesisAttachmentUpload)" download="ThesisAttachment.pdf" class="btn btn-primary">
                                                                                        Λήψη Αρχείου
                                                                                    </a>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <span style="color: darkred;"><strong>  Δεν Διατίθεται Συννημένο Αρχείο</strong></span>
                                                                                }
                                                                            </div>
                                                                            
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button" class="btn btn-secondary" @onclick="() => isThesisDetailEyeIconModalVisibleToSeeAsProfessor = false">Κλείσιμο</button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        }


                                                        <!-- Modal for EDIT THESIS as PROFESSOR -->
                                                        @if (isEditModalVisibleForThesesAsProfessor)
                                                        {
                                                            <div class="modal fade show" style="display: block;" tabindex="-1" role="dialog" aria-modal="true">
                                                                <div class="modal-dialog modal-lg" role="document">
                                                                    <div class="modal-content">
                                                                        <div class="modal-header">
                                                                            <h5 class="modal-title" style="color: #007BFF;">@currentThesisAsProfessor.ThesisTitle</h5>
                                                                            <button type="button" class="close" @onclick="CloseEditModalForThesesAsProfessor">&times;</button>
                                                                        </div>
                                                                        <div class="modal-body">

                                                                            <div class="form-group">
                                                                                <label for="editDescription"><strong>Περιγραφή</strong></label>
                                                                                <textarea id="editDescription" class="form-control" rows="4" @bind="currentThesisAsProfessor.ThesisDescription"></textarea>
                                                                            </div>

                                                                            <br/>
                                                                            <div class="form-group">
                                                                                <label for="editThesisAreas" @onclick="ToggleAreasInEditProfessorThesisModal" style="cursor: pointer;">
                                                                                    <strong>Τομείς Πτυχιακής</strong> 
                                                                                    <i class="fas @(showExpandedAreasInProfessorThesisEditModal ? "fa-chevron-up" : "fa-chevron-down")"></i>
                                                                                </label>
                                                                                @if (showExpandedAreasInProfessorThesisEditModal)
                                                                                {
                                                                                    <div id="toggleCheckboxes" class="checkbox-container">
                                                                                        @foreach (var area in Areas)
                                                                                        {
                                                                                            <div class="form-check">
                                                                                                <input type="checkbox"
                                                                                                       id="area_@area.Id"
                                                                                                       class="form-check-input"
                                                                                                       @onchange="(e) => OnCheckedChangedForEditProfessorThesisAreas(e, area)"
                                                                                                       checked="@(SelectedAreasToEditForProfessorThesis.Any(a => a.AreaName == area.AreaName))" />
                                                                                                <label class="form-check-label" for="area_@area.Id">@area.AreaName</label>
                                                                                            </div>
                                                                                        }
                                                                                    </div>
                                                                                }
                                                                            </div>
                                                                            <br/>

                                                                            <div class="form-group">
                                                                                <label for="editThesisSkills" @onclick="ToggleSkillsInEditProfessorThesisModal" style="cursor: pointer;">
                                                                                    <strong>Απαιτούμενες Δεξιότητες/Γνώσεις</strong> 
                                                                                    <i class="fas @(showExpandedSkillsInProfessorThesisEditModal ? "fa-chevron-up" : "fa-chevron-down")"></i>
                                                                                </label>
                                                                                @if (showExpandedSkillsInProfessorThesisEditModal)
                                                                                {
                                                                                    <div id="toggleCheckboxesSkills" class="checkbox-container">
                                                                                        @foreach (var skill in Skills)
                                                                                        {
                                                                                            <div class="form-check">
                                                                                                <input type="checkbox"
                                                                                                       id="skill_@skill.Id"
                                                                                                       class="form-check-input"
                                                                                                       @onchange="(e) => OnCheckedChangedForEditProfessorThesisSkills(e, skill)"
                                                                                                       checked="@(SelectedSkillsToEditForProfessorThesis.Any(s => s.SkillName == skill.SkillName))" />
                                                                                                <label class="form-check-label" for="skill_@skill.Id">@skill.SkillName</label>
                                                                                            </div>
                                                                                        }
                                                                                    </div>
                                                                                }
                                                                            </div>
                                                                            <br/>

                                                                            <div class="form-group">
                                                                                <label for="editActivePeriod"><strong>Ημερομηνία Έναρξης</strong></label>
                                                                                <input type="date" id="editActivePeriod" class="form-control" @bind="currentThesisAsProfessor.ThesisActivePeriod" />
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label for="editDepartment"><strong>Τμήμα</strong></label>
                                                                                <div class="input-group">
                                                                                    <select id="editDepartment" class="form-control" @bind="currentThesisAsProfessor.Professor.ProfDepartment">
                                                                                        <option value="">-- Επιλέξτε Τμήμα --</option>
                                                                                        @foreach (var department in universityDepartments)
                                                                                        {
                                                                                            <option value="@department">@department</option>
                                                                                        }
                                                                                    </select>
                                                                                    <div class="input-group-append">
                                                                                        <span class="input-group-text">
                                                                                            <i class="fas fa-chevron-down"></i>
                                                                                        </span>
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label for="editAttachment"><strong>Αντικατάσταση Συνημμένου</strong></label>
                                                                                <InputFile OnChange="HandleProfessorThesisFileUpload" />
                                                                            </div>

                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button" class="btn btn-secondary" @onclick="CloseEditModalForThesesAsProfessor">Ακύρωση</button>
                                                                            <button type="button" class="btn btn-primary" @onclick="() => UpdateThesisAsProfessor(currentThesisAsProfessor)">Αποθήκευση</button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        }

                                                        @*MODAL TO EDIT PROFESSOR INTERNSHIP*@
                                                        @if (isEditPopupVisibleForProfessorInternships && selectedProfessorInternship != null)
                                                        {
                                                            <div class="modal fade show" style="display: block;" tabindex="-1" role="dialog" aria-modal="true">
                                                                <div class="modal-dialog" role="document">
                                                                    <div class="modal-content">
                                                                        <div class="modal-header">
                                                                            <h5 class="modal-title" style="color: #007BFF;">@selectedProfessorInternship.ProfessorInternshipTitle</h5>
                                                                            <button type="button" class="close" @onclick="CloseEditPopupForProfessorInternships">&times;</button>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            <!-- Form to edit the internship details -->
                                                                            <div class="form-group">
                                                                                <label for="editTitle"><strong>Τίτλος</strong></label>
                                                                                <input type="text" id="editTitle" class="form-control" @bind="selectedProfessorInternship.ProfessorInternshipTitle" />
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label for="editDescription"><strong>Περιγραφή</strong></label>
                                                                                <textarea id="editDescription" class="form-control" @bind="selectedProfessorInternship.ProfessorInternshipDescription"></textarea>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label for="editType"><strong>Τύπος</strong></label>
                                                                                <div class="input-group">
                                                                                    <select id="editType" class="form-control @(showErrorMessage && string.IsNullOrWhiteSpace(selectedProfessorInternship.ProfessorInternshipType) ? "shake error" : "")" @bind="selectedProfessorInternship.ProfessorInternshipType">
                                                                                        <option value="">-- Επιλέξτε --</option>
                                                                                        <option value="Full-Time">Πλήρους Απασχόλησης</option>
                                                                                        <option value="Part-Time">Μερικής Απασχόλησης</option>
                                                                                        <option value="Part-Time_Full-Time">Μερικής ή Πλήρους Απασχόλησης</option>
                                                                                    </select>
                                                                                    <div class="input-group-append">
                                                                                        <span class="input-group-text">
                                                                                            <i class="fas fa-chevron-down"></i>
                                                                                        </span>
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label for="editForeas"><strong>Φορέας</strong></label>
                                                                                <div class="input-group">
                                                                                    <select id="editForeas" class="form-control @(showErrorMessage && string.IsNullOrWhiteSpace(selectedProfessorInternship.ProfessorInternshipForeas) ? "shake error" : "")" @bind="selectedProfessorInternship.ProfessorInternshipForeas">
                                                                                        <option value="">-- Επιλέξτε --</option>
                                                                                        @foreach (var foreas in ForeasType)
                                                                                        {
                                                                                            <option value="@foreas">@foreas</option>
                                                                                        }
                                                                                    </select>
                                                                                    <div class="input-group-append">
                                                                                        <span class="input-group-text">
                                                                                            <i class="fas fa-chevron-down"></i>
                                                                                        </span>
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label for="editPerifereiaLocation"><strong>Περιφέρεια</strong></label>
                                                                                <div class="input-group">
                                                                                    <select id="editPerifereiaLocation" class="form-control @(showErrorMessage && string.IsNullOrWhiteSpace(selectedProfessorInternship.ProfessorInternshipPerifereiaLocation) ? "shake error" : "")" @bind="selectedProfessorInternship.ProfessorInternshipPerifereiaLocation">
                                                                                        <option value="">-- Επιλέξτε Περιφέρεια --</option>
                                                                                        @foreach (var region in Regions)
                                                                                        {
                                                                                            <option value="@region">@region</option>
                                                                                        }
                                                                                    </select>
                                                                                    <div class="input-group-append">
                                                                                        <span class="input-group-text">
                                                                                            <i class="fas fa-chevron-down"></i>
                                                                                        </span>
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label for="editDimosLocation"><strong>Δήμος</strong></label>
                                                                                <div class="input-group">
                                                                                    <select id="editDimosLocation" class="form-control" @bind="selectedProfessorInternship.ProfessorInternshipDimosLocation">
                                                                                        <option value="">-- Επιλέξτε Δήμο --</option>
                                                                                        @if (!string.IsNullOrEmpty(selectedProfessorInternship.ProfessorInternshipDimosLocation) && RegionToTownsMap.ContainsKey(selectedProfessorInternship.ProfessorInternshipPerifereiaLocation))
                                                                                        {
                                                                                            foreach (var town in RegionToTownsMap[selectedProfessorInternship.ProfessorInternshipPerifereiaLocation])
                                                                                            {
                                                                                                <option value="@town">@town</option>
                                                                                            }
                                                                                        }
                                                                                    </select>
                                                                                    <div class="input-group-append">
                                                                                        <span class="input-group-text">
                                                                                            <i class="fas fa-chevron-down"></i>
                                                                                        </span>
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label for="editTransportOffer"><strong>Προσφορά Μεταφοράς</strong></label>
                                                                                <div>
                                                                                    <input type="checkbox" id="editTransportOffer" class="form-check-input" @bind="selectedProfessorInternship.ProfessorInternshipTransportOffer" />
                                                                                    <span class="ml-2">@(selectedProfessorInternship.ProfessorInternshipTransportOffer ? "Ναι" : "Όχι")</span>
                                                                                </div>
                                                                            </div>
                    
                                                                            <br/>
                                                                            <div class="form-group">
                                                                                <label for="editjobAreas" @onclick="ToggleAreasInEditProfessorInternshipModal" style="cursor: pointer;">
                                                                                    <strong>Τομείς Πρακτικής</strong> 
                                                                                    <i class="fas @(showExpandedAreasInProfessorInternshipEditModal ? "fa-chevron-up" : "fa-chevron-down")"></i>
                                                                                </label>
                                                                                @if (showExpandedAreasInProfessorInternshipEditModal)
                                                                                {
                                                                                    <div id="toggleCheckboxes" class="checkbox-container">
                                                                                        @foreach (var area in Areas)
                                                                                        {
                                                                                            <div class="form-check">
                                                                                                <input type="checkbox"
                                                                                                       id="area_@area.Id"
                                                                                                       class="form-check-input"
                                                                                                       @onchange="(e) => OnCheckedChangedForEditProfessorInternshipAreas(e, area)"
                                                                                                       checked="@(selectedProfessorInternship.ProfessorInternshipAreas.Contains(area.AreaName))" />
                                                                                                <label class="form-check-label" for="area_@area.Id">@area.AreaName</label>
                                                                                            </div>
                                                                                        }
                                                                                    </div>
                                                                                }
                                                                            </div>
                                                                            <br/>
                    
                                                                            <div class="form-group">
                                                                                <label for="editActivePeriod"><strong>Ξεκινάει Από</strong></label>
                                                                                <input type="date" id="editActivePeriod" class="form-control" @bind="selectedProfessorInternship.ProfessorInternshipActivePeriod" />
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label for="editFinishEstimation"><strong>Εκτιμώμενη Ημερομηνία Ολοκλήρωσης</strong></label>
                                                                                <input type="date" id="editFinishEstimation" class="form-control" @bind="selectedProfessorInternship.ProfessorInternshipFinishEstimation" />
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label for="editJobAttachment"><strong>Αντικατάσταση Συνημμένου</strong></label>
                                                                                <InputFile OnChange="HandleFileUploadToEditProfessorInternshipAttachment" />
                                                                            </div>
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button" class="btn btn-secondary" @onclick="CloseEditPopupForProfessorInternships">Ακύρωση</button>
                                                                            <button type="button" class="btn btn-primary" @onclick="SaveEditedProfessorInternship">Αποθήκευση</button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        }

                                                        @if (isEditModalVisibleForEventsAsProfessor)
                                                        {
                                                            <div class="modal fade show" style="display: block;" tabindex="-1" role="dialog" aria-modal="true">
                                                                <div class="modal-dialog modal-lg" role="document">
                                                                    <div class="modal-content">
                                                                        <div class="modal-header">
                                                                            <h5 class="modal-title" style="color: #007BFF;">Επεξεργασία Εκδήλωσης</h5>
                                                                            <button type="button" class="close" @onclick="CloseEditModalForProfessorEvent">&times;</button>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            <!-- Τίτλος Εκδήλωσης -->
                                                                            <div class="form-group">
                                                                                <label><strong>Τίτλος Εκδήλωσης</strong></label>
                                                                                <input type="text" class="form-control" @bind="currentProfessorEvent.ProfessorEventTitle" />
                                                                            </div>

                                                                            <!-- Περιγραφή Εκδήλωσης -->
                                                                            <div class="form-group">
                                                                                <label><strong>Περιγραφή Εκδήλωσης</strong></label>
                                                                                <textarea class="form-control" @bind="currentProfessorEvent.ProfessorEventDescription"></textarea>
                                                                            </div>

                                                                            <!-- Τύπος Εκδήλωσης -->
                                                                            <div class="form-group">
                                                                                <label><strong>Τύπος Εκδήλωσης</strong></label>
                                                                                <select class="form-control" @bind="currentProfessorEvent.ProfessorEventType">
                                                                                    <option value="">-- Επιλέξτε Τύπο Εκδήλωσης --</option>
                                                                                    <option value="Έκθεση">Έκθεση</option>
                                                                                    <option value="Hackathon">Hackathon</option>
                                                                                    <option value="Career Day">Career Day</option>
                                                                                    <option value="Seminar">Σεμινάριο</option>
                                                                                    <option value="Επίσκεψη">Επίσκεψη</option>
                                                                                    <option value="Άλλο">Άλλο</option>
                                                                                </select>
                                                                            </div>

                                                                            <!-- Άλλος Οργανισμός -->
                                                                            <div class="form-group">
                                                                                <label><strong>Συνδιοργάνωση με άλλο φορέα</strong></label>
                                                                                <br />
                                                                                <input type="checkbox" @bind="currentProfessorEvent.ProfessorEventOtherOrganizerToBeVisible" />
                                                                                <span>Ναι, η εκδήλωση διοργανώνεται σε συνεργασία με άλλο φορέα</span>
                                                                            </div>

                                                                            @if (currentProfessorEvent.ProfessorEventOtherOrganizerToBeVisible)
                                                                            {
                                                                                <div class="form-group">
                                                                                    <label><strong>Όνομα Άλλου Φορέα</strong></label>
                                                                                    <input type="text" class="form-control" @bind="currentProfessorEvent.ProfessorEventOtherOrganizer" />
                                                                                </div>
                                                                            }

                                                                            <!-- Υπεύθυνος Εκδήλωσης -->
                                                                            <div class="form-group">
                                                                                <label><strong>Υπεύθυνος Εκδήλωσης</strong></label>
                                                                                <input type="text" class="form-control" @bind="currentProfessorEvent.ProfessorEventResponsiblePerson" />
                                                                            </div>

                                                                            <!-- Email Υπευθύνου -->
                                                                            <div class="form-group">
                                                                                <label><strong>Email Υπευθύνου</strong></label>
                                                                                <input type="email" class="form-control" @bind="currentProfessorEvent.ProfessorEventResponsiblePersonEmail" />
                                                                            </div>

                                                                            <!-- Τηλέφωνο Υπευθύνου -->
                                                                            <div class="form-group">
                                                                                <label><strong>Τηλέφωνο Υπευθύνου</strong></label>
                                                                                <input type="text" class="form-control" @bind="currentProfessorEvent.ProfessorEventResponsiblePersonTelephone" />
                                                                            </div>

                                                                            <!-- Πανεπιστήμιο -->
                                                                            <div class="form-group">
                                                                                <label><strong>Πανεπιστήμιο</strong></label>
                                                                                <input type="text" class="form-control" @bind="currentProfessorEvent.Professor.ProfUniversity" />
                                                                            </div>

                                                                            <!-- Τμήμα Πανεπιστημίου -->
                                                                            <div class="form-group">
                                                                                <label><strong>Τμήμα Πανεπιστημίου</strong></label>
                                                                                <input type="text" class="form-control" @bind="currentProfessorEvent.ProfessorEventUniversityDepartment" />
                                                                            </div>

                                                                            <!--Περιφέρεια Εκδήλωσης (Region) -->
                                                                            <div class="form-group">
                                                                                <label><strong>Περιφέρεια Εκδήλωσης</strong></label>
                                                                                <select class="form-control" 
                                                                                        @bind="currentProfessorEvent.ProfessorEventPerifereiaLocation"
                                                                                        @bind:event="onchange">
                                                                                    <option value="">-- Επιλέξτε Περιφέρεια --</option>
                                                                                    @foreach (var region in Regions)
                                                                                    {
                                                                                        <option value="@region">@region</option>
                                                                                    }
                                                                                </select>
                                                                            </div>

                                                                            <!-- Δήμος Εκδήλωσης (Town) -->
                                                                            <div class="form-group">
                                                                                <label><strong>Δήμος Εκδήλωσης</strong></label>
                                                                                <select class="form-control" @bind="currentProfessorEvent.ProfessorEventDimosLocation">
                                                                                    <option value="">-- Επιλέξτε Δήμο --</option>
                                                                                    @if (!string.IsNullOrEmpty(currentProfessorEvent.ProfessorEventPerifereiaLocation) &&
                                                                                         RegionToTownsMap.ContainsKey(currentProfessorEvent.ProfessorEventPerifereiaLocation))
                                                                                    {
                                                                                        foreach (var town in RegionToTownsMap[currentProfessorEvent.ProfessorEventPerifereiaLocation])
                                                                                        {
                                                                                            <option value="@town">@town</option>
                                                                                        }
                                                                                    }
                                                                                </select>
                                                                            </div>

                                                                            <!-- Χώρος Εκδήλωσης -->
                                                                            <div class="form-group">
                                                                                <label><strong>Χώρος Εκδήλωσης</strong></label>
                                                                                <input type="text" class="form-control" @bind="currentProfessorEvent.ProfessorEventPlaceLocation" />
                                                                            </div>

                                                                            <!-- Ταχυδρομικός Κώδικας -->
                                                                            <div class="form-group">
                                                                                <label><strong>Ταχυδρομικός Κώδικας</strong></label>
                                                                                <input type="text" class="form-control" @bind="currentProfessorEvent.ProfessorEventPostalCodeLocation" />
                                                                            </div>

                                                                            <!-- Ημερομηνία Εκδήλωσης -->
                                                                            <div class="form-group">
                                                                                <label><strong>Ημερομηνία Εκδήλωσης</strong></label>
                                                                                <input type="date" class="form-control" @bind="currentProfessorEvent.ProfessorEventActiveDate" />
                                                                            </div>

                                                                            <!-- Ώρα Εκδήλωσης -->
                                                                            <div class="form-group">
                                                                                <label><strong>Ώρα Εκδήλωσης</strong></label>
                                                                                <input type="time" class="form-control" 
                                                                                       @bind="currentProfessorEvent.ProfessorEventTimeOnly" 
                                                                                       @bind:format="HH:mm" />
                                                                            </div>

                                                                            <br/>
                                                                            <!-- Περιοχές Ενδιαφέροντος -->
                                                                            <div class="form-group">
                                                                                <label @onclick="ToggleAreasInEditProfessorEventModal" style="cursor: pointer;">
                                                                                    <strong>Περιοχές Ενδιαφέροντος</strong>
                                                                                    <i class="fas @(showExpandedAreasInProfessorEventEditModal ? "fa-chevron-up" : "fa-chevron-down")"></i>
                                                                                </label>
                                                                                @if (showExpandedAreasInProfessorEventEditModal)
                                                                                {
                                                                                    <div class="checkbox-container">
                                                                                        @foreach (var area in Areas)
                                                                                        {
                                                                                            <div class="form-check">
                                                                                                <input type="checkbox"
                                                                                                       id="prof_event_area_@area.Id"
                                                                                                       class="form-check-input"
                                                                                                       @onchange="(e) => OnCheckedChangedForEditProfessorEventAreas(e, area)"
                                                                                                       checked="@(SelectedAreasToEditForProfessorEvent != null && SelectedAreasToEditForProfessorEvent.Any(a => a.AreaName.Equals(area.AreaName, StringComparison.OrdinalIgnoreCase)))" />
                                                                                                <label class="form-check-label" for="prof_event_area_@area.Id">@area.AreaName</label>
                                                                                            </div>
                                                                                        }
                                                                                    </div>
                                                                                }
                                                                            </div>

                                                                            <br/>
                                                                            <!-- Προσφορά Μεταφοράς προς/από Εκδήλωση -->
                                                                            <div class="form-group">
                                                                                <label><strong>Προσφορά Μεταφοράς προς/από Εκδήλωση</strong></label>
                                                                                <br />
                                                                                <input type="checkbox" @bind="currentProfessorEvent.ProfessorEventOfferingTransportToEventLocation" />
                                                                                <span>Παρέχεται μεταφορά προς την εκδήλωση</span>
                                                                            </div>
                                                                            <br/>
                    
                                                                            <!-- Σημεία Εκκίνησης Μεταφοράς -->
                                                                            @if (currentProfessorEvent.ProfessorEventOfferingTransportToEventLocation == true)
                                                                            {
                                                                                <div class="form-group">
                                                                                    <label><strong>Σημεία Εκκίνησης Μεταφοράς</strong></label>
                                                                                    <div class="input-group" style="position: relative;">
                                                                                        <input type="text" id="autocomplete6" class="form-control mt-2" 
                                                                                               @bind="currentProfessorEvent.ProfessorEventStartingPointLocationToTransportPeopleToEvent1" 
                                                                                               placeholder="Σημείο Εκκίνησης 1" />
                                                                                        @if (!string.IsNullOrEmpty(currentProfessorEvent.ProfessorEventStartingPointLocationToTransportPeopleToEvent1))
                                                                                        {
                                                                                            <button type="button" class="btn-close" @onclick="() => ClearProfessorEventField(1)" style="position: absolute; right: 10px; top: 70%; transform: translateY(-50%);"></button>
                                                                                        }
                                                                                    </div>
                                                                                    <div class="input-group" style="position: relative;">
                                                                                        <input type="text" id="autocomplete7" class="form-control mt-2" 
                                                                                               @bind="currentProfessorEvent.ProfessorEventStartingPointLocationToTransportPeopleToEvent2" 
                                                                                               placeholder="Σημείο Εκκίνησης 2" />
                                                                                        @if (!string.IsNullOrEmpty(currentProfessorEvent.ProfessorEventStartingPointLocationToTransportPeopleToEvent2))
                                                                                        {
                                                                                            <button type="button" class="btn-close" @onclick="() => ClearProfessorEventField(2)" style="position: absolute; right: 10px; top: 70%; transform: translateY(-50%);"></button>
                                                                                        }
                                                                                    </div>
                                                                                    <div class="input-group" style="position: relative;">
                                                                                        <input type="text" id="autocomplete8" class="form-control mt-2"
                                                                                               @bind="currentProfessorEvent.ProfessorEventStartingPointLocationToTransportPeopleToEvent3" 
                                                                                               placeholder="Σημείο Εκκίνησης 3" />
                                                                                        @if (!string.IsNullOrEmpty(currentProfessorEvent.ProfessorEventStartingPointLocationToTransportPeopleToEvent3))
                                                                                        {
                                                                                            <button type="button" class="btn-close" @onclick="() => ClearProfessorEventField(3)" style="position: absolute; right: 10px; top: 70%; transform: translateY(-50%);"></button>
                                                                                        }
                                                                                    </div>
                                                                                </div>
                                                                            }

                                                                            <!-- Επισυναπτόμενο Αρχείο -->
                                                                            <div class="form-group">
                                                                                <label><strong>Επισυναπτόμενο Αρχείο</strong></label>
                                                                                <InputFile OnChange="HandleFileUploadToEditProfessorEventAttachment" />
                                                                            </div>
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button class="btn btn-primary" @onclick="() => UpdateProfessorEvent(currentProfessorEvent)">Αποθήκευση</button>
                                                                            <button class="btn btn-secondary" @onclick="CloseEditModalForProfessorEvent">Κλείσιμο</button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        }

                                                        @if (showModalForStudentsAtProfessorEventInterest && selectedStudentToShowDetailsForInterestinProfessorEvent != null)
                                                        {
                                                            <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                                                <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                                    <div class="modal-content">
                                                                        <div class="modal-header">
                                                                            <h5 class="modal-title" style="color: #4682B4;">@($"{selectedStudentFromCache?.Name} {selectedStudentFromCache?.Surname}")</h5>
                                                                            <button type="button" class="close" aria-label="Close" @onclick="CloseStudentDetailsModalAtProfessorEventInterest">
                                                                                <span aria-hidden="true">&times;</span>
                                                                            </button>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            <!-- Profile Picture -->
                                                                            <div class="form-group text-center">
                                                                                @if (selectedStudentFromCache?.Image != null && selectedStudentFromCache.Image.Length > 0)
                                                                                {
                                                                                    var base64Image = Convert.ToBase64String(selectedStudentFromCache.Image);
                                                                                    <img src="data:image/jpeg;base64,@base64Image" alt="Φωτογραφία Προφίλ Σπουδαστή" 
                                                                                         style="max-width: 150px; max-height: 150px; border-radius: 50%; object-fit: cover;" />
                                                                                }
                                                                                else
                                                                                {
                                                                                    <p>Δεν υπάρχει φωτογραφία Προφίλ</p>
                                                                                }
                                                                            </div>

                                                                            <!-- Student Details -->
                                                                            <div class="form-group">
                                                                                <label><strong>Αριθμός Μητρώου</strong></label>
                                                                                <input type="text" class="form-control" value="@selectedStudentFromCache?.RegNumber" readonly />
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">Κατηγορία Σπουδών</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-graduation-cap" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                    <span>@selectedStudentFromCache?.LevelOfDegree</span>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">Πανεπιστήμιο</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-university" style="color: #007BFF; margin-right: 8px;"></i>
                                                                                    <span>@selectedStudentFromCache?.University</span>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">Τμήμα</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-building" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                    <span>@selectedStudentFromCache?.Department</span>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Έτος Σπουδών</strong></label>
                                                                                <input type="text" class="form-control" value="@selectedStudentFromCache?.StudyYear" readonly />
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">Επικοινωνία</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-envelope" style="color: #007BFF; margin-right: 8px;"></i>
                                                                                    <span>@selectedStudentToShowDetailsForInterestinProfessorEvent.StudentEmailShowInterestForEvent</span>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">Τηλέφωνο</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                                    <span>@selectedStudentFromCache?.Telephone</span>
                                                                                </div>
                                                                            </div>
                   
                                                                            <div class="form-group">
                                                                                <label><strong>Περιοχές Ενδιαφέροντος</strong></label>
                                                                                <textarea class="form-control" rows="3" readonly>@selectedStudentFromCache?.AreasOfExpertise</textarea>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Εξειδίκευση</strong></label>
                                                                                <textarea class="form-control" rows="3" readonly>@selectedStudentFromCache?.Keywords</textarea>
                                                                            </div>

                                                                            <!-- Address Section -->
                                                                            <div class="form-group">
                                                                                <label><strong>Περιφέρεια (Μόνιμης Διαμονής)</strong></label>
                                                                                <input type="text" class="form-control" value="@selectedStudentFromCache?.PermanentRegion" readonly />
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Πόλη (Μόνιμης Διαμονής)</strong></label>
                                                                                <input type="text" class="form-control" value="@selectedStudentFromCache?.PermanentTown" readonly />
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">Διεύθυνση</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                    <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                    @if (!string.IsNullOrEmpty(selectedStudentFromCache?.PermanentAddress))
                                                                                    {
                                                                                        <a href="https://www.google.com/maps/search/?api=1&query=@Uri.EscapeDataString(selectedStudentFromCache.PermanentAddress))"
                                                                                           target="_blank"
                                                                                           style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                            @selectedStudentFromCache.PermanentAddress
                                                                                        </a>
                                                                                    }
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">Χρειάζεται Μεταφορά</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto; 
                                                                                     @(selectedStudentToShowDetailsForInterestinProfessorEvent.StudentTransportNeedWhenShowInterestForProfessorEvent == "Ναι" ? "color: #28a745;" : "color: #dc3545;")">
                                                                                    <i class="fas fa-car" style="margin-right: 8px;"></i>
                                                                                    <span>@selectedStudentToShowDetailsForInterestinProfessorEvent.StudentTransportNeedWhenShowInterestForProfessorEvent</span>
                                                                                </div>
                                                                            </div>

                                                                            @if (selectedStudentToShowDetailsForInterestinProfessorEvent.StudentTransportNeedWhenShowInterestForProfessorEvent == "Ναι")
                                                                            {
                                                                                <div class="form-group">
                                                                                    <label><strong>Τοποθεσία Μεταφοράς</strong></label>
                                                                                    <input type="text" class="form-control" value="@selectedStudentToShowDetailsForInterestinProfessorEvent.StudentTransportChosenLocationWhenShowInterestForProfessorEvent" readonly />
                                                                                </div>
                                                                            }

                                                                            <!-- Social Links -->
                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">LinkedIn Προφίλ</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                    <i class="fab fa-linkedin" style="color: #0077b5; margin-right: 8px;"></i>
                                                                                    @if (!string.IsNullOrEmpty(selectedStudentFromCache?.LinkedInProfile))
                                                                                    {
                                                                                        <a href="@selectedStudentFromCache.LinkedInProfile" target="_blank" 
                                                                                           style="color: #0077b5; text-decoration: underline; word-break: break-word;">
                                                                                            @selectedStudentFromCache.LinkedInProfile
                                                                                        </a>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <span style="color: #6c757d;">Δεν έχει οριστεί προφίλ LinkedIn ακόμη..</span>
                                                                                    }
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label style="font-weight: bold;">Προσωπική Ιστοσελίδα</label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                    <i class="fas fa-globe" style="color: #17a2b8; margin-right: 8px;"></i>
                                                                                    @if (!string.IsNullOrEmpty(selectedStudentFromCache?.PersonalWebsite))
                                                                                    {
                                                                                        <a href="@selectedStudentFromCache.PersonalWebsite" target="_blank" 
                                                                                           style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                            @selectedStudentFromCache.PersonalWebsite
                                                                                        </a>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <span style="color: #6c757d;">Δεν έχει οριστεί ιστοσελίδα ακόμη..</span>
                                                                                    }
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button" class="btn btn-secondary" @onclick="CloseStudentDetailsModalAtProfessorEventInterest">Κλείσιμο</button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        }

                                                        @if (showModalForCompaniesAtProfessorEventInterest && selectedCompanyToShowDetailsForInterestinProfessorEvent != null)
                                                        {
                                                            var company = companyDataCache.TryGetValue(selectedCompanyToShowDetailsForInterestinProfessorEvent.CompanyEmailShowInterestForProfessorEvent, out var c) ? c : null;
    
                                                            <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                                                <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                                    <div class="modal-content">
                                                                        <div class="modal-header">
                                                                            <h5 class="modal-title" style="color: #4682B4;">
                                                                                @(company?.CompanyName ?? "N/A")
                                                                            </h5>
                                                                            <button type="button" class="close" @onclick="CloseCompanyDetailsModalAtProfessorEventInterest">
                                                                                <span aria-hidden="true">&times;</span>
                                                                            </button>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            <div class="form-group text-center">
                                                                                @if (company?.CompanyLogo != null && company.CompanyLogo.Length > 0)
                                                                                {
                                                                                    <img src="data:image/png;base64,@Convert.ToBase64String(company.CompanyLogo)" 
                                                                                         alt="Company Logo"
                                                                                         class="rounded-circle img-fluid"
                                                                                         style="max-width: 150px; max-height: 150px; object-fit: cover;" />
                                                                                }
                                                                                else
                                                                                {
                                                                                    <p>Δεν είναι διαθέσιμο</p>
                                                                                }
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Σύντομη Ονομασία</strong></label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-tag" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                    <span class="flex-grow-1">
                                                                                        @(!string.IsNullOrWhiteSpace(company?.CompanyShortName) ? company.CompanyShortName : "Δεν έχει Καθοριστεί")
                                                                                    </span>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Τύπος Εταιρείας</strong></label>
                                                                                <input type="text" class="form-control" value="@company?.CompanyType" readonly />
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Email Εταιρείας</strong></label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-envelope" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                    <span class="flex-grow-1">@selectedCompanyToShowDetailsForInterestinProfessorEvent.CompanyEmailShowInterestForProfessorEvent</span>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Ιστοσελίδα Εταιρείας</strong></label>
                                                                                @if (!string.IsNullOrWhiteSpace(company?.CompanyWebsite))
                                                                                {
                                                                                    <div class="form-control d-flex align-items-center" style="height: auto; cursor: pointer; color: #007bff;"
                                                                                         @onclick="() => OpenUrl(company.CompanyWebsite)">
                                                                                        <i class="fa-solid fa-globe" style="margin-right: 8px;"></i>
                                                                                        <span class="flex-grow-1">@company.CompanyWebsite</span>
                                                                                    </div>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <input type="text" class="form-control" value="Δεν υπάρχει" readonly />
                                                                                }
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Περιγραφή Εταιρείας</strong></label>
                                                                                <textarea class="form-control" rows="3" readonly>@company?.CompanyDescription</textarea>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Δραστηριότητα Εταιρείας</strong></label>
                                                                                <input type="text" class="form-control" value="@company?.CompanyActivity" readonly />
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Περιοχές Ενδιαφέροντος</strong></label>
                                                                                <textarea class="form-control" rows="2" readonly>@company?.CompanyAreas</textarea>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Χώρα</strong></label>
                                                                                <input type="text" class="form-control" value="@company?.CompanyCountry" readonly />
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Περιφέρεια</strong></label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fa-solid fa-map" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                    <span class="flex-grow-1">@company?.CompanyRegions</span>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Πόλη</strong></label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fa-solid fa-city" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                    <span class="flex-grow-1">@company?.CompanyTown</span>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Διεύθυνση</strong></label>
                                                                                <div class="form-control d-flex align-items-center mt-1" style="height: auto;">
                                                                                    <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                    <span @onclick="() => OpenMap(company?.CompanyLocation)"
                                                                                          style="color: #007bff; text-decoration: underline; cursor: pointer; word-break: break-word;">
                                                                                        @company?.CompanyLocation
                                                                                    </span>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Ταχυδρομικός Κώδικας</strong></label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fa-solid fa-envelope-open-text" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                    <span class="flex-grow-1">@company?.CompanyPC</span>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Τηλέφωνο Εταιρείας</strong></label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fa-solid fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                                    <span class="flex-grow-1">@company?.CompanyTelephone</span>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Υπεύθυνος Ανθρώπινου Δυναμικού</strong></label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fas fa-user-tie" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                    <span class="flex-grow-1">@company?.CompanyHRName @company?.CompanyHRSurname</span>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Email Υπεύθυνου</strong></label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fa-solid fa-envelope" style="color: #007bff; margin-right: 8px;"></i>
                                                                                    <span class="flex-grow-1">@company?.CompanyHREmail</span>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group">
                                                                                <label><strong>Τηλέφωνο Υπεύθυνου</strong></label>
                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                    <i class="fa-solid fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                                    <span class="flex-grow-1">@company?.CompanyHRTelephone</span>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button" class="btn btn-secondary" @onclick="CloseCompanyDetailsModalAtProfessorEventInterest">
                                                                                Κλείσιμο
                                                                            </button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        }


                                               
                            }
                            }
 @*---------------------------------------------------------------------------------------- PROFESSORS TAB TABLE END ---------------------------------------------------------------------------------------------------------------------------------------------*@
                        @if (ShouldShowAdminTable())
                        {
                            <div class="content-area">
                                <div class="table-bordered">
                                    <ul class="nav nav-tabs" id="myTab" role="tablist">
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link fade show active" id="adminstudentstats-tab" data-bs-toggle="tab" data-bs-target="#adminstudentstats" type="button" role="tab" aria-controls="adminstudentstats" aria-selected="true">Φοιτητές</button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link" id="admincompaniesstats-tab" data-bs-toggle="tab" data-bs-target="#admincompaniesstats" type="button" role="tab" aria-controls="admincompaniesstats" aria-selected="false">Εταιρείες</button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link" id="adminprofessorsstats-tab" data-bs-toggle="tab" data-bs-target="#adminprofessorsstats" type="button" role="tab" aria-controls="adminprofessorsstats" aria-selected="false">Καθηγητές</button>
                                        </li>
                                    </ul>
                                </div>

                                <!-- Tab panes -->
                                <div class="tab-content mt-3" id="myTabContent">
                                    <!-- STUDENT STATS TAB -->
                                    <div class="tab-pane fade show active" id="adminstudentstats" role="tabpanel" aria-labelledby="adminstudentstats-tab">
                                        <div class="mb-3 row-dark-gray">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <label class="form-label" style="color: #FFF8DC;">• Πληροφορίες Εισόδου / Εξόδου στο AcademyHub • </label>
                                                <button class="btn btn-link" @onclick="ToggleFormVisibilityToShowStudentStatsAsAdmin">
                                                    @if (isStudentStatsFormVisibleToShowStudentStatsAsAdmin)
                                                    {
                                                        <span>&#8722;</span> <!-- Minus sign -->
                                                    }
                                                    else
                                                    {
                                                        <span>&#43;</span> <!-- Plus sign -->
                                                    }
                                                </button>
                                            </div>
                                        </div>
            
                                        @if(isStudentStatsFormVisibleToShowStudentStatsAsAdmin)
                                        {
                                            <style>
                                                .admintable {
                                                    border-color: black !important;
                                                }
                                                .admintable th,
                                                .admintable td {
                                                    border-color: black !important;
                                                }
                                                .admintable thead th {
                                                    border-bottom-width: 2px !important;
                                                }
                                            </style>

                                            <div class="table-responsive">
                                                <table class="admintable table table-striped table-hover table-bordered">
                                                    <thead style="background-color: darkblue; color: white;">
                                                        <tr>
                                                            <th class="align-middle">Όνομα</th>
                                                            <th class="align-middle">Επώνυμο</th>
                                                            <th class="align-middle">Email</th>
                                                            <th class="align-middle">Τμήμα</th>
                                                            <th class="align-middle">Ημ/νία Εγγραφής</th>
                                                            <th class="align-middle">Τελευταία Σύνδεση</th>
                                                            <th class="align-middle">Σύνδεση Από</th>
                                                            <th class="align-middle">Συσκευή</th>
                                                            <th class="align-middle">Τοποθεσία</th>
                                                            <th class="align-middle">Αριθμός LogIn</th>
                                                            <th class="align-middle">Τελευταία IP</th>
                                                            <th class="align-middle">Επικυρωμένος</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        @foreach (var student in StudentsWithAuth0Details)
                                                        {
                                                            <tr>
                                                                <td class="align-middle">@student.Name</td>
                                                                <td class="align-middle">@student.Surname</td>
                                                                <td class="align-middle">@student.Email</td>
                                                                <td class="align-middle">@student.Department</td>
                                                                <td class="align-middle">@student.SignUpDate?.ToString("dd/MM/yyyy HH:mm")</td>
                                                                <td class="align-middle">@student.LatestLogin?.ToString("dd/MM/yyyy HH:mm")</td>
                                                                <td class="align-middle">@student.LoginBrowser</td>
                                                                <td class="align-middle">@(student.IsMobile ? "Κινητό" : "Υπολογιστής")</td>
                                                                <td class="align-middle">
                                                                    @if (student.LocationInfo != null)
                                                                    {
                                                                        <div>
                                                                            <strong>@student.LocationInfo.CityName, @student.LocationInfo.CountryName</strong>
                                                                            <div class="text-muted small">
                                                                                <div>Country Code: @student.LocationInfo.CountryCode (@student.LocationInfo.CountryCode3)</div>
                                                                                <div>Coordinates: @student.LocationInfo.Latitude.ToString("0.0000"), @student.LocationInfo.Longitude.ToString("0.0000")</div>
                                                                                <div>Timezone: @student.LocationInfo.TimeZone</div>
                                                                                <div>Continent: @student.LocationInfo.ContinentCode</div>
                                                                            </div>
                                                                        </div>
                                                                    }
                                                                    else
                                                                    {
                                                                        <span>Άγνωστη τοποθεσία</span>
                                                                    }
                                                                </td>
                                                                <td class="align-middle">@student.LoginTimes</td>
                                                                <td class="align-middle">@student.LastIp</td>
                                                                <td class="align-middle">@(student.IsEmailVerified == true ? "Ναι" : "Όχι")</td>
                                                            </tr>
                                                        }
                                                    </tbody>
                                                </table>
                                            </div>
                                        }

                                        <!-- ✅ Analytics Section moved inside STUDENT TAB -->
                                        <div class="mb-3 row-dark-gray">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <label class="form-label" style="color: #FFF8DC;">• Στατιστικά Εγγεγραμμένων Μελών •</label>
                                                <button class="btn btn-link" @onclick="ToggleAnalyticsVisibility">
                                                    @if (isAnalyticsVisible)
                                                    {
                                                        <span>&#8722;</span> <!-- Minus -->
                                                    }
                                                    else
                                                    {
                                                        <span>&#43;</span> <!-- Plus -->
                                                    }
                                                </button>
                                            </div>
                                        </div>

                                        @if (isAnalyticsVisible)
                                        {
                                            <div class="d-flex justify-content-between align-items-start" style="gap: 40px;">
                                                <!-- Areas Chart -->
                                                <div style="flex: 1; min-height: 450px; border: 1px solid #0E202E; border-radius: 8px; padding: 15px; background-color: #f8f9fa;">
                                                    <h5 class="text-center" style="color: #0E202E; font-weight: bold;">Κατανομή Περιοχών Εξειδίκευσης</h5>
                                                    <div class="d-flex justify-content-between mb-3" style="gap:10px;">
                                                        <select class="form-select" @onchange="FilterAreasBySchool" style="flex: 1;">
                                                            <option value="">Όλες οι Σχολές</option>
                                                            @foreach (var school in AvailableSchools)
                                                            {
                                                                <option value="@school">@school</option>
                                                            }
                                                        </select>
                                                        <select class="form-select" @onchange="FilterAreasByDepartment" style="flex: 1;">
                                                            <option value="">Όλα τα Τμήματα</option>
                                                            @foreach (var dept in AvailableDepartments)
                                                            {
                                                                <option value="@dept">@dept</option>
                                                            }
                                                        </select>
                                                    </div>
                                                    <canvas id="areasChart" style="width: 100%; height: 100%;"></canvas>
                                                </div>

                                                <!-- Skills Chart -->
                                                <div style="flex: 1; min-height: 450px; border: 1px solid #0E202E; border-radius: 8px; padding: 15px; background-color: #f8f9fa;">
                                                    <h5 class="text-center" style="color: #0E202E; font-weight: bold;">Κατανομή Τεχνικών Ικανοτήτων</h5>
                                                    <div class="d-flex justify-content-between mb-3" style="gap:10px;">
                                                        <select class="form-select" @onchange="FilterSkillsBySchool" style="flex: 1;">
                                                            <option value="">Όλες οι Σχολές</option>
                                                            @foreach (var school in AvailableSchools)
                                                            {
                                                                <option value="@school">@school</option>
                                                            }
                                                        </select>
                                                        <select class="form-select" @onchange="FilterSkillsByDepartment" style="flex: 1;">
                                                            <option value="">Όλα τα Τμήματα</option>
                                                            @foreach (var dept in AvailableDepartments)
                                                            {
                                                                <option value="@dept">@dept</option>
                                                            }
                                                        </select>
                                                    </div>
                                                    <canvas id="skillsChart" style="width: 100%; height: 100%;"></canvas>
                                                </div>
                                            </div>
                                        }
                                    </div> 
                                </div> 
                            </div> 
                            <br/>
                            <br/>
                        } @*kleisimo Admin Table stis 22/09 - Prepei na kanw to idio kai gia ta alla Tabs*@

@*---------------------------------------------------------------------------------------- ADMIN TABLE END ---------------------------------------------------------------------------------------------------------------------------------------------*@


                            @*RESEARCH GROUP CONTENT*@
                            @if (UserRole == "Research Group")
                            {
                                @if (!isInitializedAsResearchGroupUser)
                                {
                                    <div style="color: purple; font-weight: bold; text-align: center; margin: 10px 0;">
                                        Φορτώνει, Παρακαλώ Περιμένετε...
                                    </div>
                                    <div class="loading-bar-container">                                       
                                        <div class="loading-bar"></div>
                                    </div>
                                }
                                else if (!isResearchGroupRegistered)
                                {
                                    <div style="display: flex; justify-content: flex-start; padding: 20px; flex-direction: column;">
                                        <div style="width: 300px; border: none; border-radius: 12px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); transition: transform 0.3s ease, box-shadow 0.3s ease; background: linear-gradient(135deg, #f9f9f9, #e0e0e0);">
                                            <div style="padding: 20px; text-align: center;">
                                                <h5 style="font-size: 1.5rem; font-weight: bold; color: #333; margin-bottom: 20px;">Εγγραφή Ερευνητικής Ομάδας</h5>
                                                <a style="background-color: #007bff; border: none; border-radius: 25px; padding: 10px 20px; font-size: 1rem; color: white; text-decoration: none; transition: background-color 0.3s ease, transform 0.2s ease;" 
                                                   href="researchGroupRegistration" 
                                                   onmouseover="this.style.backgroundColor='#0056b3'; this.style.transform='scale(1.05)'" 
                                                   onmouseout="this.style.backgroundColor='#007bff'; this.style.transform='scale(1)'">
                                                    Εγγραφή
                                                </a>
                                            </div>
                                        </div>
                                        <p style="font-size: 0.9rem; color: #000; margin-top: 7px; text-align: center; font-weight: bold;">
                                            <span style="color: #ff0000;">**</span> <span style="color: #ff0000;">Προσοχή</span>: Για εμφάνιση του περιεχομένου της σελίδας είναι <span style="color: #ff0000;">Υποχρεωτική</span> η Εγγραφή σας
                                        </p>                                      
                                    </div>
                                }
                                else
                                {
                                    <div class="table-bordered">
                                        <!-- Tabs navigation -->
                                        <ul class="nav nav-tabs" id="myTab" role="tablist">
                                            <li class="nav-item" role="presentation">
                                                <button class="nav-link fade show active" id="rgannouncements-tab" data-bs-toggle="tab" data-bs-target="#rgannouncements" type="button" role="tab" aria-controls="rgannouncements" aria-selected="true">Ανακοινώσεις</button>
                                            </li>
                                            <li class="nav-item" role="presentation">
                                                <button class="nav-link" id="rgevents-tab" data-bs-toggle="tab" data-bs-target="#rgevents" type="button" role="tab" aria-controls="rgevents" aria-selected="false">Εκδηλώσεις</button>
                                            </li>
                                            <li class="nav-item" role="presentation">
                                                <button class="nav-link" id="rgsearchcompany-tab" data-bs-toggle="tab" data-bs-target="#rgsearchcompany" type="button" role="tab" aria-controls="rgsearchcompany" aria-selected="false">Αναζήτηση Εταιρείας</button>
                                            </li>
                                            <li class="nav-item" role="presentation">
                                                <button class="nav-link" id="rgsearchprofessor-tab" data-bs-toggle="tab" data-bs-target="#rgsearchprofessor" type="button" role="tab" aria-controls="rgsearchprofessor" aria-selected="false">Αναζήτηση Καθηγητή</button>
                                            </li>
                                            <li class="nav-item" role="presentation">
                                                <button class="nav-link" id="rgstatistics-tab" data-bs-toggle="tab" data-bs-target="#rgstatistics" type="button" role="tab" aria-controls="rgstatistics" aria-selected="false">Στατιστικά Ερευνητικής Ομάδας</button>
                                            </li> @*ADDED 10/09/25*@
                                        </ul>

                                        <!-- Tab panes -->
                                        <div class="tab-content mt-3" id="myTabContent">
                                            <!-- CREATE ANNOUNCEMENTS TAB AS RG -->
                                            <div class="tab-pane show active" id="rgannouncements" role="tabpanel" aria-labelledby="rgannouncements-tab">
                                                <div class="mb-3 row-dark-gray">
                                                    <div class="d-flex justify-content-between align-items-center">
                                                        <label class="form-label" style="color: #FFF8DC;">• Πρόσφατες Ανακοινώσεις •</label>
                                                        <button class="btn btn-link" @onclick="ToggleFormVisibilityToShowGeneralAnnouncementsAndEventsAsRG">
                                                            @if (isAnnouncementsFormVisibleToShowGeneralAnnouncementsAndEventsAsRG)
                                                            {
                                                                <span>&#8722;</span> <!-- Minus sign -->
                                                            }
                                                            else
                                                            {
                                                                <span>&#43;</span> <!-- Plus sign -->
                                                            }
                                                        </button>
                                                    </div>                              
                                                </div>

                                                @if (isAnnouncementsFormVisibleToShowGeneralAnnouncementsAndEventsAsRG)
                                                {
                                                    <!-- University News Section -->
                                                    <div class="mb-3" style="background-color: #e6f2ff; border: 1px solid #b3c6e0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                                        <div class="d-flex justify-content-between align-items-center p-3" style="border-bottom: 1px solid #b3c6e0;">
                                                            <h1 class="news-heading form-label m-0">
                                                                <span class="black-text">
                                                                    <span style="color: #b399d4; margin-left: 10px; margin-right: 5px;">
                                                                        <i class="fas fa-rss"></i>
                                                                    </span>
                                                                    Πανεπιστήμιο Αθηνών
                                                                </span>
                                                            </h1>
                                                            <button class="btn" 
                                                                    style="width: 30px; height: 30px; border-radius: 50%; background-color: #0d47a1; color: white; border: none; padding: 0; display: flex; align-items: center; justify-content: center; margin-right: 10px;" 
                                                                    @onclick="ToggleUniversityNewsVisibility">
                                                                @if (isUniversityNewsVisible)
                                                                {
                                                                    <span>&#8722;</span> 
                                                                }
                                                                else
                                                                {
                                                                    <span>&#43;</span> 
                                                                }
                                                            </button>
                                                        </div>
    
                                                        @if (isUniversityNewsVisible)
                                                        {
                                                            <div id="university-news-content" class="p-3" style="border-top: 1px solid #e6f2ff;">
                                                                @if (newsArticles != null && newsArticles.Any())
                                                                {
                                                                    @foreach (var article in newsArticles)
                                                                    {
                                                                        <div class="news-article mb-2 pb-2" style="border-bottom: 1px dashed #ccc;">
                                                                            <a href="@article.Url" target="_blank" style="color: #0d47a1; text-decoration: none;">
                                                                                <i class="fa fa-external-link me-2" style="font-size: 0.8em;"></i>@article.Title
                                                                            </a>
                                                                        </div>
                                                                    }
                                                                }
                                                                else
                                                                {
                                                                    <p class="mb-0 text-muted">Καμία Ανακοίνωση από το Πανεπιστήμιο Αθηνών ακόμη....</p>
                                                                }
                                                            </div>
                                                        }
                                                    </div>

                                                    <!-- SVSE News Section -->
                                                    <div class="mb-3" style="background-color: #e6f2ff; border: 1px solid #b3c6e0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                                        <div class="d-flex justify-content-between align-items-center p-3" style="border-bottom: 1px solid #b3c6e0;">
                                                            <h1 class="news-heading form-label m-0">
                                                                <span class="black-text">
                                                                    <span style="color: #b399d4; margin-left: 10px; margin-right: 5px;">
                                                                        <i class="fas fa-rss"></i>
                                                                    </span>
                                                                    Σύνδεσμος Βιομηχανιών Στερεάς Ελλάδας
                                                                </span>
                                                            </h1>
                                                            <button class="btn" 
                                                                    style="width: 30px; height: 30px; border-radius: 50%; background-color: #0d47a1; color: white; border: none; padding: 0; display: flex; align-items: center; justify-content: center; margin-right: 10px;" 
                                                                    @onclick="ToggleSvseNewsVisibility">
                                                                @if (isSvseNewsVisible)
                                                                {
                                                                    <span>&#8722;</span> <!-- Minus sign -->
                                                                }
                                                                else
                                                                {
                                                                    <span>&#43;</span> <!-- Plus sign -->
                                                                }
                                                            </button>
                                                        </div>
    
                                                        @if (isSvseNewsVisible)
                                                        {
                                                            <div id="svse-news-content" class="p-3" style="border-top: 1px solid #e6f2ff;">
                                                                @if (svseNewsArticles != null && svseNewsArticles.Any())
                                                                {
                                                                    @foreach (var article in svseNewsArticles)
                                                                    {
                                                                        <div class="news-article mb-2 pb-2" style="border-bottom: 1px dashed #ccc;">
                                                                            <a href="@article.Url" target="_blank" style="color: #0d47a1; text-decoration: none;">
                                                                                <i class="fa fa-external-link me-2" style="font-size: 0.8em;"></i>@article.Title
                                                                            </a>
                                                                        </div>
                                                                    }
                                                                }
                                                                else
                                                                {
                                                                    <p class="mb-0 text-muted">Καμία Ανακοίνωση από τον ΣΒΣΕ ακόμη....</p>
                                                                }
                                                            </div>
                                                        }
                                                    </div>

                                                    <!-- Platform company announcements -->
                                                    <div class="mb-3" style="background-color: #e6f2ff; border: 1px solid #b3c6e0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                                        <div class="d-flex justify-content-between align-items-center p-3" style="border-bottom: 1px solid #b3c6e0;">
                                                            <h1 class="news-heading form-label m-0">
                                                                <span class="black-text">
                                                                    <span style="color: #b399d4; margin-left: 10px; margin-right: 5px;">
                                                                        <i class="fas fa-list"></i>
                                                                    </span>
                                                                    Ανακοινώσεις Εταιρειών
                                                                </span>
                                                            </h1>
                                                            <button class="btn" 
                                                                    style="width: 30px; height: 30px; border-radius: 50%; background-color: #0d47a1; color: white; border: none; padding: 0; display: flex; align-items: center; justify-content: center; margin-right: 10px;" 
                                                                    @onclick="ToggleCompanyAnnouncementsVisibility">
                                                                @if (isCompanyAnnouncementsVisible)
                                                                {
                                                                    <span>&#8722;</span> <!-- Minus sign -->
                                                                }
                                                                else
                                                                {
                                                                    <span>&#43;</span> <!-- Plus sign -->
                                                                }
                                                            </button>
                                                        </div>
    
                                                        @if (isCompanyAnnouncementsVisible)
                                                        {
                                                            <div class="p-3" style="border-top: 1px solid #e6f2ff;">
                                                                @if (Announcements != null && Announcements.Any(announcement => announcement.CompanyAnnouncementStatus == "Δημοσιευμένη"))
                                                                {
                                                                    <!-- Display paginated announcements sorted by upload date descending -->
                                                                    @foreach (var announcement in Announcements
                                                                       .Where(a => a.CompanyAnnouncementStatus == "Δημοσιευμένη")
                                                                       .OrderByDescending(a => a.CompanyAnnouncementUploadDate)
                                                                       .Skip((currentPageForCompanyAnnouncements - 1) * pageSize)
                                                                       .Take(pageSize))
                                                                    {
                                                                        <div class="news-article mb-3 pb-2" style="border-bottom: 1px dashed #ccc;">
                                                                            <!-- Clicking on title toggles description -->
                                                                            <a href="javascript:void(0);"
                                                                               @onclick="() => ToggleDescription(announcement.Id)"
                                                                               style="display: block; max-width: 100%; overflow-wrap: break-word; color: #0d47a1; text-decoration: none; cursor: pointer;"
                                                                               title="Κάντε Κλικ εδώ για να δείτε την περιγραφή της ανακοίνωσης">
                                                                                <span class="black-text">• <strong>@(announcement.Company?.CompanyName ?? "Άγνωστη Εταιρεία")</strong></span> - @announcement.CompanyAnnouncementTitle
                                                                                <span class="text-muted">(@announcement.CompanyAnnouncementUploadDate.ToString("dd/MM/yyyy"))</span>
                                                                            </a>

                                                                            <!-- Show description based on toggle state -->
                                                                            <div class="announcement-description mt-2 @(expandedAnnouncementId == announcement.Id ? "expanded" : "collapsed")">
                                                                                @if (expandedAnnouncementId == announcement.Id)
                                                                                {
                                                                                    <p style="color: #333;">@announcement.CompanyAnnouncementDescription</p>
                                
                                                                                    @if (announcement.CompanyAnnouncementAttachmentFile != null && announcement.CompanyAnnouncementAttachmentFile.Length > 0)
                                                                                    {
                                                                                        <p class="announcement-attachment mt-2">
                                                                                            <a href="#"
                                                                                               @onclick="() => DownloadAnnouncementAttachmentFrontPage(announcement.CompanyAnnouncementAttachmentFile, announcement.CompanyAnnouncementTitle)"
                                                                                               style="color: #c62828; text-decoration: none;"
                                                                                               title="Κάντε Κλικ εδώ για να κατεβάσετε το αρχείο">
                                                                                                <i class="fa fa-download me-1"></i> 
                                                                                                Συννημένο Αρχείο Ανακοίνωσης
                                                                                            </a>
                                                                                        </p>
                                                                                    }
                                                                                }
                                                                            </div>
                                                                        </div>
                                                                    }

                                                                        <!-- Pagination Controls for Company Announcements -->
                                                                        <div class="d-flex justify-content-center align-items-center mt-3 gap-1">
                                                                            <!-- First Page (<<) -->
                                                                            <span class="pagination-item @(currentPageForCompanyAnnouncements == 1 ? "disabled" : "")"
                                                                                  @onclick="GoToFirstPageForCompanyAnnouncements">
                                                                                &lt;&lt;
                                                                            </span>

                                                                            <!-- Previous Page (<) -->
                                                                            <span class="pagination-item @(currentPageForCompanyAnnouncements == 1 ? "disabled" : "")"
                                                                                  @onclick="PreviousPageForCompanyAnnouncements">
                                                                                &lt;
                                                                            </span>

                                                                            <!-- Page Numbers -->
                                                                            @foreach (var pageNumber in GetVisiblePagesForCompanyAnnouncements())
                                                                            {
                                                                                if (pageNumber == -1)
                                                                                {
                                                                                    <span class="pagination-ellipsis">...</span>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <span class="pagination-item @(pageNumber == currentPageForCompanyAnnouncements ? "active" : "")"
                                                                                          @onclick="() => GoToPageForCompanyAnnouncements(pageNumber)">
                                                                                        @pageNumber
                                                                                    </span>
                                                                                }
                                                                            }

                                                                            <!-- Next Page (>) -->
                                                                            <span class="pagination-item @(currentPageForCompanyAnnouncements == totalPagesForCompanyAnnouncements ? "disabled" : "")"
                                                                                  @onclick="NextPageForCompanyAnnouncements">
                                                                                &gt;
                                                                            </span>

                                                                            <!-- Last Page (>>) -->
                                                                            <span class="pagination-item @(currentPageForCompanyAnnouncements == totalPagesForCompanyAnnouncements ? "disabled" : "")"
                                                                                  @onclick="GoToLastPageForCompanyAnnouncements">
                                                                                &gt;&gt;
                                                                            </span>

                                                                            <span class="ms-3">Σελίδα @currentPageForCompanyAnnouncements από @totalPagesForCompanyAnnouncements</span>
                                                                        </div>

                                                                }
                                                                else
                                                                {
                                                                    <p class="mb-0 text-muted">Καμία Ανακοίνωση από Εταιρείες ακόμη......</p>
                                                                }
                                                            </div>
                                                        }
                                                    </div>

                                                    <!-- Platform professor announcements -->
                                                    <div class="mb-3" style="background-color: #e6f2ff; border: 1px solid #b3c6e0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                                        <div class="d-flex justify-content-between align-items-center p-3" style="border-bottom: 1px solid #b3c6e0;">
                                                            <h1 class="news-heading form-label m-0">
                                                                <span class="black-text">
                                                                    <span style="color: #b399d4; margin-left: 10px; margin-right: 5px;">
                                                                        <i class="fas fa-list"></i>
                                                                    </span>
                                                                    Ανακοινώσεις Καθηγητών
                                                                </span>
                                                            </h1>
                                                            <button class="btn" 
                                                                    style="width: 30px; height: 30px; border-radius: 50%; background-color: #0d47a1; color: white; border: none; padding: 0; display: flex; align-items: center; justify-content: center; margin-right: 10px; cursor: pointer;"
                                                                    @onclick="ToggleProfessorAnnouncementsVisibility">
                                                                @if (isProfessorAnnouncementsVisible)
                                                                {
                                                                    <span>&#8722;</span> <!-- Minus sign -->
                                                                }
                                                                else
                                                                {
                                                                    <span>&#43;</span> <!-- Plus sign -->
                                                                }
                                                            </button>
                                                        </div>
    
                                                        @if (isProfessorAnnouncementsVisible)
                                                        {
                                                            <div class="p-3" style="border-top: 1px solid #e6f2ff;">
                                                                @if (ProfessorAnnouncements != null && ProfessorAnnouncements.Any(announcement => announcement.ProfessorAnnouncementStatus == "Δημοσιευμένη"))
                                                                {
                                                                    <!-- Display paginated announcements sorted by upload date descending -->
                                                                    @foreach (var announcement in ProfessorAnnouncements
                                                                   .Where(a => a.ProfessorAnnouncementStatus == "Δημοσιευμένη")
                                                                   .OrderByDescending(a => a.ProfessorAnnouncementUploadDate)
                                                                   .Skip((currentPageForProfessorAnnouncements - 1) * pageSize)
                                                                   .Take(pageSize))
                                                                   {
                                                                        <div class="news-article mb-3 pb-2" style="border-bottom: 1px dashed #ccc;">
                                                                            <!-- Clicking on title toggles description -->
                                                                            <a href="javascript:void(0);"
                                                                               @onclick="() => ToggleDescriptionForProfessorAnnouncements(announcement.Id)"
                                                                               style="display: block; max-width: 100%; overflow-wrap: break-word; color: #0d47a1; text-decoration: none; cursor: pointer;"
                                                                               title="Κάντε Κλικ εδώ για να δείτε την περιγραφή της ανακοίνωσης">
                                                                                <span class="black-text">• 
                                                                                    <strong>@(announcement.Professor?.ProfName ?? "N/A")</strong> 
                                                                                    <strong>@(announcement.Professor?.ProfSurname ?? "N/A")</strong>
                                                                                </span> - @announcement.ProfessorAnnouncementTitle
                                                                                <span class="text-muted">(@announcement.ProfessorAnnouncementUploadDate.ToString("dd/MM/yyyy"))</span>
                                                                            </a>
                                                                            <!-- Show description based on toggle state -->
                                                                            <div class="announcement-description mt-2 @(expandedProfessorAnnouncementId == announcement.Id ? "expanded" : "collapsed")">
                                                                                @if (expandedProfessorAnnouncementId == announcement.Id)
                                                                                {
                                                                                    <p style="color: #333;">@announcement.ProfessorAnnouncementDescription</p>
                                
                                                                                    @if (announcement.ProfessorAnnouncementAttachmentFile != null && announcement.ProfessorAnnouncementAttachmentFile.Length > 0)
                                                                                    {
                                                                                        <p class="announcement-attachment mt-2">
                                                                                            <a href="#"
                                                                                               @onclick="() => DownloadProfessorAnnouncementAttachmentFrontPage(announcement.ProfessorAnnouncementAttachmentFile, announcement.ProfessorAnnouncementTitle)"
                                                                                               style="color: #c62828; text-decoration: none;"
                                                                                               title="Κάντε Κλικ εδώ για να κατεβάσετε το αρχείο">
                                                                                                <i class="fa fa-download me-1"></i>
                                                                                                Συννημένο Αρχείο Ανακοίνωσης
                                                                                            </a>
                                                                                        </p>
                                                                                    }
                                                                                }
                                                                            </div>
                                                                        </div>
                                                                   }
                                                                        <!-- Pagination Controls for Professor Announcements -->
                                                                        <div class="d-flex justify-content-center align-items-center mt-3 gap-1">
                                                                            <!-- First Page (<<) -->
                                                                            <span class="pagination-item @(currentPageForProfessorAnnouncements == 1 ? "disabled" : "")"
                                                                                  @onclick="GoToFirstPageForProfessorAnnouncements">
                                                                                &lt;&lt;
                                                                            </span>

                                                                            <!-- Previous Page (<) -->
                                                                            <span class="pagination-item @(currentPageForProfessorAnnouncements == 1 ? "disabled" : "")"
                                                                                  @onclick="PreviousPageForProfessorAnnouncements">
                                                                                &lt;
                                                                            </span>

                                                                            <!-- Page Numbers -->
                                                                            @foreach (var pageNumber in GetVisiblePagesForProfessorAnnouncements())
                                                                            {
                                                                                if (pageNumber == -1)
                                                                                {
                                                                                    <span class="pagination-ellipsis">...</span>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <span class="pagination-item @(pageNumber == currentPageForProfessorAnnouncements ? "active" : "")"
                                                                                          @onclick="() => GoToPageForProfessorAnnouncements(pageNumber)">
                                                                                        @pageNumber
                                                                                    </span>
                                                                                }
                                                                            }

                                                                            <!-- Next Page (>) -->
                                                                            <span class="pagination-item @(currentPageForProfessorAnnouncements == totalPagesForProfessorAnnouncements ? "disabled" : "")"
                                                                                  @onclick="NextPageForProfessorAnnouncements">
                                                                                &gt;
                                                                            </span>

                                                                            <!-- Last Page (>>) -->
                                                                            <span class="pagination-item @(currentPageForProfessorAnnouncements == totalPagesForProfessorAnnouncements ? "disabled" : "")"
                                                                                  @onclick="GoToLastPageForProfessorAnnouncements">
                                                                                &gt;&gt;
                                                                            </span>

                                                                            <span class="ms-3">Σελίδα @currentPageForProfessorAnnouncements από @totalPagesForProfessorAnnouncements</span>
                                                                        </div>

                                                                }
                                                                else
                                                                {
                                                                    <p class="mb-0 text-muted">Καμία Ανακοίνωση από Καθηγητές ακόμη......</p>
                                                                }
                                                            </div>
                                                        }
                                                    </div>                                                          
                                                    <br/>
                                                    <br />                                                      
                                                }
                                            </div>
                
                                            <!-- SHOW EVENTS AS RG - CALENDAR SHOULD ONLY BE IN THIS TAB -->
                                            <div class="tab-pane fade" id="rgevents" role="tabpanel" aria-labelledby="rgevents-tab">
                                                <div class="mb-3 row-dark-gray">
                                                    <div class="calendar-section">
                                                        <strong> - Ημερολόγιο Εκδηλώσεων - </strong>
                                                        <div>
                                                            <!-- CALENDAR component -->
                                                            <div class="calendar">
                                                                <div class="calendar-header">
                                                                    <h2>@currentMonth.ToString("MMMM yyyy", CultureInfo.GetCultureInfo("el-GR"))</h2>
                                                                </div>
                                                                <div class="calendar-grid">
                                                                    <!-- Days of the week header in Greek -->
                                                                    <div class="day-header">Δ</div>
                                                                    <div class="day-header">Τ</div>
                                                                    <div class="day-header">Τ</div>
                                                                    <div class="day-header">Π</div>
                                                                    <div class="day-header">Π</div>
                                                                    <div class="day-header">Σ</div>
                                                                    <div class="day-header">Κ</div>

                                                                    @for (int i = 0; i < adjustedFirstDayOfMonth; i++)
                                                                    {
                                                                        <div class="day-cell empty-cell"></div>
                                                                    }

                                                                    @for (int i = 1; i <= daysInCurrentMonth; i++)
                                                                    {
                                                                        DateTime dayDate = new DateTime(currentMonth.Year, currentMonth.Month, i);
            
                                                                        // Filter events by status "Δημοσιευμένη"
                                                                        var companyEvents = eventsForDate.ContainsKey(i) 
                                                                            ? eventsForDate[i].Where(e => e.CompanyEventStatus == "Δημοσιευμένη").ToList()
                                                                            : new List<CompanyEvent>();
                
                                                                        var professorEvents = eventsForDateForProfessors.ContainsKey(i)
                                                                            ? eventsForDateForProfessors[i].Where(e => e.ProfessorEventStatus == "Δημοσιευμένη").ToList()
                                                                            : new List<ProfessorEvent>();
                
                                                                        bool hasPublishedEvent = companyEvents.Any() || professorEvents.Any();

                                                                        string dayCellClass = "day-cell";

                                                                        // Check if this day is today's date
                                                                        if (dayDate.Date == DateTime.Today.Date)
                                                                        {
                                                                            dayCellClass += " today";
                                                                        }

                                                                        // Check if this day should be highlighted
                                                                        if (i == highlightedDay)
                                                                        {
                                                                            dayCellClass += " highlighted";
                                                                        }

                                                                        // Add event-day class if this day has published events
                                                                        if (hasPublishedEvent)
                                                                        {
                                                                            dayCellClass += " event-day";
                                                                        }

                                                                            <div class="@dayCellClass" @onclick="() => OnDateClicked(dayDate)">
                                                                                <span>@i</span>
                                                                                @if (hasPublishedEvent)
                                                                                {
                                                                                    <div class="event-indicators">
                                                                                        @if (companyEvents.Any())
                                                                                        {
                                                                                            <span class="company-indicator">● (@companyEvents.Count)</span>
                                                                                        }
                                                                                        @if (professorEvents.Any())
                                                                                        {
                                                                                            <span class="professor-indicator">● (@professorEvents.Count)</span>
                                                                                        }
                                                                                    </div>
                                                                                }
                                                                            </div>
                                                                    }
                                                                </div>

                                                                <!-- Pagination buttons to navigate between months -->
                                                                <div class="pagination">
                                                                    <button @onclick="ShowPreviousMonth" class="btn btn-small">◀</button>
                                                                    <button @onclick="ShowNextMonth" class="btn btn-small">▶</button>
                                                                </div>
                                                                <!-- Legend section -->
                                                                    <div class="calendar-legend">
                                                                        <div class="legend-item">
                                                                            <span class="legend-color today-legend"></span>
                                                                            <span class="legend-text">Σημερινή Ημερομηνία</span>
                                                                        </div>
                                                                        <div class="legend-item">
                                                                            <span class="legend-color event-day-legend"></span>
                                                                            <span class="legend-text">Ημέρα Εκδήλωσης</span>
                                                                        </div>
                                                                        <div class="legend-item">
                                                                            <span class="company-indicator">●</span>
                                                                            <span class="legend-text">(Εκδηλώσεις Εταιρειών)</span>
                                                                        </div>
                                                                        <div class="legend-item">
                                                                            <span class="professor-indicator">●</span>
                                                                            <span class="legend-text">(Εκδηλώσεις Καθηγητών)</span>
                                                                        </div>
                                                                    </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                @if (isModalVisibleToShowEventsOnCalendarForEachClickedDay)
                                                {
                                                    <div class="row mb-3">
                                                        <div class="col-md-12">
                                                            <div class="modal custom-modal"> <!-- Added custom class here -->
                                                                        <div class="modal-content">
                                                                            <h3><strong>Λεπτομέρειες Εκδήλωσης/σεων</strong>: <span style="color: #00008B;">@selectedDate?.ToString("MMMM dd yyyy")</span></h3>
                                                                    <!-- Filter Section -->
                                                                    @if (selectedEvent == null)
                                                                    {
                                                                        <div class="form-group">
                                                                            <label style="font-weight: bold;">Φιλτράρισμα Εκδηλώσεων</label>
                                                                            <div class="input-group custom-width">
                                                                                <select class=".form-control-calendarEventModal" @bind="selectedEventFilter">
                                                                                    <option value="All">Όλες οι Εκδηλώσεις</option>
                                                                                    <option value="Company">Εκδηλώσεις Εταιρειών</option>
                                                                                    <option value="Professor">Εκδηλώσεις Καθηγητών</option>
                                                                                </select>
                                                                                <div class="input-group-append">
                                                                                    <span class="input-group-text"></span>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <br/>
                                                                        @if (selectedEvent == null)
                                                                        {
                                                                            @if (filteredCompanyEvents.Count == 0 && filteredProfessorEvents.Count == 0)
                                                                            {
                                                                                <p>
                                                                                    "Δεν βρέθηκε καμία Εκδήλωση για αυτήν τη μέρα"
                                                                                </p>
                                                                                <p>
                                                                                    Η σημερινή ημερομηνία είναι: <strong>@DateTime.Today.ToString("dd MMMM , yyyy", new System.Globalization.CultureInfo("el-GR"))</strong>
                                                                                </p>
                                                                            }
                                                                            else
                                                                            {
                                                                                <ul class="list-group">
                                                                                    @if (selectedEventFilter == "All" || selectedEventFilter == "Company" || selectedEventFilter == "Professor")
                                                                                    {
                                                                                        <table class="table table-responsive" style="width: 100%; table-layout: auto;">
                                                                                            <thead>
                                                                                                <tr>
                                                                                                    <th class="text-center" style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">Διοργανωτής</th>
                                                                                                    <th class="text-center" style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">Ημερομηνία</th>
                                                                                                    <th class="text-center" style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">Ώρα</th>                                                                                                          
                                                                                                    <th class="text-center" style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">Τίτλος</th>                                                                                                 
                                                                                                    <th class="text-center" style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">Λεπτομέρειες</th>
                                                                                                    @*
                                                                                                    @if (selectedEventFilter != "Professor")  
                                                                                                    {
                                                                                                        <th class="text-center" style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">Ένδειξη Ενδιαφέροντος</th>
                                                                                                    }
                                                                                                    *@
                                                                                                </tr>
                                                                                            </thead>
                                                                                            <tbody>
                                                                                                @if (selectedEventFilter == "All" || selectedEventFilter == "Company")
                                                                                                {
                                                                                                    @foreach (var companyEvent in filteredCompanyEvents)
                                                                                                    {
                                                                                                        bool hasAlreadyExpressedInterest = dbContext.InterestInCompanyEventsAsProfessor
                                                                                                            .Any(i => i.RNGForCompanyEventInterestAsProfessor == companyEvent.RNGForEventUploadedAsCompany 
                                                                                                                    && i.ProfessorEmailShowInterestForCompanyEvent == CurrentUserEmail);

                                                                                                        Console.WriteLine($"Interest found: {hasAlreadyExpressedInterest} for {companyEvent.CompanyEventTitle} with Professor Email {CurrentUserEmail}");
                        
                                                                                                        <tr style="cursor:pointer; text-align: center; background-color: @(hasAlreadyExpressedInterest ? "lightgreen" : "transparent");">
                                                                                                            <td style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">@companyEvent.Company.CompanyName</td>
                                                                                                            <td style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">
                                                                                                                @companyEvent.CompanyEventActiveDate.Date.ToString("dd MMMM", new System.Globalization.CultureInfo("el-GR"))
                                                                                                            </td>
                                                                                                            <td style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">@companyEvent.CompanyEventTime</td>
                                                                                                            <td style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">@companyEvent.CompanyEventTitle</td>
                                                                                                            <td style="max-width: auto; overflow: hidden; text-overflow: ellipsis; justify-content: center; align-items: center; height: 100%; vertical-align: middle;">
                                                                                                                <i class="fas fa-eye" @onclick="() => ShowEventDetails(companyEvent)" style="cursor: pointer; font-size: 20px;"></i>
                                                                                                            </td>
                                                                                                            @*
                                                                                                            @if (selectedEventFilter != "Professor")  
                                                                                                            {
                                                                                                                <td style="max-width: 250px; text-align: center; vertical-align: middle;">
                                                                                                                    @if (hasAlreadyExpressedInterest)
                                                                                                                    {
                                                                                                                        <span style="color: black; font-weight: bold;">Έχετε Εκδηλώσει Ενδιαφέρον</span>
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        <i class="fas fa-heart" @onclick="() => ShowInterestInCompanyEventAsProfessor(companyEvent)" 
                                                                                                                           style="cursor: pointer; font-size: 20px; color: goldenrod;"></i>
                                                                                                                    }
                                                                                                                </td>
                                                                                                            }
                                                                                                            *@
                                                                                                        </tr>
                                                                                                    }
                                                                                                }

                                                                                                @if (selectedEventFilter == "All" || selectedEventFilter == "Professor")
                                                                                                {
                                                                                                    @foreach (var professorEvent in filteredProfessorEvents)
                                                                                                    {
                                                                                                        <tr style="cursor:pointer; text-align: center;">
                                                                                                            <td style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">
                                                                                                                @professorEvent.Professor?.ProfName @professorEvent.Professor?.ProfSurname
                                                                                                            </td>
                                                                                                            <td style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">@professorEvent.ProfessorEventActiveDate.Date.ToString("dd MMMM", new System.Globalization.CultureInfo("el-GR"))</td>
                                                                                                            <td style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">@professorEvent.ProfessorEventTime</td>
                                                                                                            <td style="max-width: auto; overflow: hidden; text-overflow: ellipsis;">@professorEvent.ProfessorEventTitle</td>
                                                                                                            <td style="max-width: auto; overflow: hidden; text-overflow: ellipsis; justify-content: center; align-items: center; height: 100%; vertical-align: middle;">
                                                                                                                <i class="fas fa-eye" @onclick="() => ShowEventDetails(professorEvent)" style="cursor: pointer; font-size: 20px;"></i>
                                                                                                            </td>
                                                                                                            @*
                                                                                                            @if (selectedEventFilter != "Professor")  
                                                                                                            {
                                                                                                                <td> - </td>
                                                                                                            }
                                                                                                            *@
                                                                                                        </tr>
                                                                                                    }
                                                                                                }
                                                                                            </tbody>
                                                                                        </table>
                                                                                    }
                                                                                </ul>

                                                                            }
                                                                        }

                                                                        <button class="btn btn-danger mt-3" @onclick="CloseModalForCompanyAndProfessorEventTitles">Κλείσιμο</button>
                                                                    }
                                                                    else
                                                                    {
                                                                        <!-- Display full details of the selected event -->
                                                                        @if (selectedEvent is CompanyEvent companyEventDetails)
                                                                        {
                                                                            <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                                                                <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                                                    <div class="modal-content">
                                                                                        <div class="modal-header">
                                                                                            <h5 class="modal-title" style="color: #4682B4;">@companyEventDetails.CompanyEventTitle</h5>
                                                                                            <button type="button" class="close" @onclick="CloseEventDetails">
                                                                                                <span aria-hidden="true">&times;</span>
                                                                                            </button>
                                                                                        </div>
                                                                                        <div class="modal-body">
                                                                                            @if (companyEventDetails.Company.CompanyLogo != null)
                                                                                            {
                                                                                                <div class="form-group text-center">
                                                                                                    <img src="data:image/png;base64,@Convert.ToBase64String(companyEventDetails.Company.CompanyLogo)" 
                                                                                                         class="rounded-circle img-fluid" 
                                                                                                         style="width: 150px; height: 150px; object-fit: cover;" 
                                                                                                         alt="Company Logo" />
                                                                                                </div>
                                                                                            }

                                                                                            <div class="list-group">
                                                                                                <div class="form-group">
                                                                                                    <label style="font-weight: bold;">Όνομα Εταιρίας</label>
                                                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                        <i class="fas fa-industry" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                                        <span>@companyEventDetails.Company.CompanyName</span>
                                                                                                    </div>
                                                                                                </div>

                                                                                                <div class="form-group">
                                                                                                    <label style="font-weight: bold;">Τίτλος Εκδήλωσης</label>
                                                                                                    <input type="text" class="form-control" value="@companyEventDetails.CompanyEventTitle" readonly />
                                                                                                </div>

                                                                                                <div class="form-group">
                                                                                                    <label style="font-weight: bold;">Περιγραφή</label>
                                                                                                    <textarea class="form-control" rows="3" readonly>@companyEventDetails.CompanyEventDescription</textarea>
                                                                                                </div>

                                                                                                <div class="form-group">
                                                                                                    <label style="font-weight: bold;">Ημερομηνία</label>
                                                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                        <i class="far fa-calendar-alt" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                                        <span>@companyEventDetails.CompanyEventActiveDate.ToString("yyyy-MM-dd", new System.Globalization.CultureInfo("el-GR"))</span>
                                                                                                    </div>
                                                                                                </div>

                                                                                                <div class="form-group">
                                                                                                    <label style="font-weight: bold;">Ώρα Εκδήλωσης</label>
                                                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                        <i class="far fa-clock" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                                        <span>@companyEventDetails.CompanyEventTime.ToString(@"hh\:mm")</span>
                                                                                                    </div>
                                                                                                </div>

                                                                                                <div class="form-group">
                                                                                                    <label style="font-weight: bold;">Τύπος Εκδήλωσης</label>
                                                                                                    <input type="text" class="form-control" value="@companyEventDetails.CompanyEventType" readonly />
                                                                                                </div>

                                                                                                @if (companyEventDetails.CompanyEventOtherOrganizerToBeVisible)
                                                                                                {
                                                                                                    <div class="form-group">
                                                                                                        <label style="font-weight: bold;">Άλλος Διοργανωτής</label>
                                                                                                        <input type="text" class="form-control" value="@companyEventDetails.CompanyEventOtherOrganizer" readonly />
                                                                                                    </div>
                                                                                                }

                                                                                                <div class="form-group">
                                                                                                    <label style="font-weight: bold;">Περιοχές Ενδιαφέροντος</label>
                                                                                                    <textarea class="form-control" rows="3" readonly>@companyEventDetails.CompanyEventAreasOfInterest</textarea>
                                                                                                </div>

                                                                                                <div class="form-group">
                                                                                                    <label style="font-weight: bold;">Κατάσταση Εκδήλωσης</label>
                                                                                                    <input type="text" class="form-control" value="@companyEventDetails.CompanyEventStatus" readonly />
                                                                                                </div>

                                                                                                <div class="form-group">
                                                                                                    <label style="font-weight: bold;">Υπεύθυνος Εκδήλωσης</label>
                                                                                                    <input type="text" class="form-control" value="@companyEventDetails.CompanyEventResponsiblePerson" readonly />
                                                                                                </div>

                                                                                                <div class="form-group">
                                                                                                    <label style="font-weight: bold;">Email Υπεύθυνου</label>
                                                                                                    <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                                        <i class="fas fa-envelope" style="color: #4682B4; margin-right: 8px;"></i>
                                                                                                        @if (!string.IsNullOrEmpty(companyEventDetails.CompanyEventResponsiblePersonEmail))
                                                                                                        {
                                                                                                            <a href="mailto:@companyEventDetails.CompanyEventResponsiblePersonEmail" 
                                                                                                               style="color: #007bff; text-decoration: underline; word-break: break-all;">
                                                                                                                @companyEventDetails.CompanyEventResponsiblePersonEmail
                                                                                                            </a>
                                                                                                        }
                                                                                                        else
                                                                                                        {
                                                                                                            <span style="color: #6c757d;">Δεν υπάρχει email</span>
                                                                                                        }
                                                                                                    </div>
                                                                                                </div>

                                                                                                <div class="form-group">
                                                                                                    <label style="font-weight: bold;">Τηλέφωνο Υπεύθυνου</label>
                                                                                                    <input type="text" class="form-control" value="@companyEventDetails.CompanyEventResponsiblePersonTelephone" readonly />
                                                                                                </div>

                                                                                                <div class="form-group">
                                                                                                    <label style="font-weight: bold;">Τμήμα Εταιρίας</label>
                                                                                                    <input type="text" class="form-control" value="@companyEventDetails.CompanyEventCompanyDepartment" readonly />
                                                                                                </div>

                                                                                                <div class="form-group">
                                                                                                    <label style="font-weight: bold;">Διεύθυνση Email Εταιρίας</label>
                                                                                                    <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                                        <i class="fas fa-envelope" style="color: #4682B4; margin-right: 8px;"></i>
                                                                                                        @if (!string.IsNullOrEmpty(companyEventDetails.CompanyEmailUsedToUploadEvent))
                                                                                                        {
                                                                                                            <a href="mailto:@companyEventDetails.CompanyEmailUsedToUploadEvent" 
                                                                                                               style="color: #007bff; text-decoration: underline; word-break: break-all;">
                                                                                                                @companyEventDetails.CompanyEmailUsedToUploadEvent
                                                                                                            </a>
                                                                                                        }
                                                                                                        else
                                                                                                        {
                                                                                                            <span style="color: #6c757d;">Δεν υπάρχει email</span>
                                                                                                        }
                                                                                                    </div>
                                                                                                </div>

                                                                                                <div class="form-group">
                                                                                                    <label style="font-weight: bold;">Ημερομηνία Ανάρτησης Εκδήλωσης</label>
                                                                                                    <input type="text" class="form-control" 
                                                                                                           value="@companyEventDetails.CompanyEventUploadedDate.ToString("yyyy-MM-dd", new System.Globalization.CultureInfo("el-GR"))" 
                                                                                                           readonly />
                                                                                                </div>

                                                                                                <div class="form-group">
                                                                                                    <label style="font-weight: bold;">Περιοχή Εκδήλωσης</label>
                                                                                                    <input type="text" class="form-control" value="@companyEventDetails.CompanyEventPerifereiaLocation" readonly />
                                                                                                </div>

                                                                                                <div class="form-group">
                                                                                                    <label style="font-weight: bold;">Δήμος Εκδήλωσης</label>
                                                                                                    <input type="text" class="form-control" value="@companyEventDetails.CompanyEventDimosLocation" readonly />
                                                                                                </div>

                                                                                                <div class="form-group">
                                                                                                    <label style="font-weight: bold;">Τοποθεσία Εκδήλωσης</label>
                                                                                                    <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                                        <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                                        @if (!string.IsNullOrEmpty(companyEventDetails.CompanyEventPlaceLocation))
                                                                                                        {
                                                                                                            <a href="https://www.google.com/maps/search/?api=1&query=@Uri.EscapeDataString(companyEventDetails.CompanyEventPlaceLocation)" 
                                                                                                               target="_blank"
                                                                                                               style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                                @companyEventDetails.CompanyEventPlaceLocation
                                                                                                            </a>
                                                                                                        }
                                                                                                        else
                                                                                                        {
                                                                                                            <span style="color: #6c757d;">Δεν έχει οριστεί τοποθεσία Εκδήλωσης ακόμη..</span>
                                                                                                        }
                                                                                                    </div>
                                                                                                </div>

                                                                                                <div class="form-group">
                                                                                                    <label style="font-weight: bold;">Ταχυδρομικός Κώδικας Εκδήλωσης</label>
                                                                                                    <input type="text" class="form-control" value="@companyEventDetails.CompanyEventPostalCodeLocation" readonly />
                                                                                                </div>

                                                                                                <div class="form-group">
                                                                                                    <label style="font-weight: bold;">Μεταφορά Στον Χώρο Εκδήλωσης</label>
                                                                                                    <div class="form-control d-flex align-items-center" style="height: auto; 
                                                                                                         @(companyEventDetails.CompanyEventOfferingTransportToEventLocation.GetValueOrDefault() ? "color: #28a745;" : "color: #dc3545;")">
                                                                                                        <i class="fas fa-car" style="margin-right: 8px;"></i>
                                                                                                        <span>@(companyEventDetails.CompanyEventOfferingTransportToEventLocation.GetValueOrDefault() ? "Ναι" : "Όχι")</span>
                                                                                                    </div>
                                                                                                </div>

                                                                                                @if (companyEventDetails.CompanyEventOfferingTransportToEventLocation ?? false)
                                                                                                {
                                                                                                    <div class="form-group">
                                                                                                        <label style="font-weight: bold;">Σημεία Εκκίνησης για Μεταφορά</label>
                                                                                                        @if (!string.IsNullOrWhiteSpace(companyEventDetails.CompanyEventStartingPointLocationToTransportPeopleToEvent1))
                                                                                                        {
                                                                                                            <div class="form-group">
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                    <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                                                    <a href="https://www.google.com/maps/search/@Uri.EscapeDataString(companyEventDetails.CompanyEventStartingPointLocationToTransportPeopleToEvent1)"
                                                                                                                       target="_blank"
                                                                                                                       style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                                        @companyEventDetails.CompanyEventStartingPointLocationToTransportPeopleToEvent1
                                                                                                                    </a>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        }
                                                                                                        @if (!string.IsNullOrWhiteSpace(companyEventDetails.CompanyEventStartingPointLocationToTransportPeopleToEvent2))
                                                                                                        {
                                                                                                            <div class="form-group">
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                    <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                                                    <a href="https://www.google.com/maps/search/@Uri.EscapeDataString(companyEventDetails.CompanyEventStartingPointLocationToTransportPeopleToEvent2)"
                                                                                                                       target="_blank"
                                                                                                                       style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                                        @companyEventDetails.CompanyEventStartingPointLocationToTransportPeopleToEvent2
                                                                                                                    </a>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        }
                                                                                                        @if (!string.IsNullOrWhiteSpace(companyEventDetails.CompanyEventStartingPointLocationToTransportPeopleToEvent3))
                                                                                                        {
                                                                                                            <div class="form-group">
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                    <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                                                    <a href="https://www.google.com/maps/search/@Uri.EscapeDataString(companyEventDetails.CompanyEventStartingPointLocationToTransportPeopleToEvent3)"
                                                                                                                       target="_blank"
                                                                                                                       style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                                        @companyEventDetails.CompanyEventStartingPointLocationToTransportPeopleToEvent3
                                                                                                                    </a>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        }
                                                                                                    </div>
                                                                                                }
                                                                                                <button class="btn btn-primary mt-3" @onclick="CloseEventDetails">Πίσω</button>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        }
                                                                        else if (selectedEvent is ProfessorEvent professorEventDetails)
                                                                        {
                                                                            <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                                                                <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                                                    <div class="modal-content">
                                                                                        <div class="modal-header">
                                                                                            <h5 class="modal-title" style="color: #4682B4;">@professorEventDetails.ProfessorEventTitle</h5>
                                                                                            <button type="button" class="close" @onclick="CloseEventDetails">
                                                                                                <span aria-hidden="true">&times;</span>
                                                                                            </button>
                                                                                        </div>
                                                                                        <div class="modal-body">
                                                                                            @if (professorEventDetails.Professor.ProfImage != null)
                                                                                            {
                                                                                                <div class="form-group text-center">
                                                                                                    <img src="data:image/png;base64,@Convert.ToBase64String(professorEventDetails.Professor.ProfImage)" 
                                                                                                         class="rounded-circle img-fluid" 
                                                                                                         style="width: 150px; height: 150px; object-fit: cover;" 
                                                                                                         alt="Professor Image" />
                                                                                                </div>
                                                                                            }

                                                                                            <div class="list-group">
                                                                                                <div class="form-group">
                                                                                                    <label style="font-weight: bold;">Ονοματεπώνυμο Διοργανωτή</label>
                                                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                        <i class="fas fa-user" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                                        <span>@professorEventDetails.Professor.ProfName @professorEventDetails.Professor.ProfSurname</span>
                                                                                                    </div>
                                                                                                </div>

                                                                                                <div class="form-group">
                                                                                                    <label style="font-weight: bold;">Τίτλος Εκδήλωσης</label>
                                                                                                    <input type="text" class="form-control" value="@professorEventDetails.ProfessorEventTitle" readonly />
                                                                                                </div>

                                                                                                <div class="form-group">
                                                                                                    <label style="font-weight: bold;">Περιγραφή</label>
                                                                                                    <textarea class="form-control" rows="3" readonly>@professorEventDetails.ProfessorEventDescription</textarea>
                                                                                                </div>

                                                                                                <div class="form-group">
                                                                                                    <label style="font-weight: bold;">Ημερομηνία</label>
                                                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                        <i class="far fa-calendar-alt" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                                        <span>@professorEventDetails.ProfessorEventActiveDate.ToString("yyyy-MM-dd")</span>
                                                                                                    </div>
                                                                                                </div>

                                                                                                <div class="form-group">
                                                                                                    <label style="font-weight: bold;">Ώρα Εκδήλωσης</label>
                                                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                        <i class="far fa-clock" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                                        <span>@professorEventDetails.ProfessorEventTimeOnly.ToString("HH:mm")</span>
                                                                                                    </div>
                                                                                                </div>

                                                                                                <div class="form-group">
                                                                                                    <label style="font-weight: bold;">Τύπος Εκδήλωσης</label>
                                                                                                    <input type="text" class="form-control" value="@professorEventDetails.ProfessorEventType" readonly />
                                                                                                </div>

                                                                                                @if (professorEventDetails.ProfessorEventOtherOrganizerToBeVisible)
                                                                                                {
                                                                                                    <div class="form-group">
                                                                                                        <label style="font-weight: bold;">Άλλος Διοργανωτής</label>
                                                                                                        <input type="text" class="form-control" value="@professorEventDetails.ProfessorEventOtherOrganizer" readonly />
                                                                                                    </div>
                                                                                                }

                                                                                                <div class="form-group">
                                                                                                    <label style="font-weight: bold;">Περιοχές Ενδιαφέροντος</label>
                                                                                                    <textarea class="form-control" rows="3" readonly>@professorEventDetails.ProfessorEventAreasOfInterest</textarea>
                                                                                                </div>

                                                                                                <div class="form-group">
                                                                                                    <label style="font-weight: bold;">Κατάσταση Εκδήλωσης</label>
                                                                                                    <input type="text" class="form-control" value="@professorEventDetails.ProfessorEventStatus" readonly />
                                                                                                </div>

                                                                                                <div class="form-group">
                                                                                                    <label style="font-weight: bold;">Ονοματεπώνυμο Υπεύθυνου</label>
                                                                                                    <input type="text" class="form-control" value="@professorEventDetails.ProfessorEventResponsiblePerson" readonly />
                                                                                                </div>

                                                                                                <div class="form-group">
                                                                                                    <label style="font-weight: bold;">Email Υπεύθυνου</label>
                                                                                                    <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                                        <i class="fas fa-envelope" style="color: #4682B4; margin-right: 8px;"></i>
                                                                                                        @if (!string.IsNullOrEmpty(professorEventDetails.ProfessorEventResponsiblePersonEmail))
                                                                                                        {
                                                                                                            <a href="mailto:@professorEventDetails.ProfessorEventResponsiblePersonEmail" 
                                                                                                               style="color: #007bff; text-decoration: underline; word-break: break-all;">
                                                                                                                @professorEventDetails.ProfessorEventResponsiblePersonEmail
                                                                                                            </a>
                                                                                                        }
                                                                                                        else
                                                                                                        {
                                                                                                            <span style="color: #6c757d;">Δεν υπάρχει email</span>
                                                                                                        }
                                                                                                    </div>
                                                                                                </div>

                                                                                                <div class="form-group">
                                                                                                    <label style="font-weight: bold;">Τηλέφωνο Υπεύθυνου</label>
                                                                                                    <input type="text" class="form-control" value="@professorEventDetails.ProfessorEventResponsiblePersonTelephone" readonly />
                                                                                                </div>

                                                                                                <div class="form-group">
                                                                                                    <label style="font-weight: bold;">Πανεπιστήμιο</label>
                                                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                        <i class="fas fa-university" style="color: #5F9EA0; margin-right: 8px;"></i>
                                                                                                        <span>@professorEventDetails.Professor.ProfUniversity</span>
                                                                                                    </div>
                                                                                                </div>

                                                                                                <div class="form-group">
                                                                                                    <label style="font-weight: bold;">Τμήμα Πανεπιστημίου</label>
                                                                                                    <input type="text" class="form-control" value="@professorEventDetails.ProfessorEventUniversityDepartment" readonly />
                                                                                                </div>

                                                                                                <div class="form-group">
                                                                                                    <label style="font-weight: bold;">Email Καθηγητή</label>
                                                                                                    <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                                        <i class="fas fa-envelope" style="color: #4682B4; margin-right: 8px;"></i>
                                                                                                        @if (!string.IsNullOrEmpty(professorEventDetails.Professor.ProfEmail))
                                                                                                        {
                                                                                                            <a href="mailto:@professorEventDetails.Professor.ProfEmail" 
                                                                                                               style="color: #007bff; text-decoration: underline; word-break: break-all;">
                                                                                                                @professorEventDetails.Professor.ProfEmail
                                                                                                            </a>
                                                                                                        }
                                                                                                        else
                                                                                                        {
                                                                                                            <span style="color: #6c757d;">Δεν υπάρχει email</span>
                                                                                                        }
                                                                                                    </div>
                                                                                                </div>

                                                                                                <div class="form-group">
                                                                                                    <label style="font-weight: bold;">Περιφέρεια</label>
                                                                                                    <input type="text" class="form-control" value="@professorEventDetails.ProfessorEventPerifereiaLocation" readonly />
                                                                                                </div>

                                                                                                <div class="form-group">
                                                                                                    <label style="font-weight: bold;">Δήμος</label>
                                                                                                    <input type="text" class="form-control" value="@professorEventDetails.ProfessorEventDimosLocation" readonly />
                                                                                                </div>

                                                                                                <div class="form-group">
                                                                                                    <label style="font-weight: bold;">Τοποθεσία Εκδήλωσης</label>
                                                                                                    <div class="form-control d-flex align-items-center" style="height: auto; background-color: #fff;">
                                                                                                        <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                                        @if (!string.IsNullOrEmpty(professorEventDetails.ProfessorEventPlaceLocation))
                                                                                                        {
                                                                                                            <a href="https://www.google.com/maps/search/?api=1&query=@Uri.EscapeDataString(professorEventDetails.ProfessorEventPlaceLocation)"
                                                                                                               target="_blank"
                                                                                                               style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                                @professorEventDetails.ProfessorEventPlaceLocation
                                                                                                            </a>
                                                                                                        }
                                                                                                        else
                                                                                                        {
                                                                                                            <span style="color: #6c757d;">Δεν έχει οριστεί τοποθεσία Εκδήλωσης ακόμη..</span>
                                                                                                        }
                                                                                                    </div>
                                                                                                </div>

                                                                                                <div class="form-group">
                                                                                                    <label style="font-weight: bold;">Ταχυδρομικός Κώδικας Τοποθεσίας</label>
                                                                                                    <input type="text" class="form-control" value="@professorEventDetails.ProfessorEventPostalCodeLocation" readonly />
                                                                                                </div>

                                                                                                <div class="form-group">
                                                                                                    <label style="font-weight: bold;">Μεταφορά Στον Χώρο Εκδήλωσης</label>
                                                                                                    <div class="form-control d-flex align-items-center" style="height: auto; 
                                                                                                         @(professorEventDetails.ProfessorEventOfferingTransportToEventLocation.GetValueOrDefault() ? "color: #28a745;" : "color: #dc3545;")">
                                                                                                        <i class="fas fa-car" style="margin-right: 8px;"></i>
                                                                                                        <span>@(professorEventDetails.ProfessorEventOfferingTransportToEventLocation.GetValueOrDefault() ? "Ναι" : "Όχι")</span>
                                                                                                    </div>
                                                                                                </div>

                                                                                                @if (professorEventDetails.ProfessorEventOfferingTransportToEventLocation ?? false)
                                                                                                {
                                                                                                    <div class="form-group">
                                                                                                        <label style="font-weight: bold;">Σημεία Εκκίνησης για Μεταφορά</label>
                                                                                                        @if (!string.IsNullOrWhiteSpace(professorEventDetails.ProfessorEventStartingPointLocationToTransportPeopleToEvent1))
                                                                                                        {
                                                                                                            <div class="form-group">
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                    <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                                                    <a href="https://www.google.com/maps/search/@Uri.EscapeDataString(professorEventDetails.ProfessorEventStartingPointLocationToTransportPeopleToEvent1)"
                                                                                                                       target="_blank"
                                                                                                                       style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                                        @professorEventDetails.ProfessorEventStartingPointLocationToTransportPeopleToEvent1
                                                                                                                    </a>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        }
                                                                                                        @if (!string.IsNullOrWhiteSpace(professorEventDetails.ProfessorEventStartingPointLocationToTransportPeopleToEvent2))
                                                                                                        {
                                                                                                            <div class="form-group">
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                    <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                                                    <a href="https://www.google.com/maps/search/@Uri.EscapeDataString(professorEventDetails.ProfessorEventStartingPointLocationToTransportPeopleToEvent2)"
                                                                                                                       target="_blank"
                                                                                                                       style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                                        @professorEventDetails.ProfessorEventStartingPointLocationToTransportPeopleToEvent2
                                                                                                                    </a>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        }
                                                                                                        @if (!string.IsNullOrWhiteSpace(professorEventDetails.ProfessorEventStartingPointLocationToTransportPeopleToEvent3))
                                                                                                        {
                                                                                                            <div class="form-group">
                                                                                                                <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                                                    <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                                                    <a href="https://www.google.com/maps/search/@Uri.EscapeDataString(professorEventDetails.ProfessorEventStartingPointLocationToTransportPeopleToEvent3)"
                                                                                                                       target="_blank"
                                                                                                                       style="color: #007bff; text-decoration: underline; word-break: break-word;">
                                                                                                                        @professorEventDetails.ProfessorEventStartingPointLocationToTransportPeopleToEvent3
                                                                                                                    </a>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        }
                                                                                                    </div>
                                                                                                }
                                                                                                <button class="btn btn-primary mt-3" @onclick="CloseEventDetails">Πίσω</button>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        } 

                                                                        <button class="btn btn-primary mt-3" @onclick="CloseEventDetails">Πίσω</button>
                                                                    }
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                }
                                            </div> 
                
                                            <!-- SEARCH COMPANIES AS RG -->
                                            <div class="tab-pane fade" id="rgsearchcompany" role="tabpanel" aria-labelledby="rgsearchcompany-tab">
                                                <div class="mb-3 row-dark-gray">
                                                    <div class="d-flex justify-content-between align-items-center">
                                                        <label class="form-label" style="color: #FFF8DC;">• Αναζήτηση Εταιρείας •</label>
                                                        <button class="btn btn-link" @onclick="ToggleFormVisibilityForSearchCompanyAsRG">
                                                            @if (isRGSearchCompanyFormVisible)
                                                            {
                                                                <span>&#8722;</span> <!-- Minus sign -->
                                                            }
                                                            else
                                                            {
                                                                <span>&#43;</span> <!-- Plus sign -->
                                                            }
                                                        </button>
                                                    </div>
                                                </div>
                    
                                                @if (isRGSearchCompanyFormVisible)
                                                {
                                                    <div class="row mb-3">
                                                        <div class="col-md-4">
                                                            <label for="searchCompanyEmailAsRG"><strong>Email</strong></label>
                                                            <input type="text" class="form-control" placeholder="Αναζήτηση με Email" @bind="searchCompanyEmailAsRGToFindCompany" />
                                                        </div>
                                                        <div class="col-md-4 position-relative">
                                                            <label for="searchCompanyNameAsRG"><strong>Όνομα Εταιρείας (ENG)</strong></label>
                                                            <input 
                                                                type="text" 
                                                                id="searchCompanyNameAsRG"
                                                                class="form-control" 
                                                                placeholder="Αναζήτηση με όνομα" 
                                                                @bind="searchCompanyNameENGAsRGToFindCompany" 
                                                                @oninput="HandleCompanyInputAsRG" />

                                                            <!-- Suggestions dropdown -->
                                                            <ul class="list-group position-absolute" 
                                                                style="z-index: 100; width: 100%; max-height: 150px; overflow-y: auto;" 
                                                                hidden="@(!companyNameSuggestionsAsRG.Any())">
                                                                @foreach (var suggestion in companyNameSuggestionsAsRG)
                                                                {
                                                                    <li class="list-group-item list-group-item-action" 
                                                                        @onclick="() => SelectCompanyNameSuggestionAsRG(suggestion)">
                                                                        @suggestion
                                                                    </li>
                                                                }
                                                            </ul>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label for="searchCompanyTypeAsRG" style="font-weight: bold;">Τύπος Εταιρείας</label>
                                                            <div class="input-group">
                                                                <select 
                                                                    id="searchCompanyTypeAsRG" 
                                                                    class="form-control" 
                                                                    @bind="searchCompanyTypeAsRGToFindCompany">
                                                                    <option value=""> - Επιλέξτε Τύπο - </option>
                                                                    @foreach (var type in ForeasType)
                                                                    {
                                                                        <option value="@type">@type</option>
                                                                    }
                                                                </select>
                                                                <div class="input-group-append">
                                                                    <span class="input-group-text">
                                                                        <i class="fas fa-chevron-down"></i>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label for="searchCompanyActivityAsRG"><strong>Δραστηριότητα Εταιρείας</strong></label>
                                                            <input type="text" class="form-control" placeholder="Αναζήτηση με δραστηριότητα" @bind="searchCompanyActivityrAsRGToFindCompany" />
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label for="searchCompanyTownAsRG" style="font-weight: bold;">Πόλη</label>
                                                            <div class="input-group">
                                                                <select id="searchCompanyTownAsRG" 
                                                                        class="form-control" 
                                                                        @bind="searchCompanyTownAsRGToFindCompany">
                                                                    <option value=""> - Επιλέξτε Πόλη - </option>
                                                                    @foreach (var region in Regions)
                                                                    {
                                                                        <optgroup label="@region">
                                                                            @foreach (var town in RegionToTownsMap[region])
                                                                            {
                                                                                <option value="@town">@town</option>
                                                                            }
                                                                        </optgroup>
                                                                    }
                                                                </select>
                                                                <div class="input-group-append">
                                                                    <span class="input-group-text">
                                                                        <i class="fas fa-chevron-down"></i>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!-- Areas of Interest Container -->
                                                        <div class="col-md-4 position-relative">
                                                            <label for="searchCompanyAreasAsRGToFindCompany" style="font-weight: bold;">Περιοχές Ενδιαφέροντος</label>
                                                            <input 
                                                                type="text"
                                                                class="form-control"
                                                                placeholder="Αναζήτηση με Περιοχές"
                                                                @bind="searchCompanyAreasAsRGToFindCompany"
                                                                @oninput="HandleAreasOfInterestInput_WhenSearchForCompanyAsRG" />


                                                            <ul class="list-group position-absolute" 
                                                                style="z-index: 100; width: 100%; max-height: 150px; overflow-y: auto;" 
                                                                hidden="@(!areasOfInterestSuggestions.Any())">
                                                                @foreach (var suggestion in areasOfInterestSuggestions)
                                                                {
                                                                    <li class="list-group-item list-group-item-action" 
                                                                        @onclick="() => SelectAreasOfInterestSuggestion_WhenSearchForCompanyAsRG(suggestion)">
                                                                        @suggestion
                                                                    </li>
                                                                }
                                                            </ul>

                                                            <div class="mt-3 selected-areas-container">
                                                                @if (selectedAreasOfInterest.Any())
                                                                {
                                                                    <ul class="list-group selected-areas-list">
                                                                        @foreach (var area in selectedAreasOfInterest)
                                                                        {
                                                                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                                                                @area
                                                                                <button class="btn btn-danger btn-sm" @onclick="() => RemoveSelectedAreaOfInterest_WhenSearchForCompanyAsRG(area)">
                                                                                    <i class="fas fa-times"></i>
                                                                                </button>
                                                                            </li>
                                                                        }
                                                                    </ul>
                                                                }
                                                            </div>
                                                        </div>

                                                        <br/>
                                                        <div class="col-md-4">
                                                            <label for="searchCompanyDesiredSkillsAsRG"><strong>Επιθυμητές Δεξιότητες</strong></label>
                                                            <input type="text" class="form-control" placeholder="Αναζήτηση με δεξιότητες" @bind="searchCompanyDesiredSkillsAsRGToFindCompany" />
                                                        </div>

                                                        <div class="col-md-4 text-end mt-3">
                                                            <!-- Search Button -->
                                                            <button 
                                                                class="btn me-2" 
                                                                style="background-color: lightblue; color: black;" 
                                                                @onclick="SearchCompaniesAsRG" 
                                                                title="Αναζήτηση Εταιρείας">
                                                                <i class="fas fa-search"></i>
                                                            </button>

                                                            <!-- Clear Button -->
                                                            <button 
                                                                class="btn" 
                                                                style="background-color: orange; color: black;" 
                                                                @onclick="ClearSearchFieldsAsRGToFindCompany" 
                                                                title="Εκκαθάριση Πεδιών και Πίνακα Αποτελεσμάτων" 
                                                                aria-label="Clear">
                                                                <i class="fas fa-times"></i>
                                                            </button>
                                                        </div>
                                                    </div>
                                                }

                                                @if (searchResultsAsRGToFindCompany != null && searchResultsAsRGToFindCompany.Any())
                                                {
                                                    <div class="row mb-3">
                                                        <div class="col-md-2">
                                                            <label style="color: #4682b4; font-weight: bold; font-size: 15px; display: block;">Αποτελέσματα ανά Σελίδα</label>
                                                            <div class="input-group" style="max-width: 65px;">
                                                                <select class="form-control form-control-sm" 
                                                                        @onchange="OnPageSizeChangeForCompanySearchAsRG" 
                                                                        aria-label="Items per page">
                                                                    @foreach (var option in companySearchPageSizeOptions)
                                                                    {
                                                                        <option value="@option" selected="@(CompanySearchPerPageAsRG == option)">@option</option>
                                                                    }
                                                                </select>
                                                                <div class="input-group-append">
                                                                    <span class="input-group-text">
                                                                        <i class="fas fa-chevron-down"></i>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <table class="table mt-4">
                                                        <thead>
                                                            <td colspan="9" style="padding: 0;">
                                                                <div style="display: flex; justify-content: space-between; align-items: center; height: 24px; line-height: 24px; width: 100%;">
                                                                    <i class="fa-solid fa-magnifying-glass" style="font-size: 18px; color: #0d6efd  ;"></i>
                                                                    <label class="form-label" style="color: #0d6efd ; font-weight: bold; font-size: 18px; margin: 0;">Αποτέλεσμα Αναζήτησης</label>
                                                                    <i class="fa-solid fa-magnifying-glass" style="font-size: 18px; color: #0d6efd  ;"></i>
                                                                </div>
                                                            </td>
                                                            <tr style="border: 2px solid black; background-color: lightgray;">
                                                                <th style="border: 2px solid black;">
                                                                    <i class="fa-solid fa-industry fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                    Όνομα Εταιρείας
                                                                </th>
                                                                <th style="border: 2px solid black;">
                                                                    <i class="fa-solid fa-tags fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                    Δραστηριότητα
                                                                </th>
                                                                <th style="border: 2px solid black;">
                                                                    <i class="fa-solid fa-city fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                    Πόλη
                                                                </th>
                                                                <th style="border: 2px solid black;">
                                                                    <i class="fa-solid fa-envelope fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                    Email
                                                                </th>
                                                                <th style="border: 2px solid black;">
                                                                    <i class="fa-solid fa-circle-info fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                    Επισκόπηση
                                                                </th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            @foreach (var company in GetPaginatedCompanySearchResultsAsRG())
                                                            {
                                    
                                                                <tr>
                                                                    <td>@company.CompanyName</td>
                                                                    <td>@company.CompanyActivity</td>
                                                                    <td>@company.CompanyTown</td>
                                                                    <td>
                                                                        @company.CompanyEmail
                                                                        <a href="mailto:@company.CompanyEmail" title="Αποστολή Email">
                                                                            <i class="fas fa-envelope"></i>
                                                                        </a>
                                                                    </td>
                                                                    <td class="text-center align-middle">
                                                                        <i class="fas fa-eye text-primary" style="cursor: pointer;" @onclick="() => ShowCompanyDetailsWhenSearchAsRG(company)" title="Προβολή λεπτομερειών"></i>
                                                                    </td>
                                                                </tr>
                                                            }
                                                        </tbody>
                                                    </table>
                                                    <div class="d-flex justify-content-center align-items-center mt-3 gap-1">
                                                        <span class="pagination-item @(currentPage_CompanySearchAsRG == 1 ? "disabled" : "")"
                                                              @onclick="GoToFirstPage_CompanySearchAsRG">
                                                            &lt;&lt;
                                                        </span>

                                                        <span class="pagination-item @(currentPage_CompanySearchAsRG == 1 ? "disabled" : "")"
                                                              @onclick="PreviousPage_CompanySearchAsRG">
                                                            &lt;
                                                        </span>

                                                        @foreach (var pageNum in GetVisiblePages_CompanySearchAsRG())
                                                        {
                                                            if (pageNum == -1)
                                                            {
                                                                <span class="pagination-ellipsis">...</span>
                                                            }
                                                            else
                                                            {
                                                                <span class="pagination-item @(pageNum == currentPage_CompanySearchAsRG ? "active" : "")"
                                                                      @onclick="@(() => GoToPage_CompanySearchAsRG(pageNum))">
                                                                    @pageNum
                                                                </span>
                                                            }
                                                        }

                                                        <span class="pagination-item @(currentPage_CompanySearchAsRG == totalPages_CompanySearchAsRG ? "disabled" : "")"
                                                              @onclick="NextPage_CompanySearchAsRG">
                                                            &gt;
                                                        </span>

                                                        <span class="pagination-item @(currentPage_CompanySearchAsRG == totalPages_CompanySearchAsRG ? "disabled" : "")"
                                                              @onclick="GoToLastPage_CompanySearchAsRG">
                                                            &gt;&gt;
                                                        </span>

                                                        <span class="ms-3">
                                                            Σελίδα @currentPage_CompanySearchAsRG από @totalPages_CompanySearchAsRG
                                                        </span>
                                                    </div>
                                                    <br/>
                                                    <br/>
                                                }
                                                else if (searchResultsAsRGToFindCompany != null)
                                                {
                                                    <div class="alert alert-warning d-flex align-items-center" role="alert">
                                                        <i class="fas fa-exclamation-triangle me-2"></i>
                                                        <div>
                                                            Δεν βρέθηκε κάποιο αποτέλεσμα που να πληρεί τα κριτήρια της Αναζήτησης σας.
                                                        </div>
                                                    </div>
                                                }
                                            </div>
                                            @if (showCompanyDetailsModal && selectedCompany != null)
                                            {
                                                        <div id="companyDetailsModal" class="modal fade @(showCompanyDetailsModal ? "show d-block" : "")" 
                                                             tabindex="-1" role="dialog" style="background-color: rgba(0, 0, 0, 0.5);">
                                                            <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                                <div class="modal-content">
                                                                    <div class="modal-header">
                                                                        <h5 class="modal-title" style="color: #4682B4;">
                                                                            @selectedCompany.CompanyNameENG
                                                                        </h5>
                                                                        <button type="button" class="close" @onclick="CloseCompanyDetailsModalWhenSearchAsProfessor">
                                                                            <span aria-hidden="true">&times;</span>
                                                                        </button>
                                                                    </div>
                                                                    <div class="modal-body">
                                                                        <div class="form-group text-center">
                                                                            @if (selectedCompany.CompanyLogo != null)
                                                                            {
                                                                                <img src="data:image/png;base64,@Convert.ToBase64String(selectedCompany.CompanyLogo)" 
                                                                                     alt="Company Logo"
                                                                                     class="rounded-circle img-fluid"
                                                                                     style="max-width: 150px; max-height: 150px; object-fit: cover;" />
                                                                            }
                                                                            else
                                                                            {
                                                                                <p>Δεν είναι διαθέσιμο</p>
                                                                            }
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label><strong>Σύντομη Ονομασία</strong></label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fas fa-tag" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                <span class="flex-grow-1">
                                                                                    @(!string.IsNullOrWhiteSpace(selectedCompany.CompanyShortName)
                                                                                        ? selectedCompany.CompanyShortName
                                                                                        : "Δεν έχει Καθοριστεί")
                                                                                </span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label><strong>Τύπος Εταιρείας</strong></label>
                                                                            <input type="text" class="form-control" value="@selectedCompany.CompanyType" readonly />
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label><strong>Email Εταιρείας</strong></label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fas fa-envelope" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                <span class="flex-grow-1">@selectedCompany.CompanyEmail</span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label><strong>Ιστοσελίδα Εταιρείας</strong></label>
                                                                            @if (!string.IsNullOrWhiteSpace(selectedCompany.CompanyWebsite))
                                                                            {
                                                                                <div class="form-control d-flex align-items-center" style="height: auto; cursor: pointer; color: #007bff;"
                                                                                     @onclick="() => OpenUrl(selectedCompany.CompanyWebsite)">
                                                                                    <i class="fa-solid fa-globe" style="margin-right: 8px;"></i>
                                                                                    <span class="flex-grow-1">@selectedCompany.CompanyWebsite</span>
                                                                                </div>
                                                                            }
                                                                            else
                                                                            {
                                                                                <input type="text" class="form-control" value="Δεν υπάρχει" readonly />
                                                                            }
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label><strong>Περιγραφή Εταιρείας</strong></label>
                                                                            <textarea class="form-control" rows="3" readonly>@selectedCompany.CompanyDescription</textarea>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label><strong>Δραστηριότητα Εταιρείας</strong></label>
                                                                            <input type="text" class="form-control" value="@selectedCompany.CompanyActivity" readonly />
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label><strong>Περιοχές Ενδιαφέροντος</strong></label>
                                                                            <textarea class="form-control" rows="2" readonly>@selectedCompany.CompanyAreas</textarea>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label><strong>Χώρα</strong></label>
                                                                            <input type="text" class="form-control" value="@selectedCompany.CompanyCountry" readonly />
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label><strong>Περιφέρεια</strong></label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fa-solid fa-map" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                <span class="flex-grow-1">@selectedCompany.CompanyRegions</span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label><strong>Πόλη</strong></label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fa-solid fa-city" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                <span class="flex-grow-1">@selectedCompany.CompanyTown</span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label><strong>Διεύθυνση</strong></label>
                                                                            <div class="form-control d-flex align-items-center mt-1" style="height: auto;">
                                                                                <i class="fas fa-map-marker-alt" style="color: #dc3545; margin-right: 8px;"></i>
                                                                                <span @onclick="() => OpenMap(selectedCompany.CompanyLocation)"
                                                                                      style="color: #007bff; text-decoration: underline; cursor: pointer; word-break: break-word;">
                                                                                    @selectedCompany.CompanyLocation
                                                                                </span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label><strong>Ταχυδρομικός Κώδικας</strong></label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fa-solid fa-envelope-open-text" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                <span class="flex-grow-1">@selectedCompany.CompanyPC</span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label><strong>Τηλέφωνο Εταιρείας</strong></label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fa-solid fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                                <span class="flex-grow-1">@selectedCompany.CompanyTelephone</span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label><strong>Ιστοσελίδα Ανακοινώσεων</strong></label>
                                                                            @if (!string.IsNullOrWhiteSpace(selectedCompany.CompanyWebsiteAnnouncements))
                                                                            {
                                                                                <div class="form-control d-flex align-items-center" style="height: auto; cursor: pointer; color: #007bff;"
                                                                                     @onclick="() => OpenUrl(selectedCompany.CompanyWebsiteAnnouncements)">
                                                                                    <i class="fa-solid fa-globe" style="margin-right: 8px;"></i>
                                                                                    <span class="flex-grow-1">@selectedCompany.CompanyWebsiteAnnouncements</span>
                                                                                </div>
                                                                            }
                                                                            else
                                                                            {
                                                                                <input type="text" class="form-control" value="Δεν υπάρχει" readonly />
                                                                            }
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label><strong>Ιστοσελίδα Θέσεων Εργασίας</strong></label>
                                                                            @if (!string.IsNullOrWhiteSpace(selectedCompany.CompanyWebsiteJobs))
                                                                            {
                                                                                <div class="form-control d-flex align-items-center" style="height: auto; cursor: pointer; color: #007bff;"
                                                                                     @onclick="() => OpenUrl(selectedCompany.CompanyWebsiteJobs)">
                                                                                    <i class="fa-solid fa-globe" style="margin-right: 8px;"></i>
                                                                                    <span class="flex-grow-1">@selectedCompany.CompanyWebsiteJobs</span>
                                                                                </div>
                                                                            }
                                                                            else
                                                                            {
                                                                                <input type="text" class="form-control" value="Δεν υπάρχει" readonly />
                                                                            }
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label><strong>Υπεύθυνος Ανθρώπινου Δυναμικού</strong></label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fas fa-user-tie" style="color: #6c757d; margin-right: 8px;"></i>
                                                                                <span class="flex-grow-1">@selectedCompany.CompanyHRName @selectedCompany.CompanyHRSurname</span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label><strong>Email Υπεύθυνου</strong></label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fa-solid fa-envelope" style="color: #007bff; margin-right: 8px;"></i>
                                                                                <span class="flex-grow-1">@selectedCompany.CompanyHREmail</span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label><strong>Τηλέφωνο Υπεύθυνου</strong></label>
                                                                            <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                                <i class="fa-solid fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                                <span class="flex-grow-1">@selectedCompany.CompanyHRTelephone</span>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="modal-footer">
                                                                        <button type="button" class="btn btn-secondary" @onclick="CloseCompanyDetailsModalWhenSearchAsProfessor">
                                                                            Κλείσιμο
                                                                        </button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                              }

                                             <!-- PROFESSOR SEARCH AS RG -->
                                            <div class="tab-pane fade" id="rgsearchprofessor" role="tabpanel" aria-labelledby="rgsearchprofessor-tab">
                                                <div class="mb-3 row-dark-gray mt-4">
                                                    <div class="d-flex justify-content-between align-items-center">
                                                        <label class="form-label" style="color: #FFF8DC;">• Αναζήτηση Καθηγητή •</label>
                                                        <button class="btn btn-link" @onclick="ToggleRGSearchProfessorVisible">
                                                            @if (isRGSearchProfessorVisible)
                                                            {
                                                                <span>&#8722;</span> <!-- Minus sign -->
                                                            }
                                                            else
                                                            {
                                                                <span>&#43;</span> <!-- Plus sign -->
                                                            }
                                                        </button>
                                                    </div>
                                                </div>

                                                @if (isRGSearchProfessorVisible)
                                                {
                                                    <!-- Search Form -->
                                                    <div class="row mb-3">
                                                        <!-- Search Professor by Name and Surname -->
                                                        <div class="col-md-4 position-relative">
                                                            <label for="searchNameSurnameAsRGToFindProfessor" style="font-weight: bold;">Όνοματεπώνυμο Καθηγητή</label>
                                                            <input 
                                                                type="text" 
                                                                id="searchNameSurnameAsRGToFindProfessor"
                                                                class="form-control" 
                                                                placeholder="Αναζήτηση με όνομα ή επώνυμο" 
                                                                @bind="searchNameSurnameAsRGToFindProfessor" 
                                                                @oninput="HandleProfessorInputWhenSearchForProfessorAsRG" />

                                                            <!-- Suggestions dropdown -->
                                                            <ul class="list-group position-absolute" 
                                                                style="z-index: 100; width: 100%; max-height: 150px; overflow-y: auto;" 
                                                                hidden="@(!professorNameSurnameSuggestionsAsRG.Any())">
                                                                @foreach (var suggestion in professorNameSurnameSuggestionsAsRG)
                                                                {
                                                                    <li class="list-group-item list-group-item-action" 
                                                                        @onclick="() => SelectProfessorNameSurnameSuggestionAsRG(suggestion)">
                                                                        @suggestion
                                                                    </li>
                                                                }
                                                            </ul>
                                                        </div>

                                                        <!-- Search Professor by School (Research Group) -->
                                                        <div class="col-md-4">
                                                            <label for="searchSchoolAsRGToFindProfessor" style="font-weight: bold;">Σχολή</label>
                                                            <div class="input-group">
                                                                <select class="form-control" 
                                                                        value="@searchSchoolAsRGToFindProfessor"
                                                                        @onchange="OnProfessorSchoolChangedAsRG">
                                                                    <option value=""> - Επιλέξτε Σχολή - </option>
                                                                    @foreach (var school in researchGroupSchools)
                                                                    {
                                                                        <option value="@school">@school</option>
                                                                    }
                                                                </select>
                                                                <div class="input-group-append">
                                                                    <span class="input-group-text">
                                                                        <i class="fas fa-chevron-down"></i>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <!-- Search Professor by Department (Research Group) -->
                                                        <div class="col-md-4">
                                                            <label for="searchDepartmentAsRGToFindProfessor" style="font-weight: bold;">Τμήμα Πανεπιστημίου</label>
                                                            <div class="input-group">
                                                                <select class="form-control" 
                                                                        @bind="searchDepartmentAsRGToFindProfessor"
                                                                        disabled="@string.IsNullOrEmpty(searchSchoolAsRGToFindProfessor)">
                                                                    <option value=""> - Επιλέξτε Τμήμα - </option>
                                                                    @if (string.IsNullOrEmpty(searchSchoolAsRGToFindProfessor))
                                                                    {
                                                                        <!-- Show all departments when no school is selected -->
                                                                        @foreach (var department in GetAllProfessorDepartments())
                                                                        {
                                                                            <option value="@department">@department</option>
                                                                        }
                                                                    }
                                                                    else
                                                                    {
                                                                        <!-- Show only departments from selected school -->
                                                                        @foreach (var department in filteredProfessorDepartmentsAsRG)
                                                                        {
                                                                            <option value="@department">@department</option>
                                                                        }
                                                                    }
                                                                </select>
                                                                <div class="input-group-append">
                                                                    <span class="input-group-text">
                                                                        <i class="fas fa-chevron-down"></i>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <!-- Search Professor by Areas of Interest -->
                                                        <div class="col-md-4 position-relative">
                                                            <label for="searchAreasOfInterestAsRGToFindProfessor" style="font-weight: bold;">Περιοχές Ενδιαφέροντος</label>
                                                            <input 
                                                                type="text" 
                                                                id="searchAreasOfInterestAsRGToFindProfessor"
                                                                class="form-control" 
                                                                placeholder="Αναζήτηση με περιοχές ενδιαφέροντος" 
                                                                @bind="searchAreasOfInterestAsRGToFindProfessor" 
                                                                @oninput="HandleAreasOfInterestInputAsRG" />

                                                            <!-- Suggestions dropdown for Areas of Interest -->
                                                            <ul class="list-group position-absolute" 
                                                                style="z-index: 100; width: 100%; max-height: 150px; overflow-y: auto;" 
                                                                hidden="@(!areasOfInterestSuggestionsAsRG.Any())">
                                                                @foreach (var suggestion in areasOfInterestSuggestionsAsRG)
                                                                {
                                                                    <li class="list-group-item list-group-item-action" 
                                                                        @onclick="() => SelectAreasOfInterestSuggestionAsRG(suggestion)">
                                                                        @suggestion
                                                                    </li>
                                                                }
                                                            </ul>

                                                            <!-- Selected Areas of Interest -->
                                                            <div class="mt-3 selected-areas-container">
                                                                @if (selectedAreasOfInterestAsRG.Any())
                                                                {
                                                                    <ul class="list-group selected-areas-list">
                                                                        @foreach (var area in selectedAreasOfInterestAsRG)
                                                                        {
                                                                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                                                                @area
                                                                                <button class="btn btn-danger btn-sm" @onclick="() => RemoveSelectedAreaOfInterestAsRG(area)">
                                                                                    <i class="fas fa-times"></i>
                                                                                </button>
                                                                            </li>
                                                                        }
                                                                    </ul>
                                                                }
                                                            </div>
                                                        </div>


                                                        <!-- Search Professors Button -->
                                                        <div class="col-md-4 text-end mt-3">
                                                            <button class="btn me-2" style="background-color: lightblue; color: black;" @onclick="SearchProfessorsAsRGToFindProfessor" title="Αναζήτηση Καθηγητή">
                                                                <i class="fas fa-search"></i>
                                                            </button>

                                                            <!-- Clear Search Professors Button -->
                                                            <button class="btn" style="background-color: orange; color: black;" @onclick="ClearSearchFieldsAsRGToFindProfessor" title="Εκκαθάριση Πεδίων και Πίνακα Αποτελεσμάτων" aria-label="Clear">
                                                                <i class="fas fa-times"></i>
                                                            </button>
                                                        </div>
                                                    </div>

                                                    <!-- Results Table -->
                                                    @if (searchResultsAsRGToFindProfessor != null && searchResultsAsRGToFindProfessor.Any())
                                                    {
                                                        <div class="col-md-2">
                                                            <label style="color: #4682b4; font-weight: bold; font-size: 15px; display: block;">Αποτελέσματα ανά Σελίδα</label>
                                                            <div class="input-group" style="max-width: 65px;">
                                                                    <select class="form-control form-control-sm" @onchange="OnPageSizeChange_SearchForProfessorsAsRG" aria-label="Items per page">
                                                                        @foreach (var option in pageSizeOptions_SearchForProfessorsAsRG)
                                                                        {
                                                                            <option value="@option" selected="@(ProfessorsPerPage_SearchForProfessorsAsRG == option)">@option</option>
                                                                        }
                                                                    </select>
                                                                    <div class="input-group-append">
                                                                        <span class="input-group-text">
                                                                            <i class="fas fa-chevron-down"></i>
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        <table class="table mt-4">
                                                            <thead>
                                                                <tr>
                                                                    <td colspan="9" style="padding: 0;">
                                                                        <div style="display: flex; justify-content: space-between; align-items: center; height: 24px; line-height: 24px; width: 100%;">
                                                                            <i class="fa-solid fa-magnifying-glass" style="font-size: 18px; color: #0d6efd;"></i>
                                                                            <label class="form-label" style="color: #0d6efd; font-weight: bold; font-size: 18px; margin: 0;">Αποτέλεσμα Αναζήτησης</label>
                                                                            <i class="fa-solid fa-magnifying-glass" style="font-size: 18px; color: #0d6efd;"></i>
                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                                <tr style="background-color: lightgray; border: 2px solid black;">
                                                                    <th style="border: 2px solid black;">
                                                                        <i class="fa-solid fa-signature fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Όνομα
                                                                    </th>
                                                                    <th style="border: 2px solid black;">
                                                                        <i class="fa-solid fa-signature fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Επώνυμο
                                                                    </th>
                                                                    <th style="border: 2px solid black;">
                                                                        <i class="fa-solid fa-building fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Τμήμα
                                                                    </th>
                                                                    <th style="border: 2px solid black;">
                                                                        <i class="fa-solid fa-tags fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Περιοχές Ενδιαφέροντος
                                                                    </th>
                                                                    <th style="border: 2px solid black;">
                                                                        <i class="fa-solid fa-envelope fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Ηλ. Ταχυδρομείο
                                                                    </th>
                                                                    <th style="border: 2px solid black;">
                                                                        <i class="fa-solid fa-phone fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Τηλέφωνο
                                                                    </th>
                                                                    <th style="border: 2px solid black;">
                                                                        <i class="fa-solid fa-circle-info fa-sm" style="color: #4682b4; margin-right: 8px;"></i>
                                                                        Επισκόπηση
                                                                    </th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                @foreach (var professor in GetPaginatedProfessorResultsAsRG())
                                                                {
                                                                    <tr>
                                                                        <td>@professor.ProfName</td>
                                                                        <td>@professor.ProfSurname</td>
                                                                        <td>@professor.ProfDepartment</td>
                                                                        <td>
                                                                            @string.Join(", ", professor.ProfGeneralFieldOfWork)
                                                                        </td>
                                                                        <td>
                                                                            @professor.ProfEmail
                                                                            <a href="mailto:@professor.ProfEmail" title="Αποστολή Email">
                                                                                <i class="fas fa-envelope"></i>
                                                                            </a>
                                                                        </td>
                                                                        <td>@(professor.ProfPersonalTelephoneVisibility ? professor.ProfPersonalTelephone : "N/A")
                                                                            <span class="ml-2">
                                                                                <i class="fas fa-phone"></i>
                                                                            </span>
                                                                        </td>
                                                                        <td>
                                                                            <div class="text-center">
                                                                                <i class="fas fa-eye" 
                                                                                   style="cursor: pointer; font-size: 1.5rem;" 
                                                                                   @onclick="() => ShowProfessorDetailsOnEyeIconWhenSearchForProfessorAsRG(professor)">
                                                                                </i>
                                                                            </div>
                                                                        </td>
                                                                    </tr>
                                                                }
                                                            </tbody>
                                                        </table>
                                                        <div class="d-flex justify-content-center align-items-center mt-3 gap-1">
                                                        <!-- First Page (<<) -->
                                                        <span class="pagination-item @(currentProfessorPage_SearchForProfessorsAsRG == 1 ? "disabled" : "")" 
                                                              @onclick="@(() => GoToFirstProfessorPageAsRG())">
                                                            &lt;&lt;
                                                        </span>

                                                        <!-- Previous Page (<) -->
                                                        <span class="pagination-item @(currentProfessorPage_SearchForProfessorsAsRG == 1 ? "disabled" : "")" 
                                                              @onclick="@(() => PreviousProfessorPageAsRG())">
                                                            &lt;
                                                        </span>

                                                        <!-- Page Numbers -->
                                                        @foreach (var pageNum in GetVisibleProfessorPagesAsRG())
                                                        {
                                                            @if (pageNum == -1)
                                                            {
                                                                <span class="pagination-ellipsis">...</span>
                                                            }
                                                            else
                                                            {
                                                                <span class="pagination-item @(pageNum == currentProfessorPage_SearchForProfessorsAsRG ? "active" : "")" 
                                                                      @onclick="@(() => GoToProfessorPageAsRG(pageNum))">
                                                                    @pageNum
                                                                </span>
                                                            }
                                                        }

                                                        <!-- Next Page (>) -->
                                                        <span class="pagination-item @(currentProfessorPage_SearchForProfessorsAsRG == totalProfessorPages_SearchForProfessorsAsRG ? "disabled" : "")" 
                                                              @onclick="@(() => NextProfessorPageAsRG())">
                                                            &gt;
                                                        </span>

                                                        <!-- Last Page (>>) -->
                                                        <span class="pagination-item @(currentProfessorPage_SearchForProfessorsAsRG == totalProfessorPages_SearchForProfessorsAsRG ? "disabled" : "")" 
                                                              @onclick="@(() => GoToLastProfessorPageAsRG())">
                                                            &gt;&gt;
                                                        </span>

                                                        <!-- Page counter -->
                                                        <span class="ms-3">Σελίδα @currentProfessorPage_SearchForProfessorsAsRG από @totalProfessorPages_SearchForProfessorsAsRG</span>
                                                    </div>
                                                    }
                                                    else if (searchResultsAsRGToFindProfessor != null)
                                                    {
                                                        <div class="alert alert-warning d-flex align-items-center" role="alert">
                                                          <i class="fas fa-exclamation-triangle me-2"></i>
                                                          <div>Δεν βρέθηκε κάποιο αποτέλεσμα που να πληρεί τα κριτήρια της Αναζήτησης σας.</div>
                                                        </div>
                                                    }
                                                }

                                            </div>
                                            <!-- MODAL TO SHOW PROFESSOR DETAILS WHEN SEARCH AS RG -->
                                            @if (showProfessorDetailsModalWhenSearchForProfessorsAsRG && selectedProfessorWhenSearchForProfessorsAsRG!= null)
                                            {
                                                <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0,0,0,0.5);">
                                                    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
                                                        <div class="modal-content">
                                                            <div class="modal-header">
                                                                <h5 class="modal-title" style="color: #007BFF;">
                                                                    @selectedProfessorWhenSearchForProfessorsAsRG.ProfName @selectedProfessorWhenSearchForProfessorsAsRG.ProfSurname
                                                                </h5>
                                                                <button type="button" class="btn-close" @onclick="CloseModalProfessorDetailsOnEyeIconWhenSearchForProfessorsAsRG" aria-label="Κλείσιμο"></button>
                                                            </div>
                                                            <div class="modal-body">
                                                                <!-- Profile Picture -->
                                                                <div class="form-group text-center">
                                                                    @if (selectedProfessorWhenSearchForProfessorsAsRG.ProfImage != null && selectedProfessorWhenSearchForProfessorsAsRG.ProfImage.Length > 0)
                                                                    {
                                                                        var base64Image = Convert.ToBase64String(selectedProfessorWhenSearchForProfessorsAsRG.ProfImage);
                                                                        <img src="data:image/jpeg;base64,@base64Image" alt="Φωτογραφία Προφίλ Καθηγητή" 
                                                                             style="max-width: 150px; max-height: 150px; border-radius: 50%; object-fit: cover;" />
                                                                    }
                                                                    else
                                                                    {
                                                                        <p>Δεν υπάρχει φωτογραφία Προφίλ</p>
                                                                    }
                                                                </div>

                                                                <!-- Professor Email -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Email</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-envelope" style="color: #007bff; margin-right: 8px;"></i>
                                                                        <span>@selectedProfessorWhenSearchForProfessorsAsRG.ProfEmail</span>
                                                                    </div>
                                                                </div>

                                                                <!-- Professor University and Department -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Πανεπιστήμιο</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-university" style="color: #007bff; margin-right: 8px;"></i>
                                                                        <span>@selectedProfessorWhenSearchForProfessorsAsRG.ProfUniversity</span>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Τμήμα</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fa-solid fa-building" style="color: #6c757d; margin-right: 8px;"></i>
                                                                        <span>@selectedProfessorWhenSearchForProfessorsAsRG.ProfDepartment</span>
                                                                    </div>
                                                                </div>

                                                                <!-- Professor Vahmida Department -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Βαθμίδα ΔΕΠ</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fa-solid fa-user-tie" style="color: #6c757d; margin-right: 8px;"></i>
                                                                        <span>@selectedProfessorWhenSearchForProfessorsAsRG.ProfVahmidaDEP</span>
                                                                    </div>
                                                                </div>

                                                                <!-- Professor Work and Personal Telephone -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Τηλέφωνο Εργασίας</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fa-solid fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                        <span>@selectedProfessorWhenSearchForProfessorsAsRG.ProfWorkTelephone</span>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Προσωπικό Τηλέφωνο</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fa-solid fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                                                                        @if (selectedProfessorWhenSearchForProfessorsAsRG.ProfPersonalTelephoneVisibility)
                                                                        {
                                                                            <span>@selectedProfessorWhenSearchForProfessorsAsRG.ProfPersonalTelephone</span>
                                                                        }
                                                                        else
                                                                        {
                                                                            <span>Δεν Διατίθεται</span>
                                                                        }
                                                                    </div>
                                                                </div>

                                                                <!-- Professor Personal Website -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Ιστότοπος</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fa-solid fa-globe" style="color: #007bff; margin-right: 8px;"></i>
                                                                        @if (!string.IsNullOrWhiteSpace(selectedProfessorWhenSearchForProfessorsAsRG.ProfPersonalWebsite))
                                                                        {
                                                                            <a href="@selectedProfessorWhenSearchForProfessorsAsRG.ProfPersonalWebsite" target="_blank" class="flex-grow-1 text-truncate" style="text-decoration:none; color:#007bff;">
                                                                                @selectedProfessorWhenSearchForProfessorsAsRG.ProfPersonalWebsite
                                                                            </a>
                                                                        }
                                                                        else
                                                                        {
                                                                            <span class="flex-grow-1 text-muted">Δεν Διατίθεται</span>
                                                                        }
                                                                    </div>
                                                                </div>

                                                                <!-- Professor LinkedIn Site -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">LinkedIn</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fab fa-linkedin" style="color: #0A66C2; margin-right: 8px;"></i>
                                                                        @if (!string.IsNullOrWhiteSpace(selectedProfessorWhenSearchForProfessorsAsRG.ProfLinkedInSite))
                                                                        {
                                                                            <a href="@selectedProfessorWhenSearchForProfessorsAsRG.ProfLinkedInSite" target="_blank" class="flex-grow-1 text-truncate" style="text-decoration:none; color:#0A66C2;">
                                                                                @selectedProfessorWhenSearchForProfessorsAsRG.ProfLinkedInSite
                                                                            </a>
                                                                        }
                                                                        else
                                                                        {
                                                                            <span class="flex-grow-1 text-muted">Δεν Διατίθεται</span>
                                                                        }
                                                                    </div>
                                                                </div>

                                                                <!-- Professor Scholar Profile -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Scholar Profile</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-graduation-cap" style="color: #4285F4; margin-right: 8px;"></i>
                                                                        @if (!string.IsNullOrWhiteSpace(selectedProfessorWhenSearchForProfessorsAsRG.ProfScholarProfile))
                                                                        {
                                                                            <a href="@selectedProfessorWhenSearchForProfessorsAsRG.ProfScholarProfile" target="_blank" class="flex-grow-1 text-truncate" style="text-decoration:none; color:#4285F4;">
                                                                                @selectedProfessorWhenSearchForProfessorsAsRG.ProfScholarProfile
                                                                            </a>
                                                                        }
                                                                        else
                                                                        {
                                                                            <span class="flex-grow-1 text-muted">Δεν Διατίθεται</span>
                                                                        }
                                                                    </div>
                                                                </div>

                                                                <!-- Professor ORCID Profile -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">ORCID Profile</label>
                                                                    <div class="form-control d-flex align-items-center" style="height: auto;">
                                                                        <i class="fas fa-id-card" style="color: #A6CE39; margin-right: 8px;"></i>
                                                                        @if (!string.IsNullOrWhiteSpace(selectedProfessorWhenSearchForProfessorsAsRG.ProfOrchidProfile))
                                                                        {
                                                                            <a href="@selectedProfessorWhenSearchForProfessorsAsRG.ProfOrchidProfile" target="_blank" class="flex-grow-1 text-truncate" style="text-decoration:none; color:#A6CE39;">
                                                                                @selectedProfessorWhenSearchForProfessorsAsRG.ProfOrchidProfile
                                                                            </a>
                                                                        }
                                                                        else
                                                                        {
                                                                            <span class="flex-grow-1 text-muted">Δεν Διατίθεται</span>
                                                                        }
                                                                    </div>
                                                                </div>

                                                                <!-- Professor General Field of Work (Areas) -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Γενικός Τομέας Εργασίας</label>
                                                                    <textarea class="form-control" readonly>@selectedProfessorWhenSearchForProfessorsAsRG.ProfGeneralFieldOfWork</textarea>
                                                                </div>

                                                                <!-- Professor General Skills -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Γενικές Δεξιότητες</label>
                                                                    <textarea class="form-control" readonly>@selectedProfessorWhenSearchForProfessorsAsRG.ProfGeneralSkills</textarea>
                                                                </div>

                                                                <!-- Professor Personal Description -->
                                                                <div class="form-group">
                                                                    <label style="font-weight: bold;">Προσωπική Περιγραφή</label>
                                                                    <textarea class="form-control" readonly>@selectedProfessorWhenSearchForProfessorsAsRG.ProfPersonalDescription</textarea>
                                                                </div>
                                                            </div>
                                                            <div class="modal-footer">
                                                                <button type="button" class="btn btn-secondary" @onclick="CloseModalProfessorDetailsOnEyeIconWhenSearchForProfessorsAsRG">Κλείσιμο</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            }

                                        </div>                                                                           
                                    </div>
                                   <!-- RESEARCH GROUP STATISTICS -->
                                    <div class="tab-pane fade" id="rgstatistics" role="tabpanel" aria-labelledby="rgstatistics-tab">
                                        <div class="mb-3 row-dark-gray">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <label class="form-label" style="color: #FFF8DC;">• Στατιστικά Ερευνητικής Ομάδας •</label>
                                                <button class="btn btn-link" @onclick="ToggleStatisticsVisibility">
                                                    @if (isStatisticsVisible)
                                                    {
                                                        <span>&#8722;</span> <!-- Minus sign -->
                                                    }
                                                    else
                                                    {
                                                        <span>&#43;</span> <!-- Plus sign -->
                                                    }
                                                </button>
                                            </div>
                                        </div>

                                        @if (isStatisticsVisible)
                                        {
                                            <div class="row mb-3">
                                                <div class="col-md-12">
                                                    <!-- Statistics Table -->
                                                    <div class="table-responsive">
                                                        <table class="table table-bordered table-hover">
                                                            <thead class="table-dark">
                                                                <tr>
                                                                    <th colspan="3" class="text-center">ΣΤΑΤΙΣΤΙΚΑ ΕΡΕΥΝΗΤΙΚΗΣ ΟΜΑΔΑΣ</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <!-- Μέλη-ΔΕΠ -->
                                                                <tr>
                                                                    <td class="fw-bold" style="width: 40%">
                                                                        <i class="fas fa-user-tie me-2 text-primary"></i>Μέλη-ΔΕΠ
                                                                    </td>
                                                                    <td class="text-center fw-bold text-primary" style="width: 20%">
                                                                        @if (numberOfFacultyMembers == null)
                                                                        {
                                                                            <div class="spinner-border spinner-border-sm text-primary" role="status"></div>
                                                                        }
                                                                        else
                                                                        {
                                                                            @numberOfFacultyMembers
                                                                        }
                                                                    </td>
                                                                    <td class="text-muted" style="width: 40%">
                                                                        Σύνολο μελών ΔΕΠ
                                                                        <i class="fas fa-info-circle ms-2 text-primary" style="cursor: pointer;" 
                                                                           @onclick="ShowFacultyMembersDetails" title="Προβολή λεπτομερειών μελών ΔΕΠ"></i>
                                                                    </td>
                                                                </tr>
        
                                                                <!-- Συνεργάτες -->
                                                                <tr>
                                                                    <td class="fw-bold">
                                                                        <i class="fas fa-users me-2 text-info"></i>Συνεργάτες
                                                                    </td>
                                                                    <td class="text-center fw-bold text-info">
                                                                        @if (numberOfCollaborators == null)
                                                                        {
                                                                            <div class="spinner-border spinner-border-sm text-info" role="status"></div>
                                                                        }
                                                                        else
                                                                        {
                                                                            @numberOfCollaborators
                                                                        }
                                                                    </td>
                                                                    <td class="text-muted">
                                                                        Σύνολο συνεργατών
                                                                        <i class="fas fa-info-circle ms-2 text-info" style="cursor: pointer;" 
                                                                           @onclick="ShowNonFacultyMembersDetails" title="Προβολή λεπτομερειών συνεργατών"></i>
                                                                    </td>
                                                                </tr>
        
                                                                <!-- Δημοσιεύσεις -->
                                                                <tr>
                                                                    <td class="fw-bold">
                                                                        <i class="fas fa-book me-2 text-success"></i>Σύνολο Δημοσιεύσεων
                                                                    </td>
                                                                    <td class="text-center fw-bold text-success">
                                                                        @if (numberOfTotalPublications == null)
                                                                        {
                                                                            <div class="spinner-border spinner-border-sm text-success" role="status"></div>
                                                                        }
                                                                        else
                                                                        {
                                                                            @numberOfTotalPublications
                                                                        }
                                                                    </td>
                                                                    <td class="text-muted">Όλες οι δημοσιεύσεις</td>
                                                                </tr>
        
                                                                <!-- Δημοσιεύσεις τελευταίας 5ετίας -->
                                                                <tr>
                                                                    <td class="fw-bold">
                                                                        <i class="fas fa-calendar-alt me-2 text-warning"></i>Δημοσιεύσεις τελευταίας 5ετίας
                                                                    </td>
                                                                    <td class="text-center fw-bold text-warning">
                                                                        @if (numberOfRecentPublications == null)
                                                                        {
                                                                            <div class="spinner-border spinner-border-sm text-warning" role="status"></div>
                                                                        }
                                                                        else
                                                                        {
                                                                            @numberOfRecentPublications
                                                                        }
                                                                    </td>
                                                                    <td class="text-muted">Από @DateTime.Now.AddYears(-5).Year έως @DateTime.Now.Year</td>
                                                                </tr>
        
                                                                <!-- Ερευνητικές Δράσεις -->
                                                                <tr>
                                                                    <td class="fw-bold" rowspan="2">
                                                                        <i class="fas fa-flask me-2 text-secondary"></i>Ερευνητικές Δράσεις
                                                                    </td>
                                                                    <td class="text-center fw-bold text-success">
                                                                        @if (numberOfActiveResearchActions == null)
                                                                        {
                                                                            <div class="spinner-border spinner-border-sm text-success" role="status"></div>
                                                                        }
                                                                        else
                                                                        {
                                                                            @numberOfActiveResearchActions
                                                                        }
                                                                    </td>
                                                                    <td class="text-muted">Ενεργές</td>
                                                                </tr>
                                                                <tr>
                                                                    <td class="text-center fw-bold text-secondary">
                                                                        @if (numberOfInactiveResearchActions == null)
                                                                        {
                                                                            <div class="spinner-border spinner-border-sm text-secondary" role="status"></div>
                                                                        }
                                                                        else
                                                                        {
                                                                            @numberOfInactiveResearchActions
                                                                        }
                                                                    </td>
                                                                    <td class="text-muted">Ολοκληρωμένες</td>
                                                                </tr>
                                                                <tr class="bg-light">
                                                                    <td class="fw-bold">Σύνολο Ερευνητικών Δράσεων</td>
                                                                    <td class="text-center fw-bold">
                                                                        @if (numberOfActiveResearchActions == null || numberOfInactiveResearchActions == null)
                                                                        {
                                                                            <div class="spinner-border spinner-border-sm" role="status"></div>
                                                                        }
                                                                        else
                                                                        {
                                                                            @(numberOfActiveResearchActions + numberOfInactiveResearchActions)
                                                                        }
                                                                    </td>
                                                                    <td class="text-muted">Συνολικός αριθμός
                                                                      <i class="fas fa-info-circle ms-2 text-success" style="cursor: pointer;" 
                                                                      @onclick="ShowResearchActionsDetails" title="Προβολή λεπτομερειών όλων των ερευνητικών δράσεων"></i>
                                                                    </td>
                                                                </tr>
        
                                                                <!-- Πατέντες -->
                                                                <tr>
                                                                    <td class="fw-bold" rowspan="2">
                                                                        <i class="fas fa-certificate me-2 text-secondary"></i>Πατέντες
                                                                    </td>
                                                                    <td class="text-center fw-bold text-success">
                                                                        @if (numberOfActivePatents == null)
                                                                        {
                                                                            <div class="spinner-border spinner-border-sm text-success" role="status"></div>
                                                                        }
                                                                        else
                                                                        {
                                                                            @numberOfActivePatents
                                                                        }
                                                                    </td>
                                                                    <td class="text-muted">Ενεργές</td>
                                                                </tr>
                                                                <tr>
                                                                    <td class="text-center fw-bold text-secondary">
                                                                        @if (numberOfInactivePatents == null)
                                                                        {
                                                                            <div class="spinner-border spinner-border-sm text-secondary" role="status"></div>
                                                                        }
                                                                        else
                                                                        {
                                                                            @numberOfInactivePatents
                                                                        }
                                                                    </td>
                                                                    <td class="text-muted">Ανενεργές</td>
                                                                </tr>
                                                                <tr class="bg-light">
                                                                    <td class="fw-bold">Σύνολο Πατέντων</td>
                                                                    <td class="text-center fw-bold">
                                                                        @if (numberOfActivePatents == null || numberOfInactivePatents == null)
                                                                        {
                                                                            <div class="spinner-border spinner-border-sm" role="status"></div>
                                                                        }
                                                                        else
                                                                        {
                                                                            @(numberOfActivePatents + numberOfInactivePatents)
                                                                        }
                                                                    </td>
                                                                    <td class="text-muted">Συνολικός αριθμός
                                                                        <i class="fas fa-info-circle ms-2 text-success" style="cursor: pointer;" 
                                                                        @onclick="ShowPatentsDetails" title="Προβολή λεπτομερειών Πατέντων"></i>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>

                                                    </div>
                                                </div>
                                            </div>
                                        }
                                    </div>
                                    <!-- Modal for Faculty Members Details -->
                                    @if (showFacultyMembersModal)
                                    {
                                        <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0,0,0,0.5);">
                                            <div class="modal-dialog modal-xl modal-dialog-centered" role="document" style="max-width: 95%;">
                                                <div class="modal-content">
                                                    <div class="modal-header bg-primary text-white">
                                                        <h5 class="modal-title">
                                                            <i class="fas fa-user-tie me-2"></i>Μέλη-ΔΕΠ - Λεπτομέρειες
                                                        </h5>
                                                        <button type="button" class="btn-close btn-close-white" @onclick="CloseFacultyMembersModal"></button>
                                                    </div>
                                                    <div class="modal-body" style="max-height: 70vh; overflow-y: auto;">
                                                        @if (facultyMembersDetails?.Any() == true)
                                                        {
                                                            <div class="table-responsive" style="font-size: 0.9rem;">
                                                                <table class="table table-striped table-hover">
                                                                    <thead class="table-primary">
                                                                        <tr>
                                                                            <th style="width: 80px;">Φωτογραφία</th>
                                                                            <th style="min-width: 150px;">Ονοματεπώνυμο</th>
                                                                            <th style="min-width: 200px;">Σχολή</th>
                                                                            <th style="min-width: 200px;">Τμήμα</th>
                                                                            <th style="min-width: 150px;">Ρόλος στην Ομάδα</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        @foreach (var member in facultyMembersDetails)
                                                                        {
                                                                            <tr>
                                                                                <td class="align-middle">
                                                                                    @if (member.Image != null && member.Image.Length > 0)
                                                                                    {
                                                                                        <img src="data:image/jpeg;base64,@Convert.ToBase64String(member.Image)" 
                                                                                             class="rounded-circle" style="width: 50px; height: 50px; object-fit: cover;" />
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <i class="fas fa-user-circle fa-2x text-secondary"></i>
                                                                                    }
                                                                                </td>
                                                                                <td class="align-middle fw-bold">@member.Name @member.Surname</td>
                                                                                <td class="align-middle">@member.School</td>
                                                                                <td class="align-middle">@member.Department</td>
                                                                                <td class="align-middle">
                                                                                    <span class="badge bg-info text-dark">@member.Role</span>
                                                                                </td>
                                                                            </tr>
                                                                        }
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        }
                                                        else
                                                        {
                                                            <p class="text-center text-muted py-4">
                                                                <i class="fas fa-users-slash fa-2x mb-2 d-block"></i>
                                                                Δεν βρέθηκαν μέλη ΔΕΠ
                                                            </p>
                                                        }
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-secondary" @onclick="CloseFacultyMembersModal">
                                                            <i class="fas fa-times me-1"></i>Κλείσιμο
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    }

                                    <!-- Modal for Non-Faculty Members Details -->
                                    @if (showNonFacultyMembersModal)
                                    {
                                        <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0,0,0,0.5);">
                                            <div class="modal-dialog modal-xl modal-dialog-centered" role="document" style="max-width: 95%;">
                                                <div class="modal-content">
                                                    <div class="modal-header bg-info text-white">
                                                        <h5 class="modal-title">
                                                            <i class="fas fa-users me-2"></i>Συνεργάτες - Λεπτομέρειες
                                                        </h5>
                                                        <button type="button" class="btn-close btn-close-white" @onclick="CloseNonFacultyMembersModal"></button>
                                                    </div>
                                                    <div class="modal-body" style="max-height: 70vh; overflow-y: auto;">
                                                        @if (nonFacultyMembersDetails?.Any() == true)
                                                        {
                                                            <div class="table-responsive" style="font-size: 0.9rem;">
                                                                <table class="table table-striped table-hover">
                                                                    <thead class="table-info">
                                                                        <tr>
                                                                            <th style="width: 80px;">Φωτογραφία</th>
                                                                            <th style="min-width: 150px;">Ονοματεπώνυμο</th>
                                                                            <th style="min-width: 200px;">Σχολή</th>
                                                                            <th style="min-width: 200px;">Τμήμα</th>
                                                                            <th style="min-width: 150px;">Επίπεδο Σπουδών</th>                                                                           
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        @foreach (var member in nonFacultyMembersDetails)
                                                                        {
                                                                            <tr>
                                                                                <td class="align-middle">
                                                                                    @if (member.Image != null && member.Image.Length > 0)
                                                                                    {
                                                                                        <img src="data:image/jpeg;base64,@Convert.ToBase64String(member.Image)" 
                                                                                             class="rounded-circle" style="width: 50px; height: 50px; object-fit: cover;" />
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <i class="fas fa-user-circle fa-2x text-secondary"></i>
                                                                                    }
                                                                                </td>
                                                                                <td class="align-middle fw-bold">@member.Name @member.Surname</td>
                                                                                <td class="align-middle">@member.School</td>
                                                                                <td class="align-middle">@member.Department</td>
                                                                                <td class="align-middle">
                                                                                    <span class="badge bg-secondary">@member.LevelOfStudies</span>
                                                                                </td>
                                                                            </tr>
                                                                        }
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        }
                                                        else
                                                        {
                                                            <p class="text-center text-muted py-4">
                                                                <i class="fas fa-user-graduate fa-2x mb-2 d-block"></i>
                                                                Δεν βρέθηκαν συνεργάτες
                                                            </p>
                                                        }
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-secondary" @onclick="CloseNonFacultyMembersModal">
                                                            <i class="fas fa-times me-1"></i>Κλείσιμο
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    }
                                    <!-- Modal for Research Actions Details -->
                                    @if (showResearchActionsModal)
                                    {
                                        <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0,0,0,0.5);">
                                            <div class="modal-dialog modal-xl modal-dialog-centered" role="document" style="max-width: 95%;">
                                                <div class="modal-content">
                                                    <div class="modal-header bg-success text-white">
                                                        <h5 class="modal-title">
                                                            <i class="fas fa-flask me-2"></i>Ερευνητικές Δράσεις - Λεπτομέρειες
                                                        </h5>
                                                        <button type="button" class="btn-close btn-close-white" @onclick="CloseResearchActionsModal"></button>
                                                    </div>
                                                    <div class="modal-body" style="max-height: 70vh; overflow-y: auto;">
                                                        @if (researchActionsDetails?.Any() == true)
                                                        {
                                                            <div class="table-responsive" style="font-size: 0.9rem;">
                                                                <table class="table table-striped table-hover">
                                                                    <thead class="table-success">
                                                                        <tr>
                                                                            <th style="min-width: 200px;">Τίτλος Έργου</th>
                                                                            <th style="min-width: 120px;">Ακρωνύμιο</th>
                                                                            <th style="min-width: 150px;">Αριθμός GA</th>
                                                                            <th style="min-width: 120px;">Ημ/νία Έναρξης</th>
                                                                            <th style="min-width: 120px;">Ημ/νία Λήξης</th>
                                                                            <th style="min-width: 150px;">Συντονιστής</th>
                                                                            <th style="min-width: 100px;">Κωδικός ELKE</th>
                                                                            <th style="min-width: 200px;">Επιστημονικός Υπεύθυνος</th>
                                                                            <th style="min-width: 100px;">Κατάσταση</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        @foreach (var action in researchActionsDetails)
                                                                        {
                                                                            <tr>
                                                                                <td class="align-middle fw-bold">@action.ProjectTitle</td>
                                                                                <td class="align-middle">
                                                                                    @if (!string.IsNullOrEmpty(action.ProjectAcronym))
                                                                                    {
                                                                                        <span class="badge bg-info text-dark">@action.ProjectAcronym</span>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <span class="text-muted">-</span>
                                                                                    }
                                                                                </td>
                                                                                <td class="align-middle">@action.GrantAgreementNumber</td>
                                                                                <td class="align-middle">
                                                                                    @if (action.StartDate.HasValue)
                                                                                    {
                                                                                        <span class="badge bg-light text-dark">
                                                                                            @action.StartDate.Value.ToString("dd/MM/yyyy")
                                                                                        </span>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <span class="text-muted">-</span>
                                                                                    }
                                                                                </td>
                                                                                <td class="align-middle">
                                                                                    @if (action.EndDate.HasValue)
                                                                                    {
                                                                                        <span class="badge bg-light text-dark">
                                                                                            @action.EndDate.Value.ToString("dd/MM/yyyy")
                                                                                        </span>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <span class="text-muted">-</span>
                                                                                    }
                                                                                </td>
                                                                                <td class="align-middle">@action.ProjectCoordinator</td>
                                                                                <td class="align-middle">
                                                                                    @if (!string.IsNullOrEmpty(action.ELKECode))
                                                                                    {
                                                                                        <span class="badge bg-warning text-dark">@action.ELKECode</span>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <span class="text-muted">-</span>
                                                                                    }
                                                                                </td>
                                                                                <td class="align-middle">@action.ScientificResponsibleEmail</td>
                                                                                <td class="align-middle">
                                                                                    @if (action.ProjectStatus == "OnGoing")
                                                                                    {
                                                                                        <span class="badge bg-success">Εν Ενεργεία</span>
                                                                                    }
                                                                                    else if (action.ProjectStatus == "Past")
                                                                                    {
                                                                                        <span class="badge bg-secondary">Ολοκληρωμένο</span>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <span class="badge bg-warning">@action.ProjectStatus</span>
                                                                                    }
                                                                                </td>
                                                                            </tr>
                                                                        }
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        }
                                                        else
                                                        {
                                                            <p class="text-center text-muted py-4">
                                                                <i class="fas fa-flask fa-2x mb-2 d-block"></i>
                                                                Δεν βρέθηκαν ερευνητικές δράσεις
                                                            </p>
                                                        }
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-secondary" @onclick="CloseResearchActionsModal">
                                                            <i class="fas fa-times me-1"></i>Κλείσιμο
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    }
                                    <!-- Modal for Patent Details -->
                                    @if (showPatentsModal)
                                    {
                                        <div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0,0,0,0.5);">
                                            <div class="modal-dialog modal-xl modal-dialog-centered" role="document" style="max-width: 95%;">
                                                <div class="modal-content">
                                                    <div class="modal-header bg-warning text-white">
                                                        <h5 class="modal-title">
                                                            <i class="fas fa-certificate me-2"></i>Πατέντες - Λεπτομέρειες
                                                        </h5>
                                                        <button type="button" class="btn-close btn-close-white" @onclick="ClosePatentsModal"></button>
                                                    </div>
                                                    <div class="modal-body" style="max-height: 70vh; overflow-y: auto;">
                                                        @if (patentsDetails?.Any() == true)
                                                        {
                                                            <div class="table-responsive" style="font-size: 0.9rem;">
                                                                <table class="table table-striped table-hover">
                                                                    <thead class="table-warning">
                                                                        <tr>
                                                                            <th style="min-width: 200px;">Τίτλος</th>
                                                                            <th style="min-width: 150px;">Τύπος</th>
                                                                            <th style="min-width: 120px;">DOI</th>
                                                                            <th style="min-width: 200px;">URL</th>
                                                                            <th style="min-width: 250px;">Περιγραφή</th>
                                                                            <th style="min-width: 100px;">Κατάσταση</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        @foreach (var patent in patentsDetails)
                                                                        {
                                                                            <tr>
                                                                                <td class="align-middle fw-bold">@patent.PatentTitle</td>
                                                                                <td class="align-middle">
                                                                                    @if (!string.IsNullOrEmpty(patent.PatentType))
                                                                                    {
                                                                                        <span class="badge bg-info text-dark">@patent.PatentType</span>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <span class="text-muted">-</span>
                                                                                    }
                                                                                </td>
                                                                                <td class="align-middle">
                                                                                    @if (!string.IsNullOrEmpty(patent.PatentDOI))
                                                                                    {
                                                                                        <span class="badge bg-light text-dark">@patent.PatentDOI</span>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <span class="text-muted">-</span>
                                                                                    }
                                                                                </td>
                                                                                <td class="align-middle">
                                                                                    @if (!string.IsNullOrEmpty(patent.PatentURL))
                                                                                    {
                                                                                        <a href="@patent.PatentURL" target="_blank" class="text-decoration-none">
                                                                                            <i class="fas fa-external-link-alt me-1"></i>Προβολή
                                                                                        </a>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <span class="text-muted">-</span>
                                                                                    }
                                                                                </td>
                                                                                <td class="align-middle">
                                                                                    @if (!string.IsNullOrEmpty(patent.PatentDescription))
                                                                                    {
                                                                                        <div style="max-height: 100px; overflow-y: auto;">
                                                                                            @patent.PatentDescription
                                                                                        </div>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <span class="text-muted">-</span>
                                                                                    }
                                                                                </td>
                                                                                <td class="align-middle">
                                                                                    @if (patent.PatentStatus == "Ενεργή")
                                                                                    {
                                                                                        <span class="badge bg-success">Ενεργή</span>
                                                                                    }
                                                                                    else if (patent.PatentStatus == "Ανενεργή")
                                                                                    {
                                                                                        <span class="badge bg-secondary">Ανενεργή</span>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <span class="badge bg-warning">@patent.PatentStatus</span>
                                                                                    }
                                                                                </td>
                                                                            </tr>
                                                                        }
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        }
                                                        else
                                                        {
                                                            <p class="text-center text-muted py-4">
                                                                <i class="fas fa-certificate fa-2x mb-2 d-block"></i>
                                                                Δεν βρέθηκαν διπλώματα ευρεσιτεχνίας
                                                            </p>
                                                        }
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-secondary" @onclick="ClosePatentsModal">
                                                            <i class="fas fa-times me-1"></i>Κλείσιμο
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    }

                                }                                                                    
                            }

                        </div>
                    }
 
                </div>
            </Authorized>
        </AuthorizeView>
    </main>
</div>



@inject NavigationManager NavigationManager;
@inject Microsoft.AspNetCore.Components.Authorization.AuthenticationStateProvider AuthenticationStateProvider
@using Microsoft.Extensions.Configuration;
@using System.Text
@using System.Globalization
@using System.Text.RegularExpressions
@inject IConfiguration Configuration
@inject IAuth0Service Auth0Service
@inject GoogleScholarService _googleScholarService;
@code {

    // Properties for Research Group search
    private string searchResearchGroupNameAsCompanyToFindResearchGroup = "";
    private string searchResearchGroupSchoolAsCompanyToFindResearchGroup = "";
    private string searchResearchGroupUniversityDepartmentAsCompanyToFindResearchGroup = "";
    private string searchResearchGroupAreasAsCompanyToFindResearchGroup = "";
    private string searchResearchGroupSkillsAsCompanyToFindResearchGroup = "";
    private string searchResearchGroupKeywordsAsCompanyToFindResearchGroup = "";
    private bool hasSearchedForResearchGroups = false;


    private List<string> researchgroupNameSuggestions = new List<string>();
    private List<string> researchGroupAreasSuggestions = new List<string>();
    private List<string> researchGroupSkillsSuggestions = new List<string>();
    private List<string> researchGroupKeywordsSuggestions = new List<string>();

    private List<string> selectedResearchGroupAreas = new List<string>();
    private List<string> selectedResearchGroupSkills = new List<string>();
    private List<string> selectedResearchGroupKeywords = new List<string>();

    private Dictionary<string, List<string>> universityDepartments = new()
    {
        ["ΑΓΡΟΤΙΚΗΣ ΑΝΑΠΤΥΞΗΣ, ΔΙΑΤΡΟΦΗΣ ΚΑΙ ΑΕΙΦΟΡΙΑΣ"] = new List<string>
        {
            "ΤΜΗΜΑ ΑΓΡΟΤΙΚΗΣ ΑΝΑΠΤΥΞΗΣ, ΑΓΡΟΔΙΑΤΡΟΦΗΣ ΚΑΙ ΔΙΑΧΕΙΡΙΣΗΣ ΦΥΣΙΚΩΝ ΠΟΡΩΝ"
        },
        ["ΕΠΙΣΤΗΜΩΝ ΑΓΩΓΗΣ"] = new List<string>
        {
            "ΠΑΙΔΑΓΩΓΙΚΟ ΤΜΗΜΑ ΔΗΜΟΤΙΚΗΣ ΕΚΠΑΙΔΕΥΣΗΣ",
            "ΤΜΗΜΑ ΕΚΠΑΙΔΕΥΣΗΣ ΚΑΙ ΑΓΩΓΗΣ ΣΤΗΝ ΠΡΟΣΧΟΛΙΚΗ ΗΛΙΚΙΑ"
        },
        ["ΕΠΙΣΤΗΜΩΝ ΥΓΕΙΑΣ"] = new List<string>
        {
            "ΤΜΗΜΑ ΙΑΤΡΙΚΗΣ",
            "ΤΜΗΜΑ ΝΟΣΗΛΕΥΤΙΚΗΣ",
            "ΤΜΗΜΑ ΟΔΟΝΤΙΑΤΡΙΚΗΣ",
            "ΤΜΗΜΑ ΦΑΡΜΑΚΕΥΤΙΚΗΣ"
        },
        ["ΕΠΙΣΤΗΜΗΣ ΦΥΣΙΚΗΣ ΑΓΩΓΗΣ ΚΑΙ ΑΘΛΗΤΙΣΜΟΥ"] = new List<string>
        {
            "ΤΜΗΜΑ ΕΠΙΣΤΗΜΗΣ ΦΥΣΙΚΗΣ ΑΓΩΓΗΣ ΚΑΙ ΑΘΛΗΤΙΣΜΟΥ"
        },
        ["ΘΕΟΛΟΓΙΚΗ"] = new List<string>
        {
            "ΤΜΗΜΑ ΘΕΟΛΟΓΙΑΣ",
            "ΤΜΗΜΑ ΚΟΙΝΩΝΙΚΗΣ ΘΕΟΛΟΓΙΑΣ ΚΑΙ ΘΡΗΣΚΕΙΟΛΟΓΙΑΣ"
        },
        ["ΘΕΤΙΚΩΝ ΕΠΙΣΤΗΜΩΝ"] = new List<string>
        {
            "ΤΜΗΜΑ ΑΕΡΟΔΙΑΣΤΗΜΙΚΗΣ ΕΠΙΣΤΗΜΗΣ ΚΑΙ ΤΕΧΝΟΛΟΓΙΑΣ",
            "ΤΜΗΜΑ ΒΙΟΛΟΓΙΑΣ",
            "ΤΜΗΜΑ ΓΕΩΛΟΓΙΑΣ ΚΑΙ ΓΕΩΠΕΡΙΒΑΛΛΟΝΤΟΣ",
            "ΤΜΗΜΑ ΙΣΤΟΡΙΑΣ ΚΑΙ ΦΙΛΟΣΟΦΙΑΣ ΤΗΣ ΕΠΙΣΤΗΜΗΣ",
            "ΤΜΗΜΑ ΜΑΘΗΜΑΤΙΚΩΝ",
            "ΤΜΗΜΑ ΠΛΗΡΟΦΟΡΙΚΗΣ ΚΑΙ ΤΗΛΕΠΙΚΟΙΝΩΝΙΩΝ",
            "ΤΜΗΜΑ ΤΕΧΝΟΛΟΓΙΩΝ ΨΗΦΙΑΚΗΣ ΒΙΟΜΗΧΑΝΙΑΣ",
            "ΤΜΗΜΑ ΦΥΣΙΚΗΣ",
            "ΤΜΗΜΑ ΧΗΜΕΙΑΣ"
        },
        ["ΝΟΜΙΚΗ"] = new List<string>
        {
            "ΝΟΜΙΚΗ ΣΧΟΛΗ"
        },
        ["ΟΙΚΟΝΟΜΙΚΩΝ ΚΑΙ ΠΟΛΙΤΙΚΩΝ ΕΠΙΣΤΗΜΩΝ"] = new List<string>
        {
            "ΤΜΗΜΑ ΔΙΑΧΕΙΡΙΣΗΣ ΛΙΜΕΝΩΝ ΚΑΙ ΝΑΥΤΙΛΙΑΣ",
            "ΤΜΗΜΑ ΕΠΙΚΟΙΝΩΝΙΑΣ ΚΑΙ ΜΕΣΩΝ ΜΑΖΙΚΗΣ ΕΝΗΜΕΡΩΣΗΣ",
            "ΤΜΗΜΑ ΟΙΚΟΝΟΜΙΚΩΝ ΕΠΙΣΤΗΜΩΝ",
            "ΤΜΗΜΑ ΠΟΛΙΤΙΚΗΣ ΕΠΙΣΤΗΜΗΣ ΚΑΙ ΔΗΜΟΣΙΑΣ ΔΙΟΙΚΗΣΗΣ",
            "ΤΜΗΜΑ ΤΟΥΡΚΙΚΩΝ ΣΠΟΥΔΩΝ ΚΑΙ ΣΥΓΧΡΟΝΩΝ ΑΣΙΑΤΙΚΩΝ ΣΠΟΥΔΩΝ",
            "ΤΜΗΜΑ ΔΙΟΙΚΗΣΗΣ ΕΠΙΧΕΙΡΗΣΕΩΝ ΚΑΙ ΟΡΓΑΝΙΣΜΩΝ",
            "ΤΜΗΜΑ ΚΟΙΝΩΝΙΟΛΟΓΙΑΣ",
            "ΤΜΗΜΑ ΨΗΦΙΑΚΩΝ ΤΕΧΝΩΝ ΚΑΙ ΚΙΝΗΜΑΤΟΓΡΑΦΟΥ"
        },
        ["ΦΙΛΟΣΟΦΙΚΗ"] = new List<string>
        {
            "ΠΑΙΔΑΓΩΓΙΚΟ ΤΜΗΜΑ ΔΕΥΤΕΡΟΒΑΘΜΙΑΣ ΕΚΠΑΙΔΕΥΣΗΣ",
            "ΤΜΗΜΑ ΑΓΓΛΙΚΗΣ ΓΛΩΣΣΑΣ ΚΑΙ ΦΙΛΟΛΟΓΙΑΣ",
            "ΤΜΗΜΑ ΓΑΛΛΙΚΗΣ ΓΛΩΣΣΑΣ ΚΑΙ ΦΙΛΟΛΟΓΙΑΣ",
            "ΤΜΗΜΑ ΓΕΡΜΑΝΙΚΗΣ ΓΛΩΣΣΑΣ ΚΑΙ ΦΙΛΟΛΟΓΙΑΣ",
            "ΤΜΗΜΑ ΘΕΑΤΡΙΚΩΝ ΣΠΟΥΔΩΝ",
            "ΤΜΗΜΑ ΙΣΠΑΝΙΚΗΣ ΓΛΩΣΣΑΣ ΚΑΙ ΦΙΛΟΛΟΓΙΑΣ",
            "ΤΜΗΜΑ ΙΣΤΟΡΙΑΣ ΚΑΙ ΑΡΧΑΙΟΛΟΓΙΑΣ",
            "ΤΜΗΜΑ ΙΤΑΛΙΚΗΣ ΓΛΩΣΣΑΣ ΚΑΙ ΦΙΛΟΛΟΓΙΑΣ",
            "ΤΜΗΜΑ ΜΟΥΣΙΚΩΝ ΣΠΟΥΔΩΝ",
            "ΤΜΗΜΑ ΡΩΣΙΚΗΣ ΓΛΩΣΣΑΣ ΚΑΙ ΦΙΛΟΛΟΓΙΑΣ ΚΑΙ ΣΛΑΒΙΚΩΝ ΣΠΟΥΔΩΝ",
            "ΤΜΗΜΑ ΦΙΛΟΛΟΓΙΑΣ",
            "ΤΜΗΜΑ ΦΙΛΟΣΟΦΙΑΣ",
            "ΤΜΗΜΑ ΨΥΧΟΛΟΓΙΑΣ"
        }
    };

    // Property to get the list of schools for the dropdown
    private List<string> researchGroupSchools => universityDepartments.Keys.ToList();

    // Property to get the filtered departments based on selected school
    private List<string> filteredDepartments => 
        string.IsNullOrEmpty(searchResearchGroupSchoolAsCompanyToFindResearchGroup) 
            ? new List<string>() 
            : universityDepartments.ContainsKey(searchResearchGroupSchoolAsCompanyToFindResearchGroup)
                ? universityDepartments[searchResearchGroupSchoolAsCompanyToFindResearchGroup]
                : new List<string>();

    // Method to handle school selection change
    private async Task OnSchoolSelectionChanged(ChangeEventArgs e)
    {
        searchResearchGroupSchoolAsCompanyToFindResearchGroup = e.Value?.ToString() ?? "";
        // Clear department selection when school changes
        searchResearchGroupUniversityDepartmentAsCompanyToFindResearchGroup = "";
        await InvokeAsync(StateHasChanged);
    }
    // Search results and pagination
    private List<ResearchGroup> searchResultsAsCompanyToFindResearchGroup = new List<ResearchGroup>();
    private ResearchGroup selectedResearchGroupWhenSearchForResearchGroupsAsCompany;
    private bool showResearchGroupDetailsModalWhenSearchForResearchGroupsAsCompany = false;

    private int currentResearchGroupPage_SearchForResearchGroupsAsCompany = 1;
    private int ResearchGroupsPerPage_SearchForResearchGroupsAsCompany = 5;
    private List<int> pageSizeOptions_SearchForResearchGroupsAsCompany = new List<int> { 5, 10, 20 };

    private bool isStatisticsVisible = false;
    private int? numberOfFacultyMembers;
    private int? numberOfCollaborators;
    private int? numberOfTotalPublications;
    private int? numberOfRecentPublications;
    private int? numberOfActiveResearchActions;
    private int? numberOfInactiveResearchActions;
    private int? numberOfActivePatents;
    private int? numberOfInactivePatents;

    // Add this method to toggle visibility
    private async Task ToggleStatisticsVisibility()
    {
        isStatisticsVisible = !isStatisticsVisible;
        await LoadResearchGroupStatistics();
        StateHasChanged();
    }


    private List<StudentWithAuth0Details> StudentsWithAuth0Details { get; set; } = new();
    private string UserRole = "";
    bool isStudentRegistered;
    bool isInitializedAsStudentUser = false;
    bool isCompanyRegistered;
    bool isInitializedAsCompanyUser = false;
    bool isProfessorRegistered;
    bool isInitializedAsProfessorUser = false;
    string CurrentUserEmail = "";
    private List<Student> Students = new List<Student>();
    bool isInitializedAsResearchGroupUser = false;
    bool isResearchGroupRegistered;

    private bool ShouldShowAdminTable()
    {
        return UserRole == "Admin" && !NavigationManager.Uri.Contains("/profile", StringComparison.OrdinalIgnoreCase);
    }

    private async Task LoadStudentsAsync()
    {
        // First get all students from your Students table
        Students = await dbContext.Students.ToListAsync();
    }


    bool showThesisApplications = false;
    bool showInternships = false;
    bool showJobApplications = false;
    private Student userData;
    private List<ProfessorThesisApplied> thesisApplications;
    private List<ProfessorThesisApplied> professorthesisApplications;
    private List<CompanyThesisApplied> companythesisApplications;
    private List<CompanyJobApplied> jobApplications;
    List<CompanyJob> jobs = new List<CompanyJob>();
    List<CompanyThesis> companytheses = new List<CompanyThesis>();
    List<ProfessorThesis> professortheses = new List<ProfessorThesis>();
    List<AnnouncementAsCompany> announcements = new List<AnnouncementAsCompany>();
    List<ProfessorThesis> theses = new List<ProfessorThesis>();
    List<CompanyInternship> companyinternships = new List<CompanyInternship>();
    private bool ShowStudentRegistrationButton = false;
    private bool ShowCompanyRegistrationButton = false;
    private bool ShowProfessorRegistrationButton = false;
    private bool ShowAdminRegistrationButton = false;
    private bool isStudentStatsFormVisibleToShowStudentStatsAsAdmin = false;
    private bool isAnalyticsVisible = false;

    string thesisSearch = "";
    string jobSearch = "";
    string companyinternshipSearch = "";

    string companyinternshipSearchByTitle = "";
    string companyinternshipSearchByType = "";
    string companyinternshipSearchByESPA = "";
    string companyinternshipSearchByRegion = "";
    string jobSearchByTown = "";
    string jobSearchByRegion = "";
    string companyjobSearchByRegion = "";
    private string companyinternshipSearchByTown = "";
    private bool companyinternshipSearchByTransportOffer;
    private bool companyjobSearchByTransportOffer;
    string companyinternshipSearchByArea = "";
    private List<Area> Areas = new();
    private List<Skill> Skills = new();
    private DateTime? internshipSearchByActiveStartDate;
    private string startDateInput;
    private string searchMonthInput;
    private string searchYearInput;
    private int? searchMonth;
    private int? searchYear;
    private int? selectedMonth;

    private bool IsCompanyRegistrationPage => NavigationManager.Uri.Contains("/companyRegistration");

    private string emailUsedToUploadThesis = "";
    private string professorNameSearch = "";
    private string professorSurnameSearch = "";
    private DateTime? thesisUploadDateTime;
    private int? thesisUploadMonth;
    bool showStudentThesisApplications = false;
    bool showStudentJobApplications = false;

    private CompanyJob job = new CompanyJob();
    private CompanyThesis thesis = new CompanyThesis();
    private AnnouncementAsCompany announcement = new AnnouncementAsCompany();
    private AnnouncementAsProfessor professorannouncement = new AnnouncementAsProfessor();
    private ProfessorThesis professorthesis = new ProfessorThesis();
    private IBrowserFile? uploadedFile;
    private bool showSuccessMessage = false;
    private bool showErrorMessage = false;

    private bool showErrorMessagesForAreasWhenUploadJobAsCompany = false;
    private bool showErrorMessagesForAreasWhenUploadInternshipAsCompany = false;
    private bool showErrorMessagesForSkillsWhenUploadThesisAsCompany = false;

    private bool showErrorMessageforUploadingjobsAsCompany = false;
    private bool showErrorMessageforUploadinginternshipsAsProfessor = false;
    private bool showErrorMessageforUploadingthesisAsCompany = false;
    private bool showErrorMessageforUploadingannouncementsAsCompany = false;
    private bool showErrorMessageforUploadingannouncementsAsProfessor = false;
    private bool showErrorMessageforUploadingThesisAsProfessor = false;
    private bool showErrorMessageForUploadingCompanyEvent = false;
    private bool showErrorMessageForUploadingProfessorEvent = false;
    private bool showSuccessUpdateMessage = false;
    private bool isEditing = false;
    private string? companyName;
    private string? companyAreas;
    private string? companyTelephone;
    private string? companyWebsite;
    private byte[]? companyLogo;
    private string? companyDescription;
    private string? companyShortName;
    private string? companyType;
    private string? companyActivity;
    private string? companyCountry;
    private string? companyLocation;
    private long? companyPermanentPC;
    private string? companyRegions;
    private string? companyTown;
    private string? companyHRName;
    private string? companyHRSurname;
    private string? companyHREmail;
    private string? companyHRTelephone;
    private string? companyAdminName;
    private string? companyAdminSurname;
    private string? companyAdminEmail;
    private string? companyAdminTelephone;
    private Dictionary<long, int> numberOfCompanyPeopleInputWhenCompanyShowsInterestInProfessorEvent = new Dictionary<long, int>();

    private string? professorName;
    private string? professorUniversity;
    private string? professorUniversityDepartment;
    private byte[]? professorImage;
    private string? professorSurname;
    private string? professorVathmidaDEP;
    private string? companyEmail;
    private string? professorPersonalTelephone;
    private string? professorWorkTelephone;
    private string? professorDepartment;
    private string? professorGeneralFieldOfWork;
    private string? professorGeneralSkills;
    private string? professorPersonalDescription;

    private string? professorLinkedInProfile;
    private string? professorPersonalWebsite;
    private string? professorScholarProfile;
    private string? professorOrchidProfile;

    private bool isForm1Visible = false;
    private bool isAnnouncementsFormVisible = false;
    private bool isAnnouncementsFormVisibleToShowGeneralAnnouncementsAndEventsAsCompany = false;
    private bool isAnnouncementsFormVisibleToShowGeneralAnnouncementsAndEventsAsRG = false;
    private bool isProfessorAnnouncementsFormVisible = false;
    private bool isProfessorThesisFormVisible = false;
    private bool isProfessorInternshipFormVisible = false;
    private bool isProfessorSearchStudentFormVisible = false;
    private bool isProfessorSearchCompanyFormVisible = false;
    private bool isRGSearchCompanyFormVisible = false;
    private bool isForm2Visible = false;
    private bool isShowActiveThesesAsCompanyFormVisible = false;
    private bool isThesisApplicationsVisible = false;
    private bool isAnnouncementsAsStudentVisible = false;
    private bool isAnnouncementsAsRGVisible = false;
    private bool isAnnouncementsAsProfessorVisible = false;
    private bool isSearchInternshipsAsStudentFiltersVisible = false;
    private bool isJobApplicationsAsStudentVisible  = false;
    private bool isJobPositionAsStudentFiltersVisible = false;
    private bool isInternshipApplicationsAsStudentVisible = false;
    private bool isInternshipSearchAsStudentFiltersVisible = false;
    private bool isEventSearchAsStudentVisible = false;

    private Dictionary<int, bool> positionDetails = new Dictionary<int, bool>();
    private List<CompanyJob> companyJobs;

    bool showApplications = false;
    private List<CompanyJobApplied> jobApplicationsmadeToCompany = new List<CompanyJobApplied>(); // List for job applications
    private Company companyData;

    private Company companyDatas = new Company();

    private long? selectedPositionId = null;

    private int totalStudentsCount = 0;
    private bool isDoughnutChartVisible = false;
    private bool isDepartmentDistributionChartVisible = false;
    private Dictionary<string, int> departmentDistribution = new Dictionary<string, int>();
    private Dictionary<string, int> skillDistribution = new Dictionary<string, int>();
    private bool hasReadAsCompanyPermission = false;

    private bool isUploadCompanyInternshipsFormVisible = false;
    private bool isUploadCompanyThesisFormVisible = false;
    private bool isShowActiveInternshipsAsCompanyFormVisible = false;
    private bool isShowActiveInternshipsAsProfessorFormVisible = false;
    private bool isUploadCompanyEventFormVisible = false;

    private bool isShowActiveJobsAsCompanyFormVisible = false;
    private bool isUploadProfessorEventFormVisible = false;

    private CompanyInternship companyInternship = new CompanyInternship();
    private CompanyThesis companyThesis = new CompanyThesis();

    private string selectedRegion = "";
    private string selectedTown = "";
    private Dictionary<string, bool> selectedTownsDictionary = new Dictionary<string, bool>();
    private HashSet<string> selectedRegions = new HashSet<string>();
    private Dictionary<string, bool> selectedRegionsDictionary = new Dictionary<string, bool>();
    private List<Area> availableAreas = new List<Area>();
    private List<Skill> availableSkills = new List<Skill>();
    private List<string> expandedAreas = new List<string>();
    private List<SelectedArea> selectedAreasForAssessment = new List<SelectedArea>();

    private string companyNameSearch { get; set; }
    private string emailSearch { get; set; }
    private string positionTypeSearch { get; set; }

    private string companyThesisSearch { get; set; }
    private string companyEmailSearch { get; set; }
    private string normalizedThesisSearch { get; set; }
    private string normalizedEmailSearch { get; set; }
    private string normalizedProfessorNameSearch { get; set; }
    private string normalizedProfessorSurnameSearch { get; set; }


    private DateTime? uploadDateSearch { get; set; }

    private CompanyInternship companyinternship = new CompanyInternship();
    private string selectedRegionForInternship;
    private List<string> filteredTownsForInternship;

    private List<CompanyInternship> internships = new List<CompanyInternship>(); 
    private List<ProfessorInternship> professorInternships = new List<ProfessorInternship>();


    private List<string> InternshipAsCompanyStatusOptions = new List<string> { "Δημοσιευμένη", "Μη Δημοσιευμένη", "Αποσυρμένη" };

    private string selectedStatusFilterForInternships = "Όλα";
    private string selectedStatusFilterForProfessorInternships = "Όλα";
    private string selectedStatusFilterForCompanyTheses = "Όλα";
    private string selectedStatusFilterForJobs = "Όλα";
    private string selectedStatusFilterForAnnouncements = "Όλα";
    private string selectedStatusFilterForAnnouncementsAsProfessor = "Όλα";
    private string selectedStatusFilterForEventsAsCompany = "Όλα";
    private string selectedStatusFilterForEventsAsProfessor = "Όλα";
    private string selectedStatusFilterForThesesAsProfessor = "Όλα";

    private CompanyInternship selectedInternship;
    private ProfessorInternship selectedProfessorInternship;
    private CompanyJob selectedJob;
    private CompanyThesis selectedCompanyThesis;
    private bool isEditPopupVisibleForInternships = false;
    private bool isEditPopupVisibleForProfessorInternships = false;
    private bool isEditPopupVisibleForJobs = false;
    private bool isEditPopupVisibleForCompanyThesis = false;
    private ThesisApplication selectedThesisApplication;
    private CompanyThesisApplied selectedCompanyThesisApplicationToShowAsStudent;
    private ProfessorThesisApplied selectedProfessorThesisApplicationToShowAsStudent;
    private ProfessorThesis selectedProfessorThesis;

    private bool showStudentInternshipApplications = false;

    private List<InternshipApplied> internshipApplications = new List<InternshipApplied>();
    private List<ProfessorInternshipApplied> professorInternshipApplications = new List<ProfessorInternshipApplied>();

    private CompanyJobApplied selectedJobApplication;
    private CompanyInternshipAreasForCheckboxes companyInternshipforcheckboxes = new CompanyInternshipAreasForCheckboxes();

    private List<Area> SelectedAreasWhenUploadInternshipAsCompany = new(); 
    private List<Area> SelectedAreasWhenUploadThesisAsCompany = new();
    private List<Area> SelectedAreasWhenUploadJobAsCompany = new();
    private List<Area> SelectedAreasWhenUploadEventAsCompany = new();
    private List<Skill> SelectedSkillsWhenUploadThesisAsCompany = new(); 

    private List<Area> SelectedAreasWhenUploadInternshipAsProfessor = new(); 
    private List<Area> SelectedAreasWhenUploadThesisAsProfessor = new();
    private List<Area> SelectedAreasWhenUploadJobAsProfessor = new();
    private List<Area> SelectedAreasWhenUploadEventAsProfessor = new();


    private List<Area> SelectedAreasToEditForCompanyJob = new List<Area>();
    private List<Area> SelectedAreasToEditForCompanyInternship = new List<Area>();
    private List<Area> SelectedAreasToEditForCompanyThesis = new List<Area>();
    private List<Skill> SelectedSkillsToEditForCompanyThesis  = new List<Skill>();
    private List<Skill> SelectedSkills = new(); 

    private List<Professor> professors = new List<Professor>();
    private int? selectedProfessorId;
    private int? selectedCompanyId;
    private string statusToEdit;

    private DateTime? selectedDateToSearchInternship { get; set; }
    private DateTime? finishEstimationDateToSearchInternship { get; set; }

    private DateTime? selectedDateToSearchJob { get; set; }

    private List<string> selectedAreas = new List<string>();
    private bool isInternshipAreasVisible = false;

    private Dictionary<long, bool> expandedInternships = new Dictionary<long, bool>();
    private Dictionary<long, bool> expandedProfessorInternships = new Dictionary<long, bool>();

    private Dictionary<long, bool> expandedJobs = new Dictionary<long, bool>();
    private Dictionary<long, bool> expandedCompanyTheses = new Dictionary<long, bool>();
    private Dictionary<long, bool> expandedCompanyThesesForProfessorInterest = new Dictionary<long, bool>();
    private Dictionary<long, bool> expandedProfessorThesesForCompanyInterest = new Dictionary<long, bool>();
    private int remainingCharactersInInternshipFieldUploadAsCompany = 120;
    private int remainingCharactersInThesisFieldUploadAsCompany = 120;
    private int remainingCharactersInThesisFieldUploadAsProfessor = 120;
    private int remainingCharactersInAnnouncementFieldUploadAsCompany = 120;
    private int remainingCharactersInAnnouncementFieldUploadAsProfessor = 120;
    private int remainingCharactersInInternshipDescriptionUploadAsCompany = 1000;
    private int remainingCharactersInCompanyEventDescription = 1000;
    private int remainingCharactersInEventTitleField = 120;

    private int remainingCharactersInJobFieldUploadAsCompany = 120;
    private int remainingCharactersInJobDescriptionUploadAsCompany = 1000;
    private int remainingCharactersInThesisDescriptionUploadAsCompany = 1000;
    private int remainingCharactersInThesisDescriptionUploadAsProfessor = 1000;
    private int remainingCharactersInAnnouncementDescriptionUploadAsCompany = 1000;
    private int remainingCharactersInAnnouncementDescriptionUploadAsProfessor = 1000;

    private string selectedStatusFilterToCountInternships = "Όλα";
    private int totalCount, publishedCount, unpublishedCount, withdrawnCount;
    private int totalCountForCompanyTheses, publishedCountForCompanyTheses, unpublishedCountForCompanyTheses, withdrawnCountForCompanyTheses;
    private int totalCountJobs, publishedCountJobs, unpublishedCountJobs, withdrawnCountJobs;
    private int totalCountAnnouncements, publishedCountAnnouncements, unpublishedCountAnnouncements, withdrawnCountAnnouncements;
    private int totalCountAnnouncementsAsProfessor, publishedCountAnnouncementsAsProfessor, unpublishedCountAnnouncementsAsProfessor, withdrawnCountAnnouncementsAsProfessor;
    private int totalCountThesesAsProfessor, publishedCountThesesAsProfessor, unpublishedCountThesesAsProfessor, withdrawnCountThesesAsProfessor;
    private int totalCountEventsAsCompany, publishedCountEventsAsCompany, unpublishedCountEventsAsCompany, withdrawnCountEventsAsCompany;
    private int totalCountEventsAsProfessor, publishedCountEventsAsProfessor, unpublishedCountEventsAsProfessor, withdrawnCountEventsAsProfessor;

    private int totalProfessorInternshipsCount, publishedProfessorInternshipsCount, unpublishedProfessorInternshipsCount, withdrawnProfessorInternshipsCount;

    private bool actionsPerformedToAcceptorRejectInternshipsAsCompany = false;
    private bool actionsPerformedToAcceptorRejectInternshipsAsProfessor = false;
    private bool actionsPerformedToAcceptorRejectJobsAsCompany = false;
    private bool actionsPerformedToAcceptorRejectThesisAsCompany = false;
    private bool actionsPerformedToAcceptorRejectThesesAsProfessor = false;

    private List<Company> companies = new List<Company>(); // Initialize with an empty list
    private Company selectedCompany;
    private Student selectedStudent;
    private List<string> availableTowns;

    private bool isSaveAnnouncementAsCompanySuccessful = false;
    private string saveAnnouncementAsCompanyMessage = string.Empty;
    private bool isSaveAnnouncementAsProfessorSuccessful = false;
    private string saveAnnouncementAsProfessorMessage = string.Empty;
    private string saveEventAsCompanyMessage = string.Empty;
    private string saveEventAsProfessorMessage = string.Empty;
    private bool isSaveThesisAsProfessorSuccessful = false;
    private string saveThesisAsProfessorMessage = string.Empty;

    private bool isPositionAreasVisible = false;
    private bool isThesisAreasVisible = false;
    private bool isCompanySearchStudentVisible = false;
    private bool isCompanySearchProfessorVisible = false;
    private bool isCompanySearchResearchGroupVisible = false;
    private bool isRGSearchProfessorVisible = false;
    private List<string> selectedPositionAreas = new List<string>();
    private List<string> selectedThesisAreas = new List<string>();

    private bool isUploadedAnnouncementsVisible = false;
    private bool isUploadedEventsVisible = false;
    private bool isUploadedEventsVisibleAsProfessor = false;

    private bool isUploadedAnnouncementsVisibleAsProfessor = false;
    private bool isUploadedThesesVisibleAsProfessor = false;
    private bool isUploadedCompanyThesesVisibleAsProfessor = false;
    private bool isUploadedProfessorThesesVisibleAsCompany = false;
    private List<AnnouncementAsCompany> UploadedAnnouncements { get; set; } = new List<AnnouncementAsCompany>();
    private List<CompanyThesis> UploadedCompanyTheses { get; set; } = new List<CompanyThesis>();
    private List<AnnouncementAsProfessor> UploadedAnnouncementsAsProfessor { get; set; } = new List<AnnouncementAsProfessor>();
    private List<CompanyEvent> UploadedEventsAsCompany { get; set; } = new List<CompanyEvent>();
    private List<ProfessorEvent> UploadedEventsAsProfessor { get; set; } = new List<ProfessorEvent>();
    private List<ProfessorThesis> UploadedThesesAsProfessor { get; set; } = new List<ProfessorThesis>();
    private List<CompanyThesis> UploadedCompanyThesesToSeeAsProfessor { get; set; } = new List<CompanyThesis>();
    private bool isEditModalVisible = false;
    private bool isEditModalVisibleForAnnouncementsAsProfessor = false;
    private bool isEditModalVisibleForThesesAsProfessor = false;
    private bool isEditModalVisibleForEventsAsCompany = false;
    private bool isEditModalVisibleForEventsAsProfessor = false;
    private AnnouncementAsCompany currentAnnouncement;
    private CompanyEvent currentCompanyEvent;
    private ProfessorEvent currentProfessorEvent;
    private CompanyThesis currentThesis;
    private AnnouncementAsProfessor currentAnnouncementAsProfessor;
    private ProfessorThesis currentThesisAsProfessor;

    private List<AnnouncementAsCompany> FilteredAnnouncements { get; set; }
    private List<CompanyEvent> FilteredCompanyEvents { get; set; }
    private List<ProfessorEvent> FilteredProfessorEvents { get; set; }
    private List<CompanyThesis> FilteredCompanyTheses { get; set; }
    private List<AnnouncementAsProfessor> FilteredAnnouncementsAsProfessor { get; set; }
    private List<ProfessorInternship> FilteredInternshipsAsProfessor { get; set; }
    private List<ProfessorThesis> FilteredThesesAsProfessor { get; set; }
    private bool isModalVisibleForJobs = false;
    private bool isModalVisibleToShowProfessorThesisAsProfessor = false;
    private bool isModalVisibleForProfessorThesisToShowDetailsAsStudent = false;
    private bool isModalVisibleForCompanyThesisToShowDetailsAsStudent = false;
    private bool isModalVisibleToShowCompanyThesisDetails = false;
    private bool isModalVisibleToEditCompanyThesisDetails = false;
    private bool isModalVisibleToShowStudentDetailsAsCompanyFromTheirHyperlinkNameInCompanyInternships = false;
    private bool isModalVisibleToShowStudentDetailsAsProfessorFromTheirHyperlinkNameInProfessorInternships = false;
    private CompanyJob currentJob;
    private CompanyJob currentJobApplicationMadeAsStudent;

    private List<AllTheses> sumUpThesesFromBothCompanyAndProfessor = new List<AllTheses>();
    private List<AllInternships> sumUpInternshipsFromBothCompanyAndProfessor = new List<AllInternships>();

    private string thesisSearchForInternshipsAsStudent;
    private string professorNameSearchForInternshipsAsStudent;
    private string professorSurnameSearchForInternshipsAsStudent;
    private string companyNameSearchForInternshipsAsStudent;
    private int? thesisUploadMonthForInternshipsAsStudent;

    private string thesisSearchForThesesAsStudent;
    private string professorNameSearchForThesesAsStudent;
    private string professorSurnameSearchForThesesAsStudent;
    private string companyNameSearchForThesesAsStudent;
    private int? thesisUploadMonthForThesesAsStudent;
    private DateTime? thesisStartDateForThesesAsStudent;


    private List<Area> availableAreasForProfessorThesis = new List<Area>();
    private List<Skill> availableSkillsForProfessorThesis = new List<Skill>();
    private List<long> selectedAreasForProfessorThesis = new List<long>();
    private List<long> selectedSkillsForProfessorThesis = new List<long>();

    private ProfessorThesis currentProfessorThesis;
    private ProfessorThesisApplied currentProfessorThesisToShowDetailsAsStudent;
    private CompanyThesis currentCompanyThesisToShowDetailsAsStudent;
    private bool isModalVisibleToShowProfessorThesisDetails = false;

    private Dictionary<long, bool> expandedTheses = new Dictionary<long, bool>();

    private IEnumerable<CompanyThesisApplied> companyThesisApplications;
    private IEnumerable<ProfessorThesisApplied> professorThesisApplications;

    private ProfessorThesis selectedProfessorThesisDetails;
    private Professor selectedProfessorDetailsForHyperlinkNameInThesisAsStudent;
    private Company selectedCompanyDetailsForHyperlinkNameInThesisAsStudent;
    private CompanyThesis selectedCompanyThesisDetails;
    private CompanyInternship selectedCompanyInternshipDetails;
    private ProfessorInternship selectedProfessorInternshipDetails;

    private List<CompanyThesis> companyThesesResultsToFindThesesAsProfessor = new List<CompanyThesis>();
    private bool searchPerformedToFindThesesAsProfessor = false;

    private List<ProfessorThesis> professorThesesResultsToFindThesesAsCompany = new List<ProfessorThesis>();
    private bool searchPerformedToFindThesesAsCompany = false;

    private CompanyThesis selectedCompanyThesisToSeeDetailsOnEyeIconAsProfessor;

    private Company selectedCompanyToSeeDetailsOnExpandedInterestAsProfessor;

    private bool isThesisDetailEyeIconModalVisibleToSeeAsProfessor = false;

    private ProfessorThesis selectedProfessorThesisToSeeDetailsOnEyeIconAsCompany;
    private bool isThesisDetailEyeIconModalVisibleToSeeAsCompany = false;
    private bool isExpandedModalVisibleToSeeCompanyDetailsAsProfessor = false;

    private bool isCompanyDetailModalVisibleForHyperlinkNameToShowCompanyDetailsToTheProfessor = false;
    private Company selectedCompanyNameAsHyperlinkToShowDetailsToTheProfessor;

    // Search criteria
    private string searchCompanyNameToFindThesesAsProfessor;
    private string searchThesisTitleToFindThesesAsProfessor;
    private string searchSupervisorToFindThesesAsProfessor;
    private string searchDepartmentToFindThesesAsProfessor;
    private string searchSkillsToFindThesesAsProfessor;
    private DateTime? searchStartingDateToFindThesesAsProfessor;

    private string searchProfessorNameToFindThesesAsCompany;
    private string searchProfessorSurnameToFindThesesAsCompany;
    private string searchProfessorThesisTitleToFindThesesAsCompany;
    private string searchAreasToFindThesesAsCompany;
    private string searchSkillsToFindThesesAsCompany;
    private DateTime? searchStartingDateToFindThesesAsCompany;

    private Dictionary<long, bool> professorInterestStatus = new Dictionary<long, bool>();
    private List<ThesisWithInterestStatus> thesesWithInterestStatus;

    private List<ProfessorThesisWithInterestStatus> professorthesesWithInterestStatus;

    private Professor? selectedProfessor;
    private ProfessorThesis? selectedCompanyThesiss;

    private CompanyEvent companyEvent = new CompanyEvent();
    private ProfessorEvent professorEvent = new ProfessorEvent();

    private DotNetObjectReference<MainLayout> dotNetHelper;
    private List<string> suggestions = new List<string>();

    private string searchNameAsCompanyToFindStudent = string.Empty;
    private string searchSurnameAsCompanyToFindStudent = string.Empty;
    private string searchRegNumberAsCompanyToFindStudent = string.Empty;
    private string searchDepartmentAsCompanyToFindStudent = string.Empty;

    private string InternshipStatus = string.Empty;
    private string ThesisStatus = string.Empty;

    private List<Student> searchResultsAsCompanyToFindStudent;

    private List<CompanyEvent> companyEventsToSeeAsStudent;
    private List<ProfessorEvent> professorEventsToSeeAsStudent;
    private CompanyEvent selectedCompanyEventToSeeAsStudent;
    private bool isCompanyEventsVisibleToSeeAsStudent = false;
    private bool isProfessorEventsVisibleToSeeAsStudent = false;
    private bool isModalVisibleToSeeCompanyEventsAsStudent = false; 

    private Company? currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents;
    private Professor? currentProfessorDetailsToShowOnHyperlinkAsStudentForProfessorEvents;
    private Dictionary<long, bool> needsTransportForCompanyEvent = new Dictionary<long, bool>(); // Use a suitable type for the event ID
    private Dictionary<long, bool> needsTransportForProfessorEvent = new Dictionary<long, bool>(); // Use a suitable type for the event ID

    private Dictionary<long, string> selectedStartingPoint = new Dictionary<long, string>();
    private List<CompanyEvent> companyEvents = new List<CompanyEvent>();

    private List<ProfessorEvent> professorEvents = new List<ProfessorEvent>();


    private bool isProfessorDetailModalVisible = false;

    private string searchEmailAsProfessorToFindStudent = string.Empty;
    private string searchNameAsProfessorToFindStudent = string.Empty;
    private string searchSurnameAsProfessorToFindStudent = string.Empty;
    private string searchRegNumberAsProfessorToFindStudent = string.Empty;
    private string searchDepartmentAsProfessorToFindStudent = string.Empty;
    private string searchAreasOfExpertiseAsProfessorToFindStudent = string.Empty;
    private string searchKeywordsAsProfessorToFindStudent = string.Empty;


    private string searchCompanyEmailAsProfessorToFindCompany = string.Empty;
    private string searchCompanyNameENGAsProfessorToFindCompany = string.Empty;
    private string searchCompanyTypeAsProfessorToFindCompany = string.Empty;
    private string searchCompanyActivityrAsProfessorToFindCompany = string.Empty;
    private string searchCompanyTownAsProfessorToFindCompany = string.Empty;
    private string searchCompanyAreasAsProfessorToFindCompany = string.Empty;
    private string searchCompanyDesiredSkillsAsProfessorToFindCompany = string.Empty;

    private string searchCompanyEmailAsRGToFindCompany = string.Empty;
    private string searchCompanyNameENGAsRGToFindCompany = string.Empty;
    private string searchCompanyTypeAsRGToFindCompany = string.Empty;
    private string searchCompanyActivityrAsRGToFindCompany = string.Empty;
    private string searchCompanyTownAsRGToFindCompany = string.Empty;
    private string searchCompanyAreasAsRGToFindCompany = string.Empty;
    private string searchCompanyDesiredSkillsAsRGToFindCompany = string.Empty;

    private List<Student> searchResultsAsProfessorToFindStudent;
    private bool showStudentDetailsModal = false;

    private List<Company> searchResultsAsProfessorToFindCompany;
    private List<Company> searchResultsAsRGToFindCompany;
    private bool showCompanyDetailsModal = false;

    private bool isModalVisibleToShowCompanyDetailsAtProfessorThesisInterest = false;
    private bool isModalVisibleToShowprofessorDetailsAtCompanyThesisInterest  = false;
    private Company currentCompanyDetails = new Company();

    private bool isModalVisibleToShowStudentDetailsInNameAsHyperlinkForProfessorThesis = false;
    private Student currentStudentDetails = new Student();

    private bool showStudentDetailsModalWhenSearchForStudentsAsCompany = false;
    private Student selectedStudentWhenSearchForStudentsAsCompany;

    private string searchNameAsCompanyToFindProfessor;
    private string searchSurnameAsCompanyToFindProfessor;
    private string searchDepartmentAsCompanyToFindProfessor;
    private string searchAreasOfInterestAsCompanyToFindProfessor;
    private List<Professor> searchResultsAsCompanyToFindProfessor;

    private bool showProfessorDetailsModalWhenSearchForProfessorsAsCompany = false;
    private bool showProfessorDetailsModalWhenSearchForProfessorsAsRG = false;
    private Professor selectedProfessorWhenSearchForProfessorsAsCompany;
    private Professor selectedProfessorWhenSearchForProfessorsAsRG;

    private Professor currentProfessorDetails = new Professor();

    private string searchNameOrSurname = string.Empty; 
    private List<string> nameSurnameSuggestions = new List<string>();

    private string searchNameSurnameAsCompanyToFindProfessor { get; set; }
    private string searchNameSurnameAsStudentToFindProfessor { get; set; }
    private List<string> professorNameSurnameSuggestions { get; set; } = new();
    private List<string> thesisTitleSuggestions { get; set; } = new();
    private List<string> companyNameSuggestionsWhenSearchForProfessorThesisAutocompleteNameAsStudent { get; set; } = new();

    ////////////////////////////////////////////////////////////////////////////////////////
    private string searchNameSurnameAsRGToFindProfessor { get; set; }
    private List<string> professorNameSurnameSuggestionsAsRG { get; set; } = new();
    private string searchDepartmentAsRGToFindProfessor;
    private string searchAreasOfInterestAsRGToFindProfessor;
    private List<Professor> searchResultsAsRGToFindProfessor;
    ////////////////////////////////////////////////////////////////////////////////////////


    private string searchAreasOfExpertise = string.Empty;
    private string searchAreasOfInterest = string.Empty;
    private List<string> areasOfExpertiseSuggestions = new List<string>();
    private List<string> areasOfInterestSuggestions = new List<string>();
    private string searchKeywords = string.Empty;
    private List<string> keywordsSuggestions = new List<string>();

    private string searchAreasOfExpertiseAsRG = string.Empty;
    private string searchAreasOfInterestAsRG = string.Empty;
    private List<string> areasOfExpertiseSuggestionsAsRG = new List<string>();
    private List<string> areasOfInterestSuggestionsAsRG = new List<string>();
    private string searchKeywordsAsRG = string.Empty;
    private List<string> keywordsSuggestionsAsRG = new List<string>();

    private string? selectedDegreeLevel { get; set; }

    private DateTime currentMonth = DateTime.Today;
    private string[] daysOfWeek = { "Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat" };
    private int firstDayOfMonth => (int)new DateTime(currentMonth.Year, currentMonth.Month, 1).DayOfWeek;

    private List<ProfessorEvent> selectedProfessorDateEvents = new List<ProfessorEvent>();
    private List<CompanyEvent> selectedDateEvents = new List<CompanyEvent>();

    private bool isModalVisibleToShowEventsOnCalendarForEachClickedDay = false;
    private int daysInCurrentMonth => DateTime.DaysInMonth(currentMonth.Year, currentMonth.Month);
    private int totalCellsInGrid;
    private int remainingCells => totalCellsInGrid - (firstDayOfMonth + daysInCurrentMonth);
    private int remainingCellsValue; 
    private DateTime? selectedDate;

    private Dictionary<int, List<CompanyEvent>> eventsForDate = new Dictionary<int, List<CompanyEvent>>();
    private Dictionary<int, List<ProfessorEvent>> eventsForDateForProfessors = new Dictionary<int, List<ProfessorEvent>>();

    private int selectedDay = 0; // To store the selected day
    private int highlightedDay = 0; // To store the day that needs to be highlighted
    private int adjustedFirstDayOfMonth => (firstDayOfMonth == 0) ? 6 : firstDayOfMonth - 1; // Adjust Sunday (0) to Saturday (6) and Monday (1) to 0

    public List<CompanyEvent> CompanyEventsToShowAtFrontPage { get; set; }
    public List<ProfessorEvent> ProfessorEventsToShowAtFrontPage { get; set; }

    private List<InterestInCompanyEvent> InterestedStudents = new();
    private List<InterestInCompanyEventAsProfessor> InterestedProfessorsInCompanyEvent = new();
    private long? selectedEventIdForStudents;
    private long? selectedEventIdForProfessors;

    private List<InterestInProfessorEvent> InterestedStudentsForProfessorEvent = new();
    private long? selectedEventIdForStudentsWhenShowInterestForProfessorEvent;

    private bool showModal = false;
    private bool showProfessorModal = false;
    private bool showModalForStudentsAtProfessorEventInterest = false;
    private InterestInCompanyEvent selectedStudentToShowDetailsForInterestinCompanyEvent;
    private Professor selectedProfessorToShowDetailsForInterestinCompanyEvent;
    private InterestInProfessorEvent selectedStudentToShowDetailsForInterestinProfessorEvent;
    private IEnumerable<CompanyThesisApplied> companythesisapplicants;
    private bool isFormValidToSaveAnnouncementAsCompany = true;
    private bool showErrorMessageforUploadingAnnouncementAsCompany = false;
    private bool isFormValidToSaveEventAsCompany = true;
    private bool isFormValidToSaveEventAsProfessor = true;

    private List<string> selectedKeywords = new();
    private List<string> selectedAreasOfExpertise = new();
    private List<string> selectedAreasOfInterest = new();

    private List<string> selectedKeywordsAsRG = new();
    private List<string> selectedAreasOfExpertiseAsRG = new();
    private List<string> selectedAreasOfInterestAsRG = new();

    private bool showErrorMessageforPostalCode = false;

    private const long MaxFileSize = 10 * 1024 * 1024; //10MB FILE SIZE

    // Track current page and calculate the total number of pages
    private int currentPage = 1;
    private int totalPages => selectedDateEvents?.Count ?? 0;

    private CompanyEvent? eventToDisplay => selectedDateEvents?.ElementAtOrDefault(currentPage - 1);
    private ProfessorEvent? professoreventToDisplay => selectedProfessorDateEvents?.ElementAtOrDefault(currentPage - 1);

    private string selectedEventType = "all"; // Default to show all events
    private object selectedEvent = null;

    private string selectedEventFilter { get; set; } = "All";
    private List<CompanyEvent> filteredCompanyEvents => 
    selectedEventFilter == "All" || selectedEventFilter == "Company" 
        ? selectedDateEvents 
        : new List<CompanyEvent>();

    private List<ProfessorEvent> filteredProfessorEvents => 
    selectedEventFilter == "All" || selectedEventFilter == "Professor" 
        ? selectedProfessorDateEvents 
        : new List<ProfessorEvent>();

    // Get the event for the current page

    // Methods for pagination
    private void NextPage()
    {
        if (currentPage < totalPages)
            currentPage++;
    }

    private void PreviousPage()
    {
        if (currentPage > 1)
            currentPage--;
    }

    private DateTime _professorEventDate;
    private int existingEventsCountToCheckAsProfessor = 0;

    private bool isCompanyDetailsModalOpenForHyperlinkNameAsStudent = false;
    private bool isModalOpenForCompanyEventToSeeAsStudent = false;
    private bool isModalOpenForProfessorEventToSeeAsStudent = false;
    private bool isModalOpenForCompanyDetailsToSeeAsStudent = false;
    private bool isModalOpenForProfessorDetailsToSeeAsStudent = false;
    private bool isCompanyDetailsModal2Visible = false; 
    private bool isCompanyDetailsModal3Visible = false; 
    private bool isInternshipDetailsModalVisible = false;
    private bool isJobDetailsModal2Visible = false;
    private bool isCompanyDetailsModal4Visible = false;
    private bool iscompanyDetailsModalVisible = false;

    private List<InterestInCompanyEventAsProfessor> filteredProfessorInterestForCompanyEvents = new();
    private List<InterestInProfessorEventAsCompany> filteredCompanyInterestForProfessorEvents = new();
    private ProfessorInternship professorInternship = new ProfessorInternship();

    private bool isCompanyDetailsModalOpenForJobSearch = false;
    private bool isCompanyDetailsModalOpenForJobShow = false;
    private Company? selectedCompanyDetailsForJobSearch = null;
    private Company? selectedCompanyDetailsForJobShow = null;
    private bool isJobDetailsModalVisibleToSeeJobApplicationsAsStudent = false;

    private bool isModalOpenToSeeCompanyDetails_ThesisStudentApplicationsToShow = false;
    private Company selectedCompanyDetails_ThesisStudentApplicationsToShow = null;  
    private bool isModalOpenToSeeProfessorDetails_ThesisStudentApplicationsToShow = false;
    private bool isModalOpenToSeeProfessorDetails_InternshipStudentApplicationsToShow = false;
    private Professor selectedProfessorDetails_ThesisStudentApplicationsToShow = null;

    private bool isModalOpenToSeeCompanyThesisDetails_ThesisStudentApplicationsToShow = false;
    private CompanyThesis selectedCompanyThesisDetails_ThesisStudentApplicationsToShow = null;

    private bool isModalOpenToSeeProfessorThesisDetails_ThesisStudentApplicationsToShow = false;
    private ProfessorThesis selectedProfessorThesisDetails_ThesisStudentApplicationsToShow = null;

    private bool isProfessorDetailsModalVisible_StudentInternshipApplicationsShow = false;
    private Professor selectedProfessorDetails = null;
    private bool isInternshipDetailsModalVisible_StudentInternshipApplicationsShow = false;

    private bool showCompanyThesisApplications = true;
    private bool showProfessorThesisApplications = true;
    private bool isLoading = false;
    private string filterValue = "all";

    private List<CompanyThesisApplied> companyApplicationsToShowOnPagination_SeeMyThesisApplicationsAsStudent;
    private List<ProfessorThesisApplied> professorApplicationsToShowOnPagination_SeeMyThesisApplicationsAsStudent;
    private int itemsPerPageToShowOnPagination_SeeMyThesisApplicationsAsStudent;
    private int totalPagesToShowOnPagination_SeeMyThesisApplicationsAsStudent;
    private int currentPageToShowOnPagination_SeeMyThesisApplicationsAsStudent;
    private List<CompanyThesisApplied> currentCompanyApplicationsToShowOnPagination_SeeMyThesisApplicationsAsStudent;
    private List<ProfessorThesisApplied> currentProfessorApplicationsToShowOnPagination_SeeMyThesisApplicationsAsStudent;



    private bool showCompanyThesisApplicationsToSearchAsStudent = true;
    private bool showProfessorThesisApplicationsToSearchAsStudent = true;
    private string selectedThesisFilter = "all";
    private List<AllTheses> publishedTheses;
    private string dropdownState = "all";

    private bool showExpandedAreasInCompanyThesisEditModalAsCompany = false;
    private bool showExpandedSkillsInCompanyThesisEditModalAsCompany = false;
    private void ToggleAreasInEditCompanyThesisModalAsCompany() => showExpandedAreasInCompanyThesisEditModalAsCompany = !showExpandedAreasInCompanyThesisEditModalAsCompany;
    private void ToggleSkillsInEditCompanyThesisModalAsCompany() => showExpandedSkillsInCompanyThesisEditModalAsCompany = !showExpandedSkillsInCompanyThesisEditModalAsCompany; 
    private bool showExpandedAreasInCompanyInternshipEditModalAsCompany = false;
    private void ToggleAreasInEditCompanyInternshipModalAsCompany() => showExpandedAreasInCompanyInternshipEditModalAsCompany = !showExpandedAreasInCompanyInternshipEditModalAsCompany;
    private void ToggleAreasInEditCompanyEventModal() => showExpandedAreasInCompanyEventEditModal = !showExpandedAreasInCompanyEventEditModal;



    private List<Area> selectedThesisAreasForProfessor = new();
    private List<Skill> selectedThesisSkillsForProfessor = new();

    private CompanyThesis companythesis;
    private CompanyInternship companyinternshipp;
    private CompanyJob companyjobb;
    private ProfessorInternship professorinternship;

    private IEnumerable<CompanyThesisApplied> applicants;
    private IEnumerable<InternshipApplied> companyInternshipApplicants;
    private IEnumerable<CompanyJobApplied> companyJobApplicants;
    private IEnumerable<ProfessorInternshipApplied> professorInternshipApplicants;


    private bool showExpandedAreasInCompanyEventEditModal = false;

    private List<Area> SelectedAreasToEditForCompanyEvent = new List<Area>();

    private List<string> AvailableTowns = new List<string>();

    private Dictionary<long, IEnumerable<CompanyJobApplied>> jobApplicants = new Dictionary<long, IEnumerable<CompanyJobApplied>>();
    private Dictionary<long, IEnumerable<CompanyJobApplied>> jobApplicantsMap = new Dictionary<long, IEnumerable<CompanyJobApplied>>();
    private Dictionary<long, IEnumerable<InternshipApplied>> internshipApplicantsMap = new Dictionary<long, IEnumerable<InternshipApplied>>();
    private Dictionary<long, IEnumerable<ProfessorInternshipApplied>> professorInternshipApplicantsMap = new Dictionary<long, IEnumerable<ProfessorInternshipApplied>>();
    private Dictionary<long, IEnumerable<CompanyThesisApplied>> companyThesisApplicantsMap = new Dictionary<long, IEnumerable<CompanyThesisApplied>>();
    private Dictionary<long, IEnumerable<ProfessorThesisApplied>> professorThesisApplicantsMap = new Dictionary<long, IEnumerable<ProfessorThesisApplied>>();
    private Dictionary<long, IEnumerable<CompanyThesis>> companyThesesProfessorsMap = new Dictionary<long, IEnumerable<CompanyThesis>>();


    private List<string> jobTitleAutocompleteSuggestionsWhenSearchForCompanyJobsAsStudent { get; set; } = new();
    private List<string> companyNameAutocompleteSuggestionsWhenSearchForCompanyJobsAsStudent { get; set; } = new();
    private List<string> internshipTitleAutocompleteSuggestionsWhenSearchInternshipAsStudent { get; set; } = new();

    private int currentCompanyEventpageSize = 3;
    private int pageSize = 3;
    public List<AnnouncementAsProfessor> ProfessorAnnouncements { get; set; }
    public List<AnnouncementAsCompany> CompanyAnnouncements { get; set; }
    private int totalPagesForCompanyEvents => (int)Math.Ceiling((double)CompanyEventsToShowAtFrontPage.Where(a => a.CompanyEventStatus == "Δημοσιευμένη").Count() / currentCompanyEventpageSize);
    private int expandedCompanyEventId = -1;
    private string fetchError;
    private int expandedProfessorEventId = -1;
    private int expandedAnnouncementId = -1;
    private bool isHidden = false;
    private int expandedProfessorAnnouncementId = -1;
    private int totalPagesForProfessorAnnouncements => (int)Math.Ceiling((double)ProfessorAnnouncements.Where(a => a.ProfessorAnnouncementStatus == "Δημοσιευμένη").Count() / pageSize);
    private int currentPageForProfessorAnnouncements = 1;
    private int currentCompanyEventPage = 1;
    private int currentProfessorEventPage = 1;
    private int totalPagesForProfessorEvents => (int)Math.Ceiling((double)ProfessorEventsToShowAtFrontPage.Where(a => a.ProfessorEventStatus == "Δημοσιευμένη").Count() / currentProfessorEventpageSize);
    private int currentProfessorEventpageSize = 3;

    private int totalPagesForCompanyAnnouncements => (int)Math.Ceiling((double)CompanyAnnouncements.Where(a => a.CompanyAnnouncementStatus == "Δημοσιευμένη").Count() / pageSize);
    private int currentPageForCompanyAnnouncements = 1;

    private Professor selectedProfessorDetailsForHyperlinkNameInInternshipAsStudent;
    private Company selectedCompanyDetailsForHyperlinkNameInInternshipAsStudent;
    private bool isCompanyDetailsModalOpenForHyperlinkNameAsStudentForCompanyInternship;


    private List<NewsArticle> newsArticles;
    private List<NewsArticle> svseNewsArticles;
    public List<AnnouncementAsCompany> Announcements { get; set; }

    private bool showSuccessMessageWhenSaveInternshipAsCompany = false;

    private string searchAreasInputToFindThesesAsCompany = string.Empty;
    private List<string> areaSuggestionsToFindThesesAsCompany = new();
    private List<string> selectedAreasToFindThesesAsCompany = new();

    // For filtering
    private string filterValueForInternships = "all";
    private bool showCompanyInternshipApplications = true;
    private bool showProfessorInternshipApplications = true;

    // For pagination
    private int currentPageForInternshipsToSee = 1;
    private int pageSizeForInternshipsToSee = 3; // Adjust as needed
    private int totalInternshipCount = 0;
    private int totalPagesForInternshipsToSee = 1;

    private HashSet<long> interestedProfessorEventIds = new();
    private HashSet<long> alreadyInterestedCompanyEventIds = new();
    private HashSet<long> professorThesisIdsApplied = new();
    private HashSet<long> companyThesisIdsApplied = new();
    private HashSet<long> jobIdsApplied = new();
    private HashSet<long> internshipIdsApplied = new();
    private HashSet<long> professorInternshipIdsApplied = new();


    private int currentInternshipPage = 1;
    private int InternshipsPerPage = 3; // Set to show 3 internships per page
    private int totalInternshipPages => (int)Math.Ceiling((double)publishedInternships.Count / InternshipsPerPage);


    // STUDENT PAGINATION ON TABLE DROPDOWNS - ALL TABS
    private int[] pageSizeOptions_SeeMyThesisApplicationsAsStudent = new[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };
    private int[] pageSizeOptions_SearchForThesisAsStudent = new[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };
    private int[] pageSizeOptions_SeeMyJobApplicationsAsStudent = new[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };
    private int[] pageSizeOptions_SearchForJobsAsStudent = new[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };
    private int[] pageSizeOptions_SeeMyInternshipApplicationsAsStudent = new[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };
    private int[] pageSizeOptions_SearchForInternshipsAsStudent = new[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };
    private int[] pageSizeOptions_SearchForEventsAsStudent = new[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };

    // COMPANY PAGINATION ON TABLE DROPDOWNS - ALL TABS
    private int[] pageSizeOptions_SeeMyUploadedAnnouncementsAsCompany = new[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };
    private int[] pageSizeOptions_SeeMyUploadedJobsAsCompany = new[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };
    private int[] pageSizeOptions_SeeMyUploadedInternshipsAsCompany = new[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };
    private int[] pageSizeOptions_SeeMyUploadedThesesAsCompany = new[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };
    private int[] pageSizeOptions_SearchForProfessorThesesAsCompany = new[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };
    private int[] pageSizeOptions_SeeMyUploadedEventsAsCompany = new[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };
    private int[] pageSizeOptions_SearchForStudentsAsCompany = new[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };
    private int[] pageSizeOptions_SearchForProfessorsAsStudent = new[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };

    // SEARCH FOR PROFESSOR AS RG
    private int[] pageSizeOptions_SearchForProfessorsAsRG = new[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };

    // PROFESSOR PAGINATION ON TABLE DROPDOWNS - ALL TABS
    private int[] pageSizeOptions_SeeMyUploadedAnnouncementsAsProfessor = new[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };
    private int[] pageSizeOptions_SeeMyUploadedThesesAsProfessor = new[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };
    private int[] companyThesesPageSize_SearchForCompanyThesesAsProfessor = new[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };
    private int[] pageSizeOptions_SeeMyUploadedInternshipsAsProfessor = new[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };
    private int[] pageSizeOptions_SeeMyUploadedEventsAsProfessor = new[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };
    private int[] studentSearchPageSizeOptions = new[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };
    private int[] companySearchPageSizeOptions = new[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };


    private List<ProfessorInternshipApplied> _professorinternshipapplicants = new();
    private string uploadErrorMessage = string.Empty;
    private bool uploadSuccess = false;
    private ResearchGroup researchGroupData;

    private Student selectedStudentFromCache;

    private Dictionary<string, Student> studentDataCache = new Dictionary<string, Student>();
    private Dictionary<string, Company> companyDataCache = new Dictionary<string, Company>();
    private Dictionary<string, Professor> professorDataCache = new Dictionary<string, Professor>();
    private Dictionary<long, CompanyJob> jobDataCache = new Dictionary<long, CompanyJob>();
    private Dictionary<long, CompanyInternship> internshipDataCache = new Dictionary<long, CompanyInternship>();
    private Dictionary<long, ProfessorInternship> professorInternshipDataCache = new Dictionary<long, ProfessorInternship>();
    private Dictionary<long, CompanyThesis> thesisDataCache = new Dictionary<long, CompanyThesis>();
    private Dictionary<long, ProfessorThesis> professorThesisDataCache = new Dictionary<long, ProfessorThesis>();


    private bool hasExistingEventsOnSelectedDate = false;
    private int existingEventsCount = 0;

    private async Task CheckExistingEventsForDate()
    {
        if (companyEvent.CompanyEventActiveDate.Date > DateTime.Today.Date)
        {
            // Check for existing company events on this date
            var companyEventsCount = await dbContext.CompanyEvents
                .CountAsync(e => e.CompanyEventActiveDate.Date == companyEvent.CompanyEventActiveDate.Date && 
                                e.CompanyEventStatus == "Δημοσιευμένη");

            // Check for existing professor events on this date
            var professorEventsCount = await dbContext.ProfessorEvents
                .CountAsync(e => e.ProfessorEventActiveDate.Date == companyEvent.CompanyEventActiveDate.Date && 
                                e.ProfessorEventStatus == "Δημοσιευμένη");

            existingEventsCount = companyEventsCount + professorEventsCount;
            hasExistingEventsOnSelectedDate = existingEventsCount > 0;
        }
        else
        {
            hasExistingEventsOnSelectedDate = false;
        }

        StateHasChanged();
    }

    private async Task HandleDateChange(ChangeEventArgs e)
    {
        if (DateTime.TryParse(e.Value?.ToString(), out DateTime newDate))
        {
            companyEvent.CompanyEventActiveDate = newDate;
            await CheckExistingEventsForDate();
        }
    }


    private AnnouncementAsCompany? selectedCompanyAnnouncementToSeeDetailsAsCompany;
    private void OpenCompanyAnnouncementDetailsModal(AnnouncementAsCompany currentAnnouncement)
    {
        selectedCompanyAnnouncementToSeeDetailsAsCompany = currentAnnouncement;
    }

    private void CloseCompanyAnnouncementDetailsModal()
    {
        selectedCompanyAnnouncementToSeeDetailsAsCompany = null;
    }

    private List<string> DegreeLevel = new List<string>
    {
        "Προπτυχιακός Φοιτητής",
        "Μεταπτυχιακός Φοιτητής",
        "Υποψήφιος Διδάκτορας",
    };





    private List<string> ForeasType = new List<string>
    {
        "Ιδιωτικός Φορέας",
        "Δημόσιος Φορέας",
        "Μ.Κ.Ο.",
        "Άλλο"
    };

    private List<string> Regions = new List<string>
    {
        "Ανατολική Μακεδονία και Θράκη",
        "Κεντρική Μακεδονία",
        "Δυτική Μακεδονία",
        "Ήπειρος",
        "Θεσσαλία",
        "Ιόνια Νησιά",
        "Δυτική Ελλάδα",
        "Κεντρική Ελλάδα",
        "Αττική",
        "Πελοπόννησος",
        "Βόρειο Αιγαίο",
        "Νότιο Αιγαίο",
        "Κρήτη"
    };
    private Dictionary<string, List<string>> RegionToTownsMap = new Dictionary<string, List<string>>
    {
        {"Ανατολική Μακεδονία και Θράκη", new List<string> {"Κομοτηνή", "Αλεξανδρούπολη", "Καβάλα", "Ξάνθη", "Δράμα", "Ορεστιάδα", "Διδυμότειχο", "Ίασμος", "Νέα Βύσσα", "Φέρες"}},
        {"Κεντρική Μακεδονία", new List<string> {"Θεσσαλονίκη", "Κατερίνη", "Σέρρες", "Κιλκίς", "Πολύγυρος", "Ναούσα", "Έδεσσα", "Γιαννιτσά", "Καβάλα", "Άμφισσα"}},
        {"Δυτική Μακεδονία", new List<string> {"Κοζάνη", "Φλώρινα", "Καστοριά", "Γρεβενά"}},
        {"Ήπειρος", new List<string> {"Ιωάννινα", "Άρτα", "Πρέβεζα", "Ηγουμενίτσα"}},
        {"Θεσσαλία", new List<string> {"Λάρισα", "Βόλος", "Τρίκαλα", "Καρδίτσα"}},
        {"Ιόνια Νησιά", new List<string> {"Κέρκυρα", "Λευκάδα", "Κεφαλονιά", "Ζάκυνθος", "Ιθάκη", "Παξοί", "Κυθήρα"}},
        {"Δυτική Ελλάδα", new List<string> {"Πάτρα", "Μεσολόγγι", "Αμφιλοχία", "Πύργος", "Αιγίο", "Ναύπακτος"}},
        {"Κεντρική Ελλάδα", new List<string> {"Λαμία", "Χαλκίδα", "Λιβαδειά", "Θήβα", "Αλιάρτος", "Αμφίκλεια"}},
        {"Αττική", new List<string> {"Αθήνα", "Πειραιάς", "Κηφισιά", "Παλλήνη", "Αγία Παρασκευή", "Χαλάνδρι", "Καλλιθέα", "Γλυφάδα", "Περιστέρι", "Αιγάλεω"}},
        {"Πελοπόννησος", new List<string> {"Πάτρα", "Τρίπολη", "Καλαμάτα", "Κορίνθος", "Άργος", "Ναύπλιο", "Σπάρτη", "Κυπαρισσία", "Πύργος", "Μεσσήνη"}},
        {"Βόρειο Αιγαίο", new List<string> {"Μυτιλήνη", "Χίος", "Λήμνος", "Σάμος", "Ίκαρος", "Λέσβος", "Θάσος", "Σκύρος", "Ψαρά"}},
        {"Νότιο Αιγαίο", new List<string> {"Ρόδος", "Κως", "Κρήτη", "Κάρπαθος", "Σαντορίνη", "Μύκονος", "Νάξος", "Πάρος", "Σύρος", "Άνδρος"}},
        {"Κρήτη", new List<string> {"Ηράκλειο", "Χανιά", "Ρέθυμνο", "Αγία Νικόλαος", "Ιεράπετρα", "Σητεία", "Κίσαμος", "Παλαιόχωρα", "Αρχάνες", "Ανώγεια"}},
    };

    protected override async Task OnInitializedAsync()
    {
        LoadAnalytics();
        await LoadAllStudentData();
        await LoadCompanyJobData();
        //await LoadCompanyJobApplicantData();
        await ShowMyJobApplicationsAsStudent();

        await LoadStudentsWithAuth0DetailsAsync();
        await LoadStudentsAsync();
        await LoadInternships();
        await LoadProfessorInternships();
        await LoadJobs();
        await LoadThesesAsCompany();
        await LoadThesesAsProfessor();
        await LoadAreasAsync();
        await LoadSkillsAsync();
        await LoadProfessors();
        await LoadCompanies();
        await LoadUploadedAnnouncementsAsync();
        await LoadUploadedAnnouncementsAsProfessorAsync();
        await LoadUploadedThesesAsProfessorAsync();
        await CalculateStatusCountsForInternships();
        await CalculateStatusCountsForJobs();
        await CalculateStatusCountsForAnnouncements();
        await CalculateStatusCountsForAnnouncementsAsProfessor();
        await CalculateStatusCountsForThesesAsProfessor();
        await CalculateStatusCountsForCompanyTheses();
        await LoadToSeeUploadedCompanyThesesAsProfessorAsync();
        await LoadUploadedEventsAsync();
        await LoadUploadedEventsAsyncAsProfessor();
        await LoadThesisData();
        FilterAnnouncements();
        FilterAnnouncementsAsProfessor();
        FilterThesesAsProfessor();
        FilterProfessorInternships();
        //FilterThesesAsCompany();
        FilterCompanyEvents();
        FilterProfessorEvents();
        await LoadProfessorInterestsForCompanyEvents();
        professorthesisApplications = new List<ProfessorThesisApplied>();
        companythesisApplications = new List<CompanyThesisApplied>();
        UploadedCompanyTheses = await GetCompanyThesesAsync(); 
        companyThesesResultsToFindThesesAsProfessor = await dbContext.CompanyTheses.ToListAsync();
        //await SearchThesisApplicationsAsStudent();

        // Populate available schools and departments
        AvailableSchools = StudentsWithAuth0Details.Select(s => s.School).Distinct().ToList();
        AvailableDepartments = StudentsWithAuth0Details.Select(s => s.Department).Distinct().ToList();

        var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
        var user = authState.User;
        UserRole = user.FindFirst(ClaimTypes.Role)?.Value; // Get user's role
        var userEmail = user.FindFirst("name")?.Value; // Assuming "name" claim contains the user's email
        var userSignUpDate = user.FindFirst("created_at")?.Value;
        var userLatestLoginDate = user.FindFirst("last_login")?.Value;
        Console.WriteLine($"Sign Up Date: {userSignUpDate}");
        Console.WriteLine($"Latest Login Date: {userLatestLoginDate}");



        jobs = await dbContext.CompanyJobs
            .Include(j => j.Company)  // Just add this line
            .ToListAsync(); 

        totalStudentsCount = await dbContext.Students.CountAsync();

        await LoadSkillDistributionAsync();
        await LoadDepartmentDistributionAsync();

        companyInternship.CompanyInternshipActivePeriod = DateTime.Now;
        companyInternship.CompanyInternshipFinishEstimation = DateTime.Now;
        companyInternship.CompanyInternshipUploadDate = DateTime.Now;
        announcement.CompanyAnnouncementUploadDate = DateTime.Now;
        companyInternship.CompanyUploadedInternshipStatus = "Μη Δημοσιευμένη";

        newsArticles = await FetchNewsArticlesAsync();
        svseNewsArticles = await FetchSVSENewsArticlesAsync();
        Announcements = await FetchAnnouncementsAsync();
        ProfessorAnnouncements = await FetchProfessorAnnouncementsAsync();
        CompanyAnnouncements = await FetchCompanyAnnouncementsAsync();

        CompanyEventsToShowAtFrontPage = await FetchCompanyEventsAsync();
        ProfessorEventsToShowAtFrontPage = await FetchProfessorEventsAsync();


        thesisStartDateForThesesAsStudent  = DateTime.Now;
        companyEvent.CompanyEventActiveDate = DateTime.Now;

        job.PositionActivePeriod  = DateTime.Now;
        job.PositionStatus = "Μη Δημοσιευμένη";


        announcement.CompanyAnnouncementTimeToBeActive = DateTime.Now;
        professorannouncement.ProfessorAnnouncementTimeToBeActive = DateTime.Now;
        thesis.CompanyThesisStartingDate = DateTime.Now;

        availableAreasForProfessorThesis = await dbContext.Areas.ToListAsync();
        availableSkillsForProfessorThesis = await dbContext.Skills.ToListAsync();
        professorthesis.ThesisActivePeriod = DateTime.Now;

        searchStartingDateToFindThesesAsProfessor  = DateTime.Now;


        // Ensure you're observing the entire state to understand if something is affecting the rendering
        Console.WriteLine("Interest Status Dictionary: " + string.Join(", ", professorInterestStatus.Select(kv => $"{kv.Key}: {kv.Value}")));

        //dotNetHelper = DotNetObjectReference.Create(this);

        CompanyEventsToShowAtFrontPage = await FetchCompanyEventsAsync();
        ProfessorEventsToShowAtFrontPage = await FetchProfessorEventsAsync();

        LoadEventsForCalendar();
        CalculateRemainingCells();



        if (user.Identity.IsAuthenticated)
        {
            var roleClaim = user.FindFirst("http://schemas.microsoft.com/ws/2008/06/identity/claims/role");
            if (roleClaim != null)
            {
                companyName = user.Identity?.Name ?? "Anonymous User";
                var userRole = roleClaim.Value;
                hasReadAsCompanyPermission = userRole == "Company";
            }
        }

        // Check if the user has the Student role
        if (user.IsInRole("Student"))
        {
            ShowStudentRegistrationButton = true;
        }
        // Check if the user has the Company role
        if (user.IsInRole("Company"))
        {
            ShowCompanyRegistrationButton = true;
        }
        // Check if the user has the Professor role
        if (user.IsInRole("Professor"))
        {
            ShowProfessorRegistrationButton = true;
        }
        if (user.IsInRole("Admin"))
        {
            ShowAdminRegistrationButton = true;
        }

        if (user.IsInRole("ResearchGroup"))
        {
            ShowAdminRegistrationButton = true;
        }

        if (!string.IsNullOrEmpty(userEmail))
        {
            CurrentUserEmail = userEmail; // Assign userEmail to CurrentUserEmail

            // Check if student is registered based on email
            using (var dbContext = new AppDbContext(Configuration)) // Ensure Configuration is injected or accessed correctly
            {
                isStudentRegistered = await dbContext.Students.AnyAsync(s => s.Email == CurrentUserEmail);
            }
            isInitializedAsStudentUser = true;
            // Check if company is registered based on email
            using (var dbContext = new AppDbContext(Configuration)) // Ensure Configuration is injected or accessed correctly
            {
                isCompanyRegistered = await dbContext.Companies.AnyAsync(s => s.CompanyEmail == CurrentUserEmail);

                // Fetch company data
                companyData = await dbContext.Companies
                    .FirstOrDefaultAsync(c => c.CompanyEmail == CurrentUserEmail);

                if (companyData == null)
                {
                    Console.WriteLine($"Company with email {CurrentUserEmail} not found.");
                }
            }
            isInitializedAsCompanyUser = true;
            // Check if professor is registered based on email
            using (var dbContext = new AppDbContext(Configuration)) // Ensure Configuration is injected or accessed correctly
            {
                isProfessorRegistered = await dbContext.Professors.AnyAsync(s => s.ProfEmail == CurrentUserEmail);
            }
            isInitializedAsProfessorUser = true;
            // Load user data
            using (var dbContext = new AppDbContext(Configuration))
            {
                userData = await dbContext.Students.FirstOrDefaultAsync(s => s.Email == userEmail);

                if (userData == null)
                {
                    Console.WriteLine($"User with email {userEmail} not found.");
                }
                else
                {
                    //interest in professor events as student
                    interestedProfessorEventIds = (await dbContext.InterestInProfessorEvents
                        .Where(e => e.StudentUniqueIDShowInterestForEvent == userData.Student_UniqueID && 
                                    e.StudentEmailShowInterestForEvent == userData.Email)
                        .Select(e => e.RNGForProfessorEventInterest)
                        .ToListAsync())
                        .ToHashSet();

                    //interest in company events as student
                    alreadyInterestedCompanyEventIds = (await dbContext.InterestInCompanyEvents
                        .Where(e => e.StudentUniqueIDShowInterestForEvent == userData.Student_UniqueID && 
                                    e.StudentEmailShowInterestForEvent == userData.Email)
                        .Select(e => e.RNGForCompanyEventInterest)
                        .ToListAsync())
                        .ToHashSet();

                    // Get applied professor theses
                    professorThesisIdsApplied = dbContext.ProfessorThesesApplied
                        .Where(x => x.StudentUniqueIDAppliedForProfessorThesis == userData.Student_UniqueID && 
                                    x.StudentEmailAppliedForProfessorThesis == userData.Email)
                        .Select(x => x.RNGForProfessorThesisApplied)
                        .ToHashSet();

                    // Get applied company theses
                    companyThesisIdsApplied =  dbContext.CompanyThesesApplied
                        .Where(x => x.StudentUniqueIDAppliedForThesis == userData.Student_UniqueID && 
                                    x.StudentEmailAppliedForThesis == userData.Email)
                        .Select(x => x.RNGForCompanyThesisApplied)
                        .ToHashSet();

                    // Get applied company applied jobs
                    jobIdsApplied = dbContext.CompanyJobsApplied
                        .Where(x => x.StudentUniqueIDAppliedForCompanyJob == userData.Student_UniqueID && 
                                    x.StudentEmailAppliedForCompanyJob == userData.Email)
                        .Select(x => x.RNGForCompanyJobApplied)
                        .ToHashSet();

                    // Get applied company internships
                    var companyApplied = dbContext.InternshipsApplied
                        .Include(x => x.StudentDetails)
                        .Where(x => x.StudentDetails.StudentUniqueIDAppliedForInternship == userData.Student_UniqueID)
                        .Select(x => x.RNGForInternshipApplied)
                        .ToHashSet();

                    // Get applied professor internships 
                    var professorApplied = dbContext.ProfessorInternshipsApplied
                        .Include(x => x.StudentDetails)
                        .Where(x => x.StudentDetails.StudentUniqueIDAppliedForProfessorInternship == userData.Student_UniqueID)
                        .Select(x => x.RNGForProfessorInternshipApplied)
                        .ToHashSet();

                    // Combine both sets
                    internshipIdsApplied = companyApplied;
                    professorInternshipIdsApplied = professorApplied;
                }
            }
            // Check if ResearchGroup is registered based on email
            using (var dbContext = new AppDbContext(Configuration)) // Ensure Configuration is injected or accessed correctly
            {
                isResearchGroupRegistered = await dbContext.ResearchGroups.AnyAsync(s => s.ResearchGroupEmail == CurrentUserEmail);

                // Fetch company data
                researchGroupData = await dbContext.ResearchGroups
                    .FirstOrDefaultAsync(c => c.ResearchGroupEmail == CurrentUserEmail);

                if (researchGroupData == null)
                {
                    Console.WriteLine($"ResearchGroup with email {CurrentUserEmail} not found.");
                }
            }
            isInitializedAsResearchGroupUser = true;

        }

        if (!string.IsNullOrEmpty(userEmail))
        {
            // First get the company details from the Company table
            var company = await dbContext.Companies
                .FirstOrDefaultAsync(c => c.CompanyEmail == userEmail);

            if (company != null)
            {
                companyName = company.CompanyName; // Get name from Company model

                // Now get all jobs for this company
                jobs = await dbContext.CompanyJobs
                    .Where(job => job.EmailUsedToUploadJobs == userEmail)
                    .Include(job => job.Company) // Optional: include company details if needed
                    .ToListAsync();
            }
        }



        var professor = await dbContext.Professors.FirstOrDefaultAsync(c => c.ProfEmail == userEmail);
        if (professor != null)
        {
            professorName = professor.ProfName;
            professorSurname = professor.ProfSurname;
            professorDepartment = professor.ProfDepartment;
            professorImage = professor.ProfImage;
            professorUniversity = professor.ProfUniversity;
            professorVathmidaDEP = professor.ProfVahmidaDEP;
            professorPersonalTelephone = professor.ProfPersonalTelephone;
            professorWorkTelephone = professor.ProfWorkTelephone;
            professorLinkedInProfile = professor.ProfLinkedInSite;
            professorPersonalWebsite = professor.ProfPersonalWebsite;
            professorScholarProfile = professor.ProfScholarProfile;
            professorOrchidProfile = professor.ProfOrchidProfile;
            professorGeneralFieldOfWork = professor.ProfGeneralFieldOfWork;
            professorGeneralSkills = professor.ProfGeneralSkills;
            professorPersonalDescription = professor.ProfPersonalDescription;


        }

        foreach (var companyEvent in companyEvents)
        {
            if (!selectedStartingPoint.ContainsKey(companyEvent.RNGForEventUploadedAsCompany))
            {
                // Initialize the value to null or a default starting point
                selectedStartingPoint[companyEvent.RNGForEventUploadedAsCompany] = null;
            }
        }

        companyEvents = await dbContext.CompanyEvents.ToListAsync();
        foreach (var companyEvent in companyEvents)
        {
            if (!selectedStartingPoint.ContainsKey(companyEvent.RNGForEventUploadedAsCompany))
            {
                selectedStartingPoint[companyEvent.RNGForEventUploadedAsCompany] = null;
            }
        }

        companythesis = await GetCompanyThesisAsync();
        companyinternshipp = await GetCompanyInternshipsAsync();
        companyjobb = await GetCompanyJobsAsync();

        job.PositionContactPerson = companyData?.CompanyHREmail;
        job.PositionAddressLocation = companyData?.CompanyLocation;
        job.PositionContactTelephonePerson = companyData?.CompanyHRTelephone;
        job.PositionPerifereiaLocation = companyData?.CompanyRegions;
        job.PositionDimosLocation = companyData?.CompanyTown;
        job.PositionPostalCodeLocation = companyData?.CompanyPC.ToString();


        companyInternship.CompanyInternshipContactPerson = companyData?.CompanyHREmail;
        companyInternship.CompanyInternshipAddress = companyData?.CompanyLocation;
        companyInternship.CompanyInternshipContactTelephonePerson = companyData?.CompanyHRTelephone;
        companyInternship.CompanyInternshipPerifereiaLocation = companyData?.CompanyRegions;
        companyInternship.CompanyInternshipDimosLocation = companyData?.CompanyTown;
        companyInternship.CompanyInternshipPostalCodeLocation = companyData?.CompanyPC.ToString();


        professorEvents = await dbContext.ProfessorEvents.ToListAsync();
        // Before assigning values, ensure Professor exists
        if (professorEvent.Professor == null)
        {
            professorEvent.Professor = new Professor();
        }

        // Now you can safely assign
        professorEvent.Professor.ProfUniversity = professorUniversity;
        professorEvent.ProfessorEventUniversityDepartment = professorDepartment;
        ProfessorEventDate = DateTime.Today;

        companyLogo = companyData?.CompanyLogo;
        companyTelephone = companyData?.CompanyTelephone;
        companyWebsite = companyData?.CompanyWebsite;
        companyAreas = companyData?.CompanyAreas;
        companyDescription = companyData?.CompanyDescription;
        companyShortName = companyData?.CompanyShortName;
        companyType = companyData?.CompanyType;
        companyActivity = companyData?.CompanyActivity;
        companyCountry = companyData?.CompanyCountry;
        companyLocation = companyData?.CompanyLocation;
        companyPermanentPC = companyData?.CompanyPC;
        companyRegions = companyData?.CompanyRegions;
        companyTown = companyData?.CompanyTown;
        companyHRName = companyData?.CompanyHRName;
        companyHRSurname = companyData?.CompanyHRSurname;
        companyHREmail = companyData?.CompanyHREmail;
        companyHRTelephone = companyData?.CompanyHRTelephone;
        companyAdminName = companyData?.CompanyAdminName;
        companyAdminSurname = companyData?.CompanyAdminSurname;
        companyAdminEmail = companyData?.CompanyAdminEmail;
        companyAdminTelephone = companyData?.CompanyAdminTelephone;
        numberOfCompanyPeopleInputWhenCompanyShowsInterestInProfessorEvent[professorEvent.RNGForEventUploadedAsProfessor] = 1; 

        professorInternship.ProfessorInternshipActivePeriod = DateTime.Today;
        professorInternship.ProfessorInternshipUploadDate = DateTime.Today;
        professorInternship.ProfessorInternshipFinishEstimation = DateTime.Today;
        professorInternship.ProfessorInternshipContactPerson = professorName +" "+ professorSurname;
        professorInternship.ProfessorInternshipContactTelephonePerson = professorPersonalTelephone;
        professorInternship.ProfessorEmailUsedToUploadInternship = userEmail;

        var companyjob = await dbContext.CompanyJobs.FirstOrDefaultAsync(c => c.Id == job.Id);
        SelectedAreasToEditForCompanyJob = companyjob?.PositionAreas?
            .Split(',')
            .Select(area => new Area { AreaName = area })
            .ToList() ?? new List<Area>();

        searchStartingDateToFindThesesAsCompany = DateTime.Today;


        if (companythesis != null)
        {
            applicants = await GetApplicantsForCompanyThesis(companythesis.RNGForThesisUploadedAsCompany);
        }
        else
        {
            // Handle the case where companythesis is null (maybe show a message or log an error)
            applicants = Enumerable.Empty<CompanyThesisApplied>(); // Or handle differently
        }

        if (companyinternshipp != null)
        {
            companyInternshipApplicants = await GetApplicants(companyinternshipp.RNGForInternshipUploadedAsCompany);
        }
        else
        {
            // Handle the case where companyinternshipp is null
            companyInternshipApplicants = Enumerable.Empty<InternshipApplied>();

        }

        if (companyjobb != null)
        {
            // Only call GetApplicantsForJobs if companyjobb is not null
            companyJobApplicants = await GetApplicantsForJobs(companyjobb.RNGForPositionUploaded);
        }
        else
        {
            // Handle the case where companyjobb is null (maybe show a message or log an error)
            companyJobApplicants = Enumerable.Empty<CompanyJobApplied>(); // Or handle differently
        }

        if (professorinternship != null)
        {
            // Only call GetApplicantsForJobs if professorinternship is not null
            professorInternshipApplicants = await GetProfessorInternshipApplicants(professorinternship.RNGForInternshipUploadedAsProfessor);
        }
        else
        {
            professorInternshipApplicants = Enumerable.Empty<ProfessorInternshipApplied>(); // Or handle differently
        }

    }

    private async Task<CompanyThesis> GetCompanyThesisAsync()
    {
        // Replace this with your actual logic to fetch the company thesis
        // Ensure this does not return null unless expected
        return await dbContext.CompanyTheses.FirstOrDefaultAsync(); // Example fetch
    }

    private async Task<CompanyInternship> GetCompanyInternshipsAsync()
    {
        // Replace this with your actual logic to fetch the company intern
        // Ensure this does not return null unless expected
        return await dbContext.CompanyInternships.FirstOrDefaultAsync(); // Example fetch
    }

    private async Task<CompanyJob> GetCompanyJobsAsync()
    {
        // Replace this with your actual logic to fetch the company intern
        // Ensure this does not return null unless expected
        return await dbContext.CompanyJobs.FirstOrDefaultAsync(); // Example fetch
        currentJobPage = 1;
    }

    private async Task<List<CompanyThesis>> GetCompanyThesesAsync()
    {
        return await dbContext.CompanyTheses.ToListAsync(); 
    }


    private async Task LoadAreasAsync()
    {
        Areas = await dbContext.Areas.ToListAsync();
    }

    private async Task LoadSkillsAsync()
    {
        Skills = await dbContext.Skills.ToListAsync();
    }



    private void NavigateToSearchJobs()
    {
        NavigationManager.NavigateTo("/searchjobs");
    }

    private void NavigateToSearchThesis()
    {
        NavigationManager.NavigateTo("/searchthesis");
    }


    private bool HideAllInitialCards()
    {
        var uri = NavigationManager.Uri;
        return uri.Contains("profile")
        || uri.Contains("settings")
        || uri.Contains("uploadjobs")
        || uri.Contains("searchjobs")
        || uri.Contains("companyRegistration")
        || uri.Contains("studentRegistration")
        || uri.Contains("uploadJobs")
        || uri.Contains("professorRegistration")
        || uri.Contains("uploadthesis")
        || uri.Contains("searchthesis")
        || uri.Contains("uploadinternship")
        || uri.Contains("researchGroupRegistration");

        //ALLAKSA AYTO GIA TO MAIN LAYOUT NA FIGOUN TA CARDS KAI EPISIS STO APP.RAZOR EVALA 3 FUNCTIONS GIA NA KANEI REDIRECT STO REGISTRAITON ANALOGA TO USER ROLE
        //AYTO PREPEI NA GINETAI MIA FORA STO PRWTO RENDER ALLIWS AN PATAW PANW STO X-TREND NA DEIXNEI TOUS CRAWLERS APO TO LANDING PAGE MAZI ME AYTA POU EIPE O DIONYSIS.
        //EPISIS NA GINEI TO UPDATE GIA TA STOIXEIA TOU USER STIN IDIA FORMA OPWS AKRIVWS GINETAI KAI META EDIT POSITIONS KAI EDIT THESIS
    }


    private async Task ShowMyThesisApplicationsAsStudent()
    {
        try
        {
            var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
            var user = authState.User;

            if (user.Identity.IsAuthenticated)
            {
                var userEmail = user.FindFirst("name")?.Value;
                if (string.IsNullOrEmpty(userEmail))
                {
                    Console.WriteLine("User email is null or empty.");
                    return;
                }

                if (userData == null)
                {
                    Console.WriteLine("userData is null.");
                    return;
                }

                if (string.IsNullOrEmpty(userData.Student_UniqueID))
                {
                    Console.WriteLine("userData.Student_UniqueID is not set.");
                    return;
                }

                showThesisApplications = true;

                // Retrieve thesis applications with includes and proper filtering
                thesisApplications = await dbContext.ProfessorThesesApplied
                    .Include(a => a.StudentDetails)
                    .Include(a => a.ProfessorDetails)
                    .Where(j => j.StudentEmailAppliedForProfessorThesis == userEmail && 
                               j.StudentUniqueIDAppliedForProfessorThesis == userData.Student_UniqueID)
                    .OrderByDescending(j => j.DateTimeStudentAppliedForProfessorThesis)
                    .ToListAsync();

                StateHasChanged();
            }
            else
            {
                Console.WriteLine("User is not authenticated.");
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"An error occurred: {ex.Message}");
        }
    }

    private async Task ShowMyJobApplicationsAsStudent()
    {
        try
        {
            var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
            var user = authState.User;

            if (user.Identity.IsAuthenticated)
            {
                var userEmail = user.FindFirst("name")?.Value;
                if (!string.IsNullOrEmpty(userEmail))
                {
                    showJobApplications = true;

                    // Load applications with ALL related data
                    jobApplications = await dbContext.CompanyJobsApplied
                        .Where(j => j.StudentEmailAppliedForCompanyJob == userEmail)
                        .Include(a => a.StudentDetails)
                        .Include(a => a.CompanyDetails)
                        .ToListAsync();

                    // Load ALL related jobs WITH COMPANY DATA in one query
                    var jobIds = jobApplications.Select(a => a.RNGForCompanyJobApplied).Distinct().ToList();
                    var jobs = await dbContext.CompanyJobs
                        .Where(j => jobIds.Contains(j.RNGForPositionUploaded))
                        .Include(j => j.Company)  // Add this line to include Company data
                        .AsNoTracking()
                        .ToListAsync();

                    // Update cache
                    jobDataCache = jobs.ToDictionary(j => j.RNGForPositionUploaded, j => j);

                    StateHasChanged();
                }
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading applications: {ex.Message}");
            await JS.InvokeVoidAsync("alert", "Σφάλμα φόρτωσης αιτήσεων");
        }
    }



    private async Task DeleteProfessorThesisApplicationMadeAsStudent(long rngForThesisApplied)
    {
        try
        {
            // Find application by the RNG value
            var applicationToDelete = await dbContext.ProfessorThesesApplied
                .FirstOrDefaultAsync(app => app.RNGForProfessorThesisApplied == rngForThesisApplied);

            if (applicationToDelete != null)
            {
                // First delete related details if they exist
                var studentDetails = await dbContext.ProfessorThesisApplied_StudentDetails
                    .FirstOrDefaultAsync(s => s.StudentUniqueIDAppliedForProfessorThesis == applicationToDelete.StudentUniqueIDAppliedForProfessorThesis 
                                          && s.StudentEmailAppliedForProfessorThesis == applicationToDelete.StudentEmailAppliedForProfessorThesis);

                var professorDetails = await dbContext.ProfessorThesisApplied_ProfessorDetails
                    .FirstOrDefaultAsync(p => p.ProfessorUniqueIDWhereStudentAppliedForProfessorThesis == applicationToDelete.ProfessorUniqueIDWhereStudentAppliedForProfessorThesis
                                           && p.ProfessorEmailWhereStudentAppliedForProfessorThesis == applicationToDelete.ProfessorEmailWhereStudentAppliedForProfessorThesis);

                if (studentDetails != null)
                    dbContext.ProfessorThesisApplied_StudentDetails.Remove(studentDetails);

                if (professorDetails != null)
                    dbContext.ProfessorThesisApplied_ProfessorDetails.Remove(professorDetails);

                // Then delete the main application
                dbContext.ProfessorThesesApplied.Remove(applicationToDelete);
                await dbContext.SaveChangesAsync();

                // Update local list by RNG value
                professorthesisApplications.RemoveAll(t => t.RNGForProfessorThesisApplied == rngForThesisApplied);
            }
            else
            {
                Console.WriteLine($"No professor thesis application found with RNG: {rngForThesisApplied}");
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error deleting Professor Thesis Application: {ex.Message}");
        }
        finally
        {
            StateHasChanged();
        }
    }



    private async Task DeleteCompanyThesisApplication(long rngForThesisApplied)
    {
        try
        {
            // Find application by the RNG value
            var applicationToDelete = await dbContext.CompanyThesesApplied
                .FirstOrDefaultAsync(app => app.RNGForCompanyThesisApplied == rngForThesisApplied);

            if (applicationToDelete != null)
            {
                // First delete related details if they exist
                var studentDetails = await dbContext.CompanyThesisApplied_StudentDetails
                    .FirstOrDefaultAsync(s => s.StudentUniqueIDAppliedForThesis == applicationToDelete.StudentUniqueIDAppliedForThesis 
                                          && s.StudentEmailAppliedForThesis == applicationToDelete.StudentEmailAppliedForThesis);

                var companyDetails = await dbContext.CompanyThesisApplied_CompanyDetails
                    .FirstOrDefaultAsync(c => c.CompanyUniqueIDWhereStudentAppliedForThesis == applicationToDelete.CompanyUniqueIDWhereStudentAppliedForThesis
                                           && c.CompanyEmailWhereStudentAppliedForThesis == applicationToDelete.CompanyEmailWhereStudentAppliedForThesis);

                if (studentDetails != null)
                    dbContext.CompanyThesisApplied_StudentDetails.Remove(studentDetails);

                if (companyDetails != null)
                    dbContext.CompanyThesisApplied_CompanyDetails.Remove(companyDetails);

                // Then delete the main application
                dbContext.CompanyThesesApplied.Remove(applicationToDelete);
                await dbContext.SaveChangesAsync();

                // Update local list if needed (now matching by RNG value)
                companythesisApplications.RemoveAll(t => t.RNGForCompanyThesisApplied == rngForThesisApplied);
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error deleting thesis application: {ex.Message}");
            // Consider adding user notification
        }
    }



    private async Task DeleteJobApplication(long rngForJobApplied)
    {
        try
        {
            // Find application by the RNG value
            var applicationToDelete = await dbContext.CompanyJobsApplied
                .FirstOrDefaultAsync(app => app.RNGForCompanyJobApplied == rngForJobApplied);

            if (applicationToDelete != null)
            {
                // First delete related details if they exist
                var studentDetails = await dbContext.CompanyJobApplied_StudentDetails
                    .FirstOrDefaultAsync(s => s.StudentUniqueIDAppliedForCompanyJob == applicationToDelete.StudentUniqueIDAppliedForCompanyJob 
                                          && s.StudentEmailAppliedForCompanyJob == applicationToDelete.StudentEmailAppliedForCompanyJob);

                var companyDetails = await dbContext.CompanyJobApplied_CompanyDetails
                    .FirstOrDefaultAsync(c => c.CompanysUniqueIDWhereStudentAppliedForCompanyJob == applicationToDelete.CompanysUniqueIDWhereStudentAppliedForCompanyJob
                                           && c.CompanysEmailWhereStudentAppliedForCompanyJob == applicationToDelete.CompanysEmailWhereStudentAppliedForCompanyJob);

                if (studentDetails != null)
                    dbContext.CompanyJobApplied_StudentDetails.Remove(studentDetails);

                if (companyDetails != null)
                    dbContext.CompanyJobApplied_CompanyDetails.Remove(companyDetails);

                // Then delete the main application
                dbContext.CompanyJobsApplied.Remove(applicationToDelete);
                await dbContext.SaveChangesAsync();

                // Update local list if needed (now matching by RNG value)
                jobApplications.RemoveAll(j => j.RNGForCompanyJobApplied == rngForJobApplied);
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error deleting job application: {ex.Message}");
            // Consider adding user notification
        }
    }






    public static class DiacriticsRemover
    {
        // Mapping Greek diacritics to their base characters
        private static readonly Dictionary<char, char> DiacriticRemovals = new Dictionary<char, char>
    {
        { 'ά', 'α' }, { 'έ', 'ε' }, { 'ή', 'η' }, { 'ί', 'ι' },
        { 'ϊ', 'ι' }, { 'ΐ', 'ι' }, { 'ό', 'ο' }, { 'ύ', 'υ' },
        { 'ϋ', 'υ' }, { 'ΰ', 'υ' }, { 'ώ', 'ω' }, { 'Ά', 'Α' },
        { 'Έ', 'Ε' }, { 'Ή', 'Η' }, { 'Ί', 'Ι' }, { 'Ϊ', 'Ι' },
        { 'Ό', 'Ο' }, { 'Ύ', 'Υ' }, { 'Ϋ', 'Υ' }, { 'Ώ', 'Ω' }
    };

        public static string RemoveDiacritics(string input)
        {
            if (string.IsNullOrEmpty(input))
            {
                return input;
            }

            var normalizedString = new StringBuilder();

            foreach (var character in input)
            {
                if (DiacriticRemovals.TryGetValue(character, out var replacement))
                {
                    normalizedString.Append(replacement);
                }
                else
                {
                    normalizedString.Append(character);
                }
            }

            return normalizedString.ToString();
        }
    }

    //I methodos egine Update gia na tsekarei to department opws ginetai kai ,me ta Professor Internships (student.deparmtnet == professor.department) 
    private async Task SearchThesisApplicationsAsStudent()
    {
        dbContext.ChangeTracker.Clear();

        // Get the current student's department
        var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
        var user = authState.User;
        var userEmail = user.Identity.Name;

        var currentStudent = await dbContext.Students
            .FirstOrDefaultAsync(s => s.Email == userEmail);

        var studentDepartment = currentStudent?.Department;

        var professorThesesQuery = dbContext.ProfessorTheses
            .Include(t => t.Professor)  // Load professor data
            .AsQueryable();

        var companyThesesQuery = dbContext.CompanyTheses
            .Include(t => t.Company)
            .AsQueryable();

        // Filter professor theses by department matching - only show theses where professor's department matches student's department
        if (!string.IsNullOrEmpty(studentDepartment))
        {
            professorThesesQuery = professorThesesQuery
                .Where(t => t.Professor != null && 
                           t.Professor.ProfDepartment == studentDepartment);
        }
        // Keep company theses as is - no department filtering applied

        // Filter by Thesis Title with exact match priority
        if (!string.IsNullOrEmpty(thesisSearchForThesesAsStudent))
        {
            // First try exact match using ToLower() for case-insensitive comparison
            var exactMatchProfessor = professorThesesQuery 
                .Where(t => t.ThesisTitle.ToLower() == thesisSearchForThesesAsStudent.ToLower());

            var exactMatchCompany = companyThesesQuery
                .Where(t => t.CompanyThesisTitle.ToLower() == thesisSearchForThesesAsStudent.ToLower());

            // Check if we have any exact matches
            var hasExactMatches = await exactMatchProfessor.AnyAsync() || await exactMatchCompany.AnyAsync();

            if (hasExactMatches)
            {
                professorThesesQuery = exactMatchProfessor;
                companyThesesQuery = exactMatchCompany;
            }
            else
            {
                // Fall back to contains search if no exact matches
                professorThesesQuery = professorThesesQuery
                    .Where(t => EF.Functions.Like(t.ThesisTitle, $"%{thesisSearchForThesesAsStudent}%"));
                companyThesesQuery = companyThesesQuery
                    .Where(t => EF.Functions.Like(t.CompanyThesisTitle, $"%{thesisSearchForThesesAsStudent}%"));
            }
        }

        // Filter by Professor Full Name (autocomplete field) - now using navigation properties
        if (!string.IsNullOrEmpty(searchNameSurnameAsStudentToFindProfessor))
        {
            var searchTerm = searchNameSurnameAsStudentToFindProfessor.Trim();
            var nameParts = searchTerm.Split(' ', StringSplitOptions.RemoveEmptyEntries);

            if (nameParts.Length == 1)
            {
                professorThesesQuery = professorThesesQuery.Where(t =>
                    t.Professor != null && (
                        EF.Functions.Like(t.Professor.ProfName, $"%{nameParts[0]}%") ||
                        EF.Functions.Like(t.Professor.ProfSurname, $"%{nameParts[0]}%")
                    ));
            }
            else
            {
                professorThesesQuery = professorThesesQuery.Where(t =>
                    t.Professor != null && (
                        (EF.Functions.Like(t.Professor.ProfName, $"%{nameParts[0]}%") && 
                         EF.Functions.Like(t.Professor.ProfSurname, $"%{nameParts[1]}%")) ||
                        (EF.Functions.Like(t.Professor.ProfName, $"%{nameParts[1]}%") && 
                         EF.Functions.Like(t.Professor.ProfSurname, $"%{nameParts[0]}%"))
                    ));
            }
            companyThesesQuery = companyThesesQuery.Where(t => false);
        }
        // Keep existing separate name/surname filters - updated for navigation properties
        else if (!string.IsNullOrEmpty(professorNameSearchForThesesAsStudent))
        {
            professorThesesQuery = professorThesesQuery.Where(t =>
                t.Professor != null &&
                EF.Functions.Like(t.Professor.ProfName.ToLower(), $"%{professorNameSearchForThesesAsStudent.ToLower()}%"));
            companyThesesQuery = companyThesesQuery.Where(t => false);
        }
        else if (!string.IsNullOrEmpty(professorSurnameSearchForThesesAsStudent))
        {
            professorThesesQuery = professorThesesQuery.Where(t => 
                t.Professor != null &&
                EF.Functions.Like(t.Professor.ProfSurname, $"%{professorSurnameSearchForThesesAsStudent}%"));
            companyThesesQuery = companyThesesQuery.Where(t => false);
        }

        // Enhanced Filter by Company Name with exact match priority (unchanged)
        if (!string.IsNullOrEmpty(companyNameSearchForThesesAsStudent))
        {
            // First try exact match using ToLower() for case-insensitive comparison
            var exactMatchCompany = companyThesesQuery
                .Where(t => t.Company != null && 
                           t.Company.CompanyName.ToLower() == companyNameSearchForThesesAsStudent.ToLower());

            // Check if we have any exact matches
            var hasExactMatches = await exactMatchCompany.AnyAsync();

            if (hasExactMatches)
            {
                companyThesesQuery = exactMatchCompany;
            }
            else
            {
                // Fall back to contains search if no exact matches
                companyThesesQuery = companyThesesQuery
                    .Where(t => t.Company != null && 
                               EF.Functions.Like(t.Company.CompanyName, $"%{companyNameSearchForThesesAsStudent}%"));
            }
            professorThesesQuery = professorThesesQuery.Where(t => false);
        }

        // Filter by Thesis Starting Date in both Professor and Company Theses
        if (thesisStartDateForThesesAsStudent.HasValue)
        {
            var startOfDay = thesisStartDateForThesesAsStudent.Value.Date;
            professorThesesQuery = professorThesesQuery.Where(t => t.ThesisActivePeriod.Date >= startOfDay);
            companyThesesQuery = companyThesesQuery.Where(t => t.CompanyThesisStartingDate.Date >= startOfDay);
        }

        if (selectedThesisAreas.Any())
        {
            // For Professor Theses
            var professorPredicate = PredicateBuilder.New<ProfessorThesis>();
            foreach (var area in selectedThesisAreas)
            {
                var tempArea = area;
                professorPredicate = professorPredicate.Or(t => 
                    EF.Functions.Like(t.ThesisAreas, $"%{tempArea}%"));
            }
            professorThesesQuery = professorThesesQuery.Where(professorPredicate);

            // For Company Theses
            var companyPredicate = PredicateBuilder.New<CompanyThesis>();
            foreach (var area in selectedThesisAreas)
            {
                var tempArea = area;
                companyPredicate = companyPredicate.Or(t => 
                    EF.Functions.Like(t.CompanyThesisAreasUpload, $"%{tempArea}%"));
            }
            companyThesesQuery = companyThesesQuery.Where(companyPredicate);
        }

        // Apply dropdown state filters
        if (dropdownState == "Professor")
        {
            companyThesesQuery = companyThesesQuery.Where(t => false);
        }
        else if (dropdownState == "Company")
        {
            professorThesesQuery = professorThesesQuery.Where(t => false);
        }

        // Execute the queries
        var allProfessorTheses = await professorThesesQuery.ToListAsync();
        var allCompanyTheses = await companyThesesQuery.ToListAsync();

        // Process results - updated for navigation properties
        sumUpThesesFromBothCompanyAndProfessor.Clear();

        sumUpThesesFromBothCompanyAndProfessor.AddRange(allProfessorTheses.Select(t => new AllTheses
        {
            ThesisTitle = t.ThesisTitle,
            EmailUsedToUploadThesis = t.ProfessorEmailUsedToUploadThesis,
            ProfessorName = t.Professor?.ProfName ?? "Άγνωστο Όνομα", // Using navigation property with fallback
            ProfessorSurname = t.Professor?.ProfSurname ?? "Άγνωστο Επώνυμο",
            ThesisUploadDateTime = t.ThesisUploadDateTime,
            CompanyNameUploadedThesis = "",
            CompanyThesisAreasUpload = "",
            ProfessorThesisAreasUpload = t.ThesisAreas,
            RNGForProfessorThesisUploaded = t.RNGForThesisUploaded,
            ThesisType = ThesisType.Professor,
            ProfessorThesisStatus = t.ThesisStatus,
            ProfessorDepartment = t.Professor?.ProfDepartment ?? "Άγνωστο Τμήμα",
            RNGForProfessorThesisUploaded_HashedAsUniqueID = t.RNGForThesisUploaded_HashedAsUniqueID,
        }));

        // Only add company theses if not searching by professor name
        if (string.IsNullOrEmpty(searchNameSurnameAsStudentToFindProfessor) && 
            string.IsNullOrEmpty(professorNameSearchForThesesAsStudent) &&
            string.IsNullOrEmpty(professorSurnameSearchForThesesAsStudent))
        {
            sumUpThesesFromBothCompanyAndProfessor.AddRange(allCompanyTheses.Select(t => new AllTheses
            {
                ThesisTitle = t.CompanyThesisTitle,
                EmailUsedToUploadThesis = t.CompanyEmailUsedToUploadThesis,
                ProfessorName = "",
                ProfessorSurname = "",
                ThesisUploadDateTime = t.CompanyThesisUploadDateTime,
                CompanyNameUploadedThesis = t.Company?.CompanyName ?? "Άγνωστη Εταιρεία",
                CompanyThesisAreasUpload = t.CompanyThesisAreasUpload,
                ProfessorThesisAreasUpload = "",
                RNGForCompanyThesisUploaded = t.RNGForThesisUploadedAsCompany,
                ThesisType = ThesisType.Company,
                CompanyThesisStatus = t.CompanyThesisStatus,
                RNGForCompanyThesisUploaded_HashedAsUniqueID = t.RNGForThesisUploadedAsCompany_HashedAsUniqueID,
            }));
        }

        StateHasChanged();
        showThesisApplications = sumUpThesesFromBothCompanyAndProfessor.Any();
        showThesisApplications = true;
        await FilterThesisApplicationsToSearchAsStudent();  

        if (sumUpThesesFromBothCompanyAndProfessor?.Any() == false)
        {
            await Task.Delay(50);
            await JS.InvokeVoidAsync("scrollToElement", "noThesesFoundAlert");
        }
    }


    private async Task SearchJobApplicationsAsStudent()
    {
        try
        {
            dbContext.ChangeTracker.Clear();
            var query = dbContext.CompanyJobs
                .Include(j => j.Company)  // Add this line to include Company data
                .AsQueryable();

            // Filter by selected date (from the day chosen and later)
            if (selectedDateToSearchJob.HasValue)
            {
                var startOfDayForJobs = selectedDateToSearchJob.Value.Date;
                query = query.Where(j => j.PositionActivePeriod >= startOfDayForJobs);
            }

            // Filter by Position Title
            if (!string.IsNullOrEmpty(jobSearch))
            {
                query = query.Where(j => EF.Functions.Like(j.PositionTitle, $"%{jobSearch}%"));
            }

            // Filter by Company Name (now using the navigation property)
            if (!string.IsNullOrEmpty(companyNameSearch))
            {
                query = query.Where(j => j.Company != null && 
                       EF.Functions.Like(j.Company.CompanyName, $"%{companyNameSearch}%"));
            }

            // Rest of your filters remain the same...
            if (!string.IsNullOrEmpty(emailSearch))
            {
                query = query.Where(j => EF.Functions.Like(j.EmailUsedToUploadJobs, $"%{emailSearch}%"));
            }

            if (!string.IsNullOrEmpty(positionTypeSearch))
            {
                query = query.Where(j => EF.Functions.Like(j.PositionType, $"%{positionTypeSearch}%"));
            }

            if (uploadDateSearch != null)
            {
                query = query.Where(j => j.UploadDateTime.Date == uploadDateSearch.Value.Date);
            }

            if (!string.IsNullOrEmpty(jobSearchByRegion))
            {
                query = query.Where(j => j.PositionPerifereiaLocation == jobSearchByRegion);
            }

            if (!string.IsNullOrEmpty(jobSearchByTown))
            {
                query = query.Where(j => j.PositionDimosLocation == jobSearchByTown);
            }

            // Execute the query
            var allJobs = await query.ToListAsync();

            // Apply in-memory filters
            if (selectedPositionAreas.Any())
            {
                allJobs = allJobs.Where(j => j.PositionAreas?
                    .Split(',', StringSplitOptions.TrimEntries)
                    .Any(area => selectedPositionAreas.Contains(area, StringComparer.OrdinalIgnoreCase)) ?? false)
                    .ToList();
            }

            if (companyjobSearchByTransportOffer)
            {
                allJobs = allJobs.Where(j => j.PositionTransportOffer).ToList();
            }

            // Update results
            jobs = allJobs;
            showJobApplications = true; 
            StateHasChanged();

            // Handle empty results
            var publishedJobs = jobs?.Where(i => i.PositionStatus == "Δημοσιευμένη").ToList();
            if (publishedJobs?.Any() == false)
            {
                await Task.Delay(50);
                await JS.InvokeVoidAsync("scrollToElement", "noJobsFoundAlert");
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Search error: {ex.Message}");
            await JS.InvokeVoidAsync("alert", "Σφάλμα κατά την αναζήτηση");
        }
    }

    private List<AllInternships> publishedInternships = new();
    private async Task SearchInternshipsAsStudent()
    {
        try
        {
            dbContext.ChangeTracker.Clear();

            // Initialize queries with Company and Professor included
            var companyInternshipsQuery = dbContext.CompanyInternships
                .Include(i => i.Company)
                .Where(i => i.CompanyUploadedInternshipStatus == "Δημοσιευμένη")
                .AsQueryable();

            var professorInternshipsQuery = dbContext.ProfessorInternships
                .Include(i => i.Professor) // Added navigation property
                .Where(i => i.ProfessorUploadedInternshipStatus == "Δημοσιευμένη")
                .AsQueryable();

            // Title filter
            if (!string.IsNullOrEmpty(companyinternshipSearch))
            {
                var searchTerm = $"%{companyinternshipSearch}%";
                companyInternshipsQuery = companyInternshipsQuery
                    .Where(j => EF.Functions.Like(j.CompanyInternshipTitle, searchTerm));
                professorInternshipsQuery = professorInternshipsQuery
                    .Where(j => EF.Functions.Like(j.ProfessorInternshipTitle, searchTerm));
            }

            // Type filter
            if (!string.IsNullOrEmpty(companyinternshipSearchByType))
            {
                companyInternshipsQuery = companyInternshipsQuery
                    .Where(j => j.CompanyInternshipType == companyinternshipSearchByType);
                professorInternshipsQuery = professorInternshipsQuery
                    .Where(j => j.ProfessorInternshipType == companyinternshipSearchByType);
            }

            // ESPA filter
            if (!string.IsNullOrEmpty(companyinternshipSearchByESPA))
            {
                companyInternshipsQuery = companyInternshipsQuery
                    .Where(j => j.CompanyInternshipESPA == companyinternshipSearchByESPA);
                professorInternshipsQuery = professorInternshipsQuery
                    .Where(j => j.ProfessorInternshipESPA == companyinternshipSearchByESPA);
            }

            // Date filters
            if (selectedDateToSearchInternship.HasValue)
            {
                var startOfDay = selectedDateToSearchInternship.Value.Date;
                companyInternshipsQuery = companyInternshipsQuery
                    .Where(j => j.CompanyInternshipActivePeriod >= startOfDay);
                professorInternshipsQuery = professorInternshipsQuery
                    .Where(j => j.ProfessorInternshipActivePeriod >= startOfDay);
            }

            if (finishEstimationDateToSearchInternship.HasValue)
            {
                var endOfDay = finishEstimationDateToSearchInternship.Value.Date;
                companyInternshipsQuery = companyInternshipsQuery
                    .Where(j => j.CompanyInternshipFinishEstimation <= endOfDay);
                professorInternshipsQuery = professorInternshipsQuery
                    .Where(j => j.ProfessorInternshipFinishEstimation <= endOfDay);
            }

            // Transport filter
            if (companyinternshipSearchByTransportOffer)
            {
                companyInternshipsQuery = companyInternshipsQuery
                    .Where(j => j.CompanyInternshipTransportOffer);
                professorInternshipsQuery = professorInternshipsQuery
                    .Where(j => j.ProfessorInternshipTransportOffer);
            }

            // Location filters
            if (!string.IsNullOrEmpty(companyinternshipSearchByTown))
            {
                companyInternshipsQuery = companyInternshipsQuery
                    .Where(j => j.CompanyInternshipDimosLocation == companyinternshipSearchByTown);
                professorInternshipsQuery = professorInternshipsQuery
                    .Where(j => j.ProfessorInternshipDimosLocation == companyinternshipSearchByTown);
            }
            else if (!string.IsNullOrEmpty(companyinternshipSearchByRegion))
            {
                companyInternshipsQuery = companyInternshipsQuery
                    .Where(j => j.CompanyInternshipPerifereiaLocation == companyinternshipSearchByRegion);
                professorInternshipsQuery = professorInternshipsQuery
                    .Where(j => j.ProfessorInternshipPerifereiaLocation == companyinternshipSearchByRegion);
            }

            var allCompanyInternships = await companyInternshipsQuery.ToListAsync();
            var allProfessorInternships = await professorInternshipsQuery.ToListAsync();

            // Area filter
            if (selectedAreas.Any())
            {
                allCompanyInternships = allCompanyInternships
                    .Where(j => !string.IsNullOrEmpty(j.CompanyInternshipAreas) &&
                        j.CompanyInternshipAreas.Split(',', StringSplitOptions.TrimEntries)
                        .Any(area => selectedAreas.Contains(area, StringComparer.OrdinalIgnoreCase)))
                    .ToList();

                allProfessorInternships = allProfessorInternships
                    .Where(j => !string.IsNullOrEmpty(j.ProfessorInternshipAreas) &&
                        j.ProfessorInternshipAreas.Split(',', StringSplitOptions.TrimEntries)
                        .Any(area => selectedAreas.Contains(area, StringComparer.OrdinalIgnoreCase)))
                    .ToList();
            }

            sumUpInternshipsFromBothCompanyAndProfessor.Clear();

            // Company Internship mapping (unchanged)
            sumUpInternshipsFromBothCompanyAndProfessor.AddRange(allCompanyInternships.Select(j => new AllInternships
            {
                InternshipTitle = j.CompanyInternshipTitle,
                CompanyName = j.Company?.CompanyName,
                CompanyInternshipUploadDate = j.CompanyInternshipUploadDate,
                InternshipStatus = j.CompanyUploadedInternshipStatus,
                InternshipAreas = j.CompanyInternshipAreas,
                InternshipType = "Company",
                InternshipActivePeriod = j.CompanyInternshipActivePeriod,
                InternshipFinishEstimation = j.CompanyInternshipFinishEstimation,
                RNGForCompanyInternship = j.RNGForInternshipUploadedAsCompany,
                CompanyEmail = j.CompanyEmailUsedToUploadInternship,
                InternshipFundingType = j.CompanyInternshipESPA,
                RNGForCompanyInternship_HashedAsUniqueID = j.RNGForInternshipUploadedAsCompany_HashedAsUniqueID
            }));

            // Updated Professor Internship mapping
            sumUpInternshipsFromBothCompanyAndProfessor.AddRange(allProfessorInternships.Select(j => new AllInternships
            {
                InternshipTitle = j.ProfessorInternshipTitle,
                ProfessorName = j.Professor?.ProfName, // From navigation property
                ProfessorSurname = j.Professor?.ProfSurname, // From navigation property
                ProfessorEmail = j.ProfessorEmailUsedToUploadInternship, // Updated property
                ProfessorInternshipUploadDate = j.ProfessorInternshipUploadDate,
                InternshipStatus = j.ProfessorUploadedInternshipStatus,
                InternshipAreas = j.ProfessorInternshipAreas,
                InternshipType = "Professor",
                InternshipActivePeriod = j.ProfessorInternshipActivePeriod,
                InternshipFinishEstimation = j.ProfessorInternshipFinishEstimation,
                RNGForProfessorInternship = j.RNGForInternshipUploadedAsProfessor, // Updated property
                InternshipFundingType = j.ProfessorInternshipESPA,
                RNGForProfessorInternship_HashedAsUniqueID = j.RNGForInternshipUploadedAsProfessor_HashedAsUniqueID, // Updated
                ProfessorDepartment = j.Professor?.ProfDepartment // From navigation property
            }));

            // Filter by department for professor internships only
            publishedInternships = sumUpInternshipsFromBothCompanyAndProfessor
                .Where(internship => 
                    (internship.InternshipType == "Professor" && 
                     internship.ProfessorDepartment == userData.Department) ||
                    internship.InternshipType == "Company")
                .ToList();

            showInternships = publishedInternships.Any();

            if (!publishedInternships.Any())
            {
                await Task.Delay(50); 
                await JS.InvokeVoidAsync("scrollToElement", "noInternshipsFoundAlert");
            }

            StateHasChanged();
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error searching internships: {ex.Message}");
            await JS.InvokeVoidAsync("alert", "An error occurred while searching internships");
        }
    }

    private void NavigateToUploadThesis()
    {
        NavigationManager.NavigateTo("/uploadthesis"); 
    }
    private void NavigateToUploadInternship()
    {
        NavigationManager.NavigateTo("/uploadinternship"); 
    }
    private void NavigateToUploadJobs()
    {
        NavigationManager.NavigateTo("/uploadjobs"); 
    }


    void ClearSearchFieldsForInternshipsAsStudent()
    {
        companyinternshipSearch = string.Empty;                
        companyinternshipSearchByType = string.Empty;           
        companyinternshipSearchByRegion = string.Empty;        
        companyinternshipSearchByTransportOffer = false;  
        companyinternshipSearchByESPA = string.Empty;   
        selectedAreas.Clear(); 
        isInternshipAreasVisible = false;
        selectedMonth = null;                                   
        companyinternships = new List<CompanyInternship>();     
        showInternships = false;              
        StateHasChanged();                                      
    }




    void ClearSearchFieldsForJobApplicationsAsStudent()
    {
        jobSearch = string.Empty;
        companyNameSearch = string.Empty;
        emailSearch = string.Empty;
        positionTypeSearch = string.Empty;
        uploadDateSearch = null;
        jobSearchByRegion = string.Empty; 
        jobSearchByTown = string.Empty;
        companyjobSearchByTransportOffer = false; 
        selectedPositionAreas.Clear();
        isPositionAreasVisible = false; 
        companyJobs = new List<CompanyJob>(); 
        showJobApplications = false;
        StateHasChanged();
    }


    void ClearSearchFieldsForThesisAsStudent()
    {
        thesisSearchForThesesAsStudent = string.Empty;
        professorNameSearchForThesesAsStudent = string.Empty;
        professorSurnameSearchForThesesAsStudent = string.Empty;
        companyNameSearchForThesesAsStudent = string.Empty;
        thesisUploadMonthForThesesAsStudent = null;
        thesisStartDateForThesesAsStudent = DateTime.Now;

        // Clear the autocomplete fields and suggestions
        searchNameSurnameAsStudentToFindProfessor = string.Empty;
        professorNameSurnameSuggestions.Clear();
        thesisTitleSuggestions.Clear();

        // Clear area filters
        selectedThesisAreas.Clear();  
        isThesisAreasVisible = false;  

        // Reset results
        sumUpThesesFromBothCompanyAndProfessor.Clear();
        showThesisApplications = false; 

        StateHasChanged();
    }


    private async Task LoadUserThesisApplications()
    {
        try
        {
            var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
            var user = authState.User;

            // Initialize lists and cache
            companyThesisApplications = new List<CompanyThesisApplied>();
            professorThesisApplications = new List<ProfessorThesisApplied>();
            thesisDataCache = new Dictionary<long, CompanyThesis>();
            professorThesisDataCache = new Dictionary<long, ProfessorThesis>(); 

            if (user.Identity.IsAuthenticated)
            {
                var userEmail = user.FindFirst("name")?.Value;

                if (!string.IsNullOrEmpty(userEmail))
                {
                    showStudentThesisApplications = true;

                    // Get student details
                    var student = await dbContext.Students
                        .FirstOrDefaultAsync(s => s.Email == userEmail);

                    if (student != null)
                    {
                        // Fetch company thesis applications
                        companyThesisApplications = await dbContext.CompanyThesesApplied
                            .Include(a => a.StudentDetails)
                            .Include(a => a.CompanyDetails)
                            .Where(app => app.StudentEmailAppliedForThesis == userEmail && 
                                        app.StudentUniqueIDAppliedForThesis == student.Student_UniqueID)
                            .OrderByDescending(app => app.DateTimeStudentAppliedForThesis)
                            .ToListAsync();

                        // Load all related theses in one query
                        var thesisRNGs = companyThesisApplications
                            .Select(a => a.RNGForCompanyThesisApplied)
                            .ToList();

                        var theses = await dbContext.CompanyTheses
                            .Include(t => t.Company) 
                            .Where(t => thesisRNGs.Contains(t.RNGForThesisUploadedAsCompany))
                            .ToListAsync();

                        // Populate cache
                        foreach (var thesis in theses)
                        {
                            thesisDataCache[thesis.RNGForThesisUploadedAsCompany] = thesis;
                        }

                        // Fetch professor thesis applications (updated to match company pattern)
                        professorThesisApplications = await dbContext.ProfessorThesesApplied
                            .Include(a => a.StudentDetails)
                            .Include(a => a.ProfessorDetails)
                            .Where(app => app.StudentEmailAppliedForProfessorThesis == userEmail && 
                                          app.StudentUniqueIDAppliedForProfessorThesis == student.Student_UniqueID)
                            .OrderByDescending(app => app.DateTimeStudentAppliedForProfessorThesis)
                            .ToListAsync();

                        // Load all related professor theses in one query
                        var professorThesisRNGs = professorThesisApplications
                            .Select(a => a.RNGForProfessorThesisApplied)
                            .ToList();

                        var professorTheses = await dbContext.ProfessorTheses
                            .Where(t => professorThesisRNGs.Contains(t.RNGForThesisUploaded))
                            .ToListAsync();

                        // Populate professor thesis cache if needed
                        foreach (var thesis in professorTheses)
                        {
                            professorThesisDataCache[thesis.RNGForThesisUploaded] = thesis;
                        }

                    }
                }
            }

            Console.WriteLine($"Company Thesis Applications: {companyThesisApplications.Count()}");
            Console.WriteLine($"Professor Thesis Applications: {professorThesisApplications.Count()}");
            StateHasChanged();
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading thesis applications: {ex.Message}");
            StateHasChanged();
        }
    }

    private async Task LoadUserJobApplications()
    {
        try
        {
            var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
            var user = authState.User;

            if (user.Identity.IsAuthenticated)
            {
                var userEmail = user.FindFirst("name")?.Value; // Get user's email from claim
                if (!string.IsNullOrEmpty(userEmail))
                {
                    showStudentJobApplications = true; // Set flag to indicate applications are loading

                    // Retrieve job applications using email and unique ID
                    jobApplications = await dbContext.CompanyJobsApplied
                        .Where(j => j.StudentEmailAppliedForCompanyJob == userEmail && 
                                   j.StudentUniqueIDAppliedForCompanyJob == userData.Student_UniqueID)
                        .OrderByDescending(j => j.DateTimeStudentAppliedForCompanyJob) // Added sorting
                        .ToListAsync();

                    StateHasChanged(); // Notify the UI to update
                }
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading job applications: {ex.Message}");
            StateHasChanged();
        }
    }

    private async Task ToggleAndLoadStudentThesisApplications()
    {
        showStudentThesisApplications = !showStudentThesisApplications;

        if (showStudentThesisApplications)
        {
            await LoadUserThesisApplications();
        }
        StateHasChanged();
    }

    private async Task ToggleAndLoadStudentJobApplications()
    {
        showStudentJobApplications = !showStudentJobApplications;

        if (showStudentJobApplications)
        {
            await LoadUserJobApplications();
        }
    }

    private async Task ApplyForThesisAsStudent(AllTheses thesis)
    {
        // First ask for confirmation
        var confirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML", 
            $"Πρόκεται να κάνετε Αίτηση για την Πτυχιακή Εργασία: {thesis.ThesisTitle}. Είστε σίγουρος/η;");
        if (!confirmed) return;

        // Status check remains the same for both types
        if (thesis.ThesisType == ThesisType.Professor)
        {
            var latestThesis = await dbContext.ProfessorTheses
                .AsNoTracking()
                .Where(t => t.RNGForThesisUploaded == thesis.RNGForProfessorThesisUploaded)
                .Select(t => new { t.ThesisStatus })
                .FirstOrDefaultAsync();

            if (latestThesis == null || latestThesis.ThesisStatus != "Δημοσιευμένη")
            {
                await JS.InvokeVoidAsync("confirmActionWithHTML2", "Η Πτυχιακή Εργασία του Καθηγητή Έχει Αποδημοσιευτεί. Παρακαλώ δοκιμάστε αργότερα");
                return;
            }
        }
        else if (thesis.ThesisType == ThesisType.Company)
        {
            var latestThesis = await dbContext.CompanyTheses
                .AsNoTracking()
                .Where(t => t.RNGForThesisUploadedAsCompany == thesis.RNGForCompanyThesisUploaded)
                .Select(t => new { t.CompanyThesisStatus })
                .FirstOrDefaultAsync();

            if (latestThesis == null || latestThesis.CompanyThesisStatus != "Δημοσιευμένη")
            {
                await JS.InvokeVoidAsync("confirmActionWithHTML2", "Η Πτυχιακή Εργασία της Εταιρείας Έχει Αποδημοσιευτεί. Παρακαλώ δοκιμάστε αργότερα");
                return;
            }
        }

        var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
        var user = authState.User;

        if (!user.Identity.IsAuthenticated) return;

        var student = await GetStudentDetails(user.Identity.Name);
        if (student == null)
        {
            await JS.InvokeVoidAsync("confirmActionWithHTML2", "Δεν βρέθηκαν στοιχεία φοιτητή.");
            return;
        }

        if (thesis.ThesisType == ThesisType.Professor)
        {
            Console.WriteLine("Detected thesis as Professor.");

            // Check for existing application using email and RNG (like company version)
            var existingApplication = await dbContext.ProfessorThesesApplied
                .FirstOrDefaultAsync(app => 
                    app.StudentEmailAppliedForProfessorThesis == student.Email &&
                    app.RNGForProfessorThesisApplied == thesis.RNGForProfessorThesisUploaded);

            if (existingApplication != null)
            {
                await JS.InvokeVoidAsync("confirmActionWithHTML2", 
                    $"Έχετε ήδη κάνει Αίτηση για την Πτυχιακή Εργασία <span style='color: #8B0000; font-weight: bold;'>{thesis.ThesisTitle}</span> από τον Καθηγητή: <span style='color: #00008B; font-weight: bold;'>{thesis.ProfessorName} {thesis.ProfessorSurname}</span>!");
                return;
            }

            // Get professor data (like company version)
            var professor = await dbContext.Professors
                .FirstOrDefaultAsync(p => p.ProfEmail == thesis.EmailUsedToUploadThesis);

            if (professor == null)
            {
                await JS.InvokeVoidAsync("confirmActionWithHTML2", "Σφάλμα: Δεν βρέθηκε ο καθηγητής.");
                return;
            }

            using var transaction = await dbContext.Database.BeginTransactionAsync();
            try
            {
                // Create main application with details (like company version)
                var professorThesisApplication = new ProfessorThesisApplied
                {
                    RNGForProfessorThesisApplied = thesis.RNGForProfessorThesisUploaded,
                    DateTimeStudentAppliedForProfessorThesis = DateTime.UtcNow,
                    StudentEmailAppliedForProfessorThesis = student.Email,
                    StudentUniqueIDAppliedForProfessorThesis = student.Student_UniqueID,
                    ProfessorEmailWhereStudentAppliedForProfessorThesis = thesis.EmailUsedToUploadThesis,
                    ProfessorUniqueIDWhereStudentAppliedForProfessorThesis = professor.Professor_UniqueID,
                    ProfessorThesisStatusAppliedAtProfessorSide = "Σε Επεξεργασία",
                    ProfessorThesisStatusAppliedAtStudentSide = "Σε Επεξεργασία",
                    RNGForProfessorThesisApplied_HashedAsUniqueID = thesis.RNGForProfessorThesisUploaded_HashedAsUniqueID,

                    // Navigation properties (like company version)
                    StudentDetails = new ProfessorThesisApplied_StudentDetails
                    {
                        StudentEmailAppliedForProfessorThesis = student.Email,
                        StudentUniqueIDAppliedForProfessorThesis = student.Student_UniqueID,
                        DateTimeStudentAppliedForProfessorThesis = DateTime.UtcNow,
                        RNGForProfessorThesisApplied_HashedAsUniqueID = thesis.RNGForProfessorThesisUploaded_HashedAsUniqueID
                    },

                    ProfessorDetails = new ProfessorThesisApplied_ProfessorDetails
                    {
                        ProfessorEmailWhereStudentAppliedForProfessorThesis = thesis.EmailUsedToUploadThesis,
                        ProfessorUniqueIDWhereStudentAppliedForProfessorThesis = professor.Professor_UniqueID
                    }
                };

                dbContext.ProfessorThesesApplied.Add(professorThesisApplication);

                // Add platform action (like company version)
                dbContext.PlatformActions.Add(new PlatformActions
                {
                    UserRole_PerformedAction = "STUDENT",
                    ForWhat_PerformedAction = "PROFESSOR_THESIS",
                    HashedPositionRNG_PerformedAction = HashingHelper.HashLong(thesis.RNGForProfessorThesisUploaded),
                    TypeOfAction_PerformedAction = "APPLY",
                    DateTime_PerformedAction = DateTime.UtcNow
                });

                await dbContext.SaveChangesAsync();
                await transaction.CommitAsync();

                // Send emails (existing logic remains)
                try
                {
                    await InternshipEmailService.SendThesisApplicationConfirmationToStudent(
                        student.Email,
                        student.Name,
                        student.Surname,
                        thesis.ThesisTitle,
                        thesis.RNGForProfessorThesisUploaded_HashedAsUniqueID,
                        $"{thesis.ProfessorName} {thesis.ProfessorSurname}");

                    await InternshipEmailService.SendThesisApplicationNotificationToProfessor(
                        thesis.EmailUsedToUploadThesis,
                        $"{thesis.ProfessorName} {thesis.ProfessorSurname}",
                        student.Name,
                        student.Surname,
                        student.Email,
                        student.Telephone,
                        student.StudyYear,
                        thesis.RNGForProfessorThesisUploaded_HashedAsUniqueID,
                        student.Attachment,
                        thesis.ThesisTitle);
                }
                catch (Exception ex)
                {
                    Console.WriteLine($"Email error: {ex.Message}");
                }

                await JS.InvokeVoidAsync("confirmActionWithHTML2", 
                    $"Η αίτηση για την Πτυχιακή Εργασία {thesis.ThesisTitle} υποβλήθηκε επιτυχώς!");
            }
            catch (Exception ex)
            {
                await transaction.RollbackAsync();
                Console.WriteLine($"Full error: {ex.ToString()}");
                await JS.InvokeVoidAsync("confirmActionWithHTML2", 
                    $"Σφάλμα κατά την υποβολή: {ex.InnerException?.Message ?? ex.Message}");
            }
        }
        else if (thesis.ThesisType == ThesisType.Company)
        {
            Console.WriteLine("Detected thesis as Company.");

            // Check for existing application using email and RNG
            var existingApplication = await dbContext.CompanyThesesApplied
                .FirstOrDefaultAsync(app => 
                    app.StudentEmailAppliedForThesis == student.Email &&
                    app.RNGForCompanyThesisApplied == thesis.RNGForCompanyThesisUploaded);

            if (existingApplication != null)
            {
                await JS.InvokeVoidAsync("confirmActionWithHTML2", 
                    $"Έχετε ήδη κάνει Αίτηση για την Πτυχιακή Εργασία <span style='color: #8B0000; font-weight: bold;'>{thesis.ThesisTitle}</span> από την Εταιρεία: <span style='color: #00008B; font-weight: bold;'>{thesis.CompanyNameUploadedThesis}</span>!");
                return;
            }

            // Get company data
            var company = await dbContext.Companies
                .FirstOrDefaultAsync(c => c.CompanyEmail == thesis.EmailUsedToUploadThesis);

            if (company == null)
            {
                await JS.InvokeVoidAsync("confirmActionWithHTML2", "Σφάλμα: Δεν βρέθηκε η εταιρία.");
                return;
            }

            using var transaction = await dbContext.Database.BeginTransactionAsync();
            try
            {
                // Create main application with details
                var companyThesisApplication = new CompanyThesisApplied
                {
                    RNGForCompanyThesisApplied = thesis.RNGForCompanyThesisUploaded,
                    DateTimeStudentAppliedForThesis = DateTime.UtcNow,
                    StudentEmailAppliedForThesis = student.Email,
                    StudentUniqueIDAppliedForThesis = student.Student_UniqueID,
                    CompanyEmailWhereStudentAppliedForThesis = thesis.EmailUsedToUploadThesis,
                    CompanyUniqueIDWhereStudentAppliedForThesis = company.Company_UniqueID,
                    CompanyThesisStatusAppliedAtCompanySide = "Σε Επεξεργασία",
                    CompanyThesisStatusAppliedAtStudentSide = "Σε Επεξεργασία",
                    RNGForCompanyThesisAppliedAsStudent_HashedAsUniqueID = thesis.RNGForCompanyThesisUploaded_HashedAsUniqueID,

                    // Navigation properties
                    StudentDetails = new CompanyThesisApplied_StudentDetails
                    {
                        StudentEmailAppliedForThesis = student.Email,
                        StudentUniqueIDAppliedForThesis = student.Student_UniqueID,
                        DateTimeStudentAppliedForThesis = DateTime.UtcNow,
                        RNGForCompanyThesisAppliedAsStudent_HashedAsUniqueID = thesis.RNGForCompanyThesisUploaded_HashedAsUniqueID
                    },

                    CompanyDetails = new CompanyThesisApplied_CompanyDetails
                    {
                        CompanyEmailWhereStudentAppliedForThesis = thesis.EmailUsedToUploadThesis,
                        CompanyUniqueIDWhereStudentAppliedForThesis = company.Company_UniqueID
                    }
                };

                dbContext.CompanyThesesApplied.Add(companyThesisApplication);

                // Add platform action
                dbContext.PlatformActions.Add(new PlatformActions
                {
                    UserRole_PerformedAction = "STUDENT",
                    ForWhat_PerformedAction = "COMPANY_THESIS",
                    HashedPositionRNG_PerformedAction = HashingHelper.HashLong(thesis.RNGForCompanyThesisUploaded),
                    TypeOfAction_PerformedAction = "APPLY",
                    DateTime_PerformedAction = DateTime.UtcNow
                });

                await dbContext.SaveChangesAsync();
                await transaction.CommitAsync();

                // Send emails
                try
                {
                    await InternshipEmailService.SendThesisApplicationConfirmationToStudent(
                        student.Email,
                        student.Name,
                        student.Surname,
                        thesis.ThesisTitle,
                        thesis.RNGForCompanyThesisUploaded_HashedAsUniqueID,
                        thesis.CompanyNameUploadedThesis);

                    await InternshipEmailService.SendThesisApplicationNotificationToCompany(
                        thesis.EmailUsedToUploadThesis,
                        thesis.CompanyNameUploadedThesis,
                        student.Name,
                        student.Surname,
                        student.Email,
                        student.Telephone,
                        student.StudyYear,
                        thesis.RNGForCompanyThesisUploaded_HashedAsUniqueID,
                        student.Attachment,
                        thesis.ThesisTitle);
                }
                catch (Exception ex)
                {
                    Console.WriteLine($"Email error: {ex.Message}");
                }

                await JS.InvokeVoidAsync("confirmActionWithHTML2", 
                    $"Η αίτηση για την Πτυχιακή Εργασία {thesis.ThesisTitle} υποβλήθηκε επιτυχώς!");
            }
            catch (Exception ex)
            {
                await transaction.RollbackAsync();
                Console.WriteLine($"Full error: {ex.ToString()}");
                await JS.InvokeVoidAsync("confirmActionWithHTML2", 
                    $"Σφάλμα κατά την υποβολή: {ex.InnerException?.Message ?? ex.Message}");
            }

            await RefreshStudentData();
        }
        else
        {
            await JS.InvokeVoidAsync("alert", "Δεν είναι γνωστός ο τύπος της Πτυχιακής Εργασίας.");
        }

        NavigationManager.NavigateTo(NavigationManager.Uri, forceLoad: true);
    }




    private async Task SaveChangesWithErrorHandling(DbContext context, string thesisTitle)
    {
        try
        {
            await context.SaveChangesAsync();
            await JS.InvokeVoidAsync("confirmActionWithHTML2", $"Η Αίτηση σας για την Πτυχιακή Εργασία: {thesisTitle} έχει πραγματοποιηθεί Επιτυχώς!");
        }
        catch (DbUpdateException ex)
        {
            var innerException = ex.InnerException?.Message ?? ex.Message;
            Console.WriteLine($"Error saving thesis application: {innerException}");
            await JS.InvokeVoidAsync("confirmActionWithHTML2", $"Σφάλμα κατά την υποβολή της αίτησης. Δοκιμάστε ξανά. Λεπτομέρειες: {innerException}");
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error saving thesis application: {ex.Message}");
            await JS.InvokeVoidAsync("confirmActionWithHTML2", "Σφάλμα κατά την υποβολή της αίτησης. Δοκιμάστε ξανά.");
        }
    }

    private async Task LoadCompanyJobApplicantData()
    {
        try 
        {
            // Get all unique student emails from applications
            var studentEmails = jobApplicantsMap.Values
                .SelectMany(x => x)
                .Select(a => a.StudentEmailAppliedForCompanyJob)
                .Distinct()
                .ToList();

            // Load ALL student fields needed for the modal
            var students = await dbContext.Students
                .Where(s => studentEmails.Contains(s.Email.ToLower()))
                .Select(s => new Student {
                    Id = s.Id,
                    Student_UniqueID = s.Student_UniqueID,
                    Email = s.Email,
                    Image = s.Image,
                    Name = s.Name,
                    Surname = s.Surname,
                    Telephone = s.Telephone,
                    PermanentAddress = s.PermanentAddress,
                    PermanentRegion = s.PermanentRegion,
                    PermanentTown = s.PermanentTown,
                    Attachment = s.Attachment,
                    LinkedInProfile = s.LinkedInProfile,
                    PersonalWebsite = s.PersonalWebsite,
                    Transport = s.Transport,
                    RegNumber = s.RegNumber,
                    University = s.University,
                    Department = s.Department,
                    EnrollmentDate = s.EnrollmentDate,
                    StudyYear = s.StudyYear,
                    LevelOfDegree = s.LevelOfDegree,
                    AreasOfExpertise = s.AreasOfExpertise,
                    Keywords = s.Keywords,
                    ExpectedGraduationDate = s.ExpectedGraduationDate,
                    CompletedECTS = s.CompletedECTS
                })
                .AsNoTracking()
                .ToListAsync();

            // Clear and repopulate cache
            //studentDataCache.Clear();
            foreach (var student in students)
            {
                studentDataCache[student.Email.ToLower()] = student;
            }

            Console.WriteLine($"Loaded {students.Count} student records with full details");
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading student data: {ex.Message}");
        }
    }

    private async Task LoadCompanyInternshipApplicantData()
    {
        try 
        {
            var studentEmails = internshipApplicantsMap.Values
                .SelectMany(x => x)
                .Select(a => a.StudentEmailAppliedForInternship)
                .Distinct()
                .ToList();

            var students = await dbContext.Students
                .Where(s => studentEmails.Contains(s.Email.ToLower()))
                .Select(s => new Student {
                    Id = s.Id,
                    Student_UniqueID = s.Student_UniqueID,
                    Email = s.Email,
                    Image = s.Image,
                    Name = s.Name,
                    Surname = s.Surname,
                    Telephone = s.Telephone,
                    PermanentAddress = s.PermanentAddress,
                    PermanentRegion = s.PermanentRegion,
                    PermanentTown = s.PermanentTown,
                    Attachment = s.Attachment,
                    LinkedInProfile = s.LinkedInProfile,
                    PersonalWebsite = s.PersonalWebsite,
                    Transport = s.Transport,
                    RegNumber = s.RegNumber,
                    University = s.University,
                    Department = s.Department,
                    EnrollmentDate = s.EnrollmentDate,
                    StudyYear = s.StudyYear,
                    LevelOfDegree = s.LevelOfDegree,
                    AreasOfExpertise = s.AreasOfExpertise,
                    Keywords = s.Keywords,
                    ExpectedGraduationDate = s.ExpectedGraduationDate,
                    CompletedECTS = s.CompletedECTS
                })
                .AsNoTracking()
                .ToListAsync();

            //studentDataCache.Clear(); // Optional: keep if job & internship data shouldn't mix
            foreach (var student in students)
            {
                studentDataCache[student.Email.ToLower()] = student;
            }

            Console.WriteLine($"Loaded {students.Count} internship student records");
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading internship student data: {ex.Message}");
        }
    }

    private async Task LoadProfessorInternshipApplicantData()
    {
        try 
        {
            var studentEmails = professorInternshipApplicantsMap.Values
                .SelectMany(x => x)
                .Select(a => a.StudentDetails.StudentEmailAppliedForProfessorInternship)
                .Distinct()
                .ToList();

            var students = await dbContext.Students
                .Where(s => studentEmails.Contains(s.Email.ToLower()))
                .Select(s => new Student {
                    Id = s.Id,
                    Student_UniqueID = s.Student_UniqueID,
                    Email = s.Email,
                    Image = s.Image,
                    Name = s.Name,
                    Surname = s.Surname,
                    Telephone = s.Telephone,
                    PermanentAddress = s.PermanentAddress,
                    PermanentRegion = s.PermanentRegion,
                    PermanentTown = s.PermanentTown,
                    Attachment = s.Attachment,
                    LinkedInProfile = s.LinkedInProfile,
                    PersonalWebsite = s.PersonalWebsite,
                    Transport = s.Transport,
                    RegNumber = s.RegNumber,
                    University = s.University,
                    Department = s.Department,
                    EnrollmentDate = s.EnrollmentDate,
                    StudyYear = s.StudyYear,
                    LevelOfDegree = s.LevelOfDegree,
                    AreasOfExpertise = s.AreasOfExpertise,
                    Keywords = s.Keywords,
                    ExpectedGraduationDate = s.ExpectedGraduationDate,
                    CompletedECTS = s.CompletedECTS
                })
                .AsNoTracking()
                .ToListAsync();

            //studentDataCache.Clear(); // Optional: keep if job & internship data shouldn't mix
            foreach (var student in students)
            {
                studentDataCache[student.Email.ToLower()] = student;
            }

            Console.WriteLine($"Loaded {students.Count} professor internship student records");
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading professor internship student data: {ex.Message}");
        }
        StateHasChanged();
    }

    private async Task LoadCompanyThesisApplicantData()
    {
        try 
        {
            // Get all unique student emails from applications
            var studentEmails = companyThesisApplicantsMap.Values
                .SelectMany(x => x)
                .Select(a => a.StudentEmailAppliedForThesis)
                .Distinct()
                .ToList();

            // Load ALL student fields needed for the modal
            var students = await dbContext.Students
                .Where(s => studentEmails.Contains(s.Email.ToLower()))
                .Select(s => new Student {
                    Id = s.Id,
                    Student_UniqueID = s.Student_UniqueID,
                    Email = s.Email,
                    Image = s.Image,
                    Name = s.Name,
                    Surname = s.Surname,
                    Telephone = s.Telephone,
                    PermanentAddress = s.PermanentAddress,
                    PermanentRegion = s.PermanentRegion,
                    PermanentTown = s.PermanentTown,
                    Attachment = s.Attachment,
                    LinkedInProfile = s.LinkedInProfile,
                    PersonalWebsite = s.PersonalWebsite,
                    Transport = s.Transport,
                    RegNumber = s.RegNumber,
                    University = s.University,
                    Department = s.Department,
                    EnrollmentDate = s.EnrollmentDate,
                    StudyYear = s.StudyYear,
                    LevelOfDegree = s.LevelOfDegree,
                    AreasOfExpertise = s.AreasOfExpertise,
                    Keywords = s.Keywords,
                    ExpectedGraduationDate = s.ExpectedGraduationDate,
                    CompletedECTS = s.CompletedECTS
                })
                .AsNoTracking()
                .ToListAsync();

            // Clear and repopulate cache
            //studentDataCache.Clear();
            foreach (var student in students)
            {
                studentDataCache[student.Email.ToLower()] = student;
            }

            Console.WriteLine($"Loaded {students.Count} student records for thesis applicants");
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading thesis applicant student data: {ex.Message}");
        }
    }



    private async Task<Student> GetStudentDetails(string email)
    {
        return await dbContext.Students
            .Where(s => s.Email.ToLower() == email.ToLower()) 
            .Select(s => new Student {
                Id = s.Id,
                Email = s.Email,
                Name = s.Name,
                Surname = s.Surname,
                StudyYear = s.StudyYear,
                Telephone = s.Telephone,
                Student_UniqueID = s.Student_UniqueID,
                RegNumber = s.RegNumber,
                Attachment = s.Attachment
            })
            .AsNoTracking() // Better performance for read-only
            .FirstOrDefaultAsync();
    }

    private async Task<Company> GetCompanyDetails(string email)
    {
        return await dbContext.Companies
            .Where(c => c.CompanyEmail.ToLower() == email.ToLower())
            .Select(c => new Company {
                CompanyEmail = c.CompanyEmail,
                Company_UniqueID = c.Company_UniqueID,
                CompanyLogo = c.CompanyLogo,
                CompanyName = c.CompanyName,
                CompanyShortName = c.CompanyShortName,
                CompanyType = c.CompanyType,
                CompanyActivity = c.CompanyActivity,
                CompanyTelephone = c.CompanyTelephone,
                CompanyWebsite = c.CompanyWebsite,
                CompanyCountry = c.CompanyCountry,
                CompanyLocation = c.CompanyLocation,
                CompanyPC = c.CompanyPC,
                CompanyRegions = c.CompanyRegions,
                CompanyTown = c.CompanyTown,
                CompanyDescription = c.CompanyDescription,
                CompanyAreas = c.CompanyAreas,
                CompanyHRName = c.CompanyHRName,
                CompanyHRSurname = c.CompanyHRSurname,
                CompanyHREmail = c.CompanyHREmail,
                CompanyHRTelephone = c.CompanyHRTelephone,
                CompanyAdminName = c.CompanyAdminName,
                CompanyAdminSurname = c.CompanyAdminSurname,
                CompanyAdminEmail = c.CompanyAdminEmail,
                CompanyAdminTelephone = c.CompanyAdminTelephone
            })
            .AsNoTracking() // Better performance for read-only
            .FirstOrDefaultAsync();
    }

    private async Task<Professor> GetProfessorDetails(string email)
    {
        return await dbContext.Professors
            .Where(p => p.ProfEmail.ToLower() == email.ToLower())
            .Select(p => new Professor {
                Id = p.Id,
                ProfEmail = p.ProfEmail,
                Professor_UniqueID = p.Professor_UniqueID,
                ProfName = p.ProfName,
                ProfSurname = p.ProfSurname,
                ProfUniversity = p.ProfUniversity,
                ProfDepartment = p.ProfDepartment,
                ProfWorkTelephone = p.ProfWorkTelephone,
                ProfPersonalTelephone = p.ProfPersonalTelephone,
                ProfPersonalTelephoneVisibility = p.ProfPersonalTelephoneVisibility,
                ProfPersonalWebsite = p.ProfPersonalWebsite,
                ProfGeneralFieldOfWork = p.ProfGeneralFieldOfWork,
                ProfGeneralSkills = p.ProfGeneralSkills
            })
            .AsNoTracking() // Better performance for read-only
            .FirstOrDefaultAsync();
    }

    private async Task ApplyForJobAsStudent(CompanyJob job)
    {
        // Retrieve the latest job status
        var latestJob = await dbContext.CompanyJobs
            .AsNoTracking()
            .Where(j => j.RNGForPositionUploaded == job.RNGForPositionUploaded)
            .Select(j => new { j.PositionStatus })
            .FirstOrDefaultAsync();

        if (latestJob == null || latestJob.PositionStatus != "Δημοσιευμένη")
        {
            await JS.InvokeVoidAsync("confirmActionWithHTML2", "Η Θέση Εργασίας έχει Αποδημοσιευτεί. Παρακαλώ δοκιμάστε αργότερα.");
            return;
        }

        var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
        var user = authState.User;

        if (!user.Identity.IsAuthenticated) return;

        var student = await GetStudentDetails(user.Identity.Name);
        if (student == null)
        {
            await JS.InvokeVoidAsync("confirmActionWithHTML2", "Δεν βρέθηκαν στοιχεία φοιτητή.");
            return;
        }

        // Check for existing application
        var existingApplication = await dbContext.CompanyJobsApplied
            .FirstOrDefaultAsync(app =>
                app.StudentEmailAppliedForCompanyJob == student.Email &&
                app.RNGForCompanyJobApplied == job.RNGForPositionUploaded);

        if (existingApplication != null)
        {
            await JS.InvokeVoidAsync("confirmActionWithHTML2", $"Έχετε ήδη κάνει αίτηση για: {job.PositionTitle}!");
            return;
        }

        // Get company data
        var company = await dbContext.Companies
            .FirstOrDefaultAsync(c => c.CompanyEmail == job.EmailUsedToUploadJobs);

        if (company == null)
        {
            await JS.InvokeVoidAsync("confirmActionWithHTML2", "Σφάλμα: Δεν βρέθηκε η εταιρία.");
            return;
        }

        using var transaction = await dbContext.Database.BeginTransactionAsync();
        try
        {
            // Create main application with details
            var jobApplication = new CompanyJobApplied
            {
                RNGForCompanyJobApplied = job.RNGForPositionUploaded,
                DateTimeStudentAppliedForCompanyJob = DateTime.UtcNow,
                StudentEmailAppliedForCompanyJob = student.Email,
                StudentUniqueIDAppliedForCompanyJob = student.Student_UniqueID,
                CompanysEmailWhereStudentAppliedForCompanyJob = job.EmailUsedToUploadJobs,
                CompanysUniqueIDWhereStudentAppliedForCompanyJob = company.Company_UniqueID,
                CompanyPositionStatusAppliedAtTheCompanySide = "Σε Επεξεργασία",
                CompanyPositionStatusAppliedAtTheStudentSide = "Σε Επεξεργασία",
                RNGForCompanyJobAppliedAsStudent_HashedAsUniqueID = job.RNGForPositionUploaded_HashedAsUniqueID,
            
                // Let EF Core handle the relationship and IDs
                StudentDetails = new CompanyJobApplied_StudentDetails
                {

                    StudentEmailAppliedForCompanyJob = student.Email,
                    StudentUniqueIDAppliedForCompanyJob = student.Student_UniqueID,
                    DateTimeStudentAppliedForCompanyJob = DateTime.UtcNow,
                    RNGForCompanyJobAppliedAsStudent_HashedAsUniqueID = job.RNGForPositionUploaded_HashedAsUniqueID
                },
            
                CompanyDetails = new CompanyJobApplied_CompanyDetails
                {
                    CompanysEmailWhereStudentAppliedForCompanyJob = job.EmailUsedToUploadJobs,
                    CompanysUniqueIDWhereStudentAppliedForCompanyJob = company.Company_UniqueID
                }
            };

            dbContext.CompanyJobsApplied.Add(jobApplication);
        
            // Add platform action
            dbContext.PlatformActions.Add(new PlatformActions
            {
                UserRole_PerformedAction = "STUDENT",
                ForWhat_PerformedAction = "COMPANY_JOB",
                HashedPositionRNG_PerformedAction = HashingHelper.HashLong(job.RNGForPositionUploaded),
                TypeOfAction_PerformedAction = "APPLY",
                DateTime_PerformedAction = DateTime.UtcNow
            });

            await dbContext.SaveChangesAsync();
            await transaction.CommitAsync();

            // Send emails
            try
            {
                // Make sure Company is loaded (if not already included in the query)
                if (job.Company == null)
                {
                    await dbContext.Entry(job)
                        .Reference(j => j.Company)
                        .LoadAsync();
                }

                await InternshipEmailService.SendJobApplicationConfirmationToStudent(
                    student.Email, student.Name, student.Surname,
                    job.PositionTitle, job.RNGForPositionUploaded_HashedAsUniqueID, 
                    job.Company?.CompanyName); // Get company name from navigation property

                await InternshipEmailService.SendJobApplicationNotificationToCompany(
                    job.EmailUsedToUploadJobs, job.Company?.CompanyName, // Get company name from navigation property
                    student.Name, student.Surname, student.Email,
                    student.Telephone, student.StudyYear, student.Attachment,
                    job.RNGForPositionUploaded_HashedAsUniqueID, job.PositionTitle);
            }
            catch (Exception ex)
            {
                Console.WriteLine($"Email error: {ex.Message}");
            }

            await JS.InvokeVoidAsync("confirmActionWithHTML2", 
                $"Η αίτηση για {job.PositionTitle} υποβλήθηκε επιτυχώς!");
        }
        catch (Exception ex)
        {
            await transaction.RollbackAsync();
            Console.WriteLine($"Full error: {ex.ToString()}"); // Log full error
            await JS.InvokeVoidAsync("confirmActionWithHTML2", 
                $"Σφάλμα κατά την υποβολή: {ex.InnerException?.Message ?? ex.Message}");
        }

        await RefreshStudentData();
        NavigationManager.NavigateTo(NavigationManager.Uri, forceLoad: true);
    }


    private async Task UploadJobAsCompany(bool publishJob = false)
    {
        try
        {
            var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
            var user = authState.User;
            var userEmail = user.FindFirst("name")?.Value;

            if (!string.IsNullOrEmpty(userEmail))
            {
                var company = await dbContext.Companies.FirstOrDefaultAsync(c => c.CompanyEmail == userEmail);
                if (company != null)
                {
                    companyName = company.CompanyName;
                }
            }

            // Check each required field and scroll to it if it is missing
            if (string.IsNullOrWhiteSpace(job.PositionType))
            {
                showErrorMessageforUploadingjobsAsCompany = true;
                await JS.InvokeVoidAsync("scrollToElementById", "positionType");
                return;
            }

            if (job.PositionActivePeriod.Date <= DateTime.Today)
            {
                showErrorMessageforUploadingjobsAsCompany = true;
                await JS.InvokeVoidAsync("scrollToElementById", "positionActivePeriod");
                return;
            }

            if (string.IsNullOrWhiteSpace(job.PositionTitle))
            {
                showErrorMessageforUploadingjobsAsCompany = true;
                await JS.InvokeVoidAsync("scrollToElementById", "positionTitle");
                return;
            }

            if (string.IsNullOrWhiteSpace(job.PositionContactPerson))
            {
                showErrorMessageforUploadingjobsAsCompany = true;
                await JS.InvokeVoidAsync("scrollToElementById", "positionContactPerson");
                return;
            }

            if (string.IsNullOrWhiteSpace(job.PositionPerifereiaLocation))
            {
                showErrorMessageforUploadingjobsAsCompany = true;
                await JS.InvokeVoidAsync("scrollToElementById", "positionPerifereia");
                return;
            }

            if (string.IsNullOrWhiteSpace(job.PositionDimosLocation))
            {
                showErrorMessageforUploadingjobsAsCompany = true;
                await JS.InvokeVoidAsync("scrollToElementById", "positionDimos");
                return;
            }

            if (string.IsNullOrWhiteSpace(job.PositionDescription))
            {
                showErrorMessageforUploadingjobsAsCompany = true;
                await JS.InvokeVoidAsync("scrollToElementById", "positionDescription");
                return;
            }

            if (string.IsNullOrWhiteSpace(job.PositionAddressLocation))
            {
                showErrorMessageforUploadingjobsAsCompany = true;
                await JS.InvokeVoidAsync("scrollToElementById", "positionAddress");
                return;
            }

            if (!SelectedAreasWhenUploadJobAsCompany.Any())
            {
                showErrorMessageforUploadingjobsAsCompany = true;
                await JS.InvokeVoidAsync("scrollToElementById", "positionAreas");
                return;
            }

            // All validations passed - proceed with saving
            job.RNGForPositionUploaded = new Random().NextInt64();
            job.RNGForPositionUploaded_HashedAsUniqueID = HashingHelper.HashLong(job.RNGForPositionUploaded);
            job.EmailUsedToUploadJobs = userEmail; // This links to the Company via CompanyEmail
            job.UploadDateTime = DateTime.Now;
            job.PositionForeas = companyData.CompanyType;
            job.PositionAreas = string.Join(",", SelectedAreasWhenUploadJobAsCompany.Select(a => a.AreaName));
            job.PositionStatus = publishJob ? "Δημοσιευμένη" : "Μη Δημοσιευμένη";

            // No need to set CompanyNameUploadJob as it's now handled via the Company relation

            dbContext.CompanyJobs.Add(job);
            await dbContext.SaveChangesAsync();

            showSuccessMessage = true;
            showErrorMessageforUploadingjobsAsCompany = false;

            // Clear form fields
            job = new CompanyJob();
            SelectedAreasWhenUploadJobAsCompany.Clear();
            StateHasChanged();
        }
        catch (Exception ex)
        {
            showSuccessMessage = false;
            showErrorMessagesForAreasWhenUploadJobAsCompany = false;
            showErrorMessageforUploadingjobsAsCompany = true;
            Console.WriteLine($"Error uploading job: {ex.Message}");
        }
        StateHasChanged();
        NavigationManager.NavigateTo(NavigationManager.Uri, forceLoad: true);
    }

    private async Task UploadThesisAsCompany(bool publishThesis = false)
    {
        try
        {
            // Initial debug logging
            Console.WriteLine("=== INITIAL FIELD VALUES ===");
            LogCurrentThesisState();
            Console.WriteLine("===========================");

            var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
            var user = authState.User;
            var userEmail = user.FindFirst("name")?.Value;

            if (!string.IsNullOrEmpty(userEmail))
            {
                var company = await dbContext.Companies.FirstOrDefaultAsync(c => c.CompanyEmail == userEmail);
                if (company != null)
                {
                    companyName = company.CompanyName;
                }
            }

            // Update collections before validation
            thesis.CompanyThesisSkillsNeeded = string.Join(",", SelectedSkillsWhenUploadThesisAsCompany.Select(a => a.SkillName));
            thesis.CompanyThesisAreasUpload = string.Join(",", SelectedAreasWhenUploadThesisAsCompany.Select(a => a.AreaName));

            // Debug logging before validation
            Console.WriteLine("=== FIELD VALUES BEFORE VALIDATION ===");
            LogCurrentThesisState();
            Console.WriteLine("=====================================");

            // Validation checks
            if (string.IsNullOrWhiteSpace(thesis.CompanyThesisTitle))
            {
                await HandleValidationError("companyThesisTitle");
                return;
            }

            if (string.IsNullOrWhiteSpace(thesis.CompanyThesisDescriptionsUploaded))
            {
                await HandleValidationError("CompanyThesisDescription");
                return;
            }

            if (string.IsNullOrWhiteSpace(thesis.CompanyThesisCompanySupervisorFullName))
            {
                await HandleValidationError("CompanyThesisCompanySupervisorFullName");
                return;
            }

            if (string.IsNullOrWhiteSpace(thesis.CompanyThesisContactPersonEmail))
            {
                await HandleValidationError("thesisContactPersonEmail");
                return;
            }

            if (thesis.CompanyThesisStartingDate.Date <= DateTime.Today)
            {
                await HandleValidationError("CompanyThesisStartingDate");
                return;
            }

            if (!SelectedAreasWhenUploadThesisAsCompany.Any() || string.IsNullOrWhiteSpace(thesis.CompanyThesisAreasUpload))
            {
                await HandleValidationError("toggleCheckboxesForThesisAreas");
                return;
            }

            if (!SelectedSkillsWhenUploadThesisAsCompany.Any() || string.IsNullOrWhiteSpace(thesis.CompanyThesisSkillsNeeded))
            {
                await HandleValidationError("toggleCheckboxesForThesisSkills");
                return;
            }

            // Final debug logging before save
            Console.WriteLine("=== FINAL VALUES BEFORE SAVE ===");
            LogCurrentThesisState();
            Console.WriteLine("===============================");

            // Prepare thesis for saving
            thesis.RNGForThesisUploadedAsCompany = new Random().NextInt64();
            thesis.RNGForThesisUploadedAsCompany_HashedAsUniqueID = HashingHelper.HashLong(thesis.RNGForThesisUploadedAsCompany);
            thesis.CompanyEmailUsedToUploadThesis = userEmail;  // This is now the foreign key
            thesis.CompanyThesisUploadDateTime = DateTime.Now;
            thesis.ThesisType = ThesisType.Company;
            thesis.IsProfessorInteresetedInCompanyThesis = false;
            thesis.IsProfessorInterestedInCompanyThesisStatus = "Δεν έχει γίνει Αποδοχή";
            thesis.CompanyThesisStatus = publishThesis ? "Δημοσιευμένη" : "Μη Δημοσιευμένη";

            // Save changes
            Console.WriteLine("Before saving changes...");
            dbContext.CompanyTheses.Add(thesis);

            // Log entity states
            var entries = dbContext.ChangeTracker.Entries();
            foreach (var entry in entries)
            {
                Console.WriteLine($"{entry.Entity.GetType().Name} - {entry.State}");
            }

            await dbContext.SaveChangesAsync();
            Console.WriteLine("After saving changes...");

            showSuccessMessage = true;
            showErrorMessageforUploadingthesisAsCompany = false;

            // Clear form fields
            thesis = new CompanyThesis();
            Areas.Clear();
            Skills.Clear();
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error uploading thesis: {ex.Message}");
            Console.WriteLine($"Stack Trace: {ex.StackTrace}");
            showSuccessMessage = false;
            showErrorMessagesForSkillsWhenUploadThesisAsCompany = true;
            showErrorMessageforUploadingthesisAsCompany = true;
        }

        NavigationManager.NavigateTo(NavigationManager.Uri, forceLoad: true);
        StateHasChanged();
    }

    // Helper method to log current thesis state
    private void LogCurrentThesisState()
    {
        Console.WriteLine($"Title: '{thesis?.CompanyThesisTitle}' (null/empty: {string.IsNullOrWhiteSpace(thesis?.CompanyThesisTitle)})");
        Console.WriteLine($"Description: '{thesis?.CompanyThesisDescriptionsUploaded}' (null/empty: {string.IsNullOrWhiteSpace(thesis?.CompanyThesisDescriptionsUploaded)})");
        Console.WriteLine($"Supervisor: '{thesis?.CompanyThesisCompanySupervisorFullName}' (null/empty: {string.IsNullOrWhiteSpace(thesis?.CompanyThesisCompanySupervisorFullName)})");
        Console.WriteLine($"Contact Email: '{thesis?.CompanyThesisContactPersonEmail}' (null/empty: {string.IsNullOrWhiteSpace(thesis?.CompanyThesisContactPersonEmail)})");
        Console.WriteLine($"Starting Date: {thesis?.CompanyThesisStartingDate} (valid: {thesis?.CompanyThesisStartingDate.Date > DateTime.Today})");
        Console.WriteLine($"Areas: '{thesis?.CompanyThesisAreasUpload}' (count: {SelectedAreasWhenUploadThesisAsCompany?.Count})");
        Console.WriteLine($"Skills: '{thesis?.CompanyThesisSkillsNeeded}' (count: {SelectedSkillsWhenUploadThesisAsCompany?.Count})");
    }

    // Helper method to handle validation errors
    private async Task HandleValidationError(string elementId)
    {
        showErrorMessageforUploadingthesisAsCompany = true;
        await JS.InvokeVoidAsync("scrollToElementById", elementId);
        Console.WriteLine($"Validation failed for element: {elementId}");
    }




    private async Task UploadInternshipAsCompany()
    {
        try
        {
            // All validation checks remain exactly the same
            if (string.IsNullOrWhiteSpace(companyInternship.CompanyInternshipTitle))
            {
                showErrorMessage = true;
                await JS.InvokeVoidAsync("scrollToElementById", "positionTitle");
                return;
            }

            if (string.IsNullOrWhiteSpace(companyInternship.CompanyInternshipType))
            {
                showErrorMessage = true;
                await JS.InvokeVoidAsync("scrollToElementById", "internshipType");
                return;
            }

            if (companyInternship.CompanyInternshipActivePeriod.Date <= DateTime.Today)
            {
                showErrorMessage = true;
                await JS.InvokeVoidAsync("scrollToElementById", "internshipActivePeriod");
                return;
            }

            if (companyInternship.CompanyInternshipFinishEstimation.Date <= DateTime.Today)
            {
                showErrorMessage = true;
                await JS.InvokeVoidAsync("scrollToElementById", "internshipFinishEstimation");
                return;
            }

            if (string.IsNullOrWhiteSpace(companyInternship.CompanyInternshipESPA))
            {
                showErrorMessage = true;
                await JS.InvokeVoidAsync("scrollToElementById", "internshipESPA");
                return;
            }

            if (string.IsNullOrWhiteSpace(companyInternship.CompanyInternshipContactPerson))
            {
                showErrorMessage = true;
                await JS.InvokeVoidAsync("scrollToElementById", "internshipContactPerson");
                return;
            }

            if (string.IsNullOrWhiteSpace(companyInternship.CompanyInternshipContactTelephonePerson))
            {
                showErrorMessage = true;
                await JS.InvokeVoidAsync("scrollToElementById", "internshipContactPhone");
                return;
            }

            if (string.IsNullOrWhiteSpace(companyInternship.CompanyInternshipPerifereiaLocation))
            {
                showErrorMessage = true;
                await JS.InvokeVoidAsync("scrollToElementById", "internshipPerifereia");
                return;
            }

            if (string.IsNullOrWhiteSpace(companyInternship.CompanyInternshipDimosLocation))
            {
                showErrorMessage = true;
                await JS.InvokeVoidAsync("scrollToElementById", "internshipDimos");
                return;
            }

            if (string.IsNullOrWhiteSpace(companyInternship.CompanyInternshipPostalCodeLocation))
            {
                showErrorMessage = true;
                await JS.InvokeVoidAsync("scrollToElementById", "internshipPostalCode");
                return;
            }

            if (string.IsNullOrWhiteSpace(companyInternship.CompanyInternshipDescription))
            {
                showErrorMessage = true;
                await JS.InvokeVoidAsync("scrollToElementById", "internshipDescription");
                return;
            }

            if (!SelectedAreasWhenUploadInternshipAsCompany.Any())
            {
                showErrorMessagesForAreasWhenUploadInternshipAsCompany = true;
                await JS.InvokeVoidAsync("scrollToElementById", "internshipAreas");
                return;
            }

            // Updated property names and added navigation property
            companyInternship.RNGForInternshipUploadedAsCompany = new Random().NextInt64();
            companyInternship.RNGForInternshipUploadedAsCompany_HashedAsUniqueID = 
                HashingHelper.HashLong(companyInternship.RNGForInternshipUploadedAsCompany);
            companyInternship.CompanyEmailUsedToUploadInternship = companyData.CompanyEmail;
        
            // Set the Company navigation property
            companyInternship.Company = await dbContext.Companies
                .FirstOrDefaultAsync(c => c.CompanyEmail == companyData.CompanyEmail);

            // Keep all other assignments exactly the same
            companyInternship.CompanyInternshipUploadDate = DateTime.Now;
            companyInternship.CompanyInternshipForeas = companyData.CompanyType;
            companyInternship.CompanyInternshipType = companyInternship.CompanyInternshipType;
            companyInternship.CompanyInternshipESPA = companyInternship.CompanyInternshipESPA;
            companyInternship.CompanyInternshipActivePeriod = companyInternship.CompanyInternshipActivePeriod;
            companyInternship.CompanyInternshipFinishEstimation = companyInternship.CompanyInternshipFinishEstimation;
            companyInternship.CompanyInternshipTitle = companyInternship.CompanyInternshipTitle;
            companyInternship.CompanyInternshipContactPerson = companyInternship.CompanyInternshipContactPerson;
            companyInternship.CompanyInternshipContactTelephonePerson = companyInternship.CompanyInternshipContactTelephonePerson;
            companyInternship.CompanyInternshipPerifereiaLocation = companyInternship.CompanyInternshipPerifereiaLocation;
            companyInternship.CompanyInternshipDimosLocation = companyInternship.CompanyInternshipDimosLocation;
            companyInternship.CompanyInternshipPostalCodeLocation = companyInternship.CompanyInternshipPostalCodeLocation;
            companyInternship.CompanyInternshipTransportOffer = companyInternship.CompanyInternshipTransportOffer;
            companyInternship.CompanyInternshipAreas = string.Join(",", SelectedAreasWhenUploadInternshipAsCompany.Select(a => a.AreaName));
            companyInternship.CompanyInternshipDescription = companyInternship.CompanyInternshipDescription;

            // EKPA supervisor logic remains exactly the same
            if (selectedProfessorId.HasValue)
            {
                var professor = await dbContext.Professors
                    .FirstOrDefaultAsync(p => p.Id == selectedProfessorId.Value);

                if (professor != null)
                {
                    companyInternship.CompanyInternshipEKPASupervisor = $"{professor.ProfName} {professor.ProfSurname}";
                }
                else
                {
                    companyInternship.CompanyInternshipEKPASupervisor = "Unknown Professor";
                }
            }
            else
            {
                companyInternship.CompanyInternshipEKPASupervisor = "Χωρίς Προτίμηση";
            }

            companyInternship.CompanyUploadedInternshipStatus = companyInternship.CompanyUploadedInternshipStatus;
            companyInternship.CompanyInternshipAttachment = companyInternship.CompanyInternshipAttachment;

            dbContext.CompanyInternships.Add(companyInternship);
            await dbContext.SaveChangesAsync();

            showSuccessMessageWhenSaveInternshipAsCompany = true;
            showErrorMessage = false;
            showErrorMessagesForAreasWhenUploadInternshipAsCompany = false;

            companyInternship = new CompanyInternship();
            SelectedAreasWhenUploadInternshipAsCompany.Clear();
            StateHasChanged();
            NavigationManager.NavigateTo(NavigationManager.Uri, forceLoad: true);
        }
        catch (Exception ex)
        {
            showSuccessMessageWhenSaveInternshipAsCompany = false;
            showErrorMessagesForAreasWhenUploadInternshipAsCompany = true;
            showErrorMessage = true;
            Console.WriteLine($"Error uploading internship: {ex.Message}");
        }
    }



    private async Task HandleFileSelected(InputFileChangeEventArgs e)
    {
        var file = e.File;
        if (file != null && file.ContentType == "application/pdf")
        {
            using var ms = new MemoryStream();
            await file.OpenReadStream().CopyToAsync(ms); // Copy file stream to memory stream
            job.PositionAttachment = ms.ToArray(); // Convert memory stream to byte array
        }
    }

    private async Task HandleFileSelectedForCompanyThesisAttachment(InputFileChangeEventArgs e)
    {
        var file = e.File;
        if (file != null && file.ContentType == "application/pdf")
        {
            using var ms = new MemoryStream();
            await file.OpenReadStream().CopyToAsync(ms); // Copy file stream to memory stream
            thesis.CompanyThesisAttachmentUpload = ms.ToArray(); // Convert memory stream to byte array
        }
    }

    private async Task HandleFileSelectedForAnnouncementAttachment(InputFileChangeEventArgs e)
    {
        var file = e.File;
        if (file != null && file.ContentType == "application/pdf")
        {
            using var ms = new MemoryStream();
            await file.OpenReadStream().CopyToAsync(ms); // Copy file stream to memory stream
            announcement.CompanyAnnouncementAttachmentFile = ms.ToArray(); // Convert memory stream to byte array
        }
    }

    private async Task HandleFileSelectedForAnnouncementAttachmentAsProfessor(InputFileChangeEventArgs e)
    {
        var file = e.File;
        if (file != null && file.ContentType == "application/pdf")
        {
            using var ms = new MemoryStream();
            await file.OpenReadStream().CopyToAsync(ms); // Copy file stream to memory stream
            professorannouncement.ProfessorAnnouncementAttachmentFile = ms.ToArray(); // Convert memory stream to byte array
        }
    }

//SOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSO AYTO EDW LEITOURGEI KANONIKA. THA KANW TO IDIO GIA OLA TA ATTACHMENTS KAI EDW KAI STON HOST KAI STO ANEVASMA GIA KA8E ARXEIO 8ELEI ALLAGI SOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSO

    private async Task HandleFileSelectedForThesisAttachmentAsProfessor(InputFileChangeEventArgs e)
    {
        var file = e.File;
        if (file != null && file.ContentType == "application/pdf")
        {
            using var ms = new MemoryStream();
            await file.OpenReadStream().CopyToAsync(ms); // Copy file stream to memory stream
            professorthesis.ThesisAttachment = ms.ToArray(); // Convert memory stream to byte array
        }
    }
//SOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSO AYTO EDW LEITOURGEI KANONIKA. THA KANW TO IDIO GIA OLA TA ATTACHMENTS KAI EDW KAI STON HOST KAI STO ANEVASMA GIA KA8E ARXEIO 8ELEI ALLAGI SOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSO



    private async Task HandleFileSelectedForUploadInternshipAsCompany(InputFileChangeEventArgs e)
    {
        var file = e.File;
        if (file != null && file.ContentType == "application/pdf")
        {
            using var ms = new MemoryStream();
            await file.OpenReadStream().CopyToAsync(ms); // Copy file stream to memory stream
            companyInternship.CompanyInternshipAttachment = ms.ToArray(); // Convert memory stream to byte array
        }
    }

    private void ToggleFormVisibilityForUploadCompanyJobs()
    {
        isForm1Visible = !isForm1Visible;
        StateHasChanged();
    }

    private void ToggleFormVisibilityForUploadCompanyAnnouncements()
    {
        isAnnouncementsFormVisible = !isAnnouncementsFormVisible;
        StateHasChanged();
    }

    private void ToggleFormVisibilityToShowGeneralAnnouncementsAndEventsAsCompany()
    {
        isAnnouncementsFormVisibleToShowGeneralAnnouncementsAndEventsAsCompany = !isAnnouncementsFormVisibleToShowGeneralAnnouncementsAndEventsAsCompany;
        StateHasChanged();
    }

    private void ToggleFormVisibilityToShowGeneralAnnouncementsAndEventsAsRG()
    {
        isAnnouncementsFormVisibleToShowGeneralAnnouncementsAndEventsAsRG = !isAnnouncementsFormVisibleToShowGeneralAnnouncementsAndEventsAsRG;
        StateHasChanged();
    }

    private void ToggleFormVisibilityForUploadProfessorAnnouncements()
    {
        isProfessorAnnouncementsFormVisible = !isProfessorAnnouncementsFormVisible;
        StateHasChanged();
    }

    private void ToggleFormVisibilityForUploadProfessorThesis()
    {
        isProfessorThesisFormVisible = !isProfessorThesisFormVisible;
        StateHasChanged();
    }

    private void ToggleFormVisibilityForUploadProfessorInternship()
    {
        isProfessorInternshipFormVisible = !isProfessorInternshipFormVisible;
        StateHasChanged();
    }

    private void ToggleFormVisibilityForSearchStudentAsProfessor()
    {
        isProfessorSearchStudentFormVisible = !isProfessorSearchStudentFormVisible;
        StateHasChanged();
    }

    private void ToggleFormVisibilityForSearchCompanyAsProfessor()
    {
        isProfessorSearchCompanyFormVisible = !isProfessorSearchCompanyFormVisible;
        StateHasChanged();
    }

    private void ToggleFormVisibilityForSearchCompanyAsRG()
    {
        isRGSearchCompanyFormVisible = !isRGSearchCompanyFormVisible;
        StateHasChanged();
    }

    private async Task ToggleFormVisibilityToShowMyActiveJobsAsCompany()
    {
        isForm2Visible = !isForm2Visible;
        if (isForm2Visible)
        {
            
            await LoadJobs(); // Ensure jobs are loaded when the form is shown
        }
        StateHasChanged();

    }

    private async Task ToggleFormVisibilityToShowMyActiveThesesAsCompany()
    {
        isShowActiveThesesAsCompanyFormVisible = !isShowActiveThesesAsCompanyFormVisible;
        if (isShowActiveThesesAsCompanyFormVisible)
        {
            
            await LoadThesesAsCompany(); // Ensure jobs are loaded when the form is shown
        }
        StateHasChanged();

    }


    private async Task TogglePositionDetails(CompanyJob position)
    {
        if (positionDetails.ContainsKey(position.Id))
        {
            positionDetails[position.Id] = !positionDetails[position.Id];           

        }
        else
        {
            positionDetails[position.Id] = true; // Default to true if not found
        }
       await LoadWhoApplied(position.RNGForPositionUploaded);
       StateHasChanged();
    }

    private async Task DeleteJobPosition(int jobId)
    {
        // Show custom confirmation dialog with HTML styling
        bool isConfirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML", new object[] { 
            "Πρόκειται να διαγράψετε οριστικά αυτή τη Θέση Εργασίας. <br>" +
            "<strong style='color: red;'>Η ενέργεια αυτή είναι μη αναστρέψιμη!</strong>"
        });

        // Proceed only if confirmed
        if (isConfirmed)
        {
            var job = await dbContext.CompanyJobs.FindAsync(jobId);
            if (job != null)
            {
                dbContext.CompanyJobs.Remove(job);
                await dbContext.SaveChangesAsync();
                await LoadJobs(); // Reload the jobs list
            }
            StateHasChanged();
            NavigationManager.NavigateTo(NavigationManager.Uri, forceLoad: true);
        }
    }




    private async Task DeleteCompanyThesis(int companythesisId)
    {
        // Show custom confirmation dialog with HTML styling
        bool isConfirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML", new object[] { 
            "Πρόκειται να διαγράψετε οριστικά αυτή τη Πτυχιακή Εργασία. <br>" +
            "<strong style='color: red;'>Η ενέργεια αυτή είναι μη αναστρέψιμη!</strong>"
        });

        // Proceed only if confirmed
        if (isConfirmed)
        {
            var companytheses = await dbContext.CompanyTheses.FindAsync(companythesisId);
            if (companytheses != null)
            {
                dbContext.CompanyTheses.Remove(companytheses);
                await dbContext.SaveChangesAsync();
                await LoadThesesAsCompany(); // Reload the theses list
            }
            StateHasChanged();
            NavigationManager.NavigateTo(NavigationManager.Uri, forceLoad: true);
        }
    }



    private void EditJobPosition(int positionId)
    {
        // Check if 'companyJobs' is not null before attempting to access it
        if (jobs == null)
        {
            Console.WriteLine("The companyJobs list is null.");
            return;
        }

        // Find the job to edit
        var jobToEdit = jobs.FirstOrDefault(j => j.Id == positionId);
        if (jobToEdit != null)
        {
            isEditPopupVisibleForJobs = true;
            // Set the job object to be edited
            job = jobToEdit;
            // Perform any additional logic needed for editing in the same component
            // For example, setting flags or triggering UI updates
            isEditing = true;
            StateHasChanged();

        }
        else
        {
            // Handle the case when the job position with the given positionId is not found
            Console.WriteLine($"Job position with ID {positionId} not found.");
        }
    }


    private async Task DownloadAttachmentForCompanyJobs(int jobId)
    {
        var job = await dbContext.CompanyJobs.FindAsync(jobId);
        if (job != null && job.PositionAttachment != null)
        {
            var fileName = $"{job.PositionTitle}_Attachment.pdf"; // Ensure file name ends with .pdf
            var mimeType = "application/pdf"; // Correct MIME type for PDF
            await JS.InvokeVoidAsync("BlazorDownloadAttachmentPositionFile", fileName, mimeType, job.PositionAttachment);
        }
    }


    private async Task DownloadAttachmentForCompanyTheses(int companyThesisId)
    {
        var companythesis = await dbContext.CompanyTheses.FindAsync(companyThesisId);
        if (companythesis != null && companythesis.CompanyThesisAttachmentUpload != null)
        {
            var fileName = $"{companythesis.CompanyThesisTitle}_Attachment";
            var mimeType = "application/octet-stream"; // or set the appropriate MIME type if known
            var fileContent = new byte[companythesis.CompanyThesisAttachmentUpload.Length];
            companythesis.CompanyThesisAttachmentUpload.CopyTo(fileContent, 0);
            await JS.InvokeVoidAsync("BlazorDownloadAttachmentPositionFile", fileName, mimeType, fileContent);
        }
    }

    //SOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSO AYTO EDW LEITOURGEI KANONIKA. THA KANW TO IDIO GIA OLA TA ATTACHMENTS KAI EDW KAI STON HOST KAI STO ANEVASMA GIA KA8E ARXEIO 8ELEI ALLAGI SOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSO
    private async Task DownloadAttachmentForProfessorTheses(int professorThesisId)
    {
        var professorThesis = await dbContext.ProfessorTheses.FindAsync(professorThesisId);
        if (professorThesis != null && professorThesis.ThesisAttachment != null)
        {
            // Use the ThesisTitle for file naming and ensure .pdf extension
            var fileName = $"{professorThesis.ThesisTitle}_Attachment.pdf"; 
            var mimeType = "application/pdf"; 

            // Convert byte array to base64 string for JavaScript
            var fileContentBase64 = Convert.ToBase64String(professorThesis.ThesisAttachment); 
        
            // Invoke the JavaScript download function
            await JS.InvokeVoidAsync("BlazorDownloadAttachmentProfessorThesisFile", fileName, mimeType, fileContentBase64);
            Console.WriteLine($"File Size: {professorThesis.ThesisAttachment.Length}");

        }
    }
    //SOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSO AYTO EDW LEITOURGEI KANONIKA. THA KANW TO IDIO GIA OLA TA ATTACHMENTS KAI EDW KAI STON HOST KAI STO ANEVASMA GIA KA8E ARXEIO 8ELEI ALLAGI SOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSOSO





    private async Task DownloadAttachmentForCompanyInternships(int internshipId)
    {
        var internship = await dbContext.CompanyInternships.FindAsync(internshipId);
        if (internship != null && internship.CompanyInternshipAttachment != null)
        {
            var fileName = $"{internship.CompanyInternshipTitle}_Attachment.pdf"; // Ensure file name ends with .pdf
            var mimeType = "application/pdf"; // Correct MIME type for PDF
            await JS.InvokeVoidAsync("BlazorDownloadAttachmentPositionFile", fileName, mimeType, internship.CompanyInternshipAttachment);
        }
    }

    private async Task DownloadAttachmentForProfessorInternships(int internshipId)
    {
        var internship = await dbContext.ProfessorInternships.FindAsync(internshipId);
        if (internship != null && internship.ProfessorInternshipAttachment != null)
        {
            var fileName = $"{internship.ProfessorInternshipTitle}_Attachment.pdf"; // Ensure file name ends with .pdf
            var mimeType = "application/pdf"; // Correct MIME type for PDF
            await JS.InvokeVoidAsync("BlazorDownloadAttachmentPositionFile", fileName, mimeType, internship.ProfessorInternshipAttachment);
        }
    }


    private async Task UpdateJob()
    {
        try
        {
            dbContext.CompanyJobs.Update(job);
            job.TimesUpdated++;
            job.UpdateDateTime = DateTime.Now;
            await dbContext.SaveChangesAsync();


            showSuccessUpdateMessage = true;
            showErrorMessage = false;
        }
        catch (Exception)
        {
            showSuccessMessage = false;
            showErrorMessage = true;
            showSuccessUpdateMessage = false;
        }
        StateHasChanged();
        NavigationManager.NavigateTo(NavigationManager.Uri, forceLoad: true);

    }

    private async Task UpdateCompanyThesis()
    {
        try
        {
            dbContext.CompanyJobs.Update(job);
            job.TimesUpdated++;
            job.UpdateDateTime = DateTime.Now;
            await dbContext.SaveChangesAsync();


            showSuccessUpdateMessage = true;
            showErrorMessage = false;
        }
        catch (Exception)
        {
            showSuccessMessage = false;
            showErrorMessage = true;
            showSuccessUpdateMessage = false;
        }
        StateHasChanged();
        NavigationManager.NavigateTo(NavigationManager.Uri, forceLoad: true);

    }

    private async Task LoadUserApplications()
    {
        try
        {
            var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
            var user = authState.User;

            if (user.Identity.IsAuthenticated)
            {
                var userEmail = user.FindFirst("name")?.Value;
                if (!string.IsNullOrEmpty(userEmail))
                {
                    showApplications = true;
                
                    // Retrieve applications using email + unique ID instead of registration number
                    jobApplications = await dbContext.CompanyJobsApplied
                        .Where(j => j.StudentEmailAppliedForCompanyJob == userEmail && 
                                   j.StudentUniqueIDAppliedForCompanyJob == userData.Student_UniqueID)
                        .OrderByDescending(j => j.DateTimeStudentAppliedForCompanyJob)
                        .ToListAsync();

                    StateHasChanged();
                }
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading applications: {ex.Message}");
            StateHasChanged();
        }
    }

    private async Task LoadWhoApplied(long rngForPositionUploaded)
    {
        try
        {
            var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
            var user = authState.User;

            if (user.Identity.IsAuthenticated)
            {
                var companyEmail = user.FindFirst("name")?.Value;
            
                if (!string.IsNullOrEmpty(companyEmail))
                {
                    jobApplicationsmadeToCompany = await dbContext.CompanyJobsApplied
                        .Include(a => a.StudentDetails)
                        .Include(a => a.CompanyDetails)
                        .Where(j => j.CompanysEmailWhereStudentAppliedForCompanyJob == companyEmail &&
                                   j.RNGForCompanyJobApplied == rngForPositionUploaded)
                        .OrderByDescending(j => j.DateTimeStudentAppliedForCompanyJob)
                        .ToListAsync();

                    StateHasChanged();
                }
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading applications: {ex.Message}");
            StateHasChanged();
        }
    }


    private async Task AcceptApplicationAsCompany(CompanyJobApplied application)
    {
        try
        {
            using var transaction = await dbContext.Database.BeginTransactionAsync();

            // Update status in the main entity (since status fields were moved there)
            application.CompanyPositionStatusAppliedAtTheCompanySide = "Έχετε Αποδεχτεί";
            application.CompanyPositionStatusAppliedAtTheStudentSide = "Επιτυχής";

            await dbContext.SaveChangesAsync();
            await transaction.CommitAsync();

            // Get required data for email
            var studentName = $"{userData.Name} {userData.Surname}";
            var positionTitle = companyjobb.PositionTitle;
            var companyName = companyData.CompanyName;

            // Send acceptance email
            var emailService = new InternshipEmailService(
                "kleapali70@gmail.com",
                "mbyuqdgdyrvtefan",
                "kleapali69@hotmail.com"
            );

            await emailService.SendVerificationEmail(
                application.StudentEmailAppliedForCompanyJob,
                studentName,
                positionTitle,
                companyName);

            await JS.InvokeVoidAsync("alert", 
                $"Application accepted and notification sent to {application.StudentEmailAppliedForCompanyJob}");
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error accepting application: {ex.Message}");
            await JS.InvokeVoidAsync("alert", "Error processing application acceptance.");
        }
    }

    private async Task RejectApplicationAsCompany(CompanyJobApplied application)
    {
        try
        {
            using var transaction = await dbContext.Database.BeginTransactionAsync();

            // Update status in the main entity (since status fields were moved there)
            application.CompanyPositionStatusAppliedAtTheCompanySide = "Έχει Απορριφθεί";
            application.CompanyPositionStatusAppliedAtTheStudentSide = "Απορρίφθηκε";

            await dbContext.SaveChangesAsync();
            await transaction.CommitAsync();

            // Get required data for email
            var studentName = $"{userData.Name} {userData.Surname}";
            var positionTitle = companyjobb.PositionTitle;
            var companyName = companyData.CompanyName;

            // Send rejection email
            var emailService = new InternshipEmailService(
                "kleapali70@gmail.com",
                "mbyuqdgdyrvtefan",
                "kleapali69@hotmail.com"
            );

            await emailService.SendRejectionEmail(
                application.StudentEmailAppliedForCompanyJob,
                studentName,
                positionTitle,
                companyName);

            await JS.InvokeVoidAsync("alert", 
                $"Application rejected and notification sent to {application.StudentEmailAppliedForCompanyJob}");
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error rejecting application: {ex.Message}");
            await JS.InvokeVoidAsync("alert", "Error processing application rejection.");
        }
    }

    private async Task ToggleDoughnutChart()
    {
        isDoughnutChartVisible = !isDoughnutChartVisible;
        if (isDoughnutChartVisible)
        {
            await JS.InvokeVoidAsync("showDoughnutChart", "doughnutChart");
        }
        else
        {
            await JS.InvokeVoidAsync("hideDoughnutChart", "doughnutChart");
        }
    }

    private async Task ToggleDepartmentDistributionChart()
    {
        isDepartmentDistributionChartVisible = !isDepartmentDistributionChartVisible;
        if (isDepartmentDistributionChartVisible)
        {
            await JS.InvokeVoidAsync("showDoughnutChart", "departmentDistributionChart");
        }
        else
        {
            await JS.InvokeVoidAsync("hideDoughnutChart", "departmentDistributionChart");
        }
    }

    private async Task LoadSkillDistributionAsync()
    {
        var students = await dbContext.Students.ToListAsync();
        foreach (var student in students)
        {
            var keywords = student.Keywords.Split(',');
            foreach (var keyword in keywords)
            {
                var trimmedKeyword = keyword.Trim();
                if (skillDistribution.ContainsKey(trimmedKeyword))
                {
                    skillDistribution[trimmedKeyword]++;
                }
                else
                {
                    skillDistribution[trimmedKeyword] = 1;
                }
            }
        }

        int totalSkills = skillDistribution.Values.Sum();
        foreach (var key in skillDistribution.Keys.ToList())
        {
            skillDistribution[key] = (skillDistribution[key] * 100) / totalSkills;
        }
    }

    private async Task LoadDepartmentDistributionAsync()
    {
        var students = await dbContext.Students.ToListAsync();
        foreach (var student in students)
        {
            var department = student.Department;
            if (departmentDistribution.ContainsKey(department))
            {
                departmentDistribution[department]++;
            }
            else
            {
                departmentDistribution[department] = 1;
            }
        }

        int totalDepartments = departmentDistribution.Values.Sum();
        foreach (var key in departmentDistribution.Keys.ToList())
        {
            departmentDistribution[key] = (departmentDistribution[key] * 100) / totalDepartments;
        }
    }

    @*
    protected override async Task OnAfterRenderAsync(bool firstRender) //EINAI TSAPATSOULIA NA VRETHEI ALLOS TROPOS GIARI ME TO ASYNC CRASHAREI OTAN PAW STO PROFILE // TO EVALA SXOLIA GIA MIN CRASHAREI TO PROFILE TOY COMPANY
    {
        if (hasReadAsCompanyPermission)
        {
            await JS.InvokeVoidAsync("createDoughnutChart", "doughnutChart", new
            {
                labels = skillDistribution.Keys.ToArray(),
                datasets = new[]
                {
                    new
                    {
                        data = skillDistribution.Values.ToArray(),
                        backgroundColor = new[]
                        {
                            "#FF6384",
                            "#36A2EB",
                            "#FFCE56",
                            "#4BC0C0",
                            "#9966FF",
                            "#FF9F40"
                        }
                    }
                }
            });

            await JS.InvokeVoidAsync("createDoughnutChart", "departmentDistributionChart", new
            {
                labels = departmentDistribution.Keys.ToArray(),
                datasets = new[]
                {
                    new
                    {
                        data = departmentDistribution.Values.ToArray(),
                        backgroundColor = new[]
                        {
                            "#FF6384",
                            "#36A2EB",
                            "#FFCE56",
                            "#4BC0C0",
                            "#9966FF",
                            "#FF9F40"
                        }
                    }
                }
            });
        }
    }
    *@
    private void ToggleFormVisibilityForUploadCompanyInternships()
    {
        isUploadCompanyInternshipsFormVisible = !isUploadCompanyInternshipsFormVisible;
        StateHasChanged();
    }

    private void ToggleFormVisibilityForUploadCompanyThesis()
    {
        isUploadCompanyThesisFormVisible = !isUploadCompanyThesisFormVisible;
        StateHasChanged();
    }

    private void ToggleFormVisibilityForUploadCompanyEvent()
    {
        isUploadCompanyEventFormVisible = !isUploadCompanyEventFormVisible;
        StateHasChanged();
    }

    private void ToggleFormVisibilityForUploadProfessorEvent()
    {
        isUploadProfessorEventFormVisible = !isUploadProfessorEventFormVisible;
        StateHasChanged();
    }


    private void OnAreaChange(ChangeEventArgs e)
    {
        var selectedValue = e.Value.ToString();
        var selectedArea = availableAreas.FirstOrDefault(a => a.AreaName == selectedValue);
        if (selectedArea != null)
        {
            ToggleSubFields(selectedArea);
        }
    }

    private async Task MoveSelectedAreaToLeft()
    {
        var newlySelectedAreas = await GetSelectedAreasFromDOM("selectedAreas");

        foreach (var areaName in newlySelectedAreas)
        {
            var selectedArea = selectedAreasForAssessment.FirstOrDefault(sa => sa.AreaName == areaName);
            if (selectedArea != null)
            {
                selectedAreasForAssessment.Remove(selectedArea);

                if (!availableAreas.Any(a => a.AreaName == areaName))
                {
                    var areaToAdd = dbContext.Areas.FirstOrDefault(a => a.AreaName == areaName);
                    if (areaToAdd != null)
                    {
                        availableAreas.Add(areaToAdd);
                        Console.WriteLine($"Area {areaName} added back to availableAreas (Left List Box)");
                    }
                }
            }
        }

        StateHasChanged();
    }


    private async Task MoveSelectedAreaToRight()
    {
        var newlySelectedAreas = await GetSelectedAreasFromDOM("availableAreas");

        foreach (var areaName in newlySelectedAreas)
        {
            var areaToRemove = availableAreas.FirstOrDefault(a => a.AreaName == areaName);
            if (areaToRemove != null)
            {
                availableAreas.Remove(areaToRemove);

                if (!selectedAreasForAssessment.Any(sa => sa.AreaName == areaToRemove.AreaName))
                {
                    selectedAreasForAssessment.Add(new SelectedArea { AreaName = areaToRemove.AreaName });
                    Console.WriteLine($"Area {areaName} added to selectedAreas (Right List Box)");
                }
            }
        }

        StateHasChanged();
    }

    public class SelectedArea
    {
        public string AreaName { get; set; }
        public int Assessment { get; set; } = 1; // Default assessment value is 1
    }

    private async Task<List<string>> GetSelectedAreasFromDOM(string selectId)
    {
        var selectedAreas = await JS.InvokeAsync<List<string>>("getSelectedValues", new object[] { selectId });
        return selectedAreas;
    }

    private void ToggleSubFields(Area area)
    {
        if (expandedAreas.Contains(area.AreaName))
        {
            expandedAreas.Remove(area.AreaName);
        }
        else
        {
            expandedAreas.Add(area.AreaName);
        }
        StateHasChanged();
    }

    private List<string> GetTownsForRegion(string region)
    {
        if (string.IsNullOrEmpty(region) || !RegionToTownsMap.ContainsKey(region))
        {
            return new List<string>();
        }

        return RegionToTownsMap[region];
    }


    private void UpdateTransportOffer(bool offer)
    {
        companyInternship.CompanyInternshipTransportOffer = offer;
    }

    private void UpdateTransportOfferForProfessorInternship(bool offer)
    {
        professorInternship.ProfessorInternshipTransportOffer = offer;
    }

    private void ToggleFormVisibilityToShowMyActiveInternshipsAsCompany()
    {
        isShowActiveInternshipsAsCompanyFormVisible = !isShowActiveInternshipsAsCompanyFormVisible;
    }

    private void ToggleFormVisibilityToShowMyActiveInternshipsAsProfessor()
    {
        isShowActiveInternshipsAsProfessorFormVisible = !isShowActiveInternshipsAsProfessorFormVisible;
    }



    private void ToggleInternshipDetails(CompanyInternship internship)
    {
        if (positionDetails.ContainsKey(internship.Id))
        {
            positionDetails[internship.Id] = !positionDetails[internship.Id];
        }
        else
        {
            positionDetails[internship.Id] = true;
        }
    }

    private async Task DeleteInternship(int internshipId)
    {
        // Call JavaScript function for confirmation with HTML content and custom styling
        bool isConfirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML", new object[] { 
            "Πρόκειται να διαγράψετε οριστικά αυτή την Θέση Πρακτικής. Είστε σίγουρος/η; <br>" +
            "<strong style='color: red;'>Η ενέργεια αυτή είναι μη αναστρέψιμη!</strong>"
        });

        if (isConfirmed)
        {
            var internship = await dbContext.CompanyInternships.FindAsync(internshipId);
            if (internship != null)
            {
                dbContext.CompanyInternships.Remove(internship);
                await dbContext.SaveChangesAsync();
                await LoadInternships(); // Reload the internships list
            }
        }
        StateHasChanged();
        NavigationManager.NavigateTo(NavigationManager.Uri, forceLoad: true);
    }


    private async Task DeleteProfessorInternship(int internshipId)
    {
        var internship = await dbContext.ProfessorInternships.FindAsync(internshipId);
        if (internship != null)
        {
            dbContext.ProfessorInternships.Remove(internship);
            await dbContext.SaveChangesAsync();
            await LoadProfessorInternships(); // Reload the internships list
        }
    }

    private async Task LoadInternships()
    {
        try
        {
            var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
            var user = authState.User;
            var userEmail = user.FindFirst("name")?.Value;

            if (!string.IsNullOrEmpty(userEmail))
            {
                // Updated query to use new property name and include Company data
                internships = await dbContext.CompanyInternships
                    .Include(i => i.Company)  // Include company data
                    .Where(i => i.CompanyEmailUsedToUploadInternship == userEmail)  // Updated property name
                    .ToListAsync();

                // Check the loaded data
                if (internships == null || !internships.Any())
                {
                    Console.WriteLine("No internships found for this user.");
                }
                else
                {
                    // Example of accessing company data through navigation property
                    foreach (var internship in internships)
                    {
                        Console.WriteLine($"Internship {internship.Id} by {internship.Company?.CompanyName}");
                    }
                }
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading internships: {ex.Message}");
        }
    }

    private async Task LoadProfessorInternships()
    {
        try
        {
            var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
            var user = authState.User;
            var userEmail = user.FindFirst("name")?.Value;

            if (!string.IsNullOrEmpty(userEmail))
            {
                // Fetch internships related to the current professor using the new property name
                professorInternships = await dbContext.ProfessorInternships
                    .Include(i => i.Professor) // Include professor navigation property
                    .Where(i => i.ProfessorEmailUsedToUploadInternship == userEmail)
                    .ToListAsync();

                // Check the loaded data
                if (professorInternships == null || !professorInternships.Any())
                {
                    Console.WriteLine("No internships found for this professor.");
                }
                else
                {
                    Console.WriteLine($"Found {professorInternships.Count} internships for professor {userEmail}");
                }
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading professor internships: {ex.Message}");
        }
    }

    private async Task LoadJobs()
    {
        try
        {
            var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
            var user = authState.User;
            var userEmail = user.FindFirst("name")?.Value;

            if (!string.IsNullOrEmpty(userEmail))
            {
                // Fetch internships related to the current company
                jobs = await dbContext.CompanyJobs
                    .Where(i => i.EmailUsedToUploadJobs == userEmail)
                    .ToListAsync();

                // Check the loaded data
                if (jobs == null || !jobs.Any())
                {
                    Console.WriteLine("No internships found for this user.");
                }
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading internships: {ex.Message}");
        }
        LogJobLoadingInfo();

    }

    private async Task LoadThesesAsCompany()
    {
        try
        {
            var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
            var user = authState.User;
            var userEmail = user.FindFirst("name")?.Value;

            if (!string.IsNullOrEmpty(userEmail))
            {
                // Fetch theses related to the current company
                companytheses = await dbContext.CompanyTheses
                    .Include(t => t.Company) // This ensures Company data is loaded
                    .Where(i => i.CompanyEmailUsedToUploadThesis == userEmail)
                    .ToListAsync();

                // Check the loaded data
                if (companytheses == null || !companytheses.Any())
                {
                    Console.WriteLine("No theses found for this company.");
                }
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading company theses: {ex.Message}");
        }
    }

    private async Task LoadThesesAsProfessor()
    {
        try
        {
            var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
            var user = authState.User;
            var userEmail = user.FindFirst("name")?.Value;

            if (!string.IsNullOrEmpty(userEmail))
            {
                // Fetch theses related to the current professor using the navigation property
                professortheses = await dbContext.ProfessorTheses
                    .Include(t => t.Professor) // Include professor data if needed
                    .Where(t => t.ProfessorEmailUsedToUploadThesis == userEmail)
                    .ToListAsync();

                // Check the loaded data
                if (professortheses == null || !professortheses.Any())
                {
                    Console.WriteLine("No theses found for this Professor.");
                }
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading theses for this Professor: {ex.Message}");
        }

        // Load filtered theses (if needed for other purposes)
        FilteredThesesAsProfessor = await dbContext.ProfessorTheses
            .Include(t => t.Professor) // Include professor data if needed
            .ToListAsync();
    
        StateHasChanged();
    }


    private async Task LoadProfessors()
    {
        try
        {
            // Fetch all professors from the database
            professors = await dbContext.Professors
            .AsNoTracking() //to avala 26/9 gia tin vasi multi threading
            .ToListAsync();

            // Check the loaded data
            if (professors == null || !professors.Any())
            {
                Console.WriteLine("No professors found.");
            }
            else
            {
                Console.WriteLine($"Found {professors.Count} professors.");
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Exception: {ex.Message}");
        }
    }

    private async Task LoadCompanies()
    {
        try
        {
            // Fetch all professors from the database
            companies = await dbContext.Companies
            .AsNoTracking() //to avala 26/9 gia tin vasi multi threading
            .ToListAsync();

            // Check the loaded data
            if (companies == null || !companies.Any())
            {
                Console.WriteLine("No companies found.");
            }
            else
            {
                Console.WriteLine($"Found {companies.Count} companies.");
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Exception: {ex.Message}");
        }
    }


    private bool isModalVisibleForInternships = false;
    private bool isModalVisibleForInternshipsAsStudent = false;
    private bool isModalVisibleForProfessorInternshipsAsStudent = false;
    private CompanyInternship currentInternship = null;
    private bool isModalVisibleForProfessorInternships = false;
    private ProfessorInternship currentProfessorInternship = null;

    private void ShowInternshipDetails(CompanyInternship internship)
    {
        currentInternship = internship;
        isModalVisibleForInternships = true;

    }


    private void ShowProfessorInternshipDetails(ProfessorInternship professorinternship)
    {
        currentProfessorInternship = professorinternship;
        isModalVisibleForProfessorInternships = true;

    }

    private void CloseModalForInternships()
    {
        isModalVisibleForInternships = false;
        selectedCompanyInternshipDetails = null;
    }

    private void CloseModalForProfessorInternships()
    {
        isModalVisibleForProfessorInternships = false;
        currentProfessorInternship = null;
    }

    // Method to show the edit popup with selected internship details
    private void EditInternshipDetails(CompanyInternship internship)
    {
        selectedInternship = internship;
        isEditPopupVisibleForInternships = true; // Show the edit popup
    }

    private void EditProfessorInternshipDetails(ProfessorInternship internship)
    {
        selectedProfessorInternship = internship;
        isEditPopupVisibleForProfessorInternships = true; // Show the edit popup
    }

    // Method to close the edit popup
    private void CloseEditPopupForInternships()
    {
        isEditPopupVisibleForInternships = false; // Hide the edit popup
    }

    // Method to save the edited internship details
    private async Task SaveEditedInternship()
    {
        try
        {
            // Check if required fields are filled
            if (string.IsNullOrWhiteSpace(selectedInternship.CompanyInternshipTitle) || string.IsNullOrWhiteSpace(selectedInternship.CompanyInternshipDescription))
            {
                showSuccessMessage = false;
                showErrorMessage = true;
                return; // Prevent saving if required fields are missing
            }

            // Ensure that SelectedAreasToEditForCompanyInternship contains the areas (even if no changes were made)
            if (SelectedAreasToEditForCompanyInternship == null || !SelectedAreasToEditForCompanyInternship.Any())
            {
                // If no areas are selected, you can set them based on the internship's current areas
                var currentAreas = selectedInternship.CompanyInternshipAreas.Split(",").ToList();
                SelectedAreasToEditForCompanyInternship = Areas
                    .Where(area => currentAreas.Contains(area.AreaName)) // Set the areas to the ones already selected
                    .ToList();
            }

            // Convert the selected areas to a comma-separated string
            selectedInternship.CompanyInternshipAreas = string.Join(",", SelectedAreasToEditForCompanyInternship.Select(area => area.AreaName));

            // Find the internship to update
            var internshipToUpdate = await dbContext.CompanyInternships.FindAsync(selectedInternship.Id);
            if (internshipToUpdate != null)
            {
                // Update internship properties
                internshipToUpdate.CompanyInternshipTitle = selectedInternship.CompanyInternshipTitle;
                internshipToUpdate.CompanyInternshipDescription = selectedInternship.CompanyInternshipDescription;
                internshipToUpdate.CompanyUploadedInternshipStatus = selectedInternship.CompanyUploadedInternshipStatus;
                internshipToUpdate.CompanyInternshipType = selectedInternship.CompanyInternshipType;
                internshipToUpdate.CompanyInternshipForeas = selectedInternship.CompanyInternshipForeas;
                internshipToUpdate.CompanyInternshipContactPerson = selectedInternship.CompanyInternshipContactPerson;
                internshipToUpdate.CompanyInternshipPerifereiaLocation = selectedInternship.CompanyInternshipPerifereiaLocation;
                internshipToUpdate.CompanyInternshipDimosLocation = selectedInternship.CompanyInternshipDimosLocation;
                internshipToUpdate.CompanyInternshipPostalCodeLocation = selectedInternship.CompanyInternshipPostalCodeLocation;
                internshipToUpdate.CompanyInternshipTransportOffer = selectedInternship.CompanyInternshipTransportOffer;
                internshipToUpdate.CompanyInternshipAreas = selectedInternship.CompanyInternshipAreas;
                internshipToUpdate.CompanyInternshipActivePeriod = selectedInternship.CompanyInternshipActivePeriod;
                internshipToUpdate.CompanyInternshipEKPASupervisor = selectedInternship.CompanyInternshipEKPASupervisor;
                internshipToUpdate.CompanyInternshipLastUpdate = selectedInternship.CompanyInternshipLastUpdate;

                // Only update CompanyInternshipAttachment if a new file was uploaded
                if (selectedInternship.CompanyInternshipAttachment != null && selectedInternship.CompanyInternshipAttachment.Length > 0)
                {
                    internshipToUpdate.CompanyInternshipAttachment = selectedInternship.CompanyInternshipAttachment;
                }

                // Save the changes to the database
                await dbContext.SaveChangesAsync();
                showSuccessMessage = true;
                showErrorMessage = false;
            }
            else
            {
                showSuccessMessage = false;
                showErrorMessage = true;
            }
        }
        catch (Exception ex)
        {
            showSuccessMessage = false;
            showErrorMessage = true;
            Console.Error.WriteLine($"Error saving internship: {ex.Message}");
        }
        finally
        {
            isEditPopupVisibleForInternships = false;
            StateHasChanged(); // Ensure the UI updates after saving
        }
    }




  

    private async Task ShowJobDetails(CompanyJob job)
    {
        if (job.Company == null)
        {
            await dbContext.Entry(job)
                .Reference(j => j.Company)
                .LoadAsync();
        }
    
        currentJob = job;
        isModalVisibleForJobs = true;
        StateHasChanged();
    }

    private void ShowProfessorThesisDetailsAsStudent(ProfessorThesis professorthesis)
    {
        currentProfessorThesis = professorthesis;
        isModalVisibleToShowProfessorThesisDetails = true;

    }

   private void ShowProfessorThesisDetailsAsProfessor(ProfessorThesis professorthesis)
   {
        currentProfessorThesis = professorthesis;
        isModalVisibleToShowProfessorThesisAsProfessor = true;
   }





    private void CloseModalForJobs()
    {
        isModalVisibleForJobs = false;
        currentJob = null;
    }

    private void EditJobDetails(CompanyJob job)
    {
        selectedJob = job;
        isEditPopupVisibleForJobs = true; // Show the edit popup
    }

    private void CloseEditPopupForJobs()
    {
        isEditPopupVisibleForJobs = false; // Hide the edit popup
    }

   @inject IJSRuntime JS

    private async Task SaveEditedJob()
    {
        try
        {
            // Check if required fields are filled
            if (string.IsNullOrWhiteSpace(selectedJob.PositionTitle) || string.IsNullOrWhiteSpace(selectedJob.PositionDescription))
            {
                showSuccessMessage = false;
                showErrorMessage = true;
                return; // Prevent saving if required fields are missing
            }

            // Ensure SelectedAreasToEditForCompanyJob contains all checked areas (even if no changes were made)
            if (SelectedAreasToEditForCompanyJob == null || !SelectedAreasToEditForCompanyJob.Any())
            {
                SelectedAreasToEditForCompanyJob = Areas.Where(area => selectedJob.PositionAreas.Contains(area.AreaName)).ToList();  // Fetch areas if none are selected
            }

            // Convert the selected areas to a comma-separated string
            selectedJob.PositionAreas = string.Join(",", SelectedAreasToEditForCompanyJob.Select(area => area.AreaName));  

            // Update job in database
            var jobToUpdate = await dbContext.CompanyJobs.FindAsync(selectedJob.Id);
            if (jobToUpdate != null)
            {
                jobToUpdate.PositionTitle = selectedJob.PositionTitle;
                jobToUpdate.PositionDescription = selectedJob.PositionDescription;
                jobToUpdate.PositionStatus = selectedJob.PositionStatus;
                jobToUpdate.PositionType = selectedJob.PositionType;
                jobToUpdate.PositionForeas = selectedJob.PositionForeas;
                jobToUpdate.PositionContactPerson = selectedJob.PositionContactPerson;
                jobToUpdate.PositionPerifereiaLocation = selectedJob.PositionPerifereiaLocation;
                jobToUpdate.PositionDimosLocation = selectedJob.PositionDimosLocation;
                jobToUpdate.PositionPostalCodeLocation = selectedJob.PositionPostalCodeLocation;
                jobToUpdate.PositionTransportOffer = selectedJob.PositionTransportOffer;
                jobToUpdate.PositionAreas = selectedJob.PositionAreas;
                jobToUpdate.PositionActivePeriod = selectedJob.PositionActivePeriod;
                jobToUpdate.UpdateDateTime = selectedJob.UpdateDateTime;

                if (selectedJob.PositionAttachment != null && selectedJob.PositionAttachment.Length > 0)
                {
                    jobToUpdate.PositionAttachment = selectedJob.PositionAttachment;
                }

                await dbContext.SaveChangesAsync();
                showSuccessMessage = true;
                showErrorMessage = false;
            }
            else
            {
                showSuccessMessage = false;
                showErrorMessage = true;
            }
        }
        catch (Exception ex)
        {
            showSuccessMessage = false;
            showErrorMessage = true;
            Console.Error.WriteLine($"Error saving job: {ex.Message}");
        }
        finally
        {
            isEditPopupVisibleForJobs = false;
            StateHasChanged();
        }
    }








    private void ShowCompanyThesisDetails(CompanyThesis companythesis)
    {
        currentThesis = companythesis;
        isModalVisibleToShowCompanyThesisDetails = true;

    }
    private void EditCompanyThesisDetails(CompanyThesis companythesis)
    {
        selectedCompanyThesis = companythesis;
        isModalVisibleToEditCompanyThesisDetails = true; // Show the edit popup
    }
    private void CloseModalForCompanyThesis()
    {
        isModalVisibleToShowCompanyThesisDetails = false;
        currentThesis = null;
    }

    private void CloseModalForProfessorDetails()
    {
        isModalVisibleToShowprofessorDetailsAtCompanyThesisInterest = false;
        currentProfessorDetails = null;
    }




    private async Task ShowCompanyThesisApplicationsAsStudent(CompanyThesisApplied thesis)
    {
        selectedCompanyThesisApplicationToShowAsStudent = thesis;
        await JS.InvokeVoidAsync("showModal", "thesisDetailsModal");
    }

    private async Task ShowProfessorThesisApplicationsAsStudent(ProfessorThesisApplied thesis)
    {
        selectedProfessorThesisApplicationToShowAsStudent = thesis;
        await JS.InvokeVoidAsync("showModal", "thesisDetailsModal");
    }

    private async Task ConfirmApplyForInternship(CompanyInternship internship)
    {
        var message = $"Πρόκεται να κάνετε αίτηση για την Θέση \"{internship.CompanyInternshipTitle}\". Είστε σίγουρος/η;";
    
        var confirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML", message);

        if (confirmed)
        {
            await ApplyForInternshipAsStudent(internship);
        }
    }

    private async Task ApplyForInternshipAsStudent(CompanyInternship internship)
    {
        // Retrieve the latest internship status using updated property name
        var latestInternship = await dbContext.CompanyInternships
            .AsNoTracking()
            .Where(i => i.RNGForInternshipUploadedAsCompany == internship.RNGForInternshipUploadedAsCompany)
            .Select(i => new { i.CompanyUploadedInternshipStatus })
            .FirstOrDefaultAsync();

        if (latestInternship == null || latestInternship.CompanyUploadedInternshipStatus != "Δημοσιευμένη")
        {
            await JS.InvokeVoidAsync("confirmActionWithHTML2", "Η Πρακτική Άσκηση δεν είναι πλέον διαθέσιμη. Παρακαλώ δοκιμάστε αργότερα.");
            return;
        }

        var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
        var user = authState.User;

        if (!user.Identity.IsAuthenticated) return;

        var student = await GetStudentDetails(user.Identity.Name);
        if (student == null)
        {
            await JS.InvokeVoidAsync("confirmActionWithHTML2", "Δεν βρέθηκαν στοιχεία φοιτητή.");
            return;
        }

        // Check for existing application using updated property name
        var existingApplication = await dbContext.InternshipsApplied
            .FirstOrDefaultAsync(app =>
                app.StudentEmailAppliedForInternship == student.Email &&
                app.RNGForInternshipApplied == internship.RNGForInternshipUploadedAsCompany);

        if (existingApplication != null)
        {
            await JS.InvokeVoidAsync("confirmActionWithHTML2", $"Έχετε ήδη κάνει αίτηση για: {internship.CompanyInternshipTitle}!");
            return;
        }

        // Get company data using updated property name
        var company = await dbContext.Companies
            .FirstOrDefaultAsync(c => c.CompanyEmail == internship.CompanyEmailUsedToUploadInternship);

        if (company == null)
        {
            await JS.InvokeVoidAsync("confirmActionWithHTML2", "Σφάλμα: Δεν βρέθηκε η εταιρία.");
            return;
        }

        using var transaction = await dbContext.Database.BeginTransactionAsync();
        try
        {
            var internshipApplication = new InternshipApplied
            {
                RNGForInternshipApplied = internship.RNGForInternshipUploadedAsCompany,
                DateTimeStudentAppliedForInternship = DateTime.UtcNow,
                StudentEmailAppliedForInternship = student.Email,
                StudentUniqueIDAppliedForInternship = student.Student_UniqueID,
                CompanyEmailWhereStudentAppliedForInternship = internship.CompanyEmailUsedToUploadInternship,
                CompanyUniqueIDWhereStudentAppliedForInternship = company.Company_UniqueID,
                InternshipStatusAppliedAtTheCompanySide = "Σε Επεξεργασία",
                InternshipStatusAppliedAtTheStudentSide = "Σε Επεξεργασία",
                RNGForInternshipAppliedAsStudent_HashedAsUniqueID = internship.RNGForInternshipUploadedAsCompany_HashedAsUniqueID,

                StudentDetails = new InternshipApplied_StudentDetails
                {
                    StudentEmailAppliedForInternship = student.Email,
                    StudentUniqueIDAppliedForInternship = student.Student_UniqueID,
                    DateTimeStudentAppliedForInternship = DateTime.UtcNow,
                    RNGForInternshipAppliedAsStudent_HashedAsUniqueID = internship.RNGForInternshipUploadedAsCompany_HashedAsUniqueID
                },

                CompanyDetails = new InternshipApplied_CompanyDetails
                {
                    CompanyUniqueIDWhereStudentAppliedForInternship = company.Company_UniqueID,
                    CompanyEmailWhereStudentAppliedForInternship = internship.CompanyEmailUsedToUploadInternship
                }
            };

            dbContext.InternshipsApplied.Add(internshipApplication);

            // Add platform action using updated property name
            dbContext.PlatformActions.Add(new PlatformActions
            {
                UserRole_PerformedAction = "STUDENT",
                ForWhat_PerformedAction = "COMPANY_INTERNSHIP",
                HashedPositionRNG_PerformedAction = HashingHelper.HashLong(internship.RNGForInternshipUploadedAsCompany),
                TypeOfAction_PerformedAction = "APPLY",
                DateTime_PerformedAction = DateTime.UtcNow
            });

            await dbContext.SaveChangesAsync();
            await transaction.CommitAsync();

            // Send emails - use company name from navigation property
            try
            {
                await InternshipEmailService.SendCompanyInternshipApplicationConfirmationToStudent(
                    student.Email, student.Name, student.Surname,
                    internship.CompanyInternshipTitle, 
                    internship.RNGForInternshipUploadedAsCompany_HashedAsUniqueID, 
                    internship.Company?.CompanyName ?? "Unknown Company");

                await InternshipEmailService.SendInternshipApplicationNotificationToCompany(
                    internship.CompanyEmailUsedToUploadInternship, 
                    internship.Company?.CompanyName ?? "Unknown Company",
                    student.Name, student.Surname, student.Email,
                    student.Telephone, student.StudyYear, student.Attachment,
                    internship.RNGForInternshipUploadedAsCompany_HashedAsUniqueID, 
                    internship.CompanyInternshipTitle);
            }
            catch (Exception ex)
            {
                Console.WriteLine($"Email error: {ex.Message}");
            }

            await JS.InvokeVoidAsync("confirmActionWithHTML2", 
                $"Η αίτηση για {internship.CompanyInternshipTitle} υποβλήθηκε επιτυχώς!");
        }
        catch (Exception ex)
        {
            await transaction.RollbackAsync();
            Console.WriteLine($"Full error: {ex}");
            await JS.InvokeVoidAsync("confirmActionWithHTML2", 
                $"Σφάλμα κατά την υποβολή: {ex.InnerException?.Message ?? ex.Message}");
        }

        await RefreshStudentData();
        NavigationManager.NavigateTo(NavigationManager.Uri, forceLoad: true);
    }


    private async Task ConfirmApplyForProfessorInternship(ProfessorInternship internship)
    {
        var message = $"Πρόκεται να κάνετε αίτηση για την Θέση \"{internship.ProfessorInternshipTitle}\". Είστε σίγουρος/η;";
    
        var confirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML", message);

        if (confirmed)
        {
            await ApplyForProfessorInternshipAsStudent(internship);
        }
    }

    private async Task ApplyForProfessorInternshipAsStudent(ProfessorInternship internship)
    {
        // Retrieve the latest internship status using the new property name
        var latestInternship = await dbContext.ProfessorInternships
            .AsNoTracking()
            .Where(i => i.RNGForInternshipUploadedAsProfessor == internship.RNGForInternshipUploadedAsProfessor)
            .Select(i => new { i.ProfessorUploadedInternshipStatus })
            .FirstOrDefaultAsync();

        if (latestInternship == null || latestInternship.ProfessorUploadedInternshipStatus != "Δημοσιευμένη")
        {
            await JS.InvokeVoidAsync("confirmActionWithHTML2", "Η Πρακτική Άσκηση δεν είναι πλέον διαθέσιμη. Παρακαλώ δοκιμάστε αργότερα.");
            return;
        }

        var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
        var user = authState.User;

        if (!user.Identity.IsAuthenticated) return;

        var student = await GetStudentDetails(user.Identity.Name);
        if (student == null)
        {
            await JS.InvokeVoidAsync("confirmActionWithHTML2", "Δεν βρέθηκαν στοιχεία φοιτητή.");
            return;
        }

        // Check for existing application using new property names
        var existingApplication = await dbContext.ProfessorInternshipsApplied
            .FirstOrDefaultAsync(app =>
                app.StudentEmailAppliedForProfessorInternship == student.Email &&
                app.RNGForProfessorInternshipApplied == internship.RNGForInternshipUploadedAsProfessor);

        if (existingApplication != null)
        {
            await JS.InvokeVoidAsync("confirmActionWithHTML2", $"Έχετε ήδη κάνει αίτηση για: {internship.ProfessorInternshipTitle}!");
            return;
        }

        // Get professor data using the new property name
        var professor = await dbContext.Professors
            .FirstOrDefaultAsync(p => p.ProfEmail == internship.ProfessorEmailUsedToUploadInternship);

        if (professor == null)
        {
            await JS.InvokeVoidAsync("confirmActionWithHTML2", "Σφάλμα: Δεν βρέθηκε ο καθηγητής.");
            return;
        }

        using var transaction = await dbContext.Database.BeginTransactionAsync();
        try
        {
            var professorInternshipApplication = new ProfessorInternshipApplied
            {
                RNGForProfessorInternshipApplied = internship.RNGForInternshipUploadedAsProfessor,
                DateTimeStudentAppliedForProfessorInternship = DateTime.UtcNow,
                StudentEmailAppliedForProfessorInternship = student.Email,
                StudentUniqueIDAppliedForProfessorInternship = student.Student_UniqueID,
                ProfessorEmailWhereStudentAppliedForInternship = internship.ProfessorEmailUsedToUploadInternship,
                ProfessorUniqueIDWhereStudentAppliedForInternship = professor.Professor_UniqueID,
                InternshipStatusAppliedAtTheProfessorSide = "Σε Επεξεργασία",
                InternshipStatusAppliedAtTheStudentSide = "Σε Επεξεργασία",
                RNGForProfessorInternshipApplied_HashedAsUniqueID = internship.RNGForInternshipUploadedAsProfessor_HashedAsUniqueID,

                StudentDetails = new ProfessorInternshipsApplied_StudentDetails
                {
                    StudentUniqueIDAppliedForProfessorInternship = student.Student_UniqueID,
                    StudentEmailAppliedForProfessorInternship = student.Email,
                    DateTimeStudentAppliedForProfessorInternship = DateTime.UtcNow,
                    RNGForProfessorInternshipAppliedAsStudent_HashedAsUniqueID = internship.RNGForInternshipUploadedAsProfessor_HashedAsUniqueID
                },

                ProfessorDetails = new ProfessorInternshipsApplied_ProfessorDetails
                {
                    ProfessorUniqueIDWhereStudentAppliedForProfessorInternship = professor.Professor_UniqueID,
                    ProfessorEmailWhereStudentAppliedForProfessorInternship = internship.ProfessorEmailUsedToUploadInternship
                }
            };

            dbContext.ProfessorInternshipsApplied.Add(professorInternshipApplication);

            // Add platform action with updated property names
            dbContext.PlatformActions.Add(new PlatformActions
            {
                UserRole_PerformedAction = "STUDENT",
                ForWhat_PerformedAction = "PROFESSOR_INTERNSHIP",
                HashedPositionRNG_PerformedAction = HashingHelper.HashLong(internship.RNGForInternshipUploadedAsProfessor),
                TypeOfAction_PerformedAction = "APPLY",
                DateTime_PerformedAction = DateTime.UtcNow
            });

            await dbContext.SaveChangesAsync();
            await transaction.CommitAsync();

            // Send emails using professor details from navigation property
            try
            {
                await InternshipEmailService.SendProfessorInternshipApplicationConfirmationToStudent(
                    student.Email,
                    student.Name,
                    student.Surname,
                    internship.ProfessorInternshipTitle,
                    internship.RNGForInternshipUploadedAsProfessor_HashedAsUniqueID,
                    $"{professor.ProfName} {professor.ProfSurname}");

                await InternshipEmailService.SendProfessorInternshipApplicationNotificationToProfessor(
                    internship.ProfessorEmailUsedToUploadInternship,
                    $"{professor.ProfName} {professor.ProfSurname}",
                    student.Name,
                    student.Surname,
                    student.Email,
                    student.Telephone,
                    student.StudyYear,
                    student.Attachment,
                    internship.RNGForInternshipUploadedAsProfessor_HashedAsUniqueID,
                    internship.ProfessorInternshipTitle);
            }
            catch (Exception ex)
            {
                Console.WriteLine($"Email error: {ex.Message}");
            }

            await JS.InvokeVoidAsync("confirmActionWithHTML2", 
                $"Η αίτηση για {internship.ProfessorInternshipTitle} υποβλήθηκε επιτυχώς!");
        }
        catch (Exception ex)
        {
            await transaction.RollbackAsync();
            Console.WriteLine($"Full error: {ex.ToString()}");
            await JS.InvokeVoidAsync("confirmActionWithHTML2", 
                $"Σφάλμα κατά την υποβολή: {ex.InnerException?.Message ?? ex.Message}");
        }

        await RefreshStudentData();
        NavigationManager.NavigateTo(NavigationManager.Uri, forceLoad: true);
    }


    private async Task ConfirmApplyForJob(CompanyJob job)
    {
        var message = $"Πρόκεται να κάνετε αίτηση για την Θέση \"{job.PositionTitle}\".Είστε σίγουρος/η;";
        var confirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML", message);
    
        if (confirmed)
        {
            await ApplyForJobAsStudent(job);
        }
    }


    private async Task ToggleAndLoadStudentInternshipApplications()
    {
        showStudentInternshipApplications = !showStudentInternshipApplications;

        if (showStudentInternshipApplications)
        {
            await LoadUserInternshipApplications();
        }

        StateHasChanged(); // Ensure UI updates after toggling
    }


    private async Task LoadUserInternshipApplications()
    {
        var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
        var user = authState.User;

        // Initialize lists and caches
        internshipApplications = new List<InternshipApplied>();
        professorInternshipApplications = new List<ProfessorInternshipApplied>();
        internshipDataCache = new Dictionary<long, CompanyInternship>();
        professorInternshipDataCache = new Dictionary<long, ProfessorInternship>();

        if (user.Identity.IsAuthenticated)
        {
            var userEmail = user.FindFirst("name")?.Value;

            if (!string.IsNullOrEmpty(userEmail))
            {
                // Get student details
                var student = await dbContext.Students.FirstOrDefaultAsync(s => s.Email == userEmail);

                if (student != null)
                {
                    // Fetch company internship applications with details (unchanged)
                    internshipApplications = await dbContext.InternshipsApplied
                        .Include(app => app.StudentDetails)
                        .Include(app => app.CompanyDetails)
                        .Where(app => app.StudentDetails.StudentUniqueIDAppliedForInternship == student.Student_UniqueID)
                        .ToListAsync();

                    // Load all related company internships in one query
                    var companyInternshipRNGs = internshipApplications.Select(a => a.RNGForInternshipApplied).ToList();
                    var companyInternships = await dbContext.CompanyInternships
                        .Include(i => i.Company)
                        .Where(i => companyInternshipRNGs.Contains(i.RNGForInternshipUploadedAsCompany))
                        .ToListAsync();

                    // Populate company internship cache
                    foreach (var internship in companyInternships)
                    {
                        internshipDataCache[internship.RNGForInternshipUploadedAsCompany] = internship;
                    }

                    // Fetch professor internship applications with details
                    professorInternshipApplications = await dbContext.ProfessorInternshipsApplied
                        .Include(app => app.StudentDetails)
                        .Include(app => app.ProfessorDetails)
                        .Where(app => app.StudentDetails.StudentUniqueIDAppliedForProfessorInternship == student.Student_UniqueID)
                        .ToListAsync();

                    // Load all related professor internships in one query with updated property names
                    var professorInternshipRNGs = professorInternshipApplications.Select(a => a.RNGForProfessorInternshipApplied).ToList();
                    var professorInternships = await dbContext.ProfessorInternships
                        .Include(i => i.Professor) // Include professor navigation property
                        .Where(i => professorInternshipRNGs.Contains(i.RNGForInternshipUploadedAsProfessor)) // Updated property
                        .ToListAsync();

                    // Populate professor internship cache with updated property names
                    foreach (var internship in professorInternships)
                    {
                        professorInternshipDataCache[internship.RNGForInternshipUploadedAsProfessor] = internship;
                    }
                }
            }
        }

        StateHasChanged();
    }




    private void ShowJobDetails(CompanyJobApplied jobApplication)
    {
        selectedJobApplication = jobApplication;
        ShowJobDetailsModal();
    }

    private async void ShowJobDetailsModal()
    {
        await JS.InvokeVoidAsync("ShowBootstrapModal", "#jobDetailsModal");
    }

    public class CompanyInternshipAreasForCheckboxes
    {
        public List<Area> CompanyInternshipAreas { get; set; } = new List<Area>();
    }

    private bool IsSelectedAreasWhenUploadJobAsCompany(Area area)
    {
        return SelectedAreasWhenUploadJobAsCompany.Contains(area);
    }

    private bool IsSelectedAreasWhenUploadThesisAsCompany(Area area)
    {
        return SelectedAreasWhenUploadThesisAsCompany.Contains(area);
    }

    private bool IsSelectedAreasWhenUploadInternshipAsCompany(Area area)
    {
        return SelectedAreasWhenUploadInternshipAsCompany.Contains(area);
    }

    private bool IsSelectedAreaForCompanyEvent(Area area)
    {
        return SelectedAreasWhenUploadEventAsCompany.Contains(area);
    }

    private bool IsSelectedAreaForProfessorEvent(Area area)
    {
        return SelectedAreasWhenUploadEventAsProfessor.Contains(area);
    }

    private bool IsSelectedAreaForProfessorInternship(Area area)
    {
        return SelectedAreasWhenUploadInternshipAsProfessor.Contains(area);
    }

    private bool IsSelectedForSkillsWhenUploadThesisAsCompany(Skill skill)
    {
        return SelectedSkillsWhenUploadThesisAsCompany.Contains(skill);
    }

    private void OnCheckedChangedAreasWhenUploadJobAsCompany(ChangeEventArgs e, Area area)
    {
        if (e.Value is bool isChecked)
        {
            if (isChecked)
            {
                if (!SelectedAreasWhenUploadJobAsCompany.Contains(area))
                {
                    SelectedAreasWhenUploadJobAsCompany.Add(area);
                }
            }
            else
            {
                SelectedAreasWhenUploadJobAsCompany.Remove(area);
            }

            if (SelectedAreasWhenUploadJobAsCompany.Any())
            {
                showErrorMessagesForAreasWhenUploadJobAsCompany = false;
            }

        }
    }

    private void OnCheckedChangedAreasWhenUploadInternshipAsCompany(ChangeEventArgs e, Area area)
    {
        if (e.Value is bool isChecked)
        {
            if (isChecked)
            {
                if (!SelectedAreasWhenUploadInternshipAsCompany.Contains(area))
                {
                    SelectedAreasWhenUploadInternshipAsCompany.Add(area);
                }
            }
            else
            {
                SelectedAreasWhenUploadInternshipAsCompany.Remove(area);
            }

            if (SelectedAreasWhenUploadInternshipAsCompany.Any())
            {
                showErrorMessagesForAreasWhenUploadInternshipAsCompany = false;
            }

        }
    }

    private void OnCheckedChangedAreasWhenUploadThesisAsCompany(ChangeEventArgs e, Area area)
    {
        if (e.Value is bool isChecked)
        {
            if (isChecked)
            {
                if (!SelectedAreasWhenUploadThesisAsCompany.Contains(area))
                {
                    SelectedAreasWhenUploadThesisAsCompany.Add(area);
                }
            }
            else
            {
                SelectedAreasWhenUploadThesisAsCompany.Remove(area);
            }

            if (SelectedAreasWhenUploadThesisAsCompany.Any())
            {
                showErrorMessage = false;
            }

        }
    }

    private void OnCheckedChangedAreasWhenUploadInternshipAsProfessor(ChangeEventArgs e, Area area)
    {
        if (e.Value is bool isChecked)
        {
            if (isChecked)
            {
                if (!SelectedAreasWhenUploadInternshipAsProfessor.Contains(area))
                {
                    SelectedAreasWhenUploadInternshipAsProfessor.Add(area);
                }
            }
            else
            {
                SelectedAreasWhenUploadInternshipAsProfessor.Remove(area);
            }

            if (SelectedAreasWhenUploadInternshipAsProfessor.Any())
            {
                showErrorMessage = false;
            }

        }
    }


    private void OnCheckedChangedForCompanyEvent(ChangeEventArgs e, Area area)
    {
        if (e.Value is bool isChecked)
        {
            if (isChecked)
            {
                if (!SelectedAreasWhenUploadEventAsCompany.Contains(area))
                {
                    SelectedAreasWhenUploadEventAsCompany.Add(area);
                }
            }
            else
            {
                SelectedAreasWhenUploadEventAsCompany.Remove(area);
            }
        }
    }

    private void OnCheckedChangedForProfessorEvent(ChangeEventArgs e, Area area)
    {
        if (e.Value is bool isChecked)
        {
            if (isChecked)
            {
                if (!SelectedAreasWhenUploadEventAsProfessor.Contains(area))
                {
                    SelectedAreasWhenUploadEventAsProfessor.Add(area);
                }
            }
            else
            {
                SelectedAreasWhenUploadEventAsProfessor.Remove(area);
            }
        }
    }

    private void OnCheckedChangedForSkillsWhenUploadThesisAsCompany(ChangeEventArgs e, Skill skill)
    {
        if (e.Value is bool isChecked)
        {
            if (isChecked)
            {
                if (!SelectedSkillsWhenUploadThesisAsCompany.Contains(skill))
                {
                    SelectedSkillsWhenUploadThesisAsCompany.Add(skill);
                }
            }
            else
            {
                SelectedSkillsWhenUploadThesisAsCompany.Remove(skill);
            }
            if (SelectedSkillsWhenUploadThesisAsCompany.Any())
            {
                showErrorMessagesForSkillsWhenUploadThesisAsCompany = false;
            }

        }
    }

    private async Task ToggleCheckboxesForCompanyInternship()
    {
        await JS.InvokeVoidAsync("toggleCompanyInternshipCheckboxes");
    }

    private async Task ToggleCheckboxesForProfessorInternship()
    {
        await JS.InvokeVoidAsync("toggleProfessorInternshipCheckboxes");
    }

    private async Task ToggleCheckboxesForAreasForCompanyThesis()
    {
        await JS.InvokeVoidAsync("toggleCompanyThesisAreasCheckboxes");
    }

    private async Task ToggleCheckboxesForAreasForCompanyEvent()
    {
        await JS.InvokeVoidAsync("toggleCompanyEventAreasCheckboxes");
    }

    private async Task ToggleCheckboxesForAreasForProfessorEvent()
    {
        await JS.InvokeVoidAsync("toggleProfessorEventAreasCheckboxes");
    }

    private async Task ToggleCheckboxesForSkillsForCompanyThesis()
    {
        await JS.InvokeVoidAsync("toggleCompanyThesisSkillsCheckboxes");
    }

    private async Task ToggleCheckboxesForCompanyJob()
    {
        await JS.InvokeVoidAsync("toggleCompanyJobCheckboxes");
    }

   private async Task UpdateInternshipStatusAsCompany(int internshipId, string newStatus)
    {
        // Skip confirmation dialog if the new status is "Μη Δημοσιευμένη"
        if (newStatus != "Μη Δημοσιευμένη")
        {
            bool isConfirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML", new object[] { 
                $"Πρόκειται να αλλάξετε την κατάσταση της Θέσης Πρακτικής σε '{newStatus}'. Είστε σίγουρος/η; <br>"
            });

            if (!isConfirmed)
                return;
        }

        // Retrieve the internship from the database
        var internship = await dbContext.CompanyInternships
            .FirstOrDefaultAsync(i => i.Id == internshipId);

        if (internship != null)
        {
            // Update the status
            internship.CompanyUploadedInternshipStatus = newStatus;

            // If the internship status is "Αποσυρμένη", update student applications
            if (newStatus == "Αποσυρμένη")
            {
                var rngForInternship = internship.RNGForInternshipUploadedAsCompany; // Updated property name

                // Retrieve all student applications for this internship
                var studentApplications = await dbContext.InternshipsApplied
                    .Where(a => a.RNGForInternshipApplied == rngForInternship)
                    .ToListAsync();

                // Update the status for each student application
                foreach (var application in studentApplications)
                {
                    application.InternshipStatusAppliedAtTheCompanySide = "Απορρίφθηκε (Απόσυρση Θέσεως Από Εταιρία)";
                    application.InternshipStatusAppliedAtTheStudentSide = "Απορρίφθηκε (Απόσυρση Θέσεως Από Εταιρία)";
                }
            }

            // Save all changes
            await dbContext.SaveChangesAsync();

            // Reload data and refresh UI
            await LoadInternships();
            var tabUrl = $"{NavigationManager.Uri.Split('?')[0]}#internships";
            NavigationManager.NavigateTo(tabUrl, true);
            await Task.Delay(500);
            await JS.InvokeVoidAsync("activateTab", "internships");
        }
    }



    private async Task UpdateInternshipStatusAsProfessor(int internshipId, string newStatus)
    {
        // Retrieve the internship from the database
        var internship = await dbContext.ProfessorInternships
            .FirstOrDefaultAsync(i => i.Id == internshipId);

        if (internship != null)
        {
            // Update the status
            internship.ProfessorUploadedInternshipStatus = newStatus;

            // If the internship status is "Αποσυρμένη", update student applications
            if (newStatus == "Αποσυρμένη")
            {
                var rngForInternship = internship.RNGForInternshipUploadedAsProfessor; // Updated property name

                // Retrieve all student applications for this internship
                var studentApplications = await dbContext.ProfessorInternshipsApplied
                    .Where(a => a.RNGForProfessorInternshipApplied == rngForInternship)
                    .ToListAsync();

                // Update the status for each student application
                foreach (var application in studentApplications)
                {
                    application.InternshipStatusAppliedAtTheProfessorSide = "Απορρίφθηκε (Απόσυρση Θέσεως Από Καθηγητή)";
                    application.InternshipStatusAppliedAtTheStudentSide = "Απορρίφθηκε (Απόσυρση Θέσεως Από Καθηγητή)";
                }
            }

            // Save all changes
            await dbContext.SaveChangesAsync();

            // Reload data and refresh UI
            await LoadProfessorInternships();
            var tabUrl = $"{NavigationManager.Uri.Split('?')[0]}#professor-internships";
            NavigationManager.NavigateTo(tabUrl, true);
            await Task.Delay(500);
            await JS.InvokeVoidAsync("activateTab", "professor-internships");
        }
    }


    private async Task UpdateJobStatusAsCompany(int jobId, string newStatus)
    {
        // Show confirmation dialog only if the new status is NOT "Μη Δημοσιευμένη"
        if (newStatus != "Μη Δημοσιευμένη")
        {
            var isConfirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML", new object[] { 
                $"Πρόκειται να αλλάξετε την κατάσταση αυτής της Θέσης Εργασίας σε <strong>{newStatus}</strong>. <br><br>" +
                "<strong style='color: red;'>Είστε σίγουρος/η;</strong>"
            });

            if (!isConfirmed) return;
        }

        // Retrieve the job from the database
        var job = await dbContext.CompanyJobs
            .FirstOrDefaultAsync(i => i.Id == jobId);

        if (job != null)
        {
            // Update the job status
            job.PositionStatus = newStatus;

            // If the job status is "Αποσυρμένη", update student applications
            if (newStatus == "Αποσυρμένη")
            {
                var rngForJob = job.RNGForPositionUploaded;

                // Get all applications for this job
                var applications = await dbContext.CompanyJobsApplied
                    .Where(a => a.RNGForCompanyJobApplied == rngForJob)
                    .ToListAsync();

                foreach (var application in applications)
                {
                    // Update status directly on the main application entity
                    application.CompanyPositionStatusAppliedAtTheCompanySide = 
                        "Απορρίφθηκε (Απόσυρση Θέσεως Από Εταιρία)";
                    application.CompanyPositionStatusAppliedAtTheStudentSide = 
                        "Απορρίφθηκε (Απόσυρση Θέσεως Από Εταιρία)";
                }
            }

            await dbContext.SaveChangesAsync();
            await LoadJobs();

            // Refresh with tab focus
            var tabUrl = $"{NavigationManager.Uri.Split('?')[0]}#jobs";
            NavigationManager.NavigateTo(tabUrl, true);
            await Task.Delay(500);
            await JS.InvokeVoidAsync("activateTab", "jobs");
        }
    }




    private async Task UpdateThesisStatusAsCompany(int companythesisId, string newCompanyThesisStatus)
    {
        try
        {
            // Skip confirmation dialog if the new status is "Μη Δημοσιευμένη"
            if (newCompanyThesisStatus != "Μη Δημοσιευμένη")
            {
                bool isConfirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML", new object[] { 
                    $"Πρόκειται να αλλάξετε την κατάσταση της Διπλωματικής Εργασίας σε '{newCompanyThesisStatus}'. Είστε σίγουρος/η; <br>"
                });

                if (!isConfirmed) return;
            }

            using var transaction = await dbContext.Database.BeginTransactionAsync();
        
            try
            {
                // Retrieve the thesis from the database
                var companyThesis = await dbContext.CompanyTheses
                    .FirstOrDefaultAsync(i => i.Id == companythesisId);

                if (companyThesis == null)
                {
                    await JS.InvokeVoidAsync("confirmActionWithHTML2", "Δεν βρέθηκε η διπλωματική εργασία.");
                    return;
                }

                // Update the status
                companyThesis.CompanyThesisStatus = newCompanyThesisStatus;
                await dbContext.SaveChangesAsync();

                // Handle withdrawn status
                if (newCompanyThesisStatus == "Αποσυρμένη")
                {
                    var studentApplications = await dbContext.CompanyThesesApplied
                        .Where(a => a.RNGForCompanyThesisApplied == companyThesis.RNGForThesisUploadedAsCompany)
                        .ToListAsync();

                    foreach (var application in studentApplications)
                    {
                        application.CompanyThesisStatusAppliedAtCompanySide = "Απορρίφθηκε (Απόσυρση Θέσεως Από Εταιρία)";
                        application.CompanyThesisStatusAppliedAtStudentSide = "Απορρίφθηκε (Απόσυρση Θέσεως Από Εταιρία)";
                    }

                    await dbContext.SaveChangesAsync();
                }

                await transaction.CommitAsync();

                // Reload data and update UI
                await LoadThesesAsCompany();
                StateHasChanged();

                // Navigate to the specific tab
                var tabUrl = $"{NavigationManager.Uri.Split('?')[0]}#companythesis";
                NavigationManager.NavigateTo(tabUrl, true);
                await Task.Delay(500);
                await JS.InvokeVoidAsync("activateTab", "companythesis");
            }
            catch (Exception ex)
            {
                await transaction.RollbackAsync();
                Console.WriteLine($"Error updating thesis status: {ex}");
                await JS.InvokeVoidAsync("confirmActionWithHTML2", 
                    $"Σφάλμα κατά την ενημέρωση κατάστασης: {ex.Message}");
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Unexpected error: {ex}");
            await JS.InvokeVoidAsync("confirmActionWithHTML2", 
                "Προέκυψε σφάλμα κατά την επεξεργασία της αίτησης.");
        }
    }





    private void OnAreaCheckboxChanged(ChangeEventArgs e, string areaName)
    {
        if (bool.TryParse(e.Value?.ToString(), out var isChecked))
        {
            if (isChecked)
            {
                if (!selectedAreas.Contains(areaName))
                {
                    selectedAreas.Add(areaName);
                }
            }
            else
            {
                selectedAreas.Remove(areaName);
            }
        }
    }

    private void ToggleInternshipAreasVisibility()
    {
        isInternshipAreasVisible = !isInternshipAreasVisible;
        StateHasChanged();
    }

    private async Task ToggleInternshipExpanded(long internshipId)
    {
        Console.WriteLine($"ToggleInternshipExpanded called for internship: {internshipId}");

        if (expandedInternships.ContainsKey(internshipId))
        {
            expandedInternships[internshipId] = !expandedInternships[internshipId];
        }
        else
        {
            expandedInternships[internshipId] = true;
        }

        if (expandedInternships[internshipId])
        {
            if (!internshipApplicantsMap.ContainsKey(internshipId))
            {
                internshipApplicantsMap[internshipId] = await GetApplicantsForInternships(internshipId);
                await LoadCompanyInternshipApplicantData();
            }
        }
        else
        {
            internshipApplicantsMap.Remove(internshipId);
        }

        StateHasChanged();
    }

    private async Task ToggleProfessorInternshipExpanded(long internshipId)
    {
        Console.WriteLine($"ToggleProfessorInternshipExpanded called for internship: {internshipId}");

        // Toggle expansion state
        if (expandedProfessorInternships.ContainsKey(internshipId))
        {
            expandedProfessorInternships[internshipId] = !expandedProfessorInternships[internshipId];
        }
        else
        {
            expandedProfessorInternships[internshipId] = true;
        }

        // Load data if expanding
        if (expandedProfessorInternships[internshipId])
        {
            if (!professorInternshipApplicantsMap.ContainsKey(internshipId))
            {
                professorInternshipApplicantsMap[internshipId] = await GetApplicantsForProfessorInternship(internshipId);
                await LoadProfessorInternshipApplicantData();
            }
        }
    
        StateHasChanged();
    }



    private async Task<IEnumerable<InternshipApplied>> GetApplicantsForInternships(long internshipId)
    {
        var internship = await dbContext.CompanyInternships
            .Where(i => i.RNGForInternshipUploadedAsCompany == internshipId) // Updated property name
            .FirstOrDefaultAsync();

        if (internship == null)
        {
            return Enumerable.Empty<InternshipApplied>();
        }

        return await dbContext.InternshipsApplied
            .Where(a => a.RNGForInternshipApplied == internshipId)
            .Include(a => a.StudentDetails) 
            .AsNoTracking()
            .ToListAsync();
    }



    private void ToggleProfessorInternshipApplicants(long professorinternshipRNG)
    {
        if (expandedProfessorInternships.ContainsKey(professorinternshipRNG))
        {
            expandedProfessorInternships[professorinternshipRNG] = !expandedProfessorInternships[professorinternshipRNG];
        }
        else
        {
            expandedProfessorInternships[professorinternshipRNG] = true;
        }
        StateHasChanged();
        Console.WriteLine($"Internship ID: {professorinternshipRNG}, Expanded: {expandedProfessorInternships[professorinternshipRNG]}");
    }



    private async Task ToggleProfessorThesisExpanded(long thesisRNG)
    {
        Console.WriteLine($"ToggleProfessorThesisExpanded called for thesis: {thesisRNG}");

        // Toggle expansion state
        if (expandedTheses.ContainsKey(thesisRNG))
        {
            expandedTheses[thesisRNG] = !expandedTheses[thesisRNG];
        }
        else
        {
            expandedTheses[thesisRNG] = true;
        }

        // Load data if expanding
        if (expandedTheses[thesisRNG])
        {
            if (!professorThesisApplicantsMap.ContainsKey(thesisRNG))
            {
                professorThesisApplicantsMap[thesisRNG] = await GetApplicantsForProfessorThesis(thesisRNG);
                await LoadProfessorThesisApplicantData();
            }
        }
    
        StateHasChanged();
    }

    private async Task LoadProfessorThesisApplicantData()
    {
        try 
        {
            var studentEmails = professorThesisApplicantsMap.Values
                .SelectMany(x => x)
                .Select(a => a.StudentEmailAppliedForProfessorThesis.ToLower())
                .Distinct()
                .ToList();

            var students = await dbContext.Students
                .Where(s => studentEmails.Contains(s.Email.ToLower()))
                .Select(s => new Student {
                    Id = s.Id,
                    Student_UniqueID = s.Student_UniqueID,
                    Email = s.Email,
                    Image = s.Image,
                    Name = s.Name,
                    Surname = s.Surname,
                    Telephone = s.Telephone,
                    PermanentAddress = s.PermanentAddress,
                    PermanentRegion = s.PermanentRegion,
                    PermanentTown = s.PermanentTown,
                    Attachment = s.Attachment,
                    LinkedInProfile = s.LinkedInProfile,
                    PersonalWebsite = s.PersonalWebsite,
                    Transport = s.Transport,
                    RegNumber = s.RegNumber,
                    University = s.University,
                    Department = s.Department,
                    EnrollmentDate = s.EnrollmentDate,
                    StudyYear = s.StudyYear,
                    LevelOfDegree = s.LevelOfDegree,
                    AreasOfExpertise = s.AreasOfExpertise,
                    Keywords = s.Keywords,
                    ExpectedGraduationDate = s.ExpectedGraduationDate,
                    CompletedECTS = s.CompletedECTS
                })
                .AsNoTracking()
                .ToListAsync();

            //studentDataCache.Clear(); TO EVGALA 11/09/2025 GIATI DEN EKANE RENDER TOUS APPLICANTS STO INTERNSHIP
            foreach (var student in students)
            {
                studentDataCache[student.Email.ToLower()] = student;
            }

            Console.WriteLine($"Loaded {students.Count} professor thesis student records");
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading professor thesis student data: {ex.Message}");
        }
    }


    private async Task ToggleJobsExpanded(long positionId)
    {
        if (expandedJobs.ContainsKey(positionId))
        {
            expandedJobs[positionId] = !expandedJobs[positionId];
        }
        else
        {
            expandedJobs[positionId] = true;
        }

        if (expandedJobs[positionId])
        {
            if (!jobApplicantsMap.ContainsKey(positionId))
            {
                jobApplicantsMap[positionId] = await GetApplicantsForJobs(positionId);
                await LoadCompanyJobApplicantData(); 
            }
        }
        else
        {
            jobApplicantsMap.Remove(positionId);
        }

        StateHasChanged();
    }


    private async Task ToggleCompanyThesesExpanded(long companyThesisRNG)
    {
        if (expandedCompanyTheses.ContainsKey(companyThesisRNG))
        {
            expandedCompanyTheses[companyThesisRNG] = !expandedCompanyTheses[companyThesisRNG];
        }
        else
        {
            expandedCompanyTheses[companyThesisRNG] = true;
        }

        if (expandedCompanyTheses[companyThesisRNG])
        {
            if (!companyThesisApplicantsMap.ContainsKey(companyThesisRNG))
            {
                companyThesisApplicantsMap[companyThesisRNG] = await GetApplicantsForCompanyThesis(companyThesisRNG);
                await LoadCompanyThesisApplicantData(); // Add this equivalent method
            }
        }
        else
        {
            companyThesisApplicantsMap.Remove(companyThesisRNG);
        }

        StateHasChanged();
    }





    private async Task ToggleCompanyThesesExpandedForProfessorInterest(long companythesisRNG)
    {
        Console.WriteLine($"ToggleThesesExpandedProfessorInterest called for position: {companythesisRNG}");

        if (expandedCompanyThesesForProfessorInterest.ContainsKey(companythesisRNG))
        {
            expandedCompanyThesesForProfessorInterest[companythesisRNG] = !expandedCompanyThesesForProfessorInterest[companythesisRNG];
        }
        else
        {
            expandedCompanyThesesForProfessorInterest[companythesisRNG] = true;
        }

        if (expandedCompanyThesesForProfessorInterest[companythesisRNG])
        {
            if (!companyThesesProfessorsMap.ContainsKey(companythesisRNG))
            {
                // Load interested professors for this thesis
                var thesisWithProfessors = await dbContext.CompanyTheses
                    .Include(t => t.ProfessorInterested)
                    .Where(t => t.RNGForThesisUploadedAsCompany == companythesisRNG && 
                               t.IsProfessorInteresetedInCompanyThesis)
                    .ToListAsync();

                companyThesesProfessorsMap[companythesisRNG] = thesisWithProfessors;
            
                // Load professor data if not already cached
                await LoadProfessorDataWhenHeShowsInterestForCompanyTheses(thesisWithProfessors);
            }
        }

        StateHasChanged();
    }

    private async Task LoadProfessorDataWhenHeShowsInterestForCompanyTheses(List<CompanyThesis> theses)
    {
        try 
        {
            // Get all unique professor emails from interested theses
            var professorEmails = theses
                .Where(t => !string.IsNullOrEmpty(t.ProfessorEmailInterestedInCompanyThesis))
                .Select(t => t.ProfessorEmailInterestedInCompanyThesis.ToLower())
                .Distinct()
                .ToList();

            // Load ALL professor fields according to your model
            var professors = await dbContext.Professors
                .Where(p => professorEmails.Contains(p.ProfEmail.ToLower()))
                .Select(p => new Professor {
                    Id = p.Id,
                    ProfEmail = p.ProfEmail,
                    Professor_UniqueID = p.Professor_UniqueID,
                    ProfImage = p.ProfImage,
                    ProfName = p.ProfName,
                    ProfSurname = p.ProfSurname,
                    ProfUniversity = p.ProfUniversity,
                    ProfDepartment = p.ProfDepartment,
                    ProfVahmidaDEP = p.ProfVahmidaDEP,
                    ProfWorkTelephone = p.ProfWorkTelephone,
                    ProfPersonalTelephone = p.ProfPersonalTelephone,
                    ProfPersonalTelephoneVisibility = p.ProfPersonalTelephoneVisibility,
                    ProfPersonalWebsite = p.ProfPersonalWebsite,
                    ProfLinkedInSite = p.ProfLinkedInSite,
                    ProfScholarProfile = p.ProfScholarProfile,
                    ProfOrchidProfile = p.ProfOrchidProfile,
                    ProfGeneralFieldOfWork = p.ProfGeneralFieldOfWork,
                    ProfGeneralSkills = p.ProfGeneralSkills,
                    ProfPersonalDescription = p.ProfPersonalDescription,
                    ProfCVAttachment = p.ProfCVAttachment,
                    ProfRegistryNumber = p.ProfRegistryNumber,
                    ProfCourses = p.ProfCourses
                })
                .AsNoTracking()
                .ToListAsync();

            // Initialize cache if null
            professorDataCache ??= new Dictionary<string, Professor>();

            // Update cache
            foreach (var professor in professors)
            {
                professorDataCache[professor.ProfEmail.ToLower()] = professor;
            }

            Console.WriteLine($"Loaded {professors.Count} professor records for interested theses");
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading professor data: {ex.Message}");
        }
    }


    private void ToggleProfessorThesesExpandedForCompanyInterest(long professorthesisRNG)
    {
        Console.WriteLine($"ToggleThesesExpandedCompanyInterest called for position: {professorthesisRNG}");

        if (expandedProfessorThesesForCompanyInterest.ContainsKey(professorthesisRNG))
        {
            expandedProfessorThesesForCompanyInterest[professorthesisRNG] = !expandedProfessorThesesForCompanyInterest[professorthesisRNG];
        }
        else
        {
            expandedProfessorThesesForCompanyInterest[professorthesisRNG] = true;
        }

        // Ensure the UI is updated
        StateHasChanged();
    }


    private async Task<IEnumerable<InternshipApplied>> GetApplicants(long companyInternshipRNG)
    {
        // Get the internship details including the position information
        var internship = await dbContext.CompanyInternships
            .Where(i => i.RNGForInternshipUploadedAsCompany == companyInternshipRNG) // Updated property
            .Select(i => new {
                i.CompanyInternshipTitle,
                RNGForInternshipUploadedAsCompany = i.RNGForInternshipUploadedAsCompany // Updated property
            })
            .FirstOrDefaultAsync();

        if (internship == null)
            return Enumerable.Empty<InternshipApplied>();

        // Get all applications for this internship (now matching by RNG)
        return await dbContext.InternshipsApplied
            .Include(a => a.StudentDetails)
            .Include(a => a.CompanyDetails)
            .Where(a => a.RNGForInternshipApplied == companyInternshipRNG)
            .ToListAsync();
    }

    private async Task<IEnumerable<ProfessorInternshipApplied>> GetProfessorInternshipApplicants(long professorInternshipRNG)
    {
        // Get the professor internship details including the position information
        var internship = await dbContext.ProfessorInternships
            .Include(i => i.Professor) // Include professor details
            .Where(i => i.RNGForInternshipUploadedAsProfessor == professorInternshipRNG) // Updated property name
            .Select(i => new {
                i.ProfessorInternshipTitle,
                i.RNGForInternshipUploadedAsProfessor, // Updated property name
                ProfessorName = i.Professor.ProfName, // From navigation property
                ProfessorSurname = i.Professor.ProfSurname // From navigation property
            })
            .FirstOrDefaultAsync();

        if (internship == null)
            return Enumerable.Empty<ProfessorInternshipApplied>();

        // Get all applications for this internship (matching by RNG)
        return await dbContext.ProfessorInternshipsApplied
            .Include(a => a.StudentDetails)
            .Include(a => a.ProfessorDetails)
            .Where(a => a.RNGForProfessorInternshipApplied == professorInternshipRNG)
            .ToListAsync();
    }



    private async Task<IEnumerable<CompanyJobApplied>> GetApplicantsForJobs(long positionId)
    {
        return await dbContext.CompanyJobsApplied
            .Where(a => a.RNGForCompanyJobApplied == positionId)
            .Include(a => a.StudentDetails)  // Make sure these are included
            .Include(a => a.CompanyDetails)
            .AsNoTracking()
            .ToListAsync();
    }


    private async Task<IEnumerable<CompanyThesisApplied>> GetApplicantsForCompanyThesis(long companyThesisRNG)
    {
        return await dbContext.CompanyThesesApplied
            .Where(a => a.RNGForCompanyThesisApplied == companyThesisRNG)
            .Include(a => a.StudentDetails)  // Include student details
            .Include(a => a.CompanyDetails)  // Include company details
            .AsNoTracking()  // Add no tracking for better performance
            .ToListAsync();
    }

    private async Task<List<ProfessorThesisApplied>> GetApplicantsForProfessorThesis(long thesisRNG)
    {
        return await dbContext.ProfessorThesesApplied
            .Where(a => a.RNGForProfessorThesisApplied == thesisRNG)
            .Include(a => a.StudentDetails)
            .Include(a => a.ProfessorDetails)
            .AsNoTracking() 
            .ToListAsync();
    }



    private async Task AcceptInternshipApplicationAsCompany_MadeByStudent(long internshipRNG, string studentUniqueID)
    {
        try
        {
            // Fetch application with related internship (no need to include details for status updates)
            var application = await dbContext.InternshipsApplied
                .Join(dbContext.CompanyInternships,
                    applied => applied.RNGForInternshipApplied,
                    internship => internship.RNGForInternshipUploadedAsCompany, // Updated property
                    (applied, internship) => new { Application = applied, Internship = internship })
                .FirstOrDefaultAsync(x => x.Application.RNGForInternshipApplied == internshipRNG &&
                                        x.Application.StudentUniqueIDAppliedForInternship == studentUniqueID);

            if (application == null)
            {
                await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                    "Δεν βρέθηκε η Αίτηση ή ο Φοιτητής").AsTask());
                return;
            }

            // Update status directly on the main application entity
            application.Application.InternshipStatusAppliedAtTheCompanySide = "Επιτυχής";
            application.Application.InternshipStatusAppliedAtTheStudentSide = "Επιτυχής";

            await dbContext.SaveChangesAsync();

            try
            {
                // Get student details from your user service
                var student = await GetStudentDetails(application.Application.StudentEmailAppliedForInternship);

                // Send acceptance email to student
                await InternshipEmailService.SendAcceptanceEmailAsCompanyToStudentAfterHeAppliedForInternshipPosition(
                    application.Application.StudentEmailAppliedForInternship.Trim(),
                    student?.Name,
                    student?.Surname,
                    application.Internship.CompanyInternshipTitle,
                    application.Internship.Company?.CompanyName, // Updated to use navigation property with fallback
                    application.Application.RNGForInternshipAppliedAsStudent_HashedAsUniqueID,
                    student?.Attachment
                );

                // Send notification email to company
                await InternshipEmailService.SendAcceptanceConfirmationEmailToCompanyAfterStudentAppliedForInternshipPosition(
                    application.Application.CompanyEmailWhereStudentAppliedForInternship.Trim(),
                    application.Internship.Company?.CompanyName, // Updated to use navigation property with fallback
                    student?.Name,
                    student?.Surname,
                    application.Application.RNGForInternshipAppliedAsStudent_HashedAsUniqueID,
                    application.Internship.CompanyInternshipTitle
                );

                await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                    $"Ενημερώσεις Αποδοχής στάλθηκαν τόσο στον Φοιτητή " +
                    $"({student?.Name} {student?.Surname}) " +
                    $"όσο και στην Εταιρεία ({application.Internship.Company?.CompanyName})").AsTask());

                StateHasChanged();
            }
            catch (FormatException)
            {
                Console.WriteLine("Invalid email address format.");
                await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                    "Μη έγκυρη διεύθυνση email.").AsTask());
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error accepting internship: {ex.Message} \n StackTrace: {ex.StackTrace}");
            await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                $"Παρουσιάστηκε σφάλμα: {ex.Message}").AsTask());
        }
    }

    private async Task RejectInternshipApplicationAsCompany_MadeByStudent(long internshipRNG, string studentUniqueID)
    {
        try
        {
            // Fetch application with related internship
            var application = await dbContext.InternshipsApplied
                .Join(dbContext.CompanyInternships,
                    applied => applied.RNGForInternshipApplied,
                    internship => internship.RNGForInternshipUploadedAsCompany, // Updated property
                    (applied, internship) => new { Application = applied, Internship = internship })
                .FirstOrDefaultAsync(x => x.Application.RNGForInternshipApplied == internshipRNG &&
                                       x.Application.StudentUniqueIDAppliedForInternship == studentUniqueID);

            if (application == null)
            {
                await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                    "Δεν βρέθηκε η Αίτηση ή ο Φοιτητής").AsTask());
                return;
            }

            // Update status directly on the main application entity
            application.Application.InternshipStatusAppliedAtTheCompanySide = "Απορρίφθηκε";
            application.Application.InternshipStatusAppliedAtTheStudentSide = "Απορρίφθηκε";

            await dbContext.SaveChangesAsync();

            try
            {
                // Get student details from your user service
                var student = await GetStudentDetails(application.Application.StudentEmailAppliedForInternship);

                // Send rejection email to student
                await InternshipEmailService.SendRejectionEmailAsCompanyToStudentAfterHeAppliedForInternshipPosition(
                    application.Application.StudentEmailAppliedForInternship.Trim(),
                    student?.Name,
                    student?.Surname,
                    application.Internship.CompanyInternshipTitle,
                    application.Internship.Company?.CompanyName, // Updated to use navigation property with fallback
                    application.Application.RNGForInternshipAppliedAsStudent_HashedAsUniqueID,
                    student?.Attachment
                );

                // Send notification email to company
                await InternshipEmailService.SendRejectionConfirmationEmailToCompanyAfterStudentAppliedForInternshipPosition(
                    application.Application.CompanyEmailWhereStudentAppliedForInternship.Trim(),
                    application.Internship.Company?.CompanyName, // Updated to use navigation property with fallback
                    student?.Name,
                    student?.Surname,
                    application.Application.RNGForInternshipAppliedAsStudent_HashedAsUniqueID,
                    application.Internship.CompanyInternshipTitle
                );

                await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2",
                    $"Η Απόρριψη της Αίτησης κοινοποιήθηκε μέσω Email τόσο στον Φοιτητή " +
                    $"({student?.Name} {student?.Surname}) " +
                    $"όσο και στην Εταιρεία ({application.Internship.Company?.CompanyName})").AsTask());

                StateHasChanged();
            }
            catch (FormatException)
            {
                Console.WriteLine("Invalid email address format.");
                await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                    "Μη έγκυρη διεύθυνση email.").AsTask());
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error rejecting internship: {ex.Message} \n StackTrace: {ex.StackTrace}");
            await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                $"Παρουσιάστηκε σφάλμα: {ex.Message}").AsTask());
        }
    }



    private async Task ConfirmAndAcceptInternship(long internshipRNG, string studentUniqueID)
    {
        bool isConfirmedForInternships = await JS.InvokeAsync<bool>(
            "confirmActionWithHTML", 
            "- ΑΠΟΔΟΧΗ ΑΙΤΗΣΗΣ - \n Η ενέργεια αυτή δεν θα μπορεί να αναιρεθεί. Είστε σίγουρος/η;"
        );
    
        if (isConfirmedForInternships)
        {
            await AcceptInternshipApplicationAsCompany_MadeByStudent(internshipRNG, studentUniqueID);
            actionsPerformedToAcceptorRejectInternshipsAsCompany = true;
        }
    }

    private async Task ConfirmAndRejectInternship(long internshipRNG, string studentUniqueID)
    {
        bool isConfirmedForInternships = await JS.InvokeAsync<bool>(
            "confirmActionWithHTML", 
            "- ΑΠΟΡΡΙΨΗ ΑΙΤΗΣΗΣ - \n Η ενέργεια αυτή δεν θα μπορεί να αναιρεθεί. Είστε σίγουρος/η;"
        );
    
        if (isConfirmedForInternships)
        {
            await RejectInternshipApplicationAsCompany_MadeByStudent(internshipRNG, studentUniqueID);
            actionsPerformedToAcceptorRejectInternshipsAsCompany = true; 
        }
    }

    private async Task AcceptJobApplicationAsCompany_MadeByStudent(long jobRNG, string studentUniqueID)
    {
        try
        {
            // Fetch application with related job (no need to include details for status updates)
            var application = await dbContext.CompanyJobsApplied
                .Join(dbContext.CompanyJobs,
                    applied => applied.RNGForCompanyJobApplied,
                    job => job.RNGForPositionUploaded,
                    (applied, job) => new { Application = applied, Job = job })
                .FirstOrDefaultAsync(x => x.Application.RNGForCompanyJobApplied == jobRNG &&
                                        x.Application.StudentUniqueIDAppliedForCompanyJob == studentUniqueID);

            if (application == null)
            {
                await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                    "Δεν βρέθηκε η Αίτηση ή ο Φοιτητής").AsTask());
                return;
            }

            // Update status directly on the main application entity
            application.Application.CompanyPositionStatusAppliedAtTheCompanySide = "Επιτυχής";
            application.Application.CompanyPositionStatusAppliedAtTheStudentSide = "Επιτυχής";

            await dbContext.SaveChangesAsync();

            try
            {
                // Get student details from your user service
                var student = await GetStudentDetails(application.Application.StudentEmailAppliedForCompanyJob);
    
                // Ensure Company data is loaded
                if (application.Job.Company == null)
                {
                    await dbContext.Entry(application.Job)
                        .Reference(j => j.Company)
                        .LoadAsync();
                }

                // Send acceptance email to student
                await InternshipEmailService.SendAcceptanceEmailAsCompanyToStudentAfterHeAppliedForJobPosition(
                    application.Application.StudentEmailAppliedForCompanyJob.Trim(),
                    student?.Name,
                    student?.Surname,
                    application.Job.PositionTitle,
                    application.Job.Company?.CompanyName, // Get from Company navigation property
                    application.Application.RNGForCompanyJobAppliedAsStudent_HashedAsUniqueID,
                    student?.Attachment
                );

                // Send notification email to company
                await InternshipEmailService.SendAcceptanceConfirmationEmailToCompanyAfterStudentAppliedForJobPosition(
                    application.Application.CompanysEmailWhereStudentAppliedForCompanyJob.Trim(),
                    application.Job.Company?.CompanyName, // Get from Company navigation property
                    student?.Name,
                    student?.Surname,
                    application.Application.RNGForCompanyJobAppliedAsStudent_HashedAsUniqueID,
                    application.Job.PositionTitle
                );

                await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                    $"Ενημερώσεις Αποδοχής στάλθηκαν τόσο στον Φοιτητή " +
                    $"({student?.Name} {student?.Surname}) " +
                    $"όσο και στην Εταιρεία ({application.Job.Company?.CompanyName})").AsTask());

                StateHasChanged();
            }
            catch (FormatException)
            {
                Console.WriteLine("Invalid email address format.");
                await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                    "Μη έγκυρη διεύθυνση email.").AsTask());
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error accepting job: {ex.Message} \n StackTrace: {ex.StackTrace}");
            await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                $"Παρουσιάστηκε σφάλμα: {ex.Message}").AsTask());
        }
    }

    private async Task RejectJobApplicationAsCompany_MadeByStudent(long jobRNG, string studentUniqueID)
    {
        try
        {
            // Fetch application with related job (no need to include details for status updates)
            var application = await dbContext.CompanyJobsApplied
                .Join(dbContext.CompanyJobs,
                    applied => applied.RNGForCompanyJobApplied,
                    job => job.RNGForPositionUploaded,
                    (applied, job) => new { Application = applied, Job = job })
                .FirstOrDefaultAsync(x => x.Application.RNGForCompanyJobApplied == jobRNG &&
                                       x.Application.StudentUniqueIDAppliedForCompanyJob == studentUniqueID);

            if (application == null)
            {
                await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                    "Δεν βρέθηκε η Αίτηση ή ο Φοιτητής").AsTask());
                return;
            }

            // Update status directly on the main application entity
            application.Application.CompanyPositionStatusAppliedAtTheCompanySide = "Απορρίφθηκε";
            application.Application.CompanyPositionStatusAppliedAtTheStudentSide = "Απορρίφθηκε";

            await dbContext.SaveChangesAsync();

            try
            {
                // Get student details from your user service
                var student = await GetStudentDetails(application.Application.StudentEmailAppliedForCompanyJob);
    
                // Ensure Company data is loaded if not already included
                if (application.Job.Company == null)
                {
                    await dbContext.Entry(application.Job)
                        .Reference(j => j.Company)
                        .LoadAsync();
                }

                // Send rejection email to student
                await InternshipEmailService.SendRejectionEmailAsCompanyToStudentAfterHeAppliedForJobPosition(
                    application.Application.StudentEmailAppliedForCompanyJob.Trim(),
                    student?.Name,
                    student?.Surname,
                    application.Job.PositionTitle,
                    application.Job.Company?.CompanyName, // From Company navigation property
                    application.Application.RNGForCompanyJobAppliedAsStudent_HashedAsUniqueID,
                    student?.Attachment
                );

                // Send notification email to company
                await InternshipEmailService.SendRejectionConfirmationEmailToCompanyAfterStudentAppliedForJobPosition(
                    application.Application.CompanysEmailWhereStudentAppliedForCompanyJob.Trim(),
                    application.Job.Company?.CompanyName, // From Company navigation property
                    student?.Name,
                    student?.Surname,
                    application.Application.RNGForCompanyJobAppliedAsStudent_HashedAsUniqueID,
                    application.Job.PositionTitle
                );

                await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2",
                    $"Η Απόρριψη της Αίτησης κοινοποιήθηκε μέσω Email τόσο στον Φοιτητή " +
                    $"({student?.Name} {student?.Surname}) " +
                    $"όσο και στην Εταιρεία ({application.Job.Company?.CompanyName})").AsTask());

                StateHasChanged();
            }
            catch (FormatException)
            {
                Console.WriteLine("Invalid email address format.");
                await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                    "Μη έγκυρη διεύθυνση email.").AsTask());
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error rejecting job: {ex.Message} \n StackTrace: {ex.StackTrace}");
            await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                $"Παρουσιάστηκε σφάλμα: {ex.Message}").AsTask());
        }
    }

    private async Task ConfirmAndAcceptJob(long jobRNG, string studentUniqueID)
    {
        bool isConfirmedForJobs = await JS.InvokeAsync<bool>("confirmActionWithHTML", 
            "- ΑΠΟΔΟΧΗ ΑΙΤΗΣΗΣ - \n Η ενέργεια αυτή δεν θα μπορεί να αναιρεθεί. Είστε σίγουρος/η;");
    
        if (isConfirmedForJobs)
        {
            await AcceptJobApplicationAsCompany_MadeByStudent(jobRNG, studentUniqueID);
            actionsPerformedToAcceptorRejectJobsAsCompany = true;
        }
    }

    private async Task ConfirmAndRejectJob(long jobRNG, string studentUniqueID)
    {
        bool isConfirmedForJobs = await JS.InvokeAsync<bool>("confirmActionWithHTML", 
            "- ΑΠΟΡΡΙΨΗ ΑΙΤΗΣΗΣ - \n Η ενέργεια αυτή δεν θα μπορεί να αναιρεθεί. Είστε σίγουρος/η;");
    
        if (isConfirmedForJobs)
        {
            await RejectJobApplicationAsCompany_MadeByStudent(jobRNG, studentUniqueID);
            actionsPerformedToAcceptorRejectJobsAsCompany = true;
        }
    }

    private async Task AcceptThesisApplicationAsCompany_MadeByStudent(long companythesisId, string studentUniqueID)
    {
        try
        {
            // Fetch application with related thesis (similar to job approach)
            var application = await dbContext.CompanyThesesApplied
                .Join(dbContext.CompanyTheses,
                    applied => applied.RNGForCompanyThesisApplied,
                    thesis => thesis.RNGForThesisUploadedAsCompany,
                    (applied, thesis) => new { Application = applied, Thesis = thesis })
                .FirstOrDefaultAsync(x => x.Application.RNGForCompanyThesisApplied == companythesisId &&
                                        x.Application.StudentUniqueIDAppliedForThesis == studentUniqueID);

            if (application == null)
            {
                await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                    "Δεν βρέθηκε η Αίτηση ή ο Φοιτητής").AsTask());
                return;
            }

            // Update status directly on the main application entity
            application.Application.CompanyThesisStatusAppliedAtStudentSide = "Επιτυχής";
            application.Application.CompanyThesisStatusAppliedAtCompanySide = "Έχει γίνει Αποδοχή";

            await dbContext.SaveChangesAsync();

            try
            {
                // Get student details from your user service
                var student = await GetStudentDetails(application.Application.StudentEmailAppliedForThesis);
    
                // Get company name from navigation property with fallback
                var companyName = application.Thesis.Company?.CompanyName ?? "Άγνωστη Εταιρεία";

                // Send acceptance email to student
                await InternshipEmailService.SendAcceptanceEmailAsCompanyToStudentAfterHeAppliedForThesisPosition(
                    application.Application.StudentEmailAppliedForThesis.Trim(),
                    student?.Name,
                    student?.Surname,
                    application.Thesis.CompanyThesisTitle,
                    companyName,  // Using navigation property instead of CompanyNameUploadedThesis
                    application.Application.RNGForCompanyThesisAppliedAsStudent_HashedAsUniqueID,
                    student?.Attachment
                );

                // Send notification email to company
                await InternshipEmailService.SendAcceptanceConfirmationEmailToCompanyAfterStudentAppliedForThesisPosition(
                    application.Application.CompanyEmailWhereStudentAppliedForThesis.Trim(),
                    companyName,  // Using navigation property instead of CompanyNameUploadedThesis
                    student?.Name,
                    student?.Surname,
                    application.Application.RNGForCompanyThesisAppliedAsStudent_HashedAsUniqueID,
                    application.Thesis.CompanyThesisTitle
                );

                await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                    $"Ενημερώσεις Αποδοχής στάλθηκαν τόσο στον Φοιτητή " +
                    $"({student?.Name} {student?.Surname}) " +
                    $"όσο και στην Εταιρεία ({companyName})").AsTask());

                StateHasChanged();
            }
            catch (FormatException)
            {
                Console.WriteLine("Invalid email address format.");
                await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                    "Μη έγκυρη διεύθυνση email.").AsTask());
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error accepting thesis: {ex.Message} \n StackTrace: {ex.StackTrace}");
            await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                $"Παρουσιάστηκε σφάλμα: {ex.Message}").AsTask());
        }
    }

    private async Task RejectThesisApplicationAsCompany_MadeByStudent(long companythesisId, string studentUniqueID)
    {
        try
        {
            // Fetch application with related thesis (similar to job approach)
            var application = await dbContext.CompanyThesesApplied
                .Join(dbContext.CompanyTheses,
                    applied => applied.RNGForCompanyThesisApplied,
                    thesis => thesis.RNGForThesisUploadedAsCompany,
                    (applied, thesis) => new { Application = applied, Thesis = thesis })
                .FirstOrDefaultAsync(x => x.Application.RNGForCompanyThesisApplied == companythesisId &&
                                       x.Application.StudentUniqueIDAppliedForThesis == studentUniqueID);

            if (application == null)
            {
                await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                    "Δεν βρέθηκε η Αίτηση ή ο Φοιτητής").AsTask());
                return;
            }

            // Update status directly on the main application entity
            application.Application.CompanyThesisStatusAppliedAtCompanySide = "Έχει Απορριφθεί";
            application.Application.CompanyThesisStatusAppliedAtStudentSide = "Απορρίφθηκε";

            await dbContext.SaveChangesAsync();

            try
            {
                // Get student details from your user service (like in job version)
                var student = await GetStudentDetails(application.Application.StudentEmailAppliedForThesis);
    
                // Get company name from navigation property (with fallback)
                var companyName = application.Thesis.Company?.CompanyName ?? "Άγνωστη Εταιρεία";

                // Send rejection email to student (using joined thesis data)
                await InternshipEmailService.SendRejectionEmailAsCompanyToStudentAfterHeAppliedForThesisPosition(
                    application.Application.StudentEmailAppliedForThesis.Trim(),
                    student?.Name,
                    student?.Surname,
                    application.Thesis.CompanyThesisTitle, // From joined CompanyThesis
                    application.Application.RNGForCompanyThesisAppliedAsStudent_HashedAsUniqueID,
                    companyName // Using navigation property with fallback
                );

                // Send notification email to company (using joined thesis data)
                await InternshipEmailService.SendRejectionConfirmationEmailToCompanyAfterStudentAppliedForThesisPosition(
                    application.Application.CompanyEmailWhereStudentAppliedForThesis.Trim(),
                    companyName, // Using navigation property with fallback
                    student?.Name,
                    student?.Surname,
                    application.Application.RNGForCompanyThesisAppliedAsStudent_HashedAsUniqueID,
                    application.Thesis.CompanyThesisTitle // From joined CompanyThesis
                );

                await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2",
                    $"Η Απόρριψη της Αίτησης κοινοποιήθηκε μέσω Email τόσο στον Φοιτητή " +
                    $"({student?.Name} {student?.Surname}) " +
                    $"όσο και στην Εταιρεία ({companyName})").AsTask());

                StateHasChanged();
            }
            catch (FormatException)
            {
                Console.WriteLine("Invalid email address format.");
                await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                    "Μη έγκυρη διεύθυνση email.").AsTask());
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error rejecting thesis: {ex.Message} \n StackTrace: {ex.StackTrace}");
            await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                $"Παρουσιάστηκε σφάλμα: {ex.Message}").AsTask());
        }
    }

    private async Task ConfirmAndAcceptStudentThesisApplicationAsCompany(long companythesisId, string studentUniqueID)
    {
        bool isConfirmedFortStudentThesisApplications = await JS.InvokeAsync<bool>("confirmActionWithHTML", "- ΑΠΟΔΟΧΗ ΑΙΤΗΣΗΣ - \n Η ενέργεια αυτή δεν θα μπορεί να αναιρεθεί. Είστε σίγουρος/η;");
        if (isConfirmedFortStudentThesisApplications)
        {
            await AcceptThesisApplicationAsCompany_MadeByStudent(companythesisId, studentUniqueID);
            actionsPerformedToAcceptorRejectThesisAsCompany = true;
        }
    }

    private async Task ConfirmAndRejectStudentThesisApplicationAsCompany(long companythesisId, string studentUniqueID)
    {
        bool isConfirmedFortStudentThesisApplication = await JS.InvokeAsync<bool>("confirmActionWithHTML", "- ΑΠΟΡΡΙΨΗ ΑΙΤΗΣΗΣ - \n Η ενέργεια αυτή δεν θα μπορεί να αναιρεθεί. Είστε σίγουρος/η;");
        if (isConfirmedFortStudentThesisApplication)
        {
            await RejectThesisApplicationAsCompany_MadeByStudent(companythesisId, studentUniqueID);
            actionsPerformedToAcceptorRejectThesisAsCompany = true;
        }
    }

    private async Task AcceptThesisApplicationAsProfessor_MadeByStudent(long professorThesisId, string studentUniqueID)
    {
        try
        {
            // Fetch application with related thesis using join (consistent with company version)
            var application = await dbContext.ProfessorThesesApplied
                .Join(dbContext.ProfessorTheses,
                    applied => applied.RNGForProfessorThesisApplied,
                    thesis => thesis.RNGForThesisUploaded,
                    (applied, thesis) => new { Application = applied, Thesis = thesis })
                .FirstOrDefaultAsync(x => x.Application.Id == professorThesisId &&
                                       x.Application.StudentUniqueIDAppliedForProfessorThesis == studentUniqueID);

            if (application == null)
            {
                await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                    "Δεν βρέθηκε η Αίτηση ή ο Φοιτητής").AsTask());
                return;
            }

            // Update status directly on the application entity
            application.Application.ProfessorThesisStatusAppliedAtStudentSide = "Επιτυχής";
            application.Application.ProfessorThesisStatusAppliedAtProfessorSide = "Έχει γίνει Αποδοχή";

            await dbContext.SaveChangesAsync();

            try
            {
                // Get student details from navigation property with fallback
                var student = await GetStudentDetails(application.Application.StudentEmailAppliedForProfessorThesis);
            
                // Get professor name from navigation property with fallback
                var professorName = application.Thesis.Professor != null
                    ? $"{application.Thesis.Professor.ProfName} {application.Thesis.Professor.ProfSurname}"
                    : "Άγνωστος Καθηγητής";

                // Send acceptance email to student
                await InternshipEmailService.SendAcceptanceEmailAsProfessorToStudentAfterHeAppliedForThesisPosition(
                    application.Application.StudentEmailAppliedForProfessorThesis.Trim(),
                    student?.Name,
                    student?.Surname,
                    application.Thesis.ThesisTitle,
                    application.Application.RNGForProfessorThesisApplied_HashedAsUniqueID,
                    professorName
                );

                // Send notification email to professor
                await InternshipEmailService.SendAcceptanceConfirmationEmailToProfessorAfterStudentAppliedForThesisPosition(
                    application.Application.ProfessorEmailWhereStudentAppliedForProfessorThesis.Trim(),
                    professorName,
                    student?.Name,
                    student?.Surname,
                    application.Application.RNGForProfessorThesisApplied_HashedAsUniqueID,
                    application.Thesis.ThesisTitle
                );

                await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                    $"Ενημερώσεις Αποδοχής στάλθηκαν τόσο στον Φοιτητή " +
                    $"({student?.Name} {student?.Surname}) " +
                    $"όσο και στον Καθηγητή ({professorName})").AsTask());

                StateHasChanged();
            }
            catch (FormatException)
            {
                Console.WriteLine("Invalid email address format.");
                await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                    "Μη έγκυρη διεύθυνση email.").AsTask());
            }
            catch (Exception ex)
            {
                Console.WriteLine($"Email error: {ex.Message}");
                await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                    "Η αποδοχή καταγράφηκε, αλλά απέτυχε η αποστολή email").AsTask());
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error accepting thesis: {ex.Message}\n{ex.StackTrace}");
            await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                $"Παρουσιάστηκε σφάλμα: {ex.Message}").AsTask());
        }
    }

    private async Task RejectThesisApplicationAsProfessor_MadeByStudent(long professorThesisId, string studentUniqueID)
    {
        try
        {
            // Fetch application with related thesis using join (consistent with company version)
            var application = await dbContext.ProfessorThesesApplied
                .Join(dbContext.ProfessorTheses,
                    applied => applied.RNGForProfessorThesisApplied,
                    thesis => thesis.RNGForThesisUploaded,
                    (applied, thesis) => new { Application = applied, Thesis = thesis })
                .FirstOrDefaultAsync(x => x.Application.Id == professorThesisId &&
                                       x.Application.StudentUniqueIDAppliedForProfessorThesis == studentUniqueID);

            if (application == null)
            {
                await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                    "Δεν βρέθηκε η Αίτηση ή ο Φοιτητής").AsTask());
                return;
            }

            // Update status directly on the application entity
            application.Application.ProfessorThesisStatusAppliedAtProfessorSide = "Έχει Απορριφθεί";
            application.Application.ProfessorThesisStatusAppliedAtStudentSide = "Απορρίφθηκε";

            await dbContext.SaveChangesAsync();

            try
            {
                // Get student details from navigation property with fallback
                var student = await GetStudentDetails(application.Application.StudentEmailAppliedForProfessorThesis);
            
                // Get professor name from navigation property with fallback
                var professorName = application.Thesis.Professor != null
                    ? $"{application.Thesis.Professor.ProfName} {application.Thesis.Professor.ProfSurname}"
                    : "Άγνωστος Καθηγητής";

                // Send rejection email to student
                await InternshipEmailService.SendRejectionEmailAsProfessorToStudentAfterHeAppliedForThesisPosition(
                    application.Application.StudentEmailAppliedForProfessorThesis.Trim(),
                    student?.Name,
                    student?.Surname,
                    application.Thesis.ThesisTitle,
                    application.Application.RNGForProfessorThesisApplied_HashedAsUniqueID,
                    professorName
                );

                // Send notification email to professor
                await InternshipEmailService.SendRejectionConfirmationEmailToProfessorAfterStudentAppliedForThesisPosition(
                    application.Application.ProfessorEmailWhereStudentAppliedForProfessorThesis.Trim(),
                    professorName,
                    student?.Name,
                    student?.Surname,
                    application.Application.RNGForProfessorThesisApplied_HashedAsUniqueID,
                    application.Thesis.ThesisTitle
                );

                await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2",
                    $"Η Απόρριψη της Αίτησης κοινοποιήθηκε μέσω Email τόσο στον Φοιτητή " +
                    $"({student?.Name} {student?.Surname}) " +
                    $"όσο και στον Καθηγητή ({professorName})").AsTask());

                StateHasChanged();
            }
            catch (FormatException)
            {
                Console.WriteLine("Invalid email address format.");
                await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                    "Μη έγκυρη διεύθυνση email.").AsTask());
            }
            catch (Exception ex)
            {
                Console.WriteLine($"Email error: {ex.Message}");
                await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                    "Η απόρριψη καταγράφηκε, αλλά απέτυχε η αποστολή email").AsTask());
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error rejecting thesis: {ex.Message}\n{ex.StackTrace}");
            await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                $"Παρουσιάστηκε σφάλμα: {ex.Message}").AsTask());
        }
    }

    private async Task ConfirmAndAcceptProfessorThesis(long professorthesisId, string studentUniqueID)
    {
        bool isConfirmedForProfessorTheses = await JS.InvokeAsync<bool>("confirmActionWithHTML", "- ΑΠΟΔΟΧΗ ΑΙΤΗΣΗΣ - \n Η ενέργεια αυτή δεν θα μπορεί να αναιρεθεί. Είστε σίγουρος/η;");
        if (isConfirmedForProfessorTheses)
        {
            await AcceptThesisApplicationAsProfessor_MadeByStudent(professorthesisId, studentUniqueID);
            actionsPerformedToAcceptorRejectThesesAsProfessor = true;
        }
    }

    private async Task ConfirmAndRejectProfessorThesis(long professorthesisId, string studentUniqueID)
    {
        bool isConfirmedForProfessorTheses = await JS.InvokeAsync<bool>("confirmActionWithHTML", "- ΑΠΟΡΡΙΨΗ ΑΙΤΗΣΗΣ - \n Η ενέργεια αυτή δεν θα μπορεί να αναιρεθεί. Είστε σίγουρος/η;");
        if (isConfirmedForProfessorTheses)
        {
            await RejectThesisApplicationAsProfessor_MadeByStudent(professorthesisId, studentUniqueID);
            actionsPerformedToAcceptorRejectThesesAsProfessor = true;
        }
    }
     


    private bool IsComponentActive()
    {
        return JS != null;
    }

    private async Task SafeInvokeJsAsync(Func<Task> jsAction)
    {
        try
        {
            if (IsComponentActive())
            {
                await jsAction();
            }
        }
        catch (JSDisconnectedException)
        {
            Console.WriteLine("JS interop call failed because the circuit is disconnected.");
        }
    }


    private void CheckCharacterLimitInInternshipFieldUploadAsCompany(ChangeEventArgs e)
    {
        // Calculate remaining characters
        var inputText = e.Value?.ToString() ?? string.Empty;
        remainingCharactersInInternshipFieldUploadAsCompany = 120 - inputText.Length;
    }

    private void CheckCharacterLimitInThesisFieldUploadAsCompany(ChangeEventArgs e)
    {
        // Calculate remaining characters
        var inputText = e.Value?.ToString() ?? string.Empty;
        remainingCharactersInThesisFieldUploadAsCompany = 120 - inputText.Length;
    }

    private void CheckCharacterLimitInThesisFieldUploadAsProfessor(ChangeEventArgs e)
    {
        // Calculate remaining characters
        var inputText = e.Value?.ToString() ?? string.Empty;
        remainingCharactersInThesisFieldUploadAsProfessor = 120 - inputText.Length;
    }

    private void CheckCharacterLimitInAnnouncementFieldUploadAsCompany(ChangeEventArgs e)
    {
        // Calculate remaining characters
        var inputText = e.Value?.ToString() ?? string.Empty;
        remainingCharactersInAnnouncementFieldUploadAsCompany = 120 - inputText.Length;
    }

    private void CheckCharacterLimitInAnnouncementFieldUploadAsProfessor(ChangeEventArgs e)
    {
        // Calculate remaining characters
        var inputText = e.Value?.ToString() ?? string.Empty;
        remainingCharactersInAnnouncementFieldUploadAsProfessor = 120 - inputText.Length;
    }

  

    private void CheckCharacterLimitInInternshipDescriptionUploadAsCompany(ChangeEventArgs e)
    {
        var inputText = e.Value?.ToString() ?? string.Empty;
        remainingCharactersInInternshipDescriptionUploadAsCompany = 1000 - inputText.Length;
    }

    private void CheckCharacterLimitInJobFieldUploadAsCompany(ChangeEventArgs e)
    {
        // Calculate remaining characters
        var inputText = e.Value?.ToString() ?? string.Empty;
        remainingCharactersInJobFieldUploadAsCompany = 120 - inputText.Length;
    }

    private void CheckCharacterLimitInJobDescriptionUploadAsCompany(ChangeEventArgs e)
    {
        var inputText = e.Value?.ToString() ?? string.Empty;
        remainingCharactersInJobDescriptionUploadAsCompany = 1000 - inputText.Length;
    }

    private void CheckCharacterLimitInThesisDescriptionUploadAsCompany(ChangeEventArgs e)
    {
        var inputText = e.Value?.ToString() ?? string.Empty;
        remainingCharactersInThesisDescriptionUploadAsCompany = 1000 - inputText.Length;
    }

    private void CheckCharacterLimitInAnnouncementDescriptionUploadAsCompany(ChangeEventArgs e)
    {
        var inputText = e.Value?.ToString() ?? string.Empty;
        remainingCharactersInAnnouncementDescriptionUploadAsCompany = 1000 - inputText.Length;
    }

    private void CheckCharacterLimitInThesisDescriptionUploadAsProfessor(ChangeEventArgs e)
    {
        var inputText = e.Value?.ToString() ?? string.Empty;
        remainingCharactersInThesisDescriptionUploadAsProfessor = 1000 - inputText.Length;
    }

    private void CheckCharacterLimitInAnnouncementDescriptionUploadAsProfessor(ChangeEventArgs e)
    {
        var inputText = e.Value?.ToString() ?? string.Empty;
        remainingCharactersInAnnouncementDescriptionUploadAsProfessor = 1000 - inputText.Length;
    }

    private async Task CalculateStatusCountsForInternships()
    {
        await LoadInternships();
        if (internships == null) return;

        // Filter internships based on selected status
        var filteredInternships = selectedStatusFilterForInternships == "Όλα"
            ? internships
            : internships.Where(i => i.CompanyUploadedInternshipStatus == selectedStatusFilterForInternships);

        // Calculate counts
        totalCount = internships.Count();
        publishedCount = internships.Count(i => i.CompanyUploadedInternshipStatus == "Δημοσιευμένη");
        unpublishedCount = internships.Count(i => i.CompanyUploadedInternshipStatus == "Μη Δημοσιευμένη");
        withdrawnCount = internships.Count(i => i.CompanyUploadedInternshipStatus == "Αποσυρμένη");

        // Trigger UI update
        StateHasChanged();
    }

    private async Task CalculateStatusCountsForCompanyTheses()
    {
        await LoadThesesAsCompany();
        if (companytheses == null) return;

        // Filter internships based on selected status
        var filteredCompanyTheses = selectedStatusFilterForCompanyTheses == "Όλα"
            ? companytheses
            : companytheses.Where(i => i.CompanyThesisStatus == selectedStatusFilterForCompanyTheses);

        // Calculate counts
        totalCountForCompanyTheses = companytheses.Count();
        publishedCountForCompanyTheses = companytheses.Count(i => i.CompanyThesisStatus == "Δημοσιευμένη");
        unpublishedCountForCompanyTheses = companytheses.Count(i => i.CompanyThesisStatus == "Μη Δημοσιευμένη");
        withdrawnCountForCompanyTheses = companytheses.Count(i => i.CompanyThesisStatus == "Αποσυρμένη");

        // Trigger UI update
        StateHasChanged();
    }


    private async Task CalculateStatusCountsForJobs()
    {
        await LoadJobs();
        if (jobs == null) return;

        // Filter jobs based on selected status
        var filteredJobs = selectedStatusFilterForJobs == "Όλα"
            ? jobs
            : jobs.Where(i => i.PositionStatus == selectedStatusFilterForJobs);

        // Calculate counts
        totalCountJobs = jobs.Count();
        publishedCountJobs = jobs.Count(i => i.PositionStatus == "Δημοσιευμένη");
        unpublishedCountJobs = jobs.Count(i => i.PositionStatus == "Μη Δημοσιευμένη");
        withdrawnCountJobs = jobs.Count(i => i.PositionStatus == "Αποσυρμένη");

        // Trigger UI update
        StateHasChanged();
    }

    private async Task CalculateStatusCountsForAnnouncements()
    {
        await LoadUploadedAnnouncementsAsync();

        // Apply your logic to filter announcements based on the selectedStatusFilterForAnnouncements
        var filteredAnnouncements = selectedStatusFilterForAnnouncements == "Όλα"
            ? UploadedAnnouncements
            : UploadedAnnouncements.Where(i => i.CompanyAnnouncementStatus == selectedStatusFilterForAnnouncements);

        // Update counts
        totalCountAnnouncements = UploadedAnnouncements.Count();
        publishedCountAnnouncements = UploadedAnnouncements.Count(i => i.CompanyAnnouncementStatus == "Δημοσιευμένη");
        unpublishedCountAnnouncements = UploadedAnnouncements.Count(i => i.CompanyAnnouncementStatus == "Μη Δημοσιευμένη");

        // Trigger UI update
        StateHasChanged();
    }

    private async Task CalculateStatusCountsForAnnouncementsAsProfessor()
    {
        await LoadUploadedAnnouncementsAsProfessorAsync();

        // Apply your logic to filter announcements based on the selectedStatusFilterForAnnouncements
        var filteredAnnouncementsAsProfessor = selectedStatusFilterForAnnouncementsAsProfessor == "Όλα"
            ? UploadedAnnouncementsAsProfessor
            : UploadedAnnouncementsAsProfessor.Where(i => i.ProfessorAnnouncementStatus == selectedStatusFilterForAnnouncementsAsProfessor);

        // Update counts
        totalCountAnnouncementsAsProfessor = UploadedAnnouncementsAsProfessor.Count();
        publishedCountAnnouncementsAsProfessor = UploadedAnnouncementsAsProfessor.Count(i => i.ProfessorAnnouncementStatus == "Δημοσιευμένη");
        unpublishedCountAnnouncementsAsProfessor = UploadedAnnouncementsAsProfessor.Count(i => i.ProfessorAnnouncementStatus == "Μη Δημοσιευμένη");

        // Trigger UI update
        StateHasChanged();
    }

    private async Task CalculateStatusCountsForThesesAsProfessor()
    {
        await LoadUploadedThesesAsProfessorAsync();

        // Apply your logic to filter announcements based on the selectedStatusFilterForAnnouncements
        var filteredThesesAsProfessor = selectedStatusFilterForThesesAsProfessor == "Όλα"
            ? UploadedThesesAsProfessor
            : UploadedThesesAsProfessor.Where(i => i.ThesisStatus == selectedStatusFilterForThesesAsProfessor);

        // Update counts
        totalCountThesesAsProfessor = UploadedThesesAsProfessor.Count();
        publishedCountThesesAsProfessor = UploadedThesesAsProfessor.Count(i => i.ThesisStatus == "Δημοσιευμένη");
        unpublishedCountThesesAsProfessor = UploadedThesesAsProfessor.Count(i => i.ThesisStatus == "Μη Δημοσιευμένη");
        withdrawnCountThesesAsProfessor = UploadedThesesAsProfessor.Count(i => i.ThesisStatus == "Αποσυρμένη");
        // Trigger UI update
        StateHasChanged();
    }



    @*
    rotected override async Task OnParametersSetAsync()
    {
        await base.OnParametersSetAsync();
        CalculateStatusCountsForInternships();
        CalculateStatusCountsForJobs();
    }
    *@


    private async Task UpdateStatusFilterToCountInternships()
    {
        await CalculateStatusCountsForInternships();
    }

    private async Task UpdateStatusFilterToCountJobs()
    {
        await CalculateStatusCountsForJobs();
    }

    private async Task UpdateStatusFilterToCountAnnouncements()
    {
        await CalculateStatusCountsForAnnouncements();
    }
    private async Task UpdateStatusFilterToCountCompanyTheses()
    {
        await CalculateStatusCountsForCompanyTheses();
    }





    private async Task AcceptInternshipApplicationAsProfessor_MadeByStudent(long internshipRNG, string studentUniqueID)
    {
        try
        {
            // Fetch application with related internship (updated property names)
            var application = await dbContext.ProfessorInternshipsApplied
                .Join(dbContext.ProfessorInternships.Include(i => i.Professor), // Include professor data
                    applied => applied.RNGForProfessorInternshipApplied,
                    internship => internship.RNGForInternshipUploadedAsProfessor, // Updated property
                    (applied, internship) => new { Application = applied, Internship = internship })
                .FirstOrDefaultAsync(x => x.Application.RNGForProfessorInternshipApplied == internshipRNG &&
                                        x.Application.StudentDetails.StudentUniqueIDAppliedForProfessorInternship == studentUniqueID);

            if (application == null)
            {
                await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                    "Δεν βρέθηκε η Αίτηση ή ο Φοιτητής").AsTask());
                return;
            }

            // Update status directly on the main application entity
            application.Application.InternshipStatusAppliedAtTheProfessorSide = "Επιτυχής";
            application.Application.InternshipStatusAppliedAtTheStudentSide = "Επιτυχής";

            await dbContext.SaveChangesAsync();

            try
            {
                // Get student details from your user service
                var student = await GetStudentDetails(application.Application.StudentDetails.StudentEmailAppliedForProfessorInternship);

                // Send acceptance email to student (updated professor name source)
                await InternshipEmailService.SendAcceptanceEmailAsProfessorToStudentAfterHeAppliedForInternshipPosition(
                    application.Application.StudentDetails.StudentEmailAppliedForProfessorInternship.Trim(),
                    student?.Name,
                    student?.Surname,
                    application.Internship.ProfessorInternshipTitle,
                    application.Application.RNGForProfessorInternshipApplied_HashedAsUniqueID,
                    $"{application.Internship.Professor.ProfName} {application.Internship.Professor.ProfSurname}" // From navigation property
                );

                // Send notification email to professor (updated professor name source)
                await InternshipEmailService.SendAcceptanceConfirmationEmailToProfessorAfterStudentAppliedForInternshipPosition(
                    application.Application.ProfessorDetails.ProfessorEmailWhereStudentAppliedForProfessorInternship.Trim(),
                    $"{application.Internship.Professor.ProfName} {application.Internship.Professor.ProfSurname}", // From navigation property
                    student?.Name,
                    student?.Surname,
                    application.Application.RNGForProfessorInternshipApplied_HashedAsUniqueID,
                    application.Internship.ProfessorInternshipTitle
                );

                await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                    $"Ενημερώσεις Αποδοχής στάλθηκαν τόσο στον Φοιτητή " +
                    $"({student?.Name} {student?.Surname}) " +
                    $"όσο και στον Καθηγητή ({application.Internship.Professor.ProfName} {application.Internship.Professor.ProfSurname})").AsTask());

                StateHasChanged();
            }
            catch (FormatException)
            {
                Console.WriteLine("Invalid email address format.");
                await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                    "Μη έγκυρη διεύθυνση email.").AsTask());
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error accepting internship: {ex.Message} \n StackTrace: {ex.StackTrace}");
            await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                $"Παρουσιάστηκε σφάλμα: {ex.Message}").AsTask());
        }
    }

    private async Task RejectInternshipApplicationAsProfessor_MadeByStudent(long internshipRNG, string studentUniqueID)
    {
        try
        {
            // Fetch application with related internship (updated property names)
            var application = await dbContext.ProfessorInternshipsApplied
                .Join(dbContext.ProfessorInternships.Include(i => i.Professor), // Include professor data
                    applied => applied.RNGForProfessorInternshipApplied,
                    internship => internship.RNGForInternshipUploadedAsProfessor, // Updated property
                    (applied, internship) => new { Application = applied, Internship = internship })
                .FirstOrDefaultAsync(x => x.Application.RNGForProfessorInternshipApplied == internshipRNG &&
                                       x.Application.StudentDetails.StudentUniqueIDAppliedForProfessorInternship == studentUniqueID);

            if (application == null)
            {
                await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                    "Δεν βρέθηκε η Αίτηση ή ο Φοιτητής").AsTask());
                return;
            }

            // Update status directly on the main application entity
            application.Application.InternshipStatusAppliedAtTheProfessorSide = "Απορρίφθηκε";
            application.Application.InternshipStatusAppliedAtTheStudentSide = "Απορρίφθηκε";

            await dbContext.SaveChangesAsync();

            try
            {
                // Get student details from your user service
                var student = await GetStudentDetails(application.Application.StudentDetails.StudentEmailAppliedForProfessorInternship);

                // Send rejection email to student (updated professor name source)
                await InternshipEmailService.SendRejectionEmailAsProfessorToStudentAfterHeAppliedForInternshipPosition(
                    application.Application.StudentDetails.StudentEmailAppliedForProfessorInternship.Trim(),
                    student?.Name,
                    student?.Surname,
                    application.Internship.ProfessorInternshipTitle,
                    application.Application.RNGForProfessorInternshipApplied_HashedAsUniqueID,
                    $"{application.Internship.Professor.ProfName} {application.Internship.Professor.ProfSurname}" // From navigation property
                );

                // Send notification email to professor (updated professor name source)
                await InternshipEmailService.SendRejectionConfirmationEmailToProfessorAfterStudentAppliedForInternshipPosition(
                    application.Application.ProfessorDetails.ProfessorEmailWhereStudentAppliedForProfessorInternship.Trim(),
                    $"{application.Internship.Professor.ProfName} {application.Internship.Professor.ProfSurname}", // From navigation property
                    student?.Name,
                    student?.Surname,
                    application.Application.RNGForProfessorInternshipApplied_HashedAsUniqueID,
                    application.Internship.ProfessorInternshipTitle
                );

                await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2",
                    $"Η Απόρριψη της Αίτησης κοινοποιήθηκε μέσω Email τόσο στον Φοιτητή " +
                    $"({student?.Name} {student?.Surname}) " +
                    $"όσο και στον Καθηγητή ({application.Internship.Professor.ProfName} {application.Internship.Professor.ProfSurname})").AsTask());

                StateHasChanged();
            }
            catch (FormatException)
            {
                Console.WriteLine("Invalid email address format.");
                await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                    "Μη έγκυρη διεύθυνση email.").AsTask());
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error rejecting internship: {ex.Message} \n StackTrace: {ex.StackTrace}");
            await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                $"Παρουσιάστηκε σφάλμα: {ex.Message}").AsTask());
        }
    }


    private async Task ConfirmAndAcceptProfessorInternship(long professorInternshipId, string studentUniqueID)
    {
        bool isConfirmedForProfessorInternships = await JS.InvokeAsync<bool>(
            "confirmActionWithHTML", 
            "- ΑΠΟΔΟΧΗ ΑΙΤΗΣΗΣ - \n Η ενέργεια αυτή δεν θα μπορεί να αναιρεθεί. Είστε σίγουρος/η;"
        );

        if (isConfirmedForProfessorInternships)
        {
            await AcceptInternshipApplicationAsProfessor_MadeByStudent(professorInternshipId, studentUniqueID);
            actionsPerformedToAcceptorRejectInternshipsAsProfessor = true;
        }
    }

    private async Task ConfirmAndRejectProfessorInternship(long professorInternshipId, string studentUniqueID)
    {
        bool isConfirmedForProfessorInternships = await JS.InvokeAsync<bool>(
            "confirmActionWithHTML", 
            "- ΑΠΟΡΡΙΨΗ ΑΙΤΗΣΗΣ - \n Η ενέργεια αυτή δεν θα μπορεί να αναιρεθεί. Είστε σίγουρος/η;"
        );

        if (isConfirmedForProfessorInternships)
        {     
            await RejectInternshipApplicationAsProfessor_MadeByStudent(professorInternshipId, studentUniqueID);
            actionsPerformedToAcceptorRejectInternshipsAsProfessor = true;
        }
    }



    private async Task ShowCompanyDetailsinTitleAsHyperlink(string companyEmail)
    {
        try 
        {
            // Fetch company details by email (more reliable than name)
            selectedCompany = await dbContext.Companies
                .FirstOrDefaultAsync(c => c.CompanyEmail == companyEmail);

            if (selectedCompany != null)
            {
                iscompanyDetailsModalVisible = true;
                StateHasChanged();
            }
            else
            {
                await JS.InvokeVoidAsync("alert", "Δεν βρέθηκαν στοιχεία εταιρίας");
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading company details: {ex.Message}");
            await JS.InvokeVoidAsync("alert", "Σφάλμα κατά τη φόρτωση των στοιχείων της εταιρίας");
        }
    }

    private async Task ShowProfessorDetailsinTitleAsHyperlink_StudentInternshipApplicationsShow(string professorEmail)
    {
        try
        {
            // Fetch professor details by email with all necessary fields
            selectedProfessor = await dbContext.Professors
                .Where(p => p.ProfEmail == professorEmail)
                .Select(p => new Professor {
                    Professor_UniqueID = p.Professor_UniqueID,
                    ProfEmail = p.ProfEmail,
                    ProfName = p.ProfName,
                    ProfSurname = p.ProfSurname,
                    ProfUniversity = p.ProfUniversity,
                    ProfDepartment = p.ProfDepartment,
                    ProfVahmidaDEP = p.ProfVahmidaDEP,
                    ProfWorkTelephone = p.ProfWorkTelephone,
                    ProfPersonalTelephone = p.ProfPersonalTelephoneVisibility ? p.ProfPersonalTelephone : null,
                    ProfPersonalWebsite = p.ProfPersonalWebsite,
                    ProfLinkedInSite = p.ProfLinkedInSite,
                    ProfScholarProfile = p.ProfScholarProfile,
                    ProfOrchidProfile = p.ProfOrchidProfile,
                    ProfGeneralFieldOfWork = p.ProfGeneralFieldOfWork,
                    ProfGeneralSkills = p.ProfGeneralSkills,
                    ProfPersonalDescription = p.ProfPersonalDescription,
                    ProfImage = p.ProfImage,
                    ProfCVAttachment = p.ProfCVAttachment,
                    ProfRegistryNumber = p.ProfRegistryNumber,
                    ProfCourses = p.ProfCourses
                })
                .AsNoTracking()
                .FirstOrDefaultAsync();

            if (selectedProfessor != null)
            {
                isProfessorDetailsModalVisible_StudentInternshipApplicationsShow = true;
                StateHasChanged();
            }
            else
            {
                await JS.InvokeVoidAsync("alert", "Δεν βρέθηκαν στοιχεία καθηγητή");
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error fetching professor details: {ex.Message}");
            await JS.InvokeVoidAsync("alert", $"Σφάλμα κατά την ανάκτηση των στοιχείων: {ex.Message}");
        }
    }

    @*
    private async Task ShowProfessorDetailsinTitleAsHyperlink_StudentInternshipApplicationsShow(string professorName)
    {
        // Fetch professor details by professorName from dbContext
        selectedProfessor = await dbContext.Professors.FirstOrDefaultAsync(p => p.ProfName == professorName);

        if (selectedProfessor != null)
        {
            // Set modal visibility to true
            isProfessorDetailsModalVisible_StudentInternshipApplicationsShow = true;
            StateHasChanged();
        }
    }
    *@


    private void CloseModalforHyperLinkTitle()
    {
        iscompanyDetailsModalVisible = false;
        StateHasChanged(); // Ensure UI is updated
    }


    private async Task ShowStudentDetailsInNameAsHyperlink(string studentUniqueId)
    {
        // First try to find in cache
        selectedStudentFromCache = studentDataCache.Values
            .FirstOrDefault(s => s.Student_UniqueID == studentUniqueId);

        if (selectedStudentFromCache == null)
        {
            Console.WriteLine($"Student with ID {studentUniqueId} not found in cache - loading from DB");
        
            selectedStudentFromCache = await dbContext.Students
                .Where(s => s.Student_UniqueID == studentUniqueId)
                .Select(s => new Student {
                    Id = s.Id,
                    Student_UniqueID = s.Student_UniqueID,
                    Email = s.Email,
                    Image = s.Image,
                    Name = s.Name,
                    Surname = s.Surname,
                    Telephone = s.Telephone,
                    PermanentAddress = s.PermanentAddress,
                    PermanentRegion = s.PermanentRegion,
                    PermanentTown = s.PermanentTown,
                    Attachment = s.Attachment,
                    LinkedInProfile = s.LinkedInProfile,
                    PersonalWebsite = s.PersonalWebsite,
                    Transport = s.Transport,
                    RegNumber = s.RegNumber,
                    University = s.University,
                    Department = s.Department,
                    EnrollmentDate = s.EnrollmentDate,
                    StudyYear = s.StudyYear,
                    LevelOfDegree = s.LevelOfDegree,
                    AreasOfExpertise = s.AreasOfExpertise,
                    Keywords = s.Keywords
                })
                .FirstOrDefaultAsync();

            if (selectedStudentFromCache != null)
            {
                studentDataCache[selectedStudentFromCache.Email.ToLower()] = selectedStudentFromCache;
            }
        }

        isModalVisibleToShowStudentDetailsAsCompanyFromTheirHyperlinkNameInCompanyInternships = true;
        StateHasChanged();
    }

    private async Task ShowStudentDetailsInNameAsHyperlink_StudentAppliedinternshipsAtProfessor(string studentUniqueId)
    {
        try
        {
            // First try to find in cache
            selectedStudent = studentDataCache.Values
                .FirstOrDefault(s => s.Student_UniqueID == studentUniqueId);

            if (selectedStudent == null)
            {
                Console.WriteLine($"Student with ID {studentUniqueId} not found in cache - loading from DB");
            
                selectedStudent = await dbContext.Students
                    .Where(s => s.Student_UniqueID == studentUniqueId)
                    .Select(s => new Student {
                        Id = s.Id,
                        Student_UniqueID = s.Student_UniqueID,
                        Email = s.Email,
                        Image = s.Image,
                        Name = s.Name,
                        Surname = s.Surname,
                        Telephone = s.Telephone,
                        PermanentAddress = s.PermanentAddress,
                        PermanentRegion = s.PermanentRegion,
                        PermanentTown = s.PermanentTown,
                        Attachment = s.Attachment,
                        LinkedInProfile = s.LinkedInProfile,
                        PersonalWebsite = s.PersonalWebsite,
                        Transport = s.Transport,
                        RegNumber = s.RegNumber,
                        University = s.University,
                        Department = s.Department,
                        EnrollmentDate = s.EnrollmentDate,
                        StudyYear = s.StudyYear,
                        LevelOfDegree = s.LevelOfDegree,
                        AreasOfExpertise = s.AreasOfExpertise,
                        Keywords = s.Keywords,
                        ExpectedGraduationDate = s.ExpectedGraduationDate,
                        CompletedECTS = s.CompletedECTS,
                        InternshipStatus = s.InternshipStatus,
                        ThesisStatus = s.ThesisStatus,
                        PreferedRegions = s.PreferedRegions,
                        PreferredTowns = s.PreferredTowns
                    })
                    .AsNoTracking()
                    .FirstOrDefaultAsync();

                if (selectedStudent != null)
                {
                    // Add to cache if found
                    studentDataCache[selectedStudent.Email.ToLower()] = selectedStudent;
                }
            }

            isModalVisibleToShowStudentDetailsAsProfessorFromTheirHyperlinkNameInProfessorInternships = true;
            await InvokeAsync(StateHasChanged);
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading student details: {ex.Message}");
            // Optionally show error to user
            await JS.InvokeVoidAsync("alert", "Σφάλμα κατά την φόρτωση των στοιχείων του φοιτητή");
        }
    }




    private void CloseModalforHyperLinkTitleStudentName()
    {
        isModalVisibleToShowStudentDetailsAsCompanyFromTheirHyperlinkNameInCompanyInternships = false;
        selectedStudentFromCache = null;
        StateHasChanged();
    }
    private void CloseModalforHyperLinkTitleStudentName_StudentAppliedinternshipsAtProfessor()
    {
        isModalVisibleToShowStudentDetailsAsProfessorFromTheirHyperlinkNameInProfessorInternships = false;
        JS.InvokeVoidAsync("eval", "$('#studentDetailsModal').modal('hide')");
    }

    private async Task WithdrawInternshipApplicationMadeByStudent(InternshipApplied application)
    {
        try
        {
            // First ask for confirmation
            var confirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML", 
                $"Πρόκεται να αποσύρετε την Αίτησή σας για την Πρακτική Άσκηση. Είστε σίγουρος/η;");
            if (!confirmed) return;

            // Get the related internship details first - updated property name
            var internship = await dbContext.CompanyInternships
                .Include(i => i.Company) // Include company data
                .FirstOrDefaultAsync(i => i.RNGForInternshipUploadedAsCompany == application.RNGForInternshipApplied);

            if (internship == null)
            {
                await JS.InvokeVoidAsync("alert", "Δεν βρέθηκε η πρακτική άσκηση.");
                return;
            }

            // Update status directly on the main application entity
            application.InternshipStatusAppliedAtTheCompanySide = "Αποσύρθηκε από τον φοιτητή";
            application.InternshipStatusAppliedAtTheStudentSide = "Αποσύρθηκε από τον φοιτητή";

            var platformAction = new PlatformActions
            {
                UserRole_PerformedAction = "STUDENT",
                ForWhat_PerformedAction = "COMPANY_INTERNSHIP",
                HashedPositionRNG_PerformedAction = HashingHelper.HashLong(application.RNGForInternshipApplied),
                TypeOfAction_PerformedAction = "SELFWITHDRAW",
                DateTime_PerformedAction = DateTime.UtcNow
            };

            dbContext.PlatformActions.Add(platformAction);
            await dbContext.SaveChangesAsync();

            // Get student details from your user service
            var student = await GetStudentDetails(application.StudentEmailAppliedForInternship);

            if (student == null)
            {
                await JS.InvokeVoidAsync("alert", "Δεν βρέθηκαν στοιχεία φοιτητή.");
                return;
            }

            // Send notifications - updated to use navigation property with fallback
            await InternshipEmailService.SendInternshipWithdrawalNotificationToCompany_AsStudent(
                application.CompanyEmailWhereStudentAppliedForInternship,
                internship.Company?.CompanyName,
                student.Name,
                student.Surname,
                internship.CompanyInternshipTitle,
                application.RNGForInternshipAppliedAsStudent_HashedAsUniqueID);

            await InternshipEmailService.SendInternshipWithdrawalConfirmationToStudent_AsCompany(
                application.StudentEmailAppliedForInternship,
                student.Name,
                student.Surname,
                internship.CompanyInternshipTitle,
                application.RNGForInternshipAppliedAsStudent_HashedAsUniqueID,
                internship.Company?.CompanyName);

            // Refresh the page to show updated status
            NavigationManager.NavigateTo(NavigationManager.Uri, forceLoad: true);
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error saving withdrawal: {ex.Message}");
            await JS.InvokeVoidAsync("alert", "Σφάλμα κατά την αποθήκευση της απόσυρσης.");
        }
    }

    private async Task WithdrawProfessorInternshipApplicationMadeByStudent(ProfessorInternshipApplied application)
    {
        try
        {
            // First ask for confirmation
            var confirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML", 
                $"Πρόκεται να αποσύρετε την Αίτησή σας για την Πρακτική Άσκηση. Είστε σίγουρος/η;");
            if (!confirmed) return;

            // Get the related internship details with professor info
            var internship = await dbContext.ProfessorInternships
                .Include(i => i.Professor) // Include professor data
                .FirstOrDefaultAsync(i => i.RNGForInternshipUploadedAsProfessor == application.RNGForProfessorInternshipApplied); // Updated property

            if (internship == null)
            {
                await JS.InvokeVoidAsync("alert", "Δεν βρέθηκε η πρακτική άσκηση.");
                return;
            }

            // Update status directly on the main application entity
            application.InternshipStatusAppliedAtTheProfessorSide = "Αποσύρθηκε από τον φοιτητή";
            application.InternshipStatusAppliedAtTheStudentSide = "Αποσύρθηκε από τον φοιτητή";

            var platformAction = new PlatformActions
            {
                UserRole_PerformedAction = "STUDENT",
                ForWhat_PerformedAction = "PROFESSOR_INTERNSHIP",
                HashedPositionRNG_PerformedAction = HashingHelper.HashLong(application.RNGForProfessorInternshipApplied),
                TypeOfAction_PerformedAction = "SELFWITHDRAW",
                DateTime_PerformedAction = DateTime.UtcNow
            };

            dbContext.PlatformActions.Add(platformAction);
            await dbContext.SaveChangesAsync();

            // Get student details from your user service
            var student = await GetStudentDetails(application.StudentDetails.StudentEmailAppliedForProfessorInternship);

            if (student == null)
            {
                await JS.InvokeVoidAsync("alert", "Δεν βρέθηκαν στοιχεία φοιτητή.");
                return;
            }

            // Send notifications (updated to use professor navigation property)
            await InternshipEmailService.SendProfessorInternshipWithdrawalNotificationToProfessor(
                application.ProfessorDetails.ProfessorEmailWhereStudentAppliedForProfessorInternship,
                $"{internship.Professor.ProfName} {internship.Professor.ProfSurname}", // From navigation property
                student.Name,
                student.Surname,
                internship.ProfessorInternshipTitle,
                application.RNGForProfessorInternshipApplied_HashedAsUniqueID);

            await InternshipEmailService.SendProfessorInternshipWithdrawalConfirmationToStudent(
                application.StudentDetails.StudentEmailAppliedForProfessorInternship,
                student.Name,
                student.Surname,
                internship.ProfessorInternshipTitle,
                application.RNGForProfessorInternshipApplied_HashedAsUniqueID,
                $"{internship.Professor.ProfName} {internship.Professor.ProfSurname}"); // From navigation property

            // Refresh the page to show updated status
            NavigationManager.NavigateTo(NavigationManager.Uri, forceLoad: true);
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error saving withdrawal: {ex.Message}");
            await JS.InvokeVoidAsync("alert", "Σφάλμα κατά την αποθήκευση της απόσυρσης.");
        }
    }

    private async Task WithdrawJobApplicationMadeByStudent(CompanyJobApplied application)
    {
        try
        {
            // First ask for confirmation - using job RNG in message since PositionTitle isn't available
            var confirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML", 
                $"Πρόκεται να αποσύρετε την Αίτησή σας για την Θέση Εργασίας. Είστε σίγουρος/η;");
            if (!confirmed) return;

            // Get the related job details first
            var job = await dbContext.CompanyJobs
                .FirstOrDefaultAsync(j => j.RNGForPositionUploaded == application.RNGForCompanyJobApplied);

            if (job == null)
            {
                await JS.InvokeVoidAsync("alert", "Δεν βρέθηκε η θέση εργασίας.");
                return;
            }

            // Update status directly on the main application entity
            application.CompanyPositionStatusAppliedAtTheCompanySide = "Αποσύρθηκε από τον φοιτητή";
            application.CompanyPositionStatusAppliedAtTheStudentSide = "Αποσύρθηκε από τον φοιτητή";

            var platformAction = new PlatformActions
            {
                UserRole_PerformedAction = "STUDENT",
                ForWhat_PerformedAction = "COMPANY_JOB",
                HashedPositionRNG_PerformedAction = HashingHelper.HashLong(application.RNGForCompanyJobApplied),
                TypeOfAction_PerformedAction = "SELFWITHDRAW",
                DateTime_PerformedAction = DateTime.UtcNow
            };

            dbContext.PlatformActions.Add(platformAction);
            await dbContext.SaveChangesAsync();

            // Get student details from your user service
            var student = await GetStudentDetails(application.StudentEmailAppliedForCompanyJob);
    
            if (student == null)
            {
                await JS.InvokeVoidAsync("alert", "Δεν βρέθηκαν στοιχεία φοιτητή.");
                return;
            }

            // Send notifications
            await InternshipEmailService.SendJobWithdrawalNotificationToCompany_AsStudent(
                application.CompanysEmailWhereStudentAppliedForCompanyJob,
                job.Company?.CompanyName,  // From Company navigation property
                student.Name,
                student.Surname,
                job.PositionTitle,
                application.RNGForCompanyJobAppliedAsStudent_HashedAsUniqueID);

            await InternshipEmailService.SendJobWithdrawalConfirmationToStudent_AsCompany(
                application.StudentEmailAppliedForCompanyJob,
                student.Name,
                student.Surname,
                job.PositionTitle,
                application.RNGForCompanyJobAppliedAsStudent_HashedAsUniqueID,
                job.Company?.CompanyName);  // From Company navigation property

            // Refresh the page to show updated status
            NavigationManager.NavigateTo(NavigationManager.Uri, forceLoad: true);
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error saving withdrawal: {ex.Message}");
            await JS.InvokeVoidAsync("alert", "Σφάλμα κατά την αποθήκευση της απόσυρσης.");
        }
    }

    private async Task WithdrawCompanyThesisApplicationMadeByStudent(CompanyThesisApplied companythesis)
    {
        companythesis.CompanyThesisStatusAppliedAtStudentSide = "Αποσύρθηκε από τον φοιτητή";
        companythesis.CompanyThesisStatusAppliedAtCompanySide = "Αποσύρθηκε από τον φοιτητή"; 
        await dbContext.SaveChangesAsync();
    }

    private async Task WithdrawProfessorThesisApplicationMadeByStudent(ProfessorThesisApplied professorthesis)
    {
        professorthesis.ProfessorThesisStatusAppliedAtStudentSide = "Αποσύρθηκε από τον φοιτητή";
        professorthesis.ProfessorThesisStatusAppliedAtProfessorSide = "Αποσύρθηκε από τον φοιτητή"; 
        await dbContext.SaveChangesAsync();

    }

    private async Task DownloadStudentCVFromCompanyInternships(string studentEmail)
    {
        try
        {
            // First try to find in cache
            var student = studentDataCache.Values.FirstOrDefault(s => s.Email == studentEmail);
    
            // If not in cache, try database
            if (student == null)
            {
                student = await dbContext.Students
                    .FirstOrDefaultAsync(s => s.Email == studentEmail);
            }

            if (student?.Attachment == null)
            {
                await JS.InvokeVoidAsync("alert", "Δεν βρέθηκε βιογραφικό για αυτόν τον φοιτητή");
                return;
            }

            var fileName = $"CV_{student.Name}_{student.Surname}.pdf";
            var mimeType = "application/pdf";
        
            // Correct parameter order to match the working example
            await JS.InvokeVoidAsync("downloadFile", fileName, mimeType, Convert.ToBase64String(student.Attachment));
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error downloading CV: {ex.Message}");
            await JS.InvokeVoidAsync("alert", "Σφάλμα κατά τη λήψη του βιογραφικού");
        }
    }

    private async Task ShowCompanyDetailsAsAHyperlinkInInternshipSearchAsStudent(string companyId)
    {
        // Fetch the company details based on the Company Name (ENG)
        selectedCompany = await dbContext.Companies.FirstOrDefaultAsync(c => c.CompanyName == companyId);

        if (selectedCompany != null)
        {
            isCompanyDetailsModal2Visible = true;
            await JS.InvokeVoidAsync("eval", "$('#companyDetailsModal2').modal('show')");
        }
    }

    private async Task CloseModalforHyperLinkTitleInSearch()
    {
        // Close the modal and set the flag to false
        isCompanyDetailsModal2Visible = false;
        await JS.InvokeVoidAsync("eval", "$('#companyDetailsModal2').modal('hide')");
    }

    private async Task ShowCompanyDetailsAsAHyperlinkInJobSearchAsStudent(string companyName)
    {
        // Fetch company details from database
        selectedCompanyDetailsForJobSearch = await dbContext.Companies
            .FirstOrDefaultAsync(c => c.CompanyName == companyName);

        if (selectedCompanyDetailsForJobSearch != null)
        {
            isCompanyDetailsModalOpenForJobSearch = true;
            StateHasChanged();  // Refresh UI
        }
        else
        {
            await JS.InvokeVoidAsync("alert", "Company details not found.");
        }
    }

    private void CloseModalForCompanyNameHyperlinkDetailsInJobSearch()
    {
        isCompanyDetailsModalOpenForJobSearch = false;
    }



    private async Task ShowCompanyDetailsAsAHyperlinkInShowJobsAsStudent(string companyEmail)
    {
        try
        {
            // First try to find in job cache
            var cachedCompany = jobDataCache.Values
                .FirstOrDefault(j => j.EmailUsedToUploadJobs.Equals(companyEmail, StringComparison.OrdinalIgnoreCase));
        
            if (cachedCompany != null)
            {
                selectedCompanyDetailsForJobShow = await dbContext.Companies
                    .FirstOrDefaultAsync(c => c.CompanyEmail == cachedCompany.EmailUsedToUploadJobs);
            }
            else
            {
                // Fallback to direct lookup
                selectedCompanyDetailsForJobShow = await dbContext.Companies
                    .FirstOrDefaultAsync(c => c.CompanyEmail == companyEmail);
            }

            isCompanyDetailsModalOpenForJobShow = selectedCompanyDetailsForJobShow != null;
            StateHasChanged();
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error showing company details: {ex.Message}");
            await JS.InvokeVoidAsync("alert", "Σφάλμα φόρτωσης στοιχείων εταιρείας");
        }
    }

    private void CloseModalForCompanyNameHyperlinkDetailsInJobShow()
    {
        isCompanyDetailsModalOpenForJobShow = false;
    }



    private async Task ShowInternshipDetailsInInternshipTitleAsHyperlink(long internshipId)
    {
        currentInternship = await dbContext.CompanyInternships
            .Include(i => i.Company) // Include company data
            .FirstOrDefaultAsync(i => i.RNGForInternshipUploadedAsCompany == internshipId); // Updated property name

        if (currentInternship != null)
        {
            isInternshipDetailsModalVisible = true;
            StateHasChanged();
        }
    }

    private async Task CloseInternshipDetailsModal()
    {
        // Set the flag to hide the modal
        isInternshipDetailsModalVisible = false;
        StateHasChanged();
    }

    private async Task ShowProfessorInternshipDetailsInInternshipTitleAsHyperlink_StudentInternshipApplicationsShow(long internshipId)
    {
        // Fetch the internship details from the database with professor information
        currentProfessorInternship = await dbContext.ProfessorInternships
            .Include(i => i.Professor) // Include professor data
            .FirstOrDefaultAsync(i => i.RNGForInternshipUploadedAsProfessor == internshipId); // Updated property name

        if (currentProfessorInternship != null)
        {
            // Set the flag to show the modal
            isInternshipDetailsModalVisible_StudentInternshipApplicationsShow = true;

            // Trigger modal visibility change via JavaScript
            await JS.InvokeVoidAsync("eval", 
                $"$('#internshipDetailsModal').modal('{(isInternshipDetailsModalVisible_StudentInternshipApplicationsShow ? "show" : "hide")}')");
        }
    }

    private async Task CloseProfessorInternshipDetailsModal_StudentInternshipApplicationsShow()
    {
        // Set the flag to hide the modal
        isInternshipDetailsModalVisible_StudentInternshipApplicationsShow = false;
        StateHasChanged();
    }

    private async Task ShowJobDetailsInJobTitleAsHyperlink_StudentJobApplications(long jobId)
    {
        // Fetch the job details from the database with Company included
        currentJobApplicationMadeAsStudent = await dbContext.CompanyJobs
            .Include(j => j.Company) // Include the Company data
            .FirstOrDefaultAsync(i => i.RNGForPositionUploaded == jobId);

        if (currentJobApplicationMadeAsStudent != null)
        {
            isJobDetailsModalVisibleToSeeJobApplicationsAsStudent = true;
            StateHasChanged(); // Update UI
        }
        else
        {
            await JS.InvokeVoidAsync("alert", "Job details not found.");
        }
    }

    private void CloseJobDetailsModalInJobTitleAsHyperlink_StudentJobApplications()
    {
        isJobDetailsModalVisibleToSeeJobApplicationsAsStudent = false;
        StateHasChanged();
    }



    private async Task CloseJobDetailsModal()
    {
        isJobDetailsModal2Visible = false;
        await  JS.InvokeVoidAsync("eval", "$('#jobDetailsModal2').modal('hide')");
    }

    private async Task DownloadInternshipAttachmentAsStudent(long internshipId)
    {
        var internship = dbContext.CompanyInternships.FirstOrDefault(i => i.Id == internshipId);
        if (internship == null)
        {
            Console.WriteLine("Internship not found.");
            return;
        }

        if (internship.CompanyInternshipAttachment == null)
        {
            Console.WriteLine("No attachment found.");
            return;
        }

        Console.WriteLine($"Attachment found for internship {internshipId}, size: {internship.CompanyInternshipAttachment.Length} bytes");

        // Convert byte[] to base64
        string base64String = Convert.ToBase64String(internship.CompanyInternshipAttachment);
        string fileName = $"Internship_Attachment_{internshipId}.pdf"; // Adjust file extension if needed

        // Invoke JS to download file
        await JS.InvokeVoidAsync("downloadInternshipAttachmentAsStudent", fileName, base64String);
    }

    private async Task HandleSaveClickToSaveInternshipsAsCompany()
    {
        // Call JavaScript function for confirmation with custom HTML and styling
        bool isConfirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML", new object[] {
            "Είστε σίγουροι πως θέλετε να υποβάλλετε Νέα Θέση Πρακτικής Άσκησης; Η Θέση θα καταχωρηθεί ως 'Μη Δημοσιευμένη' στο Ιστορικό Θέσεων Πρακτικής Άσκησης. " +
            "Αν επιθυμείτε να την Δημοσιεύσετε απαιτούνται επιπλέον ενέργειες! <br>" +
            "<strong style='color: red;'>Παρακαλώ επιβεβαιώστε την ενέργειά σας.</strong>"
    });

        if (isConfirmed)
        {
            // Proceed with the form submission
            await UploadInternshipAsCompany();
        }
    }



    private async Task ChangeInternshipStatusToUnpublished(int internshipId)
    {
        // Show custom confirmation dialog with formatted text
        bool isConfirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML",
            "Προχωράτε στην <strong style='color: red;'>Αποδημοσίευση</strong> της Θέσης.<br><br>" + 
            "<strong style='color: red;'>ΔΕΝ θα είναι ορατή σε νέους υποψηφίους</strong>.<br><br>" + 
            "Η κατάσταση των αιτήσεων παλαιότερων υποψηφίων θα παραμείνει ως έχει.<br><br>" + 
            "Θέλετε σίγουρα να συνεχίσετε;");

        if (isConfirmed)
        {
            // Proceed with status update to "Μη Δημοσιευμένη"
            await UpdateInternshipStatusAsCompany(internshipId, "Μη Δημοσιευμένη");
        }
    }



    private async Task ChangeProfessorInternshipStatusToUnpublished(int internshipId)
    {
        // Show confirmation dialog
        bool isConfirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML",
            "Προχωράτε στην Αποδημοσίευση της Θέσης. Η Θέση μετά από αυτήν την ενέργεια ΔΕΝ θα είναι ορατή σε νέους υποψηφίους. Η κατάσταση των αιτήσεων παλαιότερων υποψηφίων θα παραμείνει ως έχει. Θέλετε σίγουρα να συνεχίσετε ;");

        if (isConfirmed)
        {
            // Proceed with status update
            await UpdateInternshipStatusAsProfessor(internshipId, "Μη Δημοσιευμένη");
        }
    }

    private async Task ChangeJobStatusToUnpublished(int jobId)
    {
        // Show custom confirmation dialog with formatted text
        bool isConfirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML",
            "Προχωράτε στην <strong style='color: red;'>Αποδημοσίευση</strong> της Θέσης.<br><br>" + 
            "<strong style='color: red;'>ΔΕΝ θα είναι ορατή σε νέους υποψηφίους</strong>.<br><br>" + 
            "Η κατάσταση των αιτήσεων παλαιότερων υποψηφίων θα παραμείνει ως έχει.<br><br>" + 
            "Θέλετε σίγουρα να συνεχίσετε;");

        if (isConfirmed)
        {
            // Proceed with status update
            await UpdateJobStatusAsCompany(jobId, "Μη Δημοσιευμένη");
        }
    }



    private async Task ChangeCompanyThesisStatusToUnpublished(int companyThesisId)
    {
        // Show custom confirmation dialog with formatted text
        bool isConfirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML",
            "Προχωράτε στην <strong style='color: red;'>Αποδημοσίευση</strong> της Πτυχιακής Εργασίας.<br><br>" + 
            "<strong style='color: red;'>ΔΕΝ θα είναι ορατή σε νέους υποψηφίους</strong>.<br><br>" + 
            "Η κατάσταση των αιτήσεων παλαιότερων υποψηφίων θα παραμείνει ως έχει.<br><br>" + 
            "Θέλετε σίγουρα να συνεχίσετε;");

        if (isConfirmed)
        {
            // Proceed with status update
            await UpdateThesisStatusAsCompany(companyThesisId, "Μη Δημοσιευμένη");
        }
    }


    private async Task HandlePublishClickToSaveInternshipsAsCompany()
    {
        // Call JavaScript function for confirmation with custom HTML and styling
        bool isConfirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML", new object[] {
            "Είστε σίγουροι πως θέλετε να υποβάλλετε Νέα Θέση Πρακτικής Άσκησης; Η Θέση θα καταχωρηθεί ως 'Δημοσιευμένη' στο Ιστορικό Θέσεων Πρακτικής Άσκησης. " +
            "Αν επιθυμείτε να την Αποδημοσιεύσετε απαιτούνται επιπλέον ενέργειες! <br>" +
            "<strong style='color: red;'>Παρακαλώ επιβεβαιώστε την ενέργειά σας.</strong>"
    });

        if (isConfirmed)
        {
            // Set status to Δημοσιευμένη
            companyInternship.CompanyUploadedInternshipStatus = "Δημοσιευμένη";

            // Proceed with the form submission
            await UploadInternshipAsCompany();
        }
    }



    private void UpdateTownsForSelectedRegion(ChangeEventArgs e)
    {
        selectedRegion = e.Value?.ToString();
        if (!string.IsNullOrEmpty(selectedRegion) && RegionToTownsMap.ContainsKey(selectedRegion))
        {
            availableTowns = RegionToTownsMap[selectedRegion];
        }
        else
        {
            availableTowns = null; // Clear the town selection if no region is selected
        }
    }

    private void OnTownChangeForInternships(ChangeEventArgs e)
    {
        selectedInternship.CompanyInternshipDimosLocation = e.Value?.ToString();
    }

    private void LogJobLoadingInfo()
    {
        var message = $"Loaded jobs for company: {companyName} \n" +
                      $"Total Jobs: {totalCountJobs} \n" +
                      $"Published Jobs: {publishedCountJobs} \n" +
                      $"Unpublished Jobs: {unpublishedCountJobs} \n" +
                      $"Withdrawn Jobs: {withdrawnCountJobs}";

        Console.WriteLine(message); // This writes to the console
    }

    private async Task HandleTemporarySaveJobAsCompany()
    {
        // Call JavaScript function for confirmation with HTML content and custom styling
        bool isConfirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML", new object[] { 
            "Είστε σίγουροι πως θέλετε να υποβάλλετε Νέα Θέση Εργασίας; Η Θέση θα καταχωρηθεί ως 'Μη Δημοσιευμένη' στο Ιστορικό Θέσεων Εργασίας. <br>" +
            "<strong style='color: red;'>Αν επιθυμείτε να την Δημοσιεύσετε απαιτούνται επιπλέον ενέργειες!</strong>"
    });

        if (isConfirmed)
        {
            // Proceed with the temporary save
            await UploadJobAsCompany(false);
            NavigationManager.NavigateTo(NavigationManager.Uri, forceLoad: true);
        }
         StateHasChanged();
    }

    private async Task HandlePublishSaveJobAsCompany()
    {
        // Call JavaScript function for confirmation with HTML content and custom styling
        bool isConfirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML", new object[] { 
            "Είστε σίγουροι πως θέλετε να υποβάλλετε Νέα Θέση Εργασίας; Η Θέση θα καταχωρηθεί ως 'Δημοσιευμένη' στο Ιστορικό Θέσεων Εργασίας. <br>" +
            "<strong style='color: red;'>Αν επιθυμείτε να την Αποδημοσιεύσετε απαιτούνται επιπλέον ενέργειες!</strong>"
    });

        if (isConfirmed)
        {
            // Proceed with publishing the job
            await UploadJobAsCompany(true);
            NavigationManager.NavigateTo(NavigationManager.Uri, forceLoad: true);
        }
        StateHasChanged();
    }


    private async Task HandleTemporarySaveThesisAsCompany()
    {
        // Show custom confirmation dialog with formatted text
        bool isConfirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML",
            "Είστε σίγουροι πως θέλετε να <strong style='color: blue;'>Υποβάλετε</strong> Νέα Πτυχιακή Εργασία;<br><br>" +
            "Η Εργασία θα καταχωρηθεί ως <strong style='color: red;'>'Μη Δημοσιευμένη'</strong> στο Ιστορικό Θέσεων Πτυχιακών Εργασιών.<br><br>" +
            "Αν επιθυμείτε να την Δημοσιεύσετε απαιτούνται επιπλέον ενέργειες!<br><br>" +
            "Θέλετε να συνεχίσετε;");

        if (isConfirmed)
        {
            // Proceed with the temporary save
            await UploadThesisAsCompany(false);
        }
        StateHasChanged();
    }

    private async Task HandlePublishSaveThesisAsCompany()
    {
        // Show custom confirmation dialog with formatted text
        bool isConfirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML",
            "Είστε σίγουροι πως θέλετε να <strong style='color: green;'>Υποβάλετε</strong> Νέα Πτυχιακή Εργασία;<br><br>" +
            "Η Εργασία θα καταχωρηθεί ως <strong style='color: green;'>'Δημοσιευμένη'</strong> στο Ιστορικό Θέσεων Πτυχιακών Εργασιών.<br><br>" +
            "Αν επιθυμείτε να την <strong style='color: red;'>Αποδημοσιεύσετε</strong> απαιτούνται επιπλέον ενέργειες!<br><br>" +
            "Θέλετε να συνεχίσετε;");

        if (isConfirmed)
        {
            // Proceed with publishing the thesis
            await UploadThesisAsCompany(true);
        }
        StateHasChanged();
    }



    private async Task SaveAnnouncementAsPublished()
    {
        // Validate mandatory fields
        isFormValidToSaveAnnouncementAsCompany = ValidateMandatoryFieldsForUploadAnnouncementAsCompany();

        if (!isFormValidToSaveAnnouncementAsCompany)
            return;

        // Show custom confirmation dialog with HTML styling
        bool isConfirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML", new object[] { 
            $"Πρόκεται να Δημιουργήσετε μια Ανακοίνωση με Τίτλο: <strong>{announcement.CompanyAnnouncementTitle}</strong> ως '<strong>Δημοσιευμένη</strong>'.<br><br>" +
            "<strong style='color: red;'>Είστε σίγουρος/η;</strong>"
        });

        if (!isConfirmed)
            return;

        announcement.CompanyAnnouncementStatus = "Δημοσιευμένη";
        announcement.CompanyAnnouncementUploadDate = DateTime.Now;
        announcement.CompanyAnnouncementCompanyEmail = CurrentUserEmail;
        announcement.CompanyAnnouncementRNG = new Random().NextInt64();
        announcement.CompanyAnnouncementRNG_HashedAsUniqueID = HashingHelper.HashLong(announcement.CompanyAnnouncementRNG ?? 0);
        await SaveAnnouncementToDatabase();
    }

    private async Task SaveAnnouncementAsUnpublished()
    {
        // Validate mandatory fields
        isFormValidToSaveAnnouncementAsCompany = ValidateMandatoryFieldsForUploadAnnouncementAsCompany();

        if (!isFormValidToSaveAnnouncementAsCompany)
            return;

        // Show custom confirmation dialog with HTML styling
        bool isConfirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML", new object[] { 
            $"Πρόκεται να Δημιουργήσετε μια Ανακοίνωση με Τίτλο: <strong>{announcement.CompanyAnnouncementTitle}</strong> ως '<strong>Μη Δημοσιευμένη (Προσωρινή Αποθήκευση)</strong>'.<br><br>" +
            "<strong style='color: red;'>Είστε σίγουρος/η;</strong>"
        });

        if (!isConfirmed)
            return;

        announcement.CompanyAnnouncementStatus = "Μη Δημοσιευμένη";
        announcement.CompanyAnnouncementUploadDate = DateTime.Now;
        announcement.CompanyAnnouncementCompanyEmail = CurrentUserEmail;
        announcement.CompanyAnnouncementRNG = new Random().NextInt64();
        announcement.CompanyAnnouncementRNG_HashedAsUniqueID = HashingHelper.HashLong(announcement.CompanyAnnouncementRNG ?? 0);
        await SaveAnnouncementToDatabase();
    }



    // Method to validate mandatory fields
    private bool ValidateMandatoryFieldsForUploadAnnouncementAsCompany()
    {
        // Check if mandatory fields are filled, including date validation for today's date
        if (string.IsNullOrWhiteSpace(announcement.CompanyAnnouncementTitle) || 
            string.IsNullOrWhiteSpace(announcement.CompanyAnnouncementDescription) ||
            announcement.CompanyAnnouncementTimeToBeActive.Date == DateTime.Today) // Ensure date is not today's date
        {
            // Trigger error message and return false for form validity
            showErrorMessageforUploadingAnnouncementAsCompany = true;
            return false;
        }

        // No errors, form is valid
        showErrorMessageforUploadingAnnouncementAsCompany = false;
        return true;
    }



    private async Task SaveAnnouncementToDatabase()
    {
        try
        {
            // Check each required field and scroll to it if it is missing
            if (string.IsNullOrWhiteSpace(announcement.CompanyAnnouncementTitle))
            {
                showErrorMessageforUploadingAnnouncementAsCompany = true;
                await JS.InvokeVoidAsync("scrollToElementById", "announcementTitle");
                return;
            }

            if (string.IsNullOrWhiteSpace(announcement.CompanyAnnouncementDescription))
            {
                showErrorMessageforUploadingAnnouncementAsCompany = true;
                await JS.InvokeVoidAsync("scrollToElementById", "announcementDescription");
                return;
            }

            if (announcement.CompanyAnnouncementTimeToBeActive.Date <= DateTime.Today)
            {
                showErrorMessageforUploadingAnnouncementAsCompany = true;
                await JS.InvokeVoidAsync("scrollToElementById", "announcementActiveDate");
                return;
            }

            // All validations passed - proceed with saving
            dbContext.AnnouncementsAsCompany.Add(announcement);
            await dbContext.SaveChangesAsync();
    
            isSaveAnnouncementAsCompanySuccessful = true;
            saveAnnouncementAsCompanyMessage = "Η Ανακοίνωση Δημιουργήθηκε Επιτυχώς";
    
            // Clear form or reset as needed
            announcement = new AnnouncementAsCompany();
        }
        catch (Exception ex)
        {
            isSaveAnnouncementAsCompanySuccessful = false;
            saveAnnouncementAsCompanyMessage = "Κάποιο πρόβλημα παρουσιάστηκε με την Δημιουργία της Ανακοίνωσης! Ανανεώστε την σελίδα και προσπαθήστε ξανά";
            Console.WriteLine($"Error saving announcement: {ex.Message}");
        }

        StateHasChanged();
        NavigationManager.NavigateTo(NavigationManager.Uri, forceLoad: true);
    }



    private void TogglePositionAreasVisibility()
    {
        isPositionAreasVisible = !isPositionAreasVisible;
    }

    private void ToggleThesisAreasVisibility()
    {
        isThesisAreasVisible = !isThesisAreasVisible;
    }

    private void OnPositionAreaCheckboxChanged(ChangeEventArgs e, string areaName)
    {
        if (e.Value != null && bool.TryParse(e.Value.ToString(), out bool isChecked))
        {
            if (isChecked)
            {
                if (!selectedPositionAreas.Contains(areaName))
                {
                    selectedPositionAreas.Add(areaName);
                }
            }
            else
            {
                selectedPositionAreas.Remove(areaName);
            }
        }
    }

    private void OnThesisAreaCheckboxChanged(ChangeEventArgs e, string areaName)
    {
        if (e.Value != null && bool.TryParse(e.Value.ToString(), out bool isChecked))
        {
            if (isChecked)
            {
                if (!selectedThesisAreas.Contains(areaName))
                {
                    selectedThesisAreas.Add(areaName);
                }
            }
            else
            {
                selectedThesisAreas.Remove(areaName);
            }
        }
    }

    public async Task DeleteExpiredAnnouncements()
    {
        var expiredAnnouncements = await dbContext.AnnouncementsAsCompany
            .Where(a => a.CompanyAnnouncementTimeToBeActive < DateTime.Now)
            .ToListAsync();

        dbContext.AnnouncementsAsCompany.RemoveRange(expiredAnnouncements);
        await dbContext.SaveChangesAsync();
    }

    private async Task ToggleUploadedAnnouncementsVisibility()
    {
        isUploadedAnnouncementsVisible = !isUploadedAnnouncementsVisible;

        if (isUploadedAnnouncementsVisible)
        {
            // Load announcements only when the section is visible
            await LoadUploadedAnnouncementsAsync();
        }

        StateHasChanged();
    }

    private async Task ToggleUploadedCompanyEventsVisibility()
    {
        isUploadedEventsVisible = !isUploadedEventsVisible;

        if (isUploadedEventsVisible)
        {
            // Load announcements only when the section is visible
            await LoadUploadedEventsAsync();
        }

        StateHasChanged();
    }

    private async Task ToggleUploadedProfessorEventsVisibility()
    {
        isUploadedEventsVisibleAsProfessor = !isUploadedEventsVisibleAsProfessor;

        if (isUploadedEventsVisibleAsProfessor)
        {
            // Load announcements only when the section is visible
            await LoadUploadedEventsAsyncAsProfessor();
        }

        StateHasChanged();
    }

    private async Task ToggleUploadedAnnouncementsVisibilityAsProfessor()
    {
        isUploadedAnnouncementsVisibleAsProfessor = !isUploadedAnnouncementsVisibleAsProfessor;

        if (isUploadedAnnouncementsVisibleAsProfessor)
        {
            // Load announcements only when the section is visible
            await LoadUploadedAnnouncementsAsProfessorAsync();
        }

        StateHasChanged();
    }

    private async Task ToggleCompanySearchStudentVisible()
    {
        isCompanySearchStudentVisible = !isCompanySearchStudentVisible;
        StateHasChanged();
    }

    private async Task ToggleCompanySearchProfessorVisible()
    {
        isCompanySearchProfessorVisible = !isCompanySearchProfessorVisible;
        StateHasChanged();
    }

    private async Task ToggleCompanySearchResearchGroupVisible()
    {
        isCompanySearchResearchGroupVisible = !isCompanySearchResearchGroupVisible;
        StateHasChanged();
    }

    private async Task ToggleRGSearchProfessorVisible()
    {
        isRGSearchProfessorVisible = !isRGSearchProfessorVisible;
        StateHasChanged();
    }


    private async Task ToggleUploadedThesesVisibilityAsProfessor()
    {
        isUploadedThesesVisibleAsProfessor = !isUploadedThesesVisibleAsProfessor;

        if (isUploadedThesesVisibleAsProfessor)
        {
            // Load announcements only when the section is visible
            await LoadUploadedThesesAsProfessorAsync();
        }

        StateHasChanged();
    }

    private void ToggleToSearchForUploadedCompanyThesesAsProfessor()
    {
        isUploadedCompanyThesesVisibleAsProfessor = !isUploadedCompanyThesesVisibleAsProfessor;

        // Clear search results if toggling off the search form
        if (!isUploadedCompanyThesesVisibleAsProfessor)
        {
            companyThesesResultsToFindThesesAsProfessor = null;
            searchPerformedToFindThesesAsProfessor = false;
        }
    }

    private void ToggleToSearchForUploadedProfessorThesesAsCompany()
    {
        isUploadedProfessorThesesVisibleAsCompany = !isUploadedProfessorThesesVisibleAsCompany;

        // Clear search results if toggling off the search form
        if (!isUploadedProfessorThesesVisibleAsCompany)
        {
            professorThesesResultsToFindThesesAsCompany = null;
            searchPerformedToFindThesesAsCompany = false;
        }
    }

    private async Task<List<AnnouncementAsCompany>> GetUploadedAnnouncements()
    {
        return await dbContext.AnnouncementsAsCompany
            .Where(a => a.CompanyAnnouncementCompanyEmail == CurrentUserEmail)
            .ToListAsync();
    }

    private async Task<List<CompanyEvent>> GetUploadedCompanyEvents()
    {
        return await dbContext.CompanyEvents
            .Include(e => e.Company) // Include the Company data
            .Where(e => e.CompanyEmailUsedToUploadEvent == CurrentUserEmail)
            .ToListAsync();
    }

    private async Task<List<ProfessorEvent>> GetUploadedProfessorEvents()
    {
        return await dbContext.ProfessorEvents
            .Include(pe => pe.Professor) // Include the Professor data
            .Where(pe => pe.ProfessorEmailUsedToUploadEvent == CurrentUserEmail)
            .ToListAsync();
    }

    private async Task<List<AnnouncementAsProfessor>> GetUploadedAnnouncementsAsProfessor()
    {
        return await dbContext.AnnouncementsAsProfessor
            .Where(a => a.ProfessorAnnouncementProfessorEmail == CurrentUserEmail)
            .ToListAsync();
    }

    private async Task DeleteAnnouncement(int announcementId)
    {
        // Show custom confirmation dialog with formatted text
        var isConfirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML",
            "Πρόκειται να διαγράψετε οριστικά αυτή την Ανακοίνωση.<br><br>" + 
            "<strong style='color: red;'>Είστε σίγουρος/η;</strong>");

        if (isConfirmed)
        {
            // Proceed with deletion
            var announcement = await dbContext.AnnouncementsAsCompany.FindAsync(announcementId);
            if (announcement != null)
            {
                dbContext.AnnouncementsAsCompany.Remove(announcement);
                await dbContext.SaveChangesAsync();

                // Refresh the list after deletion
                UploadedAnnouncements = await GetUploadedAnnouncements();
            }

            // Trigger UI refresh
            StateHasChanged();
            NavigationManager.NavigateTo(NavigationManager.Uri, forceLoad: true);
        }
    }



    private async Task DeleteCompanyEvent(int companyeventId)
    {
        // Show custom confirmation dialog with formatted text
        var isConfirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML",
            "<strong style='color: red;'>Προσοχή!</strong><br><br>" +
            "Πρόκειται να <strong style='color: red;'>διαγράψετε οριστικά</strong> αυτή την Εκδήλωση.<br><br>" +
            "Αυτή η ενέργεια <strong>δεν μπορεί να αναιρεθεί</strong>.<br><br>" +
            "Είστε σίγουρος/η;");

        if (isConfirmed)
        {
            // Proceed with deletion
            var companyevent = await dbContext.CompanyEvents.FindAsync(companyeventId);
            if (companyevent != null)
            {
                dbContext.CompanyEvents.Remove(companyevent);
                await dbContext.SaveChangesAsync();

                // Refresh the lists
                UploadedEventsAsCompany = await GetUploadedCompanyEvents();
                FilteredCompanyEvents = UploadedEventsAsCompany.ToList();
            }

            // Trigger UI refresh
            StateHasChanged();
        }
    }


    private async Task DeleteProfessorEvent(int professoreventId)
    {
        // Show a confirmation dialog
        var isConfirmed = await JS.InvokeAsync<bool>("confirm", new object[] { "Πρόκειται να διαγράψετε οριστικά αυτή την Εκδήλωση είστε σίγουρος/η;" });

        if (isConfirmed)
        {
            // Proceed with deletion
            var professorevent = await dbContext.ProfessorEvents.FindAsync(professoreventId);
            if (professorevent != null)
            {
                dbContext.ProfessorEvents.Remove(professorevent);
                await dbContext.SaveChangesAsync();

                // Refresh the lists
                UploadedEventsAsProfessor = await GetUploadedProfessorEvents();
                FilteredProfessorEvents = UploadedEventsAsProfessor.ToList();
            }

            // Trigger UI refresh
            StateHasChanged();
        }
    }


    private async Task DeleteAnnouncementAsProfessor(int professorannouncementId)
    {
        // Delete the selected announcement from the database
        var professorannouncement = await dbContext.AnnouncementsAsProfessor.FindAsync(professorannouncementId);
        if (professorannouncement != null)
        {
            dbContext.AnnouncementsAsProfessor.Remove(professorannouncement);
            await dbContext.SaveChangesAsync();

            // Refresh the list after deletion
            UploadedAnnouncementsAsProfessor = await GetUploadedAnnouncementsAsProfessor();
        }
        StateHasChanged();
    }

    private async Task LoadUploadedAnnouncementsAsync()
    {
        try
        {
            var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
            var user = authState.User;
            var userEmail = user.FindFirst("name")?.Value;

            if (!string.IsNullOrEmpty(userEmail))
            {
                // Fetch announcements related to the current company
                UploadedAnnouncements = await dbContext.AnnouncementsAsCompany
                    .Where(i => i.CompanyAnnouncementCompanyEmail == userEmail)
                    .ToListAsync();

                // Check the loaded data
                if (UploadedAnnouncements == null || !UploadedAnnouncements.Any())
                {
                    Console.WriteLine("No Announcements found for this user.");
                }
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading Announcements: {ex.Message}");
        }
        StateHasChanged();
    }

    private async Task LoadUploadedAnnouncementsAsProfessorAsync()
    {
        try
        {
            var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
            var user = authState.User;
            var userEmail = user.FindFirst("name")?.Value;

            if (!string.IsNullOrEmpty(userEmail))
            {
                // Fetch announcements related to the current company
                UploadedAnnouncementsAsProfessor = await dbContext.AnnouncementsAsProfessor
                    .Where(i => i.ProfessorAnnouncementProfessorEmail == userEmail)
                    .ToListAsync();

                // Check the loaded data
                if (UploadedAnnouncementsAsProfessor == null || !UploadedAnnouncementsAsProfessor.Any())
                {
                    Console.WriteLine("No Announcements found for this user.");
                }
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading Announcements: {ex.Message}");
        }
        StateHasChanged();
    }

    private async Task LoadUploadedEventsAsync()
    {
        try
        {
            var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
            var user = authState.User;
            var userEmail = user.FindFirst("name")?.Value;

            if (!string.IsNullOrEmpty(userEmail))
            {
                // Fetch events related to the current company with Company data included
                UploadedEventsAsCompany = await dbContext.CompanyEvents
                    .Include(e => e.Company) // Include the Company data
                    .Where(e => e.CompanyEmailUsedToUploadEvent == userEmail)
                    .ToListAsync();

                // Check the loaded data
                if (UploadedEventsAsCompany == null || !UploadedEventsAsCompany.Any())
                {
                    Console.WriteLine("No Events found for this user.");
                }
                else
                {
                    Console.WriteLine($"Found {UploadedEventsAsCompany.Count} events for company: {userEmail}");
                }
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading Events: {ex.Message}");
        }
        StateHasChanged();
    }

    private async Task LoadUploadedEventsAsyncAsProfessor()
    {
        try
        {
            var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
            var user = authState.User;
            var userEmail = user.FindFirst("name")?.Value;

            if (!string.IsNullOrEmpty(userEmail))
            {
                // Fetch events related to the current professor
                UploadedEventsAsProfessor = await dbContext.ProfessorEvents
                    .Include(pe => pe.Professor) // Include professor data
                    .Where(pe => pe.ProfessorEmailUsedToUploadEvent == userEmail)
                    .ToListAsync();

                // Check the loaded data
                if (UploadedEventsAsProfessor == null || !UploadedEventsAsProfessor.Any())
                {
                    Console.WriteLine("No Events found for this professor.");
                }
                else
                {
                    // Example of accessing professor data through navigation property
                    foreach (var ev in UploadedEventsAsProfessor)
                    {
                        Console.WriteLine($"Event {ev.Id} by {ev.Professor?.ProfName} from {ev.Professor?.ProfUniversity}");
                    }
                }
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading Events: {ex.Message}");
        }
        StateHasChanged();
    }

    private async Task LoadUploadedThesesAsProfessorAsync()
    {
        try
        {
            var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
            var user = authState.User;
            var userEmail = user.FindFirst("name")?.Value;

            if (!string.IsNullOrEmpty(userEmail))
            {
                // Fetch theses with professor details using navigation property
                UploadedThesesAsProfessor = await dbContext.ProfessorTheses
                    .Include(t => t.Professor) // Include professor details
                    .Where(t => t.ProfessorEmailUsedToUploadThesis == userEmail)
                    .OrderByDescending(t => t.ThesisUploadDateTime) // Newest first
                    .ToListAsync();

                if (UploadedThesesAsProfessor == null || !UploadedThesesAsProfessor.Any())
                {
                    Console.WriteLine("No theses found for this professor.");
                }
                else
                {
                    // Log loaded theses count for debugging
                    Console.WriteLine($"Loaded {UploadedThesesAsProfessor.Count} theses for professor {userEmail}");
                }
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading professor theses: {ex.Message}");
            // Consider adding user-friendly error notification
            await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("showErrorToast", 
                "Σφάλμα φόρτωσης πτυχιακών").AsTask());
        }
        finally
        {
            StateHasChanged();
        }
    }

    private async Task LoadToSeeUploadedCompanyThesesAsProfessorAsync()
    {
        try
        {
            // Load all company theses for the professor to see
            UploadedCompanyThesesToSeeAsProfessor = await dbContext.CompanyTheses.ToListAsync();

            // Check if any theses were found
            if (UploadedCompanyThesesToSeeAsProfessor == null || !UploadedCompanyThesesToSeeAsProfessor.Any())
            {
                Console.WriteLine("No Company Theses found for the Professor To See");
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading Company Theses: {ex.Message}");
        }
        StateHasChanged();
    }

    private async Task ChangeAnnouncementStatus(int announcementId, string newStatus)
    {
        // Show custom confirmation dialog with formatted text
        var isConfirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML",
            $"Πρόκειται να αλλάξετε την κατάσταση αυτής της Ανακοίνωσης σε <strong>{newStatus}</strong>.<br><br>" +
            "<strong style='color: red;'>Είστε σίγουρος/η;</strong>");

        // Proceed only if confirmed
        if (isConfirmed)
        {
            // Find the announcement by ID and update its status
            var announcement = UploadedAnnouncements.FirstOrDefault(a => a.Id == announcementId);
            if (announcement != null)
            {
                announcement.CompanyAnnouncementStatus = newStatus;
                // Update the status in the database
                await dbContext.SaveChangesAsync();
            }

            // Refresh UI
            StateHasChanged();
        }
    }



    private async Task ChangeCompanyEventStatus(int companyeventId, string newStatus)
    {
        // Show custom confirmation dialog with formatted text
        var isConfirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML",
            $"Πρόκειται να αλλάξετε την κατάσταση αυτής της Εκδήλωσης σε " +
            $"<strong style='color: {(newStatus == "Δημοσιευμένη" ? "green" : "red")};'>{newStatus}</strong>.<br><br>" +
            "Είστε σίγουρος/η;");

        // Proceed only if confirmed
        if (isConfirmed)
        {
            // Find the event by ID and update its status
            var companyevent = UploadedEventsAsCompany.FirstOrDefault(a => a.Id == companyeventId);
            if (companyevent != null)
            {
                companyevent.CompanyEventStatus = newStatus;
                // Update the status in the database
                await dbContext.SaveChangesAsync();

                // Optionally, refresh FilteredCompanyEvents if necessary
                FilteredCompanyEvents = UploadedEventsAsCompany.ToList();
            }

            StateHasChanged();
        }
    }


    private async Task ChangeProfessorEventStatus(int professoreventId, string newStatus)
    {
        // Show confirmation dialog
        var isConfirmed = await JS.InvokeAsync<bool>("confirm", new object[] 
        { 
            $"Πρόκειται να αλλάξετε την κατάσταση αυτής της Εκδήλωσης σε '{newStatus}'. Είστε σίγουρος/η;" 
        });

        // Proceed only if confirmed
        if (isConfirmed)
        {
            // Find the announcement by ID and update its status
            var professorevent = UploadedEventsAsProfessor.FirstOrDefault(a => a.Id == professoreventId);
            if (professorevent != null)
            {
                professorevent.ProfessorEventStatus = newStatus;
                // Update the status in the database as well
                await dbContext.SaveChangesAsync();

                // Optionally, refresh FilteredCompanyEvents if necessary
                FilteredProfessorEvents = UploadedEventsAsProfessor.ToList();
            }

            StateHasChanged();
        }
    }


    private async Task ChangeAnnouncementStatusAsProfessor(int professorannouncementId, string professorannouncementnewStatus)
    {
        // Find the announcement by ID and update its status
        var professorannouncement = UploadedAnnouncementsAsProfessor.FirstOrDefault(a => a.Id == professorannouncementId);
        if (announcement != null)
        {
            professorannouncement.ProfessorAnnouncementStatus = professorannouncementnewStatus;
            // Update the status in the database as well
            await dbContext.SaveChangesAsync();
        }
        StateHasChanged();
    }

    private async Task ChangeThesisStatusAsProfessor(int professorthesisId, string professorthesisnewStatus)
    {
        // Find the announcement by ID and update its status
        var professorthesis = UploadedThesesAsProfessor.FirstOrDefault(a => a.Id == professorthesisId);
        if (thesis != null)
        {
            professorthesis.ThesisStatus = professorthesisnewStatus;
            await dbContext.SaveChangesAsync();
        }
        StateHasChanged();
    }

    private void OpenEditModal(AnnouncementAsCompany announcement)
    {
        currentAnnouncement = new AnnouncementAsCompany
        {
            Id = announcement.Id,
            CompanyAnnouncementTitle = announcement.CompanyAnnouncementTitle,
            CompanyAnnouncementDescription = announcement.CompanyAnnouncementDescription,
            CompanyAnnouncementUploadDate = announcement.CompanyAnnouncementUploadDate,
            CompanyAnnouncementCompanyEmail = announcement.CompanyAnnouncementCompanyEmail,
            CompanyAnnouncementTimeToBeActive = announcement.CompanyAnnouncementTimeToBeActive,
            CompanyAnnouncementAttachmentFile = announcement.CompanyAnnouncementAttachmentFile
        };
        isEditModalVisible = true;
    }

    private void OpenEditModalForCompanyEvent(CompanyEvent companyEvent)
    {
        currentCompanyEvent = new CompanyEvent
        {
            Id = companyEvent.Id,
            RNGForEventUploadedAsCompany = companyEvent.RNGForEventUploadedAsCompany,
            CompanyEventType = companyEvent.CompanyEventType,
            CompanyEventOtherOrganizerToBeVisible = companyEvent.CompanyEventOtherOrganizerToBeVisible,
            CompanyEventOtherOrganizer = companyEvent.CompanyEventOtherOrganizer,
            CompanyEventAreasOfInterest = companyEvent.CompanyEventAreasOfInterest,
            CompanyEventTitle = companyEvent.CompanyEventTitle,
            CompanyEventDescription = companyEvent.CompanyEventDescription,
            CompanyEventStatus = companyEvent.CompanyEventStatus,
            CompanyEventResponsiblePerson = companyEvent.CompanyEventResponsiblePerson,
            CompanyEventResponsiblePersonEmail = companyEvent.CompanyEventResponsiblePersonEmail,
            CompanyEventResponsiblePersonTelephone = companyEvent.CompanyEventResponsiblePersonTelephone,
            CompanyEventCompanyDepartment = companyEvent.CompanyEventCompanyDepartment,
            CompanyEventUploadedDate = companyEvent.CompanyEventUploadedDate,
            CompanyEventActiveDate = companyEvent.CompanyEventActiveDate,
            CompanyEventPerifereiaLocation = companyEvent.CompanyEventPerifereiaLocation,
            CompanyEventDimosLocation = companyEvent.CompanyEventDimosLocation,
            CompanyEventPlaceLocation = companyEvent.CompanyEventPlaceLocation,
            CompanyEventTime = companyEvent.CompanyEventTime, // TimeSpan property
            CompanyEventPostalCodeLocation = companyEvent.CompanyEventPostalCodeLocation,
            CompanyEventAttachmentFile = companyEvent.CompanyEventAttachmentFile,
            CompanyEventOfferingTransportToEventLocation = companyEvent.CompanyEventOfferingTransportToEventLocation,
            CompanyEventStartingPointLocationToTransportPeopleToEvent1 = companyEvent.CompanyEventStartingPointLocationToTransportPeopleToEvent1,
            CompanyEventStartingPointLocationToTransportPeopleToEvent2 = companyEvent.CompanyEventStartingPointLocationToTransportPeopleToEvent2,
            CompanyEventStartingPointLocationToTransportPeopleToEvent3 = companyEvent.CompanyEventStartingPointLocationToTransportPeopleToEvent3,
            RNGForEventUploadedAsCompany_HashedAsUniqueID = companyEvent.RNGForEventUploadedAsCompany_HashedAsUniqueID,
            CompanyEmailUsedToUploadEvent = companyEvent.CompanyEmailUsedToUploadEvent
        };

        // Initialize SelectedAreasToEditForCompanyEvent
        SelectedAreasToEditForCompanyEvent = string.IsNullOrEmpty(companyEvent.CompanyEventAreasOfInterest) 
            ? new List<Area>() 
            : companyEvent.CompanyEventAreasOfInterest
                .Split(',')
                .Select(areaName => Areas.FirstOrDefault(area => area.AreaName.Trim() == areaName.Trim())) 
                .Where(area => area != null)
                .ToList();

        // Ensure towns are loaded when opening the modal
        AvailableTownsForEditCompanyEvent = GetTownsForRegionForEditCompanyEvent(companyEvent.CompanyEventPerifereiaLocation);

        isEditModalVisibleForEventsAsCompany = true;
    }


    private List<string> GetTownsForRegionForEditProfessorEvent(string region)
    {
        return RegionToTownsMap.ContainsKey(region) 
            ? RegionToTownsMap[region] 
            : new List<string>();
    }


    private List<Area> SelectedAreasToEditForProfessorEvent = new();
    private List<string> AvailableTownsForEditProfessorEvent = new();
   private void OpenEditModalForProfessorEvent(ProfessorEvent professorevent)
    {
        // Make sure to include Professor when loading the event
        var eventWithProfessor = dbContext.ProfessorEvents
            .Include(pe => pe.Professor)
            .FirstOrDefault(pe => pe.Id == professorevent.Id);

        if (eventWithProfessor == null) return;

        currentProfessorEvent = new ProfessorEvent
        {
            Id = eventWithProfessor.Id,
            ProfessorEventTitle = eventWithProfessor.ProfessorEventTitle,
            ProfessorEventDescription = eventWithProfessor.ProfessorEventDescription,
            ProfessorEventType = eventWithProfessor.ProfessorEventType,
            ProfessorEventOtherOrganizerToBeVisible = eventWithProfessor.ProfessorEventOtherOrganizerToBeVisible,
            ProfessorEventOtherOrganizer = eventWithProfessor.ProfessorEventOtherOrganizer,
            ProfessorEventAreasOfInterest = eventWithProfessor.ProfessorEventAreasOfInterest,
            ProfessorEventStatus = eventWithProfessor.ProfessorEventStatus,
            ProfessorEventResponsiblePerson = eventWithProfessor.ProfessorEventResponsiblePerson,
            ProfessorEventResponsiblePersonEmail = eventWithProfessor.ProfessorEventResponsiblePersonEmail,
            ProfessorEventResponsiblePersonTelephone = eventWithProfessor.ProfessorEventResponsiblePersonTelephone,
            // University and department now come from Professor navigation property
            Professor = new Professor 
            {
                ProfUniversity = eventWithProfessor.Professor?.ProfUniversity,
                ProfDepartment = eventWithProfessor.Professor?.ProfDepartment,
                ProfImage = eventWithProfessor.Professor?.ProfImage
            },
            ProfessorEventPerifereiaLocation = eventWithProfessor.ProfessorEventPerifereiaLocation,
            ProfessorEventDimosLocation = eventWithProfessor.ProfessorEventDimosLocation,
            ProfessorEventPlaceLocation = eventWithProfessor.ProfessorEventPlaceLocation,
            ProfessorEventActiveDate = eventWithProfessor.ProfessorEventActiveDate,
            ProfessorEventTime = eventWithProfessor.ProfessorEventTime,
            ProfessorEventPostalCodeLocation = eventWithProfessor.ProfessorEventPostalCodeLocation,
            ProfessorEventAttachmentFile = eventWithProfessor.ProfessorEventAttachmentFile,
            ProfessorEventOfferingTransportToEventLocation = eventWithProfessor.ProfessorEventOfferingTransportToEventLocation,
            ProfessorEventStartingPointLocationToTransportPeopleToEvent1 = eventWithProfessor.ProfessorEventStartingPointLocationToTransportPeopleToEvent1,
            ProfessorEventStartingPointLocationToTransportPeopleToEvent2 = eventWithProfessor.ProfessorEventStartingPointLocationToTransportPeopleToEvent2,
            ProfessorEventStartingPointLocationToTransportPeopleToEvent3 = eventWithProfessor.ProfessorEventStartingPointLocationToTransportPeopleToEvent3,
            ProfessorEmailUsedToUploadEvent = eventWithProfessor.ProfessorEmailUsedToUploadEvent
        };

        // Initialize SelectedAreasToEditForProfessorEvent
        SelectedAreasToEditForProfessorEvent = string.IsNullOrEmpty(eventWithProfessor.ProfessorEventAreasOfInterest) 
            ? new List<Area>() 
            : eventWithProfessor.ProfessorEventAreasOfInterest
                .Split(',')
                .Select(areaName => Areas.FirstOrDefault(area => area.AreaName.Trim() == areaName.Trim()))
                .Where(area => area != null)
                .ToList();

        // Ensure towns are loaded when opening the modal
        AvailableTownsForEditProfessorEvent = GetTownsForRegionForEditProfessorEvent(eventWithProfessor.ProfessorEventPerifereiaLocation);

        isEditModalVisibleForEventsAsProfessor = true;
    }

    private void OpenEditModalAsProfessor(AnnouncementAsProfessor professorAnnouncement)
    {
        currentAnnouncementAsProfessor = new AnnouncementAsProfessor
        {
            Id = professorAnnouncement.Id,
            ProfessorAnnouncementRNG = professorAnnouncement.ProfessorAnnouncementRNG,
            ProfessorAnnouncementRNG_HashedAsUniqueID = professorAnnouncement.ProfessorAnnouncementRNG_HashedAsUniqueID,
            ProfessorAnnouncementTitle = professorAnnouncement.ProfessorAnnouncementTitle,
            ProfessorAnnouncementDescription = professorAnnouncement.ProfessorAnnouncementDescription,
            ProfessorAnnouncementStatus = professorAnnouncement.ProfessorAnnouncementStatus,
            ProfessorAnnouncementUploadDate = professorAnnouncement.ProfessorAnnouncementUploadDate,
            ProfessorAnnouncementProfessorEmail = professorAnnouncement.ProfessorAnnouncementProfessorEmail,
            ProfessorAnnouncementTimeToBeActive = professorAnnouncement.ProfessorAnnouncementTimeToBeActive,
            ProfessorAnnouncementAttachmentFile = professorAnnouncement.ProfessorAnnouncementAttachmentFile
        };

        // Initialize navigation property with all Professor details
        if (professorAnnouncement.Professor != null)
        {
            currentAnnouncementAsProfessor.Professor = new Professor
            {
                Id = professorAnnouncement.Professor.Id,
                ProfEmail = professorAnnouncement.Professor.ProfEmail,
                Professor_UniqueID = professorAnnouncement.Professor.Professor_UniqueID,
                ProfImage = professorAnnouncement.Professor.ProfImage,
                ProfName = professorAnnouncement.Professor.ProfName,
                ProfSurname = professorAnnouncement.Professor.ProfSurname,
                ProfUniversity = professorAnnouncement.Professor.ProfUniversity,
                ProfDepartment = professorAnnouncement.Professor.ProfDepartment,
                ProfVahmidaDEP = professorAnnouncement.Professor.ProfVahmidaDEP,
                ProfWorkTelephone = professorAnnouncement.Professor.ProfWorkTelephone,
                ProfPersonalTelephone = professorAnnouncement.Professor.ProfPersonalTelephone,
                ProfPersonalTelephoneVisibility = professorAnnouncement.Professor.ProfPersonalTelephoneVisibility,
                ProfPersonalWebsite = professorAnnouncement.Professor.ProfPersonalWebsite,
                ProfLinkedInSite = professorAnnouncement.Professor.ProfLinkedInSite,
                ProfScholarProfile = professorAnnouncement.Professor.ProfScholarProfile,
                ProfOrchidProfile = professorAnnouncement.Professor.ProfOrchidProfile,
                ProfGeneralFieldOfWork = professorAnnouncement.Professor.ProfGeneralFieldOfWork,
                ProfGeneralSkills = professorAnnouncement.Professor.ProfGeneralSkills,
                ProfPersonalDescription = professorAnnouncement.Professor.ProfPersonalDescription,
                ProfCVAttachment = professorAnnouncement.Professor.ProfCVAttachment,
                ProfRegistryNumber = professorAnnouncement.Professor.ProfRegistryNumber,
                ProfCourses = professorAnnouncement.Professor.ProfCourses
            };
        }

        isEditModalVisibleForAnnouncementsAsProfessor = true;
    }


    private void OpenEditModalForThesisAsProfessor(ProfessorThesis professorthesis)
    {
        try
        {
            // Create new instance with navigation properties
            currentThesisAsProfessor = new ProfessorThesis
            {
                Id = professorthesis.Id,
                ThesisTitle = professorthesis.ThesisTitle,
                ThesisDescription = professorthesis.ThesisDescription,
                ThesisType = professorthesis.ThesisType,
                ThesisStatus = professorthesis.ThesisStatus,
                ThesisActivePeriod = professorthesis.ThesisActivePeriod,
                ThesisAreas = professorthesis.ThesisAreas,
                ThesisSkills = professorthesis.ThesisSkills,
                ThesisAttachment = professorthesis.ThesisAttachment,
                ProfessorEmailUsedToUploadThesis = professorthesis.ProfessorEmailUsedToUploadThesis,
                ThesisUploadDateTime = professorthesis.ThesisUploadDateTime,
                ThesisUpdateDateTime = professorthesis.ThesisUpdateDateTime,
                ThesisTimesUpdated = professorthesis.ThesisTimesUpdated,
                // Include professor details if needed
                Professor = professorthesis.Professor != null ? new Professor
                {
                    ProfName = professorthesis.Professor.ProfName,
                    ProfSurname = professorthesis.Professor.ProfSurname,
                    ProfDepartment = professorthesis.Professor.ProfDepartment
                } : null
            };

            // Initialize selected areas
            SelectedAreasToEditForProfessorThesis = new List<Area>();
            if (!string.IsNullOrEmpty(professorthesis.ThesisAreas))
            {
                var currentAreas = professorthesis.ThesisAreas.Split(',', StringSplitOptions.RemoveEmptyEntries)
                    .Select(a => a.Trim())
                    .Where(a => !string.IsNullOrEmpty(a));
            
                SelectedAreasToEditForProfessorThesis = Areas
                    .Where(area => currentAreas.Contains(area.AreaName))
                    .ToList();
            }

            // Initialize selected skills with improved null handling
            SelectedSkillsToEditForProfessorThesis = new List<Skill>();
            if (!string.IsNullOrEmpty(professorthesis.ThesisSkills))
            {
                var currentSkills = professorthesis.ThesisSkills.Split(',', StringSplitOptions.RemoveEmptyEntries)
                    .Select(s => s.Trim())
                    .Where(s => !string.IsNullOrEmpty(s));
                
                SelectedSkillsToEditForProfessorThesis = Skills
                    .Where(skill => currentSkills.Contains(skill.SkillName))
                    .ToList();
            }

            isEditModalVisibleForThesesAsProfessor = true;
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error opening edit modal: {ex.Message}");
            // Consider adding user notification
            SafeInvokeJsAsync(() => JS.InvokeVoidAsync("showErrorToast", 
                "Σφάλμα ανοίγματος επεξεργασίας").AsTask());
        }
        finally
        {
            StateHasChanged();
        }
    }

    private void CloseEditModal()
    {
        isEditModalVisible = false;
    }

    private void CloseEditModalForCompanyEvent()
    {
        isEditModalVisibleForEventsAsCompany = false;
    }

    private void CloseEditModalForProfessorEvent()
    {
        isEditModalVisibleForEventsAsProfessor = false;
    }

    private void CloseEditModalForAnnouncementsAsProfessor()
    {
        isEditModalVisibleForAnnouncementsAsProfessor = false;
    }

    private void CloseEditModalForThesesAsProfessor()
    {
        isEditModalVisibleForThesesAsProfessor = false;
    }

    private async Task UpdateAnnouncement(AnnouncementAsCompany updatedAnnouncement)
    {
        var existingAnnouncement = await dbContext.AnnouncementsAsCompany.FindAsync(updatedAnnouncement.Id);

        if (existingAnnouncement != null)
        {
            existingAnnouncement.CompanyAnnouncementTitle = updatedAnnouncement.CompanyAnnouncementTitle;
            existingAnnouncement.CompanyAnnouncementDescription = updatedAnnouncement.CompanyAnnouncementDescription;
            existingAnnouncement.CompanyAnnouncementAttachmentFile = updatedAnnouncement.CompanyAnnouncementAttachmentFile; // Update file attachment
            await dbContext.SaveChangesAsync();
            CloseEditModal();
        }
    }


    private async Task UpdateCompanyEvent(CompanyEvent updatedCompanyEvent)
    {
        var existingCompanyEvent = await dbContext.CompanyEvents.FindAsync(updatedCompanyEvent.Id);

        if (existingCompanyEvent != null)
        {
            existingCompanyEvent.CompanyEventTitle = updatedCompanyEvent.CompanyEventTitle;
            existingCompanyEvent.CompanyEventDescription = updatedCompanyEvent.CompanyEventDescription;
            existingCompanyEvent.CompanyEventType = updatedCompanyEvent.CompanyEventType;
            existingCompanyEvent.CompanyEventResponsiblePerson = updatedCompanyEvent.CompanyEventResponsiblePerson;
            existingCompanyEvent.CompanyEventResponsiblePersonEmail = updatedCompanyEvent.CompanyEventResponsiblePersonEmail;
            existingCompanyEvent.CompanyEventResponsiblePersonTelephone = updatedCompanyEvent.CompanyEventResponsiblePersonTelephone;
            existingCompanyEvent.CompanyEventCompanyDepartment = updatedCompanyEvent.CompanyEventCompanyDepartment;
            existingCompanyEvent.CompanyEventPerifereiaLocation = updatedCompanyEvent.CompanyEventPerifereiaLocation;
            existingCompanyEvent.CompanyEventDimosLocation = updatedCompanyEvent.CompanyEventDimosLocation;
            existingCompanyEvent.CompanyEventPlaceLocation = updatedCompanyEvent.CompanyEventPlaceLocation;
            existingCompanyEvent.CompanyEventPostalCodeLocation = updatedCompanyEvent.CompanyEventPostalCodeLocation;
            existingCompanyEvent.CompanyEventActiveDate = updatedCompanyEvent.CompanyEventActiveDate;
            existingCompanyEvent.CompanyEventTime = updatedCompanyEvent.CompanyEventTime;

            // Ensure areas are saved as a comma-separated string (or any other format you prefer)
            existingCompanyEvent.CompanyEventAreasOfInterest = string.Join(",", SelectedAreasToEditForCompanyEvent.Select(area => area.AreaName));

            existingCompanyEvent.CompanyEventOfferingTransportToEventLocation = updatedCompanyEvent.CompanyEventOfferingTransportToEventLocation;
            existingCompanyEvent.CompanyEventStartingPointLocationToTransportPeopleToEvent1 = updatedCompanyEvent.CompanyEventStartingPointLocationToTransportPeopleToEvent1;
            existingCompanyEvent.CompanyEventStartingPointLocationToTransportPeopleToEvent2 = updatedCompanyEvent.CompanyEventStartingPointLocationToTransportPeopleToEvent2;
            existingCompanyEvent.CompanyEventStartingPointLocationToTransportPeopleToEvent3 = updatedCompanyEvent.CompanyEventStartingPointLocationToTransportPeopleToEvent3;

            // Save the changes to the database
            await dbContext.SaveChangesAsync();
            CloseEditModalForCompanyEvent();
        }
    }



    private async Task UpdateProfessorEvent(ProfessorEvent updatedProfessorEvent)
    {
        var existingProfessorEvent = await dbContext.ProfessorEvents.FindAsync(updatedProfessorEvent.Id);

        if (existingProfessorEvent != null)
        {
            existingProfessorEvent.ProfessorEventTitle = updatedProfessorEvent.ProfessorEventTitle;
            existingProfessorEvent.ProfessorEventDescription = updatedProfessorEvent.ProfessorEventDescription;
            await dbContext.SaveChangesAsync();
            CloseEditModalForProfessorEvent();
        }
    }

    private async Task UpdateAnnouncementAsProfessor(AnnouncementAsProfessor updatedAnnouncementasProfessor)
    {
        var existingAnnouncementasProfessor = await dbContext.AnnouncementsAsProfessor.FindAsync(updatedAnnouncementasProfessor.Id);

        if (existingAnnouncementasProfessor != null)
        {
            existingAnnouncementasProfessor.ProfessorAnnouncementTitle = updatedAnnouncementasProfessor.ProfessorAnnouncementTitle;
            existingAnnouncementasProfessor.ProfessorAnnouncementDescription = updatedAnnouncementasProfessor.ProfessorAnnouncementDescription;
            existingAnnouncementasProfessor.ProfessorAnnouncementAttachmentFile = updatedAnnouncementasProfessor.ProfessorAnnouncementAttachmentFile;
            await dbContext.SaveChangesAsync();
            CloseEditModalForAnnouncementsAsProfessor();
        }
    }

    private async Task UpdateThesisAsProfessor(ProfessorThesis updatedThesisProfessor)
    {
        try
        {
            // Validate required fields
            if (string.IsNullOrWhiteSpace(currentThesisAsProfessor.ThesisTitle) || 
                string.IsNullOrWhiteSpace(currentThesisAsProfessor.ThesisDescription))
            {
                showSuccessMessage = false;
                showErrorMessage = true;
                await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("showErrorToast", 
                    "Παρακαλώ συμπληρώστε όλα τα απαραίτητα πεδία").AsTask());
                return;
            }

            // Initialize selected areas if null/empty
            SelectedAreasToEditForProfessorThesis ??= new List<Area>();
            if (!SelectedAreasToEditForProfessorThesis.Any())
            {
                var currentAreas = currentThesisAsProfessor.ThesisAreas?
                    .Split(',', StringSplitOptions.RemoveEmptyEntries)
                    .Select(a => a.Trim())
                    .ToList() ?? new List<string>();
            
                SelectedAreasToEditForProfessorThesis = Areas
                    .Where(area => currentAreas.Contains(area.AreaName))
                    .ToList();
            }

            // Initialize selected skills if null/empty
            SelectedSkillsToEditForProfessorThesis ??= new List<Skill>();
            if (!SelectedSkillsToEditForProfessorThesis.Any())
            {
                var currentSkills = currentThesisAsProfessor.ThesisSkills?
                    .Split(',', StringSplitOptions.RemoveEmptyEntries)
                    .Select(s => s.Trim())
                    .ToList() ?? new List<string>();
            
                SelectedSkillsToEditForProfessorThesis = Skills
                    .Where(skill => currentSkills.Contains(skill.SkillName))
                    .ToList();
            }

            // Update areas and skills
            currentThesisAsProfessor.ThesisAreas = string.Join(",", 
                SelectedAreasToEditForProfessorThesis.Select(a => a.AreaName));
            currentThesisAsProfessor.ThesisSkills = string.Join(",", 
                SelectedSkillsToEditForProfessorThesis.Select(s => s.SkillName));

            // Find and update thesis
            var thesisToUpdate = await dbContext.ProfessorTheses
                .Include(t => t.Professor) // Include professor if needed
                .FirstOrDefaultAsync(t => t.Id == currentThesisAsProfessor.Id);

            if (thesisToUpdate == null)
            {
                showSuccessMessage = false;
                showErrorMessage = true;
                await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("showErrorToast", 
                    "Δεν βρέθηκε η πτυχιακή εργασία").AsTask());
                return;
            }

            // Update thesis properties
            thesisToUpdate.ThesisTitle = currentThesisAsProfessor.ThesisTitle;
            thesisToUpdate.ThesisDescription = currentThesisAsProfessor.ThesisDescription;
            thesisToUpdate.ThesisType = currentThesisAsProfessor.ThesisType;
            thesisToUpdate.ThesisStatus = currentThesisAsProfessor.ThesisStatus;
            thesisToUpdate.ThesisActivePeriod = currentThesisAsProfessor.ThesisActivePeriod;
            thesisToUpdate.ThesisAreas = currentThesisAsProfessor.ThesisAreas;
            thesisToUpdate.ThesisSkills = currentThesisAsProfessor.ThesisSkills;

            // Update attachment if new file was uploaded
            if (currentThesisAsProfessor.ThesisAttachment != null && 
                currentThesisAsProfessor.ThesisAttachment.Length > 0)
            {
                thesisToUpdate.ThesisAttachment = currentThesisAsProfessor.ThesisAttachment;
            }

            // Update metadata
            thesisToUpdate.ThesisUpdateDateTime = DateTime.Now;
            thesisToUpdate.ThesisTimesUpdated++;

            // Save changes
            await dbContext.SaveChangesAsync();
        
            showSuccessMessage = true;
            showErrorMessage = false;
            await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("showSuccessToast", 
                "Επιτυχής ενημέρωση πτυχιακής εργασίας").AsTask());
        }
        catch (Exception ex)
        {
            showSuccessMessage = false;
            showErrorMessage = true;
            Console.Error.WriteLine($"Error saving professor thesis: {ex.Message}");
            await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("showErrorToast", 
                $"Σφάλμα ενημέρωσης: {ex.Message}").AsTask());
        }
        finally
        {
            isEditModalVisibleForThesesAsProfessor = false;
            await LoadUploadedThesesAsProfessorAsync(); // Refresh the list
            StateHasChanged();
        }
    }

    private void FilterAnnouncements()
    {
        // Filter the announcements based on the selected filter
        if (selectedStatusFilterForAnnouncements == "Όλα")
        {
            FilteredAnnouncements = UploadedAnnouncements;
        }
        else if (selectedStatusFilterForAnnouncements == "Δημοσιευμένη")
        {
            FilteredAnnouncements = UploadedAnnouncements
                .Where(a => a.CompanyAnnouncementStatus == "Δημοσιευμένη").ToList();
        }
        else if (selectedStatusFilterForAnnouncements == "Μη Δημοσιευμένη")
        {
            FilteredAnnouncements = UploadedAnnouncements
                .Where(a => a.CompanyAnnouncementStatus == "Μη Δημοσιευμένη").ToList();
        }

        // Update counts
        totalCountAnnouncements = UploadedAnnouncements.Count;
        publishedCountAnnouncements = UploadedAnnouncements
            .Count(a => a.CompanyAnnouncementStatus == "Δημοσιευμένη");
        unpublishedCountAnnouncements = UploadedAnnouncements
            .Count(a => a.CompanyAnnouncementStatus == "Μη Δημοσιευμένη");

        // Refresh UI
        StateHasChanged();
    }

    private void FilterAnnouncementsAsProfessor()
    {
        // Filter the announcements based on the selected filter
        if (selectedStatusFilterForAnnouncementsAsProfessor == "Όλα")
        {
            FilteredAnnouncementsAsProfessor = UploadedAnnouncementsAsProfessor;
        }
        else if (selectedStatusFilterForAnnouncementsAsProfessor == "Δημοσιευμένη")
        {
            FilteredAnnouncementsAsProfessor = UploadedAnnouncementsAsProfessor
                .Where(a => a.ProfessorAnnouncementStatus == "Δημοσιευμένη").ToList();
        }
        else if (selectedStatusFilterForAnnouncementsAsProfessor == "Μη Δημοσιευμένη")
        {
            FilteredAnnouncementsAsProfessor = UploadedAnnouncementsAsProfessor
                .Where(a => a.ProfessorAnnouncementStatus == "Μη Δημοσιευμένη").ToList();
        }

        // Update counts
        totalCountAnnouncementsAsProfessor = UploadedAnnouncementsAsProfessor.Count;
        publishedCountAnnouncementsAsProfessor = UploadedAnnouncementsAsProfessor
            .Count(a => a.ProfessorAnnouncementStatus == "Δημοσιευμένη");
        unpublishedCountAnnouncementsAsProfessor = UploadedAnnouncementsAsProfessor
            .Count(a => a.ProfessorAnnouncementStatus == "Μη Δημοσιευμένη");

        // Refresh UI
        StateHasChanged();
    }

    private void FilterThesesAsProfessor()
    {
        // Filter the announcements based on the selected filter
        if (selectedStatusFilterForThesesAsProfessor == "Όλα")
        {
            FilteredThesesAsProfessor = UploadedThesesAsProfessor;
        }
        else
        {
            FilteredThesesAsProfessor = UploadedThesesAsProfessor
                .Where(a => a.ThesisStatus == selectedStatusFilterForThesesAsProfessor)
                .ToList();
        }
        Console.WriteLine($"Filtered Theses Count: {FilteredThesesAsProfessor.Count}");

        // Update counts
        totalCountThesesAsProfessor = UploadedThesesAsProfessor.Count;
        publishedCountThesesAsProfessor = UploadedThesesAsProfessor
            .Count(a => a.ThesisStatus == "Δημοσιευμένη");
        unpublishedCountThesesAsProfessor = UploadedThesesAsProfessor
            .Count(a => a.ThesisStatus == "Μη Δημοσιευμένη");
        withdrawnCountThesesAsProfessor = UploadedThesesAsProfessor
            .Count(a => a.ThesisStatus == "Αποσυρμένη");

        Console.WriteLine($"Total Count: {totalCountThesesAsProfessor}");
        Console.WriteLine($"Published Count: {publishedCountThesesAsProfessor}");
        Console.WriteLine($"Unpublished Count: {unpublishedCountThesesAsProfessor}");
        Console.WriteLine($"Withdrawn Count: {withdrawnCountThesesAsProfessor}");

        // Refresh UI
        StateHasChanged();
    }

@*
    private void FilterThesesAsCompany()
    {
        // Apply filter based on selected status
        if (selectedStatusFilterForCompanyTheses == "Όλα")
        {
            FilteredCompanyTheses = UploadedCompanyTheses;
        }
        else
        {
            FilteredCompanyTheses = UploadedCompanyTheses
                .Where(a => a.CompanyThesisStatus == selectedStatusFilterForCompanyTheses)
                .ToList();
        }

        // Debugging: Check if filtering works
        Console.WriteLine($"Filtered Theses Count: {FilteredCompanyTheses.Count}");

        // Recalculate counts
        totalCountForCompanyTheses = UploadedCompanyTheses.Count; // Total count of filtered theses
        publishedCountForCompanyTheses = UploadedCompanyTheses
            .Count(a => a.CompanyThesisStatus == "Δημοσιευμένη"); // Count from original list
        unpublishedCountForCompanyTheses = UploadedCompanyTheses
            .Count(a => a.CompanyThesisStatus == "Μη Δημοσιευμένη"); // Count from original list
        withdrawnCountForCompanyTheses = UploadedCompanyTheses
            .Count(a => a.CompanyThesisStatus == "Αποσυρμένη"); // Count from original list

        // Log the calculated counts to ensure they are correct
        Console.WriteLine($"Total Count: {totalCountForCompanyTheses}");
        Console.WriteLine($"Published Count: {publishedCountForCompanyTheses}");
        Console.WriteLine($"Unpublished Count: {unpublishedCountForCompanyTheses}");
        Console.WriteLine($"Withdrawn Count: {withdrawnCountForCompanyTheses}");

        // Refresh the UI
        StateHasChanged();
    }
*@
    private void FilterCompanyEvents()
    {
        // Filter the announcements based on the selected filter
        if (selectedStatusFilterForEventsAsCompany == "Όλα")
        {
            FilteredCompanyEvents = UploadedEventsAsCompany;
        }
        else if (selectedStatusFilterForEventsAsCompany == "Δημοσιευμένη")
        {
            FilteredCompanyEvents = UploadedEventsAsCompany
                .Where(a => a.CompanyEventStatus == "Δημοσιευμένη").ToList();
        }
        else if (selectedStatusFilterForEventsAsCompany == "Μη Δημοσιευμένη")
        {
            FilteredCompanyEvents = UploadedEventsAsCompany
                .Where(a => a.CompanyEventStatus == "Μη Δημοσιευμένη").ToList();
        }

        // Update counts
        totalCountEventsAsCompany = UploadedEventsAsCompany.Count;
        publishedCountEventsAsCompany = UploadedEventsAsCompany
            .Count(a => a.CompanyEventStatus == "Δημοσιευμένη");
        unpublishedCountEventsAsCompany = UploadedEventsAsCompany
            .Count(a => a.CompanyEventStatus == "Μη Δημοσιευμένη");

        // Refresh UI
        StateHasChanged();
    }


    private void FilterProfessorEvents()
    {
        // Filter the announcements based on the selected filter
        if (selectedStatusFilterForEventsAsProfessor == "Όλα")
        {
            FilteredProfessorEvents = UploadedEventsAsProfessor;
        }
        else if (selectedStatusFilterForEventsAsProfessor == "Δημοσιευμένη")
        {
            FilteredProfessorEvents = UploadedEventsAsProfessor
                .Where(a => a.ProfessorEventStatus == "Δημοσιευμένη").ToList();
        }
        else if (selectedStatusFilterForEventsAsProfessor == "Μη Δημοσιευμένη")
        {
            FilteredProfessorEvents = UploadedEventsAsProfessor
                .Where(a => a.ProfessorEventStatus == "Μη Δημοσιευμένη").ToList();
        }

        // Update counts
        totalCountEventsAsProfessor = UploadedEventsAsProfessor.Count;
        publishedCountEventsAsProfessor = UploadedEventsAsProfessor
            .Count(a => a.ProfessorEventStatus == "Δημοσιευμένη");
        unpublishedCountEventsAsProfessor = UploadedEventsAsProfessor
            .Count(a => a.ProfessorEventStatus == "Μη Δημοσιευμένη");

        // Refresh UI
        StateHasChanged();
    }



    private void HandleStatusFilterChange(ChangeEventArgs e)
    {
        selectedStatusFilterForAnnouncements = e.Value.ToString();
        FilterAnnouncements(); // Call your filtering logic
    }

    private void HandleStatusFilterChangeForCompanyEvents(ChangeEventArgs e)
    {
        selectedStatusFilterForEventsAsCompany = e.Value.ToString();
        FilterCompanyEvents(); // Call your filtering logic
    }

    private void HandleStatusFilterChangeForProfessorEvents(ChangeEventArgs e)
    {
        selectedStatusFilterForEventsAsProfessor = e.Value.ToString();
        FilterProfessorEvents(); // Call your filtering logic
    }

    private void HandleStatusFilterChangeForAnnouncementsAsProfessor(ChangeEventArgs e)
    {
        selectedStatusFilterForAnnouncementsAsProfessor = e.Value.ToString();
        FilterAnnouncementsAsProfessor(); // Call your filtering logic
    }

    private void HandleStatusFilterChangeForThesesAsProfessor(ChangeEventArgs e)
    {
        selectedStatusFilterForThesesAsProfessor = e.Value.ToString();
        FilterThesesAsProfessor(); // Call your filtering logic
    }

    private void HandleStatusFilterChangeForThesesAsCompany(ChangeEventArgs e)
    {
        selectedStatusFilterForCompanyTheses = e.Value.ToString();
        //FilterThesesAsCompany(); // Trigger filtering and recalculation of counts
    }



private async Task SaveAnnouncementAsPublishedAsProfessor()
{
    // Show custom confirmation dialog with HTML styling
    bool isConfirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML", new object[] { 
        $"Πρόκεται να Δημιουργήσετε μια Ανακοίνωση με Τίτλο: <strong>{professorannouncement.ProfessorAnnouncementTitle}</strong> ως '<strong>Δημοσιευμένη</strong>'.<br><br>" +
        "<strong style='color: red;'>Είστε σίγουρος/η;</strong>"
    });

    if (!isConfirmed)
        return;

    professorannouncement.ProfessorAnnouncementStatus = "Δημοσιευμένη";
    professorannouncement.ProfessorAnnouncementUploadDate = DateTime.Now;
    professorannouncement.ProfessorAnnouncementProfessorEmail = CurrentUserEmail;
    professorannouncement.ProfessorAnnouncementRNG = new Random().NextInt64();
    professorannouncement.ProfessorAnnouncementRNG_HashedAsUniqueID = HashingHelper.HashLong(professorannouncement.ProfessorAnnouncementRNG ?? 0);
    
    // Initialize Professor navigation property if needed
    professorannouncement.Professor = new Professor
    {
        ProfEmail = CurrentUserEmail,
        ProfName = professorName,
        ProfSurname = professorSurname
    };
    
    await SaveAnnouncementToDatabaseAsProfessor();
}

    private async Task SaveAnnouncementAsUnpublishedAsProfessor()
    {
        // Show custom confirmation dialog with HTML styling
        bool isConfirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML", new object[] { 
            $"Πρόκεται να Δημιουργήσετε μια Ανακοίνωση με Τίτλο: <strong>{professorannouncement.ProfessorAnnouncementTitle}</strong> ως '<strong>Μη Δημοσιευμένη (Προσωρινή Αποθήκευση)</strong>'.<br><br>" +
            "<strong style='color: red;'>Είστε σίγουρος/η;</strong>"
        });

        if (!isConfirmed)
            return;

        professorannouncement.ProfessorAnnouncementStatus = "Μη Δημοσιευμένη";
        professorannouncement.ProfessorAnnouncementUploadDate = DateTime.Now;
        professorannouncement.ProfessorAnnouncementProfessorEmail = CurrentUserEmail;
        professorannouncement.ProfessorAnnouncementRNG = new Random().NextInt64();
        professorannouncement.ProfessorAnnouncementRNG_HashedAsUniqueID = HashingHelper.HashLong(professorannouncement.ProfessorAnnouncementRNG ?? 0);
    
        // Initialize Professor navigation property if needed
        professorannouncement.Professor = new Professor
        {
            ProfEmail = CurrentUserEmail,
            ProfName = professorName,
            ProfSurname = professorSurname
        };
    
        await SaveAnnouncementToDatabaseAsProfessor();
    }


    private async Task SaveThesisAsPublishedAsProfessor()
    {
        bool isConfirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML", new object[] { 
            $"Πρόκεται να Δημιουργήσετε μια Πτυχιακή Εργασία με Τίτλο: <strong>{professorthesis.ThesisTitle}</strong> ως '<strong>Δημοσιευμένη</strong>'.<br><br>" +
            "<strong style='color: red;'>Είστε σίγουρος/η;</strong>"
        });

        if (!isConfirmed) return;

        // Initialize new thesis
        var newThesis = new ProfessorThesis
        {
            ThesisTitle = professorthesis.ThesisTitle,
            ThesisDescription = professorthesis.ThesisDescription,
            ThesisAttachment = professorthesis.ThesisAttachment,
            ThesisStatus = "Δημοσιευμένη",
            ThesisUploadDateTime = DateTime.Now,
            ThesisActivePeriod = DateTime.Now.AddYears(1),
            ProfessorEmailUsedToUploadThesis = CurrentUserEmail,
            RNGForThesisUploaded = new Random().NextInt64(),
            RNGForThesisUploaded_HashedAsUniqueID = HashingHelper.HashLong(new Random().NextInt64()),
            ThesisAreas = string.Join(",", selectedThesisAreasForProfessor.Select(a => a.AreaName)),
            ThesisSkills = string.Join(",", selectedThesisSkillsForProfessor.Select(s => s.SkillName)),
            ThesisType = ThesisType.Professor,
            IsCompanyInteresetedInProfessorThesis = false,
            IsCompanyInterestedInProfessorThesisStatus = "Δεν έχει γίνει Αποδοχή",
            ThesisUpdateDateTime = DateTime.Now
        };
    
        professorthesis = newThesis;
        await SaveThesisToDatabaseAsProfessor();
    }

    private async Task SaveThesisAsUnpublishedAsProfessor()
    {
        bool isConfirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML", new object[] { 
            $"Πρόκεται να Δημιουργήσετε μια Πτυχιακή Εργασία με Τίτλο: <strong>{professorthesis.ThesisTitle}</strong> ως '<strong>Μη Δημοσιευμένη</strong>'.<br><br>" +
            "<strong style='color: red;'>Είστε σίγουρος/η;</strong>"
        });

        if (!isConfirmed) return;

        var newThesis = new ProfessorThesis
        {
            ThesisTitle = professorthesis.ThesisTitle,
            ThesisDescription = professorthesis.ThesisDescription,
            ThesisAttachment = professorthesis.ThesisAttachment,
            ThesisStatus = "Μη Δημοσιευμένη",
            ThesisUploadDateTime = DateTime.Now,
            ThesisActivePeriod = DateTime.Now.AddYears(1),
            ProfessorEmailUsedToUploadThesis = CurrentUserEmail,
            RNGForThesisUploaded = new Random().NextInt64(),
            RNGForThesisUploaded_HashedAsUniqueID = HashingHelper.HashLong(new Random().NextInt64()),
            ThesisAreas = string.Join(",", selectedThesisAreasForProfessor.Select(a => a.AreaName)),
            ThesisSkills = string.Join(",", selectedThesisSkillsForProfessor.Select(s => s.SkillName)),
            ThesisType = ThesisType.Professor,
            IsCompanyInteresetedInProfessorThesis = false,
            IsCompanyInterestedInProfessorThesisStatus = "Δεν έχει γίνει Αποδοχή",
            ThesisUpdateDateTime = DateTime.Now
        };
    
        professorthesis = newThesis;
        await SaveThesisToDatabaseAsProfessor();
    }



    private async Task SaveAnnouncementToDatabaseAsProfessor()
    {
        // Validation logic for professor announcement form
        if (string.IsNullOrWhiteSpace(professorannouncement.ProfessorAnnouncementTitle) ||
            string.IsNullOrWhiteSpace(professorannouncement.ProfessorAnnouncementDescription) ||
            professorannouncement.ProfessorAnnouncementTimeToBeActive.Date == DateTime.Today)
        {
            showErrorMessageforUploadingannouncementsAsProfessor = true;
            return;
        }

        try
        {
            // Get existing professor from database instead of creating new one
            var existingProfessor = await dbContext.Professors
                .FirstOrDefaultAsync(p => p.ProfEmail == CurrentUserEmail);

            if (existingProfessor != null)
            {
                // Associate existing professor with announcement
                professorannouncement.Professor = existingProfessor;
                professorannouncement.ProfessorAnnouncementProfessorEmail = existingProfessor.ProfEmail;
            }
            else
            {
                // Handle case where professor doesn't exist
                isSaveAnnouncementAsProfessorSuccessful = false;
                saveAnnouncementAsProfessorMessage = "Ο Καθηγητής δεν βρέθηκε στο σύστημα";
                return;
            }

            dbContext.AnnouncementsAsProfessor.Add(professorannouncement);
            await dbContext.SaveChangesAsync();
        
            isSaveAnnouncementAsProfessorSuccessful = true;
            saveAnnouncementAsProfessorMessage = "Η Ανακοίνωση Δημιουργήθηκε Επιτυχώς";
        }
        catch (Exception ex)
        {
            isSaveAnnouncementAsProfessorSuccessful = false;
            saveAnnouncementAsProfessorMessage = "Κάποιο πρόβλημα παρουσιάστηκε με την Δημιουργία της Ανακοίνωσης! Ανανεώστε την σελίδα και προσπαθήστε ξανά";
            Console.WriteLine($"Error saving announcement: {ex.Message}");
            Console.WriteLine($"Stack trace: {ex.StackTrace}");
        }
    
        StateHasChanged();
        NavigationManager.NavigateTo(NavigationManager.Uri, forceLoad: true);
    }

   private async Task SaveThesisToDatabaseAsProfessor()
    {
        // Validate form data
        if (string.IsNullOrWhiteSpace(professorthesis.ThesisTitle) ||
            string.IsNullOrWhiteSpace(professorthesis.ThesisDescription))
        {
            showErrorMessageforUploadingThesisAsProfessor = true;
            return;
        }

        try
        {
            // Check if professor exists or create new
            var professor = await dbContext.Professors
                .FirstOrDefaultAsync(p => p.ProfEmail == CurrentUserEmail);
            
            if (professor == null)
            {
                professor = new Professor 
                {
                    ProfEmail = CurrentUserEmail,
                    ProfName = professorName,
                    ProfSurname = professorSurname,
                    ProfDepartment = professorDepartment
                };
                dbContext.Professors.Add(professor);
                await dbContext.SaveChangesAsync();
            }
        
            // Set required fields
            professorthesis.ThesisUpdateDateTime = DateTime.Now;
            professorthesis.ThesisActivePeriod = DateTime.Now.AddYears(1); // Example: active for 1 year
            professorthesis.Professor = professor;
        
            // Save the thesis
            dbContext.ProfessorTheses.Add(professorthesis);
            await dbContext.SaveChangesAsync();

            isSaveThesisAsProfessorSuccessful = true;
            saveThesisAsProfessorMessage = "Η Πτυχιακή Εργασία Δημιουργήθηκε Επιτυχώς";
        }
        catch (Exception ex)
        {
            isSaveThesisAsProfessorSuccessful = false;
            saveThesisAsProfessorMessage = "Κάποιο πρόβλημα παρουσιάστηκε με την Δημιουργία της Πτυχιακής Εργασίας! Ανανεώστε την σελίδα και προσπαθήστε ξανά";
            Console.WriteLine($"Πρόβλημα Δημιουργίας/Αποθήκευσης: {ex.Message}\n{ex.StackTrace}");
        }

        StateHasChanged();
        NavigationManager.NavigateTo(NavigationManager.Uri, forceLoad: true);
    }

    // Method to toggle Area selection
    private void ToggleAreaSelectionForThesisUploadAsProfessor(long areaId, object isChecked)
    {
        if ((bool)isChecked)
        {
            if (!selectedAreasForProfessorThesis.Contains(areaId))
                selectedAreasForProfessorThesis.Add(areaId);
        }
        else
        {
            selectedAreasForProfessorThesis.Remove(areaId);
        }
        professorthesis.ThesisAreas = string.Join(",", selectedAreas); 
    }

    // Method to toggle Skill selection
    private void ToggleSkillSelectionForThesisUploadAsProfessor(long skillId, object isChecked)
    {
        if ((bool)isChecked)
        {
            if (!selectedSkillsForProfessorThesis.Contains(skillId))
                selectedSkillsForProfessorThesis.Add(skillId);
        }
        else
        {
            selectedSkillsForProfessorThesis.Remove(skillId);
        }
        professorthesis.ThesisSkills = string.Join(",", selectedSkillsForProfessorThesis); 
    }

    private async Task ToggleCheckboxesForThesisAreasAsProfessor()
    {
        await JS.InvokeVoidAsync("toggleProfessorThesisAreasCheckboxes");
    }

    private async Task ToggleCheckboxesForThesisSkillsAsProfessor()
    {
        await JS.InvokeVoidAsync("toggleProfessorThesisSkillsCheckboxes");
    }

    private void OnCheckedChangedForThesisAreasAsProfessor(ChangeEventArgs e, Area area)
    {
        if ((bool)e.Value) // If checked
        {
            if (!selectedThesisAreasForProfessor.Contains(area))
            {
                selectedThesisAreasForProfessor.Add(area);
            }
        }
        else // If unchecked
        {
            selectedThesisAreasForProfessor.Remove(area);
        }
    }


    private void OnCheckedChangedForThesisSkillsAsProfessor(ChangeEventArgs e, Skill skill)
    {
        if ((bool)e.Value) // If checked
        {
            if (!selectedThesisSkillsForProfessor.Contains(skill))
            {
                selectedThesisSkillsForProfessor.Add(skill);
            }
        }
        else // If unchecked
        {
            selectedThesisSkillsForProfessor.Remove(skill);
        }
    }


    private bool IsSelectedForThesisAreasAsProfessor(Area area)
    {
        return selectedAreasForProfessorThesis.Contains(area.Id);
    }

    private bool IsSelectedForThesisSkillsAsProfessor(Skill skill)
    {
        return selectedSkillsForProfessorThesis.Contains(skill.Id);
    }

    private async Task DeleteThesisAsProfessor(int professorThesisId)
    {
        // Find the thesis by ID
        var professorthesis = await dbContext.ProfessorTheses.FindAsync(professorThesisId);

        // Check if the thesis exists
        if (professorthesis != null)
        {
            // Remove the thesis from the database
            dbContext.ProfessorTheses.Remove(professorthesis);
            await dbContext.SaveChangesAsync();

            // Reload the theses to reflect the deletion
            await LoadThesesAsProfessor();
        }
        StateHasChanged();
    }

    private void CloseModalForProfessorThesis()
    {
        isModalVisibleToShowProfessorThesisDetails = false; // Hide the modal
    }  


    private void ShowProfessorThesisDetailsAsStudent(ProfessorThesisApplied professorthesisdetails)
    {
        currentProfessorThesisToShowDetailsAsStudent = professorthesisdetails;
        isModalVisibleForProfessorThesisToShowDetailsAsStudent = true;
    }

    private void ShowCompanyThesisDetailsAsStudent(CompanyThesis companythesisdetails)
    {
        currentCompanyThesisToShowDetailsAsStudent = companythesisdetails;
        isModalVisibleForCompanyThesisToShowDetailsAsStudent = true;
    }

    private async Task ShowProfessorThesisDetailsAsStudent(long thesisId)
    {
        // Fetch the thesis details based on the thesisId
        selectedProfessorThesisDetails = await dbContext.ProfessorTheses
            .FirstOrDefaultAsync(t => t.RNGForThesisUploaded == thesisId);

        // Show the modal after fetching the details
        StateHasChanged();
        await JS.InvokeVoidAsync("showProfessorThesisDetailsModal"); // Show the modal using JS
    }

    private async Task ShowCompanyThesisDetailsAsStudent(long thesisId)
    {
        // Fetch the company thesis details based on the thesisId
        selectedCompanyThesisDetails = await dbContext.CompanyTheses
            .FirstOrDefaultAsync(t => t.RNGForThesisUploadedAsCompany == thesisId);

        // Show the modal after fetching the details
        StateHasChanged();
        await JS.InvokeVoidAsync("showCompanyThesisDetailsModal"); // Show the modal using JS
    }

    private async Task ShowCompanyInternshipDetailsAsStudent(long thesisId)
    {
        isModalVisibleForInternshipsAsStudent = true;
        selectedCompanyInternshipDetails = await dbContext.CompanyInternships
            .Include(i => i.Company) // Include company data
            .FirstOrDefaultAsync(t => t.RNGForInternshipUploadedAsCompany == thesisId); // Updated property name

        // Assign selectedCompanyInternshipDetails to currentInternship
        currentInternship = selectedCompanyInternshipDetails;

        // Show the modal after fetching the details
        StateHasChanged();
        await JS.InvokeVoidAsync("showCompanyInternshipDetailsModal"); // Show the modal using JS
    }

    private async Task ShowProfessorInternshipDetailsAsStudent(long thesisId)
    {
        try
        {
            isModalVisibleForProfessorInternshipsAsStudent = true;
        
            // Fetch internship details with professor information
            selectedProfessorInternshipDetails = await dbContext.ProfessorInternships
                .Include(i => i.Professor)  // Include professor details
                .FirstOrDefaultAsync(t => t.RNGForInternshipUploadedAsProfessor == thesisId);  // Updated property name

            // Assign selectedProfessorInternshipDetails to currentProfessorInternship
            currentProfessorInternship = selectedProfessorInternshipDetails;

            if (currentProfessorInternship == null)
            {
                await JS.InvokeVoidAsync("alert", "Internship details not found");
                isModalVisibleForProfessorInternshipsAsStudent = false;
                return;
            }

            // Show the modal after fetching the details
            StateHasChanged();
            await JS.InvokeVoidAsync("showProfessorInternshipDetailsModal"); // Show the modal using JS
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading internship details: {ex.Message}");
            await JS.InvokeVoidAsync("alert", "Error loading internship details");
            isModalVisibleForProfessorInternshipsAsStudent = false;
        }
    }

    private void CloseProfessorInternshipDetailsModal()
    {
        isModalVisibleForProfessorInternshipsAsStudent = false;
        StateHasChanged();
    }


    private async Task CloseModalForProfessorThesisDetails()
    {
        selectedProfessorThesisDetails = null; // Reset the selected thesis details
        await JS.InvokeVoidAsync("hideProfessorThesisDetailsModal"); // Close the modal using JS
        StateHasChanged(); // Update the UI
    }

    private async Task CloseModalForCompanyThesisDetails()
    {
        selectedCompanyThesisDetails = null; // Reset the selected thesis details
        await JS.InvokeVoidAsync("hideCompanyThesisDetailsModal"); // Close the modal using JS
        StateHasChanged(); // Update the UI
    }

    private async Task CloseModalForCompanyInternshipDetails()
    {
        isModalVisibleForInternships = false;
        selectedCompanyInternshipDetails = null; // Reset the selected thesis details
        await JS.InvokeVoidAsync("hideCompanyInternshipDetailsModal"); // Close the modal using JS
        StateHasChanged(); // Update the UI
    }


    private async Task ShowProfessorHyperlinkNameDetailsModalInStudentThesis(string professorEmail)
    {
        // Fetch professor details based on the professorId
        selectedProfessorDetailsForHyperlinkNameInThesisAsStudent = await dbContext.Professors
            .FirstOrDefaultAsync(p => p.ProfEmail == professorEmail);

        // Show the modal after fetching the details
        StateHasChanged();
        await JS.InvokeVoidAsync("showProfessorDetailsModal"); // Show the modal using JS
    }

    private async Task ShowCompanyHyperlinkNameDetailsModalInStudentThesis(string companyEmail)
    {
        selectedCompanyDetailsForHyperlinkNameInThesisAsStudent = await dbContext.Companies
            .FirstOrDefaultAsync(c => c.CompanyEmail == companyEmail);

        if (selectedCompanyDetailsForHyperlinkNameInThesisAsStudent != null)
        {
            isCompanyDetailsModalOpenForHyperlinkNameAsStudent = true;
            StateHasChanged();
            await JS.InvokeVoidAsync("showCompanyDetailsModal"); // Show the modal using JS
        }
    }


    void CloseModalForProfessorNameHyperlinkDetails()
    {
        selectedProfessorDetailsForHyperlinkNameInThesisAsStudent = null;
        StateHasChanged(); // Ensure the Razor component updates
        JS.InvokeVoidAsync("hideProfessorDetailsModal"); // Call JS to hide the modal
    }

    void CloseModalForCompanyNameHyperlinkDetails()
    {
        isCompanyDetailsModalOpenForHyperlinkNameAsStudent = false;
        selectedCompanyDetailsForHyperlinkNameInThesisAsStudent = null;
        StateHasChanged(); // Ensure the Razor component updates
        JS.InvokeVoidAsync("hideCompanyDetailsModal"); // Call JS to hide the modal
    }

    private string ShowProfileImage(byte[] imageBytes)
    {
        if (imageBytes != null)
        {
            var base64Image = Convert.ToBase64String(imageBytes);
            return $"data:image/png;base64,{base64Image}"; // Assuming the image is in PNG format
        }
        return string.Empty;
    }

    private async Task SearchCompanyThesesAsProfessor()
    {
        companyThesesResultsToFindThesesAsProfessor = await dbContext.CompanyTheses
            .Include(t => t.Company) // Include Company for navigation property access
            .Where(t =>
                t.CompanyThesisStatus == "Δημοσιευμένη" && // Filter for published theses
                (t.IsProfessorInterestedInCompanyThesisStatus == "Δεν έχει γίνει Αποδοχή" || 
                 t.IsProfessorInterestedInCompanyThesisStatus == "Έχετε Αποδεχτεί") && // Include both statuses
                (string.IsNullOrEmpty(searchCompanyNameToFindThesesAsProfessor) || 
                 (t.Company != null && EF.Functions.Like(t.Company.CompanyName, $"%{searchCompanyNameToFindThesesAsProfessor}%"))) &&
                (string.IsNullOrEmpty(searchThesisTitleToFindThesesAsProfessor) || 
                 EF.Functions.Like(t.CompanyThesisTitle, $"%{searchThesisTitleToFindThesesAsProfessor}%")) &&
                (string.IsNullOrEmpty(searchSupervisorToFindThesesAsProfessor) || 
                 EF.Functions.Like(t.CompanyThesisCompanySupervisorFullName, $"%{searchSupervisorToFindThesesAsProfessor}%")) &&
                (string.IsNullOrEmpty(searchDepartmentToFindThesesAsProfessor) || 
                 EF.Functions.Like(t.CompanyThesisDepartment, $"%{searchDepartmentToFindThesesAsProfessor}%")) &&
                (string.IsNullOrEmpty(searchSkillsToFindThesesAsProfessor) || 
                 EF.Functions.Like(t.CompanyThesisSkillsNeeded, $"%{searchSkillsToFindThesesAsProfessor}%")) &&
                (!searchStartingDateToFindThesesAsProfessor.HasValue || 
                 t.CompanyThesisStartingDate.Date >= searchStartingDateToFindThesesAsProfessor.Value.Date)
            )
            .OrderByDescending(t => t.CompanyThesisUploadDateTime) // Added sorting
            .ToListAsync();

        searchPerformedToFindThesesAsProfessor = true;
        StateHasChanged();
    }



    private async Task SearchProfessorThesesAsCompany()
    {
        var query = dbContext.ProfessorTheses
            .Include(t => t.Professor) // Include professor details
            .Where(t =>
                t.ThesisStatus == "Δημοσιευμένη" &&
                (t.IsCompanyInterestedInProfessorThesisStatus == "Δεν έχει γίνει Αποδοχή" ||
                 t.IsCompanyInterestedInProfessorThesisStatus == "Έχετε Αποδεχτεί"));

        // Apply search filters
        if (!string.IsNullOrEmpty(searchProfessorNameToFindThesesAsCompany))
        {
            query = query.Where(t => t.Professor != null && 
                                   t.Professor.ProfName.Contains(searchProfessorNameToFindThesesAsCompany));
        }

        if (!string.IsNullOrEmpty(searchProfessorThesisTitleToFindThesesAsCompany))
        {
            query = query.Where(t => t.ThesisTitle.Contains(searchProfessorThesisTitleToFindThesesAsCompany));
        }

        if (!string.IsNullOrEmpty(searchProfessorSurnameToFindThesesAsCompany))
        {
            query = query.Where(t => t.Professor != null && 
                                   t.Professor.ProfSurname.Contains(searchProfessorSurnameToFindThesesAsCompany));
        }

        if (!string.IsNullOrEmpty(searchSkillsToFindThesesAsCompany))
        {
            query = query.Where(t => t.ThesisSkills.Contains(searchSkillsToFindThesesAsCompany));
        }

        if (searchStartingDateToFindThesesAsCompany.HasValue)
        {
            query = query.Where(t => t.ThesisActivePeriod.Date >= searchStartingDateToFindThesesAsCompany.Value.Date);
        }

        // Execute the query
        var initialQuery = await query.ToListAsync();

        // Apply in-memory filtering for selected areas if any
        if (selectedAreasToFindThesesAsCompany.Any())
        {
            initialQuery = initialQuery
                .Where(t => selectedAreasToFindThesesAsCompany.All(area => 
                    t.ThesisAreas != null && t.ThesisAreas.Contains(area)))
                .ToList();
        }

        professorThesesResultsToFindThesesAsCompany = initialQuery;
        searchPerformedToFindThesesAsCompany = true;
        StateHasChanged();
    }







    private void ClearSearchFieldsForSearchCompanyThesesAsProfessor()
    {
        // Reset search input fields
        searchCompanyNameToFindThesesAsProfessor = string.Empty;
        searchThesisTitleToFindThesesAsProfessor = string.Empty;
        searchSupervisorToFindThesesAsProfessor = string.Empty;
        searchDepartmentToFindThesesAsProfessor = string.Empty;
        searchAreasToFindThesesAsCompany = string.Empty;
        searchSkillsToFindThesesAsProfessor = string.Empty;
        searchStartingDateToFindThesesAsProfessor = null;

        // Clear search results
        companyThesesResultsToFindThesesAsProfessor.Clear();
        searchPerformedToFindThesesAsProfessor = false;

        // Trigger UI update
        StateHasChanged();
    }

    private void ShowThesisDetails(CompanyThesis thesis)
    {
        selectedCompanyThesisToSeeDetailsOnEyeIconAsProfessor = thesis;
        isThesisDetailEyeIconModalVisibleToSeeAsProfessor = true; // Assume this boolean controls the modal visibility
    }

    private void ShowThesisDetailsAsCompany(ProfessorThesis thesis)
    {
        selectedProfessorThesisToSeeDetailsOnEyeIconAsCompany = thesis;
        isThesisDetailEyeIconModalVisibleToSeeAsCompany = true; // Assume this boolean controls the modal visibility
    }


    private async Task ShowCompanyDetailsFromHyperlinkNameToTheProfessor(string companyEmail)
    {
        try
        {
            // Load the company details from database
            selectedCompanyToSeeDetailsOnExpandedInterestAsProfessor = await dbContext.Companies
                .FirstOrDefaultAsync(c => c.CompanyEmail == companyEmail);

            if (selectedCompanyToSeeDetailsOnExpandedInterestAsProfessor != null)
            {
                // Update Blazor state
                isExpandedModalVisibleToSeeCompanyDetailsAsProfessor = true;
                StateHasChanged();
            
                // Call JavaScript to show the modal
                await JS.InvokeVoidAsync("showCompanyDetailsAsProfessorModal", "companyDetailsWhenSearchAsProfessorThesisDetailsModal");
            }
            else
            {
                Console.WriteLine("Company not found with email: " + companyEmail);
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error showing company details: {ex.Message}");
        }
    }

    private async Task CloseCompanyModalToShowCompanyDetailsFromHyperlinkNameToTheProfessor()
    {
        try
        {
            // Close the modal via JavaScript first
            await JS.InvokeVoidAsync("hideCompanyDetailsAsProfessorModal", "companyDetailsWhenSearchAsProfessorThesisDetailsModal");
        
            // Then reset the state
            isExpandedModalVisibleToSeeCompanyDetailsAsProfessor = false;
            selectedCompanyToSeeDetailsOnExpandedInterestAsProfessor = null;
        
            StateHasChanged();
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error closing modal: {ex.Message}");
        }
    }

    //EDW PREPEI NA PAIRNEI KAI TA ALLA INFO APO PROFESSOR/TO MODELO EXEI GINIE IDI UPDATE 27/11
    private async Task MarkInterestInThesisCompanyThesisAsProfessor(CompanyThesis thesis)
    {
        // First ask for confirmation
        var companyName = thesis.Company?.CompanyName ?? "Άγνωστη Εταιρεία";
        var confirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML", 
            $"Πρόκεται να δείξετε ενδιαφέρον για την Πτυχιακή Εργασία: {thesis.CompanyThesisTitle} της Εταιρείας {companyName}. Είστε σίγουρος/η;");

        if (!confirmed) return;

        try
        {
            Console.WriteLine($"RNGForThesisUploadedAsCompany: {thesis.RNGForThesisUploadedAsCompany}");
            Console.WriteLine($"CurrentUserEmail: {CurrentUserEmail}");

            // Check if ANY professor already showed interest for this thesis
            if (thesis.IsProfessorInteresetedInCompanyThesis && 
                !string.IsNullOrWhiteSpace(thesis.ProfessorEmailInterestedInCompanyThesis))
            {
                await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("showToast", 
                    "error", 
                    "Η πτυχιακή εργασία δεν είναι πλέον διαθέσιμη. Έχει ήδη εκδηλωθεί ενδιαφέρον από άλλο καθηγητή.").AsTask());
                return;
            }

            // Check if THIS specific professor already showed interest
            if (thesis.ProfessorEmailInterestedInCompanyThesis == CurrentUserEmail && 
                thesis.IsProfessorInteresetedInCompanyThesis)
            {
                await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("showToast", 
                    "error", 
                    "Έχετε ήδη δείξει ενδιαφέρον για αυτήν την πτυχιακή εργασία").AsTask());
                return;
            }

            // Get current professor details
            var professor = await dbContext.Professors
                .FirstOrDefaultAsync(p => p.ProfEmail == CurrentUserEmail);
    
            if (professor == null)
            {
                await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("showToast", 
                    "error", 
                    "Δεν βρέθηκαν στοιχεία καθηγητή").AsTask());
                return;
            }

            // Update thesis with professor's interest
            thesis.IsProfessorInteresetedInCompanyThesis = true;
            thesis.ProfessorEmailInterestedInCompanyThesis = CurrentUserEmail;
            thesis.IsProfessorInterestedInCompanyThesisStatus = "Έχετε Αποδεχτεί";
            thesis.ProfessorInterested = professor; // Set navigation property

            // Create platform action
            var platformAction = new PlatformActions
            {
                UserRole_PerformedAction = "PROFESSOR",
                ForWhat_PerformedAction = "COMPANY_THESIS",
                HashedPositionRNG_PerformedAction = HashingHelper.HashLong(thesis.RNGForThesisUploadedAsCompany),
                TypeOfAction_PerformedAction = "SHOW_INTEREST",
                DateTime_PerformedAction = DateTime.UtcNow
            };

            dbContext.PlatformActions.Add(platformAction);
            dbContext.CompanyTheses.Update(thesis);
            await dbContext.SaveChangesAsync();

            // Send notifications
            await InternshipEmailService.SendCompanyThesisInterestNotificationToCompany(
                thesis.CompanyEmailUsedToUploadThesis,
                companyName,
                professor.ProfName,
                professor.ProfSurname,
                professor.ProfUniversity,
                professor.ProfDepartment,
                professor.ProfWorkTelephone,
                professor.ProfPersonalTelephoneVisibility ? professor.ProfPersonalTelephone : null,
                professor.ProfPersonalWebsite,
                thesis.CompanyThesisTitle,
                thesis.RNGForThesisUploadedAsCompany_HashedAsUniqueID);

            await InternshipEmailService.SendCompanyThesisInterestConfirmationToProfessor(
                CurrentUserEmail,
                $"{professor.ProfName} {professor.ProfSurname}",
                thesis.CompanyThesisTitle,
                thesis.RNGForThesisUploadedAsCompany_HashedAsUniqueID,
                companyName);

            await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                "success", 
                "Επιτυχής ένδειξη ενδιαφέροντος").AsTask());
    
            await LoadThesisData();
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error saving interest: {ex.Message}");
            await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                "error", 
                "Σφάλμα κατά την αποθήκευση").AsTask());
        }
    }



    private async Task MarkInterestInProfessorThesis(ProfessorThesis thesis)
    {
        // First ask for confirmation
        var professorName = $"{thesis.Professor?.ProfName} {thesis.Professor?.ProfSurname}" ?? "Άγνωστος Καθηγητής";
        var confirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML", 
            $"Πρόκεται να δείξετε ενδιαφέρον για την Πτυχιακή Εργασία: {thesis.ThesisTitle} του/της Καθηγητή/τριας {professorName}. Είστε σίγουρος/η;");
    
        if (!confirmed)
        {
            return; // User cancelled the action
        }

        try
        {
            Console.WriteLine($"RNGForThesisUploaded: {thesis.RNGForThesisUploaded}");
            Console.WriteLine($"CurrentUserEmail: {CurrentUserEmail}");

            // Check if ANY company already showed interest for this thesis
            if (thesis.IsCompanyInteresetedInProfessorThesis && 
                !string.IsNullOrWhiteSpace(thesis.CompanyEmailInterestedInProfessorThesis))
            {
                await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("showToast", 
                    "error", 
                    "Η πτυχιακή εργασία δεν είναι πλέον διαθέσιμη. Έχει ήδη εκδηλωθεί ενδιαφέρον από άλλη εταιρεία.").AsTask());
                return;
            }

            // Check if THIS specific company already showed interest
            if (thesis.CompanyEmailInterestedInProfessorThesis == CurrentUserEmail && 
                thesis.IsCompanyInteresetedInProfessorThesis)
            {
                await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("showToast", 
                    "error", 
                    "Έχετε ήδη δείξει ενδιαφέρον για αυτήν την πτυχιακή εργασία").AsTask());
                return;
            }

            // Get existing company data instead of creating new
            var company = await dbContext.Companies
                .FirstOrDefaultAsync(c => c.CompanyEmail == CurrentUserEmail);

            if (company == null)
            {
                Console.WriteLine("Company not found in database");
                await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("showToast", 
                    "error", 
                    "Δεν βρέθηκαν στοιχεία εταιρείας").AsTask());
                return;
            }

            // Update thesis with company interest
            thesis.IsCompanyInteresetedInProfessorThesis = true;
            thesis.IsCompanyInterestedInProfessorThesisStatus = "Έχετε Αποδεχτεί";
            thesis.CompanyEmailInterestedInProfessorThesis = CurrentUserEmail;
            thesis.CompanyInterested = company;  // Set navigation property
            thesis.ThesisUpdateDateTime = DateTime.Now;

            // Update the existing record in the database
            dbContext.ProfessorTheses.Update(thesis);

            // Create platform action
            var platformAction = new PlatformActions
            {
                UserRole_PerformedAction = "COMPANY",
                ForWhat_PerformedAction = "PROFESSOR_THESIS",
                HashedPositionRNG_PerformedAction = thesis.RNGForThesisUploaded_HashedAsUniqueID,
                TypeOfAction_PerformedAction = "SHOW_INTEREST",
                DateTime_PerformedAction = DateTime.UtcNow
            };
            dbContext.PlatformActions.Add(platformAction);

            // Save changes to the database
            await dbContext.SaveChangesAsync();

            // Send notifications
            await InternshipEmailService.SendProfessorThesisInterestNotificationToProfessor(
                thesis.ProfessorEmailUsedToUploadThesis,
                professorName,
                company.CompanyName,
                company.CompanyHRName,
                company.CompanyHRSurname,
                company.CompanyHREmail,
                company.CompanyHRTelephone,
                thesis.ThesisTitle,
                thesis.RNGForThesisUploaded_HashedAsUniqueID);

            await InternshipEmailService.SendProfessorThesisInterestConfirmationToCompany(
                CurrentUserEmail,
                company.CompanyName,
                company.CompanyHRName,
                company.CompanyHRSurname,
                thesis.ThesisTitle,
                thesis.RNGForThesisUploaded_HashedAsUniqueID,
                professorName);

            await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                "success", 
                "Επιτυχής ένδειξη ενδιαφέροντος").AsTask());

            // Refresh the thesis data to reflect updates
            await LoadThesisData();
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error saving interest: {ex.Message}");
            Console.WriteLine($"Stack Trace: {ex.StackTrace}");
            await SafeInvokeJsAsync(() => JS.InvokeVoidAsync("confirmActionWithHTML2", 
                "error", 
                "Σφάλμα κατά την αποθήκευση").AsTask());
        }
    }





    private async Task<bool> IsProfessorInterestedInThesis(CompanyThesis thesis)
    {
        var isInterested = await dbContext.CompanyTheses
            .AnyAsync(x => x.ProfessorEmailInterestedInCompanyThesis == CurrentUserEmail 
                        && x.RNGForThesisUploadedAsCompany == thesis.RNGForThesisUploadedAsCompany);

        // Log the executed condition
        Console.WriteLine($"Checking Thesis ID: {thesis.RNGForThesisUploadedAsCompany}, " +
                          $"Professor Email: {CurrentUserEmail}, Result: {isInterested}");

        return isInterested;
    }

    public class ThesisWithInterestStatus
    {
        public CompanyThesis Thesis { get; set; }
        public bool IsInterested { get; set; }
    }

    public class ProfessorThesisWithInterestStatus
    {
        public ProfessorThesis ProfessorThesis { get; set; }
        public bool IsInterested { get; set; }
    }

    private async Task LoadThesisData()
    {
        var theses = await dbContext.CompanyTheses.ToListAsync();

        // Create a list to store the status for each thesis
        thesesWithInterestStatus = theses.Select(thesis => new ThesisWithInterestStatus
        {
            Thesis = thesis,
            IsInterested = thesis.ProfessorEmailInterestedInCompanyThesis == CurrentUserEmail
        }).ToList();
    }

    private async Task LoadProfessorThesisData()
    {
        var theses = await dbContext.ProfessorTheses.ToListAsync();

        // Create a list to store the status for each thesis
        professorthesesWithInterestStatus = theses.Select(thesis => new ProfessorThesisWithInterestStatus
        {
            ProfessorThesis = thesis,
            IsInterested = thesis.CompanyEmailInterestedInProfessorThesis == CurrentUserEmail
        }).ToList();
    }

    private async Task ShowProfessorDetailsAtCompanyThesisInterest(CompanyThesis companyThesis)
    {
        try
        {
            // Try to get professor from navigation property first
            if (companyThesis.ProfessorInterested == null && 
                !string.IsNullOrEmpty(companyThesis.ProfessorEmailInterestedInCompanyThesis))
            {
                // Explicitly load the professor if not already loaded
                await dbContext.Entry(companyThesis)
                    .Reference(t => t.ProfessorInterested)
                    .LoadAsync();
            }

            // Use the navigation property if available
            currentProfessorDetails = companyThesis.ProfessorInterested;

            if (currentProfessorDetails == null)
            {
                // Create minimal professor object with just the email if no professor found
                currentProfessorDetails = new Professor
                {
                    ProfEmail = companyThesis.ProfessorEmailInterestedInCompanyThesis
                };
            }

            isModalVisibleToShowprofessorDetailsAtCompanyThesisInterest = true;
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading professor details: {ex.Message}");
            currentProfessorDetails = new Professor();
            isModalVisibleToShowprofessorDetailsAtCompanyThesisInterest = true;
        }
    }


    private void ShowCompanyDetailsAtProfessorThesisInterestFromHyperlinkCompanyName(ProfessorThesis professorThesis)
    {
        if (professorThesis?.CompanyInterested != null)
        {
            currentCompanyDetails = new Company
            {
                CompanyLogo = professorThesis.CompanyInterested.CompanyLogo,
                CompanyNameENG = professorThesis.CompanyInterested.CompanyName,
                CompanyEmail = professorThesis.CompanyInterested.CompanyEmail,
                CompanyType = professorThesis.CompanyInterested.CompanyType,
                CompanyActivity = professorThesis.CompanyInterested.CompanyActivity,
                CompanyTelephone = professorThesis.CompanyInterested.CompanyTelephone,
                CompanyWebsite = professorThesis.CompanyInterested.CompanyWebsite,
                CompanyWebsiteAnnouncements = professorThesis.CompanyInterested.CompanyWebsiteAnnouncements,
                CompanyWebsiteJobs = professorThesis.CompanyInterested.CompanyWebsiteJobs,
                CompanyCountry = professorThesis.CompanyInterested.CompanyCountry,
                CompanyLocation = professorThesis.CompanyInterested.CompanyLocation,
                CompanyPC = professorThesis.CompanyInterested.CompanyPC,
                CompanyRegions = professorThesis.CompanyInterested.CompanyRegions,
                CompanyTown = professorThesis.CompanyInterested.CompanyTown,
                CompanyDescription = professorThesis.CompanyInterested.CompanyDescription,
                CompanyAreas = professorThesis.CompanyInterested.CompanyAreas,
                CompanyDesiredSkills = professorThesis.CompanyInterested.CompanyDesiredSkills,
                CompanyHRName = professorThesis.CompanyInterested.CompanyHRName,
                CompanyHRSurname = professorThesis.CompanyInterested.CompanyHRSurname,
                CompanyHREmail = professorThesis.CompanyInterested.CompanyHREmail,
                CompanyHRTelephone = professorThesis.CompanyInterested.CompanyHRTelephone
            };

            isModalVisibleToShowCompanyDetailsAtProfessorThesisInterest = true;
        }
    }


    private async Task CloseModalWhichShowsProfessorDetailsAtCompanyThesisInterest()
    {
        await JS.InvokeVoidAsync("hideProfessorDetailsModalForThesisInterest");
    }

    private async Task CloseModalWhichShowsCompanyDetailsAtProfessorThesisInterest()
    {
        await JS.InvokeVoidAsync("hideCompanyDetailsModalForThesisInterest");
    }

    private void ClearSearchFieldsForSearchProfessorThesesAsCompany()
    {
        searchProfessorNameToFindThesesAsCompany = string.Empty;
        searchProfessorThesisTitleToFindThesesAsCompany = string.Empty;
        searchProfessorSurnameToFindThesesAsCompany = string.Empty;
        searchSkillsToFindThesesAsCompany = string.Empty;
        searchStartingDateToFindThesesAsCompany = DateTime.Now;
        searchAreasInputToFindThesesAsCompany = string.Empty;

        selectedAreasToFindThesesAsCompany.Clear(); 
        
        professorThesesResultsToFindThesesAsCompany = null;
        searchPerformedToFindThesesAsCompany = false;
    }




    private void CheckCharacterLimitInCompanyEventDescription(ChangeEventArgs e)
    {
        var inputText = e.Value?.ToString() ?? string.Empty;
        remainingCharactersInCompanyEventDescription = 1000 - inputText.Length;
    }

    private void CheckCharacterLimitInEventTitleField(ChangeEventArgs e)
    {
        var inputText = e.Value?.ToString() ?? string.Empty;
        remainingCharactersInEventTitleField = 120 - inputText.Length;
    }

    private async Task HandleTemporarySaveCompanyEvent()
    {
        // Show custom confirmation dialog with formatted text
        bool isConfirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML",
            "Είστε σίγουροι πως θέλετε να <strong style='color: blue;'>Υποβάλετε</strong> την Εκδήλωση;<br><br>" +
            "Η εκδήλωση θα καταχωρηθεί ως <strong style='color: red;'>'Μη Δημοσιευμένη'</strong>.<br><br>" +
            "Θέλετε να συνεχίσετε;");

        if (isConfirmed)
        {
            await SaveCompanyEvent(false); 
        }
    }

    private async Task HandlePublishSaveCompanyEvent()
    {
        // Show custom confirmation dialog with formatted text
        bool isConfirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML",
            "Είστε σίγουροι πως θέλετε να <strong style='color: green;'>Υποβάλετε</strong> την Εκδήλωση;<br><br>" +
            "Η εκδήλωση θα καταχωρηθεί ως <strong style='color: green;'>'Δημοσιευμένη'</strong>.<br><br>" +
            "Θέλετε να συνεχίσετε;");

        if (isConfirmed)
        {
            await SaveCompanyEvent(true); 
        }
    }


    private async Task SaveCompanyEvent(bool publishEvent)
    {
        try
        {
            if (string.IsNullOrWhiteSpace(companyEvent.CompanyEventTitle) || 
                string.IsNullOrWhiteSpace(companyEvent.CompanyEventDescription) || 
                companyEvent.CompanyEventActiveDate <= DateTime.Today ||
                companyEvent.CompanyEventTimeOnly == TimeOnly.MinValue ||
                companyEvent.CompanyEventOfferingTransportToEventLocation == null ||
                !SelectedAreasWhenUploadEventAsCompany.Any())
            {
                showErrorMessageForUploadingCompanyEvent = true;
                isFormValidToSaveEventAsCompany = false;
                return;
            }

            companyEvent.CompanyEventAreasOfInterest = string.Join(",", SelectedAreasWhenUploadEventAsCompany.Select(a => a.AreaName));

            if (dbContext.Entry(companyEvent).State == EntityState.Detached)
            {
                dbContext.CompanyEvents.Add(companyEvent);
            }

            companyEvent.RNGForEventUploadedAsCompany = new Random().NextInt64();
            companyEvent.RNGForEventUploadedAsCompany_HashedAsUniqueID = HashingHelper.HashLong(companyEvent.RNGForEventUploadedAsCompany);
            companyEvent.CompanyEventStatus = publishEvent ? "Δημοσιευμένη" : "Μη Δημοσιευμένη";
            companyEvent.CompanyEventUploadedDate = DateTime.Now;
            companyEvent.CompanyEventTime = companyEvent.CompanyEventTimeOnly.ToTimeSpan();
        
            // Set contact information (kept exactly as before)
            companyEvent.CompanyEventResponsiblePerson = $"{companyData.CompanyHRName} {companyData.CompanyHRSurname}";
            companyEvent.CompanyEventResponsiblePersonEmail = companyData.CompanyHREmail;
            companyEvent.CompanyEventResponsiblePersonTelephone = companyData.CompanyHRTelephone;
            companyEvent.CompanyEventCompanyDepartment = companyEvent.CompanyEventCompanyDepartment;
        
            // Set foreign key using companyData instead of Company
            companyEvent.CompanyEmailUsedToUploadEvent = companyData.CompanyEmail;

            await dbContext.SaveChangesAsync();
            saveEventAsCompanyMessage = "Η Εκδήλωση Δημιουργήθηκε Επιτυχώς";
            showSuccessMessage = true;
            NavigationManager.NavigateTo(NavigationManager.Uri, forceLoad: true);
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Κάποιο Πρόβλημα Παρουσιάστηκε, Προσπαθήστε ξανά: {ex.Message}");
            Console.WriteLine($"Inner Exception: {ex.InnerException?.Message}");
            showSuccessMessage = false;
            showErrorMessageForUploadingCompanyEvent = true;
        }
    }




    protected override async Task OnAfterRenderAsync(bool firstRender)
    {

        await Task.Delay(200); 
        await JS.InvokeVoidAsync("initializeAutocomplete");
        await JS.InvokeVoidAsync("initializeAutocomplete2");
        await JS.InvokeVoidAsync("initializeAutocomplete3");
        await JS.InvokeVoidAsync("initializeAutocomplete4");

        await JS.InvokeVoidAsync("initializeAutocomplete6");
        await JS.InvokeVoidAsync("initializeAutocomplete7");
        await JS.InvokeVoidAsync("initializeAutocomplete8");

    }

    [JSInvokable]
    public static Task UpdatePlaceDetails(List<GooglePlaceComponent> addressComponents)
    {
        return Task.CompletedTask;
    }

    public class GooglePlaceComponent
    {
        public string long_name { get; set; }
        public string short_name { get; set; }
        public List<string> types { get; set; }
    }

    private void SearchStudentsAsCompanyToFindStudent()
    {
        var combinedSearchAreas = new List<string>();

        if (selectedAreasOfExpertise != null && selectedAreasOfExpertise.Any())
            combinedSearchAreas.AddRange(selectedAreasOfExpertise);

        if (!string.IsNullOrWhiteSpace(searchAreasOfExpertise))
            combinedSearchAreas.Add(searchAreasOfExpertise);

        var normalizedSearchAreas = combinedSearchAreas
            .SelectMany(area => area.Split('/', StringSplitOptions.RemoveEmptyEntries))
            .Select(area => area.Trim().ToLower())
            .Distinct()
            .ToList();

        var combinedSearchKeywords = new List<string>();

        if (selectedKeywords != null && selectedKeywords.Any())
            combinedSearchKeywords.AddRange(selectedKeywords);

        if (!string.IsNullOrWhiteSpace(searchKeywords))
            combinedSearchKeywords.Add(searchKeywords);

        var normalizedSearchKeywords = combinedSearchKeywords
            .Select(keyword => keyword.Trim().ToLower())
            .Distinct()
            .ToList();

        searchResultsAsCompanyToFindStudent = dbContext.Students
            .AsEnumerable()
            .Where(s =>
            {
                var normalizedStudentAreas = NormalizeAreas(s.AreasOfExpertise);

                var normalizedKeywords = s.Keywords?
                    .Split(',', StringSplitOptions.TrimEntries | StringSplitOptions.RemoveEmptyEntries)
                    .Select(k => k.Trim().ToLower())
                    .Distinct()
                    .ToList() ?? new List<string>();

                // Debugging
                Console.WriteLine($"Student: {s.Name} {s.Surname}");
                Console.WriteLine($"Student Areas: {string.Join(", ", normalizedStudentAreas)}");
                Console.WriteLine($"Search Areas: {string.Join(", ", normalizedSearchAreas)}");
                Console.WriteLine($"Student Keywords: {string.Join(", ", normalizedKeywords)}");
                Console.WriteLine($"Search Keywords: {string.Join(", ", normalizedSearchKeywords)}");

                // Filter by school if selected
                bool schoolMatch = true;
                if (!string.IsNullOrEmpty(searchSchoolAsCompanyToFindStudent))
                {
                    var schoolDepartments = universityDepartments[searchSchoolAsCompanyToFindStudent];
                    schoolMatch = schoolDepartments.Contains(s.Department);
                }

                var areaMatch = !normalizedSearchAreas.Any() ||
                    normalizedStudentAreas.Any(studentArea =>
                        normalizedSearchAreas.Contains(studentArea));

                var keywordMatch = !normalizedSearchKeywords.Any() ||
                    normalizedKeywords.Any(studentKeyword =>
                        normalizedSearchKeywords.Contains(studentKeyword));

                return (string.IsNullOrEmpty(searchNameOrSurname) ||
                            (s.Name + " " + s.Surname).Contains(searchNameOrSurname, StringComparison.OrdinalIgnoreCase)) &&
                       (string.IsNullOrEmpty(searchRegNumberAsCompanyToFindStudent) ||
                            s.RegNumber.ToString().Contains(searchRegNumberAsCompanyToFindStudent)) &&
                       (string.IsNullOrEmpty(searchSchoolAsCompanyToFindStudent) || schoolMatch) &&
                       (string.IsNullOrEmpty(searchDepartmentAsCompanyToFindStudent) ||
                            s.Department == searchDepartmentAsCompanyToFindStudent) &&
                       (string.IsNullOrEmpty(InternshipStatus) ||
                            s.InternshipStatus == InternshipStatus) &&
                       (string.IsNullOrEmpty(ThesisStatus) ||
                            s.ThesisStatus == ThesisStatus) &&
                       areaMatch &&
                       keywordMatch &&
                       (string.IsNullOrEmpty(selectedDegreeLevel) ||
                            s.LevelOfDegree == selectedDegreeLevel);
            })
            .ToList();
    }




    private IEnumerable<string> NormalizeAreas(string Areas)
    {
        if (string.IsNullOrWhiteSpace(Areas))
            return Array.Empty<string>();

        return Areas
            .Split(new string[] { ",", "/", ", ", " / ", " ," }, StringSplitOptions.RemoveEmptyEntries)
            .Select(area => area.Trim().ToLower()) 
            .Distinct(StringComparer.OrdinalIgnoreCase)
            .Where(area => !string.IsNullOrEmpty(area)); 
    }

    // Normalize Keywords (convert to lowercase)
    private IEnumerable<string> NormalizeKeywords(string keywords)
    {
        if (string.IsNullOrWhiteSpace(keywords))
            return Array.Empty<string>();

        return keywords
            .Split(',', StringSplitOptions.TrimEntries | StringSplitOptions.RemoveEmptyEntries)
            .Select(keyword => keyword.Trim().ToLower())  
            .Distinct(StringComparer.OrdinalIgnoreCase) 
            .Where(keyword => !string.IsNullOrEmpty(keyword)); 
    }



    private void ClearSearchFieldsAsCompanyToFindStudent()
    {
        searchNameOrSurname = string.Empty;
        searchRegNumberAsCompanyToFindStudent = string.Empty;
        searchSchoolAsCompanyToFindStudent = string.Empty;
        searchDepartmentAsCompanyToFindStudent = string.Empty;
        InternshipStatus = string.Empty;
        ThesisStatus = string.Empty;
        searchAreasOfExpertise = string.Empty;
        searchKeywords = string.Empty;
        selectedDegreeLevel = string.Empty;
        searchResultsAsCompanyToFindStudent = null;

        nameSurnameSuggestions.Clear();
        areasOfExpertiseSuggestions.Clear();
        keywordsSuggestions.Clear();

        selectedKeywords.Clear();
        selectedAreasOfExpertise.Clear();

        StateHasChanged();
    }



    private void OnTransportOptionChange(ChangeEventArgs e)
    {
        if (bool.TryParse(e.Value?.ToString(), out var result))
        {
            companyEvent.CompanyEventOfferingTransportToEventLocation = result;
        }
    }

    private void OnTransportOptionChangeForProfessorEvent(ChangeEventArgs e)
    {
        if (bool.TryParse(e.Value?.ToString(), out var result))
        {
            professorEvent.ProfessorEventOfferingTransportToEventLocation = result;
        }
    }

    private async Task UploadCompanyEventAttachmentFile(InputFileChangeEventArgs e)
    {
        if (e.File != null)
        {
            using var memoryStream = new MemoryStream();
            await e.File.OpenReadStream().CopyToAsync(memoryStream);
            companyEvent.CompanyEventAttachmentFile = memoryStream.ToArray();
        }
    }

    private async Task UploadProfessorEventAttachmentFile(InputFileChangeEventArgs e)
    {
        if (e.File != null)
        {
            using var memoryStream = new MemoryStream();
            await e.File.OpenReadStream().CopyToAsync(memoryStream);
            professorEvent.ProfessorEventAttachmentFile = memoryStream.ToArray();
        }
    }

    private async Task ToggleAndLoadCompanyEventsAsStudent()
    {
        isCompanyEventsVisibleToSeeAsStudent = !isCompanyEventsVisibleToSeeAsStudent;
        Console.WriteLine("Toggle button clicked. Visibility: " + isCompanyEventsVisibleToSeeAsStudent);

        if (isCompanyEventsVisibleToSeeAsStudent && (companyEventsToSeeAsStudent == null || !companyEventsToSeeAsStudent.Any()))
        {
            try
            {
                companyEventsToSeeAsStudent = await dbContext.CompanyEvents.ToListAsync();
                Console.WriteLine("Events loaded: " + companyEventsToSeeAsStudent.Count); // Log event count

                StateHasChanged(); // Ensure UI refresh
            }
            catch (Exception ex)
            {
                Console.WriteLine("Error fetching company events: " + ex.Message);
            }
        }
    }


    private void ShowCompanyEventDetails(CompanyEvent eventDetails)
    {
        currentCompanyEvent = eventDetails;
        isModalOpenForCompanyEventToSeeAsStudent = true;  // Set the modal open state to true
        StateHasChanged();  // To trigger a re-render and show the modal
    }

    private void CloseModalForCompanyEventToSeeAsStudent()
    {
        currentCompanyEvent = null;
        isModalOpenForCompanyEventToSeeAsStudent = false; // Set the modal open state to false
        StateHasChanged(); // To trigger a re-render and hide the modal
    }



    private void ShowProfessorEventDetails(ProfessorEvent eventDetails)
    {
        currentProfessorEvent = eventDetails;
        isModalOpenForProfessorEventToSeeAsStudent = true;  // Set the modal open state to true
        StateHasChanged();  // To trigger a re-render and show the modal
    }

    private void CloseModalForProfessorEventToSeeAsStudent()
    {
        currentProfessorEvent = null;
        isModalOpenForProfessorEventToSeeAsStudent = false; // Set the modal open state to false
        StateHasChanged(); // To trigger a re-render and hide the modal
    }


    private async Task ShowCompanyDetailsModalAtEventsAsStudent(string companyEmail)
    {
        currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents = 
            await dbContext.Companies.FirstOrDefaultAsync(c => c.CompanyEmail == companyEmail);

        if (currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents != null)
        {
            isModalOpenForCompanyDetailsToSeeAsStudent = true;
            await JS.InvokeVoidAsync("showCompanyDetailsModalForEventsAsStudent");
        }
        else
        {
            Console.WriteLine("Company details not found for company name with email: " + companyEmail);
        }
    }

    private void CloseCompanyDetailsModalAtEventsAsStudent()
    {
        currentCompanyDetailsToShowOnHyperlinkAsStudentForCompanyEvents = null;
        isModalOpenForCompanyDetailsToSeeAsStudent = false;
        JS.InvokeVoidAsync("hideCompanyDetailsModalForEventsAsStudent");
    }

    private async Task ShowProfessorDetailsModalAtEventsAsStudent(string professorEmail)
    {
        currentProfessorDetailsToShowOnHyperlinkAsStudentForProfessorEvents = 
            await dbContext.Professors.FirstOrDefaultAsync(c => c.ProfEmail == professorEmail);

        if (currentProfessorDetailsToShowOnHyperlinkAsStudentForProfessorEvents != null)
        {
            isModalOpenForProfessorDetailsToSeeAsStudent = true;
            await JS.InvokeVoidAsync("showProfessorDetailsModalForEventsAsStudent");
        }
        else
        {
            Console.WriteLine("Professor details not found for company name with email: " + professorEmail);
        }
    }

    
    private void CloseProfessorDetailsModalAtEventsAsStudent()
    {
        currentProfessorDetailsToShowOnHyperlinkAsStudentForProfessorEvents = null;
        isModalOpenForProfessorDetailsToSeeAsStudent = false;
        JS.InvokeVoidAsync("hideProfessorDetailsModalForEventsAsStudent");
    }




    private async Task<bool> ShowInterestInCompanyEvent(CompanyEvent companyEvent, bool needsTransportForCompanyEvent)
    {
        // First ask for confirmation
        var confirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML", 
            $"Πρόκεται να δείξετε Ενδιαφέρον για την Εκδήλωση: {companyEvent.CompanyEventTitle} της εταιρείας {companyEvent.Company?.CompanyName}. Είστε σίγουρος/η;");
        if (!confirmed) return false;

        // Retrieve the latest event status
        var latestEvent = await dbContext.CompanyEvents
            .AsNoTracking()
            .Where(e => e.RNGForEventUploadedAsCompany == companyEvent.RNGForEventUploadedAsCompany)
            .Select(e => new { e.CompanyEventStatus })
            .FirstOrDefaultAsync();

        if (latestEvent == null || latestEvent.CompanyEventStatus != "Δημοσιευμένη")
        {
            await JS.InvokeVoidAsync("confirmActionWithHTML2", "Η Εκδήλωση έχει Αποδημοσιευτεί. Παρακαλώ δοκιμάστε αργότερα.");
            return false;
        }

        var student = await GetStudentDetails(CurrentUserEmail);
        if (student == null)
        {
            await JS.InvokeVoidAsync("confirmActionWithHTML2", "Δεν βρέθηκαν στοιχεία φοιτητή.");
            return false;
        }

        // Check for existing interest
        var existingInterest = await dbContext.InterestInCompanyEvents
            .FirstOrDefaultAsync(i => 
                i.StudentEmailShowInterestForEvent == student.Email &&
                i.RNGForCompanyEventInterest == companyEvent.RNGForEventUploadedAsCompany);

        if (existingInterest != null)
        {
            await JS.InvokeVoidAsync("confirmActionWithHTML2", $"Έχετε ήδη δείξει ενδιαφέρον για: {companyEvent.CompanyEventTitle}!");
            return false;
        }

        if (!selectedStartingPoint.TryGetValue(companyEvent.RNGForEventUploadedAsCompany, out var chosenLocation))
        {
            await ShowAlert("Παρακαλώ επιλέξτε μια τοποθεσία μετακίνησης πριν δείξετε ενδιαφέρον.");
            return false;
        }

        // Get company data
        var company = await dbContext.Companies
            .FirstOrDefaultAsync(c => c.CompanyEmail == companyEvent.CompanyEmailUsedToUploadEvent);

        if (company == null)
        {
            await JS.InvokeVoidAsync("confirmActionWithHTML2", "Σφάλμα: Δεν βρέθηκε η εταιρία.");
            return false;
        }

        using var transaction = await dbContext.Database.BeginTransactionAsync();
        try
        {
            // Create main interest record with details
            var interest = new InterestInCompanyEvent
            {
                RNGForCompanyEventInterest = companyEvent.RNGForEventUploadedAsCompany,
                RNGForCompanyEventInterest_HashedAsUniqueID = companyEvent.RNGForEventUploadedAsCompany_HashedAsUniqueID,
                DateTimeStudentShowInterest = DateTime.UtcNow,
                CompanyEventStatusAtStudentSide = "Έχετε Δείξει Ενδιαφέρον",
                CompanyEventStatusAtCompanySide = "Προς Επεξεργασία",
                CompanyEmailWhereStudentShowedInterest = companyEvent.CompanyEmailUsedToUploadEvent,
                CompanyUniqueIDWhereStudentShowedInterest = company.Company_UniqueID,
                StudentEmailShowInterestForEvent = student.Email,
                StudentUniqueIDShowInterestForEvent = student.Student_UniqueID,
                StudentTransportNeedWhenShowInterestForCompanyEvent = needsTransportForCompanyEvent ? "Ναι" : "Όχι",
                StudentTransportChosenLocationWhenShowInterestForCompanyEvent = chosenLocation,
        
                StudentDetails = new InterestInCompanyEvent_StudentDetails
                {
                    StudentUniqueIDShowInterestForCompanyEvent = student.Student_UniqueID,
                    StudentEmailShowInterestForCompanyEvent = student.Email,
                    DateTimeStudentShowInterestForCompanyEvent = DateTime.UtcNow,
                    RNGForCompanyEventShowInterestAsStudent_HashedAsUniqueID = companyEvent.RNGForEventUploadedAsCompany_HashedAsUniqueID
                },
        
                CompanyDetails = new InterestInCompanyEvent_CompanyDetails
                {
                    CompanyUniqueIDWhereStudentShowInterestForCompanyEvent = company.Company_UniqueID,
                    CompanyEmailWhereStudentShowInterestForCompanyEvent = companyEvent.CompanyEmailUsedToUploadEvent
                }
            };

            dbContext.InterestInCompanyEvents.Add(interest);
    
            // Add platform action
            dbContext.PlatformActions.Add(new PlatformActions
            {
                UserRole_PerformedAction = "STUDENT",
                ForWhat_PerformedAction = "COMPANY_EVENT",
                HashedPositionRNG_PerformedAction = HashingHelper.HashLong(companyEvent.RNGForEventUploadedAsCompany),
                TypeOfAction_PerformedAction = "SHOW_INTEREST",
                DateTime_PerformedAction = DateTime.UtcNow
            });

            await dbContext.SaveChangesAsync();
            await transaction.CommitAsync();

            // Send emails
            try
            {
                await InternshipEmailService.SendConfirmationToStudentForInterestInCompanyEvent(
                    student.Email,
                    student.Name,
                    student.Surname,
                    companyEvent.CompanyEventTitle,
                    company.CompanyName,
                    companyEvent.RNGForEventUploadedAsCompany_HashedAsUniqueID,
                    needsTransportForCompanyEvent,
                    chosenLocation);

                await InternshipEmailService.SendNotificationToCompanyForStudentInterestForCompanyEvent(
                    companyEvent.CompanyEmailUsedToUploadEvent,
                    company.CompanyName,
                    student.Name,
                    student.Surname,
                    student.Email,
                    student.Telephone,
                    student.StudyYear,
                    companyEvent.CompanyEventTitle,
                    companyEvent.RNGForEventUploadedAsCompany_HashedAsUniqueID,
                    needsTransportForCompanyEvent,
                    chosenLocation);
            }
            catch (Exception ex)
            {
                Console.WriteLine($"Email error: {ex.Message}");
            }

            await JS.InvokeVoidAsync("confirmActionWithHTML2", 
                $"Η έκφραση ενδιαφέροντος για την εκδήλωση {companyEvent.CompanyEventTitle} υποβλήθηκε επιτυχώς!");
        }
        catch (Exception ex)
        {
            await transaction.RollbackAsync();
            Console.WriteLine($"Full error: {ex}");
            await JS.InvokeVoidAsync("confirmActionWithHTML2", 
                $"Σφάλμα κατά την υποβολή: {ex.InnerException?.Message ?? ex.Message}");
            return false;
        }

        NavigationManager.NavigateTo(NavigationManager.Uri, forceLoad: true);
        return false;
    }

    private async Task<bool> ShowInterestInProfessorEvent(ProfessorEvent professorEvent, bool needsTransportForProfessorEvent)
    {
        // First ask for confirmation - now accessing professor name through navigation property
        var confirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML", 
            $"Πρόκεται να δείξετε Ενδιαφέρον για την Εκδήλωση: {professorEvent.ProfessorEventTitle} του Καθηγητή {professorEvent.Professor?.ProfName} {professorEvent.Professor?.ProfSurname}. Είστε σίγουρος/η;");
        if (!confirmed) return false;

        // Retrieve the latest event status with professor included
        var latestEvent = await dbContext.ProfessorEvents
            .Include(e => e.Professor)
            .AsNoTracking()
            .Where(e => e.RNGForEventUploadedAsProfessor == professorEvent.RNGForEventUploadedAsProfessor)
            .Select(e => new { e.ProfessorEventStatus })
            .FirstOrDefaultAsync();

        if (latestEvent == null || latestEvent.ProfessorEventStatus != "Δημοσιευμένη")
        {
            await JS.InvokeVoidAsync("confirmActionWithHTML2", "Η Εκδήλωση έχει Αποδημοσιευτεί. Παρακαλώ δοκιμάστε αργότερα.");
            return false;
        }

        var student = await GetStudentDetails(CurrentUserEmail);
        if (student == null)
        {
            await JS.InvokeVoidAsync("confirmActionWithHTML2", "Δεν βρέθηκαν στοιχεία φοιτητή.");
            return false;
        }

        // Check for existing interest
        var existingInterest = await dbContext.InterestInProfessorEvents
            .FirstOrDefaultAsync(i => 
                i.StudentEmailShowInterestForEvent == student.Email &&
                i.RNGForProfessorEventInterest == professorEvent.RNGForEventUploadedAsProfessor);

        if (existingInterest != null)
        {
            await JS.InvokeVoidAsync("confirmActionWithHTML2", $"Έχετε ήδη δείξει ενδιαφέρον για: {professorEvent.ProfessorEventTitle}!");
            return false;
        }

        if (!selectedStartingPoint.TryGetValue(professorEvent.RNGForEventUploadedAsProfessor, out var chosenLocation))
        {
            await ShowAlert("Παρακαλώ επιλέξτε μια τοποθεσία μετακίνησης πριν δείξετε ενδιαφέρον.");
            return false;
        }

        // Get professor data - now using the navigation property or foreign key
        var professor = professorEvent.Professor ?? await dbContext.Professors
            .FirstOrDefaultAsync(p => p.ProfEmail == professorEvent.ProfessorEmailUsedToUploadEvent);

        if (professor == null)
        {
            await JS.InvokeVoidAsync("confirmActionWithHTML2", "Σφάλμα: Δεν βρέθηκε ο καθηγητής.");
            return false;
        }

        using var transaction = await dbContext.Database.BeginTransactionAsync();
        try
        {
            // Create main interest record with details
            var interest = new InterestInProfessorEvent
            {
                RNGForProfessorEventInterest = professorEvent.RNGForEventUploadedAsProfessor,
                RNGForProfessorEventInterest_HashedAsUniqueID = professorEvent.RNGForEventUploadedAsProfessor_HashedAsUniqueID,
                DateTimeStudentShowInterest = DateTime.UtcNow,
                ProfessorEventStatusAtStudentSide = "Έχετε Δείξει Ενδιαφέρον",
                ProfessorEventStatusAtProfessorSide = "Προς Επεξεργασία",
                ProfessorEmailWhereStudentShowedInterest = professorEvent.ProfessorEmailUsedToUploadEvent, // Updated to use foreign key
                ProfessorUniqueIDWhereStudentShowedInterest = professor.Professor_UniqueID,
                StudentEmailShowInterestForEvent = student.Email,
                StudentUniqueIDShowInterestForEvent = student.Student_UniqueID,
                StudentTransportNeedWhenShowInterestForProfessorEvent = needsTransportForProfessorEvent ? "Ναι" : "Όχι",
                StudentTransportChosenLocationWhenShowInterestForProfessorEvent = chosenLocation,
    
                StudentDetails = new InterestInProfessorEvent_StudentDetails
                {
                    StudentUniqueIDShowInterestForProfessorEvent = student.Student_UniqueID,
                    StudentEmailShowInterestForProfessorEvent = student.Email,
                    DateTimeStudentShowInterestForProfessorEvent = DateTime.UtcNow,
                    RNGForProfessorEventShowInterestAsStudent_HashedAsUniqueID = professorEvent.RNGForEventUploadedAsProfessor_HashedAsUniqueID
                },
    
                ProfessorDetails = new InterestInProfessorEvent_ProfessorDetails
                {
                    ProfessorUniqueIDWhereStudentShowInterestForProfessorEvent = professor.Professor_UniqueID,
                    ProfessorEmailWhereStudentShowInterestForProfessorEvent = professorEvent.ProfessorEmailUsedToUploadEvent // Updated to use foreign key
                }
            };

            dbContext.InterestInProfessorEvents.Add(interest);

            // Add platform action
            dbContext.PlatformActions.Add(new PlatformActions
            {
                UserRole_PerformedAction = "STUDENT",
                ForWhat_PerformedAction = "PROFESSOR_EVENT",
                HashedPositionRNG_PerformedAction = HashingHelper.HashLong(professorEvent.RNGForEventUploadedAsProfessor),
                TypeOfAction_PerformedAction = "SHOW_INTEREST",
                DateTime_PerformedAction = DateTime.UtcNow
            });

            await dbContext.SaveChangesAsync();
            await transaction.CommitAsync();

            // Send emails - updated to use professor navigation properties
            try
            {
                await InternshipEmailService.SendConfirmationToStudentForInterestInProfessorEvent(
                    student.Email,
                    student.Name,
                    student.Surname,
                    professorEvent.ProfessorEventTitle,
                    professor.ProfName,
                    professor.ProfSurname,
                    professorEvent.RNGForEventUploadedAsProfessor_HashedAsUniqueID,
                    needsTransportForProfessorEvent,
                    chosenLocation);

                await InternshipEmailService.SendNotificationToProfessorForStudentInterestForProfessorEvent(
                    professor.ProfEmail,
                    professor.ProfName,
                    professor.ProfSurname,
                    student.Name,
                    student.Surname,
                    student.Email,
                    student.Telephone,
                    student.StudyYear,
                    professorEvent.ProfessorEventTitle,
                    professorEvent.RNGForEventUploadedAsProfessor_HashedAsUniqueID,
                    needsTransportForProfessorEvent,
                    chosenLocation);
            }
            catch (Exception ex)
            {
                Console.WriteLine($"Email error: {ex.Message}");
            }

            await JS.InvokeVoidAsync("confirmActionWithHTML2", 
                $"Η έκφραση ενδιαφέροντος για την εκδήλωση {professorEvent.ProfessorEventTitle} υποβλήθηκε επιτυχώς!");
        }
        catch (Exception ex)
        {
            await transaction.RollbackAsync();
            Console.WriteLine($"Full error: {ex}");
            await JS.InvokeVoidAsync("confirmActionWithHTML2", 
                $"Σφάλμα κατά την υποβολή: {ex.InnerException?.Message ?? ex.Message}");
            return false;
        }

        NavigationManager.NavigateTo(NavigationManager.Uri, forceLoad: true);
        return false;
    }




    private async Task ShowAlert(string message)
    {
        await JS.InvokeVoidAsync("alert", message);
    }


    private async Task ShowProfessorDetailsFromHyperlinkName(string professorEmail)
    {
        try
        {
            selectedProfessorDetails = await dbContext.Professors
                .FirstOrDefaultAsync(p => p.ProfEmail == professorEmail);

            if (selectedProfessorDetails != null)
            {
                isProfessorDetailModalVisible = true;
            }
            else
            {
                Console.WriteLine("Professor not found");
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error fetching professor details: {ex.Message}");
        }
    }

    private void CloseProfessorModalFromHyperlinkName()
    {
        isProfessorDetailModalVisible = false;
        selectedProfessorDetails = null;
    }

    private string GetImageSource(byte[] imageBytes)
    {      
        return "data:image/png;base64," + Convert.ToBase64String(imageBytes);       
    }      

    private void SearchStudentsAsProfessorToFindStudent()
    {
        var query = dbContext.Students.AsQueryable();

        query = query.Where(s =>
            (string.IsNullOrEmpty(searchEmailAsProfessorToFindStudent) || s.Email.Contains(searchEmailAsProfessorToFindStudent)) &&
            (string.IsNullOrEmpty(searchNameAsProfessorToFindStudent) || s.Name.Contains(searchNameAsProfessorToFindStudent)) &&
            (string.IsNullOrEmpty(searchSurnameAsProfessorToFindStudent) || s.Surname.Contains(searchSurnameAsProfessorToFindStudent)) &&
            (string.IsNullOrEmpty(searchRegNumberAsProfessorToFindStudent) || s.RegNumber.ToString().Contains(searchRegNumberAsProfessorToFindStudent)) &&
            (string.IsNullOrEmpty(searchSchoolAsProfessorToFindStudent) || 
                universityDepartments.ContainsKey(searchSchoolAsProfessorToFindStudent) &&
                universityDepartments[searchSchoolAsProfessorToFindStudent].Contains(s.Department)) &&
            (string.IsNullOrEmpty(searchDepartmentAsProfessorToFindStudent) || s.Department.Contains(searchDepartmentAsProfessorToFindStudent))
        );

        if (!string.IsNullOrEmpty(searchAreasOfExpertiseAsProfessorToFindStudent))
        {
            query = query.Where(s => s.AreasOfExpertise.Contains(searchAreasOfExpertiseAsProfessorToFindStudent));
        }

        if (!string.IsNullOrEmpty(searchKeywordsAsProfessorToFindStudent))
        {
            query = query.Where(s => s.Keywords.Contains(searchKeywordsAsProfessorToFindStudent));
        }

        searchResultsAsProfessorToFindStudent = query.ToList();
    }


    private void ClearSearchFieldsAsProfessorToFindStudent()
    {
        // Clear all search fields
        searchEmailAsProfessorToFindStudent = string.Empty;
        searchNameAsProfessorToFindStudent = string.Empty;
        searchSurnameAsProfessorToFindStudent = string.Empty;
        searchRegNumberAsProfessorToFindStudent = string.Empty;
        searchSchoolAsProfessorToFindStudent = string.Empty;
        searchDepartmentAsProfessorToFindStudent = string.Empty;
        searchAreasOfExpertiseAsProfessorToFindStudent = string.Empty;  // Clear AreasOfExpertise search field
        searchKeywordsAsProfessorToFindStudent = string.Empty;  // Clear Keywords search field

        searchResultsAsProfessorToFindStudent = null;
    }


    private void SearchCompaniesAsProfessor()
    {
        var query = dbContext.Companies.AsQueryable();

        // Apply basic filters
        query = query.Where(c =>
            (string.IsNullOrEmpty(searchCompanyEmailAsProfessorToFindCompany) || c.CompanyEmail.Contains(searchCompanyEmailAsProfessorToFindCompany)) &&
            (string.IsNullOrEmpty(searchCompanyNameENGAsProfessorToFindCompany) || c.CompanyNameENG.Contains(searchCompanyNameENGAsProfessorToFindCompany)) &&
            (string.IsNullOrEmpty(searchCompanyTypeAsProfessorToFindCompany) || c.CompanyType.Contains(searchCompanyTypeAsProfessorToFindCompany)) &&
            (string.IsNullOrEmpty(searchCompanyActivityrAsProfessorToFindCompany) || c.CompanyActivity.Contains(searchCompanyActivityrAsProfessorToFindCompany)) &&
            (string.IsNullOrEmpty(searchCompanyTownAsProfessorToFindCompany) || c.CompanyTown.Contains(searchCompanyTownAsProfessorToFindCompany))
        );

        // Apply areas filter only if search term exists
        if (!string.IsNullOrEmpty(searchCompanyAreasAsProfessorToFindCompany))
        {
            query = query.Where(c => c.CompanyAreas.Contains(searchCompanyAreasAsProfessorToFindCompany));
        }

        // Apply skills filter only if search term exists
        if (!string.IsNullOrEmpty(searchCompanyDesiredSkillsAsProfessorToFindCompany))
        {
            query = query.Where(c => c.CompanyDesiredSkills.Contains(searchCompanyDesiredSkillsAsProfessorToFindCompany));
        }

        searchResultsAsProfessorToFindCompany = query.ToList();
    }

    private void ClearSearchFieldsAsProfessorToFindCompany()
    {
        // Clear all search fields
        searchCompanyEmailAsProfessorToFindCompany = string.Empty;
        searchCompanyNameENGAsProfessorToFindCompany = string.Empty;
        searchCompanyTypeAsProfessorToFindCompany = string.Empty;
        searchCompanyActivityrAsProfessorToFindCompany = string.Empty;
        searchCompanyTownAsProfessorToFindCompany = string.Empty;
        searchCompanyAreasAsProfessorToFindCompany = string.Empty;
        searchCompanyDesiredSkillsAsProfessorToFindCompany = string.Empty;

        // Clear search results
        searchResultsAsProfessorToFindCompany = null;
    }

///////////////////////
    private void SearchCompaniesAsRG()
    {
        var query = dbContext.Companies.AsQueryable();

        // Apply basic filters
        query = query.Where(c =>
            (string.IsNullOrEmpty(searchCompanyEmailAsRGToFindCompany) || c.CompanyEmail.Contains(searchCompanyEmailAsRGToFindCompany)) &&
            (string.IsNullOrEmpty(searchCompanyNameENGAsRGToFindCompany) || c.CompanyNameENG.Contains(searchCompanyNameENGAsRGToFindCompany)) &&
            (string.IsNullOrEmpty(searchCompanyTypeAsRGToFindCompany) || c.CompanyType.Contains(searchCompanyTypeAsRGToFindCompany)) &&
            (string.IsNullOrEmpty(searchCompanyActivityrAsRGToFindCompany) || c.CompanyActivity.Contains(searchCompanyActivityrAsRGToFindCompany)) &&
            (string.IsNullOrEmpty(searchCompanyTownAsRGToFindCompany) || c.CompanyTown.Contains(searchCompanyTownAsRGToFindCompany))
        );

        // Apply areas filter only if search term exists
        if (!string.IsNullOrEmpty(searchCompanyAreasAsRGToFindCompany))
        {
            query = query.Where(c => c.CompanyAreas.Contains(searchCompanyAreasAsRGToFindCompany));
        }

        // Apply skills filter only if search term exists
        if (!string.IsNullOrEmpty(searchCompanyDesiredSkillsAsRGToFindCompany))
        {
            query = query.Where(c => c.CompanyDesiredSkills.Contains(searchCompanyDesiredSkillsAsRGToFindCompany));
        }

        searchResultsAsRGToFindCompany = query.ToList();
    }

    private void ClearSearchFieldsAsRGToFindCompany()
    {
        // Clear all search fields
        searchCompanyEmailAsRGToFindCompany = string.Empty;
        searchCompanyNameENGAsRGToFindCompany = string.Empty;
        searchCompanyTypeAsRGToFindCompany = string.Empty;
        searchCompanyActivityrAsRGToFindCompany = string.Empty;
        searchCompanyTownAsRGToFindCompany = string.Empty;
        searchCompanyAreasAsRGToFindCompany = string.Empty;
        searchCompanyDesiredSkillsAsRGToFindCompany = string.Empty;

        // Clear search results
        searchResultsAsRGToFindCompany = null;
    }

 /////////////////

    private void ShowStudentDetailsWhenSearchAsProfessor(Student student)
    {
        selectedStudent = student;
        showStudentDetailsModal = true;
    }

    private void CloseStudentDetailsModalWhenSearchAsProfessor()
    {
        showStudentDetailsModal = false;
        selectedStudent = null;
    }


    private void ShowCompanyDetailsWhenSearchAsProfessor(Company company)
    {
        selectedCompany = company;
        showCompanyDetailsModal = true;
    }

    private void ShowCompanyDetailsWhenSearchAsRG(Company company)
    {
        selectedCompany = company;
        showCompanyDetailsModal = true;
    }

    private void CloseCompanyDetailsModalWhenSearchAsProfessor()
    {
        showCompanyDetailsModal = false;
        selectedCompany = null;
    }

    private async Task ShowStudentDetailsInNameAsHyperlinkForProfessorThesis(string studentUniqueID)
    {
        try
        {
            // Fetch the student details using the unique ID from cache first
            if (!studentDataCache.TryGetValue(studentUniqueID, out currentStudentDetails))
            {
                // If not in cache, fetch from database
                currentStudentDetails = await dbContext.Students
                    .FirstOrDefaultAsync(s => s.Student_UniqueID == studentUniqueID);
            
                if (currentStudentDetails != null)
                {
                    // Add to cache
                    studentDataCache[studentUniqueID] = currentStudentDetails;
                }
            }

            if (currentStudentDetails != null)
            {
                isModalVisibleToShowStudentDetailsInNameAsHyperlinkForProfessorThesis = true;
            }
            else
            {
                await JS.InvokeVoidAsync("alert", "Δεν βρέθηκαν στοιχεία φοιτητή");
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading student details: {ex.Message}");
            await JS.InvokeVoidAsync("alert", "Σφάλμα κατά την φόρτωση των στοιχείων του φοιτητή");
        }
    }

    private void UpdateOrganizerVisibility(bool value)
    {
        companyEvent.CompanyEventOtherOrganizerToBeVisible = value;
        StateHasChanged(); // Ensure the UI is updated
    }

    private void UpdateOrganizerVisibilityForProfessorEvents(bool value)
    {
        professorEvent.ProfessorEventOtherOrganizerToBeVisible = value;
        StateHasChanged(); // Ensure the UI is updated
    }

    private void ShowStudentDetailsOnEyeIconWhenSearchForStudentsAsCompany(Student student)
    {
        selectedStudentWhenSearchForStudentsAsCompany = student;
        showStudentDetailsModalWhenSearchForStudentsAsCompany = true;
    }

    private void CloseModalStudentDetailsOnEyeIconWhenSearchForStudentsAsCompany()
    {
        showStudentDetailsModalWhenSearchForStudentsAsCompany = false;
        selectedStudentWhenSearchForStudentsAsCompany = null;
    }

    private void SearchProfessorsAsCompanyToFindProfessor()
    {
        var professorsQuery = dbContext.Professors.AsQueryable();

        if (!string.IsNullOrEmpty(searchNameSurnameAsCompanyToFindProfessor))
        {
            professorsQuery = professorsQuery.Where(p =>
                (p.ProfName + " " + p.ProfSurname).Contains(searchNameSurnameAsCompanyToFindProfessor));
        }

        if (!string.IsNullOrEmpty(searchSchoolAsCompanyToFindProfessor))
        {
            // Filter by school - you might need to add a School property to your Professor model
            // If you don't have a School property, you can filter by departments that belong to the selected school
            var schoolDepartments = universityDepartments[searchSchoolAsCompanyToFindProfessor];
            professorsQuery = professorsQuery.Where(p => schoolDepartments.Contains(p.ProfDepartment));
        }

        if (!string.IsNullOrEmpty(searchDepartmentAsCompanyToFindProfessor))
        {
            professorsQuery = professorsQuery.Where(p => p.ProfDepartment == searchDepartmentAsCompanyToFindProfessor);
        }

        var professorsList = professorsQuery.ToList();

        searchResultsAsCompanyToFindProfessor = professorsList
            .Where(p =>
                string.IsNullOrEmpty(searchAreasOfInterestAsCompanyToFindProfessor) ||
                (!string.IsNullOrEmpty(p.ProfGeneralFieldOfWork) &&
                    (
                        selectedAreasOfInterest.Any(area => p.ProfGeneralFieldOfWork.Contains(area)) ||
                        p.ProfGeneralFieldOfWork.Contains(searchAreasOfInterestAsCompanyToFindProfessor)
                    )
                )
            )
            .ToList();
    }


    private void ClearSearchFieldsAsCompanyToFindProfessor()
    {
        searchNameSurnameAsCompanyToFindProfessor = string.Empty; 
        searchSchoolAsCompanyToFindProfessor = string.Empty;
        searchDepartmentAsCompanyToFindProfessor = string.Empty;   
        searchAreasOfInterestAsCompanyToFindProfessor = string.Empty; 
        searchResultsAsCompanyToFindProfessor = null; 
        areasOfInterestSuggestions.Clear();
        selectedAreasOfInterest.Clear(); 
    }




    private void ShowProfessorDetailsOnEyeIconWhenSearchForProfessorAsCompany(Professor professor)
    {
        selectedProfessorWhenSearchForProfessorsAsCompany = professor;
        showProfessorDetailsModalWhenSearchForProfessorsAsCompany = true;
    }

    private void CloseModalProfessorDetailsOnEyeIconWhenSearchForProfessorsAsCompany()
    {
        showProfessorDetailsModalWhenSearchForProfessorsAsCompany = false;
        selectedProfessorWhenSearchForProfessorsAsCompany = null;
    }

    private string SearchNameOrSurname
    {
        get => searchNameOrSurname;
        set
        {
            searchNameOrSurname = value;
            UpdateNameSurnameSuggestions(); 
        }
    }

    private void UpdateNameSurnameSuggestions()
    {
        if (!string.IsNullOrWhiteSpace(searchNameOrSurname) && searchNameOrSurname.Length > 1)
        {
            // Fetch suggestions dynamically
            nameSurnameSuggestions = dbContext.Students
                .Where(s => 
                    s.Name.Contains(searchNameOrSurname) || 
                    s.Surname.Contains(searchNameOrSurname))
                .Select(s => s.Name + " " + s.Surname) // Combine Name and Surname
                .Distinct()
                .Take(10) // Limit results
                .ToList();
        }
        else
        {
            // Clear suggestions when input is empty
            nameSurnameSuggestions.Clear();
        }
    }


    private void SelectNameSurnameSuggestion(string suggestion)
    {
        if (!string.IsNullOrWhiteSpace(suggestion))
        {
            searchNameOrSurname = suggestion; // Populate input with the selected suggestion
            nameSurnameSuggestions.Clear();  // Clear the suggestions list
        }
    }


    private async Task HandleInput(ChangeEventArgs e)
    {
        searchNameOrSurname = e.Value?.ToString().Trim() ?? string.Empty;

        if (searchNameOrSurname.Length >= 2)
        {
            try
            {
                nameSurnameSuggestions = await Task.Run(() =>
                    dbContext.Students
                        .Where(s => 
                            s.Name.Contains(searchNameOrSurname) || 
                            s.Surname.Contains(searchNameOrSurname))
                        .Select(s => s.Name + " " + s.Surname)
                        .Distinct()
                        .Take(10)
                        .ToList());
            }
            catch (Exception ex)
            {
                // Log or handle the error as appropriate
                Console.WriteLine($"Error fetching student suggestions: {ex.Message}");
            }
        }
        else
        {
            nameSurnameSuggestions.Clear();
        }

        StateHasChanged();
    }


    private void HandleProfessorInput(ChangeEventArgs e)
    {
        searchNameSurnameAsCompanyToFindProfessor = e.Value?.ToString();
        if (!string.IsNullOrWhiteSpace(searchNameSurnameAsCompanyToFindProfessor) && searchNameSurnameAsCompanyToFindProfessor.Length >= 2)
        {
            professorNameSurnameSuggestions = dbContext.Professors
                .Where(p => (p.ProfName + " " + p.ProfSurname).Contains(searchNameSurnameAsCompanyToFindProfessor))
                .Select(p => p.ProfName + " " + p.ProfSurname) // Concatenate Name and Surname
                .Distinct()
                .ToList();
        }
        else
        {
            professorNameSurnameSuggestions.Clear();
        }
    }

    private void HandleResearchGroupInput(ChangeEventArgs e)
    {
        searchResearchGroupNameAsCompanyToFindResearchGroup = e.Value?.ToString();
        if (!string.IsNullOrWhiteSpace(searchResearchGroupNameAsCompanyToFindResearchGroup) && searchResearchGroupNameAsCompanyToFindResearchGroup.Length >= 2)
        {
            researchgroupNameSuggestions = dbContext.ResearchGroups
                .Where(p => (p.ResearchGroupName).Contains(searchResearchGroupNameAsCompanyToFindResearchGroup))
                .Select(p => p.ResearchGroupName) 
                .Distinct()
                .ToList();
        }
        else
        {
            researchgroupNameSuggestions.Clear();
        }
    }

////////////////////////////////////////////////////////////////////////////////////////////////////
    private void HandleProfessorInputWhenSearchForProfessorAsRG(ChangeEventArgs e)
    {
        searchNameSurnameAsRGToFindProfessor = e.Value?.ToString();
        if (!string.IsNullOrWhiteSpace(searchNameSurnameAsRGToFindProfessor) && searchNameSurnameAsRGToFindProfessor.Length >= 2)
        {
            professorNameSurnameSuggestionsAsRG = dbContext.Professors
                .Where(p => (p.ProfName + " " + p.ProfSurname).Contains(searchNameSurnameAsRGToFindProfessor))
                .Select(p => p.ProfName + " " + p.ProfSurname) // Concatenate Name and Surname
                .Distinct()
                .ToList();
        }
        else
        {
            professorNameSurnameSuggestionsAsRG.Clear();
        }
    }

    private void SelectProfessorNameSurnameSuggestionAsRG(string suggestion)
    {
        searchNameSurnameAsRGToFindProfessor = suggestion;
        professorNameSurnameSuggestionsAsRG.Clear();
    }

    private async Task HandleAreasOfInterestInputAsRG(ChangeEventArgs e)
    {
        searchAreasOfInterestAsRG = e.Value?.ToString().Trim() ?? string.Empty;

        // Ensure areasOfInterestSuggestions is never null
        areasOfInterestSuggestionsAsRG = new List<string>();

        if (searchAreasOfInterestAsRG.Length >= 1)
        {
            try
            {
                // Fetch suggestions for Areas of Interest with 1+ characters
                areasOfInterestSuggestionsAsRG = await Task.Run(() =>
                    dbContext.Areas
                        .Where(a => a.AreaName.Contains(searchAreasOfInterestAsRG)) // Assuming the entity has InterestName
                        .Select(a => a.AreaName) // Extract only the InterestName
                        .Distinct()
                        .Take(10) // Limit suggestions to 10
                        .ToList());
            }
            catch (Exception ex)
            {
                // Log the error for debugging purposes
                Console.WriteLine($"Πρόβλημα στην Ανάκτηση Περιοχών Ενδιαφέροντος από την Βάση: {ex.Message}");
                areasOfInterestSuggestionsAsRG = new List<string>();  // Fallback to empty list
            }
        }
        else
        {
            areasOfInterestSuggestions.Clear(); // Clear suggestions for fewer than 1 character
        }

        // Trigger UI refresh
        StateHasChanged();
    }

    private void SelectAreasOfInterestSuggestionAsRG(string suggestion)
    {
        if (!string.IsNullOrWhiteSpace(suggestion) && !selectedAreasOfInterestAsRG.Contains(suggestion))
        {
            selectedAreasOfInterestAsRG.Add(suggestion);
            areasOfInterestSuggestionsAsRG.Clear(); // Clear suggestions
            searchAreasOfInterestAsRG = string.Empty; // Clear input field
        }
    }

    private void RemoveSelectedAreaOfInterestAsRG(string area)
    {
        selectedAreasOfInterestAsRG.Remove(area); // Remove area
        StateHasChanged(); // Refresh UI
    }

    private void SearchProfessorsAsRGToFindProfessor()
    {
        var professorsQuery = dbContext.Professors.AsQueryable();

        if (!string.IsNullOrEmpty(searchNameSurnameAsRGToFindProfessor))
        {
            professorsQuery = professorsQuery.Where(p =>
                (p.ProfName + " " + p.ProfSurname).Contains(searchNameSurnameAsRGToFindProfessor));
        }

        if (!string.IsNullOrEmpty(searchSchoolAsRGToFindProfessor))
        {
            // Filter by departments that belong to the selected school
            var schoolDepartments = universityDepartments[searchSchoolAsRGToFindProfessor];
            professorsQuery = professorsQuery.Where(p => schoolDepartments.Contains(p.ProfDepartment));
        }

        if (!string.IsNullOrEmpty(searchDepartmentAsRGToFindProfessor))
        {
            professorsQuery = professorsQuery.Where(p => p.ProfDepartment == searchDepartmentAsRGToFindProfessor);
        }

        var professorsList = professorsQuery.ToList();

        searchResultsAsRGToFindProfessor = professorsList
            .Where(p =>
                string.IsNullOrEmpty(searchAreasOfInterestAsRGToFindProfessor) ||
                (!string.IsNullOrEmpty(p.ProfGeneralFieldOfWork) &&
                    (
                        selectedAreasOfInterestAsRG.Any(area => p.ProfGeneralFieldOfWork.Contains(area)) ||
                        p.ProfGeneralFieldOfWork.Contains(searchAreasOfInterestAsRGToFindProfessor)
                    )
                )
            )
            .ToList();
    }

    private void ClearSearchFieldsAsRGToFindProfessor()
    {
        searchNameSurnameAsRGToFindProfessor = string.Empty; 
        searchSchoolAsRGToFindProfessor = string.Empty;
        searchDepartmentAsRGToFindProfessor = string.Empty;   
        searchAreasOfInterestAsRGToFindProfessor = string.Empty; 
        searchResultsAsRGToFindProfessor = null; 
        areasOfInterestSuggestionsAsRG.Clear();
        selectedAreasOfInterestAsRG.Clear(); 
    }


    private int ProfessorsPerPage_SearchForProfessorsAsRG = 3; // Default value
    private int currentProfessorPage_SearchForProfessorsAsRG = 1;
    private void OnPageSizeChange_SearchForProfessorsAsRG(ChangeEventArgs e)
    {
        if (int.TryParse(e.Value?.ToString(), out int newSize) && newSize > 0)
        {
            ProfessorsPerPage_SearchForProfessorsAsRG = newSize;
            currentProfessorPage_SearchForProfessorsAsRG = 1;
            StateHasChanged();
        }
    }

    private IEnumerable<Professor> GetPaginatedProfessorResultsAsRG()
    {
        return searchResultsAsRGToFindProfessor?
            .Skip((currentProfessorPage_SearchForProfessorsAsRG - 1) * ProfessorsPerPage_SearchForProfessorsAsRG)
            .Take(ProfessorsPerPage_SearchForProfessorsAsRG) 
            ?? Enumerable.Empty<Professor>();
    }

    private void ShowProfessorDetailsOnEyeIconWhenSearchForProfessorAsRG(Professor professor)
    {
        selectedProfessorWhenSearchForProfessorsAsRG = professor;
        showProfessorDetailsModalWhenSearchForProfessorsAsRG = true;
    }

    private void GoToFirstProfessorPageAsRG()
    {
        currentProfessorPage_SearchForProfessorsAsRG = 1;
        StateHasChanged();
    }

    private int totalProfessorPages_SearchForProfessorsAsRG => searchResultsAsRGToFindProfessor != null 
            ? (int)Math.Ceiling((double)searchResultsAsRGToFindProfessor.Count / ProfessorsPerPage_SearchForProfessorsAsRG) 
            : 1;
    private List<int> GetVisibleProfessorPagesAsRG()
    {
        var pagesAsRG = new List<int>();
        int currentPageAsRG = currentProfessorPage_SearchForProfessorsAsRG;
        int totalPagesAsRG = totalProfessorPages_SearchForProfessorsAsRG;
    
        // Always show first page
        pagesAsRG.Add(1);
    
        // Show pages around current page
        if (currentPageAsRG > 3) pagesAsRG.Add(-1); // Ellipsis
    
        int start = Math.Max(2, currentPageAsRG - 1);
        int end = Math.Min(totalPages - 1, currentPageAsRG + 1);
    
        for (int i = start; i <= end; i++)
        {
            pagesAsRG.Add(i);
        }
    
        if (currentPageAsRG < totalPagesAsRG - 2) pagesAsRG.Add(-1); // Ellipsis
    
        // Always show last page if different from first
        if (totalPagesAsRG > 1) pagesAsRG.Add(totalPagesAsRG);
    
        return pagesAsRG;
    }

    private void GoToProfessorPageAsRG(int pageNumberAsRG)
    {
        if (pageNumberAsRG >= 1 && pageNumberAsRG <= totalProfessorPages_SearchForProfessorsAsRG)
        {
            currentProfessorPage_SearchForProfessorsAsRG = pageNumberAsRG;
            StateHasChanged();
        }
    }

    private void PreviousProfessorPageAsRG()
    {
        if (currentProfessorPage_SearchForProfessorsAsRG > 1)
        {
            currentProfessorPage_SearchForProfessorsAsRG--;
            StateHasChanged();
        }
    }

    private void NextProfessorPageAsRG()
    {
        if (currentProfessorPage_SearchForProfessorsAsRG < totalProfessorPages_SearchForProfessorsAsRG)
        {
            currentProfessorPage_SearchForProfessorsAsRG++;
            StateHasChanged();
        }
    }

    private void GoToLastProfessorPageAsRG()
    {
        currentProfessorPage_SearchForProfessorsAsRG = totalProfessorPages_SearchForProfessorsAsRG;
        StateHasChanged();
    }


    private void CloseModalProfessorDetailsOnEyeIconWhenSearchForProfessorsAsRG()
    {
        showProfessorDetailsModalWhenSearchForProfessorsAsRG = false;
        selectedProfessorWhenSearchForProfessorsAsRG = null;
    }
////////////////////////////////////////////////////////////////////////////////////////////////////

        private void HandleProfessorInputWhenSearchForProfessorThesisAutocompleteNameAsStudent(ChangeEventArgs e)
        {
            searchNameSurnameAsStudentToFindProfessor = e.Value?.ToString();
            if (!string.IsNullOrWhiteSpace(searchNameSurnameAsStudentToFindProfessor) && searchNameSurnameAsStudentToFindProfessor.Length >= 2)
            {
                professorNameSurnameSuggestions = dbContext.Professors
                    .Where(p => (p.ProfName + " " + p.ProfSurname).Contains(searchNameSurnameAsStudentToFindProfessor))
                    .Select(p => p.ProfName + " " + p.ProfSurname) // Concatenate Name and Surname
                    .Distinct()
                    .ToList();
            }
            else
            {
                professorNameSurnameSuggestions.Clear();
            }
        }

    // Select a suggestion for name and surname
    private void SelectProfessorNameSurnameSuggestionWhenSearchForProfessorThesisAutocompleteNameAsStudent(string suggestion)
    {
        searchNameSurnameAsStudentToFindProfessor = suggestion;
        professorNameSurnameSuggestions.Clear();
    }

    private void SelectProfessorNameSurnameSuggestion(string suggestion)
    {
        searchNameSurnameAsCompanyToFindProfessor = suggestion;
        professorNameSurnameSuggestions.Clear();
    }



    private async Task HandleAreasOfExpertiseInput(ChangeEventArgs e)
    {
        searchAreasOfExpertise = e.Value?.ToString().Trim() ?? string.Empty;

        // Ensure areasOfExpertiseSuggestions is never null
        areasOfExpertiseSuggestions = new List<string>();

        if (searchAreasOfExpertise.Length >= 1)
        {
            try
            {
                // Fetch suggestions for Areas of Expertise with 1+ characters
                areasOfExpertiseSuggestions = await Task.Run(() =>
                    dbContext.Areas
                        .Where(a => a.AreaName.Contains(searchAreasOfExpertise))
                        .Select(a => a.AreaName) // Extract only the AreaName
                        .Distinct()
                        .Take(10) // Limit suggestions to 10
                        .ToList()); // No need for ?? here, since ToList() will always return a List<string>
            }
            catch (Exception ex)
            {
                // Log the error for debugging purposes
                Console.WriteLine($"Πρόβλημα στην Ανάκτηση Περιοχών Εξειδίκευσης από την Βάση: {ex.Message}");
                areasOfExpertiseSuggestions = new List<string>();  // Fallback to empty list
            }
        }
        else
        {
            areasOfExpertiseSuggestions.Clear(); // Clear suggestions for fewer than 1 character
        }

        // Trigger UI refresh
        StateHasChanged();
    }

    private async Task HandleAreasOfInterestInput(ChangeEventArgs e)
    {
        searchAreasOfInterest = e.Value?.ToString().Trim() ?? string.Empty;

        // Ensure areasOfInterestSuggestions is never null
        areasOfInterestSuggestions = new List<string>();

        if (searchAreasOfInterest.Length >= 1)
        {
            try
            {
                // Fetch suggestions for Areas of Interest with 1+ characters
                areasOfInterestSuggestions = await Task.Run(() =>
                    dbContext.Areas
                        .Where(a => a.AreaName.Contains(searchAreasOfInterest)) // Assuming the entity has InterestName
                        .Select(a => a.AreaName) // Extract only the InterestName
                        .Distinct()
                        .Take(10) // Limit suggestions to 10
                        .ToList());
            }
            catch (Exception ex)
            {
                // Log the error for debugging purposes
                Console.WriteLine($"Πρόβλημα στην Ανάκτηση Περιοχών Ενδιαφέροντος από την Βάση: {ex.Message}");
                areasOfInterestSuggestions = new List<string>();  // Fallback to empty list
            }
        }
        else
        {
            areasOfInterestSuggestions.Clear(); // Clear suggestions for fewer than 1 character
        }

        // Trigger UI refresh
        StateHasChanged();
    }



    private void SelectAreasOfExpertiseSuggestion(string suggestion)
    {
        if (!string.IsNullOrWhiteSpace(suggestion) && !selectedAreasOfExpertise.Contains(suggestion))
        {
            selectedAreasOfExpertise.Add(suggestion);
            areasOfExpertiseSuggestions.Clear(); // Clear suggestions
            searchAreasOfExpertise = string.Empty; // Clear input field
        }
    }

    private void SelectAreasOfInterestSuggestion(string suggestion)
    {
        if (!string.IsNullOrWhiteSpace(suggestion) && !selectedAreasOfInterest.Contains(suggestion))
        {
            selectedAreasOfInterest.Add(suggestion);
            areasOfInterestSuggestions.Clear(); // Clear suggestions
            searchAreasOfInterest = string.Empty; // Clear input field
        }
    }

    private void RemoveSelectedAreaOfExpertise(string area)
    {
        selectedAreasOfExpertise.Remove(area); // Remove area
        StateHasChanged(); // Refresh UI
    }

    private void RemoveSelectedAreaOfInterest(string area)
    {
        selectedAreasOfInterest.Remove(area); // Remove area
        StateHasChanged(); // Refresh UI
    }


    private async Task HandleKeywordsInput(ChangeEventArgs e)
    {
        searchKeywords = e.Value?.ToString().Trim() ?? string.Empty;

        // Ensure keywordsSuggestions is never null
        keywordsSuggestions = new List<string>();

        if (searchKeywords.Length >= 1)
        {
            try
            {
                // Fetch suggestions for Keywords/Skills with 1+ characters
                keywordsSuggestions = await Task.Run(() =>
                    dbContext.Skills
                        .Where(k => k.SkillName.Contains(searchKeywords))
                        .Select(k => k.SkillName)
                        .Distinct()
                        .Take(10) // Limit suggestions to 10
                        .ToList() ?? new List<string>()); // Ensure empty list if null
            }
            catch (Exception ex)
            {
                // Log the error for debugging purposes
                Console.WriteLine($"Πρόβλημα στην Ανάκτηση Ικανοτήτων από την Βάση: {ex.Message}");
                keywordsSuggestions = new List<string>();  // Fallback to empty list
            }
        }
        else
        {
            keywordsSuggestions.Clear();  // Clear suggestions for fewer than 1 character
        }

        // Trigger UI refresh
        StateHasChanged();
    }

    private void SelectKeywordsSuggestion(string suggestion)
    {
        if (!string.IsNullOrWhiteSpace(suggestion) && !selectedKeywords.Contains(suggestion))
        {
            selectedKeywords.Add(suggestion);  // Add to selected keywords
            searchKeywords = string.Empty;    // Clear input field
            keywordsSuggestions.Clear();      // Clear the suggestions list
        }
    }

    private void RemoveKeyword(string keyword)
    {
        if (selectedKeywords.Contains(keyword))
        {
            selectedKeywords.Remove(keyword);  // Remove from selected keywords
        }
    }



    private async Task DownloadStudentAttachmentAsCompanyInSearchForStudents(long studentId)
    {
        var student = await dbContext.Students
            .Where(s => s.Id == (int)studentId)
            .FirstOrDefaultAsync();

        if (student?.Attachment != null)
        {
            string fileName = $"{student.Name}_{student.Surname}_CV.pdf";
            string mimeType = "application/pdf";
            string base64Data = Convert.ToBase64String(student.Attachment);
            await JS.InvokeVoidAsync("downloadFile", fileName, mimeType, base64Data);
        }
    }

    private void LoadEventsForCalendar()
    {
        eventsForDate.Clear();
        eventsForDateForProfessors.Clear();
        int currentYear = currentMonth.Year;
        int currentMonthNumber = currentMonth.Month;

        // Loop through the events for the current month
        foreach (var eventItem in CompanyEventsToShowAtFrontPage)
        {
            if (eventItem.CompanyEventActiveDate.Year == currentYear &&
                eventItem.CompanyEventActiveDate.Month == currentMonthNumber)
            {
                int eventDay = eventItem.CompanyEventActiveDate.Day;
                if (!eventsForDate.ContainsKey(eventDay))
                {
                    eventsForDate[eventDay] = new List<CompanyEvent>();
                }
                eventsForDate[eventDay].Add(eventItem);
            }
        }


        //mpike gia ta professor events 22/1
        foreach (var eventProfessorItem in ProfessorEventsToShowAtFrontPage)
        {
            if (eventProfessorItem.ProfessorEventActiveDate.Year == currentYear &&
                eventProfessorItem.ProfessorEventActiveDate.Month == currentMonthNumber)
            {
                int eventDay = eventProfessorItem.ProfessorEventActiveDate.Day;
                if (!eventsForDateForProfessors.ContainsKey(eventDay))
                {
                    eventsForDateForProfessors[eventDay] = new List<ProfessorEvent>();
                }
                eventsForDateForProfessors[eventDay].Add(eventProfessorItem);
            }
        }

        // If highlighted day is not valid for this month, reset it
        if (highlightedDay != 0 && !eventsForDate.ContainsKey(highlightedDay))
        {
            highlightedDay = 0; // Reset it if there's no event for the day in the current month
        }

        // After loading events, ensure the selected and highlighted day is respected
        if (selectedDay != 0 && eventsForDate.ContainsKey(selectedDay))
        {
            highlightedDay = selectedDay; // Keep the selected day highlighted if valid
        }


        // GIA PROFESSORS EVENTS
        if (highlightedDay != 0 && !eventsForDateForProfessors.ContainsKey(highlightedDay))
        {
            highlightedDay = 0; // Reset it if there's no event for the day in the current month
        }

        // GIA PROFESSORS EVENTS
        if (selectedDay != 0 && eventsForDateForProfessors.ContainsKey(selectedDay))
        {
            highlightedDay = selectedDay; // Keep the selected day highlighted if valid
        }

        StateHasChanged();
    }



    private void ShowPreviousMonth()
    {
        currentMonth = currentMonth.AddMonths(-1);
        LoadEventsForCalendar();
        CalculateRemainingCells();  // Recalculate when changing the month
        StateHasChanged();

    }

    private void ShowNextMonth()
    {
        currentMonth = currentMonth.AddMonths(1);
        LoadEventsForCalendar();
        CalculateRemainingCells();  
        StateHasChanged();

    }

    private void OnDateClicked(DateTime clickedDate)
    {
        selectedDay = clickedDate.Day;  
        highlightedDay = selectedDay;
        selectedDate = clickedDate; // Make sure to set this for the modal display

        // Filter company events by status "Δημοσιευμένη" AND the specific date
        selectedDateEvents = dbContext.CompanyEvents
            .Include(e => e.Company)
            .Where(e => e.CompanyEventStatus == "Δημοσιευμένη" && 
                       e.CompanyEventActiveDate.Date == clickedDate.Date)
            .ToList();

        // Filter professor events by status "Δημοσιευμένη" AND the specific date
        selectedProfessorDateEvents = dbContext.ProfessorEvents
            .Include(e => e.Professor)
            .Where(e => e.ProfessorEventStatus == "Δημοσιευμένη" && 
                       e.ProfessorEventActiveDate.Date == clickedDate.Date)
            .ToList();

        // Only show modal if there are published events for this specific date
        if (selectedDateEvents.Any() || selectedProfessorDateEvents.Any())
        {
            isModalVisibleToShowEventsOnCalendarForEachClickedDay = true;
        }
        else
        {
            // Optional: Show a message that no events exist for this date
            // You could set a flag to display a message in your modal
        }
    
        StateHasChanged();
    }



    private void CloseModalShowingTheEventsOnCalendar()
    {
        isModalVisibleToShowEventsOnCalendarForEachClickedDay = false;
        selectedDateEvents.Clear();
        selectedProfessorDateEvents.Clear();


        // Re-render the calendar and highlight the selected day
        LoadEventsForCalendar();  // Reload events for the current month
        StateHasChanged();
    }



    private void ShowEventsForDate(List<CompanyEvent> events, List<ProfessorEvent> professorevents)
    {
        selectedDateEvents = events;
        selectedProfessorDateEvents = professorevents;

        isModalVisibleToShowEventsOnCalendarForEachClickedDay = true;
        StateHasChanged();

    }

    private void CalculateRemainingCells()
    {
        remainingCellsValue = totalCellsInGrid - (firstDayOfMonth + daysInCurrentMonth);
    }

    private void ChangeMonth(int monthChange)
    {
        currentMonth = currentMonth.AddMonths(monthChange);

        // Reset the highlighted day if it's invalid for the new month
        LoadEventsForCalendar();  // This will handle the resetting of highlightedDay
    }

    private async Task<List<CompanyEvent>> FetchCompanyEventsAsync()
    {
        var companyevents = await dbContext.CompanyEvents.AsNoTracking().ToListAsync(); 
        return companyevents;
    }

    private async Task<List<ProfessorEvent>> FetchProfessorEventsAsync()
    {
        var professorevents = await dbContext.ProfessorEvents.AsNoTracking().ToListAsync(); 
        return professorevents;
    }

    private async Task ShowInterestedStudentsInCompanyEvent(long eventRNG)
    {
        // Toggle the selectedEventIdForStudents to either show or hide the table
        if (selectedEventIdForStudents == eventRNG)
        {
            // Close the table by clearing the InterestedStudents
            selectedEventIdForStudents = null;
            InterestedStudents.Clear();
        }
        else
        {
            // Show the table and fetch the interested students for the selected event
            selectedEventIdForStudents = eventRNG;

            // Fetch the interested students with their details
            var interestedStudentsWithDetails = await dbContext.InterestInCompanyEvents
                .Include(x => x.StudentDetails)
                .Where(x => x.RNGForCompanyEventInterest == eventRNG)
                .Select(x => new 
                {
                    Application = x,
                    Student = dbContext.Students.FirstOrDefault(s => s.Student_UniqueID == x.StudentUniqueIDShowInterestForEvent)
                })
                .ToListAsync();

            // Convert to the expected type if needed
            InterestedStudents = interestedStudentsWithDetails.Select(x => x.Application).ToList();

            // ✅ Load full student data into cache (as in Job logic)
            var studentEmails = interestedStudentsWithDetails
                .Where(x => x.Student != null)
                .Select(x => x.Student.Email.ToLower())
                .Distinct()
                .ToList();

            var students = await dbContext.Students
                .Where(s => studentEmails.Contains(s.Email.ToLower()))
                .Select(s => new Student
                {
                    Id = s.Id,
                    Student_UniqueID = s.Student_UniqueID,
                    Email = s.Email,
                    Image = s.Image,
                    Name = s.Name,
                    Surname = s.Surname,
                    Telephone = s.Telephone,
                    PermanentAddress = s.PermanentAddress,
                    PermanentRegion = s.PermanentRegion,
                    PermanentTown = s.PermanentTown,
                    Attachment = s.Attachment,
                    LinkedInProfile = s.LinkedInProfile,
                    PersonalWebsite = s.PersonalWebsite,
                    Transport = s.Transport,
                    RegNumber = s.RegNumber,
                    University = s.University,
                    Department = s.Department,
                    EnrollmentDate = s.EnrollmentDate,
                    StudyYear = s.StudyYear,
                    LevelOfDegree = s.LevelOfDegree,
                    AreasOfExpertise = s.AreasOfExpertise,
                    Keywords = s.Keywords,
                    ExpectedGraduationDate = s.ExpectedGraduationDate,
                    CompletedECTS = s.CompletedECTS
                })
                .AsNoTracking()
                .ToListAsync();

            studentDataCache.Clear();
            foreach (var student in students)
            {
                studentDataCache[student.Email.ToLower()] = student;
            }

            Console.WriteLine($"Fetched {InterestedStudents.Count} students for Event RNG: {eventRNG}");
            Console.WriteLine($"Loaded {students.Count} student records into cache.");
        }

        StateHasChanged(); // Refresh the UI
    }


    private long? selectedEventIdForProfessorsWhenShowInterestForCompanyEvent;
    private async Task ShowInterestedProfessorsInCompanyEvent(long companyeventRNG)
    {
        if (selectedEventIdForProfessors == companyeventRNG)
        {
            // Close the table
            selectedEventIdForProfessors = null;
            filteredProfessorInterestForCompanyEvents.Clear();
        }
        else
        {
            // Show the table
            selectedEventIdForProfessors = companyeventRNG;
    
            // Load interests with professor details
            filteredProfessorInterestForCompanyEvents = await dbContext.InterestInCompanyEventsAsProfessor
                .Include(i => i.ProfessorDetails)
                .Where(x => x.RNGForCompanyEventInterestAsProfessor == companyeventRNG)
                .OrderByDescending(x => x.DateTimeProfessorShowInterestForCompanyEvent)
                .AsNoTracking()
                .ToListAsync();

            // Get distinct professor emails not already in cache
            var emailsToFetch = filteredProfessorInterestForCompanyEvents
                .Select(i => i.ProfessorEmailShowInterestForCompanyEvent)
                .Distinct()
                .Where(email => !professorDataCache.ContainsKey(email))
                .ToList();

            // Fetch all needed professors in one query
            if (emailsToFetch.Any())
            {
                var professors = await dbContext.Professors
                    .Where(p => emailsToFetch.Contains(p.ProfEmail))
                    .AsNoTracking()
                    .ToListAsync();

                // Add fetched professors to cache
                foreach (var professor in professors)
                {
                    professorDataCache[professor.ProfEmail] = professor;
                }
            }
        }
        StateHasChanged();
    }

    private async Task ShowInterestedStudentsInProfessorEvent(long professoreventRNG)
    {
        // Toggle the selectedEventIdForStudents to either show or hide the table
        if (selectedEventIdForStudentsWhenShowInterestForProfessorEvent == professoreventRNG)
        {
            // Close the table by clearing the InterestedStudents
            selectedEventIdForStudentsWhenShowInterestForProfessorEvent = null;
            InterestedStudentsForProfessorEvent.Clear();
            studentDataCache.Clear();
        }
        else
        {
            // Show the table and fetch the interested students for the selected event
            selectedEventIdForStudentsWhenShowInterestForProfessorEvent = professoreventRNG;

            // Fetch the interested students with their details
            var interestedStudentsWithDetails = await dbContext.InterestInProfessorEvents
                .Include(x => x.StudentDetails)
                .Where(x => x.RNGForProfessorEventInterest == professoreventRNG)
                .Select(x => new 
                {
                    Application = x,
                    Student = dbContext.Students.FirstOrDefault(s => s.Student_UniqueID == x.StudentUniqueIDShowInterestForEvent)
                })
                .ToListAsync();

            // Convert to the expected type if needed
            InterestedStudentsForProfessorEvent = interestedStudentsWithDetails.Select(x => x.Application).ToList();

            // Load full student data into cache
            var studentEmails = interestedStudentsWithDetails
                .Where(x => x.Student != null)
                .Select(x => x.Student.Email.ToLower())
                .Distinct()
                .ToList();

            var students = await dbContext.Students
                .Where(s => studentEmails.Contains(s.Email.ToLower()))
                .Select(s => new Student
                {
                    Id = s.Id,
                    Student_UniqueID = s.Student_UniqueID,
                    Email = s.Email,
                    Image = s.Image,
                    Name = s.Name,
                    Surname = s.Surname,
                    Telephone = s.Telephone,
                    PermanentAddress = s.PermanentAddress,
                    PermanentRegion = s.PermanentRegion,
                    PermanentTown = s.PermanentTown,
                    Attachment = s.Attachment,
                    LinkedInProfile = s.LinkedInProfile,
                    PersonalWebsite = s.PersonalWebsite,
                    Transport = s.Transport,
                    RegNumber = s.RegNumber,
                    University = s.University,
                    Department = s.Department,
                    EnrollmentDate = s.EnrollmentDate,
                    StudyYear = s.StudyYear,
                    LevelOfDegree = s.LevelOfDegree,
                    AreasOfExpertise = s.AreasOfExpertise,
                    Keywords = s.Keywords,
                    ExpectedGraduationDate = s.ExpectedGraduationDate,
                    CompletedECTS = s.CompletedECTS
                })
                .AsNoTracking()
                .ToListAsync();

            studentDataCache.Clear();
            foreach (var student in students)
            {
                studentDataCache[student.Email.ToLower()] = student;
            }

            Console.WriteLine($"Fetched {InterestedStudentsForProfessorEvent.Count} students for Event RNG: {professoreventRNG}");
            Console.WriteLine($"Loaded {students.Count} student records into cache.");
        }

        StateHasChanged(); // Refresh the UI
    }

    private async Task ShowStudentDetailsAtCompanyEventInterest(InterestInCompanyEvent application)
    {
        // === STUDENT LOOKUP ===
        var studentUniqueId = application.StudentUniqueIDShowInterestForEvent;
        selectedStudentFromCache = studentDataCache.Values
            .FirstOrDefault(s => s.Student_UniqueID == studentUniqueId);

        if (selectedStudentFromCache == null)
        {
            Console.WriteLine($"Student with ID {studentUniqueId} not found in cache - loading from DB");

            selectedStudentFromCache = await dbContext.Students
                .Where(s => s.Student_UniqueID == studentUniqueId)
                .Select(s => new Student {
                    Id = s.Id,
                    Student_UniqueID = s.Student_UniqueID,
                    Email = s.Email,
                    Image = s.Image,
                    Name = s.Name,
                    Surname = s.Surname,
                    Telephone = s.Telephone,
                    PermanentAddress = s.PermanentAddress,
                    PermanentRegion = s.PermanentRegion,
                    PermanentTown = s.PermanentTown,
                    Attachment = s.Attachment,
                    LinkedInProfile = s.LinkedInProfile,
                    PersonalWebsite = s.PersonalWebsite,
                    Transport = s.Transport,
                    RegNumber = s.RegNumber,
                    University = s.University,
                    Department = s.Department,
                    EnrollmentDate = s.EnrollmentDate,
                    StudyYear = s.StudyYear,
                    LevelOfDegree = s.LevelOfDegree,
                    AreasOfExpertise = s.AreasOfExpertise,
                    Keywords = s.Keywords
                })
                .FirstOrDefaultAsync();

            if (selectedStudentFromCache != null)
            {
                studentDataCache[selectedStudentFromCache.Email.ToLower()] = selectedStudentFromCache;
            }
        }

        // === COMPANY LOOKUP ===
        var companyUniqueId = application.CompanyUniqueIDWhereStudentShowedInterest;
        Company selectedCompanyFromCache = null;

        if (!string.IsNullOrEmpty(companyUniqueId))
        {
            companyDataCache.TryGetValue(companyUniqueId, out selectedCompanyFromCache);

            if (selectedCompanyFromCache == null)
            {
                Console.WriteLine($"Company with ID {companyUniqueId} not found in cache - loading from DB");

                selectedCompanyFromCache = await dbContext.Companies
                    .Where(c => c.Company_UniqueID == companyUniqueId)
                    .FirstOrDefaultAsync();

                if (selectedCompanyFromCache != null)
                {
                    companyDataCache[companyUniqueId] = selectedCompanyFromCache;
                }
            }
        }

        // === ASSIGN FINAL COMPOSITE OBJECT ===
        selectedStudentToShowDetailsForInterestinCompanyEvent = new InterestInCompanyEvent
        {
            Id = application.Id,
            CompanyEmailWhereStudentShowedInterest = application.CompanyEmailWhereStudentShowedInterest,
            CompanyUniqueIDWhereStudentShowedInterest = application.CompanyUniqueIDWhereStudentShowedInterest,
            StudentEmailShowInterestForEvent = application.StudentEmailShowInterestForEvent,
            StudentUniqueIDShowInterestForEvent = application.StudentUniqueIDShowInterestForEvent,
            RNGForCompanyEventInterest = application.RNGForCompanyEventInterest,
            RNGForCompanyEventInterest_HashedAsUniqueID = application.RNGForCompanyEventInterest_HashedAsUniqueID,
            DateTimeStudentShowInterest = application.DateTimeStudentShowInterest,
            StudentTransportNeedWhenShowInterestForCompanyEvent = application.StudentTransportNeedWhenShowInterestForCompanyEvent,
            StudentTransportChosenLocationWhenShowInterestForCompanyEvent = application.StudentTransportChosenLocationWhenShowInterestForCompanyEvent,
            CompanyEventStatusAtStudentSide = application.CompanyEventStatusAtStudentSide,
            CompanyEventStatusAtCompanySide = application.CompanyEventStatusAtCompanySide,

            StudentDetails = new InterestInCompanyEvent_StudentDetails
            {
                StudentEmailShowInterestForCompanyEvent = selectedStudentFromCache?.Email,
                StudentUniqueIDShowInterestForCompanyEvent = selectedStudentFromCache?.Student_UniqueID,
                DateTimeStudentShowInterestForCompanyEvent = application.DateTimeStudentShowInterest,
                RNGForCompanyEventShowInterestAsStudent_HashedAsUniqueID = application.RNGForCompanyEventInterest_HashedAsUniqueID
            },

            CompanyDetails = new InterestInCompanyEvent_CompanyDetails
            {
                CompanyEmailWhereStudentShowInterestForCompanyEvent = selectedCompanyFromCache?.CompanyEmail,
                CompanyUniqueIDWhereStudentShowInterestForCompanyEvent = selectedCompanyFromCache?.Company_UniqueID
            }
        };

        showModal = true;
        StateHasChanged();
    }


    private void CloseStudentDetailsModal()
    {
        showModal = false;
    }

    private bool IsValidEmailForCompanyJobs(string email)
    {
        if (string.IsNullOrWhiteSpace(email))
            return false;

        // Use simple regex for basic email validation
        return System.Text.RegularExpressions.Regex.IsMatch(email, 
            @"^[^@\s]+@[^@\s]+\.[^@\s]+$");
    }

    private bool IsValidEmailForProfessorInternships(string email)
    {
        if (string.IsNullOrWhiteSpace(email))
            return false;

        // Use simple regex for basic email validation
        return System.Text.RegularExpressions.Regex.IsMatch(email, 
            @"^[^@\s]+@[^@\s]+\.[^@\s]+$");
    }

    private bool IsValidPhoneNumber(string phoneNumber)
    {
        // Check if the input is null or empty
        if (string.IsNullOrWhiteSpace(phoneNumber))
            return false;

        // Ensure it contains exactly 10 digits
        return System.Text.RegularExpressions.Regex.IsMatch(phoneNumber, @"^\d{10}$");
    }

    private void ValidatePostalCode(ChangeEventArgs e)
    {
        var inputValue = e.Value?.ToString() ?? string.Empty;
        showErrorMessageforPostalCode = !IsValidPostalCodeForCompanyJobs(inputValue);
    }

    private bool IsValidPostalCodeForCompanyJobs(string postalCode)
    {
        // Ensure it contains exactly 5 digits
        return !string.IsNullOrWhiteSpace(postalCode) &&
               System.Text.RegularExpressions.Regex.IsMatch(postalCode, @"^\d{5}$");
    }



    private async Task HandleTemporarySaveProfessorEvent()
    {
        bool isConfirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML", new object[] { 
            "Είστε σίγουροι πως θέλετε να υποβάλλετε την <strong>Εκδήλωση</strong>;<br><br>" +
            "Η εκδήλωση θα καταχωρηθεί ως '<strong>Μη Δημοσιευμένη</strong>'."
        });

        if (!isConfirmed)
            return;

        await SaveProfessorEvent(false); 
    }

    private async Task HandlePublishSaveProfessorEvent()
    {
        bool isConfirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML", new object[] { 
            "Είστε σίγουροι πως θέλετε να υποβάλλετε την <strong>Εκδήλωση</strong>;<br><br>" +
            "Η εκδήλωση θα καταχωρηθεί ως '<strong>Δημοσιευμένη</strong>'."
        });

        if (!isConfirmed)
            return;

        await SaveProfessorEvent(true); 
    }


    private async Task SaveProfessorEvent(bool publishEvent)
    {
        try
        {
            // Reset error states
            showErrorMessageForUploadingProfessorEvent = true;
            isFormValidToSaveEventAsProfessor = false;

            // Validate required fields
            if (string.IsNullOrWhiteSpace(professorEvent.ProfessorEventType) ||
                string.IsNullOrWhiteSpace(professorEvent.ProfessorEventTitle) || 
                string.IsNullOrWhiteSpace(professorEvent.ProfessorEventDescription) || 
                professorEvent.ProfessorEventActiveDate.Date < DateTime.Today ||
                professorEvent.ProfessorEventTimeOnly == TimeOnly.MinValue ||
                IsTimeInRestrictedRangeWhenUploadEventAsCompany(professorEvent.ProfessorEventTimeOnly) || 
                string.IsNullOrWhiteSpace(professorEvent.ProfessorEventPerifereiaLocation) ||
                string.IsNullOrWhiteSpace(professorEvent.ProfessorEventDimosLocation) ||
                string.IsNullOrWhiteSpace(professorEvent.ProfessorEventPlaceLocation) ||
                string.IsNullOrWhiteSpace(professorEvent.ProfessorEventPostalCodeLocation) ||
                professorEvent.ProfessorEventOfferingTransportToEventLocation == null ||
                !SelectedAreasWhenUploadEventAsProfessor.Any())
            {
                return;
            }

            // Validate transport starting points if transport is offered
            if (professorEvent.ProfessorEventOfferingTransportToEventLocation == true && 
                string.IsNullOrWhiteSpace(professorEvent.ProfessorEventStartingPointLocationToTransportPeopleToEvent1))
            {
                return;
            }

            // Validate other organizer if visible
            if (professorEvent.ProfessorEventOtherOrganizerToBeVisible && 
                string.IsNullOrWhiteSpace(professorEvent.ProfessorEventOtherOrganizer))
            {
                return;
            }

            // All validations passed
            isFormValidToSaveEventAsProfessor = true;
            showErrorMessageForUploadingProfessorEvent = false;

            // Prepare data for saving
            professorEvent.ProfessorEventAreasOfInterest = string.Join(",", SelectedAreasWhenUploadEventAsProfessor.Select(a => a.AreaName));

            // Get or create professor information
            var professor = await dbContext.Professors
                .FirstOrDefaultAsync(p => p.ProfEmail == CurrentUserEmail) ?? new Professor();

            // Update professor details
            professor.ProfEmail = CurrentUserEmail;
            professor.ProfName = professorName;
            professor.ProfSurname = professorSurname;
            professor.ProfUniversity = professorUniversity;
            professor.ProfImage = professorImage;

            if (professor.Id == 0) // New professor
            {
                dbContext.Professors.Add(professor);
            }

            // Set event properties
            professorEvent.RNGForEventUploadedAsProfessor = new Random().NextInt64();
            professorEvent.RNGForEventUploadedAsProfessor_HashedAsUniqueID = HashingHelper.HashLong(professorEvent.RNGForEventUploadedAsProfessor);
            professorEvent.ProfessorEventStatus = publishEvent ? "Δημοσιευμένη" : "Μη Δημοσιευμένη";
            professorEvent.ProfessorEmailUsedToUploadEvent = CurrentUserEmail;
            professorEvent.ProfessorEventUploadedDate = DateTime.Now;
            professorEvent.ProfessorEventTime = professorEvent.ProfessorEventTimeOnly.ToTimeSpan();
            professorEvent.Professor = professor;

            if (dbContext.Entry(professorEvent).State == EntityState.Detached)
            {
                dbContext.ProfessorEvents.Add(professorEvent);
            }

            await dbContext.SaveChangesAsync();
        
            saveEventAsProfessorMessage = "Η εκδήλωση δημιουργήθηκε επιτυχώς";
            isSaveAnnouncementAsProfessorSuccessful = true;
            showSuccessMessage = true;
    
            // Refresh the page or navigate as needed
            NavigationManager.NavigateTo(NavigationManager.Uri, forceLoad: true);
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Σφάλμα κατά την αποθήκευση: {ex.Message}");
            Console.WriteLine($"Inner Exception: {ex.InnerException?.Message}");
            saveEventAsProfessorMessage = "Προέκυψε σφάλμα κατά την αποθήκευση. Παρακαλώ προσπαθήστε ξανά.";
            isSaveAnnouncementAsProfessorSuccessful = false;
            showSuccessMessage = false;
            showErrorMessageForUploadingProfessorEvent = true;
        }
    }

    private async Task ShowStudentDetailsAtProfessorEventInterest(InterestInProfessorEvent application)
    {
        // === STUDENT LOOKUP ===
        var studentUniqueId = application.StudentUniqueIDShowInterestForEvent;
        selectedStudentFromCache = studentDataCache.Values
            .FirstOrDefault(s => s.Student_UniqueID == studentUniqueId);

        if (selectedStudentFromCache == null)
        {
            Console.WriteLine($"Student with ID {studentUniqueId} not found in cache - loading from DB");

            selectedStudentFromCache = await dbContext.Students
                .Where(s => s.Student_UniqueID == studentUniqueId)
                .Select(s => new Student {
                    Id = s.Id,
                    Student_UniqueID = s.Student_UniqueID,
                    Email = s.Email,
                    Image = s.Image,
                    Name = s.Name,
                    Surname = s.Surname,
                    Telephone = s.Telephone,
                    PermanentAddress = s.PermanentAddress,
                    PermanentRegion = s.PermanentRegion,
                    PermanentTown = s.PermanentTown,
                    Attachment = s.Attachment,
                    LinkedInProfile = s.LinkedInProfile,
                    PersonalWebsite = s.PersonalWebsite,
                    Transport = s.Transport,
                    RegNumber = s.RegNumber,
                    University = s.University,
                    Department = s.Department,
                    EnrollmentDate = s.EnrollmentDate,
                    StudyYear = s.StudyYear,
                    LevelOfDegree = s.LevelOfDegree,
                    AreasOfExpertise = s.AreasOfExpertise,
                    Keywords = s.Keywords
                })
                .FirstOrDefaultAsync();

            if (selectedStudentFromCache != null)
            {
                studentDataCache[selectedStudentFromCache.Email.ToLower()] = selectedStudentFromCache;
            }
        }

        // === PROFESSOR LOOKUP ===
        var professorUniqueId = application.ProfessorUniqueIDWhereStudentShowedInterest;
        Professor selectedProfessorFromCache = null;

        if (!string.IsNullOrEmpty(professorUniqueId))
        {
            professorDataCache.TryGetValue(professorUniqueId, out selectedProfessorFromCache);

            if (selectedProfessorFromCache == null)
            {
                Console.WriteLine($"Professor with ID {professorUniqueId} not found in cache - loading from DB");

                selectedProfessorFromCache = await dbContext.Professors
                    .Where(p => p.Professor_UniqueID == professorUniqueId)
                    .FirstOrDefaultAsync();

                if (selectedProfessorFromCache != null)
                {
                    professorDataCache[professorUniqueId] = selectedProfessorFromCache;
                }
            }
        }

        // === ASSIGN FINAL COMPOSITE OBJECT ===
        selectedStudentToShowDetailsForInterestinProfessorEvent = new InterestInProfessorEvent
        {
            Id = application.Id,
            ProfessorEmailWhereStudentShowedInterest = application.ProfessorEmailWhereStudentShowedInterest,
            ProfessorUniqueIDWhereStudentShowedInterest = application.ProfessorUniqueIDWhereStudentShowedInterest,
            StudentEmailShowInterestForEvent = application.StudentEmailShowInterestForEvent,
            StudentUniqueIDShowInterestForEvent = application.StudentUniqueIDShowInterestForEvent,
            RNGForProfessorEventInterest = application.RNGForProfessorEventInterest,
            RNGForProfessorEventInterest_HashedAsUniqueID = application.RNGForProfessorEventInterest_HashedAsUniqueID,
            DateTimeStudentShowInterest = application.DateTimeStudentShowInterest,
            StudentTransportNeedWhenShowInterestForProfessorEvent = application.StudentTransportNeedWhenShowInterestForProfessorEvent,
            StudentTransportChosenLocationWhenShowInterestForProfessorEvent = application.StudentTransportChosenLocationWhenShowInterestForProfessorEvent,
            ProfessorEventStatusAtStudentSide = application.ProfessorEventStatusAtStudentSide,
            ProfessorEventStatusAtProfessorSide = application.ProfessorEventStatusAtProfessorSide,

            StudentDetails = new InterestInProfessorEvent_StudentDetails
            {
                StudentEmailShowInterestForProfessorEvent = selectedStudentFromCache?.Email,
                StudentUniqueIDShowInterestForProfessorEvent = selectedStudentFromCache?.Student_UniqueID,
                DateTimeStudentShowInterestForProfessorEvent = application.DateTimeStudentShowInterest,
                RNGForProfessorEventShowInterestAsStudent_HashedAsUniqueID = application.RNGForProfessorEventInterest_HashedAsUniqueID
            },

            ProfessorDetails = new InterestInProfessorEvent_ProfessorDetails
            {
                ProfessorEmailWhereStudentShowInterestForProfessorEvent = selectedProfessorFromCache?.ProfEmail,
                ProfessorUniqueIDWhereStudentShowInterestForProfessorEvent = selectedProfessorFromCache?.Professor_UniqueID
            }
        };

        showModalForStudentsAtProfessorEventInterest = true;
        StateHasChanged();
    }

    private void CloseStudentDetailsModalAtProfessorEventInterest()
    {
        showModalForStudentsAtProfessorEventInterest = false;
    }


    private async Task ToggleAndLoadCompanyAndProfessorEventsAsStudent()
    {
        isCompanyEventsVisibleToSeeAsStudent = !isCompanyEventsVisibleToSeeAsStudent;
        isProfessorEventsVisibleToSeeAsStudent = isCompanyEventsVisibleToSeeAsStudent;

        if (isCompanyEventsVisibleToSeeAsStudent)
        {
            // Load company events
            companyEventsToSeeAsStudent = await dbContext.CompanyEvents
                .Where(e => e.CompanyEventStatus == "Δημοσιευμένη")
                .ToListAsync();

            // Load professor events with their professor data included
            professorEventsToSeeAsStudent = await dbContext.ProfessorEvents
                .Include(e => e.Professor)  // Crucial - includes professor data
                .Where(e => e.ProfessorEventStatus == "Δημοσιευμένη")
                .ToListAsync();
        }
        else
        {
            // Clear the lists when toggling off
            companyEventsToSeeAsStudent = new List<CompanyEvent>();
            professorEventsToSeeAsStudent = new List<ProfessorEvent>();
        }
    }

    private void ToggleTransport(long rngForEventUploadedAsProfessor, object value)
    {
        bool isChecked = (bool)value;

        // Update transport need
        needsTransportForProfessorEvent[rngForEventUploadedAsProfessor] = isChecked;

        // If "Χρειάζομαι Μεταφορά" is unticked, remove the selected starting point entirely
        if (!isChecked)
        {
            selectedStartingPoint.Remove(rngForEventUploadedAsProfessor);
        }
    }



    private void CloseEventDetails()
    {
        selectedEvent = null; // Reset the selected event
    }

    private void ShowEventDetails(object eventDetails)
    {
        selectedEvent = eventDetails;
    }


    private void CloseModalForCompanyAndProfessorEventTitles()
    {
        selectedEvent = null; // Reset the selected event
        isModalVisibleToShowEventsOnCalendarForEachClickedDay = false;
        StateHasChanged(); // Refresh the modal content

    }

    private void CloseModal()
    {
        isModalVisibleToShowEventsOnCalendarForEachClickedDay = false;
        selectedEvent = null; // Reset any selected event
        StateHasChanged();
    }



    private DateTime ProfessorEventDate
    {
        get => _professorEventDate;
        set
        {
            _professorEventDate = value;
            CheckForExistingEventsAsProfessor();
        }
    }

    private void CheckForExistingEventsAsProfessor()
    {
        existingEventsCountToCheckAsProfessor = (eventsForDate.ContainsKey(ProfessorEventDate.Day) ? eventsForDate[ProfessorEventDate.Day].Count() : 0) + 
                                                (eventsForDateForProfessors.ContainsKey(ProfessorEventDate.Day) ? eventsForDateForProfessors[ProfessorEventDate.Day].Count() : 0);
    }

    private async Task LoadProfessorInterestsForCompanyEvents()
    {
        filteredProfessorInterestForCompanyEvents = await dbContext.InterestInCompanyEventsAsProfessor
            .Where(i => i.ProfessorEmailShowInterestForCompanyEvent == CurrentUserEmail)
            .ToListAsync();
    }

    private async Task<bool> ShowInterestInCompanyEventAsProfessor(CompanyEvent companyEvent)
    {
        // First ask for confirmation
        var confirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML", 
            $"Πρόκεται να δείξετε Ενδιαφέρον για την Εκδήλωση: {companyEvent.CompanyEventTitle} της εταιρείας {companyEvent.Company?.CompanyName}. Είστε σίγουρος/η;");
        if (!confirmed) return false;

        // Retrieve the latest event status
        var latestEvent = await dbContext.CompanyEvents
            .AsNoTracking()
            .Where(e => e.RNGForEventUploadedAsCompany == companyEvent.RNGForEventUploadedAsCompany)
            .Select(e => new { e.CompanyEventStatus })
            .FirstOrDefaultAsync();

        if (latestEvent == null || latestEvent.CompanyEventStatus != "Δημοσιευμένη")
        {
            await JS.InvokeVoidAsync("confirmActionWithHTML2", "Η Εκδήλωση έχει Αποδημοσιευτεί. Παρακαλώ δοκιμάστε αργότερα.");
            return false;
        }

        var professor = await GetProfessorDetails(CurrentUserEmail);
        if (professor == null)
        {
            await JS.InvokeVoidAsync("confirmActionWithHTML2", "Δεν βρέθηκαν στοιχεία καθηγητή.");
            return false;
        }

        var company = await GetCompanyDetails(companyEvent.CompanyEmailUsedToUploadEvent);
        if (company == null)
        {
            await JS.InvokeVoidAsync("confirmActionWithHTML2", "Δεν βρέθηκαν στοιχεία εταιρείας.");
            return false;
        }

        // Check for existing interest
        var existingInterest = await dbContext.InterestInCompanyEventsAsProfessor
            .FirstOrDefaultAsync(i => 
                i.ProfessorEmailShowInterestForCompanyEvent == professor.ProfEmail &&
                i.RNGForCompanyEventInterestAsProfessor == companyEvent.RNGForEventUploadedAsCompany);

        if (existingInterest != null)
        {
            await JS.InvokeVoidAsync("confirmActionWithHTML2", $"Έχετε ήδη δείξει ενδιαφέρον για: {companyEvent.CompanyEventTitle}!");
            return false;
        }

        using var transaction = await dbContext.Database.BeginTransactionAsync();
        try
        {
            // Create main interest record with details
            var interest = new InterestInCompanyEventAsProfessor
            {
                RNGForCompanyEventInterestAsProfessor = companyEvent.RNGForEventUploadedAsCompany,
                RNGForCompanyEventInterestAsProfessor_HashedAsUniqueID = companyEvent.RNGForEventUploadedAsCompany_HashedAsUniqueID,
                DateTimeProfessorShowInterestForCompanyEvent = DateTime.UtcNow,
                CompanyEventStatus_ShowInterestAsProfessor_AtCompanySide = "Προς Επεξεργασία",
                CompanyEventStatus_ShowInterestAsProfessor_AtProfessorSide = "Έχετε Δείξει Ενδιαφέρον",
                ProfessorEmailShowInterestForCompanyEvent = professor.ProfEmail,
                ProfessorUniqueIDShowInterestForCompanyEvent = professor.Professor_UniqueID,
                CompanyEmailWhereProfessorShowedInterest = companyEvent.CompanyEmailUsedToUploadEvent,
                CompanyUniqueIDWhereProfessorShowedInterest = company.Company_UniqueID,
        
                ProfessorDetails = new InterestInCompanyEventAsProfessor_ProfessorDetails
                {
                    ProfessorUniqueIDShowInterestForCompanyEvent = professor.Professor_UniqueID,
                    ProfessorEmailShowInterestForCompanyEvent = professor.ProfEmail,
                    DateTimeProfessorShowInterestForCompanyEvent = DateTime.UtcNow,
                    RNGForCompanyEventShowInterestAsProfessor_HashedAsUniqueID = companyEvent.RNGForEventUploadedAsCompany_HashedAsUniqueID
                },
        
                CompanyDetails = new InterestInCompanyEventAsProfessor_CompanyDetails
                {
                    CompanyUniqueIDWhereProfessorShowInterestForCompanyEvent = company.Company_UniqueID,
                    CompanyEmailWhereProfessorShowInterestForCompanyEvent = companyEvent.CompanyEmailUsedToUploadEvent
                }
            };

            dbContext.InterestInCompanyEventsAsProfessor.Add(interest);

            // Add platform action
            dbContext.PlatformActions.Add(new PlatformActions
            {
                UserRole_PerformedAction = "PROFESSOR",
                ForWhat_PerformedAction = "COMPANY_EVENT",
                HashedPositionRNG_PerformedAction = HashingHelper.HashLong(companyEvent.RNGForEventUploadedAsCompany),
                TypeOfAction_PerformedAction = "SHOW_INTEREST",
                DateTime_PerformedAction = DateTime.UtcNow
            });

            await dbContext.SaveChangesAsync();
            await transaction.CommitAsync();

            // Send emails
            try
            {
                await InternshipEmailService.SendConfirmationToProfessorForInterestInCompanyEvent(
                    professor.ProfEmail,
                    professor.ProfName,
                    professor.ProfSurname,
                    companyEvent.CompanyEventTitle,
                    company.CompanyName,
                    companyEvent.RNGForEventUploadedAsCompany_HashedAsUniqueID);

                await InternshipEmailService.SendNotificationToCompanyForProfessorInterestInEvent(
                    companyEvent.CompanyEmailUsedToUploadEvent,
                    company.CompanyName,
                    professor.ProfName,
                    professor.ProfSurname,
                    professor.ProfEmail,
                    professor.ProfWorkTelephone,
                    companyEvent.CompanyEventTitle,
                    companyEvent.RNGForEventUploadedAsCompany_HashedAsUniqueID);
            }
            catch (Exception ex)
            {
                Console.WriteLine($"Email error: {ex.Message}");
            }

            await JS.InvokeVoidAsync("confirmActionWithHTML2", 
                $"Η έκφραση ενδιαφέροντος για την εκδήλωση {companyEvent.CompanyEventTitle} υποβλήθηκε επιτυχώς!");
        }
        catch (Exception ex)
        {
            await transaction.RollbackAsync();
            Console.WriteLine($"Full error: {ex}");
            await JS.InvokeVoidAsync("confirmActionWithHTML2", 
                $"Σφάλμα κατά την υποβολή: {ex.InnerException?.Message ?? ex.Message}");
            return false;
        }

        NavigationManager.NavigateTo(NavigationManager.Uri, forceLoad: true);
        return false;
    }


    private async Task<bool> ShowInterestInProfessorEventAsCompany(ProfessorEvent professorEvent)
    {
        // First ask for confirmation - now using navigation property for professor name
        var confirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML", 
            $"Πρόκεται να δείξετε Ενδιαφέρον για την Εκδήλωση: {professorEvent.ProfessorEventTitle} του καθηγητή {professorEvent.Professor?.ProfName} {professorEvent.Professor?.ProfSurname}. Είστε σίγουρος/η;");
        if (!confirmed) return false;

        // Retrieve the latest event status with professor included
        var latestEvent = await dbContext.ProfessorEvents
            .Include(e => e.Professor)
            .AsNoTracking()
            .Where(e => e.RNGForEventUploadedAsProfessor == professorEvent.RNGForEventUploadedAsProfessor)
            .Select(e => new { e.ProfessorEventStatus })
            .FirstOrDefaultAsync();

        if (latestEvent == null || latestEvent.ProfessorEventStatus != "Δημοσιευμένη")
        {
            await JS.InvokeVoidAsync("confirmActionWithHTML2", "Η Εκδήλωση έχει Αποδημοσιευτεί. Παρακαλώ δοκιμάστε αργότερα.");
            return false;
        }

        var company = await GetCompanyDetails(CurrentUserEmail);
        if (company == null)
        {
            await JS.InvokeVoidAsync("confirmActionWithHTML2", "Δεν βρέθηκαν στοιχεία εταιρείας.");
            return false;
        }

        // Get professor from navigation property or fall back to query
        var professor = professorEvent.Professor ?? await dbContext.Professors
            .FirstOrDefaultAsync(p => p.ProfEmail == professorEvent.ProfessorEmailUsedToUploadEvent);

        if (professor == null)
        {
            await JS.InvokeVoidAsync("confirmActionWithHTML2", "Δεν βρέθηκαν στοιχεία καθηγητή.");
            return false;
        }

        // Check for existing interest
        var existingInterest = await dbContext.InterestInProfessorEventsAsCompany
            .FirstOrDefaultAsync(i => 
                i.CompanyEmailShowInterestForProfessorEvent == company.CompanyEmail &&
                i.RNGForProfessorEventInterestAsCompany == professorEvent.RNGForEventUploadedAsProfessor);

        if (existingInterest != null)
        {
            await JS.InvokeVoidAsync("confirmActionWithHTML2", $"Έχετε ήδη δείξει ενδιαφέρον για: {professorEvent.ProfessorEventTitle}!");
            return false;
        }

        if (!numberOfCompanyPeopleInputWhenCompanyShowsInterestInProfessorEvent.TryGetValue(professorEvent.RNGForEventUploadedAsProfessor, out var numberOfPeople))
        {
            await ShowAlert("Παρακαλώ επιλέξτε αριθμό ατόμων πριν δείξετε ενδιαφέρον.");
            return false;
        }

        using var transaction = await dbContext.Database.BeginTransactionAsync();
        try
        {
            // Create main interest record with details
            var interest = new InterestInProfessorEventAsCompany
            {
                RNGForProfessorEventInterestAsCompany = professorEvent.RNGForEventUploadedAsProfessor,
                RNGForProfessorEventInterestAsCompany_HashedAsUniqueID = professorEvent.RNGForEventUploadedAsProfessor_HashedAsUniqueID,
                DateTimeCompanyShowInterestForProfessorEvent = DateTime.UtcNow,
                ProfessorEventStatus_ShowInterestAsCompany_AtCompanySide = "Έχετε Δείξει Ενδιαφέρον",
                ProfessorEventStatus_ShowInterestAsCompany_AtProfessorSide = "Προς Επεξεργασία",
                ProfessorEmailWhereCompanyShowedInterest = professorEvent.ProfessorEmailUsedToUploadEvent, // Updated to use foreign key
                ProfessorUniqueIDWhereCompanyShowedInterest = professor.Professor_UniqueID,
                CompanyEmailShowInterestForProfessorEvent = company.CompanyEmail,
                CompanyUniqueIDShowInterestForProfessorEvent = company.Company_UniqueID,
                CompanyNumberOfPeopleToShowUpWhenShowInterestForProfessorEvent = numberOfPeople.ToString(),
    
                CompanyDetails = new InterestInProfessorEventAsCompany_CompanyDetails
                {
                    CompanyUniqueIDShowInterestForProfessorEvent = company.Company_UniqueID,
                    CompanyEmailShowInterestForProfessorEvent = company.CompanyEmail,
                    DateTimeCompanyShowInterestForProfessorEvent = DateTime.UtcNow,
                    RNGForProfessorEventShowInterestAsCompany_HashedAsUniqueID = professorEvent.RNGForEventUploadedAsProfessor_HashedAsUniqueID
                },
    
                ProfessorDetails = new InterestInProfessorEventAsCompany_ProfessorDetails
                {
                    ProfessorUniqueIDWhereCompanyShowInterestForProfessorEvent = professor.Professor_UniqueID,
                    ProfessorEmailWhereCompanyShowInterestForProfessorEvent = professorEvent.ProfessorEmailUsedToUploadEvent // Updated to use foreign key
                }
            };

            dbContext.InterestInProfessorEventsAsCompany.Add(interest);

            // Add platform action
            dbContext.PlatformActions.Add(new PlatformActions
            {
                UserRole_PerformedAction = "COMPANY",
                ForWhat_PerformedAction = "PROFESSOR_EVENT",
                HashedPositionRNG_PerformedAction = HashingHelper.HashLong(professorEvent.RNGForEventUploadedAsProfessor),
                TypeOfAction_PerformedAction = "SHOW_INTEREST",
                DateTime_PerformedAction = DateTime.UtcNow
            });

            await dbContext.SaveChangesAsync();
            await transaction.CommitAsync();

            // Send emails - updated to use professor from navigation property
            try
            {
                await InternshipEmailService.SendConfirmationToCompanyForInterestInProfessorEvent(
                    company.CompanyEmail,
                    company.CompanyName,
                    professorEvent.ProfessorEventTitle,
                    professor.ProfName,
                    professor.ProfSurname,
                    professorEvent.RNGForEventUploadedAsProfessor_HashedAsUniqueID,
                    numberOfPeople);

                await InternshipEmailService.SendNotificationToProfessorForCompanyInterestInEvent(
                    professor.ProfEmail,
                    professor.ProfName,
                    professor.ProfSurname,
                    company.CompanyName,
                    company.CompanyEmail,
                    company.CompanyTelephone,
                    professorEvent.ProfessorEventTitle,
                    professorEvent.RNGForEventUploadedAsProfessor_HashedAsUniqueID,
                    numberOfPeople);
            }
            catch (Exception ex)
            {
                Console.WriteLine($"Email error: {ex.Message}");
            }

            await JS.InvokeVoidAsync("confirmActionWithHTML2", 
                $"Η έκφραση ενδιαφέροντος για την εκδήλωση {professorEvent.ProfessorEventTitle} υποβλήθηκε επιτυχώς!");
        }
        catch (Exception ex)
        {
            await transaction.RollbackAsync();
            Console.WriteLine($"Full error: {ex}");
            await JS.InvokeVoidAsync("confirmActionWithHTML2", 
                $"Σφάλμα κατά την υποβολή: {ex.InnerException?.Message ?? ex.Message}");
            return false;
        }

        NavigationManager.NavigateTo(NavigationManager.Uri, forceLoad: true);
        return false;
    }

    private int GetOrAddNumberOfPeople(long eventId)
    {
        if (!numberOfCompanyPeopleInputWhenCompanyShowsInterestInProfessorEvent.ContainsKey(eventId))
        {
            numberOfCompanyPeopleInputWhenCompanyShowsInterestInProfessorEvent[eventId] = 1; // Default value
        }
        return numberOfCompanyPeopleInputWhenCompanyShowsInterestInProfessorEvent[eventId];
    }

    private void SetNumberOfPeople(long eventId, int value)
    {
        if (numberOfCompanyPeopleInputWhenCompanyShowsInterestInProfessorEvent.ContainsKey(eventId))
        {
            numberOfCompanyPeopleInputWhenCompanyShowsInterestInProfessorEvent[eventId] = value;
        }
        else
        {
            numberOfCompanyPeopleInputWhenCompanyShowsInterestInProfessorEvent.Add(eventId, value);
        }
    }


    private async Task HandleFileUploadForProfessorInternships(InputFileChangeEventArgs e)
    {
        var file = e.File;
        if (file != null && file.ContentType == "application/pdf")
        {
            using var ms = new MemoryStream();
            await file.OpenReadStream().CopyToAsync(ms); // Copy file stream to memory stream
            professorInternship.ProfessorInternshipAttachment = ms.ToArray(); // Convert memory stream to byte array
        }
    }

    private async Task SaveProfessorInternship(bool isPublished)
    {
        Console.WriteLine($"Validation check - Title: {professorInternship.ProfessorInternshipTitle}");
        Console.WriteLine($"Validation check - Type: {professorInternship.ProfessorInternshipType}");
        Console.WriteLine($"Validation check - ESPA: {professorInternship.ProfessorInternshipESPA}");
        Console.WriteLine($"Validation check - ContactPerson: {professorInternship.ProfessorInternshipContactPerson}");
        Console.WriteLine($"Validation check - Description: {professorInternship.ProfessorInternshipDescription}");
        Console.WriteLine($"Validation check - ActivePeriod: {professorInternship.ProfessorInternshipActivePeriod} (Today: {DateTime.Today})");
        Console.WriteLine($"Validation check - FinishEstimation: {professorInternship.ProfessorInternshipFinishEstimation} (Today: {DateTime.Today})");
        Console.WriteLine($"Validation check - SelectedAreas count: {SelectedAreasWhenUploadInternshipAsProfessor.Count}");
        Console.WriteLine($"Validation check - Email: {professorInternship.ProfessorEmailUsedToUploadInternship} (Valid: {IsValidEmailForProfessorInternships(professorInternship.ProfessorEmailUsedToUploadInternship)})");
        Console.WriteLine($"Validation check - Region: {professorInternship.ProfessorInternshipPerifereiaLocation}");
        Console.WriteLine($"Validation check - Town: {professorInternship.ProfessorInternshipDimosLocation}");

        try
        {
            if (string.IsNullOrWhiteSpace(professorInternship.ProfessorInternshipTitle) ||
                string.IsNullOrWhiteSpace(professorInternship.ProfessorInternshipType) ||
                string.IsNullOrWhiteSpace(professorInternship.ProfessorInternshipESPA) ||
                string.IsNullOrWhiteSpace(professorInternship.ProfessorInternshipContactPerson) ||
                string.IsNullOrWhiteSpace(professorInternship.ProfessorInternshipDescription) ||
                string.IsNullOrWhiteSpace(professorInternship.ProfessorInternshipPerifereiaLocation) ||
                string.IsNullOrWhiteSpace(professorInternship.ProfessorInternshipDimosLocation) ||
                !IsValidEmailForProfessorInternships(professorInternship.ProfessorEmailUsedToUploadInternship) ||
                professorInternship.ProfessorInternshipActivePeriod.Date < DateTime.Today || 
                professorInternship.ProfessorInternshipFinishEstimation.Date < DateTime.Today ||
                !SelectedAreasWhenUploadInternshipAsProfessor.Any())
            {
                showErrorMessage = true;
                Console.WriteLine("Validation failed: Missing fields or invalid date.");
                return;
            }

            // Populate professorInternship with form data
            professorInternship.RNGForInternshipUploadedAsProfessor = new Random().NextInt64(); // Updated property
            professorInternship.RNGForInternshipUploadedAsProfessor_HashedAsUniqueID = HashingHelper.HashLong(professorInternship.RNGForInternshipUploadedAsProfessor); // Updated property
            professorInternship.ProfessorUploadedInternshipStatus = isPublished ? "Δημοσιευμένη" : "Μη Δημοσιευμένη";
            professorInternship.ProfessorInternshipUploadDate = DateTime.Now;
            professorInternship.ProfessorInternshipAreas = string.Join(",", SelectedAreasWhenUploadInternshipAsProfessor.Select(a => a.AreaName));


            // Set EKPA supervisor (if applicable)
            if (selectedCompanyId.HasValue)
            {
                var company = await dbContext.Companies
                    .FirstOrDefaultAsync(p => p.Id == selectedCompanyId.Value);

                professorInternship.ProfessorInternshipEKPASupervisor = company?.CompanyName ?? "Unknown Company";
            }
            else
            {
                professorInternship.ProfessorInternshipEKPASupervisor = "Χωρίς Προτίμηση";
            }

            Console.WriteLine($"Saving internship: {professorInternship.ProfessorInternshipTitle}, Status: {professorInternship.ProfessorUploadedInternshipStatus}");

            // Save to database
            dbContext.ProfessorInternships.Add(professorInternship);
            await dbContext.SaveChangesAsync();

            // Show success message
            showSuccessMessage = true;
            showErrorMessage = false;

            // Reset form and update UI
            professorInternship = new ProfessorInternship();
            SelectedAreasWhenUploadInternshipAsProfessor.Clear();
            StateHasChanged();
            NavigationManager.NavigateTo(NavigationManager.Uri, forceLoad: true);
        }
        catch (Exception ex)
        {
            showSuccessMessage = false;
            showErrorMessage = true;
            Console.WriteLine($"Error uploading professor internship: {ex.Message}");
            await JS.InvokeVoidAsync("alert", $"Error saving internship: {ex.Message}");
        }
    }



    private async Task HandleSaveClickToSaveProfessorInternship()
    {
        // Show custom confirmation dialog with HTML styling
        bool isConfirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML", new object[] { 
            "Είστε σίγουροι πως θέλετε να υποβάλλετε <strong>Νέα Θέση Πρακτικής Άσκησης</strong>;<br><br>" +
            "Η Θέση θα καταχωρηθεί ως '<strong>Μη Δημοσιευμένη</strong>' στο Ιστορικό Θέσεων Πρακτικής Άσκησης.<br><br>" +
            "<strong style='color: red;'>Αν επιθυμείτε να την Δημοσιεύσετε, απαιτούνται επιπλέον ενέργειες!</strong>"
        });

        if (!isConfirmed)
            return;

        // Save as "Μη Δημοσιευμένη"
        professorInternship.ProfessorUploadedInternshipStatus = "Μη Δημοσιευμένη";

        // Pass 'false' to indicate it's not published
        await SaveProfessorInternship(false);
    }


    private async Task HandlePublishClickToSaveProfessorInternship()
    {
        // Show custom confirmation dialog with HTML styling
        bool isConfirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML", new object[] { 
            "Είστε σίγουροι πως θέλετε να υποβάλλετε <strong>Νέα Θέση Πρακτικής Άσκησης</strong>;<br><br>" +
            "Η Θέση θα καταχωρηθεί ως '<strong>Δημοσιευμένη</strong>' στο Ιστορικό Θέσεων Πρακτικής Άσκησης.<br><br>" +
            "<strong style='color: red;'>Αν επιθυμείτε να την Αποδημοσιεύσετε, απαιτούνται επιπλέον ενέργειες!</strong>"
        });

        if (!isConfirmed)
            return;

        // Save as "Δημοσιευμένη"
        professorInternship.ProfessorUploadedInternshipStatus = "Δημοσιευμένη";

        // Pass 'true' to indicate it's published
        await SaveProfessorInternship(true);
    }


    private CompanyInternship ConvertToCompanyInternship(AllInternships internship)
    {
        return new CompanyInternship
        {
            RNGForInternshipUploadedAsCompany = internship.RNGForCompanyInternship, // Updated property
            CompanyInternshipTitle = internship.InternshipTitle,
            CompanyInternshipType = internship.InternshipType,
            CompanyEmailUsedToUploadInternship = internship.CompanyEmail, // Updated property
            RNGForInternshipUploadedAsCompany_HashedAsUniqueID = internship.RNGForCompanyInternship_HashedAsUniqueID, // Updated property
            Company = new Company { CompanyName = internship.CompanyName } // Set via navigation property
        };
    }

    private ProfessorInternship ConvertToProfessorInternship(AllInternships internship)
    {
        return new ProfessorInternship
        {
            RNGForInternshipUploadedAsProfessor = internship.RNGForProfessorInternship,
            ProfessorInternshipTitle = internship.InternshipTitle,
            ProfessorInternshipType = internship.InternshipType,
            ProfessorEmailUsedToUploadInternship = internship.ProfessorEmail,
            RNGForInternshipUploadedAsProfessor_HashedAsUniqueID = internship.RNGForProfessorInternship_HashedAsUniqueID,
            Professor = new Professor { ProfName = internship.ProfessorName } // Set via navigation property

        };
    }

    private async Task ShowCompanyDetailsInThesisCompanyName_StudentThesisApplications(string companyEmail)
    {
        try
        {
            // First check if we already have the company details in cache
            if (companyDataCache.TryGetValue(companyEmail, out var cachedCompany))
            {
                selectedCompanyDetails_ThesisStudentApplicationsToShow = cachedCompany;
            }
            else
            {
                // Fetch the company details from the database using email (more reliable than name)
                selectedCompanyDetails_ThesisStudentApplicationsToShow = await dbContext.Companies
                    .FirstOrDefaultAsync(c => c.CompanyEmail == companyEmail);

                // Add to cache if found
                if (selectedCompanyDetails_ThesisStudentApplicationsToShow != null)
                { 
                    companyDataCache[companyEmail] = selectedCompanyDetails_ThesisStudentApplicationsToShow;
                }
            }

            if (selectedCompanyDetails_ThesisStudentApplicationsToShow != null)
            {
                isModalOpenToSeeCompanyDetails_ThesisStudentApplicationsToShow = true;
                StateHasChanged();
            }
            else
            {
                await JS.InvokeVoidAsync("alert", "Δεν βρέθηκαν στοιχεία εταιρείας");
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading company details: {ex.Message}");
            await JS.InvokeVoidAsync("alert", "Σφάλμα φόρτωσης στοιχείων εταιρείας");
        }
    }

    private void CloseCompanyDetailsModal_StudentThesisApplications()
    {
        isModalOpenToSeeCompanyDetails_ThesisStudentApplicationsToShow = false;
        StateHasChanged();
    }

    private async Task ShowProfessorDetailsInThesisProfessorName_StudentThesisApplications(string professorEmail)
    {
        try
        {
            // First check if we already have the professor details in cache
            if (professorDataCache.TryGetValue(professorEmail, out var cachedProfessor))
            {
                selectedProfessorDetails_ThesisStudentApplicationsToShow = cachedProfessor;
            }
            else
            {
                // Fetch the professor details from the database using email (more reliable than name)
                selectedProfessorDetails_ThesisStudentApplicationsToShow = await dbContext.Professors
                    .FirstOrDefaultAsync(p => p.ProfEmail == professorEmail);

                // Add to cache if found
                if (selectedProfessorDetails_ThesisStudentApplicationsToShow != null)
                { 
                    professorDataCache[professorEmail] = selectedProfessorDetails_ThesisStudentApplicationsToShow;
                }
            }

            if (selectedProfessorDetails_ThesisStudentApplicationsToShow != null)
            {
                isModalOpenToSeeProfessorDetails_ThesisStudentApplicationsToShow = true;
                StateHasChanged();
            }
            else
            {
                await JS.InvokeVoidAsync("alert", "Δεν βρέθηκαν στοιχεία καθηγητή");
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading professor details: {ex.Message}");
            await JS.InvokeVoidAsync("alert", "Σφάλμα φόρτωσης στοιχείων καθηγητή");
        }
    }


    private void CloseProfessorDetailsModal_StudentThesisApplications()
    {
        isModalOpenToSeeProfessorDetails_ThesisStudentApplicationsToShow = false;
        StateHasChanged();
    }

    private void CloseProfessorDetailsModal_StudentInternshipApplications()
    {
        isProfessorDetailsModalVisible_StudentInternshipApplicationsShow = false;
        StateHasChanged();
    }

    private async Task ShowCompanyThesisDetailsModal_StudentThesisApplications(long thesisRNG)
    {
        // Fetch the company thesis details asynchronously
        selectedCompanyThesisDetails_ThesisStudentApplicationsToShow = await dbContext.CompanyTheses
            .FirstOrDefaultAsync(t => t.RNGForThesisUploadedAsCompany == thesisRNG);

        if (selectedCompanyThesisDetails_ThesisStudentApplicationsToShow != null)
        {
            // Open the modal if the thesis details are found
            isModalOpenToSeeCompanyThesisDetails_ThesisStudentApplicationsToShow = true;
            StateHasChanged(); // Update the UI
        }
        else
        {
            // Show an alert if no thesis details are found
            await JS.InvokeVoidAsync("confirmActionWithHTML2", "Δεν μπορούν να εμφανιστούν οι λεπτομέρειες της Πτυχιακής. <span style='color:darkred;'>Η Πτυχιακή Δεν Είναι Πλέον Διαθέσιμη από τον Φορέα</span>");
        }
    }

    private void CloseCompanyThesisDetailsModal_StudentThesisApplications()
    {
        // Close the modal and reset the thesis details
        isModalOpenToSeeCompanyThesisDetails_ThesisStudentApplicationsToShow = false;
        StateHasChanged(); // Update the UI
    }

    private async Task ShowProfessorThesisDetailsModal_StudentThesisApplications(long thesisRNG)
    {
        // Fetch the professor thesis details asynchronously
        selectedProfessorThesisDetails_ThesisStudentApplicationsToShow = await dbContext.ProfessorTheses
            .FirstOrDefaultAsync(t => t.RNGForThesisUploaded == thesisRNG);

        if (selectedProfessorThesisDetails_ThesisStudentApplicationsToShow != null)
        {
            // Open the modal if the thesis details are found
            isModalOpenToSeeProfessorThesisDetails_ThesisStudentApplicationsToShow = true;
            StateHasChanged(); // Update the UI
        }
        else
        {
            // Show an alert if no thesis details are found
            await JS.InvokeVoidAsync("alert", "Professor thesis details not found.");
        }
    }

    private void CloseProfessorThesisDetailsModal_StudentThesisApplications()
    {
        isModalOpenToSeeProfessorThesisDetails_ThesisStudentApplicationsToShow = false;
        StateHasChanged(); 
    }

    private void CloseCompanyThesisEditModal()
    {
        isModalVisibleToEditCompanyThesisDetails = false;
    }

    private async Task SaveEditedCompanyThesis()
    {
        try
        {
            // Check if required fields are filled
            if (string.IsNullOrWhiteSpace(selectedCompanyThesis.CompanyThesisTitle) ||
                string.IsNullOrWhiteSpace(selectedCompanyThesis.CompanyThesisDescriptionsUploaded))
            {
                showSuccessMessage = false;
                showErrorMessage = true;
                return; // Prevent saving if required fields are missing
            }

            // Ensure SelectedAreasToEditForCompanyThesis contains all checked areas (even if no changes were made)
            if (SelectedAreasToEditForCompanyThesis == null || !SelectedAreasToEditForCompanyThesis.Any())
            {
                var currentAreas = selectedCompanyThesis.CompanyThesisAreasUpload.Split(",").ToList();
                SelectedAreasToEditForCompanyThesis = Areas
                    .Where(area => currentAreas.Contains(area.AreaName)) // Set the areas to the ones already selected
                    .ToList();
            }

            // Ensure SelectedSkillsToEditForCompanyThesis contains all checked skills (even if no changes were made)
            if (SelectedSkillsToEditForCompanyThesis == null || !SelectedSkillsToEditForCompanyThesis.Any())
            {
                var currentSkills = selectedCompanyThesis.CompanyThesisSkillsNeeded.Split(",").ToList();
                SelectedSkillsToEditForCompanyThesis = Skills
                    .Where(skill => currentSkills.Contains(skill.SkillName)) // Set the skills to the ones already selected
                    .ToList();
            }

            // Convert the selected areas to a comma-separated string
            selectedCompanyThesis.CompanyThesisAreasUpload = string.Join(",", SelectedAreasToEditForCompanyThesis.Select(area => area.AreaName));

            // Convert the selected skills to a comma-separated string
            selectedCompanyThesis.CompanyThesisSkillsNeeded = string.Join(",", SelectedSkillsToEditForCompanyThesis.Select(skill => skill.SkillName));

            // Find and update the thesis in the database
            var thesisToUpdate = await dbContext.CompanyTheses.FindAsync(selectedCompanyThesis.Id);
            if (thesisToUpdate != null)
            {
                thesisToUpdate.CompanyThesisTitle = selectedCompanyThesis.CompanyThesisTitle;
                thesisToUpdate.CompanyThesisCompanySupervisorFullName = selectedCompanyThesis.CompanyThesisCompanySupervisorFullName;
                thesisToUpdate.CompanyThesisDescriptionsUploaded = selectedCompanyThesis.CompanyThesisDescriptionsUploaded;
                thesisToUpdate.CompanyThesisAreasUpload = selectedCompanyThesis.CompanyThesisAreasUpload;
                thesisToUpdate.CompanyThesisSkillsNeeded = selectedCompanyThesis.CompanyThesisSkillsNeeded;
                thesisToUpdate.CompanyThesisDepartment = selectedCompanyThesis.CompanyThesisDepartment;
                thesisToUpdate.CompanyThesisStartingDate = selectedCompanyThesis.CompanyThesisStartingDate;
                thesisToUpdate.CompanyThesisContactPersonEmail = selectedCompanyThesis.CompanyThesisContactPersonEmail;
                thesisToUpdate.CompanyThesisContactPersonTelephone = selectedCompanyThesis.CompanyThesisContactPersonTelephone;

                // Update timestamp and count
                thesisToUpdate.CompanyThesisUpdateDateTime = DateTime.Now;
                thesisToUpdate.CompanyThesisTimesUpdated += 1;

                await dbContext.SaveChangesAsync();
                showSuccessMessage = true;
                showErrorMessage = false;
            }
            else
            {
                showSuccessMessage = false;
                showErrorMessage = true;
            }
        }
        catch (Exception ex)
        {
            showSuccessMessage = false;
            showErrorMessage = true;
            Console.Error.WriteLine($"Error saving company thesis: {ex.Message}");
        }
        finally
        {
            isModalVisibleToEditCompanyThesisDetails = false;
            StateHasChanged();
        }
    }



    private async Task FilterThesisApplications(ChangeEventArgs e)
    {

        filterValue = e.Value?.ToString() ?? "all"; // Ensure "all" is the default

        if (filterValue == "company")
        {
            showCompanyThesisApplications = true;
            showProfessorThesisApplications = false;
        }
        else if (filterValue == "professor")
        {
            showCompanyThesisApplications = false;
            showProfessorThesisApplications = true;
        }
        else
        {
            showCompanyThesisApplications = true;
            showProfessorThesisApplications = true;
        }

        await Task.Delay(1000); // Simulate loading delay

        StateHasChanged(); // Update UI
    }

    private async Task OnFilterChange(ChangeEventArgs e)
    {
        // Update the selected filter value
        selectedThesisFilter = e.Value.ToString();
    
        // Check dropdown state
        if (dropdownState == "All")
        {
            // Show all data, no filtering by professor name
            await SearchThesisApplicationsAsStudent(); // Assuming this method fetches all data
        }
        else
        {
            // Show only filtered data (e.g., professor name or other criteria)
            await FilterThesisApplicationsToSearchAsStudent();
        }
    }


    private async Task FilterThesisApplicationsToSearchAsStudent()
    {
        var filteredTheses = sumUpThesesFromBothCompanyAndProfessor
            ?.Where(thesis =>
                (selectedThesisFilter == "company" && thesis.CompanyThesisStatus == "Δημοσιευμένη") ||
                (selectedThesisFilter == "professor" && thesis.ProfessorThesisStatus == "Δημοσιευμένη") ||
                selectedThesisFilter == "all" &&
                (thesis.CompanyThesisStatus == "Δημοσιευμένη" || thesis.ProfessorThesisStatus == "Δημοσιευμένη"))
            .ToList();

        publishedTheses = filteredTheses;

        // Optionally log the filtered count
        Console.WriteLine($"Filtered theses count: {publishedTheses.Count}");

        await Task.Delay(1000); // Optional delay to simulate async loading
        StateHasChanged(); // Trigger UI update
    }


    private int currentPageForThesisToSee = 1;
    private int pageSizeForThesisToSee = 3; // Show only 3 thesis per page
    private int totalThesisCountForThesisToSee = 4; // For example, set to 4 total thesis
    private int totalPagesForThesisToSee = 1; // Initialize to 1 to avoid divide by zero error

    // Method to set the thesis count and calculate total pages
    private void SetTotalThesisCount(int count)
    {
        totalThesisCountForThesisToSee = count;
        totalPagesForThesisToSee = (int)Math.Ceiling((double)totalThesisCountForThesisToSee / pageSizeForThesisToSee);
    }

    private bool IsPreviousDisabled => currentPageForThesisToSee == 1;
    private bool IsNextDisabled => currentPageForThesisToSee >= totalPagesForThesisToSee; // Disable if on the last page

    private void PreviousPageForThesisToSee()
    {
        if (currentPageForThesisToSee > 1)
        {
            currentPageForThesisToSee--;
        }
    }

    private void NextPageForThesisToSee()
    {
        if (currentPageForThesisToSee < totalPagesForThesisToSee)
        {
            currentPageForThesisToSee++;
        }
    }

    private void UpdatePagination()
    {
        totalPagesForThesisToSee = (int)Math.Ceiling((double)totalThesisCountForThesisToSee / pageSizeForThesisToSee);
        StateHasChanged(); // Triggers a re-render to apply changes
    }




    private string GetThesisRowColor(object thesis)
    {
        if (thesis is CompanyThesisApplied companyThesis)
        {
            return companyThesis.CompanyThesisStatusAppliedAtStudentSide switch
            {
                "Επιτυχής" => "lightgreen",
                "Απορρίφθηκε" => "lightcoral",
                "Απορρίφθηκε (Απόσυρση Θέσεως Από Εταιρία)" => "coral",
                "Αποσύρθηκε από τον φοιτητή" => "lightyellow",
                _ => "transparent"
            };
        }
        else if (thesis is ProfessorThesisApplied professorThesis)
        {
            return professorThesis.ProfessorThesisStatusAppliedAtStudentSide switch
            {
                "Επιτυχής" => "lightgreen",
                "Απορρίφθηκε" => "lightcoral",
                "Απορρίφθηκε (Απόσυρση Θέσεως Από τον Καθηγητή)" => "coral",
                "Αποσύρθηκε από τον φοιτητή" => "lightyellow",
                _ => "transparent"
            };
        }
        return "transparent";
    }


    private async Task WithdrawThesisApplication(object thesis)
    {
        try
        {
            PlatformActions platformAction = null;

            if (thesis is CompanyThesisApplied companyThesis)
            {
                var confirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML", 
                    $"Πρόκεται να αποσύρετε την Αίτησή σας για την Πτυχιακή Εργασία. Είστε σίγουρος/η;");
                if (!confirmed) return;

                var thesisDetails = await dbContext.CompanyTheses
                    .Include(t => t.Company)
                    .FirstOrDefaultAsync(t => t.RNGForThesisUploadedAsCompany == companyThesis.RNGForCompanyThesisApplied);

                if (thesisDetails == null)
                {
                    await JS.InvokeVoidAsync("alert", "Δεν βρέθηκε η πτυχιακή εργασία.");
                    return;
                }

                companyThesis.CompanyThesisStatusAppliedAtStudentSide = "Αποσύρθηκε από τον φοιτητή";
                companyThesis.CompanyThesisStatusAppliedAtCompanySide = "Αποσύρθηκε από τον φοιτητή";

                platformAction = new PlatformActions
                {
                    UserRole_PerformedAction = "STUDENT",
                    ForWhat_PerformedAction = "COMPANY_THESIS",
                    HashedPositionRNG_PerformedAction = HashingHelper.HashLong(companyThesis.RNGForCompanyThesisApplied),
                    TypeOfAction_PerformedAction = "SELFWITHDRAW",
                    DateTime_PerformedAction = DateTime.UtcNow
                };

                dbContext.PlatformActions.Add(platformAction);
                await dbContext.SaveChangesAsync();

                var student = await GetStudentDetails(companyThesis.StudentEmailAppliedForThesis);
                if (student == null)
                {
                    await JS.InvokeVoidAsync("alert", "Δεν βρέθηκαν στοιχεία φοιτητή.");
                    return;
                }

                var companyName = thesisDetails.Company?.CompanyName ?? "Άγνωστη Εταιρεία";

                await InternshipEmailService.SendStudentThesisWithdrawalNotificationToCompanyOrProfessor(
                    companyThesis.CompanyEmailWhereStudentAppliedForThesis,
                    companyName,
                    student.Name,
                    student.Surname,
                    thesisDetails.CompanyThesisTitle,
                    companyThesis.RNGForCompanyThesisAppliedAsStudent_HashedAsUniqueID);

                await InternshipEmailService.SendStudentThesisWithdrawalConfirmationToStudent(
                    companyThesis.StudentEmailAppliedForThesis,
                    student.Name,
                    student.Surname,
                    thesisDetails.CompanyThesisTitle,
                    companyThesis.RNGForCompanyThesisAppliedAsStudent_HashedAsUniqueID,
                    companyName);

                NavigationManager.NavigateTo(NavigationManager.Uri, forceLoad: true);
            }
            else if (thesis is ProfessorThesisApplied professorThesis)
            {
                var confirmed = await JS.InvokeAsync<bool>("confirmActionWithHTML", 
                    $"Πρόκεται να αποσύρετε την Αίτησή σας για την Πτυχιακή Εργασία. Είστε σίγουρος/η;");
                if (!confirmed) return;

                var thesisDetails = await dbContext.ProfessorTheses
                    .Include(t => t.Professor)
                    .FirstOrDefaultAsync(t => t.RNGForThesisUploaded == professorThesis.RNGForProfessorThesisApplied);

                if (thesisDetails == null)
                {
                    await JS.InvokeVoidAsync("alert", "Δεν βρέθηκε η πτυχιακή εργασία.");
                    return;
                }

                professorThesis.ProfessorThesisStatusAppliedAtStudentSide = "Αποσύρθηκε από τον φοιτητή";
                professorThesis.ProfessorThesisStatusAppliedAtProfessorSide = "Αποσύρθηκε από τον φοιτητή";

                platformAction = new PlatformActions
                {
                    UserRole_PerformedAction = "STUDENT",
                    ForWhat_PerformedAction = "PROFESSOR_THESIS",
                    HashedPositionRNG_PerformedAction = HashingHelper.HashLong(professorThesis.RNGForProfessorThesisApplied),
                    TypeOfAction_PerformedAction = "SELFWITHDRAW",
                    DateTime_PerformedAction = DateTime.UtcNow
                };

                dbContext.PlatformActions.Add(platformAction);
                await dbContext.SaveChangesAsync();

                var student = await GetStudentDetails(professorThesis.StudentEmailAppliedForProfessorThesis);
                if (student == null)
                {
                    await JS.InvokeVoidAsync("alert", "Δεν βρέθηκαν στοιχεία φοιτητή.");
                    return;
                }

                var professorName = thesisDetails.Professor != null 
                    ? $"{thesisDetails.Professor.ProfName} {thesisDetails.Professor.ProfSurname}" 
                    : "Άγνωστος Καθηγητής";

                await InternshipEmailService.SendStudentThesisWithdrawalNotificationToCompanyOrProfessor(
                    professorThesis.ProfessorEmailWhereStudentAppliedForProfessorThesis,
                    professorName,
                    student.Name,
                    student.Surname,
                    thesisDetails.ThesisTitle,
                    professorThesis.RNGForProfessorThesisApplied_HashedAsUniqueID);

                await InternshipEmailService.SendStudentThesisWithdrawalConfirmationToStudent(
                    professorThesis.StudentEmailAppliedForProfessorThesis,
                    student.Name,
                    student.Surname,
                    thesisDetails.ThesisTitle,
                    professorThesis.RNGForProfessorThesisApplied_HashedAsUniqueID,
                    professorName);

                NavigationManager.NavigateTo(NavigationManager.Uri, forceLoad: true);
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error saving withdrawal: {ex.Message}");
            await JS.InvokeVoidAsync("alert", "Σφάλμα κατά την αποθήκευση της απόσυρσης.");
        }
    }

    private async Task HandleFileUploadToEditCompanyAnnouncementAttachment(InputFileChangeEventArgs e)
    {
        var file = e.File;  
        if (file != null)
        {
            Console.WriteLine($"File selected: {file.Name}");

            if (file.ContentType == "application/pdf")
            {
                using (var stream = file.OpenReadStream())
                {
                    using (var memoryStream = new MemoryStream())
                    {
                        await stream.CopyToAsync(memoryStream);  
                        currentAnnouncement.CompanyAnnouncementAttachmentFile = memoryStream.ToArray();  
                        Console.WriteLine($"File uploaded: {file.Name}");
                    }
                }
            }
            else
            {
                Console.WriteLine("Selected file is not a PDF.");
            }
        }
        else
        {
            Console.WriteLine("No file selected.");
        }
    }

    private async Task HandleFileUploadToEditProfessorAnnouncementAttachment(InputFileChangeEventArgs e)
    {
        var file = e.File;  // Access the selected file
        if (file != null)
        {
            Console.WriteLine($"File selected: {file.Name}");

            // Ensure the file is a PDF (optional)
            if (file.ContentType == "application/pdf")
            {
                using (var stream = file.OpenReadStream())
                {
                    using (var memoryStream = new MemoryStream())
                    {
                        await stream.CopyToAsync(memoryStream);  // Copy the file stream to memory stream
                        currentAnnouncementAsProfessor.ProfessorAnnouncementAttachmentFile = memoryStream.ToArray();  // Store file as byte array
                        Console.WriteLine($"File uploaded: {file.Name}");
                    }
                }
            }
            else
            {
                Console.WriteLine("Selected file is not a PDF.");
            }
        }
        else
        {
            Console.WriteLine("No file selected.");
        }
    }


    private async Task HandleFileUploadToEditCompanyJobAttachment(InputFileChangeEventArgs e)
    {
        Console.WriteLine("File upload method triggered.");

        var file = e.File;
        if (file != null)
        {
            Console.WriteLine($"File selected: {file.Name}");

            // Ensure the file is a PDF
            if (file.ContentType == "application/pdf")
            {
                using (var stream = file.OpenReadStream())
                {
                    using (var memoryStream = new MemoryStream())
                    {
                        await stream.CopyToAsync(memoryStream);
                        selectedJob.PositionAttachment = memoryStream.ToArray();  // Store the file as byte array
                        Console.WriteLine($"File uploaded: {file.Name}");
                    }
                }
            }
            else
            {
                Console.WriteLine("Selected file is not a PDF.");
            }
        }
        else
        {
            Console.WriteLine("No file selected.");
        }
    }

    private async Task HandleFileUploadToEditCompanyInternshipAttachment(InputFileChangeEventArgs e)
    {
        Console.WriteLine("File upload method triggered.");

        var file = e.File;
        if (file != null)
        {
            Console.WriteLine($"File selected: {file.Name}");

            // Ensure the file is a PDF
            if (file.ContentType == "application/pdf")
            {
                using (var stream = file.OpenReadStream())
                {
                    using (var memoryStream = new MemoryStream())
                    {
                        await stream.CopyToAsync(memoryStream);
                        selectedInternship.CompanyInternshipAttachment = memoryStream.ToArray();  // Store the file as byte array
                        Console.WriteLine($"File uploaded: {file.Name}");
                    }
                }
            }
            else
            {
                Console.WriteLine("Selected file is not a PDF.");
            }
        }
        else
        {
            Console.WriteLine("No file selected.");
        }
    }

    private void OnCheckedChangedForEditCompanyJobAreas(ChangeEventArgs e, Area area)
    {
        if (e.Value is bool isChecked)
        {
            if (isChecked)
            {
                if (!SelectedAreasToEditForCompanyJob.Any(a => a.AreaName == area.AreaName))  // Check by AreaName or Id
                {
                    SelectedAreasToEditForCompanyJob.Add(area);  // Add the area object
                }
            }
            else
            {
                SelectedAreasToEditForCompanyJob.RemoveAll(a => a.AreaName == area.AreaName);  // Remove by AreaName or Id
            }
        }
        StateHasChanged();
    }

    private void OnCheckedChangedForEditCompanyInternshipAreas(ChangeEventArgs e, Area area)
    {
        if (e.Value is bool isChecked)
        {
            if (isChecked)
            {
                if (!SelectedAreasToEditForCompanyInternship.Any(a => a.AreaName == area.AreaName))  // Check by AreaName or Id
                {
                    SelectedAreasToEditForCompanyInternship.Add(area);  // Add the area object
                }
            }
            else
            {
                SelectedAreasToEditForCompanyInternship.RemoveAll(a => a.AreaName == area.AreaName);  // Remove by AreaName or Id
            }
        }
        StateHasChanged();
    }

    private void OnCheckedChangedForEditCompanyThesisAreas(ChangeEventArgs e, Area area)
    {
        if (e.Value is bool isChecked)
        {
            if (isChecked)
            {
                if (!SelectedAreasToEditForCompanyThesis.Any(a => a.AreaName == area.AreaName))  // Check by AreaName or Id
                {
                    SelectedAreasToEditForCompanyThesis.Add(area);  // Add the area object
                }
            }
            else
            {
                SelectedAreasToEditForCompanyThesis.RemoveAll(a => a.AreaName == area.AreaName);  // Remove by AreaName or Id
            }
        }
        StateHasChanged();
    }

    private void OnCheckedChangedForEditCompanyThesisSkills(ChangeEventArgs e, Skill skill)
    {
        if (e.Value is bool isChecked)
        {
            if (isChecked)
            {
                if (!SelectedSkillsToEditForCompanyThesis.Any(s => s.SkillName == skill.SkillName))  // Check by SkillName or Id
                {
                    SelectedSkillsToEditForCompanyThesis.Add(skill);  // Add the skill object
                }
            }
            else
            {
                SelectedSkillsToEditForCompanyThesis.RemoveAll(s => s.SkillName == skill.SkillName);  // Remove by SkillName or Id
            }
        }
        StateHasChanged();
    }

    private async Task ShowProfessorDetailsAtCompanyEventInterest(InterestInCompanyEventAsProfessor interest)
    {
        try
        {
            // Try to get professor from cache first
            if (!professorDataCache.TryGetValue(interest.ProfessorEmailShowInterestForCompanyEvent, out var professor))
            {
                // If not in cache, fetch from database
                professor = await dbContext.Professors
                    .FirstOrDefaultAsync(p => p.ProfEmail == interest.ProfessorEmailShowInterestForCompanyEvent);
            
                if (professor != null)
                {
                    professorDataCache[interest.ProfessorEmailShowInterestForCompanyEvent] = professor;
                }
            }

            if (professor == null)
            {
                await JS.InvokeVoidAsync("alert", "Professor details not found");
                return;
            }

            selectedProfessorToShowDetailsForInterestinCompanyEvent = professor;
            showProfessorModal = true;
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error showing professor details: {ex.Message}");
            await JS.InvokeVoidAsync("alert", "Σφάλμα κατά την εμφάνιση των στοιχείων του καθηγητή");
        }
        finally
        {
            StateHasChanged();
        }
    }

    


    private void CloseProfessorDetailsModal()
    {
        showProfessorModal = false;
    }

    private async Task UploadFileToUpdateCompanyEventAttachment(ChangeEventArgs e)
    {
        var file = (IBrowserFile)e.Value;
        var buffer = new byte[file.Size];
        await file.OpenReadStream().ReadAsync(buffer, 0, (int)file.Size);
        currentCompanyEvent.CompanyEventAttachmentFile = buffer;
    }

    

    private void OnCheckedChangedForEditCompanyEventAreas(ChangeEventArgs e, Area area)
    {
        if (e.Value is bool isChecked)
        {
            if (isChecked)
            {
                if (!SelectedAreasToEditForCompanyEvent.Any(a => a.AreaName == area.AreaName))  // Check by AreaName or Id
                {
                    SelectedAreasToEditForCompanyEvent.Add(area);  // Add the area object
                }
            }
            else
            {
                SelectedAreasToEditForCompanyEvent.RemoveAll(a => a.AreaName == area.AreaName);  // Remove by AreaName or Id
            }
        }
        StateHasChanged();
    }


    private void UpdateSelectedAreasForCompanyEvent()
    {
        currentCompanyEvent.CompanyEventAreasOfInterest = string.Join(", ", SelectedAreasToEditForCompanyEvent.Select(a => a.AreaName));
    }

    private void OnRegionChangedForEditCompanyEvent(string selectedRegion)
    {
        AvailableTownsForEditCompanyEvent = GetTownsForRegionForEditCompanyEvent(selectedRegion);
        currentCompanyEvent.CompanyEventDimosLocation = ""; // Reset town when region changes
    }




    private List<string> AvailableTownsForEditCompanyEvent = new List<string>();

    private List<string> GetTownsForRegionForEditCompanyEvent(string region)
    {
        if (string.IsNullOrEmpty(region) || !RegionToTownsMap.ContainsKey(region))
        {
            return new List<string>();
        }

        return RegionToTownsMap[region];
    }

    private string _selectedRegion;

    private string SelectedRegion
    {
        get => _selectedRegion;
        set
        {
            _selectedRegion = value;
            OnRegionChangedForEditCompanyEvent(value);
        }
    }


    private void ClearField(int fieldIndex)
    {
        switch (fieldIndex)
        {
            case 1:
                currentCompanyEvent.CompanyEventStartingPointLocationToTransportPeopleToEvent1 = string.Empty;
                break;
            case 2:
                currentCompanyEvent.CompanyEventStartingPointLocationToTransportPeopleToEvent2 = string.Empty;
                break;
            case 3:
                currentCompanyEvent.CompanyEventStartingPointLocationToTransportPeopleToEvent3 = string.Empty;
                break;
        }
    }

    private async Task DownloadStudentListForInterestInCompanyEventAsCompany()
    {
        ExcelPackage.LicenseContext = LicenseContext.NonCommercial;

        using var package = new ExcelPackage();
        var worksheet = package.Workbook.Worksheets.Add("Interested Students");

        worksheet.Cells["A1"].Value = "Πανεπιστήμιο";
        worksheet.Cells["B1"].Value = "Τμήμα Φοίτησης";
        worksheet.Cells["C1"].Value = "Επίπεδο Σπουδών";
        worksheet.Cells["D1"].Value = "Όνομα Φοιτητή";
        worksheet.Cells["E1"].Value = "Επώνυμο Φοιτητή";
        worksheet.Cells["F1"].Value = "Email";
        worksheet.Cells["G1"].Value = "Τηλέφωνο";
        worksheet.Cells["H1"].Value = "Χρειάζεται Μεταφορά";
        worksheet.Cells["I1"].Value = "Επιλεγμένα Σημεία Εκκίνησης";

        using (var headerRange = worksheet.Cells["A1:I1"])
        {
            headerRange.Style.Font.Bold = true;
            headerRange.Style.Fill.PatternType = ExcelFillStyle.Solid;
            headerRange.Style.Fill.BackgroundColor.SetColor(Color.LightGray);
            headerRange.Style.HorizontalAlignment = ExcelHorizontalAlignment.Center;
        }

        int row = 2;

        foreach (var application in InterestedStudents)
        {
            var studentUniqueId = application.StudentUniqueIDShowInterestForEvent;
            var student = studentDataCache.Values.FirstOrDefault(s => s.Student_UniqueID == studentUniqueId);

            if (student == null)
            {
                student = await dbContext.Students
                    .Where(s => s.Student_UniqueID == studentUniqueId)
                    .Select(s => new Student
                    {
                        Name = s.Name,
                        Surname = s.Surname,
                        Email = s.Email,
                        Telephone = s.Telephone,
                        University = s.University,
                        Department = s.Department,
                        LevelOfDegree = s.LevelOfDegree
                    })
                    .FirstOrDefaultAsync();

                if (student != null)
                {
                    studentDataCache[student.Email.ToLower()] = student;
                }
            }

            if (student != null)
            {
                worksheet.Cells[$"A{row}"].Value = student.University;
                worksheet.Cells[$"B{row}"].Value = student.Department;
                worksheet.Cells[$"C{row}"].Value = student.LevelOfDegree;
                worksheet.Cells[$"D{row}"].Value = student.Name;
                worksheet.Cells[$"E{row}"].Value = student.Surname;
                worksheet.Cells[$"F{row}"].Value = student.Email;
                worksheet.Cells[$"G{row}"].Value = student.Telephone;
                worksheet.Cells[$"H{row}"].Value = string.IsNullOrWhiteSpace(application.StudentTransportNeedWhenShowInterestForCompanyEvent)
                                                   ? "Όχι"
                                                   : application.StudentTransportNeedWhenShowInterestForCompanyEvent;
                worksheet.Cells[$"I{row}"].Value = string.IsNullOrWhiteSpace(application.StudentTransportChosenLocationWhenShowInterestForCompanyEvent)
                                                   ? "N/A"
                                                   : application.StudentTransportChosenLocationWhenShowInterestForCompanyEvent;

                row++;
            }
        }

        worksheet.Cells.AutoFitColumns();

        var fileBytes = package.GetAsByteArray();
        string fileName = "Ενδιαφερόμενοι_Φοιτητές_Εκδήλωσης.xlsx";
        await JS.InvokeVoidAsync("saveStudentShownInterestForCompanyEventAsExcelListFile", fileName, Convert.ToBase64String(fileBytes));
    }


    private async Task DownloadStudentListForInterestInProfessorEventAsProfessor()
    {
        ExcelPackage.LicenseContext = LicenseContext.NonCommercial;

        using var package = new ExcelPackage();
        var worksheet = package.Workbook.Worksheets.Add("Interested Students");

        // Set column headers
        worksheet.Cells["A1"].Value = "Πανεπιστήμιο";
        worksheet.Cells["B1"].Value = "Τμήμα Φοίτησης";
        worksheet.Cells["C1"].Value = "Επίπεδο Σπουδών";
        worksheet.Cells["D1"].Value = "Όνομα Φοιτητή";
        worksheet.Cells["E1"].Value = "Επώνυμο Φοιτητή";
        worksheet.Cells["F1"].Value = "Email";
        worksheet.Cells["G1"].Value = "Τηλέφωνο";
        worksheet.Cells["H1"].Value = "Χρειάζεται Μεταφορά";
        worksheet.Cells["I1"].Value = "Επιλεγμένα Σημεία Εκκίνησης";

        // Format headers
        using (var headerRange = worksheet.Cells["A1:I1"])
        {
            headerRange.Style.Font.Bold = true;
            headerRange.Style.Fill.PatternType = ExcelFillStyle.Solid;
            headerRange.Style.Fill.BackgroundColor.SetColor(Color.LightGray);
            headerRange.Style.HorizontalAlignment = ExcelHorizontalAlignment.Center;
        }

        int row = 2;

        foreach (var application in InterestedStudentsForProfessorEvent)
        {
            var studentUniqueId = application.StudentUniqueIDShowInterestForEvent;
            var student = studentDataCache.Values.FirstOrDefault(s => s.Student_UniqueID == studentUniqueId);

            if (student == null)
            {
                student = await dbContext.Students
                    .Where(s => s.Student_UniqueID == studentUniqueId)
                    .Select(s => new Student
                    {
                        Name = s.Name,
                        Surname = s.Surname,
                        Email = s.Email,
                        Telephone = s.Telephone,
                        University = s.University,
                        Department = s.Department,
                        LevelOfDegree = s.LevelOfDegree
                    })
                    .FirstOrDefaultAsync();

                if (student != null)
                {
                    studentDataCache[student.Email.ToLower()] = student;
                }
            }

            if (student != null)
            {
                worksheet.Cells[$"A{row}"].Value = student.University;
                worksheet.Cells[$"B{row}"].Value = student.Department;
                worksheet.Cells[$"C{row}"].Value = student.LevelOfDegree;
                worksheet.Cells[$"D{row}"].Value = student.Name;
                worksheet.Cells[$"E{row}"].Value = student.Surname;
                worksheet.Cells[$"F{row}"].Value = student.Email;
                worksheet.Cells[$"G{row}"].Value = student.Telephone;
                worksheet.Cells[$"H{row}"].Value = string.IsNullOrWhiteSpace(application.StudentTransportNeedWhenShowInterestForProfessorEvent)
                                                   ? "Όχι"
                                                   : application.StudentTransportNeedWhenShowInterestForProfessorEvent;
                worksheet.Cells[$"I{row}"].Value = string.IsNullOrWhiteSpace(application.StudentTransportChosenLocationWhenShowInterestForProfessorEvent)
                                                   ? "N/A"
                                                   : application.StudentTransportChosenLocationWhenShowInterestForProfessorEvent;

                row++;
            }
        }

        worksheet.Cells.AutoFitColumns();

        var fileBytes = package.GetAsByteArray();
        string fileName = "Ενδιαφερόμενοι_Φοιτητές_Εκδήλωσης.xlsx";
        await JS.InvokeVoidAsync("saveStudentShownInterestForProfessorEventAsExcelListFile", fileName, Convert.ToBase64String(fileBytes));
    }

    private async Task DownloadProfessorListForInterestInCompanyEventAsCompany()
    {
        // 🔹 Set the License Context BEFORE using ExcelPackage
        ExcelPackage.LicenseContext = LicenseContext.NonCommercial;  

        using var package = new ExcelPackage();
        var worksheet = package.Workbook.Worksheets.Add("Interested Professors");

        // 🔹 Set Column Headers
        worksheet.Cells["A1"].Value = "Όνομα";
        worksheet.Cells["B1"].Value = "Επώνυμο";
        worksheet.Cells["C1"].Value = "Πανεπιστήμιο";
        worksheet.Cells["D1"].Value = "Τμήμα";
        worksheet.Cells["E1"].Value = "Βαθμίδα ΔΕΠ";
        worksheet.Cells["F1"].Value = "Email";
        worksheet.Cells["G1"].Value = "Τηλέφωνο Εργασίας";
        worksheet.Cells["H1"].Value = "Τηλέφωνο Προσωπικό";
        worksheet.Cells["I1"].Value = "Ημερομηνία Δήλωσης";
        worksheet.Cells["J1"].Value = "Κατάσταση";

        // 🔹 Apply Bold Style to Column Titles
        using (var headerRange = worksheet.Cells["A1:J1"])
        {
            headerRange.Style.Font.Bold = true; 
            headerRange.Style.Fill.PatternType = ExcelFillStyle.Solid;
            headerRange.Style.Fill.BackgroundColor.SetColor(Color.LightGray); 
            headerRange.Style.HorizontalAlignment = ExcelHorizontalAlignment.Center; 
        }

        int row = 2; // Start inserting data from row 2

        foreach (var interest in filteredProfessorInterestForCompanyEvents)
        {
            // Get professor details from the database
            var professor = await GetProfessorDetails(interest.ProfessorEmailShowInterestForCompanyEvent);
    
            worksheet.Cells[$"A{row}"].Value = professor?.ProfName ?? "N/A";
            worksheet.Cells[$"B{row}"].Value = professor?.ProfSurname ?? "N/A";
            worksheet.Cells[$"C{row}"].Value = professor?.ProfUniversity ?? "N/A";
            worksheet.Cells[$"D{row}"].Value = professor?.ProfDepartment ?? "N/A";
            worksheet.Cells[$"E{row}"].Value = professor?.ProfVahmidaDEP ?? "N/A";
            worksheet.Cells[$"F{row}"].Value = interest.ProfessorEmailShowInterestForCompanyEvent;
            worksheet.Cells[$"G{row}"].Value = professor?.ProfWorkTelephone ?? "N/A";
            worksheet.Cells[$"H{row}"].Value = professor?.ProfPersonalTelephoneVisibility == true ? professor?.ProfPersonalTelephone ?? "N/A" : "Μη Δημόσιο";
            worksheet.Cells[$"I{row}"].Value = interest.DateTimeProfessorShowInterestForCompanyEvent.ToString("g");
            worksheet.Cells[$"J{row}"].Value = interest.CompanyEventStatus_ShowInterestAsProfessor_AtCompanySide;
            row++;
        }

        // 🔹 AutoFit Columns for better readability
        worksheet.Cells.AutoFitColumns();

        // 🔹 Format date column
        worksheet.Column(9).Style.Numberformat.Format = "dd/MM/yyyy HH:mm";

        var fileBytes = package.GetAsByteArray();

        // 🔹 Call JavaScript to trigger download
        string fileName = $"Ενδιαφερόμενοι_Καθηγητές_{DateTime.Now:yyyyMMdd_HHmmss}.xlsx";
        await JS.InvokeVoidAsync("saveProfessorShownInterestForCompanyEventAsExcelListFile", fileName, Convert.ToBase64String(fileBytes));
    }

    private async Task DownloadCompanyListForInterestInProfessorEventAsProfessor()
    {
        // 🔹 Set the License Context BEFORE using ExcelPackage
        ExcelPackage.LicenseContext = LicenseContext.NonCommercial;  

        using var package = new ExcelPackage();
        var worksheet = package.Workbook.Worksheets.Add("Interested Companies");

        // 🔹 Set Column Headers
        worksheet.Cells["A1"].Value = "Επωνυμία";
        worksheet.Cells["B1"].Value = "Τοποθεσία (Πόλη)";
        worksheet.Cells["C1"].Value = "Διεύθυνση";
        worksheet.Cells["D1"].Value = "Email Επικοινωνίας";
        worksheet.Cells["E1"].Value = "Τηλέφωνο Επικοινωνίας";
        worksheet.Cells["F1"].Value = "Τομείς Ενδιαφέροντος";
        worksheet.Cells["G1"].Value = "Αριθμός Συμμετεχόντων";
        worksheet.Cells["H1"].Value = "Ημερομηνία Δήλωσης";
        worksheet.Cells["I1"].Value = "Κατάσταση";

        // 🔹 Apply Bold Style to Column Titles
        using (var headerRange = worksheet.Cells["A1:I1"])
        {
            headerRange.Style.Font.Bold = true; 
            headerRange.Style.Fill.PatternType = ExcelFillStyle.Solid;
            headerRange.Style.Fill.BackgroundColor.SetColor(Color.LightGray); 
            headerRange.Style.HorizontalAlignment = ExcelHorizontalAlignment.Center; 
        }

        int row = 2; // Start inserting data from row 2

        foreach (var interest in filteredCompanyInterestForProfessorEvents)
        {
            // Get company details from the navigation property
            var company = await GetCompanyDetails(interest.CompanyEmailShowInterestForProfessorEvent);
        
            worksheet.Cells[$"A{row}"].Value = company?.CompanyName ?? "N/A";
            worksheet.Cells[$"B{row}"].Value = company?.CompanyTown ?? "N/A";
            worksheet.Cells[$"C{row}"].Value = company?.CompanyLocation ?? "N/A";
            worksheet.Cells[$"D{row}"].Value = interest.CompanyEmailShowInterestForProfessorEvent;
            worksheet.Cells[$"E{row}"].Value = company?.CompanyTelephone ?? "N/A";
            worksheet.Cells[$"F{row}"].Value = company?.CompanyAreas ?? "N/A";
            worksheet.Cells[$"G{row}"].Value = interest.CompanyNumberOfPeopleToShowUpWhenShowInterestForProfessorEvent;
            worksheet.Cells[$"H{row}"].Value = interest.DateTimeCompanyShowInterestForProfessorEvent.ToString("g");
            worksheet.Cells[$"I{row}"].Value = interest.ProfessorEventStatus_ShowInterestAsCompany_AtProfessorSide;
        
            row++;
        }

        // 🔹 AutoFit Columns for better readability
        worksheet.Cells.AutoFitColumns();

        // 🔹 Format date column
        worksheet.Column(8).Style.Numberformat.Format = "dd/MM/yyyy HH:mm";

        var fileBytes = package.GetAsByteArray();

        // 🔹 Call JavaScript to trigger download
        string fileName = $"Ενδιαφερόμενες_Εταιρείες_{DateTime.Now:yyyyMMdd_HHmmss}.xlsx";
        await JS.InvokeVoidAsync("saveCompanyShownInterestForProfessorEventAsExcelListFile", fileName, Convert.ToBase64String(fileBytes));
    }

    private void HandleNumberChangeForParticipantsWhenShowInterestAsACompanyForAProfessorEvent(ChangeEventArgs e, long professorEventId)
    {
        if (int.TryParse(e.Value?.ToString(), out int number))
        {
            SetNumberOfPeople(professorEventId, number);
        }
        else
        {
            Console.WriteLine("Invalid number entered");
        }
    }

    private void ToggleThesisApplicationsVisibility()
    {
        isThesisApplicationsVisible = !isThesisApplicationsVisible;
        StateHasChanged();
    }

    private void ToggleAnnouncementsAsStudentVisibility()
    {
        isAnnouncementsAsStudentVisible = !isAnnouncementsAsStudentVisible;
        StateHasChanged();
    }

    private void ToggleAnnouncementsAsRGVisibility()
    {
        isAnnouncementsAsRGVisible = !isAnnouncementsAsRGVisible;
        StateHasChanged();
    }

    private void ToggleAnnouncementsAsProfessorVisibility()
    {
        isAnnouncementsAsProfessorVisible = !isAnnouncementsAsProfessorVisible;
        StateHasChanged();
    }

    private void ToggleSearchInternshipsAsStudentFiltersVisibility()
    {
        isSearchInternshipsAsStudentFiltersVisible = !isSearchInternshipsAsStudentFiltersVisible;
        StateHasChanged();
    }

    private void ToggleJobApplicationsAsStudentVisibility()
    {
        isJobApplicationsAsStudentVisible = !isJobApplicationsAsStudentVisible;
        StateHasChanged();
    }

    private void ToggleJobPositionAsStudentFiltersVisibility()
    {
        isJobPositionAsStudentFiltersVisible = !isJobPositionAsStudentFiltersVisible;
        StateHasChanged();
    }

    private void ToggleInternshipApplicationsAsStudentVisibility()
    {
        isInternshipApplicationsAsStudentVisible = !isInternshipApplicationsAsStudentVisible;
        StateHasChanged();
    }

    private void ToggleInternshipSearchAsStudentFiltersVisibility()
    {
        isInternshipSearchAsStudentFiltersVisible = !isInternshipSearchAsStudentFiltersVisible;
        StateHasChanged();
    }

    private void ToggleEventSearchAsStudentVisibility()
    {
        isEventSearchAsStudentVisible = !isEventSearchAsStudentVisible;
        StateHasChanged();
    }

    @inject AppDbContext DbContext  // Replace with your actual DbContext type
    private async Task HandleThesisTitleInputForBothCompaniesAndProfessorsWhenSearchForThesisAsStudent(ChangeEventArgs e)
    {
        thesisSearchForThesesAsStudent = e.Value?.ToString();

        if (!string.IsNullOrWhiteSpace(thesisSearchForThesesAsStudent) && 
            thesisSearchForThesesAsStudent.Length >= 2)
        {
            try 
            {
                // Clear ChangeTracker to prevent conflicts
                DbContext.ChangeTracker.Clear();

                var professorTitles = await DbContext.ProfessorTheses
                    .AsNoTracking()
                    .Where(t => EF.Functions.Like(t.ThesisTitle, $"%{thesisSearchForThesesAsStudent}%"))
                    .Select(t => t.ThesisTitle)
                    .Distinct()
                    .Take(5)
                    .ToListAsync();

                var companyTitles = await DbContext.CompanyTheses
                    .AsNoTracking()
                    .Where(t => EF.Functions.Like(t.CompanyThesisTitle, $"%{thesisSearchForThesesAsStudent}%"))
                    .Select(t => t.CompanyThesisTitle)
                    .Distinct()
                    .Take(5)
                    .ToListAsync();

                // Combine and order the results
                thesisTitleSuggestions = professorTitles
                    .Concat(companyTitles)
                    .Distinct()
                    .OrderBy(t => t)
                    .Take(10) 
                    .ToList();
            }
            catch (Exception ex)
            {
                // Log error if needed
                Console.WriteLine($"Error fetching suggestions: {ex.Message}");
                thesisTitleSuggestions.Clear();
            }
        }
        else
        {
            thesisTitleSuggestions.Clear();
        }

        StateHasChanged();
    }

    private void SelectThesisTitleSuggestionForBothCompaniesAndProfessorsWhenSearchForThesisAsStudent(string suggestion)
    {
        thesisSearchForThesesAsStudent = suggestion;
        thesisTitleSuggestions.Clear();
        StateHasChanged();
    }

    private async Task HandleCompanyNameInputWhenSearchForProfessorThesisAutocompleteNameAsStudent(ChangeEventArgs e)
    {
        companyNameSearchForThesesAsStudent = e.Value?.ToString();

        if (!string.IsNullOrWhiteSpace(companyNameSearchForThesesAsStudent) && 
            companyNameSearchForThesesAsStudent.Length >= 2)
        {
            companyNameSuggestionsWhenSearchForProfessorThesisAutocompleteNameAsStudent = await dbContext.CompanyTheses
                .Include(t => t.Company) // Include Company for navigation property access
                .Where(t => t.Company != null && 
                           EF.Functions.Like(t.Company.CompanyName, $"%{companyNameSearchForThesesAsStudent}%"))
                .Select(t => t.Company.CompanyName) // Get name from navigation property
                .Distinct()
                .Take(10)
                .ToListAsync();
        }
        else
        {
            companyNameSuggestionsWhenSearchForProfessorThesisAutocompleteNameAsStudent.Clear();
        }

        StateHasChanged();
    }



    private async Task SelectCompanyNameSuggestionWhenSearchForProfessorThesisAutocompleteNameAsStudent(string suggestion)
    {
        companyNameSearchForThesesAsStudent = suggestion;
        companyNameSuggestionsWhenSearchForProfessorThesisAutocompleteNameAsStudent.Clear();
        StateHasChanged();
    }

    @inject IDbContextFactory<AppDbContext> DbFactory
    private async Task HandleJobTitleAutocompleteInputWhenSearchCompanyJobsAsStudent(ChangeEventArgs e)
    {
        jobSearch = e.Value?.ToString();

        if (!string.IsNullOrWhiteSpace(jobSearch) && jobSearch.Length >= 2)
        {
            await using var context = await DbFactory.CreateDbContextAsync();

            jobTitleAutocompleteSuggestionsWhenSearchForCompanyJobsAsStudent = await context.CompanyJobs
                .Where(j => EF.Functions.Like(j.PositionTitle, $"%{jobSearch}%"))
                .Select(j => j.PositionTitle)
                .Distinct()
                .OrderBy(t => t)
                .Take(10)
                .ToListAsync();
        }
        else
        {
            jobTitleAutocompleteSuggestionsWhenSearchForCompanyJobsAsStudent.Clear();
        }

        StateHasChanged();
    }


    private async Task SelectJobTitleAutocompleteSuggestionWhenSearchCompanyJobsAsStudent(string suggestion)
    {
        jobSearch = suggestion;
        jobTitleAutocompleteSuggestionsWhenSearchForCompanyJobsAsStudent.Clear();
        StateHasChanged();
    }

    private async Task HandleCompanyNameAutocompleteInputWhenSearchCompanyJobsAsStudent(ChangeEventArgs e)
    {
        companyNameSearch = e.Value?.ToString();

        if (!string.IsNullOrWhiteSpace(companyNameSearch) && companyNameSearch.Length >= 2)
        {
            companyNameAutocompleteSuggestionsWhenSearchForCompanyJobsAsStudent = await dbContext.CompanyJobs
                .Include(j => j.Company) // Include the Company navigation property
                .Where(j => j.Company != null && 
                       EF.Functions.Like(j.Company.CompanyName, $"%{companyNameSearch}%"))
                .Select(j => j.Company.CompanyName)
                .Distinct()
                .OrderBy(c => c)
                .Take(10)
                .ToListAsync();
        }
        else
        {
            companyNameAutocompleteSuggestionsWhenSearchForCompanyJobsAsStudent.Clear();
        }

        StateHasChanged();
    }

    private async Task SelectCompanyNameAutocompleteSuggestionWhenSearchCompanyJobsAsStudent(string suggestion)
    {
        companyNameSearch = suggestion;
        companyNameAutocompleteSuggestionsWhenSearchForCompanyJobsAsStudent.Clear();
        StateHasChanged();
    }

    private async Task HandleInternshipTitleAutocompleteInputWhenSearchInternshipAsStudent(ChangeEventArgs e)
    {
        companyinternshipSearch = e.Value?.ToString();

        if (!string.IsNullOrWhiteSpace(companyinternshipSearch) && 
            companyinternshipSearch.Length >= 2)
        {
            try 
            {
                // Clear ChangeTracker to prevent conflicts
                DbContext.ChangeTracker.Clear();

                var searchTerm = $"%{companyinternshipSearch}%";
        
                var companyTitles = await DbContext.CompanyInternships
                    .AsNoTracking()
                    .Where(i => EF.Functions.Like(i.CompanyInternshipTitle, searchTerm))
                    .Select(i => i.CompanyInternshipTitle)
                    .Distinct()
                    .Take(5)
                    .ToListAsync();

                var professorTitles = await DbContext.ProfessorInternships
                    .AsNoTracking()
                    .Where(i => EF.Functions.Like(i.ProfessorInternshipTitle, searchTerm))
                    .Select(i => i.ProfessorInternshipTitle)
                    .Distinct()
                    .Take(5)
                    .ToListAsync();

                // Combine and order the results
                internshipTitleAutocompleteSuggestionsWhenSearchInternshipAsStudent = companyTitles
                    .Concat(professorTitles)
                    .Distinct()
                    .OrderBy(t => t)
                    .Take(10)
                    .ToList();
            }
            catch (Exception ex)
            {
                // Log error if needed
                Console.WriteLine($"Error fetching internship suggestions: {ex.Message}");
                internshipTitleAutocompleteSuggestionsWhenSearchInternshipAsStudent.Clear();
            }
        }
        else
        {
            internshipTitleAutocompleteSuggestionsWhenSearchInternshipAsStudent.Clear();
        }

        StateHasChanged();
    }

    private void SelectInternshipTitleAutocompleteSuggestionWhenSearchInternshipAsStudent(string suggestion)
    {
        companyinternshipSearch = suggestion;
        internshipTitleAutocompleteSuggestionsWhenSearchInternshipAsStudent.Clear();
        StateHasChanged();
    }


    public class NewsArticle
    {
        public string Title { get; set; }
        public string Url { get; set; }
        public string Date { get; set; }
        public string Category { get; set; }
    }

    public class WeatherData
    {
        public int is_day { get; set; }
        public double temp_c { get; set; }
    }

    public class ConditionInfo
    {
        public string Text { get; set; }
    }
    public class WeatherResponse
    {
        public WeatherData current { get; set; }
    }

    private void ToggleDescriptionForCompanyEvent(int companyeventId)
    {
        if (expandedCompanyEventId == companyeventId)
        {
            expandedCompanyEventId = -1;
            Console.WriteLine($"Collapsed event {companyeventId}");
        }
        else
        {
            expandedCompanyEventId = companyeventId;
            Console.WriteLine($"Expanded event {companyeventId}");
        }
    }

    private void ToggleDescriptionForProfessorEvent(int professoreventId)
    {
        if (expandedProfessorEventId == professoreventId)
        {
            expandedProfessorEventId = -1;
            Console.WriteLine($"Collapsed event {professoreventId}");
        }
        else
        {
            expandedProfessorEventId = professoreventId;
            Console.WriteLine($"Expanded event {professoreventId}");
        }
    }


   
    private async Task<List<AnnouncementAsCompany>> FetchAnnouncementsAsync()
    {
        var announcements = await dbContext.AnnouncementsAsCompany
            .AsNoTracking()
            .Include(a => a.Company)  // This ensures Company data is loaded
            .ToListAsync();
        return announcements;
    }


    private async Task<List<NewsArticle>> FetchNewsArticlesAsync()
    {
        try
        {
            var response = await HttpClient.GetAsync("https://www.uoa.gr/anakoinoseis_kai_ekdiloseis");
            response.EnsureSuccessStatusCode();
            var content = await response.Content.ReadAsStringAsync();

            var htmlDocument = new HtmlAgilityPack.HtmlDocument();
            htmlDocument.LoadHtml(content);

            var articles = new List<NewsArticle>();

            var articleNodes = htmlDocument.DocumentNode.SelectNodes("//div[contains(@class, 'topnews')]");
            if (articleNodes != null)
            {
                // Limit the number of articles to 3
                for (int i = 0; i < Math.Min(articleNodes.Count, 3); i++)
                {
                    var articleNode = articleNodes[i];

                    var titleNode = articleNode.SelectSingleNode(".//h3[@class='article__title']/a");
                    var title = titleNode?.InnerText.Trim();
                    var relativeUrl = titleNode?.Attributes["href"]?.Value;
                    var url = new Uri(new Uri("https://www.uoa.gr"), relativeUrl).ToString(); 

                    var dateNode = articleNode.SelectSingleNode(".//span[@class='article__date']/time");
                    var date = dateNode?.Attributes["datetime"]?.Value;

                    var categoryNode = articleNode.SelectSingleNode(".//span[@class='article__category']/a");
                    var category = categoryNode?.InnerText.Trim();

                    articles.Add(new NewsArticle
                        {
                            Title = title,
                            Url = url,
                            Date = date,
                            Category = category
                        });
                }
            }

            return articles;
        }
        catch (Exception ex)
        {
            fetchError = ex.Message;
            return null;
        }


    }

    private async Task<List<NewsArticle>> FetchSVSENewsArticlesAsync()
    {
        try
        {
            var response = await HttpClient.GetAsync("https://svse.gr/index.php/nea-anakoinoseis");
            response.EnsureSuccessStatusCode();
            var content = await response.Content.ReadAsStringAsync();

            var htmlDocument = new HtmlAgilityPack.HtmlDocument();
            htmlDocument.LoadHtml(content);

            var articles = new List<NewsArticle>();

            var articleNodes = htmlDocument.DocumentNode.SelectNodes("/html/body/div[1]/div/section[2]/div/div/div/main/div/div[3]/div[1]/div/div");

            if (articleNodes != null)
            {
                foreach (var articleNode in articleNodes.Take(3)) // Take only the first 3 articles
                {
                    var titleNode = articleNode.SelectSingleNode(".//h2/a");
                    var title = titleNode?.InnerText.Trim();
                    var relativeUrl = titleNode?.Attributes["href"]?.Value;
                    var url = new Uri(new Uri("https://svse.gr"), relativeUrl).ToString(); 

                    var dateNode = articleNode.SelectSingleNode(".//time");
                    var date = dateNode?.InnerText.Trim();

                    articles.Add(new NewsArticle
                        {
                            Title = title,
                            Url = url,
                            Date = date,
                            Category = "SVSE News" 
                        });
                }
            }
            else
            {
                fetchError = "No articles found with the specified XPath.";
            }

            return articles;
        }
        catch (Exception ex)
        {
            fetchError = ex.Message;
            return null;
        }
    }

    private void ToggleDescription(int announcementId)
    {
        if (expandedAnnouncementId == announcementId)
        {
            expandedAnnouncementId = -1;
        }
        else
        {
            expandedAnnouncementId = announcementId;
        }
    }

    private void ToggleContainer()
    {
        isHidden = !isHidden;
    }

    private async Task DownloadAnnouncementAttachmentFrontPage(byte[] attachmentData, string fileName)
    {
        if (attachmentData != null && attachmentData.Length > 0)
        {
            var mimeType = "application/pdf"; // Correct MIME type for PDF
            await JS.InvokeVoidAsync("BlazorDownloadAttachmentPositionFile", fileName, mimeType, attachmentData);
        }
    }


    private void ChangePage(int pageNumber)
    {
        if (pageNumber >= 1 && pageNumber <= totalPagesForCompanyAnnouncements)
        {
            currentPageForCompanyAnnouncements = pageNumber;
        }
        StateHasChanged();
    }

    private void ToggleDescriptionForProfessorAnnouncements(int announcementId)
    {
        if (expandedProfessorAnnouncementId == announcementId)
        {
            // Collapse if the same announcement is clicked again
            expandedProfessorAnnouncementId = -1;
        }
        else
        {
            // Expand the selected announcement
            expandedProfessorAnnouncementId = announcementId;
        }
    }

    private async Task DownloadProfessorAnnouncementAttachmentFrontPage(byte[] attachmentData, string fileName)
    {
        if (attachmentData != null && attachmentData.Length > 0)
        {
            var mimeType = "application/pdf"; // Correct MIME type for PDF

            // Ensure the file name ends with .pdf
            if (!fileName.EndsWith(".pdf", StringComparison.OrdinalIgnoreCase))
            {
                fileName += ".pdf";
            }

            await JS.InvokeVoidAsync("BlazorDownloadAttachmentPositionFile", fileName, mimeType, attachmentData);
        }
    }



    private void ChangePageForProfessorAnnouncements(int pageNumberForProfessorAnnouncements)
    {
        if (pageNumberForProfessorAnnouncements >= 1 && pageNumberForProfessorAnnouncements <= totalPagesForProfessorAnnouncements)
        {
            currentPageForProfessorAnnouncements = pageNumberForProfessorAnnouncements;
        }
        StateHasChanged();
    }

    private async Task<List<AnnouncementAsProfessor>> FetchProfessorAnnouncementsAsync()
    {
        var professorannouncements = await dbContext.AnnouncementsAsProfessor
            .Include(a => a.Professor)  // Eager load professor data
            .AsNoTracking()
            .OrderByDescending(a => a.ProfessorAnnouncementUploadDate) // Optional: order by date
            .ToListAsync(); 
        return professorannouncements;
    }

    private async Task<List<AnnouncementAsCompany>> FetchCompanyAnnouncementsAsync()
    {
        var companyannouncements = await dbContext.AnnouncementsAsCompany
            .Include(a => a.Company)  // Eager load company data
            .AsNoTracking()
            .OrderByDescending(a => a.CompanyAnnouncementUploadDate) // Optional: order by date
            .ToListAsync();
        return companyannouncements;
    }


    private async Task DownloadCompanyEventAttachmentFrontPage(byte[] attachmentData, string fileName)
    {
        if (attachmentData != null && attachmentData.Length > 0)
        {
            var base64 = Convert.ToBase64String(attachmentData);
            var fileUrl = $"data:application/pdf;base64,{base64}";

            await JS.InvokeVoidAsync("triggerDownload", fileUrl, fileName);
        }
    }

    private async Task DownloadProfessorEventAttachmentFrontPage(byte[] attachmentData, string fileName)
    {
        if (attachmentData != null && attachmentData.Length > 0)
        {
            var base64 = Convert.ToBase64String(attachmentData);
            var fileUrl = $"data:application/pdf;base64,{base64}";

            await JS.InvokeVoidAsync("triggerDownload", fileUrl, fileName);
        }
    }

    private void ChangePageForCompanyEvents(int pageNumberForCompanyEvents)
    {
        if (pageNumberForCompanyEvents >= 1 && pageNumberForCompanyEvents <= totalPagesForCompanyEvents)
        {
            currentCompanyEventPage = pageNumberForCompanyEvents;
        }
        StateHasChanged();
    }

    private void ChangePageForProfessorEvents(int pageNumberForProfessorEvents)
    {
        if (pageNumberForProfessorEvents >= 1 && pageNumberForProfessorEvents <= totalPagesForProfessorEvents)
        {
            currentProfessorEventPage = pageNumberForProfessorEvents;
        }
        StateHasChanged();
    }

    private bool isUniversityNewsVisible = false; // Default to visible
    private void ToggleUniversityNewsVisibility()
    {
        isUniversityNewsVisible = !isUniversityNewsVisible;
        StateHasChanged();
    }

    private bool isSvseNewsVisible = false;
    private void ToggleSvseNewsVisibility()
    {
        isSvseNewsVisible = !isSvseNewsVisible;
        StateHasChanged();
    }

    private bool isCompanyAnnouncementsVisible = false;
    private void ToggleCompanyAnnouncementsVisibility()
    {
        isCompanyAnnouncementsVisible = !isCompanyAnnouncementsVisible;
        StateHasChanged();
    }

    private bool isProfessorAnnouncementsVisible = false;
    private void ToggleProfessorAnnouncementsVisibility()
    {
        isProfessorAnnouncementsVisible = !isProfessorAnnouncementsVisible;
        StateHasChanged();
    }

    private bool isCompanyEventsVisible = false; 
    private void ToggleCompanyEventsVisibility()
    {
        isCompanyEventsVisible = !isCompanyEventsVisible;
        StateHasChanged();
    }

    private bool isProfessorEventsVisible = false;
    private void ToggleProfessorEventsVisibility()
    {
        isProfessorEventsVisible = !isProfessorEventsVisible;
        StateHasChanged();
    }

    private async Task ScrollToElementById(string elementId)
    {
        await JS.InvokeVoidAsync("scrollToElementById", elementId);
    }

    private bool IsTimeInRestrictedRangeWhenUploadEventAsCompany(TimeOnly time)
    {
        // Check if time is before 06:00 or after 22:00
        return time < new TimeOnly(6, 0) || time > new TimeOnly(22, 0);
    }

    private bool HasAtLeastOneStartingPointWhenUploadEventAsCompany()
    {
        return !string.IsNullOrWhiteSpace(companyEvent.CompanyEventStartingPointLocationToTransportPeopleToEvent1) ||
               !string.IsNullOrWhiteSpace(companyEvent.CompanyEventStartingPointLocationToTransportPeopleToEvent2) ||
               !string.IsNullOrWhiteSpace(companyEvent.CompanyEventStartingPointLocationToTransportPeopleToEvent3);
    }


    private async Task HandleAreasInputToFindThesesAsCompany(ChangeEventArgs e)
    {
        searchAreasInputToFindThesesAsCompany = e.Value?.ToString().Trim() ?? string.Empty;
        areaSuggestionsToFindThesesAsCompany = new();

        if (searchAreasInputToFindThesesAsCompany.Length >= 1)
        {
            try
            {
                areaSuggestionsToFindThesesAsCompany = await Task.Run(() =>
                    dbContext.Areas
                        .Where(a => a.AreaName.Contains(searchAreasInputToFindThesesAsCompany))
                        .Select(a => a.AreaName)
                        .Distinct()
                        .Take(10)
                        .ToList());
            }
            catch (Exception ex)
            {
                Console.WriteLine($"Σφάλμα κατά την ανάκτηση περιοχών: {ex.Message}");
                areaSuggestionsToFindThesesAsCompany = new List<string>();
            }
        }
        else
        {
            areaSuggestionsToFindThesesAsCompany.Clear();
        }

        StateHasChanged();
    }

    private void SelectAreaSuggestionToFindThesesAsCompany(string suggestion)
    {
        if (!string.IsNullOrWhiteSpace(suggestion) && !selectedAreasToFindThesesAsCompany.Contains(suggestion))
        {
            selectedAreasToFindThesesAsCompany.Add(suggestion);
            areaSuggestionsToFindThesesAsCompany.Clear();
            searchAreasInputToFindThesesAsCompany = string.Empty;
        }
    }

    private void RemoveSelectedAreaToFindThesesAsCompany(string area)
    {
        selectedAreasToFindThesesAsCompany.Remove(area);
        StateHasChanged();
    }

    private async Task DownloadProfessorThesisAttachmentWhenSearchForProfessorThesisAsCompany(int thesisId)
    {
        var thesis = dbContext.ProfessorTheses.FirstOrDefault(t => t.Id == thesisId);
        if (thesis == null)
        {
            Console.WriteLine("Thesis not found.");
            return;
        }

        if (thesis.ThesisAttachment == null)
        {
            Console.WriteLine("No attachment found.");
            return;
        }

        Console.WriteLine($"Attachment found for thesis {thesisId}, size: {thesis.ThesisAttachment.Length} bytes");

        string base64String = Convert.ToBase64String(thesis.ThesisAttachment);
        string fileName = $"Thesis_Attachment_{thesisId}.pdf"; // Adjust file extension if needed

        await JS.InvokeVoidAsync("downloadInternshipAttachmentAsStudent", fileName, base64String); // Reusing the same JS function
    }

    private async Task ScrollToAlertWhenNoJobsFoundWhenSearchAsStudent()
    {
        await JS.InvokeVoidAsync("scrollToElement", "noJobsFoundAlert");
    }
    private async Task ScrollToAlertWhenNoThesesFoundWhenSearchAsStudent()
    {
        await JS.InvokeVoidAsync("scrollToElement", "noThesesFoundAlert");
    }
        private async Task ScrollToAlertWhenNoInternshipsFoundWhenSearchAsStudent()
    {
        await JS.InvokeVoidAsync("scrollToElement", "noInternshipsFoundAlert");
    }


    private async Task ShowProfessorHyperlinkNameDetailsModalInStudentInternship(string professorEmail)
    {
        selectedProfessorDetailsForHyperlinkNameInInternshipAsStudent = await dbContext.Professors
            .FirstOrDefaultAsync(p => p.ProfEmail == professorEmail);

        // Show the modal after fetching the details
        StateHasChanged();
        await JS.InvokeVoidAsync("showProfessorDetailsModal"); // Show the modal using JS
    }

    private async Task ShowCompanyHyperlinkNameDetailsModalInStudentInternship(string companyEmail)
    {
        selectedCompanyDetailsForHyperlinkNameInInternshipAsStudent = await dbContext.Companies
            .FirstOrDefaultAsync(c => c.CompanyEmail == companyEmail);

        if (selectedCompanyDetailsForHyperlinkNameInInternshipAsStudent != null)
        {
            isCompanyDetailsModalOpenForHyperlinkNameAsStudentForCompanyInternship = true;
            StateHasChanged();
            await JS.InvokeVoidAsync("showCompanyDetailsModal"); // Show the modal using JS
        }
    }

    void CloseModalForProfessorNameHyperlinkDetailsInInternship()
    {
        selectedProfessorDetailsForHyperlinkNameInInternshipAsStudent = null;
        StateHasChanged();
        JS.InvokeVoidAsync("hideProfessorDetailsModal");
    }

    void CloseModalForCompanyNameHyperlinkDetailsInInternship()
    {
        isCompanyDetailsModalOpenForHyperlinkNameAsStudentForCompanyInternship = false;
        selectedCompanyDetailsForHyperlinkNameInInternshipAsStudent = null;
        StateHasChanged();
        JS.InvokeVoidAsync("hideCompanyDetailsModal");
    }

    private void OnInternshipFilterChange(ChangeEventArgs e)
    {
        var filterValue = e.Value?.ToString();
    
        if (sumUpInternshipsFromBothCompanyAndProfessor == null) return;

        publishedInternships = filterValue switch
        {
            "company" => sumUpInternshipsFromBothCompanyAndProfessor
                .Where(i => !string.IsNullOrEmpty(i.CompanyName))
                .ToList(),
            "professor" => sumUpInternshipsFromBothCompanyAndProfessor
                .Where(i => !string.IsNullOrEmpty(i.ProfessorName))
                .ToList(),
            _ => sumUpInternshipsFromBothCompanyAndProfessor.ToList() // "all" or default
        };
    
        StateHasChanged();
    }

    // Filtering logic for internships
    private async Task FilterInternshipApplications(ChangeEventArgs e)
    {
        filterValueForInternships = e.Value?.ToString()?.ToLower() ?? "all";

        // Set visibility flags
        showCompanyInternshipApplications = filterValueForInternships == "all" || filterValueForInternships == "company";
        showProfessorInternshipApplications = filterValueForInternships == "all" || filterValueForInternships == "professor";

        try 
        {
            await Task.Delay(1000); // Simulate async operation
        }
        finally
        {
            StateHasChanged(); // Ensure UI updates even if delay fails
        }
    }


    private void SetTotalInternshipCount(int count)
    {
        totalInternshipCount = count;
        totalPagesForInternshipsToSee = (int)Math.Ceiling((double)totalInternshipCount / pageSizeForInternshipsToSee);
    }

    private bool IsPreviousDisabledForInternships => currentPageForInternshipsToSee == 1;
    private bool IsNextDisabledForInternships => currentPageForInternshipsToSee == totalPagesForInternshipsToSee;

    // Helper method to get row color
    private string GetInternshipRowColor(object application)
    {
        if (application is InternshipApplied companyApp)
        {
            return companyApp.InternshipStatusAppliedAtTheStudentSide switch
            {
                "Επιτυχής" => "lightgreen",
                "Απορρίφθηκε" => "lightcoral",
                "Απορρίφθηκε (Απόσυρση Θέσεως Από Εταιρία)" => "coral",
                "Αποσύρθηκε από τον φοιτητή" => "lightyellow",
                _ => "transparent"
            };
        }
        else if (application is ProfessorInternshipApplied professorApp)
        {
            return professorApp.InternshipStatusAppliedAtTheStudentSide switch
            {
                "Επιτυχής" => "lightgreen",
                "Απορρίφθηκε" => "lightcoral",
                "Απορρίφθηκε (Απόσυρση Θέσεως Από τον Καθηγητή)" => "coral",
                "Αποσύρθηκε από τον φοιτητή" => "lightyellow",
                _ => "transparent"
            };
        }
        return "transparent";
    }

    // Pagination variables
    private int currentThesisPage = 1;
    private int thesisPageSize = 3; // Adjust as needed


    // Method to reset to first page when filtering
    private async Task OnFilterChange_PaginationForStudentThesisSearch(ChangeEventArgs e)
    {
        currentThesisPage = 1; // Reset to first page when filter changes
        filterValue = e.Value?.ToString() ?? "all";
        // Your existing filter logic here...
        await LoadThesisData(); // Or whatever your data loading method is
        StateHasChanged();
    }

    private int currentJobPage = 1;
    private int jobPageSize = 3; // Adjust as needed
    private void ChangeJobPage(int newPage)
    {
        var totalPages = (int)Math.Ceiling((double)jobApplications.Count / jobPageSize);
        if (newPage > 0 && newPage <= totalPages)
        {
            currentJobPage = newPage;
        }
    }


    private int currentJobPositionPage = 1;
    private int jobPositionPageSize = 3; // Adjust as needed
    private void ChangeJobPositionPage(int newPage)
    {
        var publishedJobs = jobs?.Where(i => i.PositionStatus == "Δημοσιευμένη").ToList();
        if (publishedJobs != null)
        {
            var totalPages = (int)Math.Ceiling((double)publishedJobs.Count / jobPositionPageSize);
            if (newPage > 0 && newPage <= totalPages)
            {
                currentJobPositionPage = newPage;
            }
        }
    }

    private void GoToFirstPage()
    {
        currentPageForThesisToSee = 1;
    }

    private void GoToLastPage()
    {
        currentPageForThesisToSee = totalPagesForThesisToSee;
    }

    private void GoToPage(int pageNumber)
    {
        currentPageForThesisToSee = pageNumber;
    }

    private List<int> GetVisiblePages()
    {
        var pages = new List<int>();
        int current = currentPageForThesisToSee;
        int total = totalPagesForThesisToSee;
    
        pages.Add(1);
    
        if (current > 3)
        {
            pages.Add(-1);
        }
    
        int start = Math.Max(2, current - 1);
        int end = Math.Min(total - 1, current + 1);
    
        for (int i = start; i <= end; i++)
        {
            pages.Add(i);
        }
    
        if (current < total - 2)
        {
            pages.Add(-1);
        }
    
        if (total > 1)
        {
            pages.Add(total);
        }
    
        return pages;
    }

    private string GetPageButtonStyle(int pageNumber)
    {
        return pageNumber == currentPageForThesisToSee 
            ? "background-color: #0056b3; color: white;" 
            : "background-color: #007bff; color: white;";
    }

    private List<int> GetVisiblePages(int currentPage, int totalPages)
    {
        var pages = new List<int>();
        
        // Always show first page
        pages.Add(1);
        
        // Show pages around current page
        if (currentPage > 3) pages.Add(-1); // Ellipsis
        
        int start = Math.Max(2, currentPage - 1);
        int end = Math.Min(totalPages - 1, currentPage + 1);
        
        for (int i = start; i <= end; i++)
        {
            pages.Add(i);
        }
        
        if (currentPage < totalPages - 2) pages.Add(-1); // Ellipsis
        
        // Always show last page if different from first
        if (totalPages > 1) pages.Add(totalPages);
        
        return pages;
    }


    private int totalThesisPages_SearchThesisAsStudent => (int)Math.Ceiling((double)publishedTheses.Count / thesisPageSize);
    private void ChangeThesisPage(int newPage)
    {
        if (newPage > 0 && newPage <= totalThesisPages_SearchThesisAsStudent)
        {
            currentThesisPage = newPage;
            StateHasChanged(); // Ensure UI updates
        }
    }


    private void GoToFirstPageForInternships()
    {
        currentPageForInternshipsToSee = 1;
        StateHasChanged();
    }

    private void GoToLastPageForInternships()
    {
        currentPageForInternshipsToSee = totalPagesForInternshipsToSee;
        StateHasChanged();
    }

    private void GoToPageForInternships(int page)
    {
        if (page > 0 && page <= totalPagesForInternshipsToSee)
        {
            currentPageForInternshipsToSee = page;
            StateHasChanged();
        }
    }

    private List<int> GetVisiblePagesForInternships()
    {
        var pages = new List<int>();
        int current = currentPageForInternshipsToSee;
        int total = totalPagesForInternshipsToSee;
        
        // Always show first page
        pages.Add(1);
        
        // Show pages around current page
        if (current > 3) pages.Add(-1); // Ellipsis
        
        int start = Math.Max(2, current - 1);
        int end = Math.Min(total - 1, current + 1);
        
        for (int i = start; i <= end; i++)
        {
            pages.Add(i);
        }
        
        if (current < total - 2) pages.Add(-1); // Ellipsis
        
        // Always show last page if different from first
        if (total > 1) pages.Add(total);
        
        return pages;
    }

    // Keep your existing methods
    private void PreviousPageForInternshipsToSee()
    {
        if (currentPageForInternshipsToSee > 1)
        {
            currentPageForInternshipsToSee--;
            StateHasChanged();
        }
    }

    private void NextPageForInternshipsToSee()
    {
        if (currentPageForInternshipsToSee < totalPagesForInternshipsToSee)
        {
            currentPageForInternshipsToSee++;
            StateHasChanged();
        }
    }

    // Pagination methods for internships


// Pagination methods
    private void GoToFirstInternshipPage()
    {
        currentInternshipPage = 1;
        StateHasChanged();
    }

    private void GoToLastInternshipPage()
    {
        currentInternshipPage = totalInternshipPages;
        StateHasChanged();
    }

    private void GoToInternshipPage(int page)
    {
        if (page > 0 && page <= totalInternshipPages)
        {
            currentInternshipPage = page;
            StateHasChanged();
        }
    }

    private void PreviousInternshipPage()
    {
        if (currentInternshipPage > 1)
        {
            currentInternshipPage--;
            StateHasChanged();
        }
    }

    private void NextInternshipPage()
    {
        if (currentInternshipPage < totalInternshipPages)
        {
            currentInternshipPage++;
            StateHasChanged();
        }
    }

    private List<int> GetVisibleInternshipPages()
    {
        var pages = new List<int>();
        int current = currentInternshipPage;
        int total = totalInternshipPages;
        
        // Always show first page
        pages.Add(1);
        
        // Show pages around current page
        if (current > 3) pages.Add(-1); // Ellipsis
        
        int start = Math.Max(2, current - 1);
        int end = Math.Min(total - 1, current + 1);
        
        for (int i = start; i <= end; i++)
        {
            pages.Add(i);
        }
        
        if (current < total - 2) pages.Add(-1); // Ellipsis
        
        // Always show last page if different from first
        if (total > 1) pages.Add(total);
        
        return pages;
    }

    // Method to get paginated internships (3 per page)
    private IEnumerable<AllInternships> GetPaginatedInternships()
    {
        return publishedInternships?
            .Skip((currentInternshipPage - 1) * InternshipsPerPage)
            .Take(InternshipsPerPage);
    }

    private int currentPageForAnnouncements = 1;
    private int pageSizeForAnnouncements = 3;
    private int totalPagesForAnnouncements => (int)Math.Ceiling((double)(FilteredAnnouncements?.Count ?? 0) / pageSizeForAnnouncements);
    private IEnumerable<AnnouncementAsCompany> GetPaginatedAnnouncements()
    {
        return FilteredAnnouncements?
            .Skip((currentPageForAnnouncements - 1) * pageSizeForAnnouncements)
            .Take(pageSizeForAnnouncements) ?? Enumerable.Empty<AnnouncementAsCompany>();
    }

    private List<int> GetVisiblePagesForAnnouncements()
    {
        var pages = new List<int>();
        int current = currentPageForAnnouncements;
        int total = totalPagesForAnnouncements;
    
        pages.Add(1);
        if (current > 3) pages.Add(-1);
    
        int start = Math.Max(2, current - 1);
        int end = Math.Min(total - 1, current + 1);
    
        for (int i = start; i <= end; i++) pages.Add(i);
    
        if (current < total - 2) pages.Add(-1);
        if (total > 1) pages.Add(total);
    
        return pages;
    }

    private void GoToFirstPageForAnnouncements() => ChangePageForAnnouncements(1);
    private void GoToLastPageForAnnouncements() => ChangePageForAnnouncements(totalPagesForAnnouncements);
    private void PreviousPageForAnnouncements() => ChangePageForAnnouncements(currentPageForAnnouncements - 1);
    private void NextPageForAnnouncements() => ChangePageForAnnouncements(currentPageForAnnouncements + 1);

    private void GoToPageForAnnouncements(int page)
    {
        if (page > 0 && page <= totalPagesForAnnouncements)
        {
            currentPageForAnnouncements = page;
            StateHasChanged();
        }
    }

    private void ChangePageForAnnouncements(int newPage)
    {
        if (newPage > 0 && newPage <= totalPagesForAnnouncements)
        {
            currentPageForAnnouncements = newPage;
            StateHasChanged();
        }
    }

    // Pagination variables for jobs
    private int currentPageForJobs = 1;
    private int JobsPerPage = 3;
    private int totalPagesForJobs => 
        (int)Math.Ceiling((double)(GetFilteredJobs()?.Count() ?? 0) / JobsPerPage);

    // Get filtered jobs based on status
    private IEnumerable<CompanyJob> GetFilteredJobs()
    {
        return jobs?
            .Where(j => selectedStatusFilterForJobs == "Όλα" || j.PositionStatus == selectedStatusFilterForJobs)
            ?? Enumerable.Empty<CompanyJob>();
    }

    // Get paginated jobs
    private IEnumerable<CompanyJob> GetPaginatedJobs()
    {
        return GetFilteredJobs()
            .Skip((currentPageForJobs - 1) * JobsPerPage)
            .Take(JobsPerPage);
    }

    // Navigation methods
    private void GoToFirstPageForJobs()
    {
        currentPageForJobs = 1;
        StateHasChanged();
    }

    private void GoToLastPageForJobs()
    {
        currentPageForJobs = totalPagesForJobs;
        StateHasChanged();
    }

    private void PreviousPageForJobs()
    {
        if (currentPageForJobs > 1)
        {
            currentPageForJobs--;
            StateHasChanged();
        }
    }

    private void NextPageForJobs()
    {
        if (currentPageForJobs < totalPagesForJobs)
        {
            currentPageForJobs++;
            StateHasChanged();
        }
    }

    private void GoToPageForJobs(int page)
    {
        if (page > 0 && page <= totalPagesForJobs)
        {
            currentPageForJobs = page;
            StateHasChanged();
        }
    }

    private List<int> GetVisiblePagesForJobs()
    {
        var pages = new List<int>();
        int current = currentPageForJobs;
        int total = totalPagesForJobs;
    
        pages.Add(1);
        if (current > 3) pages.Add(-1);
    
        int start = Math.Max(2, current - 1);
        int end = Math.Min(total - 1, current + 1);
    
        for (int i = start; i <= end; i++) pages.Add(i);
    
        if (current < total - 2) pages.Add(-1);
        if (total > 1) pages.Add(total);
    
        return pages;
    }

    // Pagination variables for company internships
    private int currentPageForCompanyInternships = 1;
    private int companyInternshipsPerPage = 3;
    private int totalPagesForCompanyInternships => 
        (int)Math.Ceiling((double)(GetFilteredCompanyInternships()?.Count() ?? 0) / companyInternshipsPerPage);

    // Get filtered company internships based on status
    private IEnumerable<CompanyInternship> GetFilteredCompanyInternships()
    {
        return internships?
            .Where(i => selectedStatusFilterForInternships == "Όλα" || i.CompanyUploadedInternshipStatus == selectedStatusFilterForInternships)
            ?? Enumerable.Empty<CompanyInternship>();
    }

    // Get paginated company internships
    private IEnumerable<CompanyInternship> GetPaginatedCompanyInternships()
    {
        return GetFilteredCompanyInternships()
            .Skip((currentPageForCompanyInternships - 1) * companyInternshipsPerPage)
            .Take(companyInternshipsPerPage);
    }

    // Navigation methods
    private void GoToFirstPageForCompanyInternships()
    {
        currentPageForCompanyInternships = 1;
        StateHasChanged();
    }

    private void GoToLastPageForCompanyInternships()
    {
        currentPageForCompanyInternships = totalPagesForCompanyInternships;
        StateHasChanged();
    }

    private void PreviousPageForCompanyInternships()
    {
        if (currentPageForCompanyInternships > 1)
        {
            currentPageForCompanyInternships--;
            StateHasChanged();
        }
    }

    private void NextPageForCompanyInternships()
    {
        if (currentPageForCompanyInternships < totalPagesForCompanyInternships)
        {
            currentPageForCompanyInternships++;
            StateHasChanged();
        }
    }

    private void GoToPageForCompanyInternships(int page)
    {
        if (page > 0 && page <= totalPagesForCompanyInternships)
        {
            currentPageForCompanyInternships = page;
            StateHasChanged();
        }
    }

    private List<int> GetVisiblePagesForCompanyInternships()
    {
        var pages = new List<int>();
        int current = currentPageForCompanyInternships;
        int total = totalPagesForCompanyInternships;
    
        pages.Add(1);
        if (current > 3) pages.Add(-1);
    
        int start = Math.Max(2, current - 1);
        int end = Math.Min(total - 1, current + 1);
    
        for (int i = start; i <= end; i++) pages.Add(i);
    
        if (current < total - 2) pages.Add(-1);
        if (total > 1) pages.Add(total);
    
        return pages;
    }

    // Pagination variables for company theses
    private int currentPageForCompanyTheses = 1;
    private int CompanyThesesPerPage = 3;
    private int totalPagesForCompanyTheses => 
        (int)Math.Ceiling((double)(GetFilteredCompanyTheses()?.Count() ?? 0) / CompanyThesesPerPage);

    // Get filtered company theses based on status
    private IEnumerable<CompanyThesis> GetFilteredCompanyTheses()
    {
        return companytheses?
            .Where(j => selectedStatusFilterForCompanyTheses == "Όλα" || j.CompanyThesisStatus == selectedStatusFilterForCompanyTheses)
            ?? Enumerable.Empty<CompanyThesis>();
    }

    // Get paginated company theses
    private IEnumerable<CompanyThesis> GetPaginatedCompanyTheses()
    {
        return GetFilteredCompanyTheses()
            .Skip((currentPageForCompanyTheses - 1) * CompanyThesesPerPage)
            .Take(CompanyThesesPerPage);
    }

    // Navigation methods
    private void GoToFirstPageForCompanyTheses()
    {
        currentPageForCompanyTheses = 1;
        StateHasChanged();
    }

    private void GoToLastPageForCompanyTheses()
    {
        currentPageForCompanyTheses = totalPagesForCompanyTheses;
        StateHasChanged();
    }

    private void PreviousPageForCompanyTheses()
    {
        if (currentPageForCompanyTheses > 1)
        {
            currentPageForCompanyTheses--;
            StateHasChanged();
        }
    }

    private void NextPageForCompanyTheses()
    {
        if (currentPageForCompanyTheses < totalPagesForCompanyTheses)
        {
            currentPageForCompanyTheses++;
            StateHasChanged();
        }
    }

    private void GoToPageForCompanyTheses(int page)
    {
        if (page > 0 && page <= totalPagesForCompanyTheses)
        {
            currentPageForCompanyTheses = page;
            StateHasChanged();
        }
    }

    // Make sure to reset to page 1 when filter changes
    private void HandleStatusFilterChangeForCompanyTheses(ChangeEventArgs e)
    {
        selectedStatusFilterForCompanyTheses = e.Value.ToString();
        currentPageForCompanyTheses = 1; // Reset to first page
        StateHasChanged();
    }

        private List<int> GetVisiblePagesForCompanyTheses()
    {
        var pages = new List<int>();
        int current = currentPageForCompanyTheses;
        int total = totalPagesForCompanyTheses;
    
        pages.Add(1);
        if (current > 3) pages.Add(-1);
    
        int start = Math.Max(2, current - 1);
        int end = Math.Min(total - 1, current + 1);
    
        for (int i = start; i <= end; i++) pages.Add(i);
    
        if (current < total - 2) pages.Add(-1);
        if (total > 1) pages.Add(total);
    
        return pages;
    }

    // Pagination variables for company events
    private int currentPageForCompanyEvents = 1;
    private int CompanyEventsPerPage = 3;
    private int totalPagesForCompanyEvents_CompanyEventsToSee => 
        (int)Math.Ceiling((double)(FilteredCompanyEvents?.Count ?? 0) / CompanyEventsPerPage);

    // Get paginated company events
    private IEnumerable<CompanyEvent> GetPaginatedCompanyEvents()
    {
        return FilteredCompanyEvents?
            .Skip((currentPageForCompanyEvents - 1) * CompanyEventsPerPage)
            .Take(CompanyEventsPerPage) ?? Enumerable.Empty<CompanyEvent>();
    }

    private List<int> GetVisiblePagesForCompanyEvents()
    {
        var pages = new List<int>();
        int current = currentPageForCompanyEvents;
        int total = totalPagesForCompanyEvents_CompanyEventsToSee;
    
        pages.Add(1);
        if (current > 3) pages.Add(-1);
    
        int start = Math.Max(2, current - 1);
        int end = Math.Min(total - 1, current + 1);
    
        for (int i = start; i <= end; i++) pages.Add(i);
    
        if (current < total - 2) pages.Add(-1);
        if (total > 1) pages.Add(total);
    
        return pages;
    }

    // Navigation methods
    private void GoToFirstPageForCompanyEvents()
    {
        currentPageForCompanyEvents = 1;
        StateHasChanged();
    }

    private void GoToLastPageForCompanyEvents()
    {
        currentPageForCompanyEvents = totalPagesForCompanyEvents_CompanyEventsToSee;
        StateHasChanged();
    }

    private void PreviousPageForCompanyEvents()
    {
        if (currentPageForCompanyEvents > 1)
        {
            currentPageForCompanyEvents--;
            StateHasChanged();
        }
    }

    private void NextPageForCompanyEvents()
    {
        if (currentPageForCompanyEvents < totalPagesForCompanyEvents_CompanyEventsToSee)
        {
            currentPageForCompanyEvents++;
            StateHasChanged();
        }
    }

    private void GoToPageForCompanyEvents(int page)
    {
        if (page > 0 && page <= totalPagesForCompanyEvents_CompanyEventsToSee)
        {
            currentPageForCompanyEvents = page;
            StateHasChanged();
        }
    }

    // Renamed pagination variables
    private int currentPageForProfessorAnnouncements_ProfessorAnnouncements = 1;
    private int professorAnnouncementsPerPage_SeeMyUploadedAnnouncementsAsProfessor = 3; // Default value
    private int totalPagesForProfessorAnnouncements_ProfessorAnnouncements => 
        (int)Math.Ceiling((double)(FilteredAnnouncementsAsProfessor?.Count ?? 0) / professorAnnouncementsPerPage_SeeMyUploadedAnnouncementsAsProfessor);

    // Renamed methods
    private IEnumerable<AnnouncementAsProfessor> GetPaginatedProfessorAnnouncements_ProfessorAnnouncements()
    {
        return FilteredAnnouncementsAsProfessor?
            .Skip((currentPageForProfessorAnnouncements_ProfessorAnnouncements - 1) * professorAnnouncementsPerPage_SeeMyUploadedAnnouncementsAsProfessor)
            .Take(professorAnnouncementsPerPage_SeeMyUploadedAnnouncementsAsProfessor) ?? Enumerable.Empty<AnnouncementAsProfessor>();
    }

    private List<int> GetVisiblePagesForProfessorAnnouncements_ProfessorAnnouncements()
    {
        var pages = new List<int>();
        int current = currentPageForProfessorAnnouncements_ProfessorAnnouncements;
        int total = totalPagesForProfessorAnnouncements_ProfessorAnnouncements;

        // Always add first page
        pages.Add(1);

        // Add ellipsis (...) if current page is far from the start
        if (current > 3) 
        {
            pages.Add(-1); // -1 represents ellipsis
        }

        // Add pages around current page (1 page before & after)
        int start = Math.Max(2, current - 1);
        int end = Math.Min(total - 1, current + 1);

        for (int i = start; i <= end; i++) 
        {
            pages.Add(i);
        }

        // Add ellipsis (...) if current page is far from the end
        if (current < total - 2) 
        {
            pages.Add(-1);
        }

        // Add last page if there's more than 1 page
        if (total > 1) 
        {
            pages.Add(total);
        }

        return pages;
    }

    // Renamed navigation methods
    private void GoToFirstPageForProfessorAnnouncements_ProfessorAnnouncements()
    {
        currentPageForProfessorAnnouncements_ProfessorAnnouncements = 1;
        StateHasChanged();
    }

    private void GoToLastPageForProfessorAnnouncements_ProfessorAnnouncements()
    {
        currentPageForProfessorAnnouncements_ProfessorAnnouncements = totalPagesForProfessorAnnouncements_ProfessorAnnouncements;
        StateHasChanged();
    }

    private void PreviousPageForProfessorAnnouncements_ProfessorAnnouncements()
    {
        if (currentPageForProfessorAnnouncements_ProfessorAnnouncements > 1)
        {
            currentPageForProfessorAnnouncements_ProfessorAnnouncements--;
            StateHasChanged();
        }
    }

    private void NextPageForProfessorAnnouncements_ProfessorAnnouncements()
    {
        if (currentPageForProfessorAnnouncements_ProfessorAnnouncements < totalPagesForProfessorAnnouncements_ProfessorAnnouncements)
        {
            currentPageForProfessorAnnouncements_ProfessorAnnouncements++;
            StateHasChanged();
        }
    }

    private void GoToPageForProfessorAnnouncements_ProfessorAnnouncements(int page)
    {
        if (page > 0 && page <= totalPagesForProfessorAnnouncements_ProfessorAnnouncements)
        {
            currentPageForProfessorAnnouncements_ProfessorAnnouncements = page;
            StateHasChanged();
        }
    }

    // Renamed filter handler
    private void HandleStatusFilterChangeForProfessorAnnouncements_ProfessorAnnouncements(ChangeEventArgs e)
    {
        // Your existing filter logic
        currentPageForProfessorAnnouncements_ProfessorAnnouncements = 1;
        StateHasChanged();
    }

    // Pagination variables for professor theses
    private int currentPageForProfessorTheses = 1;
    private int ProfessorThesesPerPage = 3;
    private int totalPagesForProfessorTheses => 
        (int)Math.Ceiling((double)(GetFilteredProfessorTheses()?.Count() ?? 0) / ProfessorThesesPerPage);

    // Get filtered professor theses based on status
    private IEnumerable<ProfessorThesis> GetFilteredProfessorTheses()
    {
        return FilteredThesesAsProfessor?
            .Where(j => selectedStatusFilterForThesesAsProfessor == "Όλα" || j.ThesisStatus == selectedStatusFilterForThesesAsProfessor)
            ?? Enumerable.Empty<ProfessorThesis>();
    }

    // Get paginated professor theses
    private IEnumerable<ProfessorThesis> GetPaginatedProfessorTheses()
    {
        return GetFilteredProfessorTheses()
            .Skip((currentPageForProfessorTheses - 1) * ProfessorThesesPerPage)
            .Take(ProfessorThesesPerPage);
    }

    private List<int> GetVisiblePagesForProfessorTheses()
    {
        var pages = new List<int>();
        int current = currentPageForProfessorTheses;
        int total = totalPagesForProfessorTheses;
    
        pages.Add(1);
        if (current > 3) pages.Add(-1);
    
        int start = Math.Max(2, current - 1);
        int end = Math.Min(total - 1, current + 1);
    
        for (int i = start; i <= end; i++) pages.Add(i);
    
        if (current < total - 2) pages.Add(-1);
        if (total > 1) pages.Add(total);
    
        return pages;
    }

    // Navigation methods
    private void GoToFirstPageForProfessorTheses()
    {
        currentPageForProfessorTheses = 1;
        StateHasChanged();
    }

    private void GoToLastPageForProfessorTheses()
    {
        currentPageForProfessorTheses = totalPagesForProfessorTheses;
        StateHasChanged();
    }

    private void PreviousPageForProfessorTheses()
    {
        if (currentPageForProfessorTheses > 1)
        {
            currentPageForProfessorTheses--;
            StateHasChanged();
        }
    }

    private void NextPageForProfessorTheses()
    {
        if (currentPageForProfessorTheses < totalPagesForProfessorTheses)
        {
            currentPageForProfessorTheses++;
            StateHasChanged();
        }
    }

    private void GoToPageForProfessorTheses(int page)
    {
        if (page > 0 && page <= totalPagesForProfessorTheses)
        {
            currentPageForProfessorTheses = page;
            StateHasChanged();
        }
    }

    // Make sure to reset to page 1 when filter changes
    private void HandleStatusFilterChangeForProfessorTheses(ChangeEventArgs e)
    {
        selectedStatusFilterForThesesAsProfessor = e.Value.ToString();
        currentPageForProfessorTheses = 1; // Reset to first page
        StateHasChanged();
    }

    private int currentPage_CompanyTheses = 1;
    private int itemsPerPage_CompanyTheses = 3; // adjust as needed
    private int totalPages_CompanyTheses =>
        (int)Math.Ceiling((double)(companyThesesResultsToFindThesesAsProfessor?.Count ?? 0) / itemsPerPage_CompanyTheses);

    private IEnumerable<CompanyThesis> GetPaginatedCompanyTheses_AsProfessor()
    {
        return companyThesesResultsToFindThesesAsProfessor?
            .Skip((currentPage_CompanyTheses - 1) * itemsPerPage_CompanyTheses)
            .Take(itemsPerPage_CompanyTheses) ?? Enumerable.Empty<CompanyThesis>();
    }

    private List<int> GetVisiblePages_CompanyTheses_AsProfessor()
    {
        var pages = new List<int>();
        int current = currentPage_CompanyTheses;
        int total = totalPages_CompanyTheses;

        pages.Add(1);
        if (current > 3) pages.Add(-1);

        int start = Math.Max(2, current - 1);
        int end = Math.Min(total - 1, current + 1);

        for (int i = start; i <= end; i++) pages.Add(i);
        if (current < total - 2) pages.Add(-1);

        if (total > 1) pages.Add(total);
        return pages;
    }

    private void GoToFirstPage_CompanyTheses() => currentPage_CompanyTheses = 1;
    private void GoToLastPage_CompanyTheses() => currentPage_CompanyTheses = totalPages_CompanyTheses;
    private void PreviousPage_CompanyTheses()
    {
        if (currentPage_CompanyTheses > 1) currentPage_CompanyTheses--;
    }
    private void NextPage_CompanyTheses()
    {
        if (currentPage_CompanyTheses < totalPages_CompanyTheses) currentPage_CompanyTheses++;
    }
    private void GoToPage_CompanyTheses(int page)
    {
        if (page >= 1 && page <= totalPages_CompanyTheses)
            currentPage_CompanyTheses = page;
    }

    private int currentPage_ProfessorInternships = 1;
    private int itemsPerPage_ProfessorInternships = 3;
    private int totalPages_ProfessorInternships =>
        (int)Math.Ceiling((double)(professorInternships?.Count ?? 0) / itemsPerPage_ProfessorInternships);

    private IEnumerable<ProfessorInternship> GetPaginatedProfessorInternships()
    {
        return professorInternships?
            .Skip((currentPage_ProfessorInternships - 1) * itemsPerPage_ProfessorInternships)
            .Take(itemsPerPage_ProfessorInternships) ?? Enumerable.Empty<ProfessorInternship>();
    }

    private List<int> GetVisiblePages_ProfessorInternships()
    {
        var pages = new List<int>();
        int current = currentPage_ProfessorInternships;
        int total = totalPages_ProfessorInternships;

        pages.Add(1);
        if (current > 3) pages.Add(-1);

        int start = Math.Max(2, current - 1);
        int end = Math.Min(total - 1, current + 1);

        for (int i = start; i <= end; i++) pages.Add(i);
        if (current < total - 2) pages.Add(-1);

        if (total > 1) pages.Add(total);
        return pages;
    }

    private void GoToFirstPage_ProfessorInternships() => currentPage_ProfessorInternships = 1;
    private void GoToLastPage_ProfessorInternships() => currentPage_ProfessorInternships = totalPages_ProfessorInternships;
    private void PreviousPage_ProfessorInternships()
    {
        if (currentPage_ProfessorInternships > 1) currentPage_ProfessorInternships--;
    }
    private void NextPage_ProfessorInternships()
    {
        if (currentPage_ProfessorInternships < totalPages_ProfessorInternships) currentPage_ProfessorInternships++;
    }
    private void GoToPage_ProfessorInternships(int page)
    {
        if (page >= 1 && page <= totalPages_ProfessorInternships)
            currentPage_ProfessorInternships = page;
    }

    private int currentPage_ProfessorEvents = 1;
    private int itemsPerPage_ProfessorEvents = 3;
    private int totalPages_ProfessorEvents =>
        (int)Math.Ceiling((double)(FilteredProfessorEvents?.Count ?? 0) / itemsPerPage_ProfessorEvents);

    private IEnumerable<ProfessorEvent> GetPaginatedProfessorEvents()
    {
        return FilteredProfessorEvents?
            .Skip((currentPage_ProfessorEvents - 1) * itemsPerPage_ProfessorEvents)
            .Take(itemsPerPage_ProfessorEvents) ?? Enumerable.Empty<ProfessorEvent>();
    }

    private List<int> GetVisiblePages_ProfessorEvents()
    {
        var pages = new List<int>();
        int current = currentPage_ProfessorEvents;
        int total = totalPages_ProfessorEvents;

        pages.Add(1);
        if (current > 3) pages.Add(-1);

        int start = Math.Max(2, current - 1);
        int end = Math.Min(total - 1, current + 1);

        for (int i = start; i <= end; i++) pages.Add(i);
        if (current < total - 2) pages.Add(-1);

        if (total > 1) pages.Add(total);
        return pages;
    }

    private void GoToFirstPage_ProfessorEvents() => currentPage_ProfessorEvents = 1;
    private void GoToLastPage_ProfessorEvents() => currentPage_ProfessorEvents = totalPages_ProfessorEvents;
    private void PreviousPage_ProfessorEvents()
    {
        if (currentPage_ProfessorEvents > 1) currentPage_ProfessorEvents--;
    }
    private void NextPage_ProfessorEvents()
    {
        if (currentPage_ProfessorEvents < totalPages_ProfessorEvents) currentPage_ProfessorEvents++;
    }
    private void GoToPage_ProfessorEvents(int page)
    {
        if (page >= 1 && page <= totalPages_ProfessorEvents)
            currentPage_ProfessorEvents = page;
    }

    private int currentPage_ProfessorTheses = 1;
    private int itemsPerPage_ProfessorTheses = 3; // Adjust as needed
    private int totalPages_ProfessorTheses =>
        (int)Math.Ceiling((double)(professorThesesResultsToFindThesesAsCompany?.Count ?? 0) / itemsPerPage_ProfessorTheses);

    private IEnumerable<ProfessorThesis> GetPaginatedProfessorTheses_AsCompany()
    {
        return professorThesesResultsToFindThesesAsCompany?
            .Skip((currentPage_ProfessorTheses - 1) * itemsPerPage_ProfessorTheses)
            .Take(itemsPerPage_ProfessorTheses) ?? Enumerable.Empty<ProfessorThesis>();
    }

    private List<int> GetVisiblePages_ProfessorTheses_AsCompany()
    {
        var pages = new List<int>();
        int current = currentPage_ProfessorTheses;
        int total = totalPages_ProfessorTheses;

        pages.Add(1);
        if (current > 3) pages.Add(-1);

        int start = Math.Max(2, current - 1);
        int end = Math.Min(total - 1, current + 1);

        for (int i = start; i <= end; i++) pages.Add(i);
        if (current < total - 2) pages.Add(-1);

        if (total > 1) pages.Add(total);
        return pages;
    }

    private void GoToFirstPage_ProfessorTheses() => currentPage_ProfessorTheses = 1;
    private void GoToLastPage_ProfessorTheses() => currentPage_ProfessorTheses = totalPages_ProfessorTheses;
    private void PreviousPage_ProfessorTheses()
    {
        if (currentPage_ProfessorTheses > 1) currentPage_ProfessorTheses--;
    }
    private void NextPage_ProfessorTheses()
    {
        if (currentPage_ProfessorTheses < totalPages_ProfessorTheses) currentPage_ProfessorTheses++;
    }
    private void GoToPage_ProfessorTheses(int page)
    {
        if (page >= 1 && page <= totalPages_ProfessorTheses)
            currentPage_ProfessorTheses = page;
    }

    // Pagination variables for events
    private int currentPageForEvents = 1;
    private int itemsPerPageForEvents = 3; // Adjust as needed
    private int totalPagesForEvents => 
        (int)Math.Ceiling((double)GetFilteredEventsCount() / itemsPerPageForEvents);

    // Helper methods for pagination
    private IEnumerable<CompanyEvent> GetPaginatedCompanyEvents_StudentSearchEvents()
    {
        if (selectedEventType == "professor") return Enumerable.Empty<CompanyEvent>();
    
        var filtered = companyEventsToSeeAsStudent;
        if (selectedEventType == "all" || selectedEventType == "company")
        {
            return filtered
                .Skip((currentPageForEvents - 1) * itemsPerPageForEvents)
                .Take(itemsPerPageForEvents);
        }
        return Enumerable.Empty<CompanyEvent>();
    }

    private IEnumerable<ProfessorEvent> GetPaginatedProfessorEvents_StudentSearchEvents()
    {
        if (selectedEventType == "company") return Enumerable.Empty<ProfessorEvent>();
    
        var filtered = professorEventsToSeeAsStudent;
        if (selectedEventType == "all" || selectedEventType == "professor")
        {
            return filtered
                .Skip((currentPageForEvents - 1) * itemsPerPageForEvents)
                .Take(itemsPerPageForEvents);
        }
        return Enumerable.Empty<ProfessorEvent>();
    }

    private int GetFilteredEventsCount()
    {
        int count = 0;
    
        if (selectedEventType == "all" || selectedEventType == "company")
        {
            count += companyEventsToSeeAsStudent?.Count() ?? 0;
        }
    
        if (selectedEventType == "all" || selectedEventType == "professor")
        {
            count += professorEventsToSeeAsStudent?.Count() ?? 0;
        }
    
        return count;
    }

    // Pagination methods
    private List<int> GetVisiblePagesForEvents()
    {
        var pages = new List<int>();
        int current = currentPageForEvents;
        int total = totalPagesForEvents;

        pages.Add(1);
        if (current > 3) pages.Add(-1);

        int start = Math.Max(2, current - 1);
        int end = Math.Min(total - 1, current + 1);

        for (int i = start; i <= end; i++) pages.Add(i);

        if (current < total - 2) pages.Add(-1);
        if (total > 1) pages.Add(total);

        return pages;
    }

    private void GoToFirstPageForEvents() => currentPageForEvents = 1;
    private void PreviousPageForEvents() => currentPageForEvents = Math.Max(1, currentPageForEvents - 1);
    private void NextPageForEvents() => currentPageForEvents = Math.Min(totalPagesForEvents, currentPageForEvents + 1);
    private void GoToLastPageForEvents() => currentPageForEvents = totalPagesForEvents;
    private void GoToPageForEvents(int page) => currentPageForEvents = page;

    private void OnPageSizeChange_SearchForThesisAsStudent(ChangeEventArgs e)
    {
        if (int.TryParse(e.Value?.ToString(), out int newSize) && newSize > 0)
        {
            thesisPageSize = newSize;
            currentThesisPage = 1; // Reset to first page when changing page size (Idio approach me tis alles methodous)
            StateHasChanged();
        }
    }

    private void OnPageSizeChangeForApplications_SeeMyThesisApplicationsAsStudent(ChangeEventArgs e)
    {
        if (int.TryParse(e.Value?.ToString(), out int newSize) && newSize > 0)
        {
            pageSizeForThesisToSee = newSize;
            currentPageForThesisToSee = 1;  //reset sto page poy 8elw otan allazw to dropdown menu
            StateHasChanged();
        }
    }

    private void OnJobPageSizeChange_SeeMyJobApplicationsAsStudent(ChangeEventArgs e)
    {
        if (int.TryParse(e.Value?.ToString(), out int newSize) && newSize > 0)
        {
            jobPageSize = newSize;
            currentJobPage = 1; 
            StateHasChanged();
        }
    }

    private void OnJobPageSizeChange_SearchForJobsAsStudent(ChangeEventArgs e)
    {
        if (int.TryParse(e.Value?.ToString(), out int newSize) && newSize > 0)
        {
            jobPositionPageSize = newSize;
            currentJobPositionPage = 1; 
            StateHasChanged();
        }
    }

    private void OnPageSizeChange_SeeMyInternshipApplicationsAsStudent(ChangeEventArgs e)
    {
        if (int.TryParse(e.Value?.ToString(), out int newSize) && newSize > 0)
        {
            pageSizeForInternshipsToSee = newSize;
            currentPageForInternshipsToSee = 1; 
            StateHasChanged();
        }
    } 
    
    private void OnPageSizeChange_SearchForInternshipsAsStudent(ChangeEventArgs e)
    {
        if (int.TryParse(e.Value?.ToString(), out int newSize) && newSize > 0)
        {
            InternshipsPerPage = newSize;
            currentInternshipPage = 1; 
            StateHasChanged();
        }
    }

    private void OnPageSizeChange_SearchForEventsAsStudent(ChangeEventArgs e)
    {
        if (int.TryParse(e.Value?.ToString(), out int newSize) && newSize > 0)
        {
            itemsPerPageForEvents = newSize;
            currentPageForEvents = 1; 
            StateHasChanged();
        }
    }

    private void OnPageSizeChange_SeeMyUploadedAnnouncementsAsCompany(ChangeEventArgs e)
    {
        if (int.TryParse(e.Value?.ToString(), out int newSize) && newSize > 0)
        {
            pageSizeForAnnouncements = newSize;
            currentPageForAnnouncements = 1; // Reset to first page when changing page size
            StateHasChanged();
        }
    }

    private void OnPageSizeChange_SeeMyUploadedJobsAsCompany(ChangeEventArgs e)
    {
        if (int.TryParse(e.Value?.ToString(), out int newSize) && newSize > 0)
        {
            JobsPerPage = newSize;
            currentPageForJobs = 1; // Reset to first page when changing page size
            StateHasChanged();
        }
    }

    private void OnPageSizeChange_SeeMyUploadedInternshipsAsCompany(ChangeEventArgs e)
    {
        if (int.TryParse(e.Value?.ToString(), out int newSize) && newSize > 0)
        {
            companyInternshipsPerPage = newSize;
            currentPageForCompanyInternships = 1; // Reset to first page when changing page size
            StateHasChanged();
        }
    }

    private void OnPageSizeChange_SeeMyUploadedThesesAsCompany(ChangeEventArgs e)
    {
        if (int.TryParse(e.Value?.ToString(), out int newSize) && newSize > 0)
        {
            CompanyThesesPerPage = newSize;
            currentPageForCompanyTheses = 1; // Reset to first page when changing page size
            StateHasChanged();
        }
    }

    private void OnPageSizeChange_SearchForProfessorThesesAsCompany(ChangeEventArgs e)
    {
        if (int.TryParse(e.Value?.ToString(), out int newSize) && newSize > 0)
        {
            itemsPerPage_ProfessorTheses = newSize;
            currentPage_ProfessorTheses = 1; // Reset to first page when changing page size
            StateHasChanged();
        }
    }

    private void OnPageSizeChange_SeeMyUploadedEventsAsCompany(ChangeEventArgs e)
    {
        if (int.TryParse(e.Value?.ToString(), out int newSize) && newSize > 0)
        {
            CompanyEventsPerPage = newSize;
            currentPageForCompanyEvents = 1; // Reset to first page when changing page size
            StateHasChanged();
        }
    }

    // Pagination variables for students search
    private int currentPageForStudents_SearchForStudentsAsCompany = 1;
    private int StudentsPerPage_SearchForStudentsAsCompany = 3; // Na einai initiated me 3 stoixeia ana selida tou pinaka
    private int totalPagesForStudents_SearchForStudentsAsCompany => 
        (int)Math.Ceiling((double)(searchResultsAsCompanyToFindStudent?.Count() ?? 0) / StudentsPerPage_SearchForStudentsAsCompany);

    // Get paginated students
    private IEnumerable<Student> GetPaginatedStudents_SearchForStudentsAsCompany()
    {
        return searchResultsAsCompanyToFindStudent?
            .Skip((currentPageForStudents_SearchForStudentsAsCompany - 1) * StudentsPerPage_SearchForStudentsAsCompany)
            .Take(StudentsPerPage_SearchForStudentsAsCompany)
            ?? Enumerable.Empty<Student>();
    }

    // Navigation methods
    private void GoToFirstPageForStudents_SearchForStudentsAsCompany()
    {
        currentPageForStudents_SearchForStudentsAsCompany = 1;
        StateHasChanged();
    }

    private void GoToLastPageForStudents_SearchForStudentsAsCompany()
    {
        currentPageForStudents_SearchForStudentsAsCompany = totalPagesForStudents_SearchForStudentsAsCompany;
        StateHasChanged();
    }

    private void PreviousPageForStudents_SearchForStudentsAsCompany()
    {
        if (currentPageForStudents_SearchForStudentsAsCompany > 1)
        {
            currentPageForStudents_SearchForStudentsAsCompany--;
            StateHasChanged();
        }
    }

    private void NextPageForStudents_SearchForStudentsAsCompany()
    {
        if (currentPageForStudents_SearchForStudentsAsCompany < totalPagesForStudents_SearchForStudentsAsCompany)
        {
            currentPageForStudents_SearchForStudentsAsCompany++;
            StateHasChanged();
        }
    }

    private void GoToPageForStudents_SearchForStudentsAsCompany(int page)
    {
        if (page > 0 && page <= totalPagesForStudents_SearchForStudentsAsCompany)
        {
            currentPageForStudents_SearchForStudentsAsCompany = page;
            StateHasChanged();
        }
    }

    private List<int> GetVisiblePagesForStudents_SearchForStudentsAsCompany()
    {
        var pages = new List<int>();
        int current = currentPageForStudents_SearchForStudentsAsCompany;
        int total = totalPagesForStudents_SearchForStudentsAsCompany;

        pages.Add(1);
        if (current > 3) pages.Add(-1);

        int start = Math.Max(2, current - 1);
        int end = Math.Min(total - 1, current + 1);

        for (int i = start; i <= end; i++) pages.Add(i);

        if (current < total - 2) pages.Add(-1);
        if (total > 1) pages.Add(total);

        return pages;
    }

    private void OnPageSizeChange_SearchForStudentsAsCompany(ChangeEventArgs e)
    {
        if (int.TryParse(e.Value?.ToString(), out int newSize) && newSize > 0)
        {
            StudentsPerPage_SearchForStudentsAsCompany = newSize;
            currentPageForStudents_SearchForStudentsAsCompany = 1; 
            StateHasChanged();
        }
    }


    private int ProfessorsPerPage_SearchForProfessorsAsStudent = 3; // Default value
    private int currentProfessorPage_SearchForProfessorsAsStudent = 1;

    private void OnPageSizeChange_SearchForProfessorsAsStudent(ChangeEventArgs e)
    {
        if (int.TryParse(e.Value?.ToString(), out int newSize) && newSize > 0)
        {
            ProfessorsPerPage_SearchForProfessorsAsStudent = newSize;
            currentProfessorPage_SearchForProfessorsAsStudent = 1;
            StateHasChanged();
        }
    }

    private IEnumerable<Professor> GetPaginatedProfessorResults()
    {
        return searchResultsAsCompanyToFindProfessor?
            .Skip((currentProfessorPage_SearchForProfessorsAsStudent - 1) * ProfessorsPerPage_SearchForProfessorsAsStudent)
            .Take(ProfessorsPerPage_SearchForProfessorsAsStudent) 
            ?? Enumerable.Empty<Professor>();
    }

    private int totalProfessorPages_SearchForProfessorsAsStudent => 
        searchResultsAsCompanyToFindProfessor != null 
            ? (int)Math.Ceiling((double)searchResultsAsCompanyToFindProfessor.Count / ProfessorsPerPage_SearchForProfessorsAsStudent) 
            : 1;

    private List<int> GetVisibleProfessorPages()
    {
        var pages = new List<int>();
        int currentPage = currentProfessorPage_SearchForProfessorsAsStudent;
        int totalPages = totalProfessorPages_SearchForProfessorsAsStudent;
    
        // Always show first page
        pages.Add(1);
    
        // Show pages around current page
        if (currentPage > 3) pages.Add(-1); // Ellipsis
    
        int start = Math.Max(2, currentPage - 1);
        int end = Math.Min(totalPages - 1, currentPage + 1);
    
        for (int i = start; i <= end; i++)
        {
            pages.Add(i);
        }
    
        if (currentPage < totalPages - 2) pages.Add(-1); // Ellipsis
    
        // Always show last page if different from first
        if (totalPages > 1) pages.Add(totalPages);
    
        return pages;
    }

    private void GoToFirstProfessorPage()
    {
        currentProfessorPage_SearchForProfessorsAsStudent = 1;
        StateHasChanged();
    }

    private void PreviousProfessorPage()
    {
        if (currentProfessorPage_SearchForProfessorsAsStudent > 1)
        {
            currentProfessorPage_SearchForProfessorsAsStudent--;
            StateHasChanged();
        }
    }

    private void NextProfessorPage()
    {
        if (currentProfessorPage_SearchForProfessorsAsStudent < totalProfessorPages_SearchForProfessorsAsStudent)
        {
            currentProfessorPage_SearchForProfessorsAsStudent++;
            StateHasChanged();
        }
    }

    private void GoToLastProfessorPage()
    {
        currentProfessorPage_SearchForProfessorsAsStudent = totalProfessorPages_SearchForProfessorsAsStudent;
        StateHasChanged();
    }

    private void GoToProfessorPage(int pageNumber)
    {
        if (pageNumber >= 1 && pageNumber <= totalProfessorPages_SearchForProfessorsAsStudent)
        {
            currentProfessorPage_SearchForProfessorsAsStudent = pageNumber;
            StateHasChanged();
        }
    }

    private void OnPageSizeChange_SeeMyUploadedAnnouncementsAsProfessor(ChangeEventArgs e)
    {
        if (int.TryParse(e.Value?.ToString(), out int newSize) && newSize > 0)
        {
            professorAnnouncementsPerPage_SeeMyUploadedAnnouncementsAsProfessor = newSize;
            currentPageForProfessorAnnouncements_ProfessorAnnouncements = 1; // Reset to first page
            StateHasChanged();
        }
    }

    private void OnPageSizeChange_SeeMyUploadedThesesAsProfessor(ChangeEventArgs e)
    {
        if (int.TryParse(e.Value?.ToString(), out int newSize) && newSize > 0)
        {
            ProfessorThesesPerPage = newSize;
            currentPageForProfessorTheses = 1; // Reset to first page
            StateHasChanged();
        }
    }

    private void OnPageSizeChange_SearchForCompanyThesesAsProfessor(ChangeEventArgs e)
    {
        if (int.TryParse(e.Value?.ToString(), out int newSize) && newSize > 0)
        {
            itemsPerPage_CompanyTheses = newSize;
            currentPage_CompanyTheses = 1; // Reset to first page
            StateHasChanged();
        }
    }

    private void OnPageSizeChange_SeeMyUploadedInternshipsAsProfessor(ChangeEventArgs e)
    {
        if (int.TryParse(e.Value?.ToString(), out int newSize) && newSize > 0)
        {
            itemsPerPage_ProfessorInternships = newSize;
            currentPage_ProfessorInternships = 1; 
            StateHasChanged();
        }
    }

    private void HandleStatusFilterChangeForProfessorInternships(ChangeEventArgs e)
    {
        selectedStatusFilterForProfessorInternships = e.Value.ToString();
        FilterProfessorInternships();
    }

    private void FilterProfessorInternships()
    {
        // Filter the internships based on the selected filter
        if (selectedStatusFilterForProfessorInternships == "Όλα")
        {
            FilteredInternshipsAsProfessor = professorInternships;
        }
        else
        {
            FilteredInternshipsAsProfessor = professorInternships
                .Where(i => i.ProfessorUploadedInternshipStatus == selectedStatusFilterForProfessorInternships)
                .ToList();
        }

        totalProfessorInternshipsCount = professorInternships.Count;
        publishedProfessorInternshipsCount = professorInternships
            .Count(i => i.ProfessorUploadedInternshipStatus == "Δημοσιευμένη");
        unpublishedProfessorInternshipsCount = professorInternships
            .Count(i => i.ProfessorUploadedInternshipStatus == "Μη Δημοσιευμένη");
        withdrawnProfessorInternshipsCount = professorInternships
            .Count(i => i.ProfessorUploadedInternshipStatus == "Αποσυρμένη");

        currentPage_ProfessorInternships = 1;
        StateHasChanged();
    }

    private void OnPageSizeChange_SeeMyUploadedEventsAsProfessor(ChangeEventArgs e)
    {
        if (int.TryParse(e.Value.ToString(), out int newSize))
        {
            itemsPerPage_ProfessorEvents = newSize;
            currentPage_ProfessorEvents = 1; // Reset to first page when changing page size
            StateHasChanged();
        }
    }

    private List<string> companyNameSuggestions = new List<string>();
    private void HandleCompanyInput(ChangeEventArgs e)
    {
        searchCompanyNameENGAsProfessorToFindCompany = e.Value?.ToString();
        if (!string.IsNullOrWhiteSpace(searchCompanyNameENGAsProfessorToFindCompany) && searchCompanyNameENGAsProfessorToFindCompany.Length >= 2)
        {
            companyNameSuggestions = dbContext.Companies
                .Where(c => c.CompanyNameENG.Contains(searchCompanyNameENGAsProfessorToFindCompany))
                .Select(c => c.CompanyNameENG)
                .Distinct()
                .ToList();
        }
        else
        {
            companyNameSuggestions.Clear();
        }
    }

    private void SelectCompanyNameSuggestion(string suggestion)
    {
        searchCompanyNameENGAsProfessorToFindCompany = suggestion;
        companyNameSuggestions.Clear();
    }

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    private List<string> companyNameSuggestionsAsRG = new List<string>();
    private void HandleCompanyInputAsRG(ChangeEventArgs e)
    {
        searchCompanyNameENGAsRGToFindCompany = e.Value?.ToString();
        if (!string.IsNullOrWhiteSpace(searchCompanyNameENGAsRGToFindCompany) && searchCompanyNameENGAsRGToFindCompany.Length >= 2)
        {
            companyNameSuggestionsAsRG = dbContext.Companies
                .Where(c => c.CompanyName.Contains(searchCompanyNameENGAsRGToFindCompany))
                .Select(c => c.CompanyName)
                .Distinct()
                .ToList();
        }
        else
        {
            companyNameSuggestionsAsRG.Clear();
        }
    }

    private void SelectCompanyNameSuggestionAsRG(string suggestion)
    {
        searchCompanyNameENGAsRGToFindCompany = suggestion;
        companyNameSuggestionsAsRG.Clear();
    }
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    private async Task HandleAreasOfInterestInput_WhenSearchForCompanyAsProfessor(ChangeEventArgs e)
    {
        searchCompanyAreasAsProfessorToFindCompany = e.Value?.ToString().Trim() ?? string.Empty;

        // Ensure areasOfInterestSuggestions is never null
        areasOfInterestSuggestions = new List<string>();

        if (searchCompanyAreasAsProfessorToFindCompany.Length >= 1)
        {
            try
            {
                // Fetch suggestions for Areas of Interest with 1+ characters
                areasOfInterestSuggestions = await Task.Run(() =>
                    dbContext.Areas
                        .Where(a => a.AreaName.Contains(searchCompanyAreasAsProfessorToFindCompany))
                        .Select(a => a.AreaName)
                        .Distinct()
                        .Take(10)
                        .ToList());
            }
            catch (Exception ex)
            {
                // Log the error for debugging purposes
                Console.WriteLine($"Error retrieving Areas of Interest from Database: {ex.Message}");
                areasOfInterestSuggestions = new List<string>();  // Fallback to empty list
            }
        }
        else
        {
            areasOfInterestSuggestions.Clear(); // Clear suggestions for fewer than 1 character
        }

        // Trigger UI refresh
        StateHasChanged();
    }

    private async Task HandleAreasOfInterestInput_WhenSearchForCompanyAsRG(ChangeEventArgs e)
    {
        searchCompanyAreasAsRGToFindCompany = e.Value?.ToString().Trim() ?? string.Empty;

        // Ensure areasOfInterestSuggestions is never null
        areasOfInterestSuggestions = new List<string>();

        if (searchCompanyAreasAsRGToFindCompany.Length >= 1)
        {
            try
            {
                // Fetch suggestions for Areas of Interest with 1+ characters
                areasOfInterestSuggestions = await Task.Run(() =>
                    dbContext.Areas
                        .Where(a => a.AreaName.Contains(searchCompanyAreasAsRGToFindCompany))
                        .Select(a => a.AreaName)
                        .Distinct()
                        .Take(10)
                        .ToList());
            }
            catch (Exception ex)
            {
                // Log the error for debugging purposes
                Console.WriteLine($"Error retrieving Areas of Interest from Database: {ex.Message}");
                areasOfInterestSuggestions = new List<string>();  // Fallback to empty list
            }
        }
        else
        {
            areasOfInterestSuggestions.Clear(); // Clear suggestions for fewer than 1 character
        }

        // Trigger UI refresh
        StateHasChanged();
    }

    private void SelectAreasOfInterestSuggestion_WhenSearchForCompanyAsProfessor(string suggestion)
    {
        if (!string.IsNullOrWhiteSpace(suggestion))
        {
            selectedAreasOfInterest.Add(suggestion);
            searchCompanyAreasAsProfessorToFindCompany = suggestion;
            areasOfInterestSuggestions.Clear();
            StateHasChanged();
        }
    }

    private void SelectAreasOfInterestSuggestion_WhenSearchForCompanyAsRG(string suggestion)
    {
        if (!string.IsNullOrWhiteSpace(suggestion))
        {
            selectedAreasOfInterest.Add(suggestion);
            searchCompanyAreasAsRGToFindCompany = suggestion;
            areasOfInterestSuggestions.Clear();
            StateHasChanged();
        }
    }

    private void RemoveSelectedAreaOfInterest_WhenSearchForCompanyAsProfessor(string area)
    {
        selectedAreasOfInterest.Remove(area);
        StateHasChanged();
    }

    private void RemoveSelectedAreaOfInterest_WhenSearchForCompanyAsRG(string area)
    {
        selectedAreasOfInterest.Remove(area);
        StateHasChanged();
    }

    // Pagination variables for student search as Professor
    private int currentPage_StudentSearch = 1;
    private int StudentSearchPerPage = 3; // Default value

    // Total pages calculation
    private int totalPages_StudentSearch => 
        (int)Math.Ceiling((double)(searchResultsAsProfessorToFindStudent?.Count ?? 0) / StudentSearchPerPage);


    private void OnPageSizeChangeForStudentSearch(ChangeEventArgs e)
    {
        if (int.TryParse(e.Value?.ToString(), out int newSize) && newSize > 0)
        {
            StudentSearchPerPage = newSize;
            currentPage_StudentSearch = 1; // Reset to first page
            StateHasChanged();
        }
    }

    private IEnumerable<Student> GetPaginatedStudentSearchResults()
    {
        return searchResultsAsProfessorToFindStudent?
            .Skip((currentPage_StudentSearch - 1) * StudentSearchPerPage)
            .Take(StudentSearchPerPage) ?? Enumerable.Empty<Student>();
    }

    private List<int> GetVisiblePages_StudentSearch()
    {
        var pages = new List<int>();
        int current = currentPage_StudentSearch;
        int total = totalPages_StudentSearch;

        pages.Add(1);
        if (current > 3) pages.Add(-1);

        int start = Math.Max(2, current - 1);
        int end = Math.Min(total - 1, current + 1);

        for (int i = start; i <= end; i++) pages.Add(i);
        if (current < total - 2) pages.Add(-1);

        if (total > 1) pages.Add(total);
        return pages;
    }

    private void GoToFirstPage_StudentSearch()
    {
        currentPage_StudentSearch = 1;
        StateHasChanged();
    }

    private void GoToLastPage_StudentSearch()
    {
        currentPage_StudentSearch = totalPages_StudentSearch;
        StateHasChanged();
    }

    private void PreviousPage_StudentSearch()
    {
        if (currentPage_StudentSearch > 1)
        {
            currentPage_StudentSearch--;
            StateHasChanged();
        }
    }

    private void NextPage_StudentSearch()
    {
        if (currentPage_StudentSearch < totalPages_StudentSearch)
        {
            currentPage_StudentSearch++;
            StateHasChanged();
        }
    }

    private void GoToPage_StudentSearch(int page)
    {
        if (page > 0 && page <= totalPages_StudentSearch)
        {
            currentPage_StudentSearch = page;
            StateHasChanged();
        }
    }

    // Pagination variables for company search
    private int currentPage_CompanySearch = 1;
    private int CompanySearchPerPage = 3; // Default value
    // Total pages calculation
    private int totalPages_CompanySearch => 
        (int)Math.Ceiling((double)(searchResultsAsProfessorToFindCompany?.Count ?? 0) / CompanySearchPerPage);


    // Pagination variables for company search as Research Group
    private int currentPage_CompanySearchAsRG = 1;
    private int CompanySearchPerPageAsRG = 3; // Default value
    // Total pages calculation
    private int totalPages_CompanySearchAsRG => 
        (int)Math.Ceiling((double)(searchResultsAsRGToFindCompany?.Count ?? 0) / CompanySearchPerPageAsRG);



    private void OnPageSizeChangeForCompanySearch(ChangeEventArgs e)
    {
        if (int.TryParse(e.Value?.ToString(), out int newSize) && newSize > 0)
        {
            CompanySearchPerPage = newSize;
            currentPage_CompanySearch = 1; // Reset to first page
            StateHasChanged();
        }
    }


    private IEnumerable<Company> GetPaginatedCompanySearchResults()
    {
        return searchResultsAsProfessorToFindCompany?
            .Skip((currentPage_CompanySearch - 1) * CompanySearchPerPage)
            .Take(CompanySearchPerPage) ?? Enumerable.Empty<Company>();
    }


    private List<int> GetVisiblePages_CompanySearch()
    {
        var pages = new List<int>();
        int current = currentPage_CompanySearch;
        int total = totalPages_CompanySearch;

        pages.Add(1);
        if (current > 3) pages.Add(-1);

        int start = Math.Max(2, current - 1);
        int end = Math.Min(total - 1, current + 1);

        for (int i = start; i <= end; i++) pages.Add(i);
        if (current < total - 2) pages.Add(-1);

        if (total > 1) pages.Add(total);
        return pages;
    }


    private void GoToFirstPage_CompanySearch()
    {
        currentPage_CompanySearch = 1;
        StateHasChanged();
    }

    private void GoToLastPage_CompanySearch()
    {
        currentPage_CompanySearch = totalPages_CompanySearch;
        StateHasChanged();
    }

    private void PreviousPage_CompanySearch()
    {
        if (currentPage_CompanySearch > 1)
        {
            currentPage_CompanySearch--;
            StateHasChanged();
        }
    }

    private void NextPage_CompanySearch()
    {
        if (currentPage_CompanySearch < totalPages_CompanySearch)
        {
            currentPage_CompanySearch++;
            StateHasChanged();
        }
    }

    private void GoToPage_CompanySearch(int page)
    {
        if (page > 0 && page <= totalPages_CompanySearch)
        {
            currentPage_CompanySearch = page;
            StateHasChanged();
        }
    }

//////////////////////////////////////////////////////////////////////////////////////////////////
    private void OnPageSizeChangeForCompanySearchAsRG(ChangeEventArgs e)
    {
        if (int.TryParse(e.Value?.ToString(), out int newSize) && newSize > 0)
        {
            CompanySearchPerPageAsRG = newSize;
            currentPage_CompanySearchAsRG = 1; // Reset to first page
            StateHasChanged();
        }
    }

    private IEnumerable<Company> GetPaginatedCompanySearchResultsAsRG()
    {
        return searchResultsAsRGToFindCompany?
            .Skip((currentPage_CompanySearchAsRG - 1) * CompanySearchPerPageAsRG)
            .Take(CompanySearchPerPageAsRG) ?? Enumerable.Empty<Company>();
    }
    ///
    private List<int> GetVisiblePages_CompanySearchAsRG()
    {
        var pages = new List<int>();
        int current = currentPage_CompanySearchAsRG;
        int total = totalPages_CompanySearchAsRG;

        pages.Add(1);
        if (current > 3) pages.Add(-1);

        int start = Math.Max(2, current - 1);
        int end = Math.Min(total - 1, current + 1);

        for (int i = start; i <= end; i++) pages.Add(i);
        if (current < total - 2) pages.Add(-1);

        if (total > 1) pages.Add(total);
        return pages;
    }


    private void GoToFirstPage_CompanySearchAsRG()
    {
        currentPage_CompanySearchAsRG = 1;
        StateHasChanged();
    }

    private void GoToLastPage_CompanySearchAsRG()
    {
        currentPage_CompanySearchAsRG = totalPages_CompanySearchAsRG;
        StateHasChanged();
    }

    private void PreviousPage_CompanySearchAsRG()
    {
        if (currentPage_CompanySearchAsRG > 1)
        {
            currentPage_CompanySearchAsRG--;
            StateHasChanged();
        }
    }

    private void NextPage_CompanySearchAsRG()
    {
        if (currentPage_CompanySearchAsRG < totalPages_CompanySearchAsRG)
        {
            currentPage_CompanySearchAsRG++;
            StateHasChanged();
        }
    }

    private void GoToPage_CompanySearchAsRG(int page)
    {
        if (page > 0 && page <= totalPages_CompanySearchAsRG)
        {
            currentPage_CompanySearchAsRG = page;
            StateHasChanged();
        }
    }
//////////////////////////////////////////////////////////////////////////////////////////////////

    private AnnouncementAsProfessor? selectedProfessorAnnouncementToSeeDetails; 
    private void OpenProfessorAnnouncementDetailsModal(AnnouncementAsProfessor currentAnnouncement)
    {
        selectedProfessorAnnouncementToSeeDetails = currentAnnouncement;
    }

    private void CloseProfessorAnnouncementDetailsModal()
    {
        selectedProfessorAnnouncementToSeeDetails = null;
    }

    private async Task HandleProfessorThesisFileUpload(InputFileChangeEventArgs e)
    {
        var file = e.File;  // Access the selected file
        if (file != null)
        {
            Console.WriteLine($"File selected: {file.Name}");

            // Ensure the file is a PDF (optional)
            if (file.ContentType == "application/pdf")
            {
                using (var stream = file.OpenReadStream())
                {
                    using (var memoryStream = new MemoryStream())
                    {
                        await stream.CopyToAsync(memoryStream);  // Copy the file stream to memory stream
                        currentThesisAsProfessor.ThesisAttachment = memoryStream.ToArray();  // Store file as byte array
                        Console.WriteLine($"File uploaded: {file.Name}");
                    }
                }
            }
            else
            {
                Console.WriteLine("Selected file is not a PDF.");
            }
        }
        else
        {
            Console.WriteLine("No file selected.");
        }
    }

    private bool showExpandedAreasInProfessorThesisEditModal = false;
    private bool showExpandedSkillsInProfessorThesisEditModal = false;
    private List<Area> SelectedAreasToEditForProfessorThesis = new List<Area>();
    private List<Skill> SelectedSkillsToEditForProfessorThesis = new List<Skill>();

    private void ToggleAreasInEditProfessorThesisModal() => 
        showExpandedAreasInProfessorThesisEditModal = !showExpandedAreasInProfessorThesisEditModal;

    private void ToggleSkillsInEditProfessorThesisModal() => 
        showExpandedSkillsInProfessorThesisEditModal = !showExpandedSkillsInProfessorThesisEditModal;

    private void OnCheckedChangedForEditProfessorThesisAreas(ChangeEventArgs e, Area area)
    {
        if (e.Value is bool isChecked)
        {
            if (isChecked)
            {
                if (!SelectedAreasToEditForProfessorThesis.Any(a => a.AreaName == area.AreaName))
                {
                    SelectedAreasToEditForProfessorThesis.Add(area);
                }
            }
            else
            {
                SelectedAreasToEditForProfessorThesis.RemoveAll(a => a.AreaName == area.AreaName);
            }
        
            // Update the thesis object immediately
            currentThesisAsProfessor.ThesisAreas = string.Join(",", SelectedAreasToEditForProfessorThesis.Select(a => a.AreaName));
        }
        StateHasChanged();
    }

    private void OnCheckedChangedForEditProfessorThesisSkills(ChangeEventArgs e, Skill skill)
    {
        if (e.Value is bool isChecked)
        {
            if (isChecked)
            {
                if (!SelectedSkillsToEditForProfessorThesis.Any(s => s.SkillName == skill.SkillName))
                {
                    SelectedSkillsToEditForProfessorThesis.Add(skill);
                }
            }
            else
            {
                SelectedSkillsToEditForProfessorThesis.RemoveAll(s => s.SkillName == skill.SkillName);
            }
        
            // Update the thesis object immediately
            currentThesisAsProfessor.ThesisSkills = string.Join(",", SelectedSkillsToEditForProfessorThesis.Select(s => s.SkillName));
        }
        StateHasChanged();
    }

    private void OpenUrl(string url)
    {
        if (!string.IsNullOrWhiteSpace(url))
        {
            if (!url.StartsWith("http://") && !url.StartsWith("https://"))
            {
                url = "http://" + url;
            }
            NavigationManager.NavigateTo(url, true);
        }
    }

    private void OpenMap(string location)
    {
        if (!string.IsNullOrWhiteSpace(location))
        {
            var mapUrl = $"https://www.google.com/maps/search/{Uri.EscapeDataString(location)}";
            NavigationManager.NavigateTo(mapUrl, true);
        }
    }

    private async Task<IEnumerable<ProfessorInternshipApplied>> GetApplicantsForProfessorInternship(long professorInternshipRNG)
    {
        // Get the professor internship details with professor information
        var internship = await dbContext.ProfessorInternships
            .Include(i => i.Professor) // Include professor details
            .Where(i => i.RNGForInternshipUploadedAsProfessor == professorInternshipRNG) // Updated property
            .Select(i => new {
                i.ProfessorInternshipTitle,
                i.RNGForInternshipUploadedAsProfessor, // Updated property
                ProfessorName = i.Professor.ProfName,
                ProfessorSurname = i.Professor.ProfSurname
            })
            .FirstOrDefaultAsync();

        if (internship == null)
            return Enumerable.Empty<ProfessorInternshipApplied>();

        // Get all applications for this internship (matching by RNG)
        return await dbContext.ProfessorInternshipsApplied
            .Include(a => a.StudentDetails)
            .Include(a => a.ProfessorDetails)
            .Where(a => a.RNGForProfessorInternshipApplied == professorInternshipRNG)
            .ToListAsync();


    }

    private bool showExpandedAreasInProfessorInternshipEditModal = false;
    private List<Area> SelectedAreasToEditForProfessorInternship = new List<Area>();
    private bool showExpandedAreasInProfessorEventEditModal = false;
    // Method to close the edit popup
    private void CloseEditPopupForProfessorInternships()
    {
        isEditPopupVisibleForProfessorInternships = false;
    }

    private async Task SaveEditedProfessorInternship()
    {
        try
        {
            // Check if required fields are filled
            if (string.IsNullOrWhiteSpace(selectedProfessorInternship.ProfessorInternshipTitle) || 
                string.IsNullOrWhiteSpace(selectedProfessorInternship.ProfessorInternshipDescription))
            {
                showSuccessMessage = false;
                showErrorMessage = true;
                return;
            }

            // Set timeout for the database operation
            dbContext.Database.SetCommandTimeout(120); // 120 seconds timeout

            // Handle areas selection
            if (SelectedAreasToEditForProfessorInternship == null || !SelectedAreasToEditForProfessorInternship.Any())
            {
                var currentAreas = selectedProfessorInternship.ProfessorInternshipAreas?.Split(",").ToList() ?? new List<string>();
                SelectedAreasToEditForProfessorInternship = Areas
                    .Where(area => currentAreas.Contains(area.AreaName))
                    .ToList();
            }

            selectedProfessorInternship.ProfessorInternshipAreas = string.Join(",", SelectedAreasToEditForProfessorInternship.Select(area => area.AreaName));

            // Find and update the internship
            var internshipToUpdate = await dbContext.ProfessorInternships.FindAsync(selectedProfessorInternship.Id);
            if (internshipToUpdate != null)
            {
                // Update properties
                internshipToUpdate.ProfessorInternshipTitle = selectedProfessorInternship.ProfessorInternshipTitle;
                internshipToUpdate.ProfessorInternshipDescription = selectedProfessorInternship.ProfessorInternshipDescription;
                internshipToUpdate.ProfessorInternshipType = selectedProfessorInternship.ProfessorInternshipType;
                internshipToUpdate.ProfessorInternshipForeas = selectedProfessorInternship.ProfessorInternshipForeas;
                internshipToUpdate.ProfessorInternshipPerifereiaLocation = selectedProfessorInternship.ProfessorInternshipPerifereiaLocation;
                internshipToUpdate.ProfessorInternshipDimosLocation = selectedProfessorInternship.ProfessorInternshipDimosLocation;
                internshipToUpdate.ProfessorInternshipTransportOffer = selectedProfessorInternship.ProfessorInternshipTransportOffer;
                internshipToUpdate.ProfessorInternshipAreas = selectedProfessorInternship.ProfessorInternshipAreas;
                internshipToUpdate.ProfessorInternshipActivePeriod = selectedProfessorInternship.ProfessorInternshipActivePeriod;
                internshipToUpdate.ProfessorInternshipFinishEstimation = selectedProfessorInternship.ProfessorInternshipFinishEstimation;
                internshipToUpdate.ProfessorInternshipLastUpdate = DateTime.Now;

                // Handle file attachment separately with null check
                if (selectedProfessorInternship.ProfessorInternshipAttachment != null && 
                    selectedProfessorInternship.ProfessorInternshipAttachment.Length > 0)
                {
                    internshipToUpdate.ProfessorInternshipAttachment = selectedProfessorInternship.ProfessorInternshipAttachment;
                }

                // Save changes with try-catch
                try
                {
                    await dbContext.SaveChangesAsync();
                    showSuccessMessage = true;
                    showErrorMessage = false;
                }
                catch (Exception dbEx)
                {
                    Console.Error.WriteLine($"Database save error: {dbEx.Message}");
                    showSuccessMessage = false;
                    showErrorMessage = true;
                }
            }
        }
        catch (Exception ex)
        {
            Console.Error.WriteLine($"Error in SaveEditedProfessorInternship: {ex.Message}");
            showSuccessMessage = false;
            showErrorMessage = true;
        }
        finally
        {
            isEditPopupVisibleForProfessorInternships = false;
            StateHasChanged();
        }
    }

    private async Task HandleFileUploadToEditProfessorInternshipAttachment(InputFileChangeEventArgs e)
    {
        var file = e.File;  // Access the selected file
        if (file != null)
        {
            Console.WriteLine($"File selected: {file.Name}");

            // Ensure the file is a PDF (optional)
            if (file.ContentType == "application/pdf")
            {
                using (var stream = file.OpenReadStream())
                {
                    using (var memoryStream = new MemoryStream())
                    {
                        await stream.CopyToAsync(memoryStream);  // Copy the file stream to memory stream
                        selectedProfessorInternship.ProfessorInternshipAttachment = memoryStream.ToArray();  // Store file as byte array
                        Console.WriteLine($"File uploaded: {file.Name}");
                    
                        // Optional: Add user feedback
                        uploadSuccess = true;
                        uploadErrorMessage = string.Empty;
                    }
                }
            }
            else
            {
                Console.WriteLine("Selected file is not a PDF.");
                uploadErrorMessage = "Μόνο αρχεία PDF επιτρέπονται";
                uploadSuccess = false;
            }
        }
        else
        {
            Console.WriteLine("No file selected.");
            uploadErrorMessage = "Δεν επιλέχθηκε αρχείο";
            uploadSuccess = false;
        }
        StateHasChanged(); // Update UI to show feedback
    }

    // Method to toggle areas visibility in edit modal
    private void ToggleAreasInEditProfessorInternshipModal()
    {
        showExpandedAreasInProfessorInternshipEditModal = !showExpandedAreasInProfessorInternshipEditModal;
    }

    // Method to handle area selection changes
    private void OnCheckedChangedForEditProfessorInternshipAreas(ChangeEventArgs e, Area area)
    {
        var isChecked = (bool)e.Value;
    
        if (isChecked)
        {
            if (!SelectedAreasToEditForProfessorInternship.Any(a => a.Id == area.Id))
            {
                SelectedAreasToEditForProfessorInternship.Add(area);
            }
        }
        else
        {
            var areaToRemove = SelectedAreasToEditForProfessorInternship.FirstOrDefault(a => a.Id == area.Id);
            if (areaToRemove != null)
            {
                SelectedAreasToEditForProfessorInternship.Remove(areaToRemove);
            }
        }
    }

   
    private void ClearProfessorEventField(int fieldNumber)
    {
        switch (fieldNumber)
        {
            case 1:
                currentProfessorEvent.ProfessorEventStartingPointLocationToTransportPeopleToEvent1 = string.Empty;
                break;
            case 2:
                currentProfessorEvent.ProfessorEventStartingPointLocationToTransportPeopleToEvent2 = string.Empty;
                break;
            case 3:
                currentProfessorEvent.ProfessorEventStartingPointLocationToTransportPeopleToEvent3 = string.Empty;
                break;
        }
    }

    private void ToggleAreasInEditProfessorEventModal()
    {
        showExpandedAreasInProfessorEventEditModal = !showExpandedAreasInProfessorEventEditModal;
    }

    private void OnCheckedChangedForEditProfessorEventAreas(ChangeEventArgs e, Area area)
    {
        var isChecked = (bool)e.Value;
    
        if (isChecked)
        {
            if (!SelectedAreasToEditForProfessorEvent.Any(a => a.Id == area.Id))
            {
                SelectedAreasToEditForProfessorEvent.Add(area);
            }
        }
        else
        {
            var areaToRemove = SelectedAreasToEditForProfessorEvent.FirstOrDefault(a => a.Id == area.Id);
            if (areaToRemove != null)
            {
                SelectedAreasToEditForProfessorEvent.Remove(areaToRemove);
            }
        }
    }

    private async Task HandleFileUploadToEditProfessorEventAttachment(InputFileChangeEventArgs e)
    {
        var file = e.File;
        if (file != null)
        {
            using (var stream = file.OpenReadStream())
            {
                using (var memoryStream = new MemoryStream())
                {
                    await stream.CopyToAsync(memoryStream);
                    currentProfessorEvent.ProfessorEventAttachmentFile = memoryStream.ToArray();
                }
            }
        }
    }

    private List<InterestInProfessorEventAsCompany> InterestedCompaniesForProfessorEvent = new();
    private long? selectedEventIdForCompaniesWhenShowInterestForProfessorEvent;
    private async Task ShowInterestedCompaniesInProfessorEvent(long professoreventRNG)
    {
        if (selectedEventIdForCompaniesWhenShowInterestForProfessorEvent == professoreventRNG)
        {
            // Close the table
            selectedEventIdForCompaniesWhenShowInterestForProfessorEvent = null;
            filteredCompanyInterestForProfessorEvents.Clear();
        }
        else
        {
            // Show the table
            selectedEventIdForCompaniesWhenShowInterestForProfessorEvent = professoreventRNG;
            filteredCompanyInterestForProfessorEvents = await dbContext.InterestInProfessorEventsAsCompany
                .Include(i => i.CompanyDetails)
                .Where(x => x.RNGForProfessorEventInterestAsCompany == professoreventRNG)
                .OrderByDescending(x => x.DateTimeCompanyShowInterestForProfessorEvent)
                .ToListAsync();

            // Load company data for all interests
            foreach (var interest in filteredCompanyInterestForProfessorEvents)
            {
                if (!companyDataCache.ContainsKey(interest.CompanyEmailShowInterestForProfessorEvent))
                {
                    var company = await dbContext.Companies
                        .FirstOrDefaultAsync(c => c.CompanyEmail == interest.CompanyEmailShowInterestForProfessorEvent);
                
                    if (company != null)
                    {
                        companyDataCache[interest.CompanyEmailShowInterestForProfessorEvent] = company;
                    }
                }
            }
        }
        StateHasChanged();
    }



    private bool showModalForCompaniesAtProfessorEventInterest = false;
    private InterestInProfessorEventAsCompany selectedCompanyToShowDetailsForInterestinProfessorEvent;

    private void ShowCompanyDetailsAtProfessorEventInterest(InterestInProfessorEventAsCompany company)
    {
        selectedCompanyToShowDetailsForInterestinProfessorEvent = company;
        showModalForCompaniesAtProfessorEventInterest = true;
        StateHasChanged();
    }

    private void CloseCompanyDetailsModalAtProfessorEventInterest()
    {
        showModalForCompaniesAtProfessorEventInterest = false;
        selectedCompanyToShowDetailsForInterestinProfessorEvent = null;
    }


    private async Task ToggleFormVisibilityToShowStudentStatsAsAdmin()
    {
        isStudentStatsFormVisibleToShowStudentStatsAsAdmin = !isStudentStatsFormVisibleToShowStudentStatsAsAdmin;
        StateHasChanged();
    }

    private Dictionary<string, int> areaDistribution = new();
    private Dictionary<string, int> skillDistributionforadmin = new();
    private void ToggleAnalyticsVisibility()
    {
        isAnalyticsVisible = !isAnalyticsVisible;
        if (isAnalyticsVisible)
        {
            LoadAnalytics();
        }
    }

    private void LoadAnalytics()
    {
        areaDistribution.Clear();
        skillDistributionforadmin.Clear();

        foreach (var student in StudentsWithAuth0Details)
        {
            if (!string.IsNullOrWhiteSpace(student.AreasOfExpertise))
            {
                var areas = student.AreasOfExpertise.Split(',', StringSplitOptions.RemoveEmptyEntries);
                foreach (var area in areas.Select(a => a.Trim()))
                {
                    if (areaDistribution.ContainsKey(area))
                        areaDistribution[area]++;
                    else
                        areaDistribution[area] = 1;
                }
            }

            if (!string.IsNullOrWhiteSpace(student.Keywords))
            {
                var skills = student.Keywords.Split(',', StringSplitOptions.RemoveEmptyEntries);
                foreach (var skill in skills.Select(s => s.Trim()))
                {
                    if (skillDistributionforadmin.ContainsKey(skill))
                        skillDistributionforadmin[skill]++;
                    else
                        skillDistributionforadmin[skill] = 1;
                }
            }
        }
    }



    private async Task LoadStudentsWithAuth0DetailsAsync()
    {
        var students = await dbContext.Students.ToListAsync();
        var studentsWithDetails = new List<StudentWithAuth0Details>();

        var semaphore = new SemaphoreSlim(5); // max 5 concurrent requests
        var tasks = students.Select(async student =>
        {
            await semaphore.WaitAsync();
            try
            {
                var auth0Details = await Auth0Service.GetUserDetailsAsync(student.Email);
                return new StudentWithAuth0Details
                {
                    Name = student.Name,
                    Surname = student.Surname,
                    Email = student.Email,
                    Department = student.Department,
                    SignUpDate = auth0Details?.CreatedAt,
                    LatestLogin = auth0Details?.LastLogin,
                    LoginBrowser = auth0Details?.LoginBrowser,
                    LoginTimes = auth0Details?.LoginTimes,
                    LastIp = auth0Details?.LastIp,
                    IsEmailVerified = auth0Details?.IsEmailVerified,
                    IsMobile = auth0Details?.IsMobile ?? false,
                    LocationInfo = auth0Details?.LocationInfo,
                    AreasOfExpertise = student.AreasOfExpertise,
                    Keywords = student.Keywords,
                    School = student.School
                };
            }
            catch (Exception ex)
            {
                Console.WriteLine($"Failed to get Auth0 details for {student.Email}: {ex.Message}");
                return new StudentWithAuth0Details
                {
                    Name = student.Name,
                    Surname = student.Surname,
                    Email = student.Email,
                    Department = student.Department,
                    SignUpDate = null,
                    LatestLogin = null,
                    LoginBrowser = null,
                    LoginTimes = null,
                    LastIp = null,
                    IsEmailVerified = false,
                    IsMobile = false,
                    LocationInfo = null,
                    AreasOfExpertise = student.AreasOfExpertise,
                    Keywords = student.Keywords,
                    School = student.School
                };
            }
            finally
            {
                semaphore.Release();
            }
        });

        var results = await Task.WhenAll(tasks);
        StudentsWithAuth0Details = results.ToList();
    }

    private async Task<CompanyJob> GetJobDetails(long rngForJob)
    {
        return await dbContext.CompanyJobs
            .FirstOrDefaultAsync(j => j.RNGForPositionUploaded == rngForJob);
    }

    private async Task LoadCompanyJobData()
    {
        try
        {
            if (jobApplications == null || !jobApplications.Any()) 
            {
                jobDataCache = new Dictionary<long, CompanyJob>();
                return;
            }

            var rngsToLoad = jobApplications
                .Select(a => a.RNGForCompanyJobApplied)
                .Distinct()
                .Where(rng => !jobDataCache.ContainsKey(rng))
                .ToList();

            if (rngsToLoad.Any())
            {
                var jobs = await dbContext.CompanyJobs
                    .Where(j => rngsToLoad.Contains(j.RNGForPositionUploaded))
                    .ToListAsync();

                foreach (var job in jobs)
                {
                    jobDataCache[job.RNGForPositionUploaded] = job;
                }
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading job data: {ex.Message}");
        }
    }

    private async Task LoadAllStudentData()
    {
        try
        {
            // Get all unique student emails from applications
            var studentEmails = jobApplicantsMap.Values
                .SelectMany(x => x)
                .Select(a => a.StudentEmailAppliedForCompanyJob)
                .Distinct()
                .ToList();

            // Load all students in one query
            var students = await dbContext.Students
                .Where(s => studentEmails.Contains(s.Email))
                .ToListAsync();

            // Populate cache
            foreach (var student in students)
            {
                studentDataCache[student.Email] = student;
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading student data: {ex.Message}");
        }
    }

    // Call this when new applications are added
    public async Task RefreshStudentData()
    {
        await LoadAllStudentData();
        StateHasChanged();
    }

    private string GetStatusColor(string status)
    {
        return status switch
        {
            "Επιτυχής" => "lightgreen",
            "Απορρίφθηκε" => "lightcoral",
            "Απορρίφθηκε (Απόσυρση Θέσεως Από Εταιρία)" => "coral",
            "Αποσύρθηκε από τον φοιτητή" => "lightyellow",
            _ => "transparent"
        };
    }

    private async Task HandleProfessorDateChange(ChangeEventArgs e)
    {
        if (DateTime.TryParse(e.Value?.ToString(), out DateTime newDate))
        {
            professorEvent.ProfessorEventActiveDate = newDate;
            await CheckExistingEventsForProfessorDate(); // You'll need to create this method
        }
    }

    private bool hasExistingEventsOnSelectedDateForProfessor = false;
    private async Task CheckExistingEventsForProfessorDate()
    {
        if (professorEvent.ProfessorEventActiveDate.Date >= DateTime.Today.Date)
        {
            // Check for existing company events on this date
            var companyEventsCount = await dbContext.CompanyEvents
                .CountAsync(e => e.CompanyEventActiveDate.Date == professorEvent.ProfessorEventActiveDate.Date && 
                                e.CompanyEventStatus == "Δημοσιευμένη");
        
            // Check for existing professor events on this date
            var professorEventsCount = await dbContext.ProfessorEvents
                .CountAsync(e => e.ProfessorEventActiveDate.Date == professorEvent.ProfessorEventActiveDate.Date && 
                                e.ProfessorEventStatus == "Δημοσιευμένη");
        
            existingEventsCountToCheckAsProfessor = companyEventsCount + professorEventsCount;
            hasExistingEventsOnSelectedDateForProfessor = existingEventsCountToCheckAsProfessor > 0;
        }
        else
        {
            hasExistingEventsOnSelectedDateForProfessor = false;
            existingEventsCountToCheckAsProfessor = 0;
        }
    
        StateHasChanged();
    }

    private async Task LoadResearchGroupStatistics()
    {
        try
        {
            // Get the current research group ID/email
            var currentResearchGroupEmail = CurrentUserEmail;
    
            // Get faculty members count
            numberOfFacultyMembers = await dbContext.ResearchGroup_Professors
                .Where(rp => rp.PK_ResearchGroupEmail == currentResearchGroupEmail)
                .CountAsync();
    
            // Get collaborators count (non-faculty members/students)
            numberOfCollaborators = await dbContext.ResearchGroup_NonFacultyMembers
                .Where(rnf => rnf.PK_ResearchGroupEmail == currentResearchGroupEmail)
                .CountAsync();
    
            // Get research actions count - FIXED: Use ProjectStatus field instead of date comparison
            numberOfActiveResearchActions = await dbContext.ResearchGroup_ResearchActions
                .Where(ra => ra.ResearchGroupEmail == currentResearchGroupEmail && 
                            ra.ResearchGroup_ProjectStatus == "OnGoing")
                .CountAsync();
    
            numberOfInactiveResearchActions = await dbContext.ResearchGroup_ResearchActions
                .Where(ra => ra.ResearchGroupEmail == currentResearchGroupEmail && 
                            ra.ResearchGroup_ProjectStatus == "Past")
                .CountAsync();
    
            // Get patents count
            numberOfActivePatents = await dbContext.ResearchGroup_Patents
                .Where(p => p.ResearchGroupEmail == currentResearchGroupEmail && 
                           p.ResearchGroup_Patent_PatentStatus == "Ενεργή")
                .CountAsync();
    
            numberOfInactivePatents = await dbContext.ResearchGroup_Patents
                .Where(p => p.ResearchGroupEmail == currentResearchGroupEmail && 
                           p.ResearchGroup_Patent_PatentStatus == "Ανενεργή")
                .CountAsync();
    
            // Fetch publications from Google Scholar for all members
            await FetchPublicationsFromGoogleScholar();
    
            // Show success message
            // await ShowSuccessMessage("Τα στατιστικά ενημερώθηκαν επιτυχώς");
        }
        catch (Exception ex)
        {
            // Handle error
            // await ShowErrorMessage($"Σφάλμα κατά τη φόρτωση των στατιστικών: {ex.Message}");
            Console.WriteLine($"Error loading statistics: {ex.Message}");
        }
    }

    private async Task FetchPublicationsFromGoogleScholar()
    {
        try
        {
            var currentResearchGroupEmail = CurrentUserEmail;
        
            // Get all professor emails in this research group with Google Scholar profiles
            var professorEmails = await dbContext.ResearchGroup_Professors
                .Where(rp => rp.PK_ResearchGroupEmail == currentResearchGroupEmail)
                .Select(rp => rp.PK_ProfessorEmail)
                .ToListAsync();
        
            var professorsWithScholar = await dbContext.Professors
                .Where(p => professorEmails.Contains(p.ProfEmail) && 
                           !string.IsNullOrEmpty(p.ProfScholarProfile))
                .Select(p => new { p.ProfEmail, p.ProfScholarProfile })
                .ToListAsync();
        
            // Get all student emails in this research group with Google Scholar profiles
            var studentEmails = await dbContext.ResearchGroup_NonFacultyMembers
                .Where(rnf => rnf.PK_ResearchGroupEmail == currentResearchGroupEmail)
                .Select(rnf => rnf.PK_NonFacultyMemberEmail)
                .ToListAsync();
        
            var studentsWithScholar = await dbContext.Students
                .Where(s => studentEmails.Contains(s.Email) && 
                           !string.IsNullOrEmpty(s.StudentGoogleScholarProfile))
                .Select(s => new { s.Email, s.StudentGoogleScholarProfile })
                .ToListAsync();
        
            // Combine all members with Google Scholar profiles
            var allMembersWithScholar = professorsWithScholar
                .Select(p => new { Email = p.ProfEmail, ScholarProfile = p.ProfScholarProfile, Type = "Professor" })
                .Concat(studentsWithScholar
                    .Select(s => new { Email = s.Email, ScholarProfile = s.StudentGoogleScholarProfile, Type = "Student" }))
                .ToList();
        
            Console.WriteLine($"Found {allMembersWithScholar.Count} members with Google Scholar profiles");
        
            // Fetch publications for each member
            var allPublications = new List<ScholarPublication>();
            var fiveYearsAgo = DateTime.Now.AddYears(-5).Year;
        
            foreach (var member in allMembersWithScholar)
            {
                try
                {
                    Console.WriteLine($"Fetching publications for {member.Email} from {member.ScholarProfile}");
                    var publications = await _googleScholarService.GetPublications(member.ScholarProfile);
                    Console.WriteLine($"Found {publications.Count} publications for {member.Email}");
                
                    allPublications.AddRange(publications);
                }
                catch (Exception ex)
                {
                    Console.WriteLine($"Error fetching publications for {member.Email}: {ex.Message}");
                }
            }
        
            // Update statistics
            numberOfTotalPublications = allPublications.Count;
            numberOfRecentPublications = allPublications
                .Where(p => !string.IsNullOrEmpty(p.Year) && 
                           int.TryParse(p.Year, out int year) && 
                           year >= fiveYearsAgo)
                .Count();
        
            Console.WriteLine($"Total publications: {numberOfTotalPublications}, Recent publications: {numberOfRecentPublications}");
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error in FetchPublicationsForStatistics: {ex.Message}");
            // Set publications to 0 if fetching fails
            numberOfTotalPublications = 0;
            numberOfRecentPublications = 0;
        }
    }

    // Add these fields to your component
    private bool showFacultyMembersModal = false;
    private bool showNonFacultyMembersModal = false;
    private List<FacultyMemberDetail> facultyMembersDetails = new();
    private List<NonFacultyMemberDetail> nonFacultyMembersDetails = new();

    // Add these classes for the modal data
    public class FacultyMemberDetail
    {
        public byte[]? Image { get; set; }
        public string Name { get; set; } = string.Empty;
        public string Surname { get; set; } = string.Empty;
        public string School { get; set; } = string.Empty;
        public string Department { get; set; } = string.Empty;
        public string Role { get; set; } = string.Empty;
    }

    public class NonFacultyMemberDetail
    {
        public byte[]? Image { get; set; }
        public string Name { get; set; } = string.Empty;
        public string Surname { get; set; } = string.Empty;
        public string LevelOfStudies { get; set; } = string.Empty;
        public string Department { get; set; } = string.Empty;
        public string School { get; set; } = string.Empty;
        public DateTime RegistrationDate { get; set; }
    }

    // Add these methods
    private async Task ShowFacultyMembersDetails()
    {
        try
        {
            var currentResearchGroupEmail = CurrentUserEmail;
        
            // Get faculty members with their details
            facultyMembersDetails = await dbContext.ResearchGroup_Professors
                .Where(rp => rp.PK_ResearchGroupEmail == currentResearchGroupEmail)
                .Join(dbContext.Professors,
                    rp => rp.PK_ProfessorEmail,
                    p => p.ProfEmail,
                    (rp, p) => new FacultyMemberDetail
                    {
                        Image = p.ProfImage,
                        Name = p.ProfName ?? "",
                        Surname = p.ProfSurname ?? "",
                        School = p.ProfSchool ?? "",
                        Department = p.ProfDepartment ?? "",
                        Role = rp.PK_ProfessorRole ?? ""
                    })
                .ToListAsync();
        
            showFacultyMembersModal = true;
            StateHasChanged();
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading faculty members details: {ex.Message}");
        }
    }

    private async Task ShowNonFacultyMembersDetails()
    {
        try
        {
            var currentResearchGroupEmail = CurrentUserEmail;
        
            // Get non-faculty members with their details
            nonFacultyMembersDetails = await dbContext.ResearchGroup_NonFacultyMembers
                .Where(rnf => rnf.PK_ResearchGroupEmail == currentResearchGroupEmail)
                .Join(dbContext.Students,
                    rnf => rnf.PK_NonFacultyMemberEmail,
                    s => s.Email,
                    (rnf, s) => new NonFacultyMemberDetail
                    {
                        Image = s.Image,
                        Name = s.Name,
                        Surname = s.Surname,
                        LevelOfStudies = rnf.PK_NonFacultyMemberLevelOfStudies ?? "",
                        Department = s.Department,
                        School = s.School,
                        RegistrationDate = rnf.DateOfRegistrationOnResearchGroup_ForNonFacultyMember
                    })
                .ToListAsync();
        
            showNonFacultyMembersModal = true;
            StateHasChanged();
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading non-faculty members details: {ex.Message}");
        }
    }

    private void CloseFacultyMembersModal()
    {
        showFacultyMembersModal = false;
        StateHasChanged();
    }

    private void CloseNonFacultyMembersModal()
    {
        showNonFacultyMembersModal = false;
        StateHasChanged();
    }

    private bool showResearchActionsModal = false;
    private List<ResearchActionDetail> researchActionsDetails = new();
    public class ResearchActionDetail
    {
        public string ProjectTitle { get; set; } = string.Empty;
        public string ProjectAcronym { get; set; } = string.Empty;
        public string GrantAgreementNumber { get; set; } = string.Empty;
        public DateTime? StartDate { get; set; }
        public DateTime? EndDate { get; set; }
        public string ProjectCoordinator { get; set; } = string.Empty;
        public string ELKECode { get; set; } = string.Empty;
        public string ScientificResponsibleEmail { get; set; } = string.Empty;
        public string ProjectStatus { get; set; } = string.Empty; // Use the actual status field
    }

    private async Task ShowResearchActionsDetails()
    {
        try
        {
            var currentResearchGroupEmail = CurrentUserEmail;
        
            // Get research actions with their details
            researchActionsDetails = await dbContext.ResearchGroup_ResearchActions
                .Where(ra => ra.ResearchGroupEmail == currentResearchGroupEmail)
                .Select(ra => new ResearchActionDetail
                {
                    ProjectTitle = ra.ResearchGroup_ProjectTitle ?? "",
                    ProjectAcronym = ra.ResearchGroup_ProjectAcronym ?? "",
                    GrantAgreementNumber = ra.ResearchGroup_ProjectGrantAgreementNumber ?? "",
                    StartDate = ra.ResearchGroup_ProjectStartDate,
                    EndDate = ra.ResearchGroup_ProjectEndDate,
                    ProjectCoordinator = ra.ResearchGroup_ProjectCoordinator ?? "",
                    ELKECode = ra.ResearchGroup_ProjectELKECode ?? "",
                    ScientificResponsibleEmail = ra.ResearchGroup_ProjectScientificResponsibleEmail ?? "",
                    ProjectStatus = ra.ResearchGroup_ProjectStatus ?? "" 
                })
                .ToListAsync();
        
            showResearchActionsModal = true;
            StateHasChanged();
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading research actions details: {ex.Message}");
        }
    }

    private void CloseResearchActionsModal()
    {
        showResearchActionsModal = false;
        StateHasChanged();
    }

    private bool showPatentsModal = false;
    private List<PatentDetail> patentsDetails = new();
    public class PatentDetail
    {
        public string PatentTitle { get; set; } = string.Empty;
        public string PatentType { get; set; } = string.Empty;
        public string PatentDOI { get; set; } = string.Empty;
        public string PatentURL { get; set; } = string.Empty;
        public string PatentDescription { get; set; } = string.Empty;
        public string PatentStatus { get; set; } = string.Empty;
    }


    private async Task ShowPatentsDetails()
    {
        try
        {
            var currentResearchGroupEmail = CurrentUserEmail;
        
            patentsDetails = await dbContext.ResearchGroup_Patents
                .Where(p => p.ResearchGroupEmail == currentResearchGroupEmail)
                .Select(p => new PatentDetail
                {
                    PatentTitle = p.ResearchGroup_Patent_PatentTitle ?? "",
                    PatentType = p.ResearchGroup_Patent_PatentType ?? "",
                    PatentDOI = p.ResearchGroup_Patent_PatentDOI ?? "",
                    PatentURL = p.ResearchGroup_Patent_PatentURL ?? "",
                    PatentDescription = p.ResearchGroup_Patent_PatentDescription ?? "",
                    PatentStatus = p.ResearchGroup_Patent_PatentStatus ?? ""
                })
                .ToListAsync();
        
            showPatentsModal = true;
            StateHasChanged();
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading patents details: {ex.Message}");
        }
    }

    private void ClosePatentsModal()
    {
        showPatentsModal = false;
        StateHasChanged();
    }


    // Methods for handling inputs and selections
    private async Task HandleResearchGroupNameInput(ChangeEventArgs e)
    {
        searchResearchGroupNameAsCompanyToFindResearchGroup = e.Value?.ToString().Trim() ?? string.Empty;
        researchgroupNameSuggestions = new List<string>();

        if (searchResearchGroupNameAsCompanyToFindResearchGroup.Length >= 1)
        {
            try
            {
                researchgroupNameSuggestions = await Task.Run(() =>
                    dbContext.ResearchGroups
                        .Where(rg => rg.ResearchGroupName.Contains(searchResearchGroupNameAsCompanyToFindResearchGroup))
                        .Select(rg => rg.ResearchGroupName)
                        .Distinct()
                        .Take(10)
                        .ToList());
            }
            catch (Exception ex)
            {
                Console.WriteLine($"Πρόβλημα στην Ανάκτηση Ονομάτων Ερευνητικών Ομάδων: {ex.Message}");
                researchgroupNameSuggestions = new List<string>();
            }
        }
        else
        {
            researchgroupNameSuggestions.Clear();
        }

        StateHasChanged();
    }

    private async Task HandleResearchGroupAreasInput(ChangeEventArgs e)
    {
        searchResearchGroupAreasAsCompanyToFindResearchGroup = e.Value?.ToString().Trim() ?? string.Empty;
        researchGroupAreasSuggestions = new List<string>();

        if (searchResearchGroupAreasAsCompanyToFindResearchGroup.Length >= 1)
        {
            try
            {
                // Use the Areas table like Professor search does
                researchGroupAreasSuggestions = await dbContext.Areas
                    .Where(a => a.AreaName.Contains(searchResearchGroupAreasAsCompanyToFindResearchGroup))
                    .Select(a => a.AreaName)
                    .Distinct()
                    .Take(10)
                    .ToListAsync();
            }
            catch (Exception ex)
            {
                Console.WriteLine($"Πρόβλημα στην Ανάκτηση Περιοχών Έρευνας: {ex.Message}");
                researchGroupAreasSuggestions = new List<string>();
            }
        }
        else
        {
            researchGroupAreasSuggestions.Clear();
        }

        StateHasChanged();
    }

    private async Task HandleResearchGroupSkillsInput(ChangeEventArgs e)
    {
        searchResearchGroupSkillsAsCompanyToFindResearchGroup = e.Value?.ToString().Trim() ?? string.Empty;
        researchGroupSkillsSuggestions = new List<string>();

        if (searchResearchGroupSkillsAsCompanyToFindResearchGroup.Length >= 1)
        {
            try
            {
                // Use the Skills table instead of parsing from ResearchGroups
                researchGroupSkillsSuggestions = await dbContext.Skills
                    .Where(s => s.SkillName.Contains(searchResearchGroupSkillsAsCompanyToFindResearchGroup))
                    .Select(s => s.SkillName)
                    .Distinct()
                    .Take(10)
                    .ToListAsync();
            }
            catch (Exception ex)
            {
                Console.WriteLine($"Πρόβλημα στην Ανάκτηση Τεχνολογιών: {ex.Message}");
                researchGroupSkillsSuggestions = new List<string>();
            }
        }
        else
        {
            researchGroupSkillsSuggestions.Clear();
        }

        StateHasChanged();
    }

    private void HandleResearchGroupSkillsKeyDown(KeyboardEventArgs e)
    {
        if (e.Key == "Enter" || e.Key == "Tab")
        {
            // Add manual text as a selected skill on Enter/Tab
            if (!string.IsNullOrWhiteSpace(searchResearchGroupSkillsAsCompanyToFindResearchGroup) &&
                !selectedResearchGroupSkills.Contains(searchResearchGroupSkillsAsCompanyToFindResearchGroup))
            {
                selectedResearchGroupSkills.Add(searchResearchGroupSkillsAsCompanyToFindResearchGroup);
                searchResearchGroupSkillsAsCompanyToFindResearchGroup = string.Empty;
                researchGroupSkillsSuggestions.Clear();
            }
        }
    }



    private async Task HandleResearchGroupKeywordsInput(ChangeEventArgs e)
    {
        searchResearchGroupKeywordsAsCompanyToFindResearchGroup = e.Value?.ToString().Trim() ?? string.Empty;
        researchGroupKeywordsSuggestions = new List<string>();

        if (searchResearchGroupKeywordsAsCompanyToFindResearchGroup.Length >= 1)
        {
            try
            {
                // First fetch all research groups from the database
                var allResearchGroups = await dbContext.ResearchGroups.ToListAsync();
            
                // Then perform the split operation on the client side
                researchGroupKeywordsSuggestions = allResearchGroups
                    .SelectMany(rg => rg.ResearchGroupKeywords.Split(',', StringSplitOptions.RemoveEmptyEntries))
                    .Select(keyword => keyword.Trim())
                    .Where(keyword => keyword.Contains(searchResearchGroupKeywordsAsCompanyToFindResearchGroup, StringComparison.OrdinalIgnoreCase))
                    .Distinct()
                    .Take(10)
                    .ToList();
            }
            catch (Exception ex)
            {
                Console.WriteLine($"Πρόβλημα στην Ανάκτηση Λέξεων Κλειδιών: {ex.Message}");
                researchGroupKeywordsSuggestions = new List<string>();
            }
        }
        else
        {
            researchGroupKeywordsSuggestions.Clear();
        }

        StateHasChanged();
    }

    private void SelectResearchGroupNameSuggestion(string suggestion)
    {
        searchResearchGroupNameAsCompanyToFindResearchGroup = suggestion;
        researchgroupNameSuggestions.Clear();
    }

    private void SelectResearchGroupAreasSuggestion(string suggestion)
    {
        if (!string.IsNullOrWhiteSpace(suggestion) && !selectedResearchGroupAreas.Contains(suggestion))
        {
            selectedResearchGroupAreas.Add(suggestion);
            researchGroupAreasSuggestions.Clear();
            searchResearchGroupAreasAsCompanyToFindResearchGroup = string.Empty;
        }
    }

    private void SelectResearchGroupSkillsSuggestion(string suggestion)
    {
        if (!string.IsNullOrWhiteSpace(suggestion) && !selectedResearchGroupSkills.Contains(suggestion))
        {
            selectedResearchGroupSkills.Add(suggestion);
            researchGroupSkillsSuggestions.Clear();
            searchResearchGroupSkillsAsCompanyToFindResearchGroup = string.Empty;
        }
    }

    private void SelectResearchGroupKeywordsSuggestion(string suggestion)
    {
        if (!string.IsNullOrWhiteSpace(suggestion) && !selectedResearchGroupKeywords.Contains(suggestion))
        {
            selectedResearchGroupKeywords.Add(suggestion);
            researchGroupKeywordsSuggestions.Clear();
            searchResearchGroupKeywordsAsCompanyToFindResearchGroup = string.Empty;
        }
    }

    private void RemoveSelectedResearchGroupArea(string area)
    {
        selectedResearchGroupAreas.Remove(area);
        StateHasChanged();
    }

    private void RemoveSelectedResearchGroupSkill(string skill)
    {
        selectedResearchGroupSkills.Remove(skill);
        StateHasChanged();
    }

    private void RemoveSelectedResearchGroupKeyword(string keyword)
    {
        selectedResearchGroupKeywords.Remove(keyword);
        StateHasChanged();
    }

    private async Task SearchResearchGroupsAsCompany()
    {
        try
        {
            hasSearchedForResearchGroups = true;
    
            // First get all research groups from the database
            var allResearchGroups = await dbContext.ResearchGroups.ToListAsync();
    
            // Then filter on the client side
            var filteredResearchGroups = allResearchGroups.AsEnumerable();

            if (!string.IsNullOrEmpty(searchResearchGroupNameAsCompanyToFindResearchGroup))
            {
                filteredResearchGroups = filteredResearchGroups
                    .Where(rg => rg.ResearchGroupName.Contains(searchResearchGroupNameAsCompanyToFindResearchGroup, StringComparison.OrdinalIgnoreCase));
            }

            if (!string.IsNullOrEmpty(searchResearchGroupSchoolAsCompanyToFindResearchGroup))
            {
                filteredResearchGroups = filteredResearchGroups
                    .Where(rg => rg.ResearchGroupSchool == searchResearchGroupSchoolAsCompanyToFindResearchGroup);
            }

            if (!string.IsNullOrEmpty(searchResearchGroupUniversityDepartmentAsCompanyToFindResearchGroup))
            {
                filteredResearchGroups = filteredResearchGroups
                    .Where(rg => rg.ResearchGroupUniversityDepartment == searchResearchGroupUniversityDepartmentAsCompanyToFindResearchGroup);
            }

            // UPDATED AREAS FILTER: Support both selected areas AND manual text input
            if (selectedResearchGroupAreas.Any() || !string.IsNullOrEmpty(searchResearchGroupAreasAsCompanyToFindResearchGroup))
            {
                // Create a combined list of search terms
                var areaSearchTerms = new List<string>();
            
                // Add manually typed text (if any)
                if (!string.IsNullOrEmpty(searchResearchGroupAreasAsCompanyToFindResearchGroup))
                {
                    areaSearchTerms.Add(searchResearchGroupAreasAsCompanyToFindResearchGroup.Trim());
                }
            
                // Add selected areas from dropdown
                areaSearchTerms.AddRange(selectedResearchGroupAreas);
            
                // Remove duplicates and empty entries
                areaSearchTerms = areaSearchTerms.Where(a => !string.IsNullOrWhiteSpace(a)).Distinct().ToList();

                filteredResearchGroups = filteredResearchGroups
                    .Where(rg => areaSearchTerms.Any(area => 
                        rg.ResearchGroupAreas.Split(',', StringSplitOptions.RemoveEmptyEntries)
                            .Select(a => a.Trim())
                            .Any(a => a.Contains(area, StringComparison.OrdinalIgnoreCase))
                    ));
            }

            // UPDATED SKILLS FILTER: Support both selected skills AND manual text input
            if (selectedResearchGroupSkills.Any() || !string.IsNullOrEmpty(searchResearchGroupSkillsAsCompanyToFindResearchGroup))
            {
                // Create a combined list of search terms
                var skillSearchTerms = new List<string>();
            
                // Add manually typed text (if any)
                if (!string.IsNullOrEmpty(searchResearchGroupSkillsAsCompanyToFindResearchGroup))
                {
                    skillSearchTerms.Add(searchResearchGroupSkillsAsCompanyToFindResearchGroup.Trim());
                }
            
                // Add selected skills from dropdown
                skillSearchTerms.AddRange(selectedResearchGroupSkills);
            
                // Remove duplicates and empty entries
                skillSearchTerms = skillSearchTerms.Where(s => !string.IsNullOrWhiteSpace(s)).Distinct().ToList();

                filteredResearchGroups = filteredResearchGroups
                    .Where(rg => skillSearchTerms.Any(skill => 
                        rg.ResearchGroupSkills.Split(',', StringSplitOptions.RemoveEmptyEntries)
                            .Select(s => s.Trim())
                            .Any(s => s.Contains(skill, StringComparison.OrdinalIgnoreCase))
                    ));
            }

            // UPDATED KEYWORDS FILTER: Simple text search (no suggestions/selection)
            if (!string.IsNullOrEmpty(searchResearchGroupKeywordsAsCompanyToFindResearchGroup))
            {
                filteredResearchGroups = filteredResearchGroups
                    .Where(rg => rg.ResearchGroupKeywords != null && 
                                rg.ResearchGroupKeywords.Contains(searchResearchGroupKeywordsAsCompanyToFindResearchGroup, StringComparison.OrdinalIgnoreCase));
            }

            searchResultsAsCompanyToFindResearchGroup = filteredResearchGroups.ToList();
            currentResearchGroupPage_SearchForResearchGroupsAsCompany = 1;
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Πρόβλημα στην Αναζήτηση Ερευνητικών Ομάδων: {ex.Message}");
            searchResultsAsCompanyToFindResearchGroup = new List<ResearchGroup>();
        }

        StateHasChanged();
    }

    private void HandleResearchGroupAreasKeyDown(KeyboardEventArgs e)
    {
        if (e.Key == "Enter" || e.Key == "Tab")
        {
            if (!string.IsNullOrWhiteSpace(searchResearchGroupAreasAsCompanyToFindResearchGroup) &&
                !selectedResearchGroupAreas.Contains(searchResearchGroupAreasAsCompanyToFindResearchGroup))
            {
                selectedResearchGroupAreas.Add(searchResearchGroupAreasAsCompanyToFindResearchGroup);
                searchResearchGroupAreasAsCompanyToFindResearchGroup = string.Empty;
                researchGroupAreasSuggestions.Clear();
            }
        }
    }

    private void ClearSearchFieldsAsCompanyToFindResearchGroup()
    {
        searchResearchGroupNameAsCompanyToFindResearchGroup = "";
        searchResearchGroupSchoolAsCompanyToFindResearchGroup = "";
        searchResearchGroupUniversityDepartmentAsCompanyToFindResearchGroup = "";
        searchResearchGroupAreasAsCompanyToFindResearchGroup = "";
        searchResearchGroupSkillsAsCompanyToFindResearchGroup = "";
        searchResearchGroupKeywordsAsCompanyToFindResearchGroup = "";
    
        selectedResearchGroupAreas.Clear();
        selectedResearchGroupSkills.Clear();
    
        researchgroupNameSuggestions.Clear();
        researchGroupAreasSuggestions.Clear();
        researchGroupSkillsSuggestions.Clear();
    
        searchResultsAsCompanyToFindResearchGroup = new List<ResearchGroup>();
        hasSearchedForResearchGroups = false;
    
        StateHasChanged();
    }

    private void ShowResearchGroupDetailsOnEyeIconWhenSearchForResearchGroupAsCompany(ResearchGroup researchGroup)
    {
        selectedResearchGroupWhenSearchForResearchGroupsAsCompany = researchGroup;
        showResearchGroupDetailsModalWhenSearchForResearchGroupsAsCompany = true;
        StateHasChanged();
    }


    // Pagination methods (similar to professor search)
    private IEnumerable<ResearchGroup> GetPaginatedResearchGroupResults()
    {
        return searchResultsAsCompanyToFindResearchGroup
            .Skip((currentResearchGroupPage_SearchForResearchGroupsAsCompany - 1) * ResearchGroupsPerPage_SearchForResearchGroupsAsCompany)
            .Take(ResearchGroupsPerPage_SearchForResearchGroupsAsCompany);
    }

    private int totalResearchGroupPages_SearchForResearchGroupsAsCompany => 
        (int)Math.Ceiling((double)searchResultsAsCompanyToFindResearchGroup.Count / ResearchGroupsPerPage_SearchForResearchGroupsAsCompany);

    private void GoToResearchGroupPage(int pageNumber)
    {
        currentResearchGroupPage_SearchForResearchGroupsAsCompany = pageNumber;
    }

    private void OnPageSizeChange_SearchForResearchGroupsAsCompany(ChangeEventArgs e)
    {
        if (int.TryParse(e.Value?.ToString(), out int newSize) && newSize > 0)
        {
            ResearchGroupsPerPage_SearchForResearchGroupsAsCompany = newSize;
            currentResearchGroupPage_SearchForResearchGroupsAsCompany = 1;
            StateHasChanged();
        }
    }

    private void GoToFirstResearchGroupPage()
    {
        currentResearchGroupPage_SearchForResearchGroupsAsCompany = 1;
        StateHasChanged();
    }

    private void PreviousResearchGroupPage()
    {
        if (currentResearchGroupPage_SearchForResearchGroupsAsCompany > 1)
        {
            currentResearchGroupPage_SearchForResearchGroupsAsCompany--;
            StateHasChanged();
        }
    }

    private List<int> GetVisibleResearchGroupPages()
    {
        var pages = new List<int>();
        int currentPage = currentResearchGroupPage_SearchForResearchGroupsAsCompany;
        int totalPages = totalResearchGroupPages_SearchForResearchGroupsAsCompany;

        // Always show first page
        pages.Add(1);

        // Show pages around current page
        if (currentPage > 3) pages.Add(-1); // Ellipsis

        int start = Math.Max(2, currentPage - 1);
        int end = Math.Min(totalPages - 1, currentPage + 1);

        for (int i = start; i <= end; i++)
        {
            pages.Add(i);
        }

        if (currentPage < totalPages - 2) pages.Add(-1); // Ellipsis

        // Always show last page if different from first
        if (totalPages > 1) pages.Add(totalPages);

        return pages;
    }

    private void NextResearchGroupPage()
    {
        if (currentResearchGroupPage_SearchForResearchGroupsAsCompany < totalResearchGroupPages_SearchForResearchGroupsAsCompany)
        {
            currentResearchGroupPage_SearchForResearchGroupsAsCompany++;
            StateHasChanged();
        }
    }

    private void GoToLastResearchGroupPage()
    {
        currentResearchGroupPage_SearchForResearchGroupsAsCompany = totalResearchGroupPages_SearchForResearchGroupsAsCompany;
        StateHasChanged();
    }

    private string searchSchoolAsCompanyToFindProfessor = "";
    // Property to get the filtered departments for professors based on selected school
    private List<string> filteredProfessorDepartments => 
        string.IsNullOrEmpty(searchSchoolAsCompanyToFindProfessor) 
            ? GetAllProfessorDepartments() 
            : universityDepartments.ContainsKey(searchSchoolAsCompanyToFindProfessor)
                ? universityDepartments[searchSchoolAsCompanyToFindProfessor]
                : new List<string>();

    // Method to get all departments from all schools (for when no school is selected)
    private List<string> GetAllProfessorDepartments()
    {
        return universityDepartments.Values.SelectMany(depts => depts).Distinct().ToList();
    }

    // Method to handle school change for professor search
    private void OnProfessorSchoolChanged()
    {
        // Clear department selection when school changes
        searchDepartmentAsCompanyToFindProfessor = "";
        StateHasChanged();
    }

    private void HandleProfessorSchoolChanged(ChangeEventArgs e)
    {
        searchSchoolAsCompanyToFindProfessor = e.Value?.ToString();
        OnProfessorSchoolChanged();
    }


    private string searchSchoolAsCompanyToFindStudent = "";
    // Property to get the filtered departments for students based on selected school
    private List<string> filteredStudentDepartments => 
        string.IsNullOrEmpty(searchSchoolAsCompanyToFindStudent) 
            ? GetAllStudentDepartments() 
            : universityDepartments.ContainsKey(searchSchoolAsCompanyToFindStudent)
                ? universityDepartments[searchSchoolAsCompanyToFindStudent]
                : new List<string>();

    // Method to get all departments from all schools (for when no school is selected)
    private List<string> GetAllStudentDepartments()
    {
        return universityDepartments.Values.SelectMany(depts => depts).Distinct().ToList();
    }

    // Method to handle school change for student search
    private async Task OnStudentSchoolChanged(ChangeEventArgs e)
    {
        searchSchoolAsCompanyToFindStudent = e.Value?.ToString() ?? "";
        // Clear department selection when school changes
        searchDepartmentAsCompanyToFindStudent = "";
        await InvokeAsync(StateHasChanged);
    }

    private string searchSchoolAsProfessorToFindStudent = "";
    private List<string> filteredStudentDepartmentsAsProfessor => 
    string.IsNullOrEmpty(searchSchoolAsProfessorToFindStudent) 
        ? GetAllStudentDepartments() 
        : universityDepartments.ContainsKey(searchSchoolAsProfessorToFindStudent)
            ? universityDepartments[searchSchoolAsProfessorToFindStudent]
            : new List<string>();

    // Method to handle school change for student search as Professor
    private async Task OnStudentSchoolChangedAsProfessor(ChangeEventArgs e)
    {
        searchSchoolAsProfessorToFindStudent = e.Value?.ToString() ?? "";
        // Clear department selection when school changes
        searchDepartmentAsProfessorToFindStudent = "";
        await InvokeAsync(StateHasChanged);
    }

    private string searchSchoolAsRGToFindProfessor = "";
    // Property to get the filtered departments for professors based on selected school (Research Group search)
    private List<string> filteredProfessorDepartmentsAsRG => 
        string.IsNullOrEmpty(searchSchoolAsRGToFindProfessor) 
            ? GetAllProfessorDepartments() 
            : universityDepartments.ContainsKey(searchSchoolAsRGToFindProfessor)
                ? universityDepartments[searchSchoolAsRGToFindProfessor]
                : new List<string>();

    // Method to handle school change for professor search as Research Group
    private async Task OnProfessorSchoolChangedAsRG(ChangeEventArgs e)
    {
        searchSchoolAsRGToFindProfessor = e.Value?.ToString() ?? "";
        // Clear department selection when school changes
        searchDepartmentAsRGToFindProfessor = "";
        await InvokeAsync(StateHasChanged);
    }







    // Add these variables to your component
    private List<FacultyMemberInfo> facultyMembers = new List<FacultyMemberInfo>();
    private List<NonFacultyMemberInfo> nonFacultyMembers = new List<NonFacultyMemberInfo>();
    private List<SpinOffCompanyInfo> spinOffCompanies = new List<SpinOffCompanyInfo>();
    private int facultyMembersCount = 0;
    private int nonFacultyMembersCount = 0;
    private int activeResearchActionsCount = 0;
    private int patentsCount = 0;

    // Helper classes
    public class FacultyMemberInfo
    {
        public string FullName { get; set; } = "";
        public string Email { get; set; } = "";
    }

    public class NonFacultyMemberInfo
    {
        public string FullName { get; set; } = "";
        public string Email { get; set; } = "";
    }

    public class SpinOffCompanyInfo
    {
        public string CompanyTitle { get; set; } = "";
        public string CompanyAFM { get; set; } = "";
    }

    // Method to load modal data
    private async Task LoadResearchGroupDetailsData(string researchGroupEmail)
    {
        try
        {
            // Load Faculty Members - Get from Professors table using PK_ProfessorEmail
            var facultyMembersData = await dbContext.ResearchGroup_Professors
                .Where(rp => rp.PK_ResearchGroupEmail == researchGroupEmail)
                .Join(dbContext.Professors,
                      rp => rp.PK_ProfessorEmail,
                      p => p.ProfEmail,
                      (rp, p) => new FacultyMemberInfo
                      {
                          FullName = $"{p.ProfName} {p.ProfSurname}",
                          Email = p.ProfEmail
                      })
                .ToListAsync();

            facultyMembers = facultyMembersData;
            facultyMembersCount = facultyMembers.Count;

            // Load Non-Faculty Members - Get from Students table using PK_NonFacultyMemberEmail
            var nonFacultyMembersData = await dbContext.ResearchGroup_NonFacultyMembers
                .Where(rn => rn.PK_ResearchGroupEmail == researchGroupEmail)
                .Join(dbContext.Students,
                      rn => rn.PK_NonFacultyMemberEmail,
                      s => s.Email,
                      (rn, s) => new NonFacultyMemberInfo
                      {
                          FullName = $"{s.Name} {s.Surname}",
                          Email = s.Email
                      })
                .ToListAsync();

            nonFacultyMembers = nonFacultyMembersData;
            nonFacultyMembersCount = nonFacultyMembers.Count;

            // Load Spin-off Companies
            spinOffCompanies = await dbContext.ResearchGroup_SpinOffCompany
                .Where(s => s.ResearchGroupEmail == researchGroupEmail)
                .Select(s => new SpinOffCompanyInfo
                {
                    CompanyTitle = s.ResearchGroup_SpinOff_CompanyTitle,
                    CompanyAFM = s.ResearchGroup_SpinOff_CompanyAFM
                })
                .ToListAsync();

            // Count Active Research Actions
            activeResearchActionsCount = await dbContext.ResearchGroup_ResearchActions
                .Where(r => r.ResearchGroupEmail == researchGroupEmail && 
                           r.ResearchGroup_ProjectStatus == "OnGoing")
                .CountAsync();

            // Count Patents
            patentsCount = await dbContext.ResearchGroup_Patents
                .Where(p => p.ResearchGroupEmail == researchGroupEmail)
                .CountAsync();

            // DEBUG: Check if data is being loaded
            Console.WriteLine($"Faculty Members: {facultyMembersCount}");
            Console.WriteLine($"Non-Faculty Members: {nonFacultyMembersCount}");
            Console.WriteLine($"Spin-off Companies: {spinOffCompanies.Count}");
            Console.WriteLine($"Active Research Actions: {activeResearchActionsCount}");
            Console.WriteLine($"Patents: {patentsCount}");
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Πρόβλημα στην φόρτωση λεπτομερειών ομάδας: {ex.Message}");
            Console.WriteLine($"Stack Trace: {ex.StackTrace}");
        }
    }

    // Update your modal opening method to load data
    private async Task ShowResearchGroupDetailsModal(ResearchGroup researchGroup)
    {
        selectedResearchGroupWhenSearchForResearchGroupsAsCompany = researchGroup;
        showResearchGroupDetailsModalWhenSearchForResearchGroupsAsCompany = true;
    
        // Load additional data
        if (!string.IsNullOrEmpty(researchGroup.ResearchGroupEmail))
        {
            await LoadResearchGroupDetailsData(researchGroup.ResearchGroupEmail);
        }
    
        StateHasChanged();
    }

    // Clear data when closing modal
    private void CloseModalResearchGroupDetailsOnEyeIconWhenSearchForResearchGroupsAsCompany()
    {
        showResearchGroupDetailsModalWhenSearchForResearchGroupsAsCompany = false;
        selectedResearchGroupWhenSearchForResearchGroupsAsCompany = null;
        facultyMembers.Clear();
        nonFacultyMembers.Clear();
        spinOffCompanies.Clear();
        facultyMembersCount = 0;
        nonFacultyMembersCount = 0;
        activeResearchActionsCount = 0;
        patentsCount = 0;
    }

    private void GoToFirstPageForCompanyAnnouncements()
    {
        currentPageForCompanyAnnouncements = 1;
    }

    private void PreviousPageForCompanyAnnouncements()
    {
        if (currentPageForCompanyAnnouncements > 1)
        {
            currentPageForCompanyAnnouncements--;
        }
    }

    private void NextPageForCompanyAnnouncements()
    {
        if (currentPageForCompanyAnnouncements < totalPagesForCompanyAnnouncements)
        {
            currentPageForCompanyAnnouncements++;
        }
    }

    private void GoToLastPageForCompanyAnnouncements()
    {
        currentPageForCompanyAnnouncements = totalPagesForCompanyAnnouncements;
    }

    private void GoToPageForCompanyAnnouncements(int pageNumber)
    {
        currentPageForCompanyAnnouncements = pageNumber;
    }

    private List<int> GetVisiblePagesForCompanyAnnouncements()
    {
        var pages = new List<int>();
        int current = currentPageForCompanyAnnouncements;
        int total = totalPagesForCompanyAnnouncements;

        pages.Add(1);

        if (current > 3)
        {
            pages.Add(-1);
        }

        int start = Math.Max(2, current - 1);
        int end = Math.Min(total - 1, current + 1);

        for (int i = start; i <= end; i++)
        {
            pages.Add(i);
        }

        if (current < total - 2)
        {
            pages.Add(-1);
        }

        if (total > 1)
        {
            pages.Add(total);
        }

        return pages;
    }

    private void GoToFirstPageForProfessorAnnouncements()
    {
        currentPageForProfessorAnnouncements = 1;
    }

    private void PreviousPageForProfessorAnnouncements()
    {
        if (currentPageForProfessorAnnouncements > 1)
        {
            currentPageForProfessorAnnouncements--;
        }
    }

    private void NextPageForProfessorAnnouncements()
    {
        if (currentPageForProfessorAnnouncements < totalPagesForProfessorAnnouncements)
        {
            currentPageForProfessorAnnouncements++;
        }
    }

    private void GoToLastPageForProfessorAnnouncements()
    {
        currentPageForProfessorAnnouncements = totalPagesForProfessorAnnouncements;
    }

    private void GoToPageForProfessorAnnouncements(int pageNumber)
    {
        currentPageForProfessorAnnouncements = pageNumber;
    }

    private List<int> GetVisiblePagesForProfessorAnnouncements()
    {
        var pages = new List<int>();
        int current = currentPageForProfessorAnnouncements;
        int total = totalPagesForProfessorAnnouncements;

        pages.Add(1);

        if (current > 3)
        {
            pages.Add(-1);
        }

        int start = Math.Max(2, current - 1);
        int end = Math.Min(total - 1, current + 1);

        for (int i = start; i <= end; i++)
        {
            pages.Add(i);
        }

        if (current < total - 2)
        {
            pages.Add(-1);
        }

        if (total > 1)
        {
            pages.Add(total);
        }

        return pages;
    }


    List<string> AvailableSchools = new();
    List<string> AvailableDepartments = new();
    string SelectedAreaSchool = "";
    string SelectedAreaDepartment = "";
    string SelectedSkillSchool = "";
    string SelectedSkillDepartment = "";



    // Event handlers for dropdowns
    private void FilterAreasBySchool(ChangeEventArgs e)
    {
        SelectedAreaSchool = e.Value?.ToString();
        UpdateAreasChart();
    }

    private void FilterAreasByDepartment(ChangeEventArgs e)
    {
        SelectedAreaDepartment = e.Value?.ToString();
        UpdateAreasChart();
    }

    private void FilterSkillsBySchool(ChangeEventArgs e)
    {
        SelectedSkillSchool = e.Value?.ToString();
        UpdateSkillsChart();
    }

    private void FilterSkillsByDepartment(ChangeEventArgs e)
    {
        SelectedSkillDepartment = e.Value?.ToString();
        UpdateSkillsChart();
    }

    private void UpdateAreasChart()
    {
        var filtered = StudentsWithAuth0Details
            .Where(s => (string.IsNullOrEmpty(SelectedAreaSchool) || s.School == SelectedAreaSchool) &&
                       (string.IsNullOrEmpty(SelectedAreaDepartment) || s.Department == SelectedAreaDepartment))
            .ToList();

        // Calculate distribution for filtered data - SPLIT comma-separated areas
        var filteredAreaDistribution = new Dictionary<string, int>();
        foreach (var student in filtered)
        {
            if (!string.IsNullOrWhiteSpace(student.AreasOfExpertise))
            {
                var areas = student.AreasOfExpertise.Split(',', StringSplitOptions.RemoveEmptyEntries);
                foreach (var area in areas.Select(a => a.Trim()))
                {
                    if (filteredAreaDistribution.ContainsKey(area))
                        filteredAreaDistribution[area]++;
                    else
                        filteredAreaDistribution[area] = 1;
                }
            }
        }

        var areaLabels = filteredAreaDistribution.Keys.ToArray();
        var areaValues = filteredAreaDistribution.Values.ToArray();

        // Update only the areas chart, preserve skills chart
        JS.InvokeVoidAsync("renderCharts", 
            new { labels = areaLabels, values = areaValues },
            null); // null means don't update skills
    }

    private void UpdateSkillsChart()
    {
        var filtered = StudentsWithAuth0Details
            .Where(s => (string.IsNullOrEmpty(SelectedSkillSchool) || s.School == SelectedSkillSchool) &&
                       (string.IsNullOrEmpty(SelectedSkillDepartment) || s.Department == SelectedSkillDepartment))
            .ToList();

        // Calculate distribution for filtered data
        var filteredSkillDistribution = new Dictionary<string, int>();
        foreach (var student in filtered)
        {
            if (!string.IsNullOrWhiteSpace(student.Keywords))
            {
                var skills = student.Keywords.Split(',', StringSplitOptions.RemoveEmptyEntries);
                foreach (var skill in skills.Select(s => s.Trim()))
                {
                    if (filteredSkillDistribution.ContainsKey(skill))
                        filteredSkillDistribution[skill]++;
                    else
                        filteredSkillDistribution[skill] = 1;
                }
            }
        }

        var skillLabels = filteredSkillDistribution.Keys.ToArray();
        var skillValues = filteredSkillDistribution.Values.ToArray();

        // Update only the skills chart, preserve areas chart
        JS.InvokeVoidAsync("renderCharts", 
            null, // null means don't update areas
            new { labels = skillLabels, values = skillValues });
    }

    // Add this method to update both charts when needed
    private void UpdateBothCharts()
    {
        UpdateAreasChart();
        UpdateSkillsChart();
    }

}


